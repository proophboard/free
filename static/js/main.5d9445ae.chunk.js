(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1037:function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:[]},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#",default:!1},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:[],enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},1198:function(e,t){},1199:function(e,t){},1200:function(e,t){},1210:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1210},1211:function(e,t,n){e.exports=n.p+"static/media/cody.63c5836d.svg"},1212:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAIAAAABlV4SAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABQElEQVRoge3ZMW7CMBTG8eeIQIYs7VZ3RCJzxTF6gKysrKh7VYZOSFwgB4DTMHOAMjK3qlSzdeiAnx23/hp9//mJvJ8SS1Ewzjn55xW5F0gQDRjRgBENGNGAEQ0YDcEw0gx9vR0/98/udPztbX5kbFO2L8V94xnTvLd+vD668ynRYmEZ20xWu+szqmcpF0BENDd/COeBBoxowIgGjGjAiAaMaMCIBoxowIgGjGjAiAaMhmBQfatMnrGzsl17P0Iqy3MfEgIklyEhQHI9S9+9Pz14Z6rN4foA+pkupnP/zB/sEV9Vl+3aOwVsqOrxsjO31juIaqjq8bJTHn1IQwhAEA2BAIEzhAMEyxAFECBDLECUBnNzF/HTAfUAiNJQLrbGzuIu4N9gOp+s9n3eoFT/sYMHcx56RANGNGBEA0Y0YHQBkZ0zQP+umloAAAAASUVORK5CYII="},1215:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACoNJREFUeNrs3Y9V20geB3CxLwW4g3UqWFLBmQoOKohTwUIFOBXAVmC2AnIV2FcB3grwVQBXgW/mMn6PI4STbP0dfT7v6W02L4CRNF/N/DQjFQUAAAAAAAAAAAAAAAAAAABt2+12i7A9he0mbBN7BMbR8Gdhe9z9rxgEc3sH8m3407Ctdu97iAFhb0E+DX+SuvlV3MfAsPdg2I1/nrr3h3hKdQL1ARjgOP9hV49H9QEYzjj/fteMlfoA9Hecv6jYoG9efF2VYcLSsAD6Nc5/rHglP32j57CsWh+w96Hbcf6q4lj+vO3vCdQ/zm/0al1HrwKov/G3Nl4/pq7gSEG9Df/8gCvyrMYex33FHselowbHN77TA8bk8wZrDg8VP8vMUYTDut9Vp++2MmsvXt0rDkNMK4acGlifAwqG2vBnFcf5na/cK7nC0LJjyLkRDTG8oA/j/Kxusx14m1J9gNE1/qrLdFdDaSgp2CpPVFIfYCzj/FHcSuvTLUzowzh/lJNpDpzEZFoxWY3zR73c1n5grON8V74fe0KWHZP9ON+SWvuIEXb3Xd2q95KyvBvCuE5k97+Prw9YdszgTt7OlulmWh+w7JjBnKzmwDdXHzCtmN52V62Ca2dfW3aME1LgClx0SQ25DLno4KRTlOrXMVF0pZVup9tS/T5GbrvSyIllYsqwgtqyY2ob53vi7TCP3alpxRwzzjd9N5/em8VXVBrnW57quDqurhSuFBn27NzBwVhRbUdtR7dQtVivz92dUR5494t5XR8wv2MkXT/Td/lZfcC0YgfXwXWRcJHIbZxn1RhVz5uqqzxv7LX+jvct0+XQ+kDZZcerseyXXzL7fbZhOzs5ObkI29Zpz144H57DdhX++Clsa3skrwB4DttVOMAfw+bg8l4QbMJ2Fv54kS4Yo/Yhk9/jj3BQb53eVAiCb6GrHy8cqzHvh1+cCiAAAAEACABAAAACABAAgAAABAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEACAAAAEACABAAAACABAAgAAABAAgAAABAAgAQACAAAAEACAAAAEACABAAAACABAAkI1txb8XAJCLk5OT2NDvXv31c9i+jmUffHAaMPIQ+LLb7f4Z/jhNjf8u/N2zAIDxhMCdGgAwOnoADEboqk9TV3324q9/C9skbJuw/fvF369jlz5c3Tf2nABgmA0+NuzzsP09NfrJO/989ur/r9P3KFI4xECIY/31mMb4uZ0Qi93bFvbOUfu1LYuSn2cWtvsGP0f83ueOvBoA/Qqi2PBX4Y+rdOVvSvzeMQQewzYXANCOX3/W1Q/bTWr4sxY/T6wnLFMQnAsAaL7BvW78p+E/D2G77Phz3aehwUQAQDtd/nlq/NOefKTYC4i9gZkAgPrNXjX+ZQ8/Y+wBrMZSGxAAdHXlX/b8Y8bawFIAQL2NfzGAxr83zz0EBABtux7Y553nPM9EAECJ0Mq1JiAAoJybdMtSAMAIxbsDy9zmCQgAKC/2AK4FAIzXZU5DAQEAB9QDBACM1yyXuwICAA5zLQBgvKY59AIEABzudwEA43U69KXDHgpKH62L7w/wjA/vfP1U32nx/UnA50U/niPwOX1eAQBH2BbfX8n1reRTe6/S1TcW47q8Cscg+mIIAIeJjf0qNPqP8Q09VR7ZHf5tfMT3WdHtu/wmQy4GCgC6bvxnoRHfHvNNwtcvOr4K/00AwGGNv5Y396T3+111OAwQAFDBRd2v7Uo9iXVHw4CZAIBy4li/qYba1VBAAEBJfzb1jUOwbGPAqAMIAMari7sCpwIAeiD1Atp+Lfgkvb5cAHTg89hf8kh7w4ycegG5BEBM3vi8tlWOD27kIGsBML4hwCxsD/FlDmN7ySM/DAPiEOC55R/7mwBo1rbkv4vDgcecX+hAKa3XAQRAs6l+F/5zVrJ7Fw/G9Zjf/c5/VxQaAuQ0BHixAORLyS5erA/cp/rAVJsYlW3LP08PoOXewMei/D3fWRoW3KgPCICmDO0iM+giYFw6mlaCxSD4VvLLLlMQXGofAqABAqCDINiG7SLVB8oc9NgDiD2Bh6E/0on3zwt7YQQB8Ko+EHsDVyXrA7FoE2sD9+oDCIB8guA2DQvKPmjiPA0LFuoD2Wl7LoAhQI/qA1cpCNYlv+w6BcFcu8nGRgCMMABe1QdibeCiQn1gP61YfQBDgEyC4FuqD3wt2S2cpfrAUn0AAZBPECzSsOCu5JfE4cCD+gACIK/6QJxJ+KmoMK04BYFpxQiATIJg82JacZn6QBwK3Ft2jADIKwjuUm+gSn3AsmMEQGbDgkUKgir1AcuOEQAZBcE21Qfi0KDMPeSXy45n9mDvtD1U2wqAPIIgTiv+VFRbdryy7Lh3JgJAABxbH7DsGEMA9YFK04r3y47n9mA39MQEQBP1gbOi2rLjpWXHnekiAAwBRlIfsOxYALx5kRAA4wkCy44FwEvPQ9tBAqCe+kDsCZSdVhztpxWrDzSr7Rd2bgTAeINgU3HZ8bSw7Lhp5gAIgNaDwLLjHkhrNdoeZv1LALAPgkVx4LJje68WXfSq1gKA1/WB/bTiMieHtxnV53MHP9MQgDeDYG3Zcavd/2kX4/8hPoZcALQbBHE4sF92XLYb+5DhtOKmf5ffO/idNs5wKl2l0sSgsp6aepvRrn2rBvfrJO2rtnnTFAedsLM0Vbis2pcd77oxb2h/Ljv6fabOZo45cecVr1y1LTvuqME81V3fiIXTjn6XR2cwdXVfbyqefEdPK951p7YQiN+no65/dOPspe76wKpiQ5oPMABqGT+nYdRTh5/fnRoaqw88VjgRD1p2vOuHymsjDuwx6f4zuCC4rHiFq7TseNcvT6mQN08BOHmjqz/vsNj3wxBsyOfWieY1nPpA+E8ca5a9SsZ1CH+E7TbOSPx/AWAPH+zjECcA7ZkINJSkPu5tRnN7sBF3Q278egDD7hGcpx5B2a7+fjqyHoCrvx5ABj2CysuO9QRc/QVAfkGwKMq/zWhqj9Xmaw6/hADIIwS2JZcdP9tbtbjN4eqvBpBvfWCe6gOTV43/41t3BNQAKvnpfhQA9CkEYuOPQRAfjPlX8c7tQAFQyUWsv2TTe3Q8EQCl3aWhViEAEADjEh/4cZZL139PERDKjfu/5Nb4BQCUH/dn+cgvAQDvi1f+da6/nACgC3cDavx3OR8IAUAX/iy+PyK9z2P+i9wbf/TBuUgXYuNKNx+WPfto25zH/HoA9CoEiu/rGLY9Gpp8GkvjFwD0IQQ2KQS6nF0XAyje48/yVp8AoO8hEB92El+rftZybyD+rKu4rDrnSr8AYChBsE7POIgFwia74fF7f0kN/3bU+9xpRwdTgc/KXHHT47bjW35nxfEv+4w/7x9xqJHLUt46uAtA3+sDmxQGkxQCMQx+Ld5/uEkcx/+VuvibMRX19ADIpgeAGgAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEANAjH+wCgnXLP+/ZLgcAAAAAAAAAAAAAAAAAAAB4238EGABeFisyE/a2NgAAAABJRU5ErkJggg=="},1216:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Message",function(){return ot});var a={};n.r(a),n.d(a,"notify",function(){return st}),n.d(a,"info",function(){return ct}),n.d(a,"error",function(){return ut});var o={};n.r(o),n.d(o,"publishMessageHandled",function(){return lt});var i={};n.r(i),n.d(i,"Command",function(){return a}),n.d(i,"Event",function(){return o});var s={};n.r(s),n.d(s,"SERVER_CONTEXT",function(){return wt}),n.d(s,"SIGN_IN",function(){return At}),n.d(s,"FETCH_USER",function(){return _t}),n.d(s,"LOAD_IIO_USERS_INFO",function(){return Ut}),n.d(s,"IIO_USERS_INFO_LOADED",function(){return Bt}),n.d(s,"USER_SETTINGS_LOADED",function(){return Rt}),n.d(s,"USER_SETTING_UPSERTED",function(){return Nt}),n.d(s,"UPDATE_PROFILE",function(){return Lt}),n.d(s,"UPDATE_PASSWORD",function(){return Dt}),n.d(s,"UPSERT_USER_SETTING",function(){return Pt}),n.d(s,"SWITCH_ACTIVE_ORGANIZATION",function(){return Mt}),n.d(s,"ACTIVE_ORGANIZATION_SWITCHED",function(){return zt});var c={};n.r(c),n.d(c,"signIn",function(){return Ft}),n.d(c,"updateProfile",function(){return Gt}),n.d(c,"updatePassword",function(){return Vt}),n.d(c,"upsertUserSetting",function(){return Ht}),n.d(c,"switchActiveOrganization",function(){return Wt});var u={};n.r(u),n.d(u,"getUser",function(){return qt}),n.d(u,"syncUsername",function(){return Jt}),n.d(u,"getInspectioUsersInfo",function(){return Yt}),n.d(u,"getInspectioUserInfoByEmail",function(){return Qt}),n.d(u,"getUserSettings",function(){return Kt}),n.d(u,"upsertUserSetting",function(){return Zt}),n.d(u,"updateProfile",function(){return Xt}),n.d(u,"updatePassword",function(){return $t}),n.d(u,"uploadAvatar",function(){return en}),n.d(u,"deleteAvatar",function(){return tn}),n.d(u,"switchActiveOrganization",function(){return nn});var l={};n.r(l),n.d(l,"iioUsersInfoLoaded",function(){return rn}),n.d(l,"userSettingsLoaded",function(){return an}),n.d(l,"userSettingUpserted",function(){return on}),n.d(l,"activeOrganizationSwitched",function(){return sn});var d={};n.r(d),n.d(d,"sendHttpRequest",function(){return un}),n.d(d,"responseAction",function(){return ln}),n.d(d,"resetWebData",function(){return dn});var m={};n.r(m),n.d(m,"getMessageBoxRequestConfig",function(){return mn});var p={};n.r(p),n.d(p,"fetchUser",function(){return bn}),n.d(p,"loadUsersInfo",function(){return gn});var f={};n.r(f),n.d(f,"Command",function(){return c}),n.d(f,"Query",function(){return p}),n.d(f,"Event",function(){return l}),n.d(f,"Api",function(){return u}),n.d(f,"Type",function(){return s});var h={};n.r(h),n.d(h,"TYPE_FREE",function(){return vn}),n.d(h,"TYPE_BASIC",function(){return On}),n.d(h,"TYPE_PREMIUM",function(){return yn}),n.d(h,"TYPE_CUSTOM",function(){return En}),n.d(h,"defaultUserProps",function(){return In}),n.d(h,"assertAccountType",function(){return kn}),n.d(h,"fromString",function(){return Sn}),n.d(h,"fromUserToken",function(){return jn}),n.d(h,"freeAccount",function(){return xn}),n.d(h,"Account",function(){return Tn});var b={};n.r(b),n.d(b,"AGGREGATE_TYPE",function(){return zn}),n.d(b,"defaultIioUserInfoProps",function(){return Fn}),n.d(b,"createIioUserInfoFromServerData",function(){return Gn}),n.d(b,"createAnonymous",function(){return Vn}),n.d(b,"IioUserInfo",function(){return Hn});var g={};n.r(g),n.d(g,"TYPE_ANONYMOUS",function(){return Wn}),n.d(g,"TYPE_USER",function(){return qn}),n.d(g,"TYPE_ADMIN",function(){return Jn}),n.d(g,"defaultUserProps",function(){return Yn}),n.d(g,"fromtString",function(){return Qn}),n.d(g,"anonymousRole",function(){return Kn}),n.d(g,"assertRoleType",function(){return Zn}),n.d(g,"Role",function(){return Xn});var v={};n.r(v),n.d(v,"withAnonymous",function(){return $n}),n.d(v,"fromToken",function(){return er}),n.d(v,"defaultUserProps",function(){return tr}),n.d(v,"RoleMap",function(){return nr});var O={};n.r(O),n.d(O,"defaultUserProps",function(){return rr}),n.d(O,"UserInfo",function(){return ar});var y={};n.r(y),n.d(y,"installUserOrganization",function(){return pr}),n.d(y,"setUpImplicitOrganization",function(){return fr}),n.d(y,"setUpExplicitOrganization",function(){return hr}),n.d(y,"fetchOrganization",function(){return br}),n.d(y,"fetchUserOrganizations",function(){return gr}),n.d(y,"inviteUserToOrganization",function(){return vr}),n.d(y,"revokeUserOrganizationInvitation",function(){return Or}),n.d(y,"resendUserOrganizationInvitation",function(){return yr}),n.d(y,"acceptInvitationToOrganization",function(){return Er}),n.d(y,"promoteUserToOrganizationAdmin",function(){return Ir}),n.d(y,"demoteUserToOrganizationMember",function(){return kr}),n.d(y,"removeUserFromOrganization",function(){return Sr}),n.d(y,"renameOrganization",function(){return jr}),n.d(y,"removeGuestFromOrganization",function(){return xr}),n.d(y,"turnGuestIntoMember",function(){return Tr});var E={};n.r(E),n.d(E,"SET_UP_EXPLICIT_ORGANIZATION",function(){return Cr}),n.d(E,"EXPLICIT_ORGANIZATION_SET_UP",function(){return wr}),n.d(E,"EXPLICIT_ORGANIZATION_SET_UP_FAILED",function(){return Ar}),n.d(E,"INVITE_USER_TO_ORGANIZATION",function(){return _r}),n.d(E,"USER_INVITED_TO_ORGANIZATION",function(){return Ur}),n.d(E,"REVOKE_USER_ORGANIZATION_INVITATION",function(){return Br}),n.d(E,"RESEND_USER_ORGANIZATION_INVITATION",function(){return Rr}),n.d(E,"USER_ORGANIZATION_INVITATION_REVOKED",function(){return Nr}),n.d(E,"USER_ORGANIZATION_INVITATION_RESENT",function(){return Lr}),n.d(E,"ACCEPT_INVITATION_TO_ORGANIZATION",function(){return Dr}),n.d(E,"INVITATION_TO_ORGANIZATION_ACCEPTED",function(){return Pr}),n.d(E,"PROMOTE_USER_TO_ORGANIZATION_ADMIN",function(){return Mr}),n.d(E,"USER_PROMOTED_TO_ORGANIZATION_ADMIN",function(){return zr}),n.d(E,"DEMOTE_USER_TO_ORGANIZATION_MEMBER",function(){return Fr}),n.d(E,"USER_DEMOTED_TO_ORGANIZATION_MEMBER",function(){return Gr}),n.d(E,"REMOVE_USER_FROM_ORGANIZATION",function(){return Vr}),n.d(E,"USER_REMOVED_FROM_ORGANIZATION",function(){return Hr}),n.d(E,"FETCH_ORGANIZATION",function(){return Wr}),n.d(E,"ORGANIZATION_FETCHED",function(){return qr}),n.d(E,"FETCH_USER_ORGANIZATIONS",function(){return Jr}),n.d(E,"USER_ORGANIZATIONS_FETCHED",function(){return Yr}),n.d(E,"RENAME_ORGANIZATION",function(){return Qr}),n.d(E,"ORGANIZATION_RENAMED",function(){return Kr}),n.d(E,"REMOVE_GUEST_FROM_ORGANIZATION",function(){return Zr}),n.d(E,"GUEST_REMOVED_FROM_ORGANIZATION",function(){return Xr}),n.d(E,"TURN_GUEST_INTO_MEMBER",function(){return $r}),n.d(E,"GUEST_TURNED_INTO_MEMBER",function(){return ea});var I={};n.r(I),n.d(I,"setUpExplicitOrganization",function(){return ta}),n.d(I,"inviteUserToOrganization",function(){return na}),n.d(I,"revokeUserOrganizationInvitation",function(){return ra}),n.d(I,"resendUserOrganizationInvitation",function(){return aa}),n.d(I,"acceptInvitationToOrganization",function(){return oa}),n.d(I,"promoteUserToOrganizationAdmin",function(){return ia}),n.d(I,"demoteUserToOrganizationMember",function(){return sa}),n.d(I,"removeUserFromOrganization",function(){return ca}),n.d(I,"renameOrganization",function(){return ua}),n.d(I,"removeGuestFromOrganization",function(){return la}),n.d(I,"turnGuestIntoMember",function(){return da});var k={};n.r(k),n.d(k,"organizationFetched",function(){return ma}),n.d(k,"explicitOrganizationSetUp",function(){return pa}),n.d(k,"explicitOrganizationSetUpFailed",function(){return fa}),n.d(k,"userOrganizationsFetched",function(){return ha}),n.d(k,"userInvitedToOrganization",function(){return ba}),n.d(k,"userOrganizationInvitationRevoked",function(){return ga}),n.d(k,"userOrganizationInvitationResent",function(){return va}),n.d(k,"invitationToOrganizationAccepted",function(){return Oa}),n.d(k,"userPromotedToOrganizationAdmin",function(){return ya}),n.d(k,"userDemotedToOrganizationMember",function(){return Ea}),n.d(k,"userRemovedFromOrganization",function(){return Ia}),n.d(k,"organizationRenamed",function(){return ka}),n.d(k,"guestRemovedFromOrganization",function(){return Sa}),n.d(k,"guestTurnedIntoMember",function(){return ja});var S={};n.r(S),n.d(S,"fetchOrganization",function(){return xa}),n.d(S,"fetchUserOrganizations",function(){return Ta});var j={};n.r(j),n.d(j,"Api",function(){return y}),n.d(j,"Command",function(){return I}),n.d(j,"Query",function(){return S}),n.d(j,"Event",function(){return k}),n.d(j,"Type",function(){return E});var x={};n.r(x),n.d(x,"inspectioOrganizationsReducer",function(){return Ja});var T={};n.r(T),n.d(T,"fetchOrganizationFlow",function(){return to}),n.d(T,"fetchUserOrganizations",function(){return co}),n.d(T,"setUpExplicitOrganization",function(){return Fo}),n.d(T,"inviteUserToOrganization",function(){return po}),n.d(T,"revokeUserOrganizationInvitation",function(){return Do}),n.d(T,"resendUserOrganizationInvitation",function(){return Bo}),n.d(T,"promoteUserToOrganizationAdmin",function(){return go}),n.d(T,"demoteUserToOrganizationMember",function(){return Za}),n.d(T,"removeUserFromOrganization",function(){return jo}),n.d(T,"renameOrganization",function(){return wo}),n.d(T,"removeGuestFromOrganization",function(){return Eo}),n.d(T,"turnGuestIntoMember",function(){return Wo});var C={};n.r(C),n.d(C,"getIioUserInfoById",function(){return Zo}),n.d(C,"makeGetIioUserInfoByIdSelector",function(){return Xo}),n.d(C,"iioUserListSelector",function(){return $o}),n.d(C,"makeIioUserListSelector",function(){return ei}),n.d(C,"makeIioFilteredUserListSelector",function(){return ti});var w={};n.r(w),n.d(w,"syncUsername",function(){return oi}),n.d(w,"lazyLoadInspectioUserInfo",function(){return lr}),n.d(w,"updateProfile",function(){return di}),n.d(w,"updatePassword",function(){return pi}),n.d(w,"upsertUserSetting",function(){return gi}),n.d(w,"switchActiveOrganization",function(){return Ko});var A={};n.r(A),n.d(A,"currentUserSelector",function(){return Ci}),n.d(A,"makeGetCurrentUser",function(){return wi}),n.d(A,"makeGetCurrentBoardQuota",function(){return Ai});var _={};n.r(_),n.d(_,"SERVER_CONTEXT",function(){return Vi}),n.d(_,"SAVE_BOARD",function(){return Hi}),n.d(_,"RENAME_BOARD",function(){return Wi}),n.d(_,"CHANGE_BOARD_ABBREVIATION",function(){return qi}),n.d(_,"SET_BOARD_TAGS",function(){return Ji}),n.d(_,"CHANGE_RESPONSIBLE_TEAM",function(){return Yi}),n.d(_,"IMPORT_NEW_BOARD",function(){return Qi}),n.d(_,"IMPORT_EXISTING_BOARD",function(){return Ki}),n.d(_,"ADD_BOARD",function(){return Zi}),n.d(_,"UPDATE_BOARDS",function(){return Xi}),n.d(_,"FORCE_UPDATE_BOARDS",function(){return $i}),n.d(_,"SET_BOARD_TO_SNAPSHOT",function(){return es}),n.d(_,"SET_BOARD_DETAILS_FETCHED",function(){return ts}),n.d(_,"CONFIRM_DELETE_BOARD",function(){return ns}),n.d(_,"ABORT_BOARD_DELETION",function(){return rs}),n.d(_,"DELETE_BOARD",function(){return as}),n.d(_,"SHARE_BOARD",function(){return os}),n.d(_,"RESEND_BOARD_INVITATION",function(){return is}),n.d(_,"REVOKE_BOARD_INVITATION",function(){return ss}),n.d(_,"REVOKE_ACCESS_TO_BOARD",function(){return cs}),n.d(_,"CHANGE_BOARD_PERMISSIONS",function(){return us}),n.d(_,"ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS",function(){return ls}),n.d(_,"TRIGGER_IMPORT_BOARD",function(){return ds}),n.d(_,"TRIGGER_EXPORT_BOARD",function(){return ms}),n.d(_,"TOGGLE_BOARD_HISTORY",function(){return ps}),n.d(_,"TOGGLE_ELEMENT_DETAILS",function(){return fs}),n.d(_,"TOGGLE_CODY_CONSOLE",function(){return hs}),n.d(_,"TOGGLE_TIMER_MODAL",function(){return bs}),n.d(_,"TOGGLE_VIDEO_SESSION",function(){return gs}),n.d(_,"APPEND_HISTORY_ENTRIES",function(){return vs}),n.d(_,"PREPEND_HISTORY_ENTRIES",function(){return Os}),n.d(_,"CLEAR_BOARD_HISTORY",function(){return ys}),n.d(_,"LOAD_FIRST_BOARD_HISTORY_CHUNK",function(){return Es}),n.d(_,"LOAD_NEXT_BOARD_HISTORY_CHUNK",function(){return Is}),n.d(_,"SET_NO_MORE_HISTORY_AVAILABLE",function(){return ks}),n.d(_,"SET_IS_LOADING_HISTORY",function(){return Ss}),n.d(_,"UPDATE_BOARD_ELEMENTS_TREE",function(){return js}),n.d(_,"CREATE_BOARD_CLIENT",function(){return xs}),n.d(_,"REMOVE_BOARD_CLIENT",function(){return Ts}),n.d(_,"RESET_BOARD_CLIENT_SECRET",function(){return Cs}),n.d(_,"SET_STICKY_TEMPLATE",function(){return ws}),n.d(_,"UPDATE_STICKY_ADVANCED_CONFIG",function(){return As}),n.d(_,"IMPORT_STICKY_TEMPLATES",function(){return _s}),n.d(_,"OPEN_ELEMENTS_DETAILS",function(){return Us}),n.d(_,"FILTER_BOARD_OVERVIEW",function(){return Bs}),n.d(_,"SORT_BOARD_OVERVIEW",function(){return Rs}),n.d(_,"FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM",function(){return Ns}),n.d(_,"HIDE_SHARED_BOARDS_ON_OVERVIEW",function(){return Ls}),n.d(_,"HIDE_OWN_BOARDS_ON_OVERVIEW",function(){return Ds}),n.d(_,"FILTER_ELEMENTS_TREE",function(){return Ps}),n.d(_,"MOVE_USER_BOARD_TO_ORGANIZATION",function(){return Ms}),n.d(_,"REMOTE_BOARD_CHANGED",function(){return zs}),n.d(_,"LOCAL_BOARD_CHANGED",function(){return Fs}),n.d(_,"BOARD_IMPORT_STARTED",function(){return Gs}),n.d(_,"BOARD_IMPORTED",function(){return Vs}),n.d(_,"BOARD_EXPORTED",function(){return Hs}),n.d(_,"BOARD_INITIALIZED",function(){return Ws}),n.d(_,"LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE",function(){return qs}),n.d(_,"BOARD_INVITATION_SENT",function(){return Js}),n.d(_,"BOARD_INVITATION_RESENT",function(){return Ys}),n.d(_,"BOARD_INVITATION_REVOKED",function(){return Qs}),n.d(_,"BOARD_ACCESS_REVOKED",function(){return Ks}),n.d(_,"BOARD_PERMISSIONS_CHANGED",function(){return Zs}),n.d(_,"TEAM_BOARD_PERMISSIONS_CHANGED",function(){return Xs}),n.d(_,"BOARD_PERMISSIONS_FOR_USERS_FETCHED",function(){return $s}),n.d(_,"BOARD_PERMISSIONS_FOR_TEAMS_FETCHED",function(){return ec}),n.d(_,"OPEN_BOARD_INVITATIONS_FETCHED",function(){return tc}),n.d(_,"ACTIVE_GRAPH_ELEMENT_CHANGED",function(){return nc}),n.d(_,"ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED",function(){return rc}),n.d(_,"ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED",function(){return ac}),n.d(_,"BOARD_GRAPH_ELEMENTS_FETCHED",function(){return oc}),n.d(_,"BOARD_CLIENT_FETCHED",function(){return ic}),n.d(_,"BOARD_CLIENT_NOT_CONFIGURED",function(){return sc}),n.d(_,"BOARD_CLIENT_SECRET_FETCHED",function(){return cc}),n.d(_,"BOARD_STICKY_TEMPLATES_FETCHED",function(){return uc}),n.d(_,"STICKY_TEMPLATE_SET",function(){return lc}),n.d(_,"STICKY_ADVANCED_CONFIG_UPDATED",function(){return dc}),n.d(_,"STICKY_TEMPLATES_IMPORTED",function(){return mc}),n.d(_,"USER_BOARD_MOVED_TO_ORGANIZATION",function(){return pc}),n.d(_,"INITIAL_BOARD_LIST_LOADED",function(){return fc}),n.d(_,"START_FETCH_USER_BOARDS",function(){return hc}),n.d(_,"FETCH_USER_BOARDS",function(){return bc}),n.d(_,"FETCH_USER_BOARD",function(){return gc}),n.d(_,"FETCH_BOARD_PERMISSIONS_FOR_USERS",function(){return vc}),n.d(_,"FETCH_BOARD_PERMISSIONS_FOR_TEAMS",function(){return Oc}),n.d(_,"FETCH_OPEN_BOARD_INVITATIONS",function(){return yc}),n.d(_,"FETCH_BOARD_GRAPH_ELEMENTS",function(){return Ec}),n.d(_,"FETCH_BOARD_CLIENT",function(){return Ic}),n.d(_,"FETCH_BOARD_CLIENT_SECRET",function(){return kc}),n.d(_,"FETCH_BOARD_STICKY_TEMPLATES",function(){return Sc});var U={};n.r(U),n.d(U,"installOrganizationBoard",function(){return jc}),n.d(U,"renameBoard",function(){return xc}),n.d(U,"changeBoardAbbreviation",function(){return Tc}),n.d(U,"setBoardTags",function(){return Cc}),n.d(U,"changeResponsibleTeam",function(){return wc}),n.d(U,"deleteBoard",function(){return Ac}),n.d(U,"takeBoardSnapshot",function(){return _c}),n.d(U,"shareBoard",function(){return Uc}),n.d(U,"resendBoardInvitation",function(){return Bc}),n.d(U,"revokeBoardInvitation",function(){return Rc}),n.d(U,"ackBoardInvitation",function(){return Nc}),n.d(U,"revokeAccessToBoard",function(){return Lc}),n.d(U,"changeBoardPermissions",function(){return Dc}),n.d(U,"adminChangeTeamBoardPermissions",function(){return Pc}),n.d(U,"fetchUserBoard",function(){return Mc}),n.d(U,"fetchUserBoards",function(){return zc}),n.d(U,"fetchOlderPatches",function(){return Fc}),n.d(U,"fetchNewerPatches",function(){return Gc}),n.d(U,"fetchBoardPermissionsForUsers",function(){return Vc}),n.d(U,"fetchBoardPermissionsForTeams",function(){return Hc}),n.d(U,"fetchOpenBoardInvitations",function(){return Wc}),n.d(U,"fetchBoardOfInvitation",function(){return qc}),n.d(U,"fetchBoardXmlFromLink",function(){return Jc}),n.d(U,"uploadBoardImage",function(){return Yc}),n.d(U,"replaceBoardImage",function(){return Qc}),n.d(U,"deleteBoardImage",function(){return Kc}),n.d(U,"fetchBoardGraphElements",function(){return Zc}),n.d(U,"fetchBoardClient",function(){return Xc}),n.d(U,"fetchBoardClientSecret",function(){return $c}),n.d(U,"createBoardClient",function(){return eu}),n.d(U,"removeBoardClient",function(){return tu}),n.d(U,"resetBoardClientSecret",function(){return nu}),n.d(U,"fetchBoardStickyTemplates",function(){return ru}),n.d(U,"setStickyTemplate",function(){return au}),n.d(U,"updateStickyAdvancedConfig",function(){return ou}),n.d(U,"moveUserBoardToOrganization",function(){return iu});var B={};n.r(B),n.d(B,"addBoard",function(){return su}),n.d(B,"updateBoards",function(){return cu}),n.d(B,"forceUpdateBoards",function(){return uu}),n.d(B,"setBoardToSnapshot",function(){return lu}),n.d(B,"setBoardDetailsFetched",function(){return du}),n.d(B,"triggerImportBoard",function(){return mu}),n.d(B,"triggerExportBoard",function(){return pu}),n.d(B,"toggleBoardHistory",function(){return fu}),n.d(B,"toggleElementDetails",function(){return hu}),n.d(B,"toggleCodyConsole",function(){return bu}),n.d(B,"toggleTimerModal",function(){return gu}),n.d(B,"toggleVideoSession",function(){return vu}),n.d(B,"appendHistoryEntries",function(){return Ou}),n.d(B,"prependHistoryEntries",function(){return yu}),n.d(B,"clearBoardHistory",function(){return Eu}),n.d(B,"loadNextBoardHistoryChunk",function(){return Iu}),n.d(B,"loadFirstBoardHistoryChunk",function(){return ku}),n.d(B,"setNoMoreHistoryAvailable",function(){return Su}),n.d(B,"setIsLoadingHistory",function(){return ju}),n.d(B,"filterBoardOverview",function(){return xu}),n.d(B,"sortBoardOverview",function(){return Tu}),n.d(B,"filterBoardOverviewByResponsibleTeam",function(){return Cu}),n.d(B,"hideSharedBoardsOnOverview",function(){return wu}),n.d(B,"hideOwnBoardsOnOverview",function(){return Au}),n.d(B,"filterElementsTree",function(){return _u}),n.d(B,"saveBoard",function(){return Uu}),n.d(B,"renameBoard",function(){return Bu}),n.d(B,"changeBoardAbbreviation",function(){return Ru}),n.d(B,"setBoardTags",function(){return Nu}),n.d(B,"changeResponsibleTeam",function(){return Lu}),n.d(B,"importNewBoard",function(){return Du}),n.d(B,"importExistingBoard",function(){return Pu}),n.d(B,"confirmDeleteBoard",function(){return Mu}),n.d(B,"abortBoardDeletion",function(){return zu}),n.d(B,"deleteBoard",function(){return Fu}),n.d(B,"shareBoard",function(){return Gu}),n.d(B,"resendBoardInvitation",function(){return Vu}),n.d(B,"revokeBoardInvitation",function(){return Hu}),n.d(B,"revokeAccessToBoard",function(){return Wu}),n.d(B,"changeBoardPermissions",function(){return qu}),n.d(B,"adminChangeTeamBoardPermissions",function(){return Ju}),n.d(B,"updateBoardElementsTree",function(){return Yu}),n.d(B,"createBoardClient",function(){return Qu}),n.d(B,"removeBoardClient",function(){return Ku}),n.d(B,"resetBoardClientSecret",function(){return Zu}),n.d(B,"setStickyTemplate",function(){return Xu}),n.d(B,"updateStickyAdvancedConfig",function(){return $u}),n.d(B,"importStickyTemplates",function(){return el}),n.d(B,"moveUserBoardToOrganization",function(){return tl});var R={};n.r(R),n.d(R,"remoteBoardChanged",function(){return nl}),n.d(R,"localBoardChanged",function(){return rl}),n.d(R,"boardImportStarted",function(){return al}),n.d(R,"boardImported",function(){return ol}),n.d(R,"boardExported",function(){return il}),n.d(R,"boardInitialized",function(){return sl}),n.d(R,"initialBoardListLoaded",function(){return cl}),n.d(R,"localBoardUpdatedWithRemoteChange",function(){return ul}),n.d(R,"boardInvitationSent",function(){return ll}),n.d(R,"boardInvitationResent",function(){return dl}),n.d(R,"boardInvitationRevoked",function(){return ml}),n.d(R,"boardAccessRevoked",function(){return pl}),n.d(R,"boardPermissionsChanged",function(){return fl}),n.d(R,"teamBoardPermissionsChanged",function(){return hl}),n.d(R,"boardPermissionsForUsersFetched",function(){return bl}),n.d(R,"boardPermissionsForTeamsFetched",function(){return gl}),n.d(R,"openBoardInvitationsFetched",function(){return vl}),n.d(R,"activeGraphElementChanged",function(){return Ol}),n.d(R,"activeGraphElementLabelChanged",function(){return yl}),n.d(R,"activeGraphElementMetadataChanged",function(){return El}),n.d(R,"boardGraphElementsFetched",function(){return Il}),n.d(R,"boardClientFetched",function(){return kl}),n.d(R,"boardClientNotConfigured",function(){return Sl}),n.d(R,"boardClientSecretFetched",function(){return jl}),n.d(R,"boardStickyTemplatesFetched",function(){return xl}),n.d(R,"stickyTemplateSet",function(){return Tl}),n.d(R,"stickyAdvancedConfigUpdated",function(){return Cl}),n.d(R,"stickyTemplatesImported",function(){return wl}),n.d(R,"userBoardMovedToOrganization",function(){return Al});var N={};n.r(N),n.d(N,"startFetchUserBoards",function(){return _l}),n.d(N,"fetchUserBoards",function(){return Ul}),n.d(N,"fetchUserBoard",function(){return Bl}),n.d(N,"fetchBoardPermissionsForUsers",function(){return Rl}),n.d(N,"fetchBoardPermissionsForTeams",function(){return Nl}),n.d(N,"fetchOpenBoardInvitations",function(){return Ll}),n.d(N,"fetchBoardGraphElements",function(){return Dl}),n.d(N,"fetchBoardClient",function(){return Pl}),n.d(N,"fetchBoardClientSecret",function(){return Ml}),n.d(N,"fetchBoardStickyTemplates",function(){return zl});var L={};n.r(L),n.d(L,"Api",function(){return U}),n.d(L,"Command",function(){return B}),n.d(L,"Event",function(){return R}),n.d(L,"Query",function(){return N}),n.d(L,"Type",function(){return _});var D={};n.r(D),n.d(D,"defaultBoardVersionProps",function(){return Hl}),n.d(D,"BoardVersion",function(){return Wl});var P={};n.r(P),n.d(P,"defaultBoardProps",function(){return ql}),n.d(P,"deriveAbbreviationFromBoardName",function(){return Jl}),n.d(P,"createUserBoard",function(){return Yl}),n.d(P,"createTempBoard",function(){return Ql}),n.d(P,"Board",function(){return Kl});var M={};n.r(M),n.d(M,"defaultBoardChangedProps",function(){return Od}),n.d(M,"remoteBoardChanged",function(){return yd}),n.d(M,"localBoardChanged",function(){return Ed}),n.d(M,"mapServerPatchToBoardChanged",function(){return Id}),n.d(M,"BoardChanged",function(){return kd});var z={};n.r(z),n.d(z,"defaultBoardSnapshotProps",function(){return Dd}),n.d(z,"BoardSnapshot",function(){return Pd});var F={};n.r(F),n.d(F,"addTeam",function(){return Fd}),n.d(F,"renameTeam",function(){return Gd}),n.d(F,"changeTeamDescription",function(){return Vd}),n.d(F,"inviteUserToTeam",function(){return Hd}),n.d(F,"resendTeamInvitation",function(){return Wd}),n.d(F,"revokeTeamInvitation",function(){return qd}),n.d(F,"removeMemberFromTeam",function(){return Jd}),n.d(F,"deleteTeam",function(){return Yd}),n.d(F,"adminGrantTeamAccessToBoard",function(){return Qd}),n.d(F,"adminRevokeTeamAccessToBoard",function(){return Kd}),n.d(F,"fetchUserTeams",function(){return Zd}),n.d(F,"ackTeamInvitation",function(){return Xd}),n.d(F,"fetchTeamOfInvitation",function(){return $d}),n.d(F,"fetchOpenTeamInvitations",function(){return em}),n.d(F,"moveTeamToOrganization",function(){return tm});var G={};n.r(G),n.d(G,"ADD_TEAM",function(){return nm}),n.d(G,"RENAME_TEAM",function(){return rm}),n.d(G,"CHANGE_TEAM_DESCRIPTION",function(){return am}),n.d(G,"INVITE_USER_TO_TEAM",function(){return om}),n.d(G,"RESEND_TEAM_INVITATION",function(){return im}),n.d(G,"REVOKE_TEAM_INVITATION",function(){return sm}),n.d(G,"REMOVE_MEMBER_FROM_TEAM",function(){return cm}),n.d(G,"FETCH_USER_TEAMS",function(){return um}),n.d(G,"UPDATE_TEAMS",function(){return lm}),n.d(G,"ADMIN_GRANT_TEAM_ACCESS_TO_BOARD",function(){return dm}),n.d(G,"ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD",function(){return mm}),n.d(G,"DELETE_TEAM",function(){return pm}),n.d(G,"TEAM_ADDED",function(){return fm}),n.d(G,"TEAM_RENAMED",function(){return hm}),n.d(G,"TEAM_DESCRIPTION_CHANGED",function(){return bm}),n.d(G,"TEAMS_FETCHED",function(){return gm}),n.d(G,"MEMBER_REMOVED_FROM_TEAM",function(){return vm}),n.d(G,"TEAM_DELETED",function(){return Om}),n.d(G,"TEAM_INVITATIONS_LOADED",function(){return ym}),n.d(G,"TEAM_INVITATION_RESENT",function(){return Em}),n.d(G,"TEAM_INVITATION_REVOKED",function(){return Im}),n.d(G,"TEAM_ACCESS_TO_BOARD_GRANTED",function(){return km}),n.d(G,"TEAM_ACCESS_TO_BOARD_REVOKED",function(){return Sm}),n.d(G,"MOVE_TEAM_TO_ORGANIZATION",function(){return jm}),n.d(G,"TEAM_MOVED_TO_ORGANIZATION",function(){return xm});var V={};n.r(V),n.d(V,"addTeam",function(){return Tm}),n.d(V,"renameTeam",function(){return Cm}),n.d(V,"changeTeamDescription",function(){return wm}),n.d(V,"inviteUserToTeam",function(){return Am}),n.d(V,"resendTeamInvitation",function(){return _m}),n.d(V,"revokeTeamInvitation",function(){return Um}),n.d(V,"removeMemberFromTeam",function(){return Bm}),n.d(V,"updateTeams",function(){return Rm}),n.d(V,"deleteTeam",function(){return Nm}),n.d(V,"adminGrantTeamAccessToBoard",function(){return Lm}),n.d(V,"adminRevokeTeamAccessToBoard",function(){return Dm}),n.d(V,"moveTeamToOrganization",function(){return Pm});var H={};n.r(H),n.d(H,"teamAdded",function(){return Mm}),n.d(H,"teamRenamed",function(){return zm}),n.d(H,"teamDescriptionChanged",function(){return Fm}),n.d(H,"memberRemovedFromTeam",function(){return Gm}),n.d(H,"teamDeleted",function(){return Vm}),n.d(H,"teamInvitationsLoaded",function(){return Hm}),n.d(H,"teamInvitationResent",function(){return Wm}),n.d(H,"teamInvitationRevoked",function(){return qm}),n.d(H,"teamsFetched",function(){return Jm}),n.d(H,"teamAccessToBoardGranted",function(){return Ym}),n.d(H,"teamAccessToBoardRevoked",function(){return Qm}),n.d(H,"teamMovedToOrganization",function(){return Km});var W={};n.r(W),n.d(W,"Api",function(){return F}),n.d(W,"Command",function(){return V}),n.d(W,"Event",function(){return H}),n.d(W,"Type",function(){return G});var q={};n.r(q),n.d(q,"inspectioTeamsReducer",function(){return ip});var J={};n.r(J),n.d(J,"addTeam",function(){return fp}),n.d(J,"renameTeam",function(){return Pp}),n.d(J,"changeTeamDescription",function(){return Sp}),n.d(J,"inviteUserToTeam",function(){return Ap}),n.d(J,"removeMemberFromTeam",function(){return Rp}),n.d(J,"adminGrantTeamAccessToBoard",function(){return yp}),n.d(J,"deleteTeam",function(){return Cp}),n.d(J,"resendTeamInvitation",function(){return Vp}),n.d(J,"revokeTeamInvitation",function(){return Jp}),n.d(J,"refreshUserTeams",function(){return Zp}),n.d(J,"moveTeamToOrganization",function(){return tf});var Y={};n.r(Y),n.d(Y,"boardListSelector",function(){return vf}),n.d(Y,"boardLoadingSelector",function(){return Of}),n.d(Y,"initialBoardListLoadedSelector",function(){return yf}),n.d(Y,"boardOverviewSelector",function(){return Ef}),n.d(Y,"makeGetAllBoards",function(){return If}),n.d(Y,"makeGetBoards",function(){return kf}),n.d(Y,"makeGetTeamBoards",function(){return Sf}),n.d(Y,"makeIsLoadingBoards",function(){return jf}),n.d(Y,"makeInitialBoardListLoaded",function(){return xf}),n.d(Y,"makeHasBoards",function(){return Tf}),n.d(Y,"makeGetBoardOverview",function(){return Cf}),n.d(Y,"makeMapStateToPropsBoardOverview",function(){return wf});var Q={};n.r(Q),n.d(Q,"CONNECT_SOCKET",function(){return Lh}),n.d(Q,"DISCONNECT_SOCKET",function(){return Dh}),n.d(Q,"SOCKET_CONNECTED",function(){return Ph}),n.d(Q,"SOCKET_DISCONNECTED",function(){return Mh}),n.d(Q,"SOCKET_CONNECTION_LOST",function(){return zh}),n.d(Q,"SEND_SOCKET_CMD",function(){return Fh}),n.d(Q,"LISTEN_ON_SOCKET_CHANNEL",function(){return Gh}),n.d(Q,"STOP_LISTENING_ON_SOCKET_CHANNEL",function(){return Vh}),n.d(Q,"DEFAULT_SOCKET_CMD_TIMEOUT",function(){return Hh});var K={};n.r(K),n.d(K,"connectSocket",function(){return Wh}),n.d(K,"disconnectSocket",function(){return qh}),n.d(K,"socketConnected",function(){return Jh}),n.d(K,"socketDisconnected",function(){return Yh}),n.d(K,"socketConnectionLost",function(){return Qh}),n.d(K,"sendSocketCmd",function(){return Kh}),n.d(K,"notifySocketCmdSent",function(){return Zh}),n.d(K,"ackSocketCmd",function(){return Xh}),n.d(K,"rejectSocketCmd",function(){return $h}),n.d(K,"listenOnSocketChannel",function(){return eb}),n.d(K,"stopListeningOnSocketChannel",function(){return tb}),n.d(K,"emitChannelEvent",function(){return nb}),n.d(K,"isAcknowledged",function(){return rb}),n.d(K,"isNotAcknowledged",function(){return ab}),n.d(K,"isError",function(){return ob});var Z={};n.r(Z),n.d(Z,"STATUS_CONNECTED",function(){return ib}),n.d(Z,"STATUS_CONNECTING",function(){return sb}),n.d(Z,"STATUS_DISCONNECTED",function(){return cb}),n.d(Z,"STATUS_DISCONNECTING",function(){return ub}),n.d(Z,"STATUS_CONNECTION_LOST",function(){return lb}),n.d(Z,"defaultUserProps",function(){return db}),n.d(Z,"fromtString",function(){return mb}),n.d(Z,"disconnectedStatus",function(){return pb}),n.d(Z,"assertSocketStatus",function(){return fb}),n.d(Z,"Status",function(){return hb});var X={};n.r(X),n.d(X,"AUTHENTICATE",function(){return gb}),n.d(X,"USER_AUTHENTICATED",function(){return vb});var $={};n.r($),n.d($,"authenticate",function(){return Ob});var ee={};n.r(ee),n.d(ee,"userAuthenticated",function(){return yb});var te={};n.r(te),n.d(te,"Command",function(){return $}),n.d(te,"Event",function(){return ee}),n.d(te,"Type",function(){return X});var ne={};n.r(ne),n.d(ne,"tokenRefreshFlow",function(){return kb});var re={};n.r(re),n.d(re,"makeTokenSelector",function(){return Sb});var ae={};n.r(ae),n.d(ae,"AuthSelector",function(){return re});var oe={};n.r(oe),n.d(oe,"manageSocketConnection",function(){return Ab});var ie={};n.r(ie),n.d(ie,"statusSelector",function(){return Hb}),n.d(ie,"makeGetStatus",function(){return Wb});var se={};n.r(se),n.d(se,"StatusSelector",function(){return ie});var ce={};n.r(ce),n.d(ce,"boardSelector",function(){return Jb}),n.d(ce,"makeBoardByIdSelector",function(){return Yb}),n.d(ce,"makeGetBoard",function(){return Qb}),n.d(ce,"makeMapStateToPropsAddBoard",function(){return Kb}),n.d(ce,"makeMapStateToPropsEditBoard",function(){return Zb}),n.d(ce,"makeMapStateToPropsMxGraphBoard",function(){return Xb});var ue={};n.r(ue),n.d(ue,"makeBoardHistoryByIdSelector",function(){return xg});var le={};n.r(le),n.d(le,"BoardSelector",function(){return ce}),n.d(le,"BoardListSelector",function(){return Y}),n.d(le,"BoardHistorySelector",function(){return ue});var de={};n.r(de),n.d(de,"TOGGLE_SIDEBAR_COLLAPSED",function(){return $v}),n.d(de,"SET_SIDEBAR_WIDTH",function(){return eO}),n.d(de,"SET_RIGHT_SIDEBAR_WIDTH",function(){return tO}),n.d(de,"SET_CODY_CONSOLE_HEIGHT",function(){return nO});var me={};n.r(me),n.d(me,"saveBoardFlow",function(){return vE}),n.d(me,"deleteBoardFlow",function(){return XO}),n.d(me,"fetchUserBoardsFlow",function(){return Ly}),n.d(me,"installUserBoardFlow",function(){return Ky}),n.d(me,"renameBoardFlow",function(){return nE}),n.d(me,"changeBoardAbbreviationFlow",function(){return zO}),n.d(me,"changeResponsibleTeamFlow",function(){return WO}),n.d(me,"setBoardTagsFlow",function(){return yE}),n.d(me,"fetchUserBoardFlow",function(){return Iy}),n.d(me,"fetchBoardPermissionsFlow",function(){return my}),n.d(me,"fetchOpenBoardInvitationsFlow",function(){return Oy}),n.d(me,"shareBoardFlow",function(){return SE}),n.d(me,"resendBoardInvitationFlow",function(){return iE}),n.d(me,"revokeBoardInvitationFlow",function(){return fE}),n.d(me,"prepareBoardHistoryFlow",function(){return av}),n.d(me,"loadBoardHistoryFlow",function(){return dv}),n.d(me,"importNewBoardFlow",function(){return Hy}),n.d(me,"importExistingBoardFlow",function(){return zy}),n.d(me,"syncElementsTreeFlow",function(){return FE}),n.d(me,"revokeAccessToBoardFlow",function(){return lE}),n.d(me,"changeBoardPermissionsFlow",function(){return VO}),n.d(me,"adminChangeTeamBoardPermissions",function(){return PO}),n.d(me,"fetchBoardClientFlow",function(){return oy}),n.d(me,"fetchBoardGraphElementsFlow",function(){return cy}),n.d(me,"fetchBoardStickyTemplates",function(){return by}),n.d(me,"updateStickyTemplate",function(){return JE}),n.d(me,"importStickyTemplates",function(){return Yy}),n.d(me,"moveUserBoardToOrganization",function(){return eE}),n.d(me,"storeOverviewSettingsFlow",function(){return NE});var pe,fe=n(5),he=n(534),be=n.n(he),ge=n(0),ve=n.n(ge),Oe=n(93),ye=n(317),Ee=n.n(ye),Ie=(n(535),function(e){return new Promise(function(t,n){Ee.a.verify(e,pe,function(r,a){return r?(console.log({error:r}),n(r)):t({token:e,verifiedToken:a})})})}),ke=n(158),Se=n.n(ke),je=Se.a.create({baseURL:"/board/api/v1/messagebox"}),xe=n(536),Te=n.n(xe)()({path:"/board/socket/",autoConnect:!1,reconnection:!0,transportOptions:{polling:{extraHeaders:{}}}}),Ce="",we=function(){return Ce},Ae=function(e){je.defaults.headers.Authorization="Bearer "+e,Te.io.opts.transportOptions.polling.extraHeaders.Authorization="Bearer "+e,Ce=e;var t=new Date;t.setTime(t.getTime()+6e5),document.cookie="token="+e+";path=/buckets/boards;expires="+t.toUTCString()},_e=function(e,t){return je.post(e,t).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})},Ue=function(e,t){return je.post(e,t,{baseURL:"/board/api/v1/user-management"}).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})},Be=n(18),Re=n(31),Ne=n(27),Le=n(26),De=n(28),Pe=n(12),Me=n(7),ze=n(30),Fe=n(38),Ge=n(1230),Ve=n(521),He=n(540),We=n.n(He),qe=n(820);Ve.a.use(We.a).init({detection:{order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],caches:["localStorage","cookie"],excludeCacheFor:["cimode"]},fallbackLng:"en",debug:!0,resources:qe,react:{wait:!0}});var Je=Ve.a,Ye=n(17),Qe=n(6),Ke=n(1045),Ze=n(1027),Xe=n(1245),$e=n(1246);function et(e){Object(ge.useEffect)(function(){return document.getElementsByTagName("body")[0].addEventListener("click",e),function(){document.getElementsByTagName("body")[0].removeEventListener("click",e)}},[])}var tt=n(9),nt=n(35),rt=n.n(nt),at={title:"",message:"",level:"info",position:"bl",autoDismiss:5,dismissible:!0,handled:!1,uid:void 0,action:null,hideProgressBar:!0},ot=function(e){function t(e){return Object(Be.a)(this,t),void 0===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"markAsHandled",value:function(){return this.set("handled",!0)}},{key:"hasAction",value:function(){return null!==this.action}}]),t}(Object(fe.Record)(at)),it="@@NotificationSystem/Notify",st=function(e){return Object(tt.action)(it,e)},ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=new r.Message({title:e,message:t,tOpts:n,level:"info",autoDismiss:a});return Object(tt.action)(it,o)},ut=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=new r.Message({title:e,message:t,tOpts:n,level:"error",autoDismiss:0});return Object(tt.action)(it,a)},lt=function(e){return Object(tt.action)("@@NotificationSystem/MessageHandled",e)},dt=n(138),mt=n(106),pt=n(69),ft=(n(833),dt.toast.TYPE.INFO,dt.toast.POSITION.BOTTOM_LEFT,n(34)),ht=function(e,t){return e.getIn(["notificationSystem","messages"],Object(fe.fromJS)([]))},bt=function(){var e=Object(ft.a)([ht],function(e){return e});return function(t,n){return{messages:e(t,n)}}}(),gt=[],vt=function(e,t,n){e.filter(function(e){return!!e&&!e.handled}).forEach(function(e){if(e&&(!e.uid||!gt.includes(e.uid))){var r=e.message;r instanceof Error&&(r=r.message),e.uid&&gt.push(e.uid),Object(dt.toast)(ve.a.createElement("div",null,ve.a.createElement("p",null,ve.a.createElement("strong",null,n.t(e.title+""))),n.t(r)),{type:e.level,autoClose:"error"!==e.level&&2e3,hideProgressBar:e.hideProgressBar,onClose:function(){e.uid&&(gt=gt.filter(function(t){return t!==e.uid})),t(e.markAsHandled())}})}})},Ot=Object(Pe.b)()(Object(mt.a)(Object(Me.connect)(bt,function(e){return Object(pt.bindActionCreators)({sendNotify:a.info,onHandled:o.publishMessageHandled},e)}),Object(mt.b)({componentDidMount:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&vt(t,n,this.props)},componentDidUpdate:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&vt(t,n,this.props)}}))(function(e){return ge.createElement(dt.ToastContainer,{position:dt.toast.POSITION.BOTTOM_LEFT})})),yt="/inspectio",Et="/inspectio/user/profile",It=function(e){return"/inspectio/board/"+e},kt=function(e){return 0===e.search("/inspectio/board/")},St="/inspectio/boards/edit/:uid",jt=function(e){return"/inspectio/boards/edit/"+e},xt="/inspectio/boards/redirect",Tt=function(e){return function(t){return Ct()+It(e)+"?cells=".concat(t,"&clicks=1")}},Ct=function(){return window.location.protocol+"//"+window.location.host},wt="InspectIO.",At="@@InspectioUsers/SignIn",_t="@@InspectioBoards/User",Ut="@@InspectioBoards/IioUsersInfo",Bt="@@InspectioBoards/IioUsersInfoLoaded",Rt="@@InspectioBoard/UserSettingsLoaded",Nt="@@InsecptioBoard/UserSettingUpserted",Lt="@@InspectioBoards/UserUpdate",Dt="@@InspectioBoards/PasswordUpdate",Pt="@@InsecptioBoards/UpsertUserSetting",Mt="@@InspectioBoards/SwitchActiveOrganization",zt="@@InspectioBoards/ActiveOrganizationSwitched",Ft=function(e){return Object(tt.action)(At,{user:e})},Gt=function(e,t){return Object(tt.action)(Lt,{user:e,successCb:t})},Vt=function(e){return Object(tt.action)(Dt,{password:e})},Ht=function(e,t){return Object(tt.action)(Pt,{key:e,value:t})},Wt=function(e){return Object(tt.action)(Mt,{organizationId:e})},qt=function(e){return _e("InspectIO.User",{userId:e})},Jt=function(e,t,n,r,a){return _e("InspectIO.SyncUserName",{userId:e,name:t,email:n=n||null,avatarUrl:r=r||null,position:a=a||null})},Yt=function(e){return _e("InspectIO.Users",{userIds:e})},Qt=function(e){return _e("InspectIO.UserInfo",{email:e})},Kt=function(){return _e("InspectIO.UserSettings",{})},Zt=function(e,t){return _e("InspectIO.UpsertUserSetting",{key:e,value:String(t)})},Xt=function(e){var t={userId:e.uid,email:e.email,username:e.name,avatarUrl:e.avatarUrl,displayName:e.displayName,companyName:e.companyName,jobTitle:e.jobTitle};return Ue("update-profile",t)},$t=function(e,t){return Ue("reset-password",{userId:e,temporary:!1,password:t})},en=function(e,t){return n=e,r=t,je.post(n,r,{baseURL:"/avatar/"});var n,r},tn=function(e){return t=e,je.delete(t,{baseURL:"/avatar/"});var t},nn=function(e,t){return _e(wt+"SwitchActiveOrganization",{userId:e,organizationId:t})},rn=function(e){return Object(tt.action)(Bt,{usersInfo:e})},an=function(e){return Object(tt.action)(Rt,{userSettings:e})},on=function(e,t){return Object(tt.action)(Nt,{key:e,value:t})},sn=function(e){return Object(tt.action)(zt,e)},cn="@@api/SEND_HTTP_REQUEST",un=function(e,t,n){return Object(tt.action)(cn,{request:e,responseActionType:t,metadata:n})},ln=function(e,t,n){return Object(tt.action)(e,{webData:t,metadata:n})},dn=function(e){return Object(tt.action)("@@api/RESET_WEB_DATA",{responseActionType:e})},mn=function(e,t){return{url:e,method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),responseType:"json"}},pn=n(2),fn=n.n(pn),hn=n(1);var bn=function(e){return d.sendHttpRequest(m.getMessageBoxRequestConfig(wt+"User",{userId:e}),_t)},gn=function(e){return Object(tt.action)(Ut,{userIds:e})},vn="free",On="basic",yn="premium",En="custom",In={accountType:vn},kn=function(e){switch(e){case vn:case On:case yn:case En:break;default:throw new Error('Invalid accountType type "'+e+'" provided')}},Sn=function(e){return new Tn({accountType:e})},jn=function(e){var t=xn(),n=xn();return e.forEach(function(e){null!==e.match(/-account/)&&(n=new Tn({accountType:e.replace(/-account/,"")})).isEqualOrBetterThan(t)&&(t=n)}),t},xn=function(){return new Tn({accountType:vn})},Tn=function(e){function t(e){return Object(Be.a)(this,t),kn(e.accountType),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isFreeAccount",value:function(){return this.accountType===vn}},{key:"isBasicAccount",value:function(){return this.accountType===On}},{key:"isPremiumAccount",value:function(){return this.accountType===yn}},{key:"isCustomAccount",value:function(){return this.accountType===En}},{key:"isEqualOrBetterThan",value:function(e){return this.accountType===e.accountType||this.accountType!==vn&&(e.accountType===vn||(this.accountType===En||e.accountType!==En&&this.accountType===yn))}},{key:"equals",value:function(e){return this.accountType===e.accountType}}]),t}(Object(fe.Record)(In));function Cn(e){return"left"===e.tag}function wn(e){return"right"===e.tag}function An(e){return{value:e,tag:"left"}}function _n(e){return{value:e,tag:"right"}}function Un(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=n[a],i=Object(Qe.a)(o,2),s=i[0],c=i[1];if(!s(e))return An(c)}return _n(e)}function Bn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Un.apply(void 0,[e].concat(t))}}function Rn(e){return function(t){return e(t)}}function Nn(e){return function(t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value,u=e(c);if(Cn(u))return u;n.push(u.value)}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return _n(n)}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=(0,n[a])(e);if(Cn(o))return o;e=o.value}return _n(e)}var Dn=n(54),Pn=function(e){return function(t){return!!Dn.isObject(t)&&Dn.has(t,e)}},Mn=function(){return function(e){return Dn.isArray(e)}},zn="IioUserInfo",Fn={uid:"",userId:"",username:"",avatarUrl:"",anonymous:!0,aggregateType:zn,position:"",email:""};function Gn(e){var t=Un(e,[Pn("userId"),"userId missing"],[Pn("username"),"username missing in "+e.userId],[Pn("avatarUrl"),"avatarUrl missing in "+e.userId],[Pn("position"),"position missing in "+e.userId],[Pn("email"),"email missing in "+e.userId]);return Cn(t)?t:_n(new Hn(Object(Ye.a)({},Fn,e,{uid:e.userId})))}function Vn(){return new Hn(Fn)}var Hn=function(e){function t(e){return Object(Be.a)(this,t),""!==e.userId&&(e.anonymous=!1),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"avatar",value:function(){return this.anonymous?"":""===this.avatarUrl?this.generateDefaultAvatarUrl():this.avatarUrl}},{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.userId,"?displayName=").concat(this.username)}}]),t}(Object(fe.Record)(Fn)),Wn="anonymous",qn="user",Jn="admin",Yn={type:Wn},Qn=function(e){return new Xn({type:e})},Kn=function(){return new Xn({type:Wn})},Zn=function(e){switch(e){case Wn:case qn:case Jn:break;default:throw new Error('Invalid role type "'+e+'" provided')}},Xn=function(e){function t(e){return Object(Be.a)(this,t),Zn(e.type),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isAnonymous",value:function(){return this.type===Wn}},{key:"isUser",value:function(){return this.type===qn}},{key:"isAdmin",value:function(){return this.type===Jn}},{key:"equals",value:function(e){return this.type===e.type}}]),t}(Object(fe.Record)(Yn)),$n=function(){return new nr({roleMap:Object(fe.Map)().set(g.TYPE_ANONYMOUS,g.anonymousRole())})},er=function(e){var t=Object(fe.Map)();return e.forEach(function(e){if(null===e.match(/-account/)){var n=new g.Role({type:e});t=t.set(n.type,n)}}),new nr({roleMap:t})},tr={roleMap:Object(fe.Map)().set(g.TYPE_ANONYMOUS,g.anonymousRole())},nr=function(e){function t(e){return Object(Be.a)(this,t),e.roleMap.isEmpty()&&(e.roleMap=e.roleMap.set(g.TYPE_ANONYMOUS,g.anonymousRole())),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isAnonymous",value:function(){return this.roleMap.has(g.TYPE_ANONYMOUS)}},{key:"isUser",value:function(){return this.roleMap.has(g.TYPE_USER)}},{key:"isAdmin",value:function(){return this.roleMap.has(g.TYPE_ADMIN)}},{key:"equals",value:function(e){return this.roleMap.equals(e)}}]),t}(Object(fe.Record)(tr)),rr={uid:"",name:"",email:"",givenName:"",familyName:"",roles:v.withAnonymous(),account:h.freeAccount(),quota:0,teamQuota:0,displayName:"",avatarUrl:"",companyName:"",jobTitle:"",activeOrganization:null,signedIn:!1},ar=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.uid,"?displayName=").concat(this.displayName)}}]),t}(Object(fe.Record)(rr)),or=fn.a.mark(cr),ir=fn.a.mark(ur),sr=fn.a.mark(lr);function cr(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.c)(u.getInspectioUsersInfo,e.payload.userIds);case 2:return t=n.sent,n.next=5,Object(hn.c)(ur,t);case 5:case"end":return n.stop()}},or,this)}function ur(e){var t,n,r,a,o,s,c,u,d,m,p;return fn.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.response,!(n=e.error)){f.next=5;break}return console.error("Request Error","Failed to laod user info",n),f.next=5,Object(hn.g)(i.Command.error("Request Error","Failed to load user info"));case 5:if(!t){f.next=40;break}r=t.data,a=Object(fe.List)(),o=!0,s=!1,c=void 0,f.prev=11,u=r[Symbol.iterator]();case 13:if(o=(d=u.next()).done){f.next=24;break}if(m=d.value,!Cn(p=Gn(m))){f.next=20;break}return console.error("Failed to process IioUserInfo loaded from server",p.value,m),f.next=20,Object(hn.g)(i.Command.error("Request Error","Failed to load user info"));case 20:wn(p)&&(a=a.push(p.value));case 21:o=!0,f.next=13;break;case 24:f.next=30;break;case 26:f.prev=26,f.t0=f.catch(11),s=!0,c=f.t0;case 30:f.prev=30,f.prev=31,o||null==u.return||u.return();case 33:if(f.prev=33,!s){f.next=36;break}throw c;case 36:return f.finish(33);case 37:return f.finish(30);case 38:return f.next=40,Object(hn.g)(l.iioUsersInfoLoaded(a));case 40:case"end":return f.stop()}},ir,this,[[11,26,30,38],[31,,33,37]])}function lr(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([s.LOAD_IIO_USERS_INFO]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Ut?7:10;break;case 7:return t.next=9,Object(hn.f)(cr,e);case 9:return t.abrupt("break",10);case 10:t.next=0;break;case 12:case"end":return t.stop()}},sr,this)}var dr,mr,pr=function(e){return _e(wt+"InstallUserOrganization",{organizationId:e})},fr=function(e){return _e(wt+"SetUpImplicitOrganization",{organizationId:e})},hr=function(e,t){return _e(wt+"SetUpExplicitOrganization",{organizationId:e,name:t})},br=function(e){return _e(wt+"Organization",{organizationId:e})},gr=function(){return _e(wt+"UserOrganizations",{})},vr=function(e,t,n){return _e(wt+"InviteUserToOrganization",{organizationId:e,invitationId:t,invitedUserEmail:n})},Or=function(e,t){return _e(wt+"RevokeUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},yr=function(e,t){return _e(wt+"ResendUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},Er=function(e,t){return _e(wt+"AcceptInvitationToOrganization",{organizationId:e,invitationId:t})},Ir=function(e,t){return _e(wt+"PromoteUserToOrganizationAdmin",{organizationId:e,userId:t})},kr=function(e,t){return _e(wt+"DemoteUserToOrganizationMember",{organizationId:e,userId:t})},Sr=function(e,t){return _e(wt+"RemoveUserFromOrganization",{organizationId:e,userId:t})},jr=function(e,t){return _e(wt+"RenameOrganization",{organizationId:e,newName:t})},xr=function(e,t){return _e(wt+"RemoveGuestFromOrganization",{organizationId:e,userId:t})},Tr=function(e,t){return _e(wt+"TurnGuestIntoMember",{guestId:e,organizationId:t})},Cr="@@InspectioOrganizations/SetUpExplicitOrganization",wr="@@InspectioOrganizations/ExplicitOrganizationSetUp",Ar="@@InspectioOrganizations/ExplicitOrganizationSetUpFailed",_r="@@InspectioOrganizations/InviteUserToOrganization",Ur="@@InspectioOrganizations/UserInvitedToOrganization",Br="@@InspectioOrganizations/RevokeUserOrganizationInvitation",Rr="@@InspectioOrganizations/ResendUserOrganizationInvitation",Nr="@@InspectioOrganizations/UserOrganizationInvitationRevoked",Lr="@@InspectioOrganizations/UserOrganizationInvitationResent",Dr="@@InspectioOrganizations/AcceptInvitationToOrganization",Pr="@@InspectioOrganizations/InvitationToOrganizationAccepted",Mr="@@InspectioOrganizations/PromoteUserToOrganizationAdmin",zr="@@InspectioOrganizations/UserPromotedToOrganizationAdmin",Fr="@@InspectioOrganizations/DemoteUserToOrganizationMember",Gr="@@InspectioOrganizations/UserDemotedToOrganizationMember",Vr="@@InspectioOrganizations/RemoveUserFromOrganization",Hr="@@InspectioOrganizations/UserRemovedFromOrganization",Wr="@@InspectioOrganizations/FetchOrganization",qr="@@InspectioOrganizations/OrganizationFetched",Jr="@@InspectioOrganizations/FetchUserOrganizations",Yr="@@InspectioOrganizations/UserOrganizationsFetched",Qr="@@InspectioOrganizations/RenameOrganization",Kr="@@InspectioOrganizations/OrganizationRenamed",Zr="@@InspectioOrganizations/RemoveGuestFromOrganization",Xr="@@InspectioOrganizations/GuestRemovedFromOrganization",$r="@@InspectioOrganizations/TurnGuestIntoMember",ea="@@InspectioOrganizations/GuestTurnedIntoMember",ta=function(e,t){return Object(tt.action)(Cr,{organizationId:e,name:t})},na=function(e,t){return Object(tt.action)(_r,{organizationId:e,invitedUserEmail:t})},ra=function(e,t,n){return Object(tt.action)(Br,{organizationId:e,invitationId:t,invitedUserEmail:n})},aa=function(e,t,n){return Object(tt.action)(Rr,{organizationId:e,invitationId:t,invitedUserEmail:n})},oa=function(e,t){return Object(tt.action)(Dr,{organizationId:e,invitationId:t})},ia=function(e,t){return Object(tt.action)(Mr,{organizationId:e,userId:t})},sa=function(e,t){return Object(tt.action)(Fr,{organizationId:e,userId:t})},ca=function(e,t){return Object(tt.action)(Vr,{organizationId:e,userId:t})},ua=function(e,t){return Object(tt.action)(Qr,{organizationId:e,newName:t})},la=function(e,t){return Object(tt.action)(Zr,{organizationId:e,userId:t})},da=function(e,t){return Object(tt.action)($r,{guestId:e,organizationId:t})},ma=function(e){return Object(tt.action)(qr,e)},pa=function(e){return Object(tt.action)(wr,e)},fa=function(e){return Object(tt.action)(Ar,e)},ha=function(e){return Object(tt.action)(Yr,e)},ba=function(e){return Object(tt.action)(Ur,e)},ga=function(e,t){return Object(tt.action)(Nr,{invitation:e,organization:t})},va=function(e,t){return Object(tt.action)(Lr,{invitation:e,organization:t})},Oa=function(e){return Object(tt.action)(Pr,e)},ya=function(e){return Object(tt.action)(zr,e)},Ea=function(e){return Object(tt.action)(Gr,e)},Ia=function(e){return Object(tt.action)(Hr,e)},ka=function(e){return Object(tt.action)(Kr,e)},Sa=function(e){return Object(tt.action)(Xr,e)},ja=function(e){return Object(tt.action)(ea,e)},xa=function(e){return Object(tt.action)(Wr,{organizationId:e})},Ta=function(){return Object(tt.action)(Jr,{})};(mr=dr||(dr={})).open="open",mr.acknowledged="acknowledged",mr.revoked="revoked";var Ca={uid:"",invitationId:"",invitedUserEmail:"",status:dr.open,aggregateType:"OrganizationInvitation"},wa=function(e){return new _a({uid:e.invitationId,invitationId:e.invitationId,invitedUserEmail:e.invitedUserEmail,status:dr.open,aggregateType:"OrganizationInvitation"})},Aa=function(e){var t=Un(e,[Pn("invitationId"),"invitationId missing"],[Pn("invitedUserEmail"),"invitedUserEmail missing"]);return Cn(t)?t:_n(new _a(Object(Ye.a)({},Ca,e,{uid:e.invitationId})))},_a=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(Ca)),Ua={uid:"",ownerId:"",name:"",explicit:!1,memberQuota:0,boardQuota:0,members:Object(fe.List)(),admins:Object(fe.List)(),boards:Object(fe.List)(),guests:Object(fe.List)(),invitations:Object(fe.List)(),aggregateType:"Organization"},Ba=function(e){var t=Un(e,[Pn("organizationId"),"organizationId missing"],[Pn("ownerId"),"ownerId missing in ".concat(e.organizationId)],[Pn("name"),"name missing in ".concat(e.organizationId)],[Pn("explicit"),"explicit missing in ".concat(e.organizationId)],[Pn("memberQuota"),"memberQuota missing in ".concat(e.organizationId)],[Pn("boardQuota"),"boardQuota missing in ".concat(e.organizationId)],[Pn("members"),"members missing in ".concat(e.organizationId)],[Pn("admins"),"admins missing in ".concat(e.organizationId)],[Pn("boards"),"boards missing in ".concat(e.organizationId)],[Pn("guests"),"guests missing in ".concat(e.organizationId)],[Pn("invitations"),"invitations missing in ".concat(e.organizationId)]);if(Cn(t))return t;var n,r=[],a=!0,o=!1,i=void 0;try{for(var s,c=e.invitations[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){n=s.value;var u=Aa(n);if(Cn(u))return u;wn(u)&&r.push(u.value)}}catch(l){o=!0,i=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}return _n(new Ra({uid:e.organizationId,ownerId:e.ownerId,name:e.name,explicit:e.explicit,memberQuota:e.memberQuota,boardQuota:e.boardQuota,members:Object(fe.List)(e.members),admins:Object(fe.List)(e.admins),guests:Object(fe.List)(e.guests),boards:Object(fe.List)(e.boards),invitations:Object(fe.List)(r),aggregateType:"Organization"}))},Ra=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.includes(e)}},{key:"setUpAsExplicit",value:function(e){return this.set("explicit",!0).set("name",e)}},{key:"inviteUser",value:function(e,t){return this.set("invitations",this.invitations.push(wa({invitationId:e,invitedUserEmail:t})))}},{key:"promoteAdmin",value:function(e){return this.set("admins",this.admins.push(e))}},{key:"demoteToMember",value:function(e){return this.set("admins",this.admins.filter(function(t){return t!==e}))}},{key:"revokeInvitation",value:function(e){return this.set("invitations",this.invitations.filter(function(t){return t.invitationId!==e}))}},{key:"removeUser",value:function(e){var t=this;return t=(t=(t=t.set("admins",t.get("admins",Object(fe.List)()).filter(function(t){return t!==e}))).set("members",t.get("members",Object(fe.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"removeGuest",value:function(e){var t=this;return t=(t=t.set("guests",t.get("guests",Object(fe.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"turnGuestIntoMember",value:function(e){var t=this.guests.filter(function(t){return t!==e}),n=this.members.push(e);return this.set("guests",t).set("members",n)}},{key:"withNewName",value:function(e){return this.set("name",e)}}]),t}(Object(fe.Record)(Ua)),Na={uid:"",organizationId:"",userId:"",organizationName:"",ownOrganization:!1,explicitOrganization:!1,userIsAdmin:!1,userIsGuest:!0,aggregateType:"UserOrganizationInfo"},La=function(e){var t=Un(e,[Pn("organizationId"),"organizationId missing"],[Pn("userId"),"userId missing"],[Pn("organizationName"),"organizationName missing"],[Pn("ownOrganization"),"ownOrganization missing"],[Pn("explicitOrganization"),"explicitOrganization missing"],[Pn("userIsAdmin"),"userIsAdmin missing"],[Pn("userIsGuest"),"userIsGuest missing"]);return Cn(t)?t:_n(new Da(Object(Ye.a)({},Na,e,{uid:e.organizationId})))},Da=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(Na)),Pa=n(61);function Ma(e,t){return e.set(t.uid,t)}function za(e,t){return e.set(t.uid,t)}function Fa(e,t){return e.remove(t.uid)}function Ga(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=t.toArray()[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){e=za(e,o.value)}}catch(s){r=!0,a=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e}function Va(e){return Object(fe.Map)()}var Ha=Object(fe.Map)(),Wa=Object(fe.Map)(),qa=Object(fe.Map)(),Ja=Object(Pa.combineReducers)({Organization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qr:return Ma(e,t.payload);case wr:case Ar:case Ur:case zr:case Gr:case Hr:case Xr:case Kr:case ea:return za(e,t.payload);case Nr:return za(e,t.payload.organization);default:return e}},UserOrganizationInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yr:return Ga(e,t.payload);case wr:var n=e.get(t.payload.uid);return n?za(e,n.set("organizationName",t.payload.name).set("explicitOrganization",!0)):e;case Ar:var r=e.get(t.payload.uid);return r?za(e,r.set("organizationName",t.payload.name).set("explicitOrganization",!1)):e;case Kr:var a=e.get(t.payload.uid);return a?za(e,a.set("organizationName",t.payload.name)):e;default:return e}},OrganizationInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lr:case Nr:return Ga(e,Object(fe.List)([t.payload.invitation]));default:return e}}},function(){return Object(fe.fromJS)({Organization:void 0,UserOrganizationInfo:void 0,OrganizationInvitation:void 0})}),Ya=fn.a.mark(Ka),Qa=fn.a.mark(Za);function Ka(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(j.Api.demoteUserToOrganizationMember,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not demote user to organization member."));case 8:if(!n){a.next=16;break}return a.next=11,Object(hn.i)(Oi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(hn.g)(j.Event.userDemotedToOrganizationMember(r.demoteToMember(e.payload.userId)));case 14:return a.next=16,Object(hn.g)(i.Command.info("User demoted","The user is no longer an admin of the organization."));case 16:case"end":return a.stop()}},Ya,this)}function Za(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.DEMOTE_USER_TO_ORGANIZATION_MEMBER]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Ka,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Qa,this)}var Xa=n(37),$a=fn.a.mark(to),eo=fn.a.mark(function e(t){var n,r,a;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(y.fetchOrganization,t.payload.organizationId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Could not fetch organization"));case 8:if(!r){e.next=19;break}if(!Cn(a=Ln(r.data,Rn(function(e){return Ba(e)})))){e.next=14;break}return console.error("Invalid organization response: ",a.value),e.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load organization"));case 14:if(!wn(a)){e.next=19;break}return e.next=17,Object(hn.g)(k.organizationFetched(a.value));case 17:return e.next=19,Object(hn.g)(f.Query.loadUsersInfo([a.value.ownerId].concat(Object(Xa.a)(a.value.members.toJS()),Object(Xa.a)(a.value.guests.toJS()))));case 19:case"end":return e.stop()}},e,this)});function to(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([E.FETCH_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(eo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},$a,this)}var no=n(156),ro=n.n(no),ao=fn.a.mark(so),oo=fn.a.mark(co),io=!1;function so(e){var t,n,r,a,o,s,c,u,l;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(j.Api.fetchUserOrganizations);case 2:if(t=e.sent,n=t.response,!(r=t.error)){e.next=20;break}if(404!==r.status){e.next=18;break}return e.next=9,Object(hn.c)(j.Api.setUpImplicitOrganization,ro()());case 9:if(!(a=e.sent).error){e.next=13;break}return e.next=13,Object(hn.g)(i.Command.error("Request Error","Could not install user organization"));case 13:if(!a.response){e.next=16;break}return e.next=16,Object(hn.g)(j.Query.fetchUserOrganizations());case 16:e.next=20;break;case 18:return e.next=20,Object(hn.g)(i.Command.error("Request Error","Could not fetch user organizations"));case 20:if(!n){e.next=56;break}if(!Cn(o=Ln(n.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(e){return La(e)})))){e.next=25;break}return e.next=25,Object(hn.g)(i.Command.error("Request Error","Could not load user organizations"));case 25:if(!wn(o)){e.next=56;break}if(!o.value.length){e.next=44;break}return s=Object(fe.List)(o.value),e.next=30,Object(hn.g)(j.Event.userOrganizationsFetched(s));case 30:return e.next=32,Object(hn.i)(A.makeGetCurrentUser());case 32:if(null!==e.sent.activeOrganization||1!==s.count()||s.first({explicitOrganization:!1}).explicitOrganization){e.next=36;break}return e.next=36,Object(hn.g)(f.Command.switchActiveOrganization(s.first({organizationId:null}).organizationId));case 36:return e.next=38,Object(hn.i)(A.makeGetCurrentUser());case 38:if(!(c=e.sent).activeOrganization){e.next=42;break}return e.next=42,Object(hn.g)(j.Query.fetchOrganization(c.activeOrganization));case 42:e.next=56;break;case 44:if(io){e.next=56;break}return io=!0,u=rt.a.v4(),e.next=49,Object(hn.c)(j.Api.installUserOrganization,u);case 49:if(!(l=e.sent).error){e.next=53;break}return e.next=53,Object(hn.g)(i.Command.error("Request Error","Could not initialize organization."));case 53:if(!l.response){e.next=56;break}return e.next=56,Object(hn.g)(j.Query.fetchUserOrganizations());case 56:case"end":return e.stop()}},ao,this)}function co(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.FETCH_USER_ORGANIZATIONS]);case 3:return e=t.sent,t.next=6,Object(hn.f)(so,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oo,this)}var uo=fn.a.mark(mo),lo=fn.a.mark(po);function mo(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=ro()(),o.next=3,Object(hn.c)(j.Api.inviteUserToOrganization,e.payload.organizationId,t,e.payload.invitedUserEmail);case 3:if(n=o.sent,r=n.response,!n.error){o.next=9;break}return o.next=9,Object(hn.g)(i.Command.error("Request Error","Could not invite user to organization."));case 9:if(!r){o.next=17;break}return o.next=12,Object(hn.i)(Oi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(hn.g)(j.Event.userInvitedToOrganization(a.inviteUser(t,e.payload.invitedUserEmail)));case 15:return o.next=17,Object(hn.g)(i.Command.info("User invited","The user was invited to the organization."));case 17:case"end":return o.stop()}},uo,this)}function po(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.INVITE_USER_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(mo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},lo,this)}var fo=fn.a.mark(bo),ho=fn.a.mark(go);function bo(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(j.Api.promoteUserToOrganizationAdmin,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not promote user to organization admin."));case 8:if(!n){a.next=16;break}return a.next=11,Object(hn.i)(Oi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(hn.g)(j.Event.userPromotedToOrganizationAdmin(r.promoteAdmin(e.payload.userId)));case 14:return a.next=16,Object(hn.g)(i.Command.info("User promoted","The user is now an admin of the organization."));case 16:case"end":return a.stop()}},fo,this)}function go(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.PROMOTE_USER_TO_ORGANIZATION_ADMIN]);case 3:return e=t.sent,t.next=6,Object(hn.f)(bo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ho,this)}var vo=fn.a.mark(yo),Oo=fn.a.mark(Eo);function yo(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(j.Api.removeGuestFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not remove guest from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(hn.i)(Oi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(hn.g)(j.Event.guestRemovedFromOrganization(r.removeGuest(e.payload.userId)));case 14:return a.next=16,Object(hn.g)(i.Command.info("Guest removed","The guest no longer has access to organization boards and teams."));case 16:case"end":return a.stop()}},vo,this)}function Eo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.REMOVE_GUEST_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(yo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Oo,this)}var Io=fn.a.mark(So),ko=fn.a.mark(jo);function So(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(j.Api.removeUserFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not remove user from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(hn.i)(Oi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(hn.g)(j.Event.userRemovedFromOrganization(r.removeUser(e.payload.userId)));case 14:return a.next=16,Object(hn.g)(i.Command.info("User removed","The user is no longer member of the organization."));case 16:case"end":return a.stop()}},Io,this)}function jo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.REMOVE_USER_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(So,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ko,this)}var xo=fn.a.mark(Co),To=fn.a.mark(wo);function Co(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(j.Api.renameOrganization,e.payload.organizationId,e.payload.newName);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not rename organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(hn.i)(Oi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(hn.g)(j.Event.organizationRenamed(r.withNewName(e.payload.newName)));case 14:return a.next=16,Object(hn.g)(i.Command.info("Organization renamed","Renaming organization was successful."));case 16:case"end":return a.stop()}},xo,this)}function wo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.RENAME_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Co,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},To,this)}var Ao=fn.a.mark(Uo),_o=fn.a.mark(Bo);function Uo(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.c)(j.Api.resendUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(hn.g)(i.Command.error("Request Error","Could not resend invitation."));case 8:if(!n){o.next=17;break}return r=wa({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(hn.i)(Oi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(hn.g)(j.Event.userOrganizationInvitationResent(r,a));case 15:return o.next=17,Object(hn.g)(i.Command.info("User invited","Invitation was sent again."));case 17:case"end":return o.stop()}},Ao,this)}function Bo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.RESEND_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Uo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},_o,this)}var Ro=fn.a.mark(Lo),No=fn.a.mark(Do);function Lo(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.c)(j.Api.revokeUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(hn.g)(i.Command.error("Request Error","Could not revoke invitation."));case 8:if(!n){o.next=15;break}return r=wa({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(hn.i)(Oi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(hn.g)(j.Event.userOrganizationInvitationRevoked(r.set("status",dr.revoked),a.revokeInvitation(r.invitationId)));case 15:case"end":return o.stop()}},Ro,this)}function Do(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.REVOKE_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Lo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},No,this)}var Po=fn.a.mark(zo),Mo=fn.a.mark(Fo);function zo(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.i)(Oi(e.payload.organizationId));case 2:if(!(t=o.sent)){o.next=20;break}return n=t.setUpAsExplicit(e.payload.name),o.next=7,Object(hn.g)(j.Event.explicitOrganizationSetUp(n));case 7:return o.next=9,Object(hn.c)(j.Api.setUpExplicitOrganization,e.payload.organizationId,e.payload.name);case 9:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=15,Object(hn.g)(j.Event.explicitOrganizationSetUpFailed(t));case 15:return o.next=17,Object(hn.g)(i.Command.error("Request Error","Could not create organization."));case 17:if(!a){o.next=20;break}return o.next=20,Object(hn.g)(i.Command.info("Organization created","Organization created successfully"));case 20:case"end":return o.stop()}},Po,this)}function Fo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.SET_UP_EXPLICIT_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(zo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Mo,this)}var Go=fn.a.mark(Ho),Vo=fn.a.mark(Wo);function Ho(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(Oi(e.payload.organizationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(hn.c)(j.Api.turnGuestIntoMember,e.payload.guestId,e.payload.organizationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not turn guest into member."));case 12:if(!r){a.next=17;break}return a.next=15,Object(hn.g)(i.Command.info("Member added","Guest turned into member."));case 15:return a.next=17,Object(hn.g)(j.Event.guestTurnedIntoMember(t.turnGuestIntoMember(e.payload.guestId)));case 17:case"end":return a.stop()}},Go,this)}function Wo(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([j.Type.TURN_GUEST_INTO_MEMBER]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Ho,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Vo,this)}var qo="inspectioOrganizations",Jo=fn.a.mark(Qo),Yo=fn.a.mark(Ko);function Qo(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(wi());case 2:return t=a.sent,a.next=5,Object(hn.c)(f.Api.switchActiveOrganization,t.uid,e.payload.organizationId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(hn.g)(i.Command.error("Request Error","Could not switch active organization."));case 11:if(!r){a.next=18;break}return t=t.set("activeOrganization",e.payload.organizationId),a.next=15,Object(hn.g)(f.Event.activeOrganizationSwitched(t));case 15:if(!e.payload.organizationId){a.next=18;break}return a.next=18,Object(hn.g)(j.Query.fetchOrganization(e.payload.organizationId));case 18:case"end":return a.stop()}},Jo,this)}function Ko(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([f.Type.SWITCH_ACTIVE_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Qo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Yo,this)}var Zo=function(e,t){return e.getIn(["inspectioUsers","iioUsersInfo",t])},Xo=function(e){return function(t){return Zo(t,e)}},$o=function(e,t){return Object(fe.List)(e.getIn(["inspectioUsers","iioUsersInfo"]).toIndexedSeq().toArray())||Object(fe.List)()},ei=function(){return Object(ft.a)([$o],function(e){return e})},ti=function(e){return Object(ft.a)([$o],function(t){return t.filter(function(t){return e.contains(t.userId)})})},ni=fn.a.mark(ai),ri=fn.a.mark(oi);function ai(e){var t;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.i)(A.currentUserSelector,void 0);case 2:if(!(t=e.sent).displayName){e.next=6;break}return e.next=6,Object(hn.c)(u.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 6:case"end":return e.stop()}},ni,this)}function oi(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([s.SIGN_IN]);case 3:return e=t.sent,t.next=6,Object(hn.f)(ai,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ri,this)}var ii=fn.a.mark(li),si=fn.a.mark(di),ci=fn.a.mark(mi),ui=fn.a.mark(pi);function li(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(A.currentUserSelector,void 0);case 2:if(!(t=a.sent).name){a.next=19;break}return a.next=6,Object(hn.c)(u.updateProfile,t);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not update profile with new profile picture."));case 12:if(!r){a.next=19;break}if(!t.displayName){a.next=16;break}return a.next=16,Object(hn.c)(u.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 16:return a.next=18,Object(hn.g)(i.Command.info("Profile Saved","Your profile has been saved"));case 18:e.payload.successCb();case 19:case"end":return a.stop()}},ii,this)}function di(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([s.UPDATE_PROFILE]);case 3:return e=t.sent,t.next=6,Object(hn.f)(li,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},si,this)}function mi(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.i)(A.currentUserSelector,void 0);case 2:if(t=o.sent,n=e.payload.password,!t.uid){o.next=16;break}return o.next=7,Object(hn.c)(u.updatePassword,t.uid,n);case 7:if(r=o.sent,a=r.response,!r.error){o.next=13;break}return o.next=13,Object(hn.g)(i.Command.error("Request Error","Could not change password."));case 13:if(!a){o.next=16;break}return o.next=16,Object(hn.g)(i.Command.info("Password changed","Password was changed successfully."));case 16:case"end":return o.stop()}},ci,this)}function pi(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([s.UPDATE_PASSWORD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(mi,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ui,this)}var fi=fn.a.mark(bi),hi=fn.a.mark(gi);function bi(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.g)(l.userSettingUpserted(e.payload.key,e.payload.value));case 2:return n.next=4,Object(hn.c)(u.upsertUserSetting,e.payload.key,e.payload.value);case 4:t=n.sent,t.response,t.error&&console.log("Failed updating user setting for ".concat(e.payload.key," and ").concat(e.payload.value));case 8:case"end":return n.stop()}},fi,this)}function gi(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.a)(s.UPSERT_USER_SETTING);case 2:e=n.sent;case 3:return n.next=6,Object(hn.k)(e);case 6:return t=n.sent,n.next=9,Object(hn.c)(bi,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}},hi,this)}var vi,Oi=function(e){return function(t){return e?function(e,t){return e.getIn([qo,"Organization",t])}(t,e):void 0}},yi=function(e){return e.getIn([qo,"Organization"]).toList()},Ei=n(25),Ii=1,ki=function(){function e(){var t=this;Object(Be.a)(this,e),this.initializationPromise=void 0,this.db=void 0,this.initializationPromise=new Promise(function(e,n){var r=indexedDB.open("insp_standalone",Ii);r.onupgradeneeded=function(e){t.updateDatabaseToLatestVersion(r.result,e.oldVersion)},r.onerror=function(){n("IndexedDB could not be initialized")},r.onsuccess=function(){t.db=r.result,e()}})}return Object(Re.a)(e,[{key:"get",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(t,"readonly"),e.next=3,i.objectStore(t).get(n);case 3:(s=e.sent).onsuccess=function(){return a(s.result)},s.onerror=function(){return o()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){var n=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(r,a){var o,i;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.db.transaction(t,"readonly"),e.next=3,o.objectStore(t).getAll();case 3:(i=e.sent).onsuccess=function(){return r(i.result)},i.onerror=function(){return a()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).add(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).put(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).delete(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"assertDBInitialized",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializationPromise;case 2:if(this.db){e.next=4;break}throw new Error("IndexedDB is not initialized");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateDatabaseToLatestVersion",value:function(e,t){switch(console.log("Starting upgrade for DB insp_standalone from version ".concat(t," to ").concat(Ii)),t){case 0:e.createObjectStore("boards",{keyPath:"boardId"}),e.createObjectStore("userSettings",{keyPath:"key"})}}}]),e}(),Si=ki,ji=function(){function e(t){Object(Be.a)(this,e),this.db=void 0,this.db=t,this.getBoards=this.getBoards.bind(this),this.getBoard=this.getBoard.bind(this),this.updateBoard=this.updateBoard.bind(this),this.addBoard=this.addBoard.bind(this),this.deleteBoard=this.deleteBoard.bind(this),this.getUserSettings=this.getUserSettings.bind(this),this.setUserSetting=this.setUserSetting.bind(this)}return Object(Re.a)(e,[{key:"getUser",value:function(){return{userId:"f1c1512d-e1b9-44c2-940c-3f7cade64a29"}}},{key:"getBoards",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("boards");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBoard",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("boards",t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=null;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBoard",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addBoard",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.add("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBoard",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.delete("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getUserSettings",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("userSettings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setUserSetting",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("userSettings",t.key);case 2:if(!e.sent){e.next=7;break}return e.next=5,this.db.put("userSettings",t);case 5:e.next=9;break;case 7:return e.next=9,this.db.add("userSettings",t);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),xi=ji,Ti=new xi(new Si),Ci=function(e,t){return e.getIn(["inspectioUsers","users","currentUser"])},wi=function(){return Object(ft.a)([Ci],function(e){return e})},Ai=function(){var e=function(e){return yi(e)};return Object(ft.a)([Ci,e],function(e,t){return-1})},_i=n(520),Ui=n(263),Bi=n.n(Ui),Ri=(n(841),n(1238)),Ni=n(1218),Li={aspect:1,unit:"px",x:0,y:0,width:150,height:150},Di=function(e){var t=Object(ge.useState)(Li),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(void 0),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(void 0),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=function(){e.onClose(),v()},v=function(){m(void 0),b(void 0),a(Li)};return ge.createElement(Ri.a,{open:e.open,onClose:g,closeIcon:!0},ge.createElement(Ri.a.Header,null,e.t("insp.user.avatar_upload.select_photo")),ge.createElement(Ri.a.Content,{image:!0},ge.createElement(_i.a,{onDrop:function(e){m(e[0]),b(URL.createObjectURL(e[0]))}},function(t){var n=t.getRootProps,o=t.getInputProps;return ge.createElement("section",{style:{height:"410px",width:"100%"}},ge.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),h?ge.createElement(Bi.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:h,crop:r,onChange:function(e){return a(e)},onImageLoaded:function(e){return c(e.width/e.naturalWidth)}}):ge.createElement("div",null,ge.createElement("input",o()),ge.createElement("p",null,e.t("insp.user.avatar_upload.drag_and_drop_info")))))})),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:g}),ge.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){e.onUpload(d,{x:r.x/s,y:r.y/s,width:r.width/s,height:r.height/s}),v()}})))},Pi=n(63),Mi=Object(Pe.b)()(Object(Pi.reduxForm)({form:"UserProfileEditForm",enableReinitialize:!0})(function(e){return ve.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.email")),ve.a.createElement(Pi.Field,{name:"email",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.email")})),ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.display_name")),ve.a.createElement(Pi.Field,{name:"displayName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.display_name")})),ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.company")),ve.a.createElement(Pi.Field,{name:"companyName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.company")})),ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.position")),ve.a.createElement(Pi.Field,{name:"jobTitle",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.position")})),ve.a.createElement("div",{className:"field"},ve.a.createElement(Ni.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.save")),ve.a.createElement(Fe.Link,{to:yt,className:"ui basic button noborder"},e.t("app.form.cancel"))))})),zi=n(1244),Fi=Object(Pe.b)()(Object(Pi.reduxForm)({form:"UserProfilePasswordForm",enableReinitialize:!1})(function(e){return ve.a.createElement("form",{className:"ui form"+(e.showErrorMessage?" error":""),onSubmit:e.handleSubmit},ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.password1")),ve.a.createElement(Pi.Field,{name:"password1",component:"input",type:"password"})),ve.a.createElement("div",{className:"field"},ve.a.createElement("label",null,e.t("insp.user.form.labels.password2")),ve.a.createElement(Pi.Field,{name:"password2",component:"input",type:"password"})),ve.a.createElement(zi.a,{error:!0,header:e.t("insp.user.change_password.passwords_not_matching_title"),content:e.t("insp.user.change_password.passwords_not_matching_text")}),ve.a.createElement("div",{className:"field"},ve.a.createElement(Ni.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.change"))))})),Gi=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),l=c[0],d=c[1],m=Object(ge.useState)(!1),p=Object(Qe.a)(m,2),f=p[0],h=p[1],b=Object(Me.useSelector)(wi());et(function(){o(!1)});var g=function(){t(Gt(b.merge({avatarUrl:"/avatar/"+b.uid+"?displayName="+encodeURI(b.displayName)+"&timestamp="+Date.now()}),function(){}))};return ge.createElement(Ge.a,null,ge.createElement(Ze.a,{stackable:!0},ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{width:"2",className:"tabletHidden"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"12"},ge.createElement(Xe.a,{as:"h1",icon:!0,textAlign:"center"},ge.createElement($e.a,{open:a,icon:!1},ge.createElement($e.a.Menu,null,ge.createElement($e.a.Item,{text:e.t("app.form.upload"),onClick:function(){return d(!0)}}),ge.createElement($e.a.Item,{text:e.t("app.form.delete"),onClick:function(){u.deleteAvatar(b.uid).then(function(){g()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.deletion_failed_title"),e.t("insp.user.avatar_upload.deletion_failed_text")))}).finally(function(){o(!1)})}}))),ge.createElement("img",{style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),o(!a)},className:"ui circular image",src:b.avatarUrl}),ge.createElement(Xe.a.Content,null,e.t("insp.user.profile_headline",{user_name:b.displayName}),ge.createElement(Xe.a.Subheader,null,e.t("insp.user.profile_subline")))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{width:"2",className:"tabletHidden"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"12"},ge.createElement("div",{className:"ui segments"},ge.createElement("div",{className:"ui segment"},ge.createElement(Mi,{initialValues:Object(fe.fromJS)(b.toJS()),onSubmit:function(n){!function(e,n){var r=b.merge(e.toJS());t(Gt(r,function(){return n.history.push(yt)}))}(n,e)}})))))),ge.createElement(Ze.a,{stackable:!0},ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{width:"2",className:"tabletHidden"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"12"},ge.createElement("div",{className:"ui segments"},ge.createElement("div",{className:"ui segment"},ge.createElement(Fi,{initialValues:Object(fe.fromJS)({password1:"",password2:""}),onSubmit:function(e){!function(e){var n=Object(Ye.a)({},{password1:"",password2:""},e.toJS());n.password1===n.password2?(h(!1),t(Vt(n.password1)),t(Object(Ke.a)("UserProfilePasswordForm"))):h(!0)}(e)},showErrorMessage:f})))))),ge.createElement(Di,{t:e.t,open:l,onClose:function(){d(!1),o(!1)},onUpload:function(n,r){var a=new FormData;a.append("avatar_file",n),a.append("crop",JSON.stringify(r)),u.uploadAvatar(b.uid,a).then(function(){g()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.upload_failed_title"),e.t("insp.user.avatar_upload.upload_failed_text")))}).finally(function(){d(!1),o(!1)})}}))})),Vi="InspectIO.",Hi="@@InspectioBoards/SaveBoard",Wi="@@InspectioBoards/RenameBoard",qi="@@InspectioBoards/ChangeBoardAbbreviation",Ji="@@InspectioBoards/SetBoardTags",Yi="@@InspectioBoards/ChangeResponsibleTeam",Qi="@@InspectioBoards/ImportNewBoard",Ki="@@InspectioBoards/ImportExistingBoard",Zi="@@InspectioBoards/AddBoard",Xi="@@InspectioBoards/AddBoards",$i="@@InspectioBoards/ForceUpdateBoards",es="@@InspectioBoards/SetBoardToSnapshot",ts="@@InspectioBoards/SetBoardDetailsFetched",ns="@@InspectioBoards/ConfirmDeleteBoard",rs="@@InspectioBoards/AbortBoardDeletion",as="@@InspectioBoards/DeleteBoard",os="@@InspectioBoards/ShareBoard",is="@@InspectioBoards/ResendBoardInvitation",ss="@@InspectioBoards/RevokeBoardInvitation",cs="@@InspectioBoards/RevokeAccessToBoard",us="@@InspectioBoards/ChangeBoardPermissions",ls="@@InspectioBoards/AdminChangeTeamBoardPermissions",ds="@@InspectioBoards/TriggerImportBoard",ms="@@InspectioBoards/TriggerExportBoard",ps="@@IspectioBoards/ToggleBoardHistory",fs="@@IspectioBoards/ToggleElementDetails",hs="@@InspectioBoards/ToggleCodyConsole",bs="@@InspectioBoards/ToggleTimerModal",gs="@@InspectioBoards/ToggleVideoSession",vs="@@InspectioBoards/AppendHistoryEntries",Os="@@InspectioBoards/PrependHistoryEntries",ys="@@InspectioBoards/ClearBoardHistory",Es="@@InspectioBoards/LoadFirstBoardHistoryChunk",Is="@@InspectioBoards/LoadNextBoardHistoryChunk",ks="@@InspectioBoards/SetNoMoreHistoryAvailable",Ss="@@InspectioBoards/SetIsLoadingHistory",js="@@InspectioBoards/UpdateBoardElementsTree",xs="@@InspectioBoards/CreateBoardClient",Ts="@@InspectioBoards/RemoveBoardClient",Cs="@@InspectioBoards/ResetBoardClientSecret",ws="@@InspectioBoards/SetStickyTemplate",As="@@InspectioBoards/UpdateStickyAdvancedConfig",_s="@@InspectioBoards/ImportStickyTemplates",Us="@@InspectioBoards/OpenElementsDetails",Bs="@@InspectioBoards/FilterBoardOverview",Rs="@@InspectioBoards/SortBoardOverview",Ns="@@InspectioBoards/FilterBoardOverviewByResponsibleTeam",Ls="@@InspectioBoards/HideSharedBoardsOnOverview",Ds="@@InspectioBoards/HideOwnBoardsOnOverview",Ps="@@InspectioBoards/FilterElementsTree",Ms="@@InspectioBoards/MoveUserBoardToOrganization",zs="@@InspectioBoards/RemoteBoardChanged",Fs="@@InspectioBoards/LocalBoardChanged",Gs="@@InspectioBoards/BoardImportStarted",Vs="@@InspectioBoards/BoardImported",Hs="@@InspectioBoards/BoardExported",Ws="@@InspectioBoards/BoardInitialized",qs="@@InspectioBoards/LocalBoardUpdatedWithRemoteChange",Js="@@InspectioBoards/BoardInvitationSent",Ys="@@InspectioBoards/BoardInvitationResent",Qs="@@InspectioBoards/BoardInvitationRevoked",Ks="@InspectioBoards/BoardAccessRevoked",Zs="@@InspectioBoards/BoardPermissionsChanged",Xs="@@InspectioBoards/TeamBoardPermissionsChanged",$s="@@InspectioBoards/BoardPermissionsForUsersFetched",ec="@@InspectioBoards/BoardPermissionsForTeamsFetched",tc="@@InspectioBoards/OpenBoardInvitationsFetched",nc="@@InspectioBoards/ActiveGraphElementChanged",rc="@@InspectioBoards/ActiveGraphElementLabelChanged",ac="@@InspectioBoards/ActiveGraphElementMetadataChanged",oc="@@InspectioBoards/BoardGraphElementsFetched",ic="@@InspectioBoards/BoardClientFetched",sc="@@InspectioBoards/BoardClientNotConfigured",cc="@@InspectioBoards/BoardClientSecretFetched",uc="@@InspectioBoards/BoardStickyTemplatesFetched",lc="@@InspectioBoards/StickyTemplateSet",dc="@@InspectioBoards/StickyAdvancedConfigUpdated",mc="@@InspectioBoards/StickyTemplatesImported",pc="@@InspectioBoards/UserBoardMovedToOrganization",fc="@@InspectioBoards/InitialBoardListLoaded",hc="@@InspectioBoards/StartFetchUserBoards",bc="@@InspectioBoards/FetchUserBoards",gc="@@InspectioBoards/FetchUserBoard",vc="@@InspectioBoards/BoardPermissionsForUsers",Oc="@@InspectioBoards/BoardPermissionsForTeams",yc="@@InspectioBoards/FetchOpenBoardInvitations",Ec="@@InspectioBoards/BoardGraphElements",Ic="@@InspectioBoards/FetchBoardClient",kc="@@InspectioBoards/FetchBoardClientSecret",Sc="@@InspectioBoards/FetchBoardStickyTemplates",jc=function(e,t,n,r,a,o){return _e(Vi+"InstallOrganizationBoard",{organizationId:e,boardId:t,boardName:n,boardAbbreviation:r,tags:a,responsibleTeam:o})},xc=function(e,t){return _e(Vi+"RenameBoard",{boardId:e,name:t})},Tc=function(e,t){return _e(Vi+"ChangeBoardAbbreviation",{boardId:e,nameAbbreviation:t})},Cc=function(e,t){return _e(Vi+"SetBoardTags",{boardId:e,tags:t.toJSON()})},wc=function(e,t){return _e(Vi+"ChangeResponsibleTeam",{boardId:e,responsibleTeam:t||null})},Ac=function(e){return _e(Vi+"DeleteBoard",{boardId:e})},_c=function(e,t,n){return _e(Vi+"TakeBoardSnapshot",{boardId:e,boardVersion:{userId:t.userId,version:t.version},content:n})},Uc=function(e,t,n){return _e(Vi+"ShareBoardWithUser",{boardId:e,invitedUser:t,boardPermissions:n||{writeAccess:!0,readAccess:!0,adminAccess:!1}})},Bc=function(e){return _e(Vi+"ResendBoardInvitation",{invitationId:e})},Rc=function(e){return _e(Vi+"RevokeBoardInvitation",{invitationId:e})},Nc=function(e){return _e(Vi+"AcknowledgeInvitation",{invitationId:e})},Lc=function(e,t){return _e(Vi+"RevokeAccessToBoard",{boardId:e,userId:t})},Dc=function(e,t,n){return _e(Vi+"ChangeBoardPermissions",{boardId:e,userId:t,boardPermissions:n})},Pc=function(e,t,n){return _e(Vi+"AdminChangeTeamBoardPermissions",{boardId:e,teamId:t,boardPermissions:n})},Mc=function(e){return _e(Vi+"UserBoard",{boardId:e})},zc=function(){return _e(Vi+"UserBoards",{})},Fc=function(e,t){return _e(Vi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON()})},Gc=function(e,t){return _e(Vi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON(),mode:"newer"})},Vc=function(e){return _e(Vi+"BoardPermissionsForUsers",{boardId:e})},Hc=function(e){return _e(Vi+"BoardPermissionsForTeams",{boardId:e})},Wc=function(e){return _e(Vi+"OpenBoardInvitations",{boardId:e})},qc=function(e){return _e(Vi+"InvitationBoard",{invitationId:e})},Jc=function(e){return fetch(e).then(function(e){return e.text()})},Yc=function(e,t,n){return function(e,t,n){return je.post(e,t,{baseURL:"/buckets/boards/",headers:{"Content-Type":n}})}(e,t,n)},Qc=function(e,t,n,r){return function(e,t,n,r){return je.post("".concat(e,"/").concat(t),n,{baseURL:"/buckets/boards/",headers:{"Content-Type":r}})}(e,t,n,r)},Kc=function(e){return function(e){return je.delete(e,{baseURL:"/"})}(e)},Zc=function(e,t){return _e(Vi+"BoardGraphElements",{boardId:e,type:t})},Xc=function(e){return _e(Vi+"BoardClient",{boardId:e})},$c=function(e){return _e(Vi+"BoardClientSecret",{boardId:e})},eu=function(e){return _e(Vi+"CreateBoardClient",{boardId:e})},tu=function(e){return _e(Vi+"RemoveBoardClient",{boardId:e})},nu=function(e){return _e(Vi+"ResetBoardClientSecret",{boardId:e})},ru=function(e){return _e(Vi+"StickyTemplates",{boardId:e})},au=function(e,t,n){return _e(Vi+"SetStickyTemplate",{boardId:e,cellType:t,template:n})},ou=function(e,t,n,r){return _e(Vi+"UpdateStickyAdvancedConfig",Object(Ye.a)({boardId:e,cellType:t,templateType:n},r?{templateSchema:r}:{}))},iu=function(e,t){return _e(Vi+"MoveUserBoardToOrganization",{organizationId:e,boardId:t})},su=function(e,t){return Object(tt.action)(Zi,{board:e,history:t})},cu=function(e){return Object(tt.action)(Xi,e)},uu=function(e){return Object(tt.action)($i,e)},lu=function(e){return Object(tt.action)(es,{snapshot:e})},du=function(e,t){return Object(tt.action)(ts,{boardId:e,writeAccess:t})},mu=function(e){return Object(tt.action)(ds,{boardId:e})},pu=function(e){return Object(tt.action)(ms,{boardId:e})},fu=function(e,t){return Object(tt.action)(ps,{boardId:e,visible:t})},hu=function(e,t,n){return Object(tt.action)(fs,{boardId:e,visible:t,focusEditor:n})},bu=function(e,t){return Object(tt.action)(hs,{boardId:e,visible:t})},gu=function(e,t){return Object(tt.action)(bs,{boardId:e,visible:t})},vu=function(e,t){return Object(tt.action)(gs,{boardId:e,active:t})},Ou=function(e,t){return Object(tt.action)(vs,{boardId:e,entries:t})},yu=function(e,t){return Object(tt.action)(Os,{boardId:e,entries:t})},Eu=function(e){return Object(tt.action)(ys,{boardId:e})},Iu=function(e,t){return Object(tt.action)(Is,{boardId:e,boardVersion:t})},ku=function(e){return Object(tt.action)(Es,{boardId:e})},Su=function(e){return Object(tt.action)(ks,{boardId:e})},ju=function(e,t){return Object(tt.action)(Ss,{boardId:e,loading:t})},xu=function(e){return Object(tt.action)(Bs,{filter:e})},Tu=function(e){return Object(tt.action)(Rs,{sort:e})},Cu=function(e){return Object(tt.action)(Ns,{teamId:e})},wu=function(e){return Object(tt.action)(Ls,{hide:e})},Au=function(e){return Object(tt.action)(Ds,{hide:e})},_u=function(e,t,n){return Object(tt.action)(Ps,{boardId:e,filter:t,focus:n})},Uu=function(e,t){return Object(tt.action)(Hi,{board:e,graph:t})},Bu=function(e){return Object(tt.action)(Wi,{board:e})},Ru=function(e){return Object(tt.action)(qi,{board:e})},Nu=function(e){return Object(tt.action)(Ji,{board:e})},Lu=function(e){return Object(tt.action)(Yi,{board:e})},Du=function(e,t,n,r){return Object(tt.action)(Qi,{boardName:e,boardXml:t,boardId:n,importTemporary:r})},Pu=function(e){return Object(tt.action)(Ki,{board:e})},Mu=function(e){return Object(tt.action)(ns,{boardId:e})},zu=function(e){return Object(tt.action)(rs,{boardId:e})},Fu=function(e){return Object(tt.action)(as,{boardId:e})},Gu=function(e,t,n){return Object(tt.action)(os,{boardId:e,email:t,permissions:n})},Vu=function(e){return Object(tt.action)(is,{invitationId:e})},Hu=function(e){return Object(tt.action)(ss,{invitationId:e})},Wu=function(e,t){return Object(tt.action)(cs,{boardId:e,userId:t})},qu=function(e,t,n){return Object(tt.action)(us,{boardId:e,userId:t,permissions:n})},Ju=function(e,t,n){return Object(tt.action)(ls,{boardId:e,teamId:t,permissions:n})},Yu=function(e,t){return Object(tt.action)(js,{boardId:e,elements:t})},Qu=function(e){return Object(tt.action)(xs,{boardId:e})},Ku=function(e){return Object(tt.action)(Ts,{boardId:e})},Zu=function(e){return Object(tt.action)(Cs,{boardId:e})},Xu=function(e,t,n,r){return Object(tt.action)(ws,{boardId:e,cellType:t,template:n,disableNotification:r})},$u=function(e,t,n,r,a){return Object(tt.action)(As,{boardId:e,cellType:t,templateType:n,templateSchema:r,disableNotification:a})},el=function(e,t,n){return Object(tt.action)(_s,{boardId:e,stickyTemplates:t,finishedCb:n})},tl=function(e,t){return Object(tt.action)(Ms,{organizationId:e,boardId:t})},nl=function(e){return Object(tt.action)(zs,{boardChanged:e})},rl=function(e){return Object(tt.action)(Fs,{boardChanged:e})},al=function(e){return Object(tt.action)(Gs,{boardId:e})},ol=function(e,t,n){return Object(tt.action)(Vs,{boardId:e,board:t,graph:n})},il=function(e){return Object(tt.action)(Hs,{boardId:e})},sl=function(e,t){return Object(tt.action)(Ws,{board:e,graph:t})},cl=function(){return Object(tt.action)(fc)},ul=function(e,t,n){return Object(tt.action)(qs,{boardId:e,board:t,graph:n})},ll=function(e){return Object(tt.action)(Js,{boardInvitation:e})},dl=function(e){return Object(tt.action)(Ys,{boardInvitation:e})},ml=function(e){return Object(tt.action)(Qs,{boardInvitation:e})},pl=function(e,t){return Object(tt.action)(Ks,{boardId:e,userId:t})},fl=function(e,t,n){return Object(tt.action)(Zs,{boardId:e,userId:t,permissions:n})},hl=function(e){return Object(tt.action)(Xs,e)},bl=function(e){return Object(tt.action)($s,{boardPermissions:e})},gl=function(e){return Object(tt.action)(ec,{boardPermissions:e})},vl=function(e){return Object(tt.action)(tc,{boardInvitations:e})},Ol=function(e,t){return Object(tt.action)(nc,{boardId:e,element:t})},yl=function(e,t,n){return Object(tt.action)(rc,{boardId:e,elementId:t,label:n})},El=function(e,t,n){return Object(tt.action)(ac,{boardId:e,elementId:t,metadata:n})},Il=function(e,t){return Object(tt.action)(oc,{boardId:e,elements:t})},kl=function(e,t){return Object(tt.action)(ic,{boardId:e,client:t})},Sl=function(e){return Object(tt.action)(sc,{boardId:e})},jl=function(e,t){return Object(tt.action)(cc,{boardId:e,clientSecret:t})},xl=function(e){return Object(tt.action)(uc,{stickyTemplates:e})},Tl=function(e){return Object(tt.action)(lc,{stickyTemplate:e})},Cl=function(e){return Object(tt.action)(dc,{stickyTemplate:e})},wl=function(e){return Object(tt.action)(mc,{stickyTemplates:e})},Al=function(e){return Object(tt.action)(pc,e)},_l=function(){return Object(tt.action)(hc)},Ul=function(){return Object(tt.action)(bc)},Bl=function(e){return Object(tt.action)(gc,{boardId:e})},Rl=function(e){return Object(tt.action)(vc,{boardId:e})},Nl=function(e){return Object(tt.action)(Oc,{boardId:e})},Ll=function(e){return Object(tt.action)(yc,{boardId:e})},Dl=function(e,t){return Object(tt.action)(Ec,{boardId:e,type:t})},Pl=function(e){return Object(tt.action)(Ic,{boardId:e})},Ml=function(e){return Object(tt.action)(kc,{boardId:e})},zl=function(e){return Object(tt.action)(Sc,{boardId:e})},Fl=function(e,t){return Object(fe.List)(e.getIn([qo,"UserOrganizationInfo"]).toIndexedSeq().toArray())||Object(fe.List)()},Gl=function(e){return Object(ft.a)([Fl],function(t){return t.filter(function(t){return t.userId===e})})},Vl=function(){return Object(ft.a)([Fl,A.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})})},Hl={userId:"",version:0,head:!1},Wl=function(e){function t(e){return Object(Be.a)(this,t),void 0!==e.head&&null!==e.head||(e.head=!1),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isHead",value:function(){return this.head||!1}},{key:"asHead",value:function(){return this.set("head",!0)}},{key:"equals",value:function(e){return this.userId===e.userId&&this.version===e.version}},{key:"isNewerThan",value:function(e){return this.userId!==e.userId||this.version>e.version}}]),t}(Object(fe.Record)(Hl)),ql={uid:"",name:"",nameAbbreviation:"",tags:Object(fe.List)(),version:new Wl(Hl),xml:null,createdAt:(new Date).toISOString(),lastModified:(new Date).toISOString(),inDeletion:!1,shouldImport:!1,shouldExport:!1,shouldShowHistory:!1,shouldShowElementDetails:!1,shouldFocusMetadataEditor:!1,shouldShowCodyConsole:!1,shouldShowTimerModal:!1,videoSessionActive:!1,shared:!1,detailsFetched:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),responsibleTeam:void 0,writeAccess:!1,example:!1,owner:null,creator:null,organization:null,tempBoard:!1},Jl=function(e){var t=e.split(" "),n="";if(1===t.length){var r=t[0];return r.length<=3?r.toLocaleUpperCase():r.slice(0,3).toLocaleUpperCase()}return t.length>1&&t.forEach(function(e){return n+=e.charAt(0)}),n.slice(0,3).toLocaleUpperCase()},Yl=function(e,t,n,r,a){return console.log("create user board",a),new Kl({uid:"",name:t,nameAbbreviation:n||Jl(t),tags:r?Object(fe.List)(r):Object(fe.List)(),version:new Wl({userId:e,version:1}),xml:null,createdAt:(new Date).toISOString(),lastModified:void 0,inDeletion:!1,shared:!1,detailsFetched:!0,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),responsibleTeam:a,writeAccess:!0,example:!1,owner:null,creator:e,organization:null,tempBoard:!1})},Ql=function(e,t){return new Kl({uid:"",name:t,nameAbbreviation:Jl(t),tags:Object(fe.List)(),version:new Wl({userId:e,version:1}),xml:null,createdAt:(new Date).toISOString(),lastModified:void 0,inDeletion:!1,shared:!1,detailsFetched:!0,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),writeAccess:!0,example:!1,owner:null,creator:e,organization:null,tempBoard:!0})},Kl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),void 0===e.xml&&(e.xml=null),void 0===e.lastModified&&(e.lastModified=(new Date).toISOString()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"updateXmlAndVersionFromBoard",value:function(e){var t=this.set("xml",e.xml);return t=(t=t.set("version",e.version)).set("lastModified",e.lastModified)}},{key:"updateXmlFromSnapshot",value:function(e){var t=this.set("xml",e.xml);return t=t.set("version",e.boardVersion)}},{key:"updateXml",value:function(e,t){var n=this.set("xml",e);return n=(n=n.set("lastModified",(new Date).toISOString())).set("version",new Wl({userId:t,version:this.version.version+1}))}},{key:"updateVersion",value:function(e){return this.set("version",e)}},{key:"syncSummaryInfo",value:function(e){var t=this.set("sharedWith",e.sharedWith);return(t=(t=t.set("assignedTeams",e.assignedTeams)).set("owner",e.owner)).set("example",e.example)}},{key:"isCreator",value:function(e){return this.get("creator")===e}},{key:"moveToOrganization",value:function(e){var t=this.set("creator",this.get("owner"));return(t=t.set("owner",null)).set("organization",e)}}]),t}(Object(fe.Record)(ql));!function(e){e.event="event",e.command="command",e.role="role",e.projection="projection",e.aggregate="aggregate",e.document="document",e.policy="policy",e.hotSpot="hotSpot",e.externalSystem="externalSystem",e.ui="ui",e.feature="feature",e.boundedContext="boundedContext",e.freeText="freeText",e.textCard="textCard",e.edge="edge",e.misc="misc",e.icon="icon",e.image="image",e.layer="layer"}(vi||(vi={}));var Zl,Xl,$l=function e(t,n){return n||(n=[]),t.forEach(function(t){n.push(t),t.children().count()>0&&e(t.children().toJS(),n)}),n},ed=function(e,t){return new id(e,t)},td=function(e){return new cd(e)},nd=function(e,t){return e.getType()===vi.boundedContext&&t.getType()!==vi.boundedContext?-1:t.getType()===vi.boundedContext&&e.getType()!==vi.boundedContext?1:e.getType()===vi.feature&&t.getType()!==vi.feature?-1:t.getType()===vi.feature&&e.getType()!==vi.feature?1:e.getName()<t.getName()?-1:t.getName()<e.getName()?1:0},rd=function(e){return{id:e.getId(),name:e.getName(),description:e.getDescription(),type:e.getType(),link:e.getLink(),tags:e.getTags(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?md(e.getParent(),e):null,childrenList:e.children().map(ld),sourcesList:e.getSources().map(dd),targetsList:e.getTargets().map(dd),geometry:new ad(e.getGeometry()),metadata:e.getMetadata()}},ad=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),t}(Object(fe.Record)({x:0,y:0})),od=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;Object(Be.a)(this,e),this.mxcell=void 0,this.mxgraphModel=void 0,this.id=null,this.root=null,this.name=null,this.description=null,this.type=null,this.tags=null,this.layer=!1,this.parentCache=void 0,this.childrenCache=null,this.sourcesCache=null,this.targetsCache=null,this.metadataCache=void 0,this.deepLinkFactory=void 0,this.mxcell=t,this.mxgraphModel=n,this.layer=r,this.root=t.getId()===MXGRAPH_ROOT_UUIDS[1],this.deepLinkFactory=a}return Object(Re.a)(e,[{key:"getId",value:function(){return null===this.id&&(this.id=this.mxcell.getId()),this.id}},{key:"getName",value:function(){return null===this.name&&(this.name=inspectioUtils.getLabelText(this.mxcell),this.isDefaultLayer()&&""===this.name&&(this.name="Board")),this.name}},{key:"getDescription",value:function(){return null===this.description&&(this.description=inspectioUtils.getLabelSecondaryText(this.mxcell)),this.description}},{key:"getType",value:function(){if(null!==this.type)return this.type;var e=inspectioUtils.getTypeInclEdge(this.mxcell);return e||(e=vi.misc),e===hd.multiple&&(e=vi.misc),this.isLayer()&&(e=vi.layer),this.type=e,this.type}},{key:"getLink",value:function(){return this.isLayer()?null:this.root?null:this.deepLinkFactory?this.deepLinkFactory(this.getId()):null}},{key:"getTags",value:function(){return null!==this.tags?this.tags:Object(fe.List)(inspectioUtils.getTags(this.mxcell))}},{key:"getParent",value:function(){return"undefined"===typeof this.parentCache&&(this.parentCache=this.isLayer()||null===this.mxcell.getParent()?null:new e(this.mxcell.getParent(),this.mxgraphModel,this.mxgraphModel.getChildren(this.mxgraphModel.root).includes(this.mxcell.getParent()),this.deepLinkFactory)),this.parentCache}},{key:"children",value:function(){var t=this;if(null!==this.childrenCache)return this.childrenCache;var n=this.mxgraphModel.getChildren(this.mxcell);n||(n=[]);var r=Object(fe.List)(n);return this.childrenCache=r.map(function(n){return new e(n,t.mxgraphModel,!!t.root,t.deepLinkFactory)}),this.childrenCache}},{key:"setChildren",value:function(e){return this.childrenCache=e,this}},{key:"getSources",value:function(){var t=this;if(null!==this.sourcesCache)return this.sourcesCache;var n=Object(fe.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(r){r&&r.source&&r.source.getId()!==t.mxcell.getId()&&(n=n.push(new e(r.source,t.mxgraphModel,!1,t.deepLinkFactory)))}),this.sourcesCache=n,n):n}},{key:"getTargets",value:function(){var t=this;if(null!==this.targetsCache)return this.targetsCache;var n=Object(fe.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(r){r&&r.target&&r.target.getId()!==t.mxcell.getId()&&(n=n.push(new e(r.target,t.mxgraphModel,!1,t.deepLinkFactory)))}),this.targetsCache=n,n):n}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.isLayer()&&this.mxcell.getId()===MXGRAPH_ROOT_UUIDS[0]}},{key:"getGeometry",value:function(){return this.mxcell.geometry?new ad({x:this.mxcell.geometry.x,y:this.mxcell.geometry.y}):{x:0,y:0}}},{key:"getMetadata",value:function(){if("undefined"===typeof this.metadataCache){var e=inspectioUtils.getMetadata(this.mxcell);this.metadataCache=e||null}return this.metadataCache}}]),e}(),id=function(){function e(t,n){Object(Be.a)(this,e),this.mxgraph=void 0,this.editorUi=void 0,this.orgLayerVisibility={},this.mxgraph=t,this.editorUi=n}return Object(Re.a)(e,[{key:"getCurrentScale",value:function(){return this.mxgraph.getCurrentScale()}},{key:"getCurrentTranslate",value:function(){return this.mxgraph.getCurrentTranslate()}},{key:"onPanning",value:function(e){this.mxgraph.onPanning(e)}},{key:"offPanning",value:function(e){this.mxgraph.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.mxgraph.translateMousePoint(e,t)}},{key:"onZoom",value:function(e){this.mxgraph.onZoom(e)}},{key:"offZoom",value:function(e){this.mxgraph.offZoom(e)}},{key:"getRoot",value:function(){var e=this.mxgraph.getModel();return ld(new od(e.getRoot(),e))}},{key:"openLayersDialog",value:function(){this.editorUi.actions.get("layers").funct()}},{key:"triggerCody",value:function(){this.mxgraph.triggerCody()}},{key:"hasUserLevelVisibilityChanges",value:function(){return Object.keys(this.orgLayerVisibility).length>0}},{key:"isVisible",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());return t&&this.mxgraph.getModel().isVisible(t)}},{key:"setUserVisible",value:function(e,t){var n=this,r=this.mxgraph.getModel().getCell(e.getId());if(r){this.mxgraph.model.beginUpdate();try{if(this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,r,t)),!inspectioUtils.isContainer(r)&&!e.isLayer())this.mxgraph.getAllEdges([r]).forEach(function(e){t?(e.source&&e.source!==r&&n.mxgraph.getModel().isVisible(e.source)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t)),e.target&&e.target!==r&&n.mxgraph.getModel().isVisible(e.target)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))):n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))})}finally{this.mxgraph.model.endUpdate()}}else{if(this.orgLayerVisibility.hasOwnProperty(r.getId())||(this.orgLayerVisibility[r.getId()]=this.isVisible(e)),r){this.mxgraph.enableLazyTextPaint(),this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{this.mxgraph.getModel().setVisible(r,t)}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}this.mxgraph.disableLazyTextPaint()}window.setTimeout(function(){t&&(e.isLayer()?(n.mxgraph.zoom(.2,!0),n.mxgraph.showAll(r),n.mxgraph.scrollCellsIntoView(n.mxgraph.model.getChildren(r))):n.mxgraph.scrollCellsIntoView([r]))},200)}}},{key:"applyVisibilityGlobally",value:function(){if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdate();try{for(var e in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(e)){var t=this.mxgraph.model.getCell(e);t&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,t,this.mxgraph.model.isVisible(t)))}this.orgLayerVisibility={}}finally{this.mxgraph.model.endUpdate()}}}},{key:"isLocked",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());if(!t)return!1;var n=this.mxgraph.view.getState(t),r=null!=n?n.style:this.mxgraph.getCellStyle(t);return"1"===mxUtils.getValue(r,"locked","0").toString()}},{key:"setLocked",value:function(e,t){var n=this.mxgraph.getModel().getCell(e.getId());if(n){var r=this.mxgraph.view.getState(n);null!=r?r.style:this.mxgraph.getCellStyle(n);this.mxgraph.getModel().beginUpdate();try{this.mxgraph.setCellStyles("locked",t?"1":null,[n])}finally{this.mxgraph.getModel().endUpdate()}t&&this.mxgraph.removeSelectionCells(this.mxgraph.getModel().getDescendants(n))}}},{key:"deleteElement",value:function(e){var t=this.mxgraph.model.getCell(e.getId());t&&this.mxgraph.removeCells([t],!0)}},{key:"addLayer",value:function(e){if(this.mxgraph.isEnabled()){this.mxgraph.model.beginUpdate();try{var t=this.mxgraph.addCell(new mxCell(e),this.mxgraph.model.root);this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"deleteLayer",value:function(e){if(e.isDefaultLayer())throw Error("The default layer cannot be deleted!");var t=this.mxgraph.model.getCell(e.getId()),n=this.isActiveLayer(e);this.mxgraph.model.beginUpdate();try{var r=this.mxgraph.model.root.getIndex(t);this.mxgraph.removeCells([t],!1),n&&(r>0&&r<=this.mxgraph.model.getChildCount(this.mxgraph.model.root)?this.mxgraph.setDefaultParent(this.mxgraph.model.getChildAt(this.mxgraph.model.root,r-1)):this.mxgraph.setDefaultParent(null))}finally{this.mxgraph.model.endUpdate()}}},{key:"isActiveLayer",value:function(e){return this.mxgraph.getDefaultParent().getId()===e.getId()}},{key:"setAsActiveLayer",value:function(e){var t=this.mxgraph.model.getCell(e.getId());if(t){this.mxgraph.model.beginUpdate();try{this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"setDefaultLayerAsActive",value:function(){this.mxgraph.setDefaultParent(null)}},{key:"highlightLayer",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());t&&this.mxgraph.model.getChildren(t)&&this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(t))}},{key:"changeNodeName",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());n&&this.mxgraph.cellLabelChanged(n,t)}},{key:"copySelectionToActiveLayer",value:function(){return!(!this.mxgraph.isEnabled()||this.mxgraph.isSelectionEmpty())&&(this.mxgraph.moveCells(this.mxgraph.getSelectionCells(),0,0,!1,this.mxgraph.getDefaultParent()),!0)}},{key:"exportXmlSnapshot",value:function(){var e={};if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var t in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(t)){var n=this.mxgraph.model.getCell(t);if(n){var r=this.mxgraph.model.isVisible(n);r!==this.orgLayerVisibility[t]&&(e[t]=r,this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,n,this.orgLayerVisibility[t])))}}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}}var a=new mxCodec(mxUtils.createXmlDocument()).encode(this.mxgraph.getModel());0===this.mxgraph.view.translate.x&&0===this.mxgraph.view.translate.y||(a.setAttribute("dx",Math.round(100*this.mxgraph.view.translate.x)/100),a.setAttribute("dy",Math.round(100*this.mxgraph.view.translate.y)/100)),a.setAttribute("grid",this.mxgraph.isGridEnabled()?"1":"0"),a.setAttribute("gridSize",this.mxgraph.gridSize),a.setAttribute("guides",this.mxgraph.graphHandler.guidesEnabled?"1":"0"),a.setAttribute("tooltips",this.mxgraph.tooltipHandler.isEnabled()?"1":"0"),a.setAttribute("connect",this.mxgraph.connectionHandler.isEnabled()?"1":"0"),a.setAttribute("arrows",this.mxgraph.connectionArrowsEnabled?"1":"0"),a.setAttribute("fold",this.mxgraph.foldingEnabled?"1":"0"),a.setAttribute("page",this.mxgraph.pageVisible?"1":"0"),a.setAttribute("pageScale",this.mxgraph.pageScale),a.setAttribute("pageWidth",this.mxgraph.pageFormat.width),a.setAttribute("pageHeight",this.mxgraph.pageFormat.height),null!=this.mxgraph.background&&a.setAttribute("background",this.mxgraph.background);var o=mxUtils.getXml(a);this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var i in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(i)){var s=this.mxgraph.model.getCell(i);s&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,s,e[i]))}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}return o}},{key:"onSelectionChanged",value:function(e){var t=this;this.mxgraph.selectionModel.addListener(mxEvent.CHANGE,function(){t.mxgraph.isSelectionEmpty()?e(!1):e(!0)})}},{key:"setCockpitBaseUrl",value:function(e){this.mxgraph.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.mxgraph.container.focus()}}]),e}(),sd=function(){function e(){Object(Be.a)(this,e)}return Object(Re.a)(e,[{key:"getId",value:function(){return"__EMPTY_LAYER__"}},{key:"getName",value:function(){return"Empty Layer"}},{key:"getDescription",value:function(){return""}},{key:"getType",value:function(){return vi.misc}},{key:"getLink",value:function(){return null}},{key:"getTags",value:function(){return Object(fe.List)()}},{key:"isLayer",value:function(){return!0}},{key:"isDefaultLayer",value:function(){return!1}},{key:"getParent",value:function(){return null}},{key:"children",value:function(){return Object(fe.List)()}},{key:"getSources",value:function(){return Object(fe.List)()}},{key:"getTargets",value:function(){return Object(fe.List)()}},{key:"getMetadata",value:function(){return null}},{key:"setChildren",value:function(e){return this}},{key:"getGeometry",value:function(){return{x:0,y:0}}}]),e}(),cd=function(){function e(t){Object(Be.a)(this,e),this.boardXml=void 0,t||(t=""),this.boardXml=t}return Object(Re.a)(e,[{key:"getCurrentScale",value:function(){return 1}},{key:"getCurrentTranslate",value:function(){return{x:0,y:0}}},{key:"onPanning",value:function(e){}},{key:"offPanning",value:function(e){}},{key:"translateMousePoint",value:function(e,t){return{x:e,y:t}}},{key:"onZoom",value:function(e){}},{key:"offZoom",value:function(e){}},{key:"getRoot",value:function(){return new sd}},{key:"openLayersDialog",value:function(){}},{key:"triggerCody",value:function(){}},{key:"hasUserLevelVisibilityChanges",value:function(){return!1}},{key:"isVisible",value:function(e){return!1}},{key:"setUserVisible",value:function(e,t){}},{key:"applyVisibilityGlobally",value:function(){}},{key:"isLocked",value:function(e){return!1}},{key:"setLocked",value:function(e,t){}},{key:"deleteElement",value:function(e){}},{key:"addLayer",value:function(e){}},{key:"deleteLayer",value:function(e){}},{key:"isActiveLayer",value:function(e){return!1}},{key:"setAsActiveLayer",value:function(e){}},{key:"setDefaultLayerAsActive",value:function(){}},{key:"highlightLayer",value:function(e){}},{key:"changeNodeName",value:function(e,t){}},{key:"copySelectionToActiveLayer",value:function(){return!1}},{key:"exportXmlSnapshot",value:function(){return this.boardXml}},{key:"onSelectionChanged",value:function(e){}},{key:"setCockpitBaseUrl",value:function(e){}},{key:"focus",value:function(){}}]),e}(),ud={id:"",name:"",description:"",type:vi.misc,link:null,tags:Object(fe.List)(),layer:!1,defaultLayer:!1,parent:null,childrenList:Object(fe.List)(),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:{x:0,y:0},metadata:null},ld=function e(t){return new pd({id:t.getId(),name:t.getName(),description:t.getDescription(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?md(t.getParent(),t):null,childrenList:t.children().map(e),sourcesList:t.getSources().map(dd),targetsList:t.getTargets().map(dd),geometry:new ad(t.getGeometry()),metadata:t.getMetadata()})},dd=function(e){return new pd({id:e.getId(),name:e.getName(),description:e.getDescription(),type:e.getType(),link:e.getLink(),tags:e.getTags(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?md(e.getParent(),e):null,childrenList:e.children().map(ld),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:new ad(e.getGeometry()),metadata:e.getMetadata()})},md=function e(t,n){return new pd({id:t.getId(),name:t.getName(),description:t.getDescription(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?e(t.getParent(),t):null,childrenList:Object(fe.List)(),sourcesList:Object(fe.List)(),targetsList:Object(fe.List)(),geometry:new ad(t.getGeometry()),metadata:t.getMetadata()})},pd=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getDescription",value:function(){return this.description}},{key:"getType",value:function(){return this.type}},{key:"getLink",value:function(){return this.link}},{key:"getTags",value:function(){return this.tags}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.defaultLayer}},{key:"getParent",value:function(){return this.parent}},{key:"children",value:function(){return this.childrenList}},{key:"getSources",value:function(){return this.sourcesList}},{key:"getTargets",value:function(){return this.targetsList}},{key:"getGeometry",value:function(){return this.geometry}},{key:"getMetadata",value:function(){return this.metadata}},{key:"setChildren",value:function(e){return this.set("childrenList",e)}}]),t}(Object(fe.Record)(ud));!function(e){e.added="added",e.edited="edited",e.deleted="deleted",e.moved="moved"}(Zl||(Zl={})),function(e){e.multiple="multiple"}(Xl||(Xl={}));var fd,hd=Object(Ye.a)({},vi,Xl),bd={userId:"",username:"",boardId:"",boardVersion:new Wl(Hl),action:Zl.edited,cellType:hd.misc,label:"",date:"",cellId:void 0},gd=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),t}(Object(fe.Record)(bd)),vd=function(e,t){return new gd({action:e.action,cellType:e.cellType,label:e.cellLabel,userId:t.userId,username:t.username,boardId:e.board,boardVersion:e.toBoardVersion(),date:e.recordedAt,cellId:e.cellId})},Od={uid:"",name:"BoardChanged",board:"",changeSet:Object(fe.List)(),version:0,recordedAt:"",userId:"",action:Zl.edited,cellType:hd.misc,cellLabel:"",cellId:void 0},yd=function(e){var t=Object(Ye.a)({},e,{changeSet:Object(fe.List)(e.changeSet)});return new kd(t)},Ed=function(e,t,n,r,a,o,i,s){return new kd({uid:"",name:Od.name,board:e,changeSet:t,version:n,recordedAt:"",userId:r,action:a,cellType:o,cellLabel:i,cellId:s})},Id=function(e){return yd({uid:e.patchId,board:e.boardId,name:Od.name,changeSet:e.patch,version:e.boardVersion.version,userId:e.boardVersion.userId,recordedAt:e.recordedAt,action:e.action,cellId:null!==e.cellId?e.cellId:void 0,cellType:e.cellType,cellLabel:e.cellLabel})},kd=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),""===e.recordedAt&&(e.recordedAt=(new Date).toISOString()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"toBoardVersion",value:function(){return new Wl({userId:this.userId,version:this.version})}}]),t}(Object(fe.Record)(Od));!function(e){e.event="event"}(fd||(fd={}));var Sd,jd={uid:"",aggregateType:"BoardGraphElement",name:"",parentId:null,type:fd.event,children:void 0,sources:void 0,targets:void 0},xd=function(e){var t=Un(e,[Pn("id"),"id missing"],[Pn("name"),"name missing in "+e.id],[Pn("parentId"),"parentId missing in "+e.id],[Pn("type"),"type missing in "+e.id]);return Cn(t)?t:_n(new Td({uid:e.id,aggregateType:"BoardGraphElement",name:e.name,parentId:e.parentId,type:e.type,sources:e.sources||void 0,targets:e.targets||void 0,children:e.children||void 0}))},Td=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(jd)),Cd={uid:"",aggregateType:"BoardInvitation",boardId:"",invitedUserEmail:"",invitingUser:"",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},status:"pending",resendAttempts:0},wd=function(e){var t=Un(e,[Pn("invitationId"),"invitationId missing"],[Pn("boardId"),"boardId missing in "+e.permissionsId],[Pn("invitedUserEmail"),"invitedUserEmail missing in "+e.permissionsId],[Pn("invitingUser"),"invitingUser missing in "+e.permissionsId],[Pn("permissions"),"permissions missing in "+e.permissionsId],[Pn("status"),"status missing in "+e.permissionsId]);return Cn(t)?t:_n(new Ad(Object(Ye.a)({},Cd,e,{uid:e.invitationId})))},Ad=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status","revoked")}}]),t}(Object(fe.Record)(Cd)),_d={uid:"",aggregateType:"BoardPermission",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},teamId:"",boardId:""},Ud=function(e){var t=Un(e,[Pn("permissionsId"),"permissionsId missing"],[Pn("permissions"),"permissions missing in "+e.permissionsId],[Pn("teamId"),"teamId missing in "+e.permissionsId],[Pn("boardId"),"boardId missing in "+e.permissionsId]);return Cn(t)?t:_n(new Bd({uid:e.permissionsId,aggregateType:"BoardPermission",permissions:e.permissions,teamId:e.teamId,boardId:e.boardId}))},Bd=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"changePermissions",value:function(e){return this.set("permissions",e)}}]),t}(Object(fe.Record)(_d)),Rd={uid:"",aggregateType:"BoardPermissionForUser",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},userId:"",boardId:""},Nd=function(e){var t=Un(e,[Pn("permissionsId"),"permissionsId missing"],[Pn("permissions"),"permissions missing in "+e.permissionsId],[Pn("userId"),"userId missing in "+e.permissionsId],[Pn("boardId"),"boardId missing in "+e.permissionsId]);return Cn(t)?t:_n(new Ld({uid:e.permissionsId,aggregateType:"BoardPermissionForUser",permissions:e.permissions,userId:e.userId,boardId:e.boardId}))},Ld=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(Rd)),Dd={boardId:"",xml:"",boardVersion:new Wl(Hl)},Pd=function(e){function t(e){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(Dd)),Md=n(1231),zd=n(1232),Fd=function(e,t,n){return _e(Vi+"AddTeam",{teamId:e,name:t,organizationId:n})},Gd=function(e,t){return _e(Vi+"RenameTeam",{teamId:e,name:t})},Vd=function(e,t){return _e(Vi+"ChangeTeamDescription",{teamId:e,newDescription:t})},Hd=function(e,t,n){return _e(Vi+"InviteUserToTeam",{invitationId:e,teamId:t,invitedUser:n})},Wd=function(e){return _e(Vi+"ResendTeamInvitation",{invitationId:e})},qd=function(e){return _e(Vi+"RevokeTeamInvitation",{invitationId:e})},Jd=function(e,t){return _e(Vi+"RemoveMemberFromTeam",{teamId:e,memberId:t})},Yd=function(e){return _e(Vi+"DeleteTeam",{teamId:e})},Qd=function(e,t,n){return _e(Vi+"AdminGrantTeamAccessToBoard",{boardId:e,teamId:t,boardPermissions:n||{readAccess:!0,writeAccess:!0,adminAccess:!1}})},Kd=function(e,t){return _e(Vi+"AdminRevokeTeamAccessToBoard",{boardId:e,teamId:t})},Zd=function(){return _e(Vi+"UserTeams",{})},Xd=function(e){return _e(Vi+"AcknowledgeTeamInvitation",{invitationId:e})},$d=function(e){return _e(Vi+"InvitationTeam",{invitationId:e})},em=function(e){return _e(Vi+"OpenTeamInvitations",{teamId:e})},tm=function(e,t){return _e(Vi+"MoveTeamToOrganization",{teamId:e,organizationId:t})},nm="@@InspectioTeams/AddTeam",rm="@@InspectioTeams/RenameTeam",am="@@InspectioTeams/ChangeTeamDescription",om="@@InspectioTeams/InviteUserToTeam",im="@@InspectioTeams/ResendTeamInvitation",sm="@@InspectioTeams/RevokeTeamInvitation",cm="@@InspectioTeams/RemoveMemberFromTeam",um="@@InspectioTeams/FetchUserTeams",lm="@@InspectioTeams/AddTeams",dm="@@InspectioTeams/AdminGrantTeamAccessToBoard",mm="@@InspectioTeams/AdminRevokeTeamAccessToBoard",pm="@@InspectioTeams/DeleteTeam",fm="@@InspectioTeams/TeamAdded",hm="@@InspectioTeams/TeamRenamed",bm="@@InspectioTeams/TeamDescriptionChanged",gm="@@InspectioTeams/TeamsFetched",vm="@@InspectioTeams/MemberRemovedFromTeam",Om="@@InspectioTeams/TeamDeleted",ym="@@InspectioTeams/TeamInvitationsLoaded",Em="@@InspectioTeams/TeamInvitationResent",Im="@@InspectioTeams/TeamInvitationRevoked",km="@InspectioBoards/TeamAccessToBoardGranted",Sm="@InspectioBoards/TeamAccessToBoardRevoked",jm="@@InspectioTeams/MoveTeamToOrganization",xm="@@InspectioTeams/TeamMovedToOrganization",Tm=function(e,t,n){return Object(tt.action)(nm,{teamId:e,teamName:t,organizationId:n})},Cm=function(e,t){return Object(tt.action)(rm,{teamId:e,newName:t})},wm=function(e,t){return Object(tt.action)(am,{teamId:e,newDescription:t})},Am=function(e,t,n){return Object(tt.action)(om,{invitationId:e,teamId:t,userEmail:n})},_m=function(e){return Object(tt.action)(im,{invitationId:e})},Um=function(e){return Object(tt.action)(sm,{invitationId:e})},Bm=function(e,t){return Object(tt.action)(cm,{teamId:e,memberId:t})},Rm=function(e){return Object(tt.action)(lm,e)},Nm=function(e){return Object(tt.action)(pm,{teamId:e})},Lm=function(e,t,n){return Object(tt.action)(dm,{boardId:e,teamIds:t,permissions:n})},Dm=function(e,t){return Object(tt.action)(mm,{boardId:e,teamId:t})},Pm=function(e,t){return Object(tt.action)(jm,{teamId:e,organizationId:t})},Mm=function(e){return Object(tt.action)(fm,e)},zm=function(e){return Object(tt.action)(hm,e)},Fm=function(e){return Object(tt.action)(bm,e)},Gm=function(e){return Object(tt.action)(vm,e)},Vm=function(e){return Object(tt.action)(Om,e)},Hm=function(e){return Object(tt.action)(ym,e)},Wm=function(e){return Object(tt.action)(Em,e)},qm=function(e){return Object(tt.action)(Im,e)},Jm=function(e){return Object(tt.action)(gm,e)},Ym=function(e,t){return Object(tt.action)(km,{boardId:e,teamId:t})},Qm=function(e,t){return Object(tt.action)(Sm,{boardId:e,teamId:t})},Km=function(e){return Object(tt.action)(xm,e)},Zm={uid:"",name:"",description:"",ownerId:"",members:Object(fe.List)(),admins:Object(fe.List)(),deleted:!0,aggregateType:"Team",isNew:!1,organizationId:null},Xm=function(e){var t=Un(e,[Pn("teamId"),"teamId missing"],[Pn("name"),"name missing in "+e.teamId],[Pn("description"),"description missing in "+e.teamId],[Pn("ownerId"),"ownerId missing in "+e.teamId],[Pn("members"),"members missing in "+e.teamId],[Pn("admins"),"admins missing in "+e.teamId],[Pn("organizationId"),"organizationId missing in "+e.teamId],[Pn("deleted"),"deleted missing in "+e.teamId]);return Cn(t)?t:_n(new ep({uid:e.teamId,name:e.name,description:e.description,ownerId:e.ownerId,members:Object(fe.List)(e.members),admins:Object(fe.List)(e.admins),deleted:e.deleted,aggregateType:"Team",isNew:e.isNew||!1,organizationId:e.organizationId||null}))},$m=function(e){return new ep(Object(Ye.a)({},Zm,{uid:e,isNew:!0}))},ep=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"rename",value:function(e){return this.set("name",e)}},{key:"changeDescription",value:function(e){return this.set("description",e)}},{key:"removeMember",value:function(e){var t=this.set("members",this.members.filter(function(t){return t!==e}));return t.set("admins",t.admins.filter(function(t){return t!==e}))}},{key:"moveToOrganization",value:function(e){return this.set("organizationId",e)}},{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.contains(e)}}]),t}(Object(fe.Record)(Zm));!function(e){e.open="open",e.acknowledged="acknowledged",e.revoked="revoked"}(Sd||(Sd={}));var tp={uid:"",teamId:"",admin:"",invitedUser:"unknown@acme.com",status:Sd.open,resendAttempts:0,aggregateType:"TeamInvitation"},np=function(e){var t=Un(e,[Pn("invitationId"),"invitationId missing"],[Pn("teamId"),"teamId missing in "+e.invitationId],[Pn("admin"),"admin missing in "+e.invitationId],[Pn("invitedUser"),"invitedUser missing in "+e.invitationId],[Pn("status"),"status missing in "+e.invitationId]);return Cn(t)?t:_n(new rp(Object(Ye.a)({},e,{uid:e.invitationId,aggregateType:"TeamInvitation"})))},rp=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status",Sd.revoked)}}]),t}(Object(fe.Record)(tp)),ap=Object(fe.Map)(),op=Object(fe.Map)(),ip=Object(Pa.combineReducers)({Team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ap,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fm:return Ma(e,t.payload);case hm:case bm:case vm:case xm:return za(e,t.payload);case gm:return Ga(e=Va(),t.payload);case Om:return Fa(e,t.payload);default:return e}},TeamInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:op,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ym:return Ga(e,t.payload);case Em:case Im:return za(e,t.payload);default:return e}}},function(){return Object(fe.fromJS)({Team:void 0,TeamInvitation:void 0})}),sp=fn.a.mark(up),cp=fn.a.mark(lp);function up(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(fe.List)(),e.forEach(function(e){t=t.merge(e.members)}),t=t.toSet().toList(),n.next=5,Object(hn.g)(p.loadUsersInfo(t.toArray()));case 5:case"end":return n.stop()}},sp,this)}function lp(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.c)(F.fetchUserTeams);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(hn.g)(i.Command.error("Request Error","Could not load teams"));case 8:if(!n){o.next=20;break}if(!Cn(r=Ln(n.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(t){return e&&t.teamId===e&&(t.isNew=!0),Xm(t)})))){o.next=14;break}return console.error("Failed to process team response from server",r.value,n.data),o.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load teams"));case 14:if(!wn(r)){o.next=20;break}return a=Object(fe.List)(r.value),o.next=18,Object(hn.g)(Jm(a));case 18:return o.next=20,Object(hn.c)(up,a);case 20:case"end":return o.stop()}},cp,this)}var dp=fn.a.mark(pp),mp=fn.a.mark(fp);function pp(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(F.addTeam,e.payload.teamId,e.payload.teamName,e.payload.organizationId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not add team."));case 8:if(!n){a.next=16;break}return r=$m(e.payload.teamId),a.next=12,Object(hn.g)(H.teamAdded(r.rename(e.payload.teamName)));case 12:return a.next=14,Object(hn.g)(i.Command.info("Team created","Team created"));case 14:return a.next=16,Object(hn.c)(lp,e.payload.teamId);case 16:case"end":return a.stop()}},dp,this)}function fp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([G.ADD_TEAM]);case 3:return e=t.sent,t.next=6,Object(hn.f)(pp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},mp,this)}var hp=fn.a.mark(vp),bp=fn.a.mark(Op),gp=fn.a.mark(yp);function vp(e){var t,n,r,a,o,s,c,u,l,d;return fn.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=!1,n=!0,r=!1,a=void 0,m.prev=4,o=e.payload.teamIds[Symbol.iterator]();case 6:if(n=(s=o.next()).done){m.next=23;break}return c=s.value,m.next=10,Object(hn.c)(F.adminGrantTeamAccessToBoard,e.payload.boardId,c,e.payload.permissions);case 10:if(u=m.sent,l=u.response,!u.error){m.next=16;break}return m.next=16,Object(hn.g)(i.Command.error("Request Error","Could not add team to board."));case 16:if(!l){m.next=20;break}return t=!0,m.next=20,Object(hn.g)(W.Event.teamAccessToBoardGranted(e.payload.boardId,c));case 20:n=!0,m.next=6;break;case 23:m.next=29;break;case 25:m.prev=25,m.t0=m.catch(4),r=!0,a=m.t0;case 29:m.prev=29,m.prev=30,n||null==o.return||o.return();case 32:if(m.prev=32,!r){m.next=35;break}throw a;case 35:return m.finish(32);case 36:return m.finish(29);case 37:if(!t){m.next=41;break}return d=e.payload.teamIds.length>1?"s":"",m.next=41,Object(hn.g)(i.Command.info("Team Added","Team".concat(d," successfully added to board")));case 41:case"end":return m.stop()}},hp,this,[[4,25,29,37],[30,,32,36]])}function Op(e){var t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(hn.c)(F.adminRevokeTeamAccessToBoard,e.payload.boardId,e.payload.teamId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(hn.g)(i.Command.error("Request Error","Could not revoke team access."));case 8:if(!n){r.next=13;break}return r.next=11,Object(hn.g)(W.Event.teamAccessToBoardRevoked(e.payload.boardId,e.payload.teamId));case 11:return r.next=13,Object(hn.g)(i.Command.info("Team Access Revoked","The team has no longer access to the board."));case 13:case"end":return r.stop()}},bp,this)}function yp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([dm,mm]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===dm?7:t.t0===mm?10:13;break;case 7:return t.next=9,Object(hn.f)(vp,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(hn.f)(Op,e);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},gp,this)}var Ep=fn.a.mark(kp),Ip=fn.a.mark(Sp);function kp(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.i)(of(e.payload.teamId));case 2:return t=o.sent,n=t.changeDescription(e.payload.newDescription),o.next=6,Object(hn.g)(W.Event.teamDescriptionChanged(n));case 6:return o.next=8,Object(hn.c)(W.Api.changeTeamDescription,e.payload.teamId,e.payload.newDescription);case 8:if(r=o.sent,a=r.response,!r.error){o.next=16;break}return o.next=14,Object(hn.g)(i.Command.error("Request Error","Could not change team description."));case 14:return o.next=16,Object(hn.g)(W.Event.teamDescriptionChanged(t));case 16:if(!a){o.next=19;break}return o.next=19,Object(hn.g)(i.Command.info("Team Description Changed","Description saved successfully"));case 19:case"end":return o.stop()}},Ep,this)}function Sp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.CHANGE_TEAM_DESCRIPTION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(kp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Ip,this)}var jp=fn.a.mark(Tp),xp=fn.a.mark(Cp);function Tp(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(of(e.payload.teamId));case 2:return t=a.sent,a.next=5,Object(hn.c)(W.Api.deleteTeam,e.payload.teamId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(hn.g)(i.Command.error("Request Error","Could not delete team."));case 11:if(!r){a.next=16;break}return a.next=14,Object(hn.g)(i.Command.info("Team deleted","Team "+t.name+"deleted"));case 14:return a.next=16,Object(hn.g)(W.Event.teamDeleted(t));case 16:case"end":return a.stop()}},jp,this)}function Cp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.DELETE_TEAM]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Tp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},xp,this)}var wp=fn.a.mark(Ap);function Ap(){var e,t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(hn.k)([G.INVITE_USER_TO_TEAM]);case 3:return e=o.sent,o.next=6,Object(hn.c)(F.inviteUserToTeam,e.payload.invitationId,e.payload.teamId,e.payload.userEmail);case 6:return t=o.sent,n=t.response,r=t.error,o.next=11,Object(hn.i)(of(e.payload.teamId));case 11:if(a=o.sent,!r){o.next=15;break}return o.next=15,Object(hn.g)(i.Command.error("Request Error","Could not add user to team."));case 15:if(!n){o.next=20;break}return o.next=18,Object(hn.g)(i.Command.info("User invited","The user was invited to the team."));case 18:return o.next=20,Object(hn.c)(lp,a.isNew?a.uid:void 0);case 20:o.next=0;break;case 22:case"end":return o.stop()}},wp,this)}var _p=fn.a.mark(Bp),Up=fn.a.mark(Rp);function Bp(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(of(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(hn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(hn.c)(F.removeMemberFromTeam,e.payload.teamId,e.payload.memberId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(hn.g)(i.Command.error("Request Error","Could not remove member from team."));case 15:if(!r){a.next=20;break}return a.next=18,Object(hn.g)(Gm(t.removeMember(e.payload.memberId)));case 18:return a.next=20,Object(hn.g)(i.Command.info("Member removed","The member was removed from the team."));case 20:case"end":return a.stop()}},_p,this)}function Rp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([G.REMOVE_MEMBER_FROM_TEAM]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Bp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Up,this)}var Np=fn.a.mark(Dp),Lp=fn.a.mark(Pp);function Dp(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.i)(of(e.payload.teamId));case 2:return t=o.sent,n=t.name,t=t.rename(e.payload.newName),o.next=7,Object(hn.g)(W.Event.teamRenamed(t));case 7:return o.next=9,Object(hn.c)(W.Api.renameTeam,e.payload.teamId,e.payload.newName);case 9:if(r=o.sent,a=r.response,!r.error){o.next=18;break}return o.next=15,Object(hn.g)(i.Command.error("Request Error","Could not rename team."));case 15:return t=t.rename(n),o.next=18,Object(hn.g)(W.Event.teamRenamed(t));case 18:if(!a){o.next=21;break}return o.next=21,Object(hn.g)(i.Command.info("Team renamed","Team renamed to: "+e.payload.newName));case 21:case"end":return o.stop()}},Np,this)}function Pp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.RENAME_TEAM]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Dp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Lp,this)}var Mp=function(e){return function(t){return function(e,t){return e.getIn([af,"TeamInvitation",t])}(t,e)}},zp=fn.a.mark(Gp),Fp=fn.a.mark(Vp);function Gp(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(Mp(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(hn.c)(W.Api.resendTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not resend team invitation."));case 12:if(!r){a.next=15;break}return a.next=15,Object(hn.g)(i.Command.info("insp.team.notify.invitation_resend.success.title","insp.team.notify.invitation_resend.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(hn.g)(W.Event.teamInvitationResent(t.resend()));case 17:case"end":return a.stop()}},zp,this)}function Vp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.RESEND_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Gp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Fp,this)}var Hp=fn.a.mark(qp),Wp=fn.a.mark(Jp);function qp(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(Mp(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(hn.c)(W.Api.revokeTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not revoke team invitation."));case 12:if(!r){a.next=17;break}return a.next=15,Object(hn.g)(i.Command.info("insp.team.notify.invitation_revoke.success.title","insp.team.notify.invitation_revoke.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(hn.g)(W.Event.teamInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},Hp,this)}function Jp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.REVOKE_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(qp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Wp,this)}var Yp=fn.a.mark(Kp),Qp=fn.a.mark(Zp);function Kp(e){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(lp);case 2:case"end":return e.stop()}},Yp,this)}function Zp(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([f.Type.ACTIVE_ORGANIZATION_SWITCHED]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Kp,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Qp,this)}var Xp=fn.a.mark(ef),$p=fn.a.mark(tf);function ef(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(of(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(hn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(hn.c)(W.Api.moveTeamToOrganization,e.payload.teamId,e.payload.organizationId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(hn.g)(i.Command.error("Request Error","Could not move team to organization"));case 15:if(!r){a.next=20;break}return a.next=18,Object(hn.g)(Km(t.moveToOrganization(e.payload.organizationId)));case 18:return a.next=20,Object(hn.g)(i.Command.info("Team moved","Moved team successfully to organization."));case 20:case"end":return a.stop()}},Xp,this)}function tf(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([W.Type.MOVE_TEAM_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(ef,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},$p,this)}var nf,rf,af="inspectioTeams",of=function(e){return function(t){return function(e,t){return e.getIn([af,"Team",t])}(t,e)}},sf=function(e,t){return Object(fe.List)(e.getIn([af,"Team"]).toIndexedSeq().toArray())||Object(fe.List)()},cf=function(e){var t=A.makeGetCurrentUser(),n=Object(ft.a)([yi,A.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})});return Object(ft.a)([sf,t,n],function(t,n,r){return t=t.filter(function(e){return!e.deleted}).filter(function(e){return r?e.organizationId===r.uid||!r.explicit&&null===e.organizationId:null===e.organizationId}),e&&(t=t.filter(function(e){return e.isAdmin(n.uid)||r&&r.admins.includes(n.uid)})),t})},uf=function(e){return"board_".concat(e,"_hidden")},lf=function(e){return"update_".concat(e,"_viewed")},df=function(e,t){return e.getIn(["inspectioUsers","userSettings"])},mf=function(e,t){return Object(ft.a)([df],function(n){return n.has(e)?n.get(e):t})},pf=function(){return Object(ft.a)([df],function(e){return e.toObject()})},ff=function(){return Object(ft.a)([df],function(e){return!!e.get("settings_loaded")})},hf=n(197);!function(e){e.NAME_ASC="NAME_ASC",e.NAME_DESC="NAME_DESC",e.CREATED_AT_ASC="CREATED_AT_ASC",e.CREATED_AT_DESC="CREATED_AT_DESC",e.LAST_MODIFIED_ASC="LAST_MODIFIED_ASC",e.LAST_MODIFIED_DESC="LAST_MODIFIED_DESC"}(nf||(nf={})),function(e){e.NAME="NAME",e.CREATED_AT="CREATED_AT",e.LAST_MODIFIED="LAST_MODIFIED"}(rf||(rf={}));var bf=function(e,t){return e+"_"+("up"===t?"DESC":"ASC")},gf=Object(Pe.b)()(function(e){var t=function(e){switch(e){case nf.NAME_ASC:return[rf.NAME,"down"];case nf.NAME_DESC:return[rf.NAME,"up"];case nf.CREATED_AT_ASC:return[rf.CREATED_AT,"down"];case nf.CREATED_AT_DESC:return[rf.CREATED_AT,"up"];case nf.LAST_MODIFIED_ASC:return[rf.LAST_MODIFIED,"down"];case nf.LAST_MODIFIED_DESC:return[rf.LAST_MODIFIED,"up"]}}(Object(Me.useSelector)(Cf()).sortBy),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(a),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(Me.useDispatch)();Object(ge.useEffect)(function(){a!==s&&c(a)},[a]);var l=[{key:rf.NAME,text:e.t("insp.overview.sort."+rf.NAME),value:rf.NAME},{key:rf.CREATED_AT,text:e.t("insp.overview.sort."+rf.CREATED_AT),value:rf.CREATED_AT},{key:rf.LAST_MODIFIED,text:e.t("insp.overview.sort."+rf.LAST_MODIFIED),value:rf.LAST_MODIFIED}];return ge.createElement($e.a,{selection:!0,options:l,fluid:!0,value:r,onClick:function(e){var t=e.target;"I"===t.tagName&&t.parentElement.blur()},onChange:function(e,t){return n=t.value,void u(B.sortBoardOverview(bf(n,s)));var n},icon:ge.createElement(hf.a,{name:"sort amount "+s,style:{float:"right",cursor:"pointer"},onClick:function(e){e.stopPropagation(),e.preventDefault(),c("up"===s?"down":"up"),u(B.sortBoardOverview(bf(r,"up"===s?"down":"up")))}}),style:{paddingRight:"5px"}})}),vf=function(e,t){return Object(fe.List)(e.getIn(["inspectioBoards","boards"]).toIndexedSeq().toArray())||Object(fe.List)()},Of=function(e,t){return!!e.getIn(["inspectioBoards","loadingBoards"])},yf=function(e,t){return e.getIn(["inspectioBoards","initialBoardListLoaded"])||!1},Ef=function(e,t){return e.getIn(["inspectioBoards","overview"])},If=function(){var e=Vl();return Object(ft.a)([vf,e],function(e,t){return e=(e=e.filter(function(e){return t?!t.explicitOrganization&&null===e.organization||e.organization===t.organizationId:null===e.organization})).sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?1:-1})})},kf=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Vl();return Object(ft.a)([vf,Ef,df,Ci,t],function(t,n,r,a,o){if(t=t.filter(function(e){return o?!o.explicitOrganization&&null===e.organization||e.organization===o.organizationId:null===e.organization}),""!==n.filter){var i=n.filter.split(" ").map(function(e){return e.trim()}),s=i.filter(function(e){return"#"===e.charAt(0)});s.length&&(t=t.filter(function(e){var t=!0;return s.forEach(function(n){e.tags.contains(n.slice(1))||(t=!1)}),t}));var c=i.filter(function(e){return"#"!==e.charAt(0)}).join(" ").toLowerCase();""!==c&&(t=t.filter(function(e){return-1!==e.name.toLowerCase().search(c)}))}switch(n.responsibleTeam&&(t=t.filter(function(e){return e.assignedTeams.contains(n.responsibleTeam)})),!e&&n.allSharedBoardsHidden&&(t=t.filter(function(e){return!e.shared})),!e&&n.allOwnBoardsHidden&&(t=t.filter(function(e){return e.shared})),e||(t=t.filter(function(e){return!0!==r.get(uf(e.uid))})),n.sortBy){case nf.NAME_ASC:t=t.sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?1:-1});break;case nf.NAME_DESC:t=t.sortBy(function(e){return e.name},function(e,t){return e===t?0:e>t?-1:1});break;case nf.LAST_MODIFIED_ASC:t=t.sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?1:-1});break;case nf.LAST_MODIFIED_DESC:t=t.sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?-1:1});break;case nf.CREATED_AT_ASC:t=t.sortBy(function(e){return e.createdAt},function(e,t){return e===t?0:e>t?1:-1});break;case nf.CREATED_AT_DESC:t=t.sortBy(function(e){return e.createdAt},function(e,t){return e===t?0:e>t?-1:1})}return t})},Sf=function(e){return Object(ft.a)([vf],function(t){return t.filter(function(t){return t.assignedTeams.contains(e)})})},jf=function(){return Object(ft.a)([Of],function(e){return e})},xf=function(){return Object(ft.a)([yf],function(e){return e})},Tf=function(){var e=Vl();return Object(ft.a)([vf,e],function(e,t){return(e=e.filter(function(e){return t?!t.explicitOrganization&&null===e.organization||e.organization===t.organizationId:null===e.organization})).count()>0})},Cf=function(){return Object(ft.a)([Ef],function(e){return e})},wf=function(){var e=kf(),t=A.makeGetCurrentBoardQuota(),n=jf();return function(r,a){return{boards:e(r,a).filter(function(e){return!e.tempBoard}),userQuota:t(r,a),loading:n(r,a)}}},Af=function(){return Object(ft.a)([vf],function(e){var t=[];return e.forEach(function(e){e.tags.forEach(function(e){t.includes(e)||t.push(e)})}),Object(fe.List)(t)})},_f=Object(Pe.b)()(Object(Pi.reduxForm)({form:"AddBoardForm"})(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(Me.useSelector)(Af()),i=Object(ge.useRef)(o.map(function(e){return{key:e,text:"#"+e,value:e}}).toJS()),s=Object(Me.useSelector)(cf()),c=[],u=Object(ge.useState)(""),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useState)(""),v=Object(Qe.a)(g,2),O=v[0],y=v[1],E=Object(ge.useState)(!1),I=Object(Qe.a)(E,2),k=I[0],S=I[1],j=Object(ge.useState)(!1),x=Object(Qe.a)(j,2),T=x[0],C=x[1],w=Object(ge.useState)([]),A=Object(Qe.a)(w,2),_=A[0],U=A[1],B=Object(ge.useState)(void 0),R=Object(Qe.a)(B,2),N=R[0];R[1];c.push({key:"none",text:"No Team",value:void 0}),s.forEach(function(e){return c.push({key:e.uid,text:e.name,value:e.uid})});return ve.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault(),t.stopPropagation(),d?T||e.onSubmit(Object(fe.Map)({name:d,nameAbbreviation:O,tags:_,responsibleTeam:N})):b(!0)}},ve.a.createElement("div",{className:"field"+(h?" error":"")},ve.a.createElement(Md.a,{name:"name",type:"text",placeholder:e.t("insp.board.form.board_name"),autoFocus:!0,onChange:function(e,t){return n=t.value,b(!1),m(n),void(k||y(Jl(n)));var n},error:h,value:d})),ve.a.createElement(zd.a,{horizontal:!0},ve.a.createElement(Xe.a,{as:"h4",onClick:function(){return a(!r)},style:{cursor:"pointer"}},e.t("insp.board.advanced_settings"),"\xa0",r?"-":"+")),ve.a.createElement("div",{className:r?"slidedown":"slideup"},ve.a.createElement("div",{className:"field"+(T?" error":"")},ve.a.createElement(Md.a,{name:"nameAbbreviation",type:"text",placeholder:e.t("insp.board.form.board_abbr"),value:O,onChange:function(e,t){return n=t.value,y(n),S(!0),void(""===n||n.length>3?C(!0):T&&C(!1));var n},error:T})),ve.a.createElement("div",{className:"field"},ve.a.createElement($e.a,{multiple:!0,allowAdditions:!0,name:"tags",placeholder:"Tags",fluid:!0,search:!0,selection:!0,options:i.current,value:_,onAddItem:function(e,t){return function(e){if(0!==e.length){"#"!==e.charAt(0)&&(e="#"+e);var t=e.slice(1);i.current.push({key:t,text:e,value:t})}}(t.value)},onChange:function(e,t){return U(t.value)}})),!1,ve.a.createElement("p",null,"\xa0")),ve.a.createElement(Ni.a,{primary:!0,type:"submit"},e.t("insp.board.form.btn_add_save")))})),Uf=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(Me.useSelector)(Vl()),i=Object(Me.useSelector)(wi()),s=Object(Me.useDispatch)();return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"mini"},ge.createElement(Ri.a.Header,null,e.t("insp.board.add")),ge.createElement(Ri.a.Content,null,e.disabled&&!r&&ge.createElement(zi.a,{icon:"dollar",warning:!0,content:o&&o.userIsGuest?e.t("insp.user.quota_reached_guest"):o&&o.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")}),!e.disabled&&ge.createElement(_f,{initialValues:Object(fe.fromJS)(P.defaultBoardProps),onSubmit:function(t){a(!0),function(e,t,n,r){var a=P.createUserBoard(t.uid,e.get("name"),e.get("nameAbbreviation"),e.get("tags"),e.get("responsibleTeam"));n(B.addBoard(a,r))}(t,i,s,e.history)}}),r&&ge.createElement("span",null,"...")))})),Bf=n(1240),Rf=n(1219),Nf=Uf,Lf=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ge.createElement(ge.Fragment,null,ge.createElement(Ni.a,{primary:e.primary,onClick:function(e){e.preventDefault(),a(!0)}},"Add Board"),ge.createElement(Nf,{open:r,onClose:function(){a(!1)},disabled:e.disabled}))}),Df=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ge.createElement(ge.Fragment,null,ge.createElement("a",{href:"#",className:"ui card event add board",onClick:function(e){e.preventDefault(),a(!0)}},ge.createElement("div",{className:"content",style:{display:"flex",flexDirection:"column",verticalAlign:"middle",textAlign:"center",justifyContent:"center",alignItems:"center"}},ge.createElement("div",null,ge.createElement("button",{className:"ui big circular icon button"},ge.createElement(hf.a,{name:"plus",size:"large"}))),ge.createElement("button",{className:"ui big basic button noborder"},e.t("insp.overview.add_board")))),ge.createElement(Uf,{open:r,onClose:function(){a(!1)},disabled:e.disabled}))}),Pf=n(1247),Mf=Object(Pe.b)()(function(e){return ge.createElement("div",{className:"ui card event"},ge.createElement(Fe.Link,{to:It(e.board.uid)},ge.createElement("div",{className:"content"},ge.createElement("div",{className:"header"}),ge.createElement("div",{className:"description"},ge.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),ge.createElement("div",{className:"extra"},(e.isAdmin||!e.board.shared)&&ge.createElement(Fe.Link,{to:jt(e.board.uid),className:"ui right floated"},ge.createElement(hf.a,{name:"edit outline",size:"large",link:!0})),!e.isAdmin&&e.board.shared&&ge.createElement(Pf.a,{trigger:ge.createElement(hf.a,{name:"share",size:"large",className:"ui right floated"}),content:e.t("insp.overview.shared_board")}),ge.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},e.t("insp.overview.last_modified")+": "+(t=e.board.lastModified,new Date(t).toLocaleString()))));var t}),zf=n(1028),Ff=n(219),Gf=n(1241),Vf=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Af()),n=Object(Me.useDispatch)(),r=Cf(),a=Object(Me.useSelector)(r).filter,o=a.split(" ").map(function(e){return e.trim()}).filter(function(e){return"#"===e.charAt(0)}),i=t.filter(function(e){return!o.includes("#"+e)}).map(function(e){return{title:"#"+e}}).toJS(),s=a.split(" ").pop();return s&&""!==(s=s.trim())&&(i=i.filter(function(e){return-1!==e.title.toLowerCase().search(s.toLowerCase())})),ge.createElement(Gf.a,{placeholder:e.t("insp.overview.search.label"),results:i,value:a,onSearchChange:function(e,t){return" "===(r=t.value).charAt(0)&&(r=r.slice(1)),void n(xu(r));var r},onResultSelect:function(e,t){return function(e){if(""===a)n(xu(e.title));else{var t=a.split(" ");t.splice(-1,1);var r=t.join(" ").trim();n(xu(r+" "+e.title))}}(t.result)},icon:""===a?ge.createElement("i",{className:"search icon"}):ge.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:function(e){e.preventDefault(),n(xu(""))}}),fluid:!0,showNoResults:!1})}),Hf=function(e){return ge.createElement(Vf,null)},Wf=(Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Cf()),n=Object(Me.useSelector)(cf()),r=Object(Me.useDispatch)(),a=n.map(function(e){return{key:e.uid,text:e.name,value:e.uid}}).toJS();a.unshift({key:"_all_",text:e.t("insp.overview.teamFilter.all"),value:"_all_"});return ge.createElement($e.a,{selection:!0,placeholder:e.t("insp.board.form.responsible_team"),options:a,fluid:!0,value:t.responsibleTeam||"_all_",onChange:function(e,t){return"_all_"===(n=t.value)&&(n=void 0),void r(B.filterBoardOverviewByResponsibleTeam(n));var n}})}),function(e){return ge.createElement(Ze.a,{stackable:!0,padded:!0},ge.createElement(zf.a,{columns:3},ge.createElement(Ff.a,null,ge.createElement(gf,null)),ge.createElement(Ff.a,null,!1),ge.createElement(Ff.a,null,ge.createElement(Hf,null))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(zd.a,{horizontal:!0,content:"Boards"}))))}),qf=function(){return ge.createElement("div",{className:"ui card event"},ge.createElement("div",{className:"content"},ge.createElement("div",{className:"header"}),ge.createElement("div",{className:"description"},ge.createElement(hf.a,{loading:!0,name:"spinner",size:"big"}))))},Jf=Object(Pe.b)()(function(e){return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.hint.new_domain_header")),ge.createElement(Ri.a.Content,null,ge.createElement(zi.a,{icon:"bullhorn",info:!0,content:ge.createElement("div",null,ge.createElement("p",null,e.t("insp.hint.new_domain_text")),ge.createElement("p",null,ge.createElement(hf.a,{name:"arrow right"}),"\xa0",ge.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))))})))}),Yf=function(e){return ge.createElement("div",{className:"ui card event"},ge.createElement("a",{href:e.board.link},ge.createElement("div",{className:"content"},ge.createElement("div",{className:"header"}),ge.createElement("div",{className:"description"},ge.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),ge.createElement("div",{className:"extra"},ge.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},"Example")))},Qf=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(Me.useSelector)(kf()),n=Object(Me.useSelector)(Tf()),r=Object(Me.useSelector)(jf()),a=Object(Me.useSelector)(A.makeGetCurrentBoardQuota()),o=Object(Me.useDispatch)(),i=Object(Me.useSelector)(wi()),s=Object(Me.useSelector)(Oi(i.activeOrganization)),c=Object(Me.useSelector)(ff()),u=Object(Me.useSelector)(mf("show_pb_domain_hint",!1)),l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1];Object(ge.useEffect)(function(){c&&u&&p(!0)},[c,u]);var f=!!s&&s.isAdmin(i.uid);return ge.createElement(Ge.a,null,(n||r)&&ge.createElement(Wf,null),ge.createElement(Ze.a,{stackable:!0,padded:!0},(n||r)&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(Bf.a.Group,{itemsPerRow:3},ge.createElement(Df,{disabled:0===a}),r&&ge.createElement(qf,null),t.filter(function(e){return!e.example}).map(function(e){return ge.createElement(Mf,{key:e.uid,board:e,isAdmin:e.organization?f||e.isCreator(i.uid):e.owner===i.uid})}).toArray()))),!n&&!r&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(Rf.a,{placeholder:!0},ge.createElement(Xe.a,{icon:!0,style:{color:"grey"}},ge.createElement(hf.a,{name:"lightbulb",color:"yellow"}),e.t("insp.overview.empty_space")),ge.createElement(Rf.a.Inline,null,ge.createElement("a",{href:"https://wiki.prooph-board.com",target:"_blank",rel:"noopener noreferrer",className:"ui yellow button"},"Check Wiki"),ge.createElement(Lf,{disabled:0===a,primary:!1}))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(zd.a,{horizontal:!0,content:"Example Boards"}))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(Bf.a.Group,{itemsPerRow:3},ge.createElement(Yf,{key:"proophboard",board:{name:"Annotated prooph board",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2Fprooph%20board%2520Example.xml?temp=1"}}),ge.createElement(Yf,{key:"Cody_Tutorial",board:{name:"Cody Tutorial",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fproophboard%2Fexample-boards%2Fmain%2FCody%2520Tutorial.xml?temp=1"}}),ge.createElement(Yf,{key:"Event_Storming",board:{name:"Event Storming - The Picture",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml?temp=1"}}),ge.createElement(Yf,{key:"Event_Modeling",board:{name:"Event Modeling",link:"/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FEvent%2520Modeling.xml?temp=1"}}))))),ge.createElement(Jf,{open:m,onClose:function(){p(!1),o(Ht("show_pb_domain_hint",!1))}}))})),Kf=n(1243),Zf=n(1236),Xf=n(123),$f=n.n(Xf),eh=n(1237),th=function(e){var t=e.input,n=e.placeholder,r=e.meta,a=r.touched,o=r.error;return ve.a.createElement(eh.a.Input,Object.assign({},t,{placeholder:n,error:!(!a||!o)}))},nh=Object(Pi.reduxForm)({form:"ConfirmBoardDeletionForm",validate:function(e,t){if(e){var n=(r=t.boardName,function(e){return e===r?void 0:"Name is not correct"})(e.get("confirmedName")||"");if(n)return{confirmedName:n}}var r;return{}}})(function(e){return ve.a.createElement(zi.a,{error:!0},ve.a.createElement(hf.a,{name:"warning sign"}),e.t("insp.board.really_delete"),ve.a.createElement(Rf.a,null,ve.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ve.a.createElement("div",{className:"field"},ve.a.createElement(Pi.Field,{name:"confirmedName",type:"text",component:th,placeholder:e.t("insp.board.form.board_name")})),ve.a.createElement(Ni.a,{color:"red",type:"submit",disabled:e.pristine||!e.valid},e.t("app.form.confirm")),ve.a.createElement(Ni.a,{basic:!0,className:"noborder",onClick:function(t){return function(e,t){e.preventDefault(),t.onCancel()}(t,e)}},e.t("app.form.cancel")))))}),rh=function(e,t){return e.getIn([QE,"boardClients"])},ah=n(1235),oh=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1];return ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(zi.a,null,ve.a.createElement("p",null,e.t("insp.board.client.notConfigured"),ve.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(!0)}}," ",e.t("insp.board.client.createClient")))),ve.a.createElement(ah.a,{header:e.t("insp.board.client.createConfirmTitle"),content:e.t("insp.board.client.createConfirmText"),open:a,onCancel:function(){return o(!1)},onConfirm:function(){t(Qu(e.boardId)),o(!1)}}))}),ih=n(1239),sh=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(ge.useState)(!1),h=Object(Qe.a)(f,2),b=h[0],g=h[1];Object(ge.useEffect)(function(){e.client&&e.client.clientSecret&&p(!1)},[e.client]);var v=function(){return o(!1)},O=function(){return u(!1)};return ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(ih.a,{unstackable:!0,basic:"very"},ve.a.createElement(ih.a.Body,null,ve.a.createElement(ih.a.Row,null,ve.a.createElement(ih.a.Cell,{style:{width:"150px"}},ve.a.createElement("strong",null,e.t("insp.board.client.clientId"),":")),ve.a.createElement(ih.a.Cell,null,e.client.clientId),ve.a.createElement(ih.a.Cell,{style:{width:"125px"}})),ve.a.createElement(ih.a.Row,null,ve.a.createElement(ih.a.Cell,null,ve.a.createElement("strong",null,e.t("insp.board.client.clientSecret"),":")),ve.a.createElement(ih.a.Cell,null,e.client.clientSecret&&ve.a.createElement(ve.a.Fragment,null,e.client.clientSecret,ve.a.createElement(hf.a,{name:b?"clipboard check":"copy",style:{cursor:"pointer",marginLeft:"5px"},title:e.t("insp.board.client.copyToClipboard"),onClick:function(){!function(e,t){var n=document.createElement("input");n.type="text",n.value=e,n.style.position="fixed",n.style.left="-1000px",n.style.top="-1000px",(t||document.body).append(n),n.select(),document.execCommand("copy"),n.parentNode.removeChild(n)}(e.client.clientSecret),g(!0),setTimeout(function(){return g(!1)},2e3)}})),!e.client.clientSecret&&ve.a.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),n.stopPropagation(),t(Ml(e.boardId))}},e.t("insp.board.client.retrieveSecret"))),ve.a.createElement(ih.a.Cell,{style:{paddingTop:"10px",paddingBottom:"10px"}},ve.a.createElement(Ni.a,{icon:!0,labelPosition:"left",title:e.t("app.form.reset"),onClick:function(){return o(!0)},loading:m,style:e.client.clientSecret?null:{visibility:"hidden"},children:ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(hf.a,{name:"redo"}),e.t("app.form.reset"))}))))),ve.a.createElement(zi.a,null,ve.a.createElement(ih.a,{unstackable:!0,basic:"very"},ve.a.createElement(ih.a.Body,null,ve.a.createElement(ih.a.Row,null,ve.a.createElement(ih.a.Cell,null,e.t("insp.board.client.removeText")),ve.a.createElement(ih.a.Cell,null,ve.a.createElement(Ni.a,{icon:!0,labelPosition:"left",negative:!0,floated:"right",title:e.t("app.form.remove"),onClick:function(){return u(!0)},children:ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(hf.a,{name:"delete"}),e.t("app.form.remove"))})))))),ve.a.createElement(ah.a,{header:e.t("insp.board.client.resetConfirmTitle"),content:e.t("insp.board.client.resetConfirmText"),open:a,onCancel:v,onConfirm:function(){v(),p(!0),t(Zu(e.boardId))}}),ve.a.createElement(ah.a,{header:e.t("insp.board.client.removeConfirmTitle"),content:e.t("insp.board.client.removeConfirmText"),open:c,onCancel:O,onConfirm:function(){O(),t(Ku(e.boardId))}}))}),ch=(Object(Pe.b)()(function(e){var t,n=Object(Me.useDispatch)(),r=Object(Me.useSelector)((t=e.boardId,Object(ft.a)([rh],function(e){return e.has(t)?e.get(t):void 0})));return Object(ge.useEffect)(function(){n(Pl(e.boardId))},[e.boardId]),ve.a.createElement("div",{className:"ui segments"},ve.a.createElement("div",{className:"ui segment"},void 0===r&&ve.a.createElement("div",{className:"ui active dimmer"},ve.a.createElement("div",{className:"ui loader"})),ve.a.createElement("h2",{className:"ui header"},e.t("insp.board.client.headline"),ve.a.createElement($f.a,null,e.t("insp.board.client.description"))),ve.a.createElement("div",null,null===r&&ve.a.createElement(oh,{boardId:e.boardId}),r&&ve.a.createElement(sh,{boardId:e.boardId,client:r}))))}),n(1250)),uh=function(e,t){return Object(ft.a)([dh],function(n){return n.find(function(n){return n.teamId===t&&n.boardId===e})})},lh=function(e,t){return Object(fe.List)(e.getIn([QE,"boardPermissionsForUsers"]).toIndexedSeq().toArray())||Object(fe.List)()},dh=function(e,t){return Object(fe.List)(e.getIn([QE,"boardPermissionsForTeams"]).toIndexedSeq().toArray())||Object(fe.List)()},mh=function(e){return Object(ft.a)([dh],function(t){return t.filter(function(t){return t.boardId===e})})},ph=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(Me.useSelector)(of(e.boardPermission.teamId)),r=e.boardPermission.permissions.readAccess,a=e.boardPermission.permissions.writeAccess;if(!r&&!a)return null;if(!n)return null;return ge.createElement(ih.a.Row,null,ge.createElement(ih.a.Cell,{style:{width:"310px"}},ge.createElement(Xe.a,{as:"h4",image:!0},ge.createElement("img",{className:"ui avatar image",src:"/avatar/team-".concat(n.uid,"?displayName=").concat(n.name)}),ge.createElement(Xe.a.Content,null,n.name,ge.createElement(Xe.a.Subheader,null,n.description)))),ge.createElement(ih.a.Cell,null,ge.createElement(Ni.a.Group,null,ge.createElement(Ni.a,{className:"positive",children:"Read",onClick:function(){e.boardPermission.permissions.writeAccess&&t(B.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),ge.createElement(Ni.a.Or,{text:"+"}),ge.createElement(Ni.a,{className:a?"positive":"",children:"Write",onClick:function(){t(B.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),ge.createElement(Ni.a,{icon:!0,className:"right floated basic circular noborder",children:ge.createElement(hf.a,{className:"red close icon"}),onClick:function(){t(W.Command.adminRevokeTeamAccessToBoard(e.board.uid,n.uid))}}),ge.createElement(Ni.a,{icon:!0,className:"right floated basic circular noborder responsible-team",title:e.t("insp.board.form.responsible_team"),children:ge.createElement(hf.a,{className:e.board.responsibleTeam===e.boardPermission.teamId?"yellow star icon":"star outline icon"}),onClick:function(){var n=e.board.responsibleTeam===e.boardPermission.teamId?void 0:e.boardPermission.teamId,r=e.board.merge({responsibleTeam:n});t(B.changeResponsibleTeam(r))}})))}),fh=function(e){var t=Object(Me.useSelector)(mh(e.board.uid));return ge.createElement(ih.a,{unstackable:!0,basic:"very"},ge.createElement(ih.a.Body,null,t.filter(function(t){return t.teamId===e.board.responsibleTeam}).map(function(t){return ge.createElement(ph,{board:e.board,boardPermission:t,key:t.uid})}),t.filter(function(t){return t.teamId!==e.board.responsibleTeam}).map(function(t){return ge.createElement(ph,{board:e.board,boardPermission:t,key:t.uid})})))},hh=n(533),bh=function(e){var t=Object(Me.useDispatch)(),n=Object(Me.useSelector)(Xo(e.boardPermission.userId)),r=e.board.owner===e.boardPermission.userId||e.board.creator===e.boardPermission.userId,a=e.boardPermission.permissions.readAccess,o=e.boardPermission.permissions.writeAccess;if(!a&&!o)return null;if(!n)return null;return ge.createElement(ih.a.Row,null,ge.createElement(ih.a.Cell,{style:{width:"310px"}},ge.createElement(Xe.a,{as:"h4",image:!0},ge.createElement("img",{className:"ui avatar image",src:n.avatar(),alt:n.username}),ge.createElement(Xe.a.Content,null,n.username,r&&ge.createElement(hh.a,{color:"blue",style:{marginBottom:"0.2rem",marginLeft:"0"},basic:!0},"Owner"),ge.createElement(Xe.a.Subheader,null,n.position)))),ge.createElement(ih.a.Cell,null,ge.createElement(Ni.a.Group,null,ge.createElement(Ni.a,{className:"positive",children:"Read",disabled:r,onClick:function(){e.boardPermission.permissions.writeAccess&&t(B.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),ge.createElement(Ni.a.Or,{text:"+"}),ge.createElement(Ni.a,{className:o?"positive":"",children:"Write",disabled:r,onClick:function(){t(B.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),!r&&ge.createElement(Ni.a,{icon:!0,className:"right floated basic noborder circular button",children:ge.createElement(hf.a,{className:"red close icon"}),onClick:function(){t(B.revokeAccessToBoard(e.board.uid,n.userId))}})))},gh=function(e){Object(Me.useSelector)(wi());var t,n=Object(Me.useSelector)((t=e.board.uid,Object(ft.a)([lh],function(e){return e.filter(function(e){return e.boardId===t})}))),r=e.board.owner||e.board.creator;return ge.createElement(ih.a,{unstackable:!0,basic:"very"},ge.createElement(ih.a.Body,null,ge.createElement(bh,{board:e.board,boardPermission:new Ld({uid:"",aggregateType:"BoardPermissionForUser",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!0},userId:r,boardId:e.board.uid})}),n.map(function(t){return ge.createElement(bh,{key:t.uid,board:e.board,boardPermission:t})})))},vh=n(974),Oh=function(e){var t=Object(Ye.a)({},e,{basic:!0});return ve.a.createElement(Ni.a,Object.assign({},t,{className:"noborder"}))},yh=n(1222),Eh=function(e){if(e.user.anonymous)return ge.createElement(Ni.a,{circular:!0,size:e.size||"small",className:"user",icon:"user",disabled:!0,style:{cursor:"default"}});var t=ge.createElement(yh.a,{size:e.size||"small",src:e.user.avatar(),avatar:!0,verticalAlign:"middle"});return e.namePopup?ge.createElement(Pf.a,{trigger:t,content:e.user.username,position:"bottom center"}):t},Ih=function(e){return function(t){return function(e,t){return e.getIn([QE,"boardInvitations",t])}(t,e)}},kh=function(e,t){return Object(fe.List)(e.getIn([QE,"boardInvitations"]).toIndexedSeq().toArray())||Object(fe.List)()},Sh=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(Vn()),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1],h=Object(Me.useSelector)(Ih(e.boardInvitation.uid));Object(ge.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.boardInvitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=b.createIioUserInfoFromServerData(t.data);wn(n)&&o(n.value)}})},[e.boardInvitation.invitedUserEmail]),Object(ge.useEffect)(function(){u(!1),p(!1)},[h]);return ge.createElement(ih.a.Row,null,ge.createElement(ih.a.Cell,{style:{width:"250px"}},ge.createElement(Eh,{user:a,size:"mini"}),ge.createElement("span",{style:{paddingLeft:"10px"}},e.boardInvitation.invitedUserEmail)),ge.createElement(ih.a.Cell,null,ge.createElement(vh.a,{floated:"right"},ge.createElement(Oh,{content:e.t("app.form.resend"),icon:"paper plane",loading:c,onClick:function(){c||m||(u(!0),t(B.resendBoardInvitation(e.boardInvitation.uid)))}}),ge.createElement(Oh,{content:e.t("app.form.revoke"),icon:"delete",loading:m,onClick:function(){c||m||(p(!0),t(B.revokeBoardInvitation(e.boardInvitation.uid)))}}))))}),jh=function(e){return ge.createElement(ih.a,{unstackable:!0,basic:"very"},ge.createElement(ih.a.Body,null,e.openInvitations.map(function(t){return ge.createElement(Sh,{key:t.uid,board:e.board,boardInvitation:t})})))},xh=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(e.email),r=Object(Qe.a)(n,2),a=r[0],o=r[1],s=Object(ge.useState)(e.permissions.writeAccess),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=e.users.filter(function(e){return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(a.toLocaleLowerCase())}).sortBy(function(e){return e.name}).map(function(e){return{id:e.userId,title:e.name,description:e.email,image:e.avatar}});return ve.a.createElement("form",{className:"ui form",onSubmit:function(n){n.preventDefault(),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a)?(e.handleSubmit({boardId:e.boardId,email:a,permissions:Object(Ye.a)({},e.permissions,{writeAccess:u})}),l(!0),o("")):t(i.Command.error("Invalid email address","Invalid email address"))}},ve.a.createElement("div",{className:"fields",style:{margin:"0"}},ve.a.createElement(ih.a,{unstackable:!0,basic:"very"},ve.a.createElement(ih.a.Body,null,ve.a.createElement(ih.a.Row,null,ve.a.createElement(ih.a.Cell,{style:{width:"310px"}},ve.a.createElement(Gf.a,{fluid:!0,value:a,results:d.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return ve.a.createElement("div",{key:e.id},ve.a.createElement("div",{className:"ui image avatar"},ve.a.createElement("img",{src:e.image,alt:e.title})),ve.a.createElement("div",{className:"content"},ve.a.createElement("div",{className:"title"},e.title),ve.a.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return o(t.value||"")},onResultSelect:function(e,t){o(t.result.description)}})),ve.a.createElement(ih.a.Cell,null,ve.a.createElement(Ni.a.Group,null,ve.a.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return l(!1)}}),ve.a.createElement(Ni.a.Or,{text:"+"}),ve.a.createElement(Ni.a,{type:"button",className:u?"positive":"",children:"Write",onClick:function(){return l(!u)}}))),ve.a.createElement(ih.a.Cell,null,ve.a.createElement(Ni.a,{primary:!0,type:"submit",floated:"right"},e.t("insp.board.form.btn_share"))))))))}),Th=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(cf()),n=Object(ge.useState)(1),r=Object(Qe.a)(n,2),a=(r[0],r[1],Object(ge.useState)([])),o=Object(Qe.a)(a,2),i=o[0],s=o[1],c=Object(ge.useState)(e.permissions.writeAccess),u=Object(Qe.a)(c,2),l=u[0],d=u[1],m=Object(Me.useSelector)(mh(e.boardId)).map(function(e){return e.teamId}),p=(t.filter(function(e){return!m.contains(e.uid)}),t.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray());return ve.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault(),e.handleSubmit({boardId:e.boardId,teamIds:i,permissions:Object(Ye.a)({},e.permissions,{writeAccess:l})}),d(e.permissions.writeAccess),s([])}},ve.a.createElement("div",{className:"fields",style:{margin:"0"}},ve.a.createElement(ih.a,{unstackable:!0,basic:"very"},ve.a.createElement(ih.a.Body,null,ve.a.createElement(ih.a.Row,null,ve.a.createElement(ih.a.Cell,{style:{width:"310px",verticalAlign:"top"}},ve.a.createElement("div",{className:"inline field",style:{width:"100%"}},ve.a.createElement($e.a,{placeholder:e.t("insp.board.form.team_name"),search:!0,selection:!0,multiple:!0,options:p,value:i,onChange:function(e,t){return s(t.value)},style:{width:"100%"}}))),ve.a.createElement(ih.a.Cell,{style:{verticalAlign:"top"}},ve.a.createElement(Ni.a.Group,null,ve.a.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return d(!1)}}),ve.a.createElement(Ni.a.Or,{text:"+"}),ve.a.createElement(Ni.a,{type:"button",className:l?"positive":"",children:"Write",onClick:function(){return d(!l)}}))),ve.a.createElement(ih.a.Cell,{style:{verticalAlign:"top"}},ve.a.createElement(Ni.a,{primary:!0,type:"submit",disabled:0===i.length},e.t("insp.board.form.btn_share"))))))))}),Ch=(Object(Pe.b)()(function(e){var t,n=Object(Me.useDispatch)(),r=Object(Me.useSelector)(wi()),a=Object(Me.useSelector)(Oi(r.activeOrganization)),o=Object(fe.List)(a?[a.ownerId].concat(Object(Xa.a)(a.members.toJS())):[]),i=Object(Me.useSelector)(ti(o)),s=Object(Me.useSelector)((t=e.board?e.board.uid:"",Object(ft.a)([kh],function(e){return e.filter(function(e){return e.boardId===t&&"pending"===e.status})})));if(!e.board||!a)return ge.createElement(ge.Fragment,null);var c=ge.createElement(ge.Fragment,null,ge.createElement(xh,{boardId:e.board.uid,email:"",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(B.shareBoard(e.boardId,e.email,e.permissions))},users:i.map(function(e){return{userId:e.userId,name:e.username,avatar:e.avatarUrl,email:e.email}})}),ge.createElement(zd.a,null),ge.createElement(gh,{board:e.board}),s.count()>0&&ge.createElement(ge.Fragment,null,ge.createElement(zd.a,{horizontal:!0},"Open Invitations"),ge.createElement(jh,{openInvitations:s,board:e.board}))),u=ge.createElement(ge.Fragment,null,ge.createElement(Th,{boardId:e.board.uid,user:r,permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(W.Command.adminGrantTeamAccessToBoard(e.boardId,e.teamIds,e.permissions))}}),ge.createElement(zd.a,null),ge.createElement(fh,{board:e.board})),l=[{menuItem:"User",render:function(){return c}},{menuItem:"Teams",render:function(){return u}}];return ge.createElement(ch.a,{menu:{secondary:!0,pointing:!0,color:"orange"},panes:l})}),function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsText(e,"UTF-8")})}),wh=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsArrayBuffer(e)})},Ah=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsDataURL(e)})},_h={uid:"",aggregateType:"StickyTemplate",cellType:vi.misc,template:"",templateType:"json",templateSchema:void 0,boardId:""},Uh=function(e,t){return"".concat(e,"__").concat(t)},Bh=function(e){var t=Un(e,[Pn("boardId"),"boardId missing"],[Pn("cellType"),"cellType missing"],[Pn("template"),"template missing"],[Pn("templateType"),"templateType is missing"]);return Cn(t)?t:_n(new Nh(Object(Ye.a)({},_h,e,{uid:Uh(e.boardId,e.cellType)})))},Rh=function(e,t,n){return new Nh({uid:Uh(e,t),aggregateType:"StickyTemplate",cellType:t,boardId:e,template:n,templateType:"json"})},Nh=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),e.templateSchema||(e.templateSchema=void 0),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"setTemplate",value:function(e){return this.set("template",e)}},{key:"setTemplateType",value:function(e){return this.set("templateType",e)}},{key:"setTemplateSchema",value:function(e){return this.set("templateSchema",e)}}]),t}(Object(fe.Record)(_h)),Lh="@@api/ConnectSocket",Dh="@@api/DisconnectSocket",Ph="@@api/SocketConnected",Mh="@@api/SocketConnected",zh="@@api/SocketConnectionLost",Fh="@@api/SendSocketCmd",Gh="@@api/ListenOnSocketChannel",Vh="@@api/StopListeningOnSocketChannel",Hh=2e3,Wh=function(){return Object(tt.action)(Lh)},qh=function(){return Object(tt.action)(Dh)},Jh=function(){return Object(tt.action)(Ph)},Yh=function(){return Object(tt.action)(Mh)},Qh=function(e){return Object(tt.action)(zh,{reason:e})},Kh=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hh;return Object(tt.action)(Fh,{name:e,data:t,responseActionType:n,metadata:r,timeout:a})},Zh=function(e,t,n){return Object(tt.action)(e,{socketCmd:t,metadata:n})},Xh=function(e,t,n){return Object(tt.action)(e,{socketCmd:t,metadata:n})},$h=function(e,t,n){return Object(tt.action)(e,{socketCmd:t,metadata:n})},eb=function(e,t,n){return Object(tt.action)(Gh,{channelName:e,emitActionType:t,metadata:n})},tb=function(e){return Object(tt.action)(Vh,{channelName:e})},nb=function(e,t,n){return Object(tt.action)(e,{event:t,metadata:n})},rb=function(e){return"success"===e.type},ab=function(e){return"pending"===e.type},ob=function(e){return"error"===e.type},ib="connected",sb="connecting",cb="disconnected",ub="disconnecting",lb="connectionLost",db={status:cb},mb=function(e){return new hb({status:e})},pb=function(){return new hb({status:cb})},fb=function(e){switch(e){case ib:case sb:case cb:case lb:case ub:break;default:throw new Error('Invalid socket status "'+e+'" provided')}},hb=function(e){function t(e){return Object(Be.a)(this,t),fb(e.status),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"isConnected",value:function(){return this.status===ib}},{key:"isDisconnected",value:function(){return this.status===cb}},{key:"isConnecting",value:function(){return this.status===sb}},{key:"isDisconnecting",value:function(){return this.status===ub}},{key:"hasConnectionLost",value:function(){return this.status===lb}},{key:"equals",value:function(e){return this.status===e.status}}]),t}(Object(fe.Record)(db)),bb=n(519),gb="@@Auth/Authenticate",vb="@@Auth/UserAuthenticated",Ob=function(e){return Object(tt.action)(gb,{auth:e})},yb=function(e){return Object(tt.action)(vb,{kc:e})},Eb=fn.a.mark(kb),Ib=function(e){return new Promise(function(t,n){return e.success(function(e){return t(e)}).error(function(e){return n(e)})})};function kb(){var e,t,n,r,a,o;return fn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(hn.k)([X.USER_AUTHENTICATED]);case 2:return e=s.sent,t=0,n=e.payload.kc,s.prev=5,s.next=8,Ie(n.token);case 8:s.next=14;break;case 10:return s.prev=10,s.t0=s.catch(5),s.next=14,Ib(n.login());case 14:return s.next=16,Ib(n.loadUserProfile());case 16:return r=s.sent,s.next=19,Object(hn.i)(A.currentUserSelector,void 0);case 19:return a=(a=(a=s.sent).set("uid",n.tokenParsed.sub)).set("name",r.username),o=r.attributes,a=o.display_name?a.set("displayName",o.display_name[0]):a.set("displayName",r.username),a=o.avatar_url&&""!==o.avatar_url[0]?a.set("avatarUrl",o.avatar_url[0]):a.set("avatarUrl",a.generateDefaultAvatarUrl()),o.company_name&&(a=a.set("companyName",o.company_name[0])),o.job_title&&(a=a.set("jobTitle",o.job_title[0])),a=(a=(a=(a=(a=(a=a.set("email",r.email)).set("givenName",r.firstName)).set("familyName",r.lastName)).set("roles",v.fromToken(n.resourceAccess.inspectio.roles))).set("account",h.fromUserToken(n.resourceAccess.inspectio.roles))).set("signedIn",!0),s.next=35,Object(hn.g)(f.Command.signIn(a));case 35:return s.next=37,Object(hn.g)($.authenticate({token:n.token}));case 37:return s.next=40,Object(hn.e)(1e4);case 40:return s.prev=40,s.next=43,Ib(n.updateToken(31));case 43:if(!1!==s.sent){s.next=46;break}return s.abrupt("continue",37);case 46:return s.prev=46,s.next=49,Ie(n.token);case 49:Ae(n.token),s.next=56;break;case 52:return s.prev=52,s.t1=s.catch(46),s.next=56,Ib(n.login());case 56:return s.next=58,Object(hn.g)($.authenticate({token:n.token}));case 58:if(!(t>0)){s.next=61;break}return s.next=61,Object(hn.g)(i.Command.info("Authorization established","You will be able to work ahead."));case 61:t=0,s.next=73;break;case 64:if(s.prev=64,s.t2=s.catch(40),0!==t){s.next=69;break}return s.next=69,Object(hn.g)(i.Command.error("Authorization error","You will be logged out shortly if connection can not be restored."));case 69:if(!(++t>2)){s.next=73;break}return s.next=73,Ib(n.login());case 73:s.next=37;break;case 75:case"end":return s.stop()}},Eb,this,[[5,10],[40,64],[46,52]])}var Sb=function(){return function(e){return function(e,t){return e.getIn(["auth","auth","token"])}(e)}},jb=fn.a.mark(Ab),xb=fn.a.mark(_b),Tb=fn.a.mark(Ub),Cb=fn.a.mark(Bb),wb=fn.a.mark(Rb);function Ab(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.k)([te.Type.USER_AUTHENTICATED]);case 2:return e.sent,e.next=5,Object(hn.f)(_b);case 5:case"end":return e.stop()}},jb,this)}function _b(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("[Socket Flow] Auto connect."),n.next=3,Object(hn.c)(Lb);case 3:n.prev=3;case 4:return n.next=7,Object(hn.k)([Q.CONNECT_SOCKET,Q.DISCONNECT_SOCKET]);case 7:e=n.sent,n.t0=e.type,n.next=n.t0===Q.CONNECT_SOCKET?11:n.t0===Q.DISCONNECT_SOCKET?28:32;break;case 11:return console.log("[Socket Flow] Received ConnectSocket command."),n.next=14,Object(hn.c)(Lb);case 14:if(!0!==(t=n.sent)&&null!==t){n.next=23;break}return n.next=18,Object(hn.g)(K.socketConnected());case 18:if(!0!==t){n.next=21;break}return n.next=21,Object(hn.f)(Ub);case 21:n.next=27;break;case 23:if(!1!==t){n.next=27;break}return console.warn("[Socket Flow] ConnectSocket command failed. Calling socket.disconnect now."),n.next=27,Object(hn.c)([Te,Te.disconnect]);case 27:return n.abrupt("break",32);case 28:return console.log("[Socket Flow] Received DisconnectSocket command."),n.next=31,Object(hn.c)([Te,Te.disconnect]);case 31:return n.abrupt("break",32);case 32:n.next=4;break;case 34:return n.prev=34,n.next=37,Object(hn.g)(K.socketConnectionLost("Socket saga cancelled"));case 37:return n.finish(34);case 38:case"end":return n.stop()}},xb,this,[[3,,34,38]])}function Ub(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("[Socket Flow] Running backgound tasks: listenDisconnectSaga, listenReconnectSaga, handleIO"),r.next=3,Object(hn.f)(Mb);case 3:return e=r.sent,r.next=6,Object(hn.f)(zb);case 6:return t=r.sent,r.next=9,Object(hn.f)(Rb);case 9:return n=r.sent,r.next=12,Object(hn.k)([Q.DISCONNECT_SOCKET]);case 12:return r.sent,console.warn("[Socket Flow] Received DisconnectSocket command. Canceling backgound tasks."),r.next=16,Object(hn.d)(e);case 16:return r.next=18,Object(hn.d)(t);case 18:return r.next=20,Object(hn.d)(n);case 20:case"end":return r.stop()}},Tb,this)}function Bb(e,t){return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("[Socket Flow] Received action ",e),n.t0=e.type,n.next=n.t0===Q.SEND_SOCKET_CMD?4:n.t0===Q.LISTEN_ON_SOCKET_CHANNEL?14:n.t0===Q.STOP_LISTENING_ON_SOCKET_CHANNEL?18:20;break;case 4:return n.next=6,Object(hn.i)(se.StatusSelector.makeGetStatus());case 6:if(!n.sent.isConnected()){n.next=12;break}return n.next=10,Object(hn.c)(Gb,e);case 10:n.next=13;break;case 12:console.warn("[Socket Flow] Cannot send socket command: ",e.payload,"Socket is not connected");case 13:return n.abrupt("break",20);case 14:return t.hasOwnProperty(e.payload.channelName)&&Fb(e.payload.channelName,t),n.next=17,Object(hn.f)(Nb,e,t);case 17:return n.abrupt("break",20);case 18:return Fb(e.payload.channelName,t),n.abrupt("break",20);case 20:case"end":return n.stop()}},Cb,this)}function Rb(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e={};case 1:return n.next=4,Object(hn.k)([Q.SEND_SOCKET_CMD,Q.LISTEN_ON_SOCKET_CHANNEL,Q.STOP_LISTENING_ON_SOCKET_CHANNEL]);case 4:return t=n.sent,n.next=7,Object(hn.f)(Bb,t,e);case 7:n.next=1;break;case 9:case"end":return n.stop()}},wb,this)}var Nb=fn.a.mark(function e(t,n){var r,a;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[Socket Flow] Start listening on channel: ",t.payload.channelName),r=Object(bb.c)(function(e){return Te.on(t.payload.channelName,function(t){e(t)}),Te.on("error",function(t){e("undefined"!==typeof t?new Error(t.reason):new Error("Unknown error occurred."))}),function(){console.log("[Socket Flow] stop listening on channel, because redux-saga event channel was closed: ",t.payload.channelName),Te.off(t.payload.channelName)}},bb.a.expanding(10)),n[t.payload.channelName]=r;case 3:return e.prev=4,e.next=7,Object(hn.k)(r);case 7:return a=e.sent,e.next=10,Object(hn.g)(K.emitChannelEvent(t.payload.emitActionType,a,t.payload.metadata));case 10:e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(4),r.close(),e.next=17,Object(hn.g)(K.socketConnectionLost(e.t0.message));case 17:return e.abrupt("return");case 18:e.next=3;break;case 20:case"end":return e.stop()}},e,this,[[4,12]])}),Lb=function(){return new Promise(function(e){Te.connected?e(null):(Te.on("connect",function(){return e(!0)}),Te.open())}).then(function(e){return e}).catch(function(e){return!1})},Db=function(){return new Promise(function(e){Te.on("reconnect",function(){e(!0)})})},Pb=function(){return new Promise(function(e){Te.on("disconnect",function(t){e(t)})})},Mb=fn.a.mark(function e(){var t;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(hn.c)(Pb);case 3:return t=e.sent,console.warn("[Socket Flow] Socket connection lost: ",t),e.next=7,Object(hn.g)(K.socketConnectionLost(t));case 7:e.next=0;break;case 9:case"end":return e.stop()}},e,this)}),zb=fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(hn.c)(Db);case 3:return console.log("[Socket Flow] socket reconnected."),e.next=6,Object(hn.e)(100);case 6:return e.next=8,Object(hn.g)(K.socketConnected());case 8:e.next=0;break;case 10:case"end":return e.stop()}},e,this)}),Fb=function(e,t){t.hasOwnProperty(e)&&(console.log("[Socket Flow] Stop listening on channel: ",e),t[e].close(),delete t[e])},Gb=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.g)(K.notifySocketCmdSent(t.payload.responseActionType,{name:t.payload.name,type:"pending",payload:t.payload.data},t.payload.metadata));case 2:return e.prev=2,e.next=5,Object(hn.i)(ae.AuthSelector.makeTokenSelector());case 5:return n=e.sent,e.next=8,Object(hn.h)({ack:Object(hn.c)(Vb,{name:t.payload.name,type:"pending",payload:Object(Ye.a)({},t.payload.data,{token:n})}),timeout:Object(hn.e)(t.payload.timeout)});case 8:if(r=e.sent,a=r.ack,o=r.timeout,!a){e.next=14;break}return e.next=14,Object(hn.g)(K.ackSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"success",payload:t.payload.data},t.payload.metadata));case 14:if(!o){e.next=17;break}return e.next=17,Object(hn.g)(K.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:"Timed out after "+t.payload.timeout+" ms"},t.payload.metadata));case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(2),e.next=23,Object(hn.g)(K.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:e.t0.toString()},t.payload.metadata));case 23:case"end":return e.stop()}},e,this,[[2,19]])}),Vb=function(e){return new Promise(function(t,n){try{if(Te.disconnected)return void n(new Error("Socket not connected"));Te.emit(e.name,e.payload,function(){return t(!0)})}catch(r){n(r)}})},Hb=function(e){return e.getIn(["socket","status","status"])},Wb=function(){return Object(ft.a)([Hb],function(e){return Z.fromtString(e)})},qb=function(e,t){return e.getIn(["inspectioBoards","boards",t])},Jb=function(e,t){return qb(e,t.match.params.uid)},Yb=function(e){return function(t){return qb(t,e)}},Qb=function(){return Object(ft.a)([Jb],function(e){return e})},Kb=function(){var e=A.makeGetCurrentUser();return function(t,n){return{user:e(t,n)}}},Zb=function(){var e=Qb();return function(t,n){return{board:e(t,n)}}},Xb=function(){var e=Qb(),t=A.makeGetCurrentUser(),n=se.StatusSelector.makeGetStatus(),r=mf("lite_mode",!1);return function(a,o){return{board:e(a,o),user:t(a,o),socketStatus:n(a,o),liteMode:r(a,o)}}},$b='{\n    "type": "object",\n    "properties": {\n      \n    },\n    "required": [],\n    "additionalProperties": false\n  }',eg={command:'{\n  "newAggregate": false,\n  "schema": '.concat($b," \n}\n"),event:'{\n  "public": false,\n  "schema": '.concat($b,"\n}\n"),aggregate:'{\n  "schema": '.concat($b,"\n}  \n"),document:'{\n  "schema": '.concat($b,"\n}  \n"),policy:'{\n  "streams": []\n}\n',role:"{\n  \n}\n",hotSpot:"{\n  \n}\n",externalSystem:"{\n  \n}\n",ui:"{\n  \n}\n",feature:"{\n  \n}\n",boundedContext:"{\n  \n}\n",icon:"{\n  \n}\n",image:"{\n  \n}\n",freeText:"{\n  \n}\n"},tg=function(e){return function(t){return function(e,t){return e.getIn([QE,"StickyTemplate",t])}(t,e)}};Object(fe.List)();var ng,rg=function(e){return function(t){var n=function(e,t){var n=Object(fe.Map)();return(e.getIn([QE,"StickyTemplate"])||Object(fe.List)()).toIndexedSeq().filter(function(e){return e.boardId===t.boardId}).forEach(function(e){n=n.set(e.cellType,e)}),n}(t,{boardId:e});for(var r in eg)n.has(r)||(n=n.set(r,Rh(e,r,eg[r])));return n}},ag=n(1233),og=function(e,t,n){return e=e.replace("#/definitions/",""),n.hasOwnProperty(e)?n[e]:{type:"string"}},ig=n(262),sg=n(24),cg=function(){return window.monaco},ug=function(e){function t(e){var n;return Object(Be.a)(this,t),(n=Object(Ne.a)(this,Object(Le.a)(t).call(this,e))).editor=void 0,n.disposeOnChangeHandler=n.disposeOnChangeHandler.bind(Object(sg.a)(Object(sg.a)(n))),n.state={internalData:{}},n}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"componentDidMount",value:function(){this.editor=cg().editor.create(document.getElementById("container"),this.props.options||{})}},{key:"componentWillUnmount",value:function(){Object.keys(this.state.internalData).forEach(this.disposeOnChangeHandler),this.editor=void 0}},{key:"render",value:function(){return ge.createElement("div",{id:"container",style:this.props.style})}},{key:"retrievePayload",value:function(){return this.editor.getValue()}},{key:"initializeModel",value:function(e){var t=cg().Uri.parse(e.fileId),n=cg().editor.getModel(t);this.disposeOnChangeHandler(e.fileId),null===n?(n=cg().editor.createModel(e.value,e.language,t)).updateOptions({tabSize:2}):(cg().editor.setModelLanguage(n,e.language),e.value!==n.getValue()&&n.setValue(e.value)),e.onChange&&this.initializeOnChangeHandler(e.fileId,n,e.onChange),"json"===e.language&&e.schema&&this.initializeJsonDiagnostics(t,e.schema),this.editor.setModel(n)}},{key:"addCommand",value:function(e,t){this.editor.addCommand(e,t)}},{key:"addKeyDownHandler",value:function(e){this.editor.onKeyDown(e)}},{key:"focus",value:function(){this.editor.focus()}},{key:"disposeOnChangeHandler",value:function(e){this.state.internalData[e]&&this.state.internalData[e].onChangeDisposable&&(this.state.internalData[e].onChangeDisposable.dispose(),this.updateInternalData(e,{onChangeDisposable:void 0}))}},{key:"initializeOnChangeHandler",value:function(e,t,n){this.disposeOnChangeHandler(e);var r=t.onDidChangeContent(function(e){n(e)});this.updateInternalData(e,{onChangeDisposable:r})}},{key:"initializeJsonDiagnostics",value:function(e,t){cg().languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!1,allowComments:!0,schemas:[{uri:"http://myserver/foo-schema.json",fileMatch:[e.toString()],schema:JSON.parse(t)}]})}},{key:"updateInternalData",value:function(e,t){this.setState({internalData:Object(Ye.a)({},this.state.internalData,Object(ig.a)({},e,t))})}}]),t}(ge.Component),lg=n(1037),dg=ve.a.forwardRef(function(e,t){var n=Object(ge.useRef)(null);return Object(ge.useEffect)(function(){n.current&&n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,"_schema.json"),language:"json",value:e.boardStickyTemplate.templateSchema||'{\n\t"type": "object",\n\t"properties": {}\n}',schema:JSON.stringify(lg)})},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateSchema]),Object(ge.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()}}}),ve.a.createElement(ug,{ref:n,style:{height:"280px",width:"100%",marginTop:"10px"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),mg=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(e.boardStickyTemplate.templateType),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useRef)(null);Object(ge.useEffect)(function(){o(e.boardStickyTemplate.templateType)},[e.boardStickyTemplate]);var s=function(){var n=Object(Ei.a)(fn.a.mark(function n(){return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t(B.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,"json"===a&&i.current?i.current.retrievePayload():void 0));case 1:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();return ge.createElement(ge.Fragment,null,ge.createElement(Ge.a,{style:{height:"333px"}},ge.createElement(ag.a,{options:[{key:"json",value:"json",text:"JSON"},{key:"xml",value:"xml",text:"XML"},{key:"yaml",value:"yaml",text:"YAML"}],value:a,onChange:function(e,t){return o(t.value)}}),"json"===a&&ge.createElement(dg,{ref:i,boardStickyTemplate:e.boardStickyTemplate})),e.boardStickyTemplate.templateSchema&&ge.createElement("a",{href:"#",onClick:function(n){n.preventDefault();try{var r="json"===a&&i.current?i.current.retrievePayload():void 0;if(!r)return;var o=JSON.parse(r),s=JSON.stringify(function e(t,n){var r="";if(!(t=Dn.clone(t)).type&&t.$ref&&n&&(t=Object(Ye.a)({},og(t.$ref,t,n))),!t.type&&!t.enum)return{type:"object"};if(t.enum&&Array.isArray(t.enum))return t.enum.join("|");if(Array.isArray(t.type)){var a=!0,o=!1,i=void 0;try{for(var s,c=t.type[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;if("null"!==u.toLowerCase()){t.type=u;break}}}catch(l){o=!0,i=l}finally{try{a||null==c.return||c.return()}finally{if(o)throw i}}}switch(t.type.toLowerCase()){case"string":return"string";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[e(t.items||{},n)];case"object":return r={},t.properties||(t.properties={}),Object.keys(t.properties).forEach(function(a){r[a]=e(t.properties[a],n)}),r;default:return"unknown"}}(o),null,2);e.onTemplateGenerated(s),window.setTimeout(function(){t(B.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,r,!0))},1e3)}catch(n){return void console.error(n)}}},e.t("app.form.generateTemplate")),ge.createElement(Ni.a,{primary:!0,onClick:s,content:e.t("app.form.save"),floated:"right"}),ge.createElement(Ni.a,{onClick:e.onClose,content:e.t("app.form.back"),floated:"right"}))}),pg=n(1251),fg={stickyColors:{event:"#FF9F4B",command:"#26C0E7",role:"#f7f727",projection:"#3acbc0",aggregate:"#F5E339",document:"#73dd8e",policy:"#EABFF1",hotSpot:"#f31d30",externalSystem:"#ec98ac",ui:"#000000",feature:"#cfcfcf",boundedContext:"#a2a2a2",edge:"#414141",textCard:"#ffdfd3"}},hg=function(e){var t;switch("normal"!==e.size&&(t=e.size||"large"),e.cellType){case hd.event:case hd.command:case hd.role:case hd.projection:case hd.aggregate:case hd.document:case hd.policy:case hd.hotSpot:case hd.externalSystem:case hd.ui:return ge.createElement(hf.a,{name:"sticky note",size:t,style:{color:fg.stickyColors[e.cellType]},title:e.title,className:e.className});case hd.icon:return ge.createElement(hf.a,{name:"heart",size:t,title:e.title,className:e.className});case hd.image:return ge.createElement(hf.a,{name:"image",size:t,title:e.title,className:e.className});case hd.feature:return ge.createElement(hf.a,{name:"square",size:t,style:{Color:fg.stickyColors.feature},title:e.title,className:e.className},ge.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.84em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"F"));case hd.boundedContext:return ge.createElement(hf.a,{name:"square",size:t,style:{Color:fg.stickyColors.feature},title:e.title,className:e.className},ge.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.89em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"C"));case hd.multiple:return ge.createElement(hf.a,{name:"sitemap",size:t,style:{fontSize:"1.25em"},title:e.title,className:e.className});case hd.edge:return ge.createElement(hf.a,{size:t,title:e.title,className:e.className},ge.createElement("img",{style:{width:"1em",height:"1em"},src:'data:image/svg+xml;utf8,<svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="'.concat(encodeURIComponent(fg.stickyColors.edge),'" d="M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"></path></svg>')}));case hd.textCard:return ge.createElement(hf.a,{name:"square",size:t,style:{color:fg.stickyColors.textCard},title:e.title,className:e.className},ge.createElement("span",{style:{position:"absolute",marginTop:"0.17em",marginLeft:"-0.84em",fontFamily:"sans-serif",color:"#494949",fontSize:"0.8em"}},"T"));case hd.freeText:return ge.createElement(hf.a,{name:"align center",size:t,title:e.title,className:e.className});default:return ge.createElement(hf.a,{name:"square",size:t,title:e.title,className:e.className})}},bg=function(e){return e===vi.boundedContext||e===vi.feature},gg=function(e){return!bg(e)&&!function(e){return e===vi.freeText||e===vi.image||e===vi.icon}(e)},vg=Object(Pe.b)()(function(e){var t=!0,n=e.boardStickyTemplates.sort(function(e,t){return gg(e.cellType)===gg(t.cellType)?e.cellType<t.cellType?-1:e.cellType>t.cellType?1:0:gg(e.cellType)?-1:gg(t.cellType)?1:bg(e.cellType)?-1:bg(t.cellType)?1:e.cellType===vi.freeText?-1:t.cellType===vi.freeText?1:0}).map(function(n){var r=e.activeCellType?e.activeCellType===n.cellType:t;return!e.activeCellType&&t&&e.onSetActiveCellType(n.cellType),t=!1,ge.createElement(pg.a.Item,{key:n.cellType,as:"a",active:r,onClick:function(){e.onSetActiveCellType(n.cellType)}},ge.createElement(hg,{cellType:n.cellType,size:"large"}),ge.createElement(pg.a.Content,null,e.t("app.stickyTypes."+n.cellType)))}).toIndexedSeq().toArray();return ge.createElement(pg.a,{link:!0},n)}),Og=ge.forwardRef(function(e,t){var n=Object(ge.useRef)(null),r=function(t){n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,".json"),language:e.boardStickyTemplate.templateType,value:t,schema:e.boardStickyTemplate.templateSchema||void 0})};return Object(ge.useEffect)(function(){r(e.boardStickyTemplate.template),n.current.addCommand(cg().KeyMod.CtrlCmd|cg().KeyCode.KEY_S,e.onSave)},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateType,e.boardStickyTemplate.template,e.boardStickyTemplate.templateSchema]),Object(ge.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()},updateModelValue:function(e){return r(e)}}}),ge.createElement(ug,{ref:n,style:{height:"300px",width:"100%"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),yg=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(),r=Object(Qe.a)(n,2),o=r[0],i=r[1],s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=Object(Me.useSelector)(rg(e.boardId)),m=Object(Me.useSelector)(Yb(e.boardId)),p=Object(ge.useRef)(null),f=Object(ge.useRef)(null),h=Object(ge.useState)(!1),b=Object(Qe.a)(h,2),g=b[0],v=b[1];Object(ge.useEffect)(function(){t(N.fetchBoardStickyTemplates(e.boardId))},[]);var O=function(){if(o&&p&&p.current){var n=p.current.retrievePayload();if("json"===d.get(o).templateType)try{JSON.parse(n)}catch(r){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}t(B.setStickyTemplate(e.boardId,o,n))}};return ge.createElement("div",{className:"ui segments"},ge.createElement("div",{className:"ui segment"},ge.createElement($e.a,{item:!0,icon:"ellipsis vertical",style:{float:"right",marginTop:"30px",fontSize:"1.2rem"}},ge.createElement($e.a.Menu,{direction:"left"},ge.createElement($e.a.Item,{icon:"download",text:"Import Templates",onClick:function(){f.current&&f.current.click()}}),ge.createElement($e.a.Item,{icon:"upload",text:"Export Templates",onClick:function(){var e=JSON.stringify(d.map(function(e){return{templateType:e.templateType,template:e.template,templateSchema:e.templateSchema}}),null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.download=m.name+" Card Templates.json",r.href=n,document.body.append(r),r.click(),window.setTimeout(function(){r.remove(),URL.revokeObjectURL(n)},150)}}))),ge.createElement("h2",{className:"ui header"},e.t("insp.board.sticky_templates.headline"),ge.createElement($f.a,null,e.t("insp.board.sticky_templates.description"))),ge.createElement("p",null,"\xa0"),ge.createElement(Ze.a,{columns:2},ge.createElement(Ze.a.Column,{mobile:"6",tablet:"6",computer:"5",largeScreen:"5",widescreen:"5"},ge.createElement(vg,{boardStickyTemplates:d,activeCellType:o,onSetActiveCellType:i})),o&&ge.createElement(Ze.a.Column,{mobile:"10",tablet:"10",computer:"11",largeScreen:"11",widescreen:"11",style:{borderLeft:"1px solid #d8dee2"}},!u&&ge.createElement(ge.Fragment,null,ge.createElement(Og,{ref:p,boardStickyTemplate:d.get(o),onSave:O}),ge.createElement("p",null,"\xa0"),ge.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),l(!0)}},e.t("insp.board.sticky_templates.advanced_config")),ge.createElement(Ni.a,{primary:!0,onClick:O,content:e.t("app.form.save"),floated:"right"})),u&&ge.createElement(mg,{boardId:e.boardId,boardStickyTemplate:d.get(o),onClose:function(){return l(!1)},onTemplateGenerated:function(n){o&&(l(!1),t(B.setStickyTemplate(e.boardId,o,n)),window.setTimeout(function(){p.current&&p.current.updateModelValue(n)},10))}}),ge.createElement(Kf.a,{inverted:!0,active:g},ge.createElement(Zf.a,{inverted:!0},"Importing")))),ge.createElement("input",{type:"file",ref:f,style:{display:"none"},onChange:function(n){var r=n.target.files[0]||null;Ch(r).then(function(n){var r;try{r=JSON.parse(n)}catch(m){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}if("object"===typeof r){for(var o=Object.keys(d.toJSON()),i=Object.keys(r),s=[],c=0;c<i.length;c++){var u=i[c];if(!o.includes(u))return void t(a.error("Invalid Card Templates File",e.t("File contains unknown cell type: "+u)));var l=Rh(e.boardId,u,r[u].template||"");l=l.setTemplateType(r[u].templateType||"json"),r[u].templateSchema&&(l=l.setTemplateSchema(r[u].templateSchema)),s.push(l)}v(!0),t(B.importStickyTemplates(e.boardId,Object(fe.List)(s),function(){v(!1)}))}else t(a.error("Invalid Card Templates File",e.t("Selected file does not contain a JSON object of card templates")))})}})))}),Eg=(Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return ge.createElement(ge.Fragment,null,ge.createElement(ag.a,{options:i.toJS(),placeholder:e.t("insp.board.move_to_organization_select"),onChange:function(e,t){return o(t.value)}}),ge.createElement(Ni.a,{primary:!0,floated:"right",onClick:function(){a&&(t(B.moveUserBoardToOrganization(a,e.boardId)),o(void 0))}},e.t("insp.board.move_to_organization_submit")),ge.createElement(zi.a,{size:"small",info:!0},e.t("insp.board.move_to_organization_desc")))}),function(e){var t=Object(ge.useState)(e.focus||!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(e.text),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useRef)(null),f=function(){e.required&&""===d?(c(!0),window.setTimeout(function(){p&&p.current&&p.current.focus()},200)):(d===e.text||s||e.onTextChanged(d),a(!1))},h=""!==d?d.length:e.placeholder?e.placeholder.length:0,b=e.padding||0,g=e.charSize*h+b;e.minWidth&&g<e.minWidth&&(g=e.minWidth);var v=e.border||"2px solid #4593CE";s&&(v="4px solid #E0B4B4");var O=""===e.text?e.placeholder||"":e.text,y=r&&!e.disabled;return ge.createElement(ge.Fragment,null,y&&ge.createElement(Md.a,{transparent:!0,error:s,value:d,ref:p,onBlur:f,onChange:function(t,n){return""!==(r=n.value)&&s&&c(!1),""===r&&e.required&&!s&&c(!0),e.maxLength&&r.length>e.maxLength&&c(!0),void m(r);var r},onKeyDown:function(t){"Enter"===t.key?f():"Escape"===t.key&&(m(e.text),c(!1),a(!1),e.onCancel&&e.onCancel())},placeholder:e.placeholder,autoFocus:e.focus,style:{width:g+e.widthUnit,borderBottom:v}}),!y&&ge.createElement("span",{onClick:function(){a(!0),window.setTimeout(function(){p&&p.current&&p.current.focus()},200)}},O))}),Ig=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)();return ve.a.createElement("form",{className:"ui form"},ve.a.createElement("h3",{style:{margin:0,cursor:"pointer"}},ve.a.createElement(Eg,{text:e.board.name,charSize:9,widthUnit:"px",padding:20,required:!0,onTextChanged:function(n){var r=e.board.merge({name:n});t(B.renameBoard(r))},placeholder:e.t("insp.board.form.board_name")}),"\xa0/\xa0",ve.a.createElement(Eg,{text:e.board.nameAbbreviation,charSize:9,widthUnit:"px",padding:20,required:!0,maxLength:3,onTextChanged:function(n){var r=e.board.merge({nameAbbreviation:n});t(B.changeBoardAbbreviation(r))},placeholder:e.t("insp.board.form.board_name")})))}),kg=function(e){var t=Object(Me.useDispatch)(),n=Object(Me.useSelector)(Af()),r=Object(ge.useRef)(n.map(function(e){return{key:e,text:"#"+e,value:e}}).toJS()),a=e.board.tags.toJS(),o=r.current.map(function(e){return e.value});return a.forEach(function(e){o.includes(e.value)||r.current.push({key:e,text:"#"+e,value:e})}),ge.createElement("div",{className:"field"},ge.createElement($e.a,{multiple:!0,allowAdditions:!0,name:"tags",placeholder:"Tags",search:!0,selection:!0,options:r.current,value:a,onAddItem:function(e,t){return function(e){if(0!==e.length){"#"!==e.charAt(0)&&(e="#"+e);var t=e.slice(1);r.current.push({key:t,text:e,value:t})}}(t.value)},onChange:function(n,r){return function(n){var r=e.board.merge({tags:Object(fe.List)(n)});t(B.setBoardTags(r))}(r.value)}}))},Sg={history:Object(fe.List)(),loading:!1,oldestBoardVersion:void 0,olderPatchesAvailable:!0},jg=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),t}(Object(fe.Record)(Sg)),xg=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","history",t])||new jg}(t,e)}},Tg=ce.makeMapStateToPropsEditBoard(),Cg=Object(Pe.b)()(Object(ze.k)(Object(mt.a)(Object(Me.connect)(Tg,function(e){return Object(pt.bindActionCreators)({confirmDeleteBoard:B.confirmDeleteBoard,deleteBoard:B.deleteBoard,abortDeletion:B.abortBoardDeletion,shareBoard:B.shareBoard},e)}),Object(mt.b)({}))(function(e){var t=Object(Me.useDispatch)(),n=e.board?e.board.uid:void 0,r=Object(Me.useSelector)(Vl()),a=Object(Me.useSelector)(wi()),o=Object(Me.useSelector)(Gl(a.uid));if(Object(ge.useEffect)(function(){e.board&&(t(Rl(e.board.uid)),t(Nl(e.board.uid)),t(Ll(e.board.uid)))},[n]),!e.board)return t(Bl(e.match.params.uid)),ge.createElement(Kf.a,{className:"page"},ge.createElement(Zf.a,{size:"large"},"Loading Board"));var i=!r||!r.explicitOrganization,s=i?o.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(fe.List)();i&&!e.board.organization&&s.count();return ge.createElement(Ge.a,null,ge.createElement(Ze.a,{stackable:!0,padded:!0},ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(Xe.a,{as:"h1",icon:!0,textAlign:"center"},ge.createElement(hf.a,{name:"settings"}),ge.createElement(Xe.a.Content,null,e.t("insp.board.edit").replace("%name%",e.board.name),ge.createElement(Xe.a.Subheader,null,e.t("insp.board.edit_header")))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement("div",{className:"ui segments"},ge.createElement("div",{className:"ui segment"},ge.createElement(Ig,{board:e.board})),ge.createElement("div",{className:"ui segment"},!e.board.inDeletion&&ge.createElement(zi.a,null,e.t("insp.board.delete_txt1"),ge.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.confirmDeleteBoard(e.board.uid)}},e.t("insp.board.delete_link")),e.t("insp.board.delete_txt2")),e.board.inDeletion&&ge.createElement(nh,{boardName:e.board.name,initialValues:Object(fe.fromJS)({confirmedName:"",uid:e.board.uid}),t:e.t,onSubmit:function(t){!function(e,t){t.deleteBoard(e.get("uid")),t.history.replace(yt)}(t,e)},onCancel:function(){return e.abortDeletion(e.board.uid)}}))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement("div",{className:"ui segments"},ge.createElement("div",{className:"ui segment"},ge.createElement("h2",{className:"ui header"},"Tags",ge.createElement($f.a,null,e.t("insp.board.tags_sub"))),ge.createElement(kg,{board:e.board}))))),!1,ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},e.board&&ge.createElement(yg,{boardId:e.board.uid}))),!1,!1))}))),wg=n(1038),Ag=n.n(wg),_g=n(1039),Ug=n(1040),Bg=n.n(Ug),Rg=function(){function e(){Object(Be.a)(this,e),this.graphRef=void 0,this.selectionListeners=[]}return Object(Re.a)(e,[{key:"setGraph",value:function(e){this.graphRef=e,e&&this.selectionListeners.forEach(function(t){return e.onSelectionChanged(t)}),this.selectionListeners=[]}},{key:"getCurrentScale",value:function(){return this.graphRef?this.graphRef.getCurrentScale():1}},{key:"getCurrentTranslate",value:function(){return this.graphRef?this.graphRef.getCurrentTranslate():{x:0,y:0}}},{key:"onPanning",value:function(e){this.graphRef&&this.graphRef.onPanning(e)}},{key:"offPanning",value:function(e){this.graphRef&&this.graphRef.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.graphRef?this.graphRef.translateMousePoint(e,t):{x:e,y:t}}},{key:"onZoom",value:function(e){this.graphRef&&this.graphRef.onZoom(e)}},{key:"offZoom",value:function(e){this.graphRef&&this.graphRef.offZoom(e)}},{key:"getRoot",value:function(){return this.graphRef?this.graphRef.getRoot():new sd}},{key:"openLayersDialog",value:function(){this.graphRef&&this.graphRef.openLayersDialog()}},{key:"triggerCody",value:function(){this.graphRef&&this.graphRef.triggerCody()}},{key:"hasUserLevelVisibilityChanges",value:function(){return!!this.graphRef&&this.graphRef.hasUserLevelVisibilityChanges()}},{key:"isVisible",value:function(e){return!!this.graphRef&&this.graphRef.isVisible(e)}},{key:"setUserVisible",value:function(e,t){this.graphRef&&this.graphRef.setUserVisible(e,t)}},{key:"applyVisibilityGlobally",value:function(){this.graphRef&&this.graphRef.applyVisibilityGlobally()}},{key:"isLocked",value:function(e){return!!this.graphRef&&this.graphRef.isLocked(e)}},{key:"setLocked",value:function(e,t){this.graphRef&&this.graphRef.setLocked(e,t)}},{key:"deleteElement",value:function(e){this.graphRef&&this.graphRef.deleteElement(e)}},{key:"addLayer",value:function(e){this.graphRef&&this.graphRef.addLayer(e)}},{key:"deleteLayer",value:function(e){this.graphRef&&this.graphRef.deleteLayer(e)}},{key:"isActiveLayer",value:function(e){return!!this.graphRef&&this.graphRef.isActiveLayer(e)}},{key:"setAsActiveLayer",value:function(e){if(this.graphRef)return this.graphRef.setAsActiveLayer(e)}},{key:"setDefaultLayerAsActive",value:function(){this.graphRef&&this.graphRef.setDefaultLayerAsActive()}},{key:"highlightLayer",value:function(e){this.graphRef&&this.graphRef.highlightLayer(e)}},{key:"changeNodeName",value:function(e,t){this.graphRef&&this.graphRef.changeNodeName(e,t)}},{key:"copySelectionToActiveLayer",value:function(){return!!this.graphRef&&this.graphRef.copySelectionToActiveLayer()}},{key:"exportXmlSnapshot",value:function(){return this.graphRef?this.graphRef.exportXmlSnapshot():""}},{key:"onSelectionChanged",value:function(e){this.selectionListeners.push(e),this.graphRef&&this.graphRef.onSelectionChanged(e)}},{key:"setCockpitBaseUrl",value:function(e){this.graphRef&&this.graphRef.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.graphRef&&this.graphRef.focus()}}]),e}();function Ng(){return ng||(ng=new Rg),[ng,function(e){ng.setGraph(e)}]}var Lg,Dg,Pg,Mg=function(){function e(){Object(Be.a)(this,e),this.mouseSyncRef=void 0,this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}return Object(Re.a)(e,[{key:"setMouseSync",value:function(e){var t=this;this.mouseSyncRef=e,this.mouseSyncRef&&(this.cachedUserJoinedListeners.forEach(function(e){return t.mouseSyncRef.onUserJoined(e)}),this.cachedUserLeftListeners.forEach(function(e){return t.mouseSyncRef.onUserLeft(e)}),this.cachedBoardTimerStartedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStarted(e)}),this.cachedBoardTimerPausedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerPaused(e)}),this.cachedBoardTimerStoppedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStopped(e)})),this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}},{key:"emitUserGestureChanged",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserGestureChanged(e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserIsAutoScrolling(e)}},{key:"emitUserMouseMove",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseMove(e,t)}},{key:"emitUserMouseScroll",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseScroll(e)}},{key:"hideObservingFrame",value:function(){this.mouseSyncRef&&this.mouseSyncRef.hideObservingFrame()}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.keepMousePositionsInPlaceOnPanning(e,t)}},{key:"observeUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.observeUser(e)}},{key:"onUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserJoined(e):this.cachedUserJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserJoined(e):this.cachedUserJoinedListeners=this.cachedUserJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserLeft(e):this.cachedUserLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserLeft(e):this.cachedUserLeftListeners=this.cachedUserLeftListeners.filter(function(t){return t!==e})}},{key:"startSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startSync(e)}},{key:"stopMouseTrackingOfUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopMouseTrackingOfUser(e)}},{key:"stopObservingUser",value:function(){this.mouseSyncRef&&this.mouseSyncRef.stopObservingUser()}},{key:"stopSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopSync(e)}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){this.mouseSyncRef&&this.mouseSyncRef.syncLastKnownAbsolutePointsAfterPanning()}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){this.mouseSyncRef&&this.mouseSyncRef.trackMouseOfRemoteUser(e,t,n)}},{key:"startBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startBoardTimer(e)}},{key:"onBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerPaused(e):this.cachedBoardTimerPausedListeners.push(e)}},{key:"offBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerPaused(e):this.cachedBoardTimerPausedListeners=this.cachedBoardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStarted(e):this.cachedBoardTimerStartedListeners.push(e)}},{key:"offBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStarted(e):this.cachedBoardTimerStartedListeners=this.cachedBoardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners=this.cachedBoardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.pauseBoardTimer(e)}},{key:"stopBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopBoardTimer(e)}}]),e}();function zg(){return Lg||(Lg=new Mg),[Lg,function(e){return Lg.setMouseSync(e)}]}!function(e){e.Sync="Sync",e.SyncDeleted="SyncDeleted"}(Dg||(Dg={})),function(e){e.IioSaidHello="IioSaidHello",e.UserReplied="UserReplied",e.ElementEdited="ElementEdited",e.ConfirmTest="ConfirmTest"}(Pg||(Pg={}));var Fg,Gg,Vg,Hg,Wg="No connection to Cody. Try to connect with him first!",qg=function(e,t){var n,r,a,o,i="string"===typeof e.cody?[e.cody]:e.cody,s="string"===typeof e.details?[e.details]:e.details;switch(e.type?e.type:Hg.Info){case Hg.Info:var c;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: #32c0e7;font-weight: bold")),(n=console).info.apply(n,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Xa.a)(i.slice(1)))),e.details)(c=console).log.apply(c,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(Xa.a)(s.slice(1))));break;case Hg.Error:var u;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: color: #f31c30;font-weight: bold")),(r=console).error.apply(r,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Xa.a)(i.slice(1)))),e.details)(u=console).error.apply(u,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(Xa.a)(s.slice(1))));break;case Hg.Warning:case Hg.Question:var l;if(1===i.length&&(i[0]="%c"+i[0],i.push("font-weight: bold")),(a=console).warn.apply(a,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Xa.a)(i.slice(1)))),e.details)(l=console).warn.apply(l,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(Xa.a)(s.slice(1))));break;case Hg.SyncRequired:console.warn("%c\ud83d\udc35 ["+t+"]: I need to sync all board content. Lean back for a moment. I'll tell you when I'm done.");break;default:var d;if((o=console).log.apply(o,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Xa.a)(i.slice(1)))),e.details)(d=console).log.apply(d,["%c\ud83d\udc35 ["+t+"]: "+s[0],"color: #414141"].concat(Object(Xa.a)(s.slice(1))))}},Jg=function(e){console.error(e)},Yg=function(e){console.warn(e)},Qg=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach(function(t){if(n.find(function(e){return e.getId()===t.getId()})){var o=r.find(function(e){return e.getId()===t.getId()});o?(r.splice(r.indexOf(o),1),r.push(t)):r.push(t)}++a<100&&e(t.getTargets(),n,r,a)})},Kg=qg,Zg=Jg,Xg=Yg,$g=function e(t,n,r,a){if(0===n.length)return Xg("Selection is empty. Nothing to do for Cody!"),!1;if("undefined"===typeof r&&Fg)return ev.codyServers?ev.codyServers.forEach(function(e){Kg({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:Hg.Warning},e.name)}):Kg({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:Hg.Warning},"Cody"),!1;if(ev.codyServers){if("undefined"===typeof r)Fg={nodes:n,currentNodeIndex:0,boardId:t,currentServerIndex:0,syncPerformed:!1},n=function(e){var t=[],n=e.filter(function(t){if(0===t.getSources().count())return!0;var n=!0;return t.getSources().forEach(function(t){e.find(function(e){return e.getId()===t.getId()})&&(n=!1)}),n});return t.push.apply(t,Object(Xa.a)(n)),n.forEach(function(n){Qg(n.getTargets(),e,t)}),t}(n),e(t,n,0);else{"undefined"===typeof a&&(a=0);var o=ev.codyServers[a];o.axios.post(Pg.ElementEdited,{node:rd(n[r])}).then(function(i){if(200===i.status){var s=i.data;Kg(s,o.name),s.type!==Hg.Question&&s.type!==Hg.StopSession&&s.type!==Hg.SyncRequired&&s.type!==Hg.Error&&(++a<ev.codyServers.length?(Fg.currentServerIndex=a,e(t,n,r,a)):(r+=1,Fg.currentNodeIndex=r,Fg.currentServerIndex=0,r<n.length&&e(t,n,r,0))),s.type===Hg.SyncRequired&&Gg&&Gg(),(s.type===Hg.StopSession||s.type===Hg.Error||r===n.length&&a===ev.codyServers.length&&s.type!==Hg.Question)&&(Fg=void 0)}else Zg("Did not receive a valid response from ".concat(o.name,". ")+JSON.stringify(i))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Zg(e)})}return!0}return Zg(Wg),!1},ev={syncRequired:function(){return!!ev.codyServers&&ev.codyServers.filter(function(e){return e.sync}).length>0},connect:{Cody:function(e,t,n){n||(n="Cody"),ev.codyServers||(ev.codyServers=[]);var r=ev.codyServers.filter(function(e){return e.name!==n}),a={name:n,axios:Se.a.create({baseURL:e+"/messages/"}),sync:!1};return r.push(a),ev.codyServers=r,a.axios.post(Pg.IioSaidHello,{user:t}).then(function(e){200===e.status?(Kg(e.data,a.name),e.data.type===Hg.SyncRequired&&Gg&&(Vg=r.indexOf(a),Gg())):Zg("Did not receive a valid response from ".concat(a.name,". ")+JSON.stringify(e))},function(e){return Kg({cody:"Failed to reach out to server",details:[e],type:Hg.Error},a.name)}),!0}},disconnect:function(e){if(ev.codyServers){if(e)return ev.codyServers=ev.codyServers.filter(function(t){return t.name!==e}),void Kg({cody:"Bye Bye",type:Hg.Warning},e);ev.codyServers=void 0,Fg=void 0,Kg=qg,Zg=Jg,Xg=Yg}},reply:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(Fg&&ev.codyServers&&ev.codyServers[Fg.currentServerIndex]){var t=ev.codyServers[Fg.currentServerIndex];return t.axios.post(Pg.UserReplied,{reply:e}).then(function(e){if(200===e.status){var n=e.data;if(Kg(n,t.name),n.type!==Hg.Question&&n.type!==Hg.StopSession&&n.type!==Hg.Error&&Fg){var r=Fg.nodes,a=Fg.currentNodeIndex,o=Fg.currentServerIndex+1;o<ev.codyServers.length?(Fg.currentServerIndex=o,$g(Fg.boardId,r,a,o)):(a+=1,Fg.currentNodeIndex=a,Fg.currentServerIndex=0,a<r.length?$g(Fg.boardId,r,a,0):Fg.currentServerIndex=o)}(n.type===Hg.StopSession||n.type===Hg.Error||Fg&&(Fg.currentNodeIndex===Fg.nodes.length||0===Fg.nodes.length)&&Fg.currentServerIndex===ev.codyServers.length)&&(Fg=void 0)}else Zg("Did not receive a valid response from ".concat(t.name,". ")+JSON.stringify(e))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Zg(e)}),!0}Zg(Wg)}),talk:{to:{Cody:function(){if(ev.codyServers){var e=ev.codyServers[ev.codyServers.length-1];return Fg={nodes:[],currentNodeIndex:0,boardId:"",currentServerIndex:ev.codyServers.length-1,syncPerformed:!1},e.axios.post(Pg.ConfirmTest,{}).then(function(t){200===t.status?Kg(t.data,e.name):Zg("Did not receive a valid response from ".concat(e.name,". ")+JSON.stringify(t))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Zg(e)}),!0}Zg(Wg)}}},trigger:{Cody:$g},onSyncRequired:function(e){Gg=e},syncNodes:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ev.codyServers||!Fg&&"undefined"===typeof Vg){e.next=14;break}if(r=Fg?ev.codyServers[Fg.currentServerIndex]:ev.codyServers[Vg],!Fg||!Fg.syncPerformed){e.next=5;break}return Kg({cody:"Something went wrong. I already synced the entire board, but need to sync again.",details:"Looks like an endless loop. The developer who created the hooks gave me wrong instructions. Please contact them!",type:Hg.Error},r.name),e.abrupt("return",!1);case 5:return e.next=7,r.axios.post(Dg.Sync,{boardId:t,nodes:n.map(rd)});case 7:if(200===(a=e.sent).status){e.next=11;break}return Zg("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 11:(o=a.data).type!==Hg.Empty&&Kg(o,r.name),r.sync=!0;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),syncChangedNodes:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r,a,o,i,s,c;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ev.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=fn.a.mark(function e(){var r,a,o,i,s,u,l,d,m;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=c.value).sync){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(Ei.a)(fn.a.mark(function e(n){var a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.axios.put(Dg.Sync,{boardId:t,nodes:n.map(rd)});case 2:if(200===(a=e.sent).status){e.next=6;break}return Zg("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 6:(o=a.data).type!==Hg.Empty&&Kg(o,r.name);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,s=!1,u=void 0,e.prev=8,l=n[Symbol.iterator]();case 10:if(i=(d=l.next()).done){e.next=20;break}if(m=d.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),s=!0,u=e.t0;case 26:e.prev=26,e.prev=27,i||null==l.return||l.return();case 29:if(e.prev=29,!s){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),s=ev.codyServers[Symbol.iterator]();case 7:if(r=(c=s.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==s.return||s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncDeletedNodes:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r,a,o,i,s,c;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!ev.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=fn.a.mark(function e(){var r,a,o,i,s,u,l,d,m;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=c.value).sync){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(Ei.a)(fn.a.mark(function e(n){var a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.axios.post(Dg.SyncDeleted,{boardId:t,nodes:n.map(rd)});case 2:if(200===(a=e.sent).status){e.next=6;break}return Zg("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 6:(o=a.data).type!==Hg.Empty&&Kg(o,r.name);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,s=!1,u=void 0,e.prev=8,l=n[Symbol.iterator]();case 10:if(i=(d=l.next()).done){e.next=20;break}if(m=d.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),s=!0,u=e.t0;case 26:e.prev=26,e.prev=27,i||null==l.return||l.return();case 29:if(e.prev=29,!s){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),s=ev.codyServers[Symbol.iterator]();case 7:if(r=(c=s.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==s.return||s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncFinished:function(){if("undefined"!==typeof Vg&&ev.codyServers){var e=ev.codyServers[Vg];return Kg({cody:"Sync finished. We can continue!",type:Hg.Info},e.name),void(Vg=void 0)}if(Fg&&ev.codyServers){var t=ev.codyServers[Fg.currentServerIndex];Kg({cody:"Sync finished. We can continue!",type:Hg.Info},t.name),Fg.syncPerformed=!0,$g(Fg.boardId,Fg.nodes,Fg.currentNodeIndex,Fg.currentServerIndex)}},abortSession:function(){return Fg=void 0,ev.codyServers?ev.codyServers.forEach(function(e){Kg({cody:"Yeah, no problem. I stopped my work."},e.name)}):Kg({cody:"Yeah, no problem. I stopped my work."},"Cody"),!0},ask:{Cody:{forHelp:function(){Kg({cody:"It's easy. You design the solution and I'll code it for you!",details:["%cJust select one or more elements on the board and press %cCtrl+G (Cmd+G on Mac)%c or choose %cTrigger Cody%c from context menu of an element.\n\nPressing %cCtrl+Q (Cmd+Q on Mac)%c closes the console.\n\nTo enable Cockpit integration use %c/cockpit https://localhost:<cockpit_port>","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)"]},"Cody")}}},codyServers:void 0,setCodyResponsePrinter:function(e){Kg=e},setErrorPrinter:function(e){Zg=e},setWarningPrinter:function(e){Xg=e}};window.IIO=ev,function(e){e.Info="Info",e.Error="Error",e.Warning="Warning",e.Empty="Empty",e.Question="Question",e.StopSession="StopSession",e.SyncRequired="SyncRequired"}(Hg||(Hg={}));var tv=fn.a.mark(rv),nv=fn.a.mark(av);function rv(e){var t,n,r,a,o,i,s,c,u,l,d=arguments;return fn.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=d.length>1&&void 0!==d[1]&&d[1],n=Object(fe.List)(),a=!0,o=!1,i=void 0,m.prev=5,s=fn.a.mark(function e(){var a,o,i,s,c,l;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.value,e.next=3,Object(hn.i)(C.getIioUserInfoById,a.userId);case 3:if(o=e.sent,r=a.board,o){e.next=20;break}return e.next=8,Object(hn.g)(f.Query.loadUsersInfo([a.userId]));case 8:i=!0;case 9:if(!i){e.next=20;break}return e.next=12,Object(hn.h)({infoLoaded:Object(hn.k)([f.Type.IIO_USERS_INFO_LOADED]),timeout:Object(hn.e)(5e3)});case 12:if(s=e.sent,c=s.infoLoaded,!s.timeout){e.next=17;break}return e.abrupt("return",{v:void 0});case 17:c.payload.usersInfo.forEach(function(e){e.userId===a.userId&&(o=e,i=!1)}),e.next=9;break;case 20:l=vd(a,o),n=t?n.unshift(l):n.push(l);case 22:case"end":return e.stop()}},e,this)}),c=e[Symbol.iterator]();case 8:if(a=(u=c.next()).done){m.next=16;break}return m.delegateYield(s(),"t0",10);case 10:if("object"!==typeof(l=m.t0)){m.next=13;break}return m.abrupt("return",l.v);case 13:a=!0,m.next=8;break;case 16:m.next=22;break;case 18:m.prev=18,m.t1=m.catch(5),o=!0,i=m.t1;case 22:m.prev=22,m.prev=23,a||null==c.return||c.return();case 25:if(m.prev=25,!o){m.next=28;break}throw i;case 28:return m.finish(25);case 29:return m.finish(22);case 30:if(!r){m.next=38;break}if(!t){m.next=36;break}return m.next=34,Object(hn.g)(yu(r,n));case 34:m.next=38;break;case 36:return m.next=38,Object(hn.g)(Ou(r,n));case 38:case"end":return m.stop()}},tv,this,[[5,18,22,30],[23,,25,29]])}function av(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e="";case 1:return n.next=4,Object(hn.k)([_.REMOTE_BOARD_CHANGED,_.LOCAL_BOARD_CHANGED,_.BOARD_INITIALIZED]);case 4:t=n.sent,n.t0=t.type,n.next=n.t0===_.BOARD_INITIALIZED?8:n.t0===zs?10:n.t0===Fs?10:14;break;case 8:return e=t.payload.board.uid,n.abrupt("break",14);case 10:if(e!==t.payload.boardChanged.board){n.next=13;break}return n.next=13,Object(hn.f)(rv,[t.payload.boardChanged],!0);case 13:return n.abrupt("break",14);case 14:n.next=1;break;case 16:case"end":return n.stop()}},nv,this)}var ov=fn.a.mark(uv),iv=fn.a.mark(lv),sv=fn.a.mark(dv),cv=function(e){return new kd({board:e.boardId,cellId:e.cellId||void 0,cellLabel:e.cellLabel,cellType:e.cellType,action:e.action,recordedAt:e.recordedAt,userId:e.boardVersion.userId,version:e.boardVersion.version,changeSet:Object(fe.List)(e.patch),name:"BoardChanged",uid:e.patchId})};function uv(e){var t,n,r,a,o,i,s;return fn.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=Yb(e.payload.boardId),n=xg(e.payload.boardId),c.next=4,Object(hn.i)(t);case 4:return r=c.sent,c.next=7,Object(hn.i)(n);case 7:if(a=c.sent,!r||a.loading){c.next=31;break}return c.next=11,Object(hn.g)(ju(e.payload.boardId,!0));case 11:return c.next=13,Object(hn.c)(U.fetchOlderPatches,e.payload.boardId,r.version);case 13:if(o=c.sent,i=o.response,!o.error){c.next=22;break}return c.next=19,Object(hn.g)(Su(e.payload.boardId));case 19:return c.next=21,Object(hn.g)(ju(e.payload.boardId,!1));case 21:return c.abrupt("return");case 22:if(!i){c.next=29;break}if(!((s=Object(Dn.map)(i.data,function(e){return cv(e)})).length<=1)){c.next=27;break}return c.next=27,Object(hn.g)(Su(e.payload.boardId));case 27:return c.next=29,Object(hn.c)(rv,s);case 29:return c.next=31,Object(hn.g)(ju(e.payload.boardId,!1));case 31:case"end":return c.stop()}},ov,this)}function lv(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.g)(ju(e.payload.boardId,!0));case 2:return a.next=4,Object(hn.c)(U.fetchOlderPatches,e.payload.boardId,e.payload.boardVersion);case 4:if(t=a.sent,n=t.response,!t.error){a.next=13;break}return a.next=10,Object(hn.g)(Su(e.payload.boardId));case 10:return a.next=12,Object(hn.g)(ju(e.payload.boardId,!1));case 12:return a.abrupt("return");case 13:if(!n){a.next=20;break}if(!((r=Object(Dn.map)(n.data,function(e){return cv(e)})).length<=1)){a.next=18;break}return a.next=18,Object(hn.g)(Su(e.payload.boardId));case 18:return a.next=20,Object(hn.c)(rv,r);case 20:return a.next=22,Object(hn.g)(ju(e.payload.boardId,!1));case 22:case"end":return a.stop()}},iv,this)}function dv(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([Es,Is]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Is?7:t.t0===Es?10:12;break;case 7:return t.next=9,Object(hn.f)(lv,e);case 9:return t.abrupt("break",12);case 10:return t.next=12,Object(hn.f)(uv,e);case 12:t.next=0;break;case 14:case"end":return t.stop()}},sv,this)}var mv,pv=function(){function e(t,n,r,a,o,i){var s=this;Object(Be.a)(this,e),this.socket=void 0,this.board=void 0,this.userId=void 0,this.username=void 0,this.localQueue=[],this.incomingQueue=[],this.lastProcessedVersion=void 0,this.reconnectListener=void 0,this.isFetchingLatestPatches=!1,this.onHandledRemoteEvent=void 0,this.onPublished=void 0,this.locked=!1,this.initialized=!1,this.socket=t,this.board=n,this.userId=r,this.username=a,this.lastProcessedVersion=n.version.version,this.onHandledRemoteEvent=o,this.onPublished=i,this.reconnectListener=function(){console.log("[BoardSync] Socket reconnected"),s.socket.connected?s.restartSync():(console.log("[BoardSync] Socket not fully reconnected yet. Waiting another 100ms"),window.setTimeout(s.reconnectListener,100))}}return Object(Re.a)(e,[{key:"isInitialized",value:function(){return this.initialized}},{key:"restartSync",value:function(){var e=we();this.socket.emit("BoardOpened",{boardId:this.board.uid,userId:this.userId,username:this.username,token:e}),this.loadAndProcessLatestPatchesFromServer(),this.localQueue.length>10&&alert("Backend service is available again. Your changes will be saved now! Sorry for any inconvenient caused."),this.processLocalQueue()}},{key:"startSync",value:function(){var e=this,t=function(){var t=we();console.log("[BoardSync] Socket connected"),e.socket.emit("BoardOpened",{boardId:e.board.uid,userId:e.userId,username:e.username,token:t})};this.socket.on("BoardChanged",function(t){e.handleBoardChanged(M.remoteBoardChanged(t))}),this.socket.on("reconnect",this.reconnectListener),this.socket.connected?t():(console.log("[BoardSync] Awaiting socket connect"),this.socket.once("connect",t)),this.loadAndProcessLatestPatchesFromServer()}},{key:"stopSync",value:function(){console.log("[BoardSync] Stopping sync"),this.socket.off("BoardChanged"),this.socket.off("reconnect",this.reconnectListener)}},{key:"currentVersion",value:function(){return this.lastProcessedVersion}},{key:"publishChanges",value:function(e,t){var n=this;if(this.locked&&!t)return console.log("[BoardSync] Sync is locked. Pushing event to local queue for later processing",e.toBoardVersion().version),void this.localQueue.push(e);if(this.socket.connected){if(this.localQueue.length&&!t)return console.log("[BoardSync] Processing local queue before publishing new change"),void this.processLocalQueue();t||(this.locked=!0,window.setTimeout(function(){n.locked=!1,n.processLocalQueue()},500));var r=e.toJS();console.log("[BoardSync] Emitting new local changes",r);var a=we();this.socket.emit("BoardChanged",Object(Ye.a)({},r,{token:a}),function(a){a.success?(a.boardVersion&&a.boardVersion>n.lastProcessedVersion&&(n.lastProcessedVersion=a.boardVersion,console.log("[BoardSync] Patch saved successfully. Last processed version set to: ",n.lastProcessedVersion)),n.onPublished()):(console.error("[BoardSync] Local change was not saved by socket server. BE returned error: ",a.error),3!==t&&(t||(t=0),t++,console.log("[BoardSync] Retrying event: ",r," retry count: ",t),n.publishChanges(e,t)))})}else console.log("[BoardSync] Socket not connected. Pushing change to local queue"),this.localQueue.push(e),10===this.localQueue.length&&alert("The backend service to save your latest changes is temporarily unavailable. You can continue working and backup your work at the end by making an export of the board. We try to reconnect you as soon as possible!")}},{key:"loadAndProcessLatestPatchesFromServer",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r,a,o,i,s=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isFetchingLatestPatches=!0,console.log("[BoardSync] Going to fetch latest patches from server. Last processed version is: ",this.lastProcessedVersion),e.next=4,U.fetchNewerPatches(this.board.uid,new Wl({userId:this.userId,version:this.lastProcessedVersion}));case 4:r=e.sent,a=r.response,o=r.error,this.isFetchingLatestPatches=!1,a&&(console.log("[BoardSync] Successfully loaded latest patches"),Object(Dn.map)(a.data,function(e){return cv(e)}).forEach(function(e){return s.handleBoardChanged(e,!0)}),this.initialized=!0,console.log("[BoardSync] Processing incomingQueue now"),i=Object(Xa.a)(this.incomingQueue),this.incomingQueue=[],i.forEach(function(e){return s.handleBoardChanged(e,!0)}),t&&t()),o&&(console.error("[BoardSync] Failed to load latest patches: ",o),n&&n(),this.initialized=!0);case 10:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleBoardChanged",value:function(e,t){if(this.isFetchingLatestPatches)return console.log("[BoardSync] Fetching latest patches ATM. BoardChanged event is pushed to incomingQueue: ",e.toBoardVersion().version),void this.incomingQueue.push(e);if(this.lastProcessedVersion+1===e.toBoardVersion().version||t&&e.toBoardVersion().version>this.lastProcessedVersion)this.lastProcessedVersion=e.toBoardVersion().version,console.log("[BoardSync] Increased last processed version to: ",this.lastProcessedVersion);else{if(!(this.lastProcessedVersion+1<e.toBoardVersion().version))return void console.warn("[BoardSync] Skipped outdated event. Last processed version is: ",this.lastProcessedVersion," but event has version: ",e.toBoardVersion().version);console.log("[BoardSync] Gap detected. Last processed version is: ",this.lastProcessedVersion," but received event with version: ",e.toBoardVersion().version),console.log("[BoardSync] Fetching latest patches from server first. Event is pushed to incoming queue"),this.incomingQueue.push(e),this.loadAndProcessLatestPatchesFromServer()}this.onHandledRemoteEvent(e,this.initialized)}},{key:"processLocalQueue",value:function(e){var t=this;console.log("[BoardSync] Processing local queue: ",this.localQueue.length);var n=Object(Xa.a)(this.localQueue);this.localQueue=[],n.forEach(function(e){console.log("[BoardSync] Publishing event from local queue.",e.toBoardVersion().version),t.publishChanges(e)}),e&&e()}}]),e}(),fv={uid:"",board:"",aggregateType:"BoardTimer",deadline:0,duration:0,moderator:"",pausedTime:void 0},hv=function(e,t,n,r,a){return new bv({uid:"",aggregateType:"BoardTimer",board:e,deadline:t,duration:n,moderator:r,pausedTime:a})},bv=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=nt.v4()),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)(fv));!function(e){e.Default="Default",e.Moving="Moving",e.Typing="Typing"}(mv||(mv={}));var gv,vv=["#15A2B0","#715671","#CF3241","#ED6842","#EECA51","#1F8A6D","#dd3cd3","#1114dd","#7add3a","#dd8794","#b16fdd","#9fa0bb","#bad63c","#7886dd","#8510dd","#dd796d"],Ov=0,yv=function(e){switch(e){case mv.Moving:return"hand rock";case mv.Typing:return"keyboard";default:return"user"}},Ev=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.socket=void 0,this.container=void 0,this.registry={},this.translateGraphPoint=void 0,this.graph=void 0,this.userJoinedListeners=void 0,this.userLeftListeners=void 0,this.observedUser=void 0,this.observingFrame=void 0,this.lastMoveWasPanning=void 0,this.boardTimerStartedListeners=void 0,this.boardTimerPausedListeners=void 0,this.boardTimerStoppedListeners=void 0,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,this.disconnectListener=null,this.reconnectListener=null,this.socket=t,this.container=n,this.translateGraphPoint=a,this.graph=r,this.userJoinedListeners=[],this.userLeftListeners=[],this.boardTimerStartedListeners=[],this.boardTimerPausedListeners=[],this.boardTimerStoppedListeners=[],this.observedUser=null,this.observingFrame=null,this.lastMoveWasPanning=!1}return Object(Re.a)(e,[{key:"startSync",value:function(e){var t=this;this.socket.on("MouseJoined",function(e){console.log("[mousesync]: Start tracking of remote user: ",e.userId),t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)}),this.socket.on("MouseLeft",function(n){console.log("[mousesync]: Stop tracking of remote user: ",n.userId),t.stopMouseTrackingOfUser(n.userId),t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){t.registry.hasOwnProperty(e.userId)||t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})})}),this.socket.on("MouseMove",function(e){var n=e.userId,r=e.point,a=e.vT,o=e.scale;if(t.registry.hasOwnProperty(n)){var i=t.registry[n].pointerEl;if(i.style.display="block",t.observedUser===n&&(t.graph.view.setScale(o),t.graph.panGraph(e.vT.x,e.vT.y),t.graph.panningListeners.forEach(function(t){return t(e.vT)})),e.isPanning&&t.observedUser===n){var s=t.translateGraphPoint(r);i.style.left=s.x+"px",i.style.top=s.y+"px",t.registry[n].lastKnownAbsolutePoint=s}if(!e.isPanning){var c=t.translateGraphPoint(r);i.style.left=c.x+"px",i.style.top=c.y+"px",t.registry[n].lastKnownAbsolutePoint=c}t.registry[n].translate=a,t.registry[n].scale=o}}),this.socket.on("MouseScroll",function(e){var n=e.userId,r=e.scale,a=e.vT;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(r),t.graph.panGraph(a.x,a.y)),t.registry[n].translate=a,t.registry[n].scale=r)}),this.socket.on("GestureChanged",function(e){var n=e.userId;e.gesture;t.registry.hasOwnProperty(n)&&(t.registry[n].pointerIcon.className=yv(e.gesture)+" icon")}),this.socket.on("AutoScrolling",function(e){var n=e.userId,r=e.translate,a=e.scale;e.isPanning;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(a),t.graph.panGraph(r.x,r.y)),t.registry[n].translate=r,t.registry[n].scale=a)}),this.socket.on("BoardTimerStarted",function(e){var n=new bv(e);console.log("[mousesync] Received board timer started: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!1}),this.socket.on("BoardTimerPaused",function(e){var n=new bv(e);console.log("[mousesync] Received board timer paused: ",e),t.boardTimerPausedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!0}),this.socket.on("BoardTimerStopped",function(e){var n=new bv(e);console.log("[mousesync] Received board timer stopped: ",e),t.activeBoardTimer=void 0,t.isBoardTimerPaused=!1,t.boardTimerStoppedListeners.forEach(function(e){return e(n)})}),this.disconnectListener=function(){for(var e in console.log("[mousesync] MouseSync socket disconnected"),t.registry)t.registry.hasOwnProperty(e)&&t.stopMouseTrackingOfUser(e)},this.socket.on("disconnect",this.disconnectListener);var n=function(n){n&&t.userJoinedListeners.forEach(function(t){return t(e.userId,e.name,e.avatar,"#423fbc")}),console.log("[mousesync]: Sending mouse joined event: ",e),t.socket.emit("MouseJoined",e),t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){return t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})}),t.socket.emit("GetActiveBoardTimer",{board:e.boardId},function(e){t.activeBoardTimer=e.timer?new bv(e.timer):void 0,t.isBoardTimerPaused=e.isPaused,n&&t.boardTimerStartedListeners.length&&t.activeBoardTimer&&(console.log("[mousesync] Calling board timer started listeners with: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(t.activeBoardTimer)})),t.isBoardTimerPaused&&n&&t.boardTimerPausedListeners.length&&t.activeBoardTimer&&t.boardTimerPausedListeners.forEach(function(e){return e(t.activeBoardTimer)})})};this.reconnectListener=function(){console.log("[mousesync] MouseSync socket reconnected"),t.activeBoardTimer&&t.activeBoardTimer.moderator===e.userId&&(t.startBoardTimer(t.activeBoardTimer),t.isBoardTimerPaused&&t.pauseBoardTimer(t.activeBoardTimer)),n(!1)},this.socket.on("reconnect",this.reconnectListener),this.socket.connected?n(!0):this.socket.once("connect",function(){n(!0)})}},{key:"stopSync",value:function(e){console.log("[mousesync] stop sync"),this.socket.emit("MouseLeft",e),this.socket.off("MouseJoined"),this.socket.off("MouseMove"),this.socket.off("MouseScroll"),this.socket.off("MouseLeft"),this.socket.off("GestureChanged"),this.socket.off("AutoScrolling"),this.socket.off("BoardTimerStarted"),this.socket.off("BoardTimerPaused"),this.socket.off("BoardTimerStopped"),this.reconnectListener&&this.socket.off("reconnect",this.reconnectListener),this.disconnectListener&&this.socket.off("disconnect",this.disconnectListener),this.registry={},this.observedUser=null,this.lastMoveWasPanning=!1,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,this.userJoinedListeners=[],this.userLeftListeners=[],this.boardTimerStartedListeners=[],this.boardTimerPausedListeners=[],this.boardTimerStoppedListeners=[],document.getElementById("topmenu").style.borderColor=null}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){for(var n in this.registry)if(this.registry.hasOwnProperty(n)){var r=this.registry[n],a=r.pointerEl,o=r.lastKnownAbsolutePoint;a.style.left=o.x+Math.round(t.dx)+"px",a.style.top=o.y+Math.round(t.dy)+"px"}}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){for(var e in this.registry)if(this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.registry[e].lastKnownAbsolutePoint={x:parseInt(t.style.left,void 0),y:parseInt(t.style.top,void 0)}}}},{key:"emitUserMouseMove",value:function(e,t){e.isPanning&&t?(this.keepMousePositionsInPlaceOnPanning(e,t),this.lastMoveWasPanning=!0):this.lastMoveWasPanning&&this.syncLastKnownAbsolutePointsAfterPanning(),this.socket.emit("MouseMove",e)}},{key:"emitUserMouseScroll",value:function(e){this.socket.emit("MouseScroll",e)}},{key:"emitUserGestureChanged",value:function(e){this.socket.emit("GestureChanged",e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.socket.emit("AutoScrolling",e)}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){if(console.log("[mousesync] track mouse of remote user: ",e," in registry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e))this.observedUser===e&&this.observeUser(e);else{var r=function(e){var t=vv[Ov];++Ov===vv.length&&(Ov=0);var n=document.createElement("div");n.className="geRemoteMouse",n.style.position="absolute",n.style.display="none";var r=document.createElement("p"),a=document.createElement("i");a.className=yv(mv.Default)+" icon",a.style.color=t,r.appendChild(a),n.appendChild(r);var o=document.createElement("p");return o.className="geMouseLabel",o.innerHTML=e,o.style.color=t,n.appendChild(o),[n,a,t]}(t),a=Object(Qe.a)(r,3),o=a[0],i=a[1],s=a[2];this.registry[e]={userName:t,pointerEl:o,pointerIcon:i,color:s,scale:.2,translate:{x:0,y:0},lastKnownAbsolutePoint:{x:0,y:0}},this.container.appendChild(o),this.observedUser===e&&this.observeUser(e),this.userJoinedListeners.forEach(function(r){return r(e,t,n,s)})}}},{key:"stopMouseTrackingOfUser",value:function(e){if(console.log("[mousesync] stop mouse tracking of user",e,"in regsitry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.container.removeChild(t),delete this.registry[e],this.observedUser===e&&this.hideObservingFrame(),this.userLeftListeners.forEach(function(t){return t(e)})}}},{key:"observeUser",value:function(e){if(console.log("[mousesync] observe user",e,"in registry",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){this.observedUser=e;var t=this.registry[e],n=t.userName,r=t.color,a=t.translate,o=t.scale;document.getElementById("topmenu").style.borderColor=r;var i=document.createElement("div");i.classList.add("observing","frame"),i.style.borderColor=r;var s=document.createElement("div");s.classList.add("label"),s.innerText="Observing "+n,s.style.backgroundColor=r,s.style.color="#fff",i.append(s),this.graph.container.append(i),this.observingFrame=i,0!==a.x&&0!==a.y&&(this.graph.view.setScale(o),this.graph.panGraph(a.x,a.y))}}},{key:"hideObservingFrame",value:function(){this.observingFrame&&(this.observingFrame.remove(),this.observingFrame=null,document.getElementById("topmenu").style.borderColor=null)}},{key:"stopObservingUser",value:function(){console.log("[mousesync] stop oberving user"),this.observedUser=null,this.hideObservingFrame()}},{key:"onUserJoined",value:function(e){console.log("[mousesync] attach user joined listener"),this.userJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.userJoinedListeners=this.userJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){console.log("[mousesync] attach user left listener"),this.userLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.userLeftListeners=this.userLeftListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerPaused",value:function(e){this.boardTimerPausedListeners.push(e),this.activeBoardTimer&&this.isBoardTimerPaused&&e(this.activeBoardTimer)}},{key:"offBoardTimerPaused",value:function(e){this.boardTimerPausedListeners=this.boardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.boardTimerStartedListeners.push(e),this.activeBoardTimer&&(console.log("[mousesync] Trigger board timer started listener with active timer: ",this.activeBoardTimer.toJS()),e(this.activeBoardTimer))}},{key:"offBoardTimerStarted",value:function(e){this.boardTimerStartedListeners=this.boardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners=this.boardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.socket.emit("BoardTimerPaused",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!0}},{key:"startBoardTimer",value:function(e){this.socket.emit("BoardTimerStarted",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!1}},{key:"stopBoardTimer",value:function(e){this.socket.emit("BoardTimerStopped",e.toJS()),this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1}}]),e}(),Iv=function(e,t){return e.getIn([QE,"boardGraphElements"])},kv=Object(Pe.b)()(function(e){Object(Me.useDispatch)();var t,n,r=Object(ge.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=Object(ge.useState)(void 0),c=Object(Qe.a)(s,2),u=(c[0],c[1]),l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(Me.useSelector)(If()),h=Object(Me.useSelector)((t=o,n=fd.event,Object(ft.a)([Iv],function(e){if(!e.has(t))return null;var r=Object(fe.List)(e.get(t).toIndexedSeq().toArray());return n?r.filter(function(e){return e.type===n}):r}))),b=f.filter(function(t){return t.uid!==e.boardId}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();h&&h.toArray().map(function(e){return{text:e.name,value:e.uid,icon:ge.createElement(hg,{cellType:e.type})}});e.openHandle(function(e,t){t&&g(t.replace(Ct()+yt+"/board/","")),p(e)});var g=function(e){i(e),u(void 0),e.length},v=function(){e.onCancel(),O()},O=function(){i(""),u(void 0)};return ge.createElement(Ri.a,{open:m,onClose:v,closeIcon:!0},ge.createElement(Ri.a.Header,null,e.t("insp.board.link.headline")),ge.createElement(Ri.a.Content,{image:!0},ge.createElement($e.a,{placeholder:e.t("insp.board.link.select_board"),fluid:!0,search:!0,selection:!0,options:b,onChange:function(e,t){g(t.value)},value:o,clearable:!0,style:{marginRight:"10px"}}),!1),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:v}),ge.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){""!==o?e.onLinkChosen(It(o)):e.onLinkChosen(""),O()}})))}),Sv=function(e,t){var n=Math.round(.01*t.x*e.naturalWidth),r=Math.round(.01*t.y*e.naturalHeight),a=Math.round(.01*t.width*e.naturalWidth),o=Math.round(.01*t.height*e.naturalHeight),i=document.createElement("canvas");return i.width=a,i.height=o,i.getContext("2d").drawImage(e,n,r,a,o,0,0,a,o),i},jv=function(e,t,n){return Sv(e,t).toDataURL(n)},xv=function(e,t,n){return new Promise(function(){var r=Object(Ei.a)(fn.a.mark(function r(a,o){return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Sv(e,t).toBlob(function(e){e||o(),a(wh(e))},n);case 1:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}())},Tv={aspect:0,unit:"%",x:0,y:0,width:100,height:100},Cv=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],wv=["image/jpeg","image/png","image/webp"],Av=Object(Pe.b)()(function(e){var t=Object(ge.useState)(null),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(Tv),s=Object(Qe.a)(o,2),c=s[0],u=s[1],l=Object(ge.useState)(void 0),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(ge.useState)(void 0),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=Object(ge.useState)(!1),O=Object(Qe.a)(v,2),y=O[0],E=O[1],I=Object(ge.useState)(!1),k=Object(Qe.a)(I,2),S=k[0],j=k[1],x=Object(Me.useDispatch)();Object(ge.useEffect)(function(){N(),setTimeout(N,1e3)}),e.openHandle(function(e,t){a("string"===typeof t?t:null),E(e)});var T=function(t){t.length<1?x(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))):p({file:t[0],src:URL.createObjectURL(t[0])})},C=function(){e.onCancel(),w()},w=function(){p(void 0),g(void 0),u(Tv),j(!1)},A=function(){var t=Object(Ei.a)(fn.a.mark(function t(){var n,a,o,i;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return");case 2:if(j(!0),n=wv.includes(m.file.type),a="image/svg+xml"===m.file.type,!n){t.next=10;break}t.t0=jv(b,c,m.file.type).replace(";base64",""),t.next=21;break;case 10:if(!a){t.next=17;break}return t.next=13,Ch(m.file);case 13:t.t2=t.sent,t.t1="data:image/svg+xml,"+t.t2,t.next=20;break;case 17:return t.next=19,Ah(m.file);case 19:t.t1=t.sent.replace(";base64","");case 20:t.t0=t.t1;case 21:return o=t.t0,e.onFileUploaded(m.file.name,o),w(),t.abrupt("return");case 25:if(!n){t.next=31;break}return t.next=28,xv(b,c,m.file.type);case 28:t.t3=t.sent,t.next=41;break;case 31:if(!a){t.next=37;break}return t.next=34,Ch(m.file);case 34:t.t4=t.sent,t.next=40;break;case 37:return t.next=39,wh(m.file);case 39:t.t4=t.sent;case 40:t.t3=t.t4;case 41:i=t.t3,(r?B:_)(i,m.file.type);case 43:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),_=function(t,n){U.uploadBoardImage(e.boardId,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(t.data.imageId))}).catch(R).finally(w)},B=function(t,n){U.replaceBoardImage(e.boardId,r,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(r))}).catch(R).finally(w)},R=function(){x(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))),C()},N=function(){var e=document.getElementById("imageUploadPasteInput");e&&e.focus()};return ge.createElement(Ri.a,{open:y,onClose:C,closeIcon:!0,onClick:N},ge.createElement(Ri.a.Header,null,e.t("insp.board.upload.select_image")),ge.createElement(Ri.a.Content,{image:!0,onPaste:function(t){t.preventDefault();for(var n=t.clipboardData.items,r=null,a=0;a<n.length;a++){var o=n[a];if("image/jpeg"===o.type||"image/png"===o.type){r=o.getAsFile();break}}null!==r?T([r]):x(i.Command.error(e.t("insp.board.upload.paste_failed"),e.t("insp.board.upload.invalid_file_pasted")))}},ge.createElement(_i.a,{onDrop:T,disabled:!!m,accept:Cv,maxFiles:1,maxSize:5242880,multiple:!1},function(t){var n=t.getRootProps,r=t.getInputProps;return ge.createElement("section",{style:{height:"410px",width:"100%"}},ge.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),m&&wv.includes(m.file.type)&&ge.createElement(Bi.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:m.src,crop:c,onChange:function(e,t){return u(t)},onImageLoaded:g}),m&&!wv.includes(m.file.type)&&ge.createElement("img",{src:URL.createObjectURL(m.file)}),!m&&ge.createElement("div",null,ge.createElement("input",{id:"imageUploadPasteInput",type:"text",style:{position:"fixed",left:"-10000px"}}),ge.createElement("input",r()),ge.createElement("p",null,e.t("insp.board.upload.drag_and_drop_info")))))})),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:C}),ge.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:A,loading:S})))}),_v=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(""),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1];e.openHandle(function(e,t){t?c(t):(c(""),m(!1)),a(e)});var p=function(){e.onCancel(),f()},f=function(){c(""),m(!1)},h=function(){e.onLinkChosen(s),f()};return ge.createElement(Ri.a,{open:r,onClose:p,closeIcon:!0},ge.createElement(Ri.a.Header,null,e.t("insp.board.tasklink.headline")),ge.createElement(Ri.a.Content,null,ge.createElement(Md.a,{type:"url",onChange:function(e,t){var n;c(t.value),m(!(""===(n=t.value)||null!==n.match(/^https?:\/\/.+$/)))},value:s,fluid:!0,placeholder:"https://issue.tracker.com/tasks/1234",required:!0,error:d,autoFocus:!0,onKeyDown:function(e){13===e.keyCode&&h()},icon:ge.createElement(hf.a,{name:"close",link:!0,onClick:f})})),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:p}),ge.createElement(Ni.a,{primary:!0,children:e.t("app.form.save"),onClick:h,disabled:d})))}),Uv=Object(Pe.b)()(function(e){var t=Object(ge.useRef)(null),n=Object(ge.useState)([]),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)([]),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useState)(""),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(ge.useState)(""),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=window.JitsiMeetJS;v.init({flags:{sendMultipleVideoStreams:!0,sourceNameSignaling:!0}});var O=Object(ge.useRef)(null),y=Object(ge.useState)([]),E=Object(Qe.a)(y,2),I=(E[0],E[1]),k=Object(ge.useState)(!0),S=Object(Qe.a)(k,2),j=S[0],x=S[1],T=Object(ge.useRef)(),C=Object(ge.useRef)(),w=Object(ge.useState)(!1),A=Object(Qe.a)(w,2),_=A[0],U=A[1],B=Object(ge.useState)(e.name),R=Object(Qe.a)(B,2),N=R[0],L=R[1],D=Object(ge.useState)(!1),P=Object(Qe.a)(D,2),M=P[0],z=P[1];Object(ge.useEffect)(function(){var e=[];v.createLocalTracks({devices:["video","audio"],maxFps:30,facingMode:"user"}).then(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0)a.value.dispose()}catch(i){n=!0,r=i}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}).catch(function(e){console.log("try",e)}),v.mediaDevices.enumerateDevices(function(t){var n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;e.push({label:c.label,deviceId:c.deviceId,kind:c.kind})}}catch(m){r=!0,a=m}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}console.log("devicelist Start",e);var l=e.filter(function(e){return"videoinput"===e.kind});l.push({deviceId:"no_camera_selected",label:"Join without a camera!",kind:"videoinput"});var d=e.filter(function(e){return"audioinput"===e.kind});d.length<1&&d.push({deviceId:"no_microphone_detected",label:"You must connect a microphone to join!",kind:"audioinput"}),o(l),u(d),I(e),p(l[0].deviceId),g(d[0].deviceId)})},[]),Object(ge.useEffect)(function(){return v.mediaDevices.addEventListener(v.events.mediaDevices.DEVICE_LIST_CHANGED,F),function(){v.mediaDevices.removeEventListener(v.events.mediaDevices.DEVICE_LIST_CHANGED,F)}},[]);var F=function(){console.log("devicelistchanged");var e=[];v.mediaDevices.enumerateDevices(function(t){var n=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var c=i.value;e.push({label:c.label,deviceId:c.deviceId,kind:c.kind})}}catch(f){r=!0,a=f}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}var l=e.filter(function(e){return"videoinput"===e.kind});l.push({deviceId:"no_camera_selected",label:"Join without a camera!",kind:"placeholder"});var d=e.filter(function(e){return"audioinput"===e.kind});d.length<1&&d.push({deviceId:"no_microphone_detected",label:"You must connect a microphone to join!",kind:"mic_placeholder"}),o(l),u(d),I(e),(!l.find(function(e){return e.deviceId===m})||"no_camera_selected"==m&&l.length>1)&&p(l[0].deviceId),(!d.find(function(e){return e.deviceId===b})||"no_microphone_detected"==b&&d.length>1)&&g(d[0].deviceId)})},G=Object(ge.useRef)(0),V=Object(ge.useRef)(!1);Object(ge.useEffect)(function(){if(G.current<2||V.current)return G.current=G.current+1,void console.log("try try return");void 0==C.current&&""!=m&&("no_camera_selected"!=m?v.createLocalTracks({devices:["video"],cameraDeviceId:m,maxFps:30,facingMode:"user"}).then(function(e){C.current=e[0],e[0].attach(t.current),U(!0),C.current.detach(t.current),C.current.dispose(),C.current=void 0,v.createLocalTracks({devices:["video"],cameraDeviceId:m,maxFps:30,facingMode:"user"}).then(function(e){C.current=e[0],e[0].attach(t.current),U(!0)}).catch(function(){U(!1)})}).catch(function(){U(!1)}):U(!1)),void 0==T.current&&""!=b&&("no_microphone_detected"!=b?v.createLocalTracks({devices:["audio"],micDeviceId:b,maxFps:30,facingMode:"user"}).then(function(e){T.current=e[0],e[0].attach(O.current),z(!0),T.current.detach(O.current),T.current.dispose(),v.createLocalTracks({devices:["audio"],micDeviceId:b}).then(function(e){T.current=e[0],e[0].attach(O.current),z(!0)}).catch(function(){z(!1)})}).catch(function(){z(!1)}):z(!1)),C.current&&""!=m&&m!=C.current.deviceId&&("no_camera_selected"==m?(C.current.detach(t.current),C.current.dispose(),C.current=void 0,U(!1)):(C.current.detach(t.current),C.current.dispose(),C.current=void 0,v.createLocalTracks({devices:["video"],cameraDeviceId:m,maxFps:30,facingMode:"user"}).then(function(e){C.current=e[0],e[0].attach(t.current),U(!0)}).catch(function(){U(!1)}))),T.current&&""!=b&&b!=T.current.deviceId&&("no_microphone_detected"==b?(T.current.detach(O.current),T.current.dispose(),T.current=void 0,z(!1)):(T.current.detach(O.current),T.current.dispose(),T.current=void 0,v.createLocalTracks({devices:["audio"],micDeviceId:b}).then(function(e){T.current=e[0],e[0].attach(O.current),z(!0)}).catch(function(){z(!1)})))},[m,b]);var H=a.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}}),W=c.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}});Math.round(75);return ge.createElement(Ri.a,{open:e.open,onClose:e.onCancel,closeIcon:!0},ge.createElement(Ri.a.Header,null,"Join Meeting"),ge.createElement(Ri.a.Content,null,ge.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},ge.createElement(eh.a,null,ge.createElement(eh.a.Field,null,ge.createElement("label",null,"Camera"),ge.createElement(ag.a,{required:!0,value:m,options:H,onChange:function(e,t){return p(t.value)}})),ge.createElement(eh.a.Field,null,ge.createElement("label",null,"Microphone"),ge.createElement(ag.a,{required:!0,value:b,options:W,onChange:function(e,t){return g(t.value)}})),ge.createElement(Ni.a,{disabled:"no_microphone_detected"==b,children:j?"test microphone":"stop testing",onClick:function(){x(!j)},color:j?"facebook":"youtube"})),ge.createElement("div",null,ge.createElement("div",null,_&&ge.createElement("video",{autoPlay:!0,height:150,muted:!0,ref:t}),!_&&ge.createElement("p",{style:{height:150,width:150,textAlign:"center"}},ge.createElement("br",null),ge.createElement("br",null),ge.createElement("br",null),"No camera signal!",ge.createElement("br",null)),ge.createElement("audio",{autoPlay:!0,muted:j,ref:O})),ge.createElement("div",null,ge.createElement(eh.a,null,ge.createElement(eh.a.Field,null,ge.createElement("input",{type:"text",name:"Name",value:N,onChange:function(t){console.log("jitsitestfunction ",e.name),console.log("jitsitestfunction ",t),console.log("jitsitestfunction ",t.target),L(t.target.value),e.onNameChange(t.target.value)}}))))))),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:e.onCancel}),ge.createElement(Ni.a,{loading:e.loadingMeetingRoom,primary:!0,children:"Join",onClick:M?function(){e.loadingMeetingRoom||e.onDevicesSelected({audio:b,video:_?m:"no_camera_selected"})}:function(){alert("A microphone must be connected to join the video conference.")}})))}),Bv=null,Rv=0,Nv=function(){},Lv=null,Dv=null,Pv=null,Mv=null;!function(e){e.GetUserPositions="GetUserPositions",e.GetUserPositionsResponse="GetUserPositionsResponse",e.UserPositionChanged="UserPositionChanged",e.UserStatusChanged="UserStatusChanged",e.UserInitialInfo="UserInitialInfo",e.InitialiseScreenShareInfo="InitialiseScreenShareInfo"}(gv||(gv={}));var zv=function(){return Bv&&Bv.readyState===Bv.OPEN},Fv=function(){Mv&&window.clearTimeout(Mv),Mv=window.setTimeout(function(){Bv&&zv()&&(console.log("[vidu] Closing connection due to heartbeat timeout"),Bv.close())},31e3)},Gv=function(){(Bv=new WebSocket("wss://mephisto-video.inseciacloud.com:3001")).onopen=function(e){console.log("[vidu] heartbeat triggered on open"),Fv(),Rv=0},Bv.onclose=function(e){Mv&&(console.log("[vidu] heartbeat timeout cleared on close"),window.clearTimeout(Mv))},Bv.onmessage=Nv};var Vv,Hv={sendPositionUpdate:function(e,t,n,r){Bv&&zv()&&Bv.send(JSON.stringify({type:"UserPositionChanged",id:e,sessionId:t,left:n,top:r}))},sendStatusUpdate:function(e,t,n){Bv&&zv()&&Bv.send(JSON.stringify({type:"UserStatusChanged",id:e,sessionId:t,status:n}))},sendUserInitialInfo:function(e,t,n){Bv&&zv()&&Bv.send(JSON.stringify({type:"UserInitialInfo",id:e,sessionId:t,status:n}))},sendInitialiseScreenShareInfo:function(e,t,n){Bv&&zv()&&Bv.send(JSON.stringify({type:"InitialiseScreenShareInfo",id:e,sessionId:t,status:n}))},listenForUpdates:function(e,t,n){Lv=e,Dv=t,Nv=function(t){var r=JSON.parse(t.data);switch(r.type){case gv.GetUserPositionsResponse:console.log("[vidu] Got user positions from socket server: ",r),Fv(),Object.keys(r.users).forEach(function(t){if(e!==t){var a=r.users[t].position;n(t,a)}});break;case gv.UserPositionChanged:n(r.id,{left:r.left,top:r.top});break;case gv.UserStatusChanged:case gv.UserInitialInfo:case gv.InitialiseScreenShareInfo:n(r.id,r.status)}},Bv&&(Bv.onmessage=Nv,function e(){Bv&&zv()&&Lv&&Dv?Bv.send(JSON.stringify({type:gv.GetUserPositions,id:Lv,sessionId:Dv})):(Rv++,Bv&&Bv.close(),console.log("[vidu] trying to reconnect to socket. Attempt: "+Rv),Gv()),Pv=window.setTimeout(function(){e()},3e4)}())},stopListeningForPositionUpdates:function(){Pv&&window.clearTimeout(Pv),Lv=null,Dv=null}},Wv=(n(500),{startPositionAvatar:{left:0,top:0},startPositionMouse:{x:0,y:0},currentPositionMouse:{x:0,y:0}}),qv={"thumbs up":"green thumbs up thumbUp-indicator","thumbs down":"red thumbs down thumbDown-indicator",beer:"yellow beer beer-indicator"},Jv=Dn.throttle(function(e,t,n){return Hv.sendPositionUpdate(e,t,n.left,n.top)},66,{trailing:!0}),Yv=(window.JitsiMeetJS,function(e){var t=Object(ge.useRef)(null),n=Object(ge.useRef)(null),r=Object(ge.useState)(),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=Object(ge.useRef)(Wv),c=Object(ge.useState)(!1),u=Object(Qe.a)(c,2),l=u[0],d=u[1],m=function(t,n){if(s.current.currentPositionMouse.x=t,s.current.currentPositionMouse.y=n,e.onPositionChange){var r=e.onPositionChange(s.current);Jv(e.user.audioTrack.getParticipantId(),e.sessionId,r)}};Object(ge.useEffect)(function(){null!=e.user.videoTrack&&null!=e.user.audioTrack&&(e.user.videoTrack.attach(t.current),e.isLocalUser||e.user.audioTrack.attach(n.current))},[e.user.audioTrack,e.user.videoTrack]),Object(ge.useEffect)(function(){if(console.log("jitsivolume : volume changed => changes ",e.volume),t.current&&!e.isLocalUser){var r=e.volume*(e.isAnyMegaphoneActive?.7:1);e.user.megaphoneOn&&(console.log("Update_remote_user Megaphone on and Volume should be 1"),r=1),console.log("Update_remote_user Volume ",r),n.current.volume=r,0!==r||t.current.paused||(console.log("jitsipauseplay : pause ",t.current.paused,r,t.current),t.current.pause(),n.current.pause()),r>0&&t.current.paused&&(console.log("jitsipauseplay : play",t.current.paused,r,t.current),t.current.play(),n.current.play())}},[e.volume,e.user.megaphoneOn,e.isAnyMegaphoneActive]),Object(ge.useEffect)(function(){var t=function(){i(!1)},n=function(t){e.isLocalUser&&o&&m(t.clientX,t.clientY)},r=function(t){e.isLocalUser&&o&&m(t.touches[0].clientX,t.touches[0].clientY)};return document.addEventListener("mouseup",t),document.addEventListener("touchend",t),window.addEventListener("mouseup",t),document.addEventListener("mousemove",n),document.addEventListener("touchmove",r),function(){document.removeEventListener("mouseup",t),document.removeEventListener("touchend",t),window.removeEventListener("mouseup",t),document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",r)}});var p,f=(p=e.isLocalUser?150:50+(e.user.megaphoneOn?100:100*e.volume),l?2*p:p),h=Math.round(f/2),b=e.user.cameraOn&&(e.isLocalUser||e.volume>0||e.user.megaphoneOn),g=!e.isLocalUser&&0===e.volume&&!e.user.megaphoneOn;return ve.a.createElement("div",{style:{width:f,height:f,borderRadius:h,position:"absolute",left:e.user.position.left-f/2,top:e.user.position.top-f/2,pointerEvents:"auto",cursor:e.isLocalUser?"move":"default",zIndex:e.isLocalUser?10:3,WebkitTransform:"translateZ(0)"},onMouseDown:function(t){s.current.startPositionAvatar=e.user.position,s.current.startPositionMouse={x:t.clientX,y:t.clientY},i(!0)},onTouchStart:function(t){s.current.startPositionAvatar=e.user.position,s.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},i(!0)},onDoubleClick:function(){d(!l),console.log("focus toggled")}},ve.a.createElement("div",{style:Object(Ye.a)({width:f,height:f,borderRadius:h,overflow:"hidden",backgroundColor:"#9cc8f5",pointerEvents:"auto"},f>50?e.user.micOn?e.isSpeaking?{border:"5px solid #9cc8f5"}:{border:"5px solid #CCCCCC"}:{border:"5px solid #666666"}:{border:"5px solid #AAAAAA"},{WebkitTransform:"translateZ(0)",zIndex:e.isLocalUser?10:3})},ve.a.createElement("video",{autoPlay:!0,disablePictureInPicture:!0,ref:t,muted:e.isLocalUser,style:{width:f,height:f,objectFit:"cover",objectPosition:"center",pointerEvents:"auto",display:b?"block":"none",zIndex:e.isLocalUser?9:2}}),ve.a.createElement("audio",{autoPlay:!0,muted:e.isLocalUser,ref:n}),!b&&ve.a.createElement(yh.a,{src:e.user.avatar,avatar:!0,verticalAlign:"middle",style:{width:f,height:f,objectFit:"cover",objectPosition:"center",pointerEvents:"none",filter:g?"brightness(0.8)":"none"}})),ve.a.createElement("div",{className:"disable-selection",style:{position:"absolute",bottom:"-26px",left:0,width:"100%",textAlign:"center",fontSize:"16px",pointerEvents:"auto"}},e.user.name),ve.a.createElement("i",{className:"icon bullhorn megaphone-indicator"+(e.user.megaphoneOn?" active":"")}),ve.a.createElement("i",{className:"green icon hand paper handUp-indicator"+(e.user.handUpOn?" active":"")}),ve.a.createElement("i",{className:"icon "+qv[e.user.showIconName]+" "+(e.user.emojiOn?" active":"")}))}),Qv={startPositionAvatar:{left:0,top:0},startPositionMouse:{x:0,y:0},currentPositionMouse:{x:0,y:0}},Kv=function(e){var t=Object(ge.useRef)(null),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useRef)(Qv),s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=Object(ge.useState)(!1),m=Object(Qe.a)(d,2),p=m[0],f=m[1],h=Object(ge.useRef)(Qv),b=function(t,n){i.current.currentPositionMouse.x=t,i.current.currentPositionMouse.y=n,e.onPositionChange&&e.onPositionChange(i.current)},g=function(t,n){h.current.currentPositionMouse.x=t,h.current.currentPositionMouse.y=n,e.onScaleScreenShare&&e.onScaleScreenShare(h.current)};Object(ge.useEffect)(function(){null!=e.user.screenShareTrack&&(t.current.volume=0,e.user.screenShareTrack.attach(t.current))},[]),Object(ge.useEffect)(function(){var e=function(){o(!1),f(!1)},t=function(e){a&&b(e.clientX,e.clientY),p&&g(e.clientX,e.clientY)},n=function(e){a&&b(e.touches[0].clientX,e.touches[0].clientY),p&&g(e.touches[0].clientX,e.touches[0].clientY)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),window.addEventListener("mouseup",e),document.addEventListener("mousemove",t),document.addEventListener("touchmove",n),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),window.removeEventListener("mouseup",e),document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",n)}});return ve.a.createElement("div",{style:{height:e.user.height*(u?2:1),padding:5,boxSizing:"border-box",position:"absolute",left:e.user.position.left-e.user.height,top:e.user.position.top,pointerEvents:"auto",cursor:"move",zIndex:2,backgroundColor:"black",borderRadius:6},onMouseDown:function(t){i.current.startPositionAvatar=e.user.position,i.current.startPositionMouse={x:t.clientX,y:t.clientY},o(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){i.current.startPositionAvatar=e.user.position,i.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},o(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()},onDoubleClick:function(){l(!u)}},ve.a.createElement("video",{autoPlay:!0,disablePictureInPicture:!0,ref:t,muted:!0,style:{height:"100%",pointerEvents:"auto",display:"block",borderRadius:"3px"}}),ve.a.createElement("div",{style:{position:"absolute",bottom:"-5px",right:"-5px",width:"25px",height:"25px",pointerEvents:"auto",cursor:"se-resize"},onMouseDown:function(t){h.current.startPositionAvatar={left:1,top:e.user.height},h.current.startPositionMouse={x:t.clientX,y:t.clientY},f(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){h.current.startPositionAvatar=e.user.position,h.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},f(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()}}),ve.a.createElement("div",{style:{position:"absolute",bottom:"-5px",left:"-5px",width:"25px",height:"25px",pointerEvents:"auto",cursor:"sw-resize"},onMouseDown:function(t){h.current.startPositionAvatar={left:2,top:e.user.height},h.current.startPositionMouse={x:t.clientX,y:t.clientY},f(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){h.current.startPositionAvatar=e.user.position,h.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},f(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()}}),ve.a.createElement("div",{style:{position:"absolute",top:"-5px",left:"-5px",width:"25px",height:"25px",pointerEvents:"auto",cursor:"se-resize"},onMouseDown:function(t){h.current.startPositionAvatar={left:3,top:e.user.height},h.current.startPositionMouse={x:t.clientX,y:t.clientY},f(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){h.current.startPositionAvatar=e.user.position,h.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},f(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()}}),ve.a.createElement("div",{style:{position:"absolute",top:"-5px",right:"-5px",width:"25px",height:"25px",pointerEvents:"auto",cursor:"sw-resize"},onMouseDown:function(t){h.current.startPositionAvatar={left:4,top:e.user.height},h.current.startPositionMouse={x:t.clientX,y:t.clientY},f(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){h.current.startPositionAvatar=e.user.position,h.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},f(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()}}),ve.a.createElement("div",{className:"disable-selection",style:{position:"absolute",bottom:"-26px",left:0,width:"100%",textAlign:"center",fontSize:"16px",pointerEvents:"auto"}},e.originUser?e.originUser.name:""))},Zv=window.JitsiMeetJS,Xv=function(e){function t(e){var n;return Object(Be.a)(this,t),(n=Object(Ne.a)(this,Object(Le.a)(t).call(this,e))).connection=void 0,n.room=void 0,n.localTracks=void 0,n.screenShareConnection=void 0,n.screenShareRoom=void 0,n.screenShareTrack=null,n.screenShareFlag=!1,n.voiceIndicatorIsChanging=!1,n.confOptions={openBridgeChannel:!0,enableNoisyMicDetection:!0,enableNoAudioDetection:!0,p2p:{enabled:!1}},n.voiceActivationBuffer=.025,n.joinedWithoutCamera="no_camera_selected"===n.props.videoDevice,n.state={localUser:{id:n.props.id,name:n.props.name,avatar:n.props.avatar,position:n.props.initialPosition,isSpeaking:!1,showIconName:"",cameraOn:!n.joinedWithoutCamera,micOn:!0,megaphoneOn:!1,handUpOn:!1,emojiOn:!1},remoteUsers:[],remoteScreenShares:[],graphTranslate:{x:0,y:0},graphScale:1},n.componentDidMount=n.componentDidMount.bind(Object(sg.a)(Object(sg.a)(n))),n.componentDidUpdate=n.componentDidUpdate.bind(Object(sg.a)(Object(sg.a)(n))),n.componentWillUnmount=n.componentWillUnmount.bind(Object(sg.a)(Object(sg.a)(n))),n.onConnectionSuccess=n.onConnectionSuccess.bind(Object(sg.a)(Object(sg.a)(n))),n.onConnectionFailed=n.onConnectionFailed.bind(Object(sg.a)(Object(sg.a)(n))),n.onConnectionDisconnect=n.onConnectionDisconnect.bind(Object(sg.a)(Object(sg.a)(n))),n.onDeviceListChanged=n.onDeviceListChanged.bind(Object(sg.a)(Object(sg.a)(n))),n.onConferenceJoined=n.onConferenceJoined.bind(Object(sg.a)(Object(sg.a)(n))),n.updateIsSpeaking=n.updateIsSpeaking.bind(Object(sg.a)(Object(sg.a)(n))),n.onLocalTrack=n.onLocalTrack.bind(Object(sg.a)(Object(sg.a)(n))),n.onRoomTrackAdded=n.onRoomTrackAdded.bind(Object(sg.a)(Object(sg.a)(n))),n.onRoomTrackRemoved=n.onRoomTrackRemoved.bind(Object(sg.a)(Object(sg.a)(n))),n.isAnyMegaphoneActive=n.isAnyMegaphoneActive.bind(Object(sg.a)(Object(sg.a)(n))),n.onUserJoined=n.onUserJoined.bind(Object(sg.a)(Object(sg.a)(n))),n.onUserLeft=n.onUserLeft.bind(Object(sg.a)(Object(sg.a)(n))),n.updateRemoteUser=n.updateRemoteUser.bind(Object(sg.a)(Object(sg.a)(n))),n.handleLocalUserPositionChanged=n.handleLocalUserPositionChanged.bind(Object(sg.a)(Object(sg.a)(n))),n.handleScreenSharePositionChanged=n.handleScreenSharePositionChanged.bind(Object(sg.a)(Object(sg.a)(n))),n.handleScreenShareScalingChanged=n.handleScreenShareScalingChanged.bind(Object(sg.a)(Object(sg.a)(n))),n.shareScreen=n.shareScreen.bind(Object(sg.a)(Object(sg.a)(n))),n.shareScreenConnectionEstablished=n.shareScreenConnectionEstablished.bind(Object(sg.a)(Object(sg.a)(n))),n.stopScreenShare=n.stopScreenShare.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleScreenShare=n.toggleScreenShare.bind(Object(sg.a)(Object(sg.a)(n))),n.renderRemoteTracks=n.renderRemoteTracks.bind(Object(sg.a)(Object(sg.a)(n))),n.renderRemoteScreenShares=n.renderRemoteScreenShares.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleCamera=n.toggleCamera.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleMic=n.toggleMic.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleMegaphone=n.toggleMegaphone.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleHandUp=n.toggleHandUp.bind(Object(sg.a)(Object(sg.a)(n))),n.toggleEmoji=n.toggleEmoji.bind(Object(sg.a)(Object(sg.a)(n))),n.render=n.render.bind(Object(sg.a)(Object(sg.a)(n))),n.testfunction=n.testfunction.bind(Object(sg.a)(Object(sg.a)(n))),n.testfunction2=n.testfunction2.bind(Object(sg.a)(Object(sg.a)(n))),n}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t,n,r,a,o,i,s=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Zv.init({flags:{sendMultipleVideoStreams:!0,sourceNameSignaling:!0}}),console.log("jitsitesttest : ",Zv),console.log("jitsitest : MOUNTED"),console.log("jitsitestvariables : id",this.state.localUser.id,this.props.id,this.props.sessionId),console.log("jitsitest : MOUNTED"),"no_camera_selected"!==this.props.videoDevice){e.next=11;break}return e.next=8,Zv.createLocalTracks({devices:["audio"],micDeviceId:this.props.audioDevice});case 8:this.localTracks=e.sent,e.next=14;break;case 11:return e.next=13,Zv.createLocalTracks({devices:["audio","video"],cameraDeviceId:this.props.videoDevice,micDeviceId:this.props.audioDevice});case 13:this.localTracks=e.sent;case 14:return t={hosts:{domain:"jitsi-video.inseciacloud.com",muc:"muc.jitsi-video.inseciacloud.com"},bosh:"https://bosh.jitsi-video.inseciacloud.com:5280/http-bind"},this.connection=new Zv.JitsiConnection(null,null,t),console.log("jitsitest : ConectionSuccess",this.connection),this.connection.addEventListener(Zv.events.connection.CONNECTION_ESTABLISHED,this.onConnectionSuccess),this.connection.addEventListener(Zv.events.connection.CONNECTION_FAILED,this.onConnectionFailed),this.connection.addEventListener(Zv.events.connection.CONNECTION_DISCONNECTED,this.onConnectionDisconnect),Zv.mediaDevices.addEventListener(Zv.events.mediaDevices.DEVICE_LIST_CHANGED,this.onDeviceListChanged),this.connection.connect(),this.onLocalTrack(),console.log("JitsiPosition : Start before websocket listen"),Hv.listenForUpdates(this.props.id,this.props.sessionId,this.updateRemoteUser),console.log("JitsiPosition : Start after"),n=this.props.graph.getCurrentScale(),r={left:-1*this.props.graph.getCurrentTranslate().x+this.props.initialPosition.left/n,top:-1*this.props.graph.getCurrentTranslate().y+this.props.initialPosition.top/n},console.log("jitsigraph local user",r,n),this.setState({localUser:Object(Ye.a)({},this.state.localUser,{position:r})}),console.log("jitsigraph local user",this.props.graph.getCurrentScale(),this.props.graph.getCurrentTranslate()),a=function(e){s.setState({graphTranslate:{x:e.x,y:e.y}})},o=function(e,t){s.setState({graphScale:e,graphTranslate:t})},this.props.graph&&(i=this.props.graph.getCurrentTranslate(),this.setState({graphTranslate:{x:i.x,y:i.y},graphScale:this.props.graph.getCurrentScale()}),this.props.graph.onPanning(a),this.props.graph.onZoom(o)),e.abrupt("return",function(){s.props.graph&&(s.props.graph.offPanning(a),s.props.graph.offZoom(o))});case 35:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;if(console.log("number of componentDidUpdate",this.props.graph!==e.graph),this.props.graph!==e.graph){var n=this.props.graph.getCurrentScale(),r={left:-1*this.props.graph.getCurrentTranslate().x+this.props.initialPosition.left/n,top:-1*this.props.graph.getCurrentTranslate().y+this.props.initialPosition.top/n};console.log("jitsigraph local user",r,n),this.setState({localUser:Object(Ye.a)({},this.state.localUser,{position:r})})}if(this.props.graph!==e.graph){console.log("jitsigraph local user",this.props.graph.getCurrentScale(),this.props.graph.getCurrentTranslate());var a=function(e){t.setState({graphTranslate:{x:e.x,y:e.y}})},o=function(e,n){t.setState({graphScale:e,graphTranslate:n})};if(this.props.graph){var i=this.props.graph.getCurrentTranslate();this.setState({graphTranslate:{x:i.x,y:i.y},graphScale:this.props.graph.getCurrentScale()}),this.props.graph.onPanning(a),this.props.graph.onZoom(o)}return function(){t.props.graph&&(t.props.graph.offPanning(a),t.props.graph.offZoom(o))}}}},{key:"componentWillUnmount",value:function(){Hv.stopListeningForPositionUpdates(),this.state.localUser&&this.state.localUser.audioTrack&&this.state.localUser.audioTrack.dispose(),this.state.localUser&&this.state.localUser.videoTrack&&this.state.localUser.videoTrack.dispose(),this.state.localScreenShare&&this.state.localScreenShare.screenShareTrack&&this.state.localScreenShare.screenShareTrack.dispose(),this.room&&(this.room.off(Zv.events.conference.CONFERENCE_JOINED,this.onConferenceJoined),this.room.off(Zv.events.conference.TRACK_ADDED,this.onRoomTrackAdded),this.room.off(Zv.events.conference.TRACK_REMOVED,this.onRoomTrackRemoved),this.room.leave()),this.screenShareRoom&&(this.screenShareRoom.off(Zv.events.conference.CONFERENCE_JOINED,function(){}),this.screenShareRoom.off(Zv.events.conference.CONFERENCE_FAILED,this.screenConferenceEnded),this.screenShareRoom.off(Zv.events.conference.CONFERENCE_LEFT,this.screenConferenceEnded),this.screenShareRoom.leave()),this.connection&&(this.connection.removeEventListener(Zv.events.connection.CONNECTION_ESTABLISHED,this.onConnectionSuccess),this.connection.removeEventListener(Zv.events.connection.CONNECTION_FAILED,this.onConnectionFailed),this.connection.removeEventListener(Zv.events.connection.CONNECTION_DISCONNECTED,this.onConnectionDisconnect),this.connection.disconnect()),Zv.mediaDevices.removeEventListener(Zv.events.mediaDevices.DEVICE_LIST_CHANGED,this.onDeviceListChanged),this.screenConferenceEnded()}},{key:"onConnectionSuccess",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("jitsitest : ConectionSuccess",this.connection),console.log(this.connection),e.next=4,this.connection.initJitsiConference("swarply_"+this.props.sessionId,this.confOptions);case 4:this.room=e.sent,console.log("jitsisession ID: swarply_",this.props.sessionId),this.room.on(Zv.events.conference.CONFERENCE_JOINED,this.onConferenceJoined),this.room.on(Zv.events.conference.TRACK_ADDED,this.onRoomTrackAdded),this.room.on(Zv.events.conference.TRACK_REMOVED,this.onRoomTrackRemoved),this.room.on(Zv.events.conference.USER_JOINED,this.onUserJoined),this.room.on(Zv.events.conference.USER_LEFT,this.onUserLeft),this.room.join();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onConnectionFailed",value:function(){console.log("jitsitest : ConnectionFailed")}},{key:"onConnectionDisconnect",value:function(){console.log("jitsitest : ConnectionDisconnect")}},{key:"onDeviceListChanged",value:function(){console.log("jitsitest : DevicelistChanged")}},{key:"onConferenceJoined",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("jitsitest : ConferenzJoined"),this.localTracks.forEach(function(e){console.log("jitsitest : ConferenzAddTrackToRoom ",e),console.log("jitsiscreenshare : ConferenzAddTrackToRoom ",e),t.room.addTrack(e)}),this.state.localUser.audioTrack&&this.state.localUser.audioTrack.on(Zv.events.track.TRACK_AUDIO_LEVEL_CHANGED,this.updateIsSpeaking),e.next=5,new Promise(function(e){return setTimeout(e,500)});case 5:return Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar}),Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),e.next=9,new Promise(function(e){return setTimeout(e,500)});case 9:return Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar}),e.next=13,new Promise(function(e){return setTimeout(e,500)});case 13:Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateIsSpeaking",value:function(e){var t=this;if(console.log("VADtest : iterate on talk"),this.state.localUser.isSpeaking&&e>this.voiceActivationBuffer)clearTimeout(this.props.timeoutRefIsSpeaking.current),this.voiceIndicatorIsChanging=!1;else if(!this.state.localUser.isSpeaking&&e<this.voiceActivationBuffer)clearTimeout(this.props.timeoutRefIsSpeaking.current),this.voiceIndicatorIsChanging=!1;else if(this.state.localUser.isSpeaking&&e<this.voiceActivationBuffer){if(this.voiceIndicatorIsChanging)return void console.log("VADtest : blocked");clearTimeout(this.props.timeoutRefIsSpeaking.current),this.voiceIndicatorIsChanging=!0,this.props.timeoutRefIsSpeaking.current=window.setTimeout(function(){clearTimeout(t.props.timeoutRefIsSpeaking.current),t.setState({localUser:Object(Ye.a)({},t.state.localUser,{isSpeaking:!1})}),Hv.sendStatusUpdate(t.state.localUser.audioTrack.getParticipantId(),t.props.sessionId,{cameraOn:t.state.localUser.cameraOn,micOn:t.state.localUser.micOn,megaphoneOn:t.state.localUser.megaphoneOn,handUpOn:t.state.localUser.handUpOn,emojiOn:t.state.localUser.emojiOn,showIconName:t.state.localUser.showIconName,isSpeaking:!1}),t.voiceIndicatorIsChanging=!1},300)}else if(!this.state.localUser.isSpeaking&&e>this.voiceActivationBuffer){if(this.voiceIndicatorIsChanging)return void console.log("VADtest : blocked");clearTimeout(this.props.timeoutRefIsSpeaking.current),this.voiceIndicatorIsChanging=!0,this.props.timeoutRefIsSpeaking.current=window.setTimeout(function(){clearTimeout(t.props.timeoutRefIsSpeaking.current),t.setState({localUser:Object(Ye.a)({},t.state.localUser,{isSpeaking:!0})}),Hv.sendStatusUpdate(t.state.localUser.audioTrack.getParticipantId(),t.props.sessionId,{cameraOn:t.state.localUser.cameraOn,micOn:t.state.localUser.micOn,megaphoneOn:t.state.localUser.megaphoneOn,handUpOn:t.state.localUser.handUpOn,emojiOn:t.state.localUser.emojiOn,showIconName:t.state.localUser.showIconName,isSpeaking:!0}),t.voiceIndicatorIsChanging=!1},100)}}},{key:"onLocalTrack",value:function(){var e=this;console.log("jitsitest : LocalTracks",this.localTracks),this.localTracks&&this.localTracks.forEach(function(t){"video"===t.type?"camera"===t.videoType&&e.setState({localUser:Object(Ye.a)({},e.state.localUser,{videoTrack:t})}):"audio"===t.type&&e.setState({localUser:Object(Ye.a)({},e.state.localUser,{audioTrack:t})})})}},{key:"onRoomTrackAdded",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){var n,r,a,o,i,s,c,u,l,d,m,p;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("jitsiscreenshare : Track: ",t),console.log("screenshareuser : onRoomTrackAdded",t.isLocal(),this.room.getLocalTracks().includes(t),t),this.screenShareRoom&&console.log("screenshareuser : onRoomTrackAdded",t.isLocal(),this.screenShareRoom.getLocalTracks()),!0!==t.isLocal()){e.next=5;break}return e.abrupt("return");case 5:if(!this.screenShareRoom||this.screenShareRoom.myUserId()!==t.getParticipantId()){e.next=7;break}return e.abrupt("return");case 7:console.log("jitsitestfunction : id own screen share ",!!this.screenShareRoom&&this.screenShareRoom.myUserId()===t.getParticipantId()),console.log("jitsitest : RemoteTracks added ConferenzTrackAdded",t.getType(),t.videoType,t),console.log("remoteUsers : add track"),"desktop"!=t.getUsageLabel()?(n=this.state.remoteUsers.find(function(e){return e.id===t.getParticipantId()}))?(r=this.state.remoteUsers.indexOf(n),a=Object(Xa.a)(this.state.remoteUsers),"audio"===t.getType()?(o=Object(Ye.a)({},a[r],{audioTrack:t}),a[r]=o,this.setState({remoteUsers:a}),console.log("JitsiUser : ",a)):"video"===t.getType()?"default"===t.getUsageLabel()?(i=Object(Ye.a)({},a[r],{videoTrack:t}),a[r]=i,this.setState({remoteUsers:a}),console.log("JitsiUser : ",a)):"desktop"===t.getUsageLabel()?(s=Object(Ye.a)({},a[r],{screenShareTrack:t}),a[r]=s,this.setState({remoteUsers:a}),console.log("JitsiUser : ",a)):console.log("jitsitest: ERROR: Unhandled VideoType on onRoomTrackAdded"):console.log("jitsitest: ERROR: trackType undefined")):(c=this.props.initialPosition.left,u=this.props.initialPosition.top,"audio"===t.getType()?this.setState({remoteUsers:[].concat(Object(Xa.a)(this.state.remoteUsers),[{id:t.getParticipantId(),name:this.props.name,avatar:this.props.avatar,position:{left:c,top:u},isSpeaking:!1,showIconName:"",audioTrack:t,screenShareTrack:null,cameraOn:!0,micOn:!0,megaphoneOn:!1,handUpOn:!1,emojiOn:!1}])}):"video"===t.getType()?"default"===t.getUsageLabel()?this.setState({remoteUsers:[].concat(Object(Xa.a)(this.state.remoteUsers),[{id:t.getParticipantId(),name:this.props.name,avatar:this.props.avatar,position:{left:c,top:u},isSpeaking:!1,showIconName:"",videoTrack:t,screenShareTrack:null,cameraOn:!0,micOn:!0,megaphoneOn:!1,handUpOn:!1,emojiOn:!1}])}):"desktop"===t.getUsageLabel()&&this.setState({remoteUsers:[].concat(Object(Xa.a)(this.state.remoteUsers),[{id:t.getParticipantId(),name:this.props.name,avatar:this.props.avatar,position:{left:c,top:u},showIconName:"",screenShareTrack:t,cameraOn:!0,micOn:!0,megaphoneOn:!1,handUpOn:!1,emojiOn:!1}])}):console.log("jitsitest : Error track undefined ")):(l=this.state.remoteScreenShares.find(function(e){return e.id===t.getParticipantId()}))?(d=this.state.remoteScreenShares.indexOf(l),m=Object(Xa.a)(this.state.remoteScreenShares),p=Object(Ye.a)({},m[d],{screenShareTrack:t}),m[d]=p,this.setState({remoteScreenShares:m}),console.log("JitsiScreenShares : ",m)):this.setState({remoteScreenShares:[].concat(Object(Xa.a)(this.state.remoteScreenShares),[{id:t.getParticipantId(),originId:null,position:{left:0,top:0},screenShareTrack:t,height:360}])}),console.log("jitsitest : remoteUsers:",this.state.remoteUsers);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onRoomTrackRemoved",value:function(e){if(!0!==e.isLocal())if(console.log("remoteUsers : remove track"),"desktop"!=e.getUsageLabel()){var t=this.state.remoteUsers.find(function(t){return t.id===e.getParticipantId()});if(t){var n=this.state.remoteUsers.indexOf(t),r=Object(Xa.a)(this.state.remoteUsers);if("audio"===e.getType()){var a=Object(Ye.a)({},r[n],{audioTrack:null});r[n]=a,this.setState({remoteUsers:r}),console.log("JitsiUser : ",r)}else if("video"===e.getType())if("default"===e.getUsageLabel()){var o=Object(Ye.a)({},r[n],{videoTrack:null});r[n]=o,this.setState({remoteUsers:r}),console.log("JitsiUser : ",r)}else console.log("jitsitest: ERROR: Unhandled VideoType on onRoomTrackAdded");else console.log("jitsitest: ERROR: trackType undefined")}else console.log("jitsitest: ERROR: no user with participantId of track found")}else{var i=this.state.remoteScreenShares.find(function(t){return t.id===e.getParticipantId()});if(console.log("Error test :","desktop"===e.getUsageLabel(),i,this.state.remoteScreenShares,e),"desktop"===e.getUsageLabel()&&i){var s=this.state.remoteScreenShares.indexOf(i),c=Object(Xa.a)(this.state.remoteScreenShares),u=Object(Ye.a)({},c[s],{screenShareTrack:null});c[s]=u,this.setState({remoteScreenShares:c}),console.log("JitsiScreenShares : ",c)}else console.log("jitsitest: ERROR: trackType undefined")}else console.log("jitsitest : OnRoomTrackRemoved - local Track")}},{key:"onUserJoined",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,500)});case 2:return Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking}),this.screenShareRoom&&Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}}),e.next=8,new Promise(function(e){return setTimeout(e,500)});case 8:return Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking}),this.screenShareRoom&&Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}}),e.next=14,new Promise(function(e){return setTimeout(e,500)});case 14:Hv.sendPositionUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,this.state.localUser.position.left,this.state.localUser.position.top),Hv.sendUserInitialInfo(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{name:this.state.localUser.name,avatar:this.state.localUser.avatar}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking}),this.screenShareRoom&&Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onUserLeft",value:function(e){this.state.remoteUsers.find(function(t){return t.id===e})&&this.setState({remoteUsers:this.state.remoteUsers.filter(function(t){return t.id!=e})}),this.state.remoteScreenShares.find(function(t){return t.originId===e})&&this.setState({remoteScreenShares:this.state.remoteScreenShares.filter(function(t){return t.originId!=e})}),this.state.remoteScreenShares.find(function(t){return t.id===e})&&this.setState({remoteScreenShares:this.state.remoteScreenShares.filter(function(t){return t.id!=e})})}},{key:"isAnyMegaphoneActive",value:function(){return this.state.localUser&&this.state.localUser.megaphoneOn||void 0!=this.state.remoteUsers.find(function(e){return e.megaphoneOn})}},{key:"updateRemoteUser",value:function(e,t){t.hasOwnProperty("left")?this.updateRemoteUserPosition(e,t):t.hasOwnProperty("micOn")?this.updateRemoteUserStatus(e,t):t.hasOwnProperty("name")?this.initialiseUserInfo(e,t):t.hasOwnProperty("originId")&&this.initialiseScreenShareInfo(e,t)}},{key:"updateRemoteUserPosition",value:function(e,t){var n=this.state.remoteUsers.find(function(t){return t.id===e});if(n){var r=this.state.remoteUsers.indexOf(n),a=Object(Xa.a)(this.state.remoteUsers),o=Object(Ye.a)({},a[r],{position:t});a[r]=o,this.setState({remoteUsers:a})}}},{key:"updateRemoteUserStatus",value:function(e,t){var n=this.state.remoteUsers.find(function(t){return t.id===e});if(n){var r=this.state.remoteUsers.indexOf(n),a=Object(Xa.a)(this.state.remoteUsers),o=Object(Ye.a)({},a[r],{micOn:t.micOn,megaphoneOn:t.megaphoneOn,cameraOn:t.cameraOn,handUpOn:t.handUpOn,emojiOn:t.emojiOn,showIconName:t.showIconName,isSpeaking:t.isSpeaking});a[r]=o,this.setState({remoteUsers:a})}}},{key:"initialiseUserInfo",value:function(e,t){var n=this.state.remoteUsers.find(function(t){return t.id===e});if(n){var r=this.state.remoteUsers.indexOf(n),a=Object(Xa.a)(this.state.remoteUsers),o=Object(Ye.a)({},a[r],{name:t.name,avatar:t.avatar});a[r]=o,this.setState({remoteUsers:a})}}},{key:"initialiseScreenShareInfo",value:function(e,t){var n=this.state.remoteScreenShares.find(function(t){return t.id===e});if(n&&null==n.originId){var r=this.state.remoteScreenShares.indexOf(n),a=Object(Xa.a)(this.state.remoteScreenShares),o=Object(Ye.a)({},a[r],{originId:t.originId,position:t.position});a[r]=o,this.setState({remoteScreenShares:a})}}},{key:"handleLocalUserPositionChanged",value:function(e){var t=this.props.graph.getCurrentScale(),n=e.currentPositionMouse.x-e.startPositionMouse.x,r=e.currentPositionMouse.y-e.startPositionMouse.y,a={left:e.startPositionAvatar.left+n/t,top:e.startPositionAvatar.top+r/t};return this.state.localUser&&this.setState({localUser:Object(Ye.a)({},this.state.localUser,{position:a})}),a}},{key:"handleScreenSharePositionChanged",value:function(e,t){var n=this.props.graph.getCurrentScale(),r=e.currentPositionMouse.x-e.startPositionMouse.x,a=e.currentPositionMouse.y-e.startPositionMouse.y,o={left:e.startPositionAvatar.left+r/n,top:e.startPositionAvatar.top+a/n};if(!t&&this.state.localScreenShare)return this.setState({localScreenShare:Object(Ye.a)({},this.state.localScreenShare,{position:o})}),o;if(this.state.remoteScreenShares){var i=this.state.remoteScreenShares.find(function(e){return e.id===t});if(i){var s=this.state.remoteScreenShares.indexOf(i),c=Object(Xa.a)(this.state.remoteScreenShares),u=Object(Ye.a)({},c[s],{position:o});c[s]=u,this.setState({remoteScreenShares:c})}}}},{key:"handleScreenShareScalingChanged",value:function(e,t){var n=this.props.graph.getCurrentScale(),r=e.currentPositionMouse.x-e.startPositionMouse.x,a=e.currentPositionMouse.y-e.startPositionMouse.y,o=0;switch(e.startPositionAvatar.left){case 1:o=Math.round(e.startPositionAvatar.top+a/n+r/n*.56);break;case 2:o=Math.round(e.startPositionAvatar.top+a/n-r/n*.56);break;case 3:o=Math.round(e.startPositionAvatar.top-a/n-r/n*.56);break;case 4:o=Math.round(e.startPositionAvatar.top-a/n+r/n*.56);break;default:return}if(!t&&this.state.localScreenShare)return this.setState({localScreenShare:Object(Ye.a)({},this.state.localScreenShare,{height:o>100?o<1e3?o:1e3:100})}),console.log("scalingtest : ",this.state.localScreenShare),{left:0,top:0};if(this.state.remoteScreenShares){var i=this.state.remoteScreenShares.find(function(e){return e.id===t});if(i){var s=this.state.remoteScreenShares.indexOf(i),c=Object(Xa.a)(this.state.remoteScreenShares),u=Object(Ye.a)({},c[s],{height:o>100?o<1e3?o:1e3:100});c[s]=u,this.setState({remoteScreenShares:c})}}}},{key:"shareScreen",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t,n;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.screenShareFlag){e.next=4;break}this.screenShareFlag=!0,e.next=5;break;case 4:return e.abrupt("return");case 5:return t=[],e.prev=6,e.next=9,Zv.createLocalTracks({devices:["desktop"]});case 9:t=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(6),console.log("Screenshare selcet Screen GUM canceld / error ",e.t0),this.screenShareFlag=!1,e.abrupt("return");case 17:return this.screenShareTrack=t[0],console.log("ScreenShareUser : Track created ",this.screenShareTrack),n={hosts:{domain:"jitsi-video.inseciacloud.com",muc:"muc.jitsi-video.inseciacloud.com"},bosh:"https://bosh.jitsi-video.inseciacloud.com:5280/http-bind"},e.next=22,new Zv.JitsiConnection(null,null,n);case 22:this.screenShareConnection=e.sent,this.screenShareConnection.addEventListener(Zv.events.connection.CONNECTION_ESTABLISHED,this.shareScreenConnectionEstablished),this.screenShareConnection.connect();case 25:case"end":return e.stop()}},e,this,[[6,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"shareScreenConnectionEstablished",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("ScreenShareUser : connection connected ",this.screenShareTrack),e.next=3,this.screenShareConnection.initJitsiConference("swarply_"+this.props.sessionId,this.confOptions);case 3:this.screenShareRoom=e.sent,console.log("ScreenShareUser : room ",this.screenShareRoom),this.screenShareRoom.on(Zv.events.conference.CONFERENCE_JOINED,function(){console.log("ScreenShareUser : onJoin session with ScreenShare user "),t.screenShareRoom.addTrack(t.screenShareTrack),t.setState({localScreenShare:{id:"screen_"+t.props.id,originId:t.room.myUserId(),screenShareTrack:t.screenShareTrack,position:{left:t.state.localUser.position.left,top:t.state.localUser.position.top+50},height:360}}),t.screenShareFlag=!1,t.sendScreenShareInfosToWebSocket()}),this.screenShareRoom.on(Zv.events.conference.CONFERENCE_FAILED,this.screenConferenceEnded),this.screenShareRoom.on(Zv.events.conference.CONFERENCE_LEFT,this.screenConferenceEnded),this.screenShareRoom.join();case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sendScreenShareInfosToWebSocket",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){return setTimeout(e,500)});case 2:return Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}}),e.next=5,new Promise(function(e){return setTimeout(e,300)});case 5:return Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}}),e.next=8,new Promise(function(e){return setTimeout(e,300)});case 8:Hv.sendInitialiseScreenShareInfo(this.screenShareRoom.myUserId(),this.props.sessionId,{originId:this.room.myUserId(),position:{left:this.state.localUser.position.left,top:this.state.localUser.position.top}});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"screenConferenceEnded",value:function(){this.state.localScreenShare&&this.state.localScreenShare.screenShareTrack&&this.state.localScreenShare.screenShareTrack.dispose(),this.screenShareRoom&&this.screenShareRoom.leave(),this.setState({localScreenShare:null}),this.screenShareFlag=!1}},{key:"stopScreenShare",value:function(){this.screenShareFlag||(this.screenShareFlag=!0,this.screenConferenceEnded())}},{key:"toggleScreenShare",value:function(){console.log("ScreenShareUser : boolean ",this.screenShareFlag),this.state.localScreenShare?this.stopScreenShare():this.shareScreen()}},{key:"toggleCamera",value:function(){if(this.state.localUser&&this.state.localUser.videoTrack&&!this.joinedWithoutCamera){var e=!this.state.localUser.cameraOn;e?this.state.localUser.videoTrack.unmute():this.state.localUser.videoTrack.mute(),this.setState({localUser:Object(Ye.a)({},this.state.localUser,{cameraOn:e})}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:e,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking})}}},{key:"toggleMic",value:function(){if(this.state.localUser&&this.state.localUser.audioTrack){var e=this.state.localUser.audioTrack.isMuted();e?this.state.localUser.audioTrack.unmute():this.state.localUser.audioTrack.mute(),this.setState({localUser:Object(Ye.a)({},this.state.localUser,{micOn:e})}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:e,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking})}}},{key:"toggleMegaphone",value:function(){if(this.state.localUser){var e=!this.state.localUser.megaphoneOn;this.setState({localUser:Object(Ye.a)({},this.state.localUser,{megaphoneOn:e})}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:e,handUpOn:this.state.localUser.handUpOn,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking})}}},{key:"toggleHandUp",value:function(){if(this.state.localUser){var e=!this.state.localUser.handUpOn;this.setState({localUser:Object(Ye.a)({},this.state.localUser,{handUpOn:e})}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:e,emojiOn:this.state.localUser.emojiOn,showIconName:this.state.localUser.showIconName,isSpeaking:this.state.localUser.isSpeaking})}}},{key:"toggleEmoji",value:function(e){var t=this;if(this.state.localUser){var n=""===this.state.localUser.showIconName?e:"",r=!this.state.localUser.emojiOn;this.setState({localUser:Object(Ye.a)({},this.state.localUser,{emojiOn:r,showIconName:n})}),Hv.sendStatusUpdate(this.state.localUser.audioTrack.getParticipantId(),this.props.sessionId,{cameraOn:this.state.localUser.cameraOn,micOn:this.state.localUser.micOn,megaphoneOn:this.state.localUser.megaphoneOn,handUpOn:this.state.localUser.handUpOn,emojiOn:r,showIconName:e,isSpeaking:this.state.localUser.isSpeaking}),clearTimeout(this.props.timeoutRefEmoji.current),this.props.timeoutRefEmoji.current=window.setTimeout(function(){t.setState({localUser:Object(Ye.a)({},t.state.localUser,{emojiOn:!1,showIconName:""})}),Hv.sendStatusUpdate(t.state.localUser.audioTrack.getParticipantId(),t.props.sessionId,{cameraOn:t.state.localUser.cameraOn,micOn:t.state.localUser.micOn,megaphoneOn:t.state.localUser.megaphoneOn,handUpOn:t.state.localUser.handUpOn,emojiOn:!1,showIconName:"",isSpeaking:t.state.localUser.isSpeaking})},3e3)}}},{key:"renderRemoteTracks",value:function(){var e=this;return console.log("jitsitestVariables : ",this.state.localUser,this.props.id,this.props.sessionId,this.state.remoteUsers),this.state.remoteUsers.map(function(t){return ve.a.createElement("div",{key:"videoAvatar_"+t.id},ve.a.createElement(Yv,{key:t.id,user:t,isLocalUser:!1,volume:e.state.localUser?Math.max(Math.min((700-Math.sqrt(Math.pow(t.position.top-e.state.localUser.position.top,2)+Math.pow(t.position.left-e.state.localUser.position.left,2)))/500,1),0):0,sessionId:e.props.sessionId,isAnyMegaphoneActive:e.isAnyMegaphoneActive(),isSpeaking:t.isSpeaking}))})}},{key:"renderRemoteScreenShares",value:function(){var e=this;return this.state.remoteScreenShares.filter(function(e){return null!=e.screenShareTrack&&void 0!=e.screenShareTrack}).map(function(t){return ve.a.createElement("div",null,ve.a.createElement(Kv,{user:t,originUser:e.state.remoteUsers.find(function(e){return e.id==t.originId}),volume:e.state.localUser?Math.max(Math.min((1400-Math.sqrt(Math.pow(t.position.top-e.state.localUser.position.top,2)+Math.pow(t.position.left-e.state.localUser.position.left,2)))/500,1),0):0,sessionId:e.props.sessionId,onPositionChange:function(n){return e.handleScreenSharePositionChanged(n,t.id)},onScaleScreenShare:function(n){return e.handleScreenShareScalingChanged(n,t.id)}}))})}},{key:"testfunction",value:function(){console.log("testfunction \n\n\n"),this.state.remoteScreenShares.forEach(function(e){console.log("remoteuser testfunction: ",e)}),console.log("localuser state testfunction: ",this.state.localUser),console.log("localuser room testfunction: ",this.room.getLocalTracks()),console.log("remoteusers via room testfunction, r, s :",this.room.getParticipants(),this.state.remoteUsers,this.state.remoteScreenShares),console.log("ScreenShareUser testfunction :",this.state.remoteScreenShares)}},{key:"testfunction2",value:function(){console.log("audio event triggert")}},{key:"render",value:function(){var e=this;return console.log("jitsirender : test "),ve.a.createElement("div",{className:"diagram-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},ve.a.createElement("div",{style:{transform:"scale(".concat(this.state.graphScale,") translate(").concat(this.state.graphTranslate.x,"px, ").concat(this.state.graphTranslate.y,"px)"),transformOrigin:"0 0"}},ve.a.createElement("div",null,ve.a.createElement(Yv,{key:this.state.localUser.id,user:this.state.localUser,isLocalUser:!0,volume:0,sessionId:this.props.sessionId,onPositionChange:this.handleLocalUserPositionChanged,isAnyMegaphoneActive:this.isAnyMegaphoneActive(),isSpeaking:this.state.localUser.isSpeaking}),this.renderRemoteTracks()),ve.a.createElement("div",null,this.state.localScreenShare&&ve.a.createElement(Kv,{user:this.state.localScreenShare,originUser:this.state.localUser,volume:1,sessionId:this.props.sessionId,onPositionChange:this.handleScreenSharePositionChanged,onScaleScreenShare:this.handleScreenShareScalingChanged}),this.renderRemoteScreenShares())),ve.a.createElement("button",{onClick:this.toggleCamera,style:{position:"absolute",bottom:20,left:this.props.sidebar.width+20+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:this.state.localUser.cameraOn?"video icon":"icon-fas-video-slash-solid",style:this.state.localUser.cameraOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:this.toggleMic,style:{position:"absolute",bottom:20,left:this.props.sidebar.width+70+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:this.state.localUser.micOn?"icon microphone":"icon microphone slash",style:this.state.localUser.micOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:this.toggleMegaphone,style:{position:"absolute",bottom:20,left:this.props.sidebar.width+120+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon bullhorn",style:this.state.localUser.megaphoneOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:this.toggleScreenShare,style:{position:"absolute",bottom:20,left:this.props.sidebar.width+170+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon desktop",style:this.state.localScreenShare?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:this.toggleHandUp,style:{position:"absolute",bottom:20,left:this.props.sidebar.width+220+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon hand paper",style:this.state.localUser.handUpOn?{color:"#21AA21"}:{color:"#878787"}})}),ve.a.createElement("div",{className:"show_buttons"},ve.a.createElement("button",{onClick:function(){return e.toggleEmoji("thumbs up")},style:{position:"absolute",bottom:20,left:this.props.sidebar.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon thumbs up",style:"thumbs up"==this.state.localUser.showIconName?{color:"#21AA21"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){return e.toggleEmoji("thumbs down")},style:{position:"absolute",bottom:60,left:this.props.sidebar.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control icon_button_menue",children:ve.a.createElement("i",{className:"icon thumbs down icon_button_menue",style:"thumbs down"==this.state.localUser.showIconName?{color:"#CC1B1B"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){return e.toggleEmoji("beer")},style:{position:"absolute",bottom:100,left:this.props.sidebar.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control icon_button_menue",children:ve.a.createElement("i",{className:"icon beer icon_button_menue",style:"beer"==this.state.localUser.showIconName?{color:"#FFFF00"}:{color:"#878787"}})})))}}]),t}(ve.a.Component),$v="@@InspectioLayout/ToggleSidebarCollapsed",eO="@@InspectioLayout/SetSidebarWidth",tO="@@InspectioLayout/SetRightSidebarWidth",nO="@@InspectioLayout/SetCodyConsoleHeight",rO=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),t}(Object(fe.Record)({collapsed:!1,width:250,rightSidebarWidth:350,codyConsoleHeight:200})),aO=new rO,oO=function(e,t){return e.getIn(["inspectioSidebar","sidebar"])||new rO},iO=function(){return Object(ft.a)([oO],function(e){return e})},sO=function(e){var t=Object(ge.useState)(!0),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(""),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(""),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Ng(),f=Object(Qe.a)(p,1)[0],h=Object(Me.useSelector)(iO()),b=Object(ge.useRef)(),g=Object(ge.useRef)(),v=Object(ge.useState)(e.name),O=Object(Qe.a)(v,2),y=O[0],E=O[1];return ge.createElement(ge.Fragment,null,""!==s&&""!==d&&ge.createElement(Xv,{sessionId:e.sessionId,id:e.id,name:y,avatar:e.avatar,initialPosition:e.initialPosition,graph:f,sidebar:h,timeoutRefEmoji:b,timeoutRefIsSpeaking:g,videoDevice:s,audioDevice:d}),ge.createElement(Uv,{open:r,name:e.name,onDevicesSelected:function(e){m(e.audio),c(e.video),a(!1)},onCancel:function(){a(!1)},onNameChange:function(e){E(e)},loadingMeetingRoom:e.loadingMeetingRoom}))},cO=n(267),uO=Object(Pe.b)()(function(e){var t=Object(ge.useRef)(),n=Object(ge.useRef)(),r=Object(ge.useRef)(null),a=Object(ge.useState)([]),o=Object(Qe.a)(a,2),i=o[0],s=o[1],c=Object(ge.useState)([]),u=Object(Qe.a)(c,2),l=u[0],d=u[1],m=Object(ge.useState)(""),p=Object(Qe.a)(m,2),f=p[0],h=p[1],b=Object(ge.useState)(""),g=Object(Qe.a)(b,2),v=g[0],O=g[1];Object(ge.useEffect)(function(){t.current=new cO.OpenVidu,n.current=t.current.initPublisher(void 0,{audioSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1}),n.current.addVideoElement(r.current),n.current.on("streamPlaying",function(){t.current.getDevices().then(function(e){var t=e.filter(function(e){return"videoinput"===e.kind}),n=e.filter(function(e){return"audioinput"===e.kind});s(t),d(n),t.length>0&&h(t[0].deviceId),n.length>0&&O(n[0].deviceId)})})},[]),Object(ge.useEffect)(function(){t.current&&n.current&&f&&t.current.getUserMedia({videoSource:f,audioSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1}).then(function(e){var t=e.getVideoTracks()[0];n.current.replaceTrack(t)})},[f]);var y=i.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}}),E=l.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}});return ge.createElement(Ri.a,{open:e.open,onClose:e.onCancel,closeIcon:!0},ge.createElement(Ri.a.Header,null,"Join Meeting"),ge.createElement(Ri.a.Content,null,ge.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},ge.createElement(eh.a,null,ge.createElement(eh.a.Field,null,ge.createElement("label",null,"Camera"),ge.createElement(ag.a,{required:!0,value:f,options:y,onChange:function(e,t){return h(t.value)}})),ge.createElement(eh.a.Field,null,ge.createElement("label",null,"Microphone"),ge.createElement(ag.a,{required:!0,value:v,options:E,onChange:function(e,t){return O(t.value)}}))),ge.createElement("div",null,ge.createElement("video",{autoPlay:!0,muted:!0,ref:r})))),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{children:e.t("app.form.cancel"),onClick:e.onCancel}),ge.createElement(Ni.a,{loading:e.loadingMeetingRoom,primary:!0,children:"Join",onClick:function(){e.loadingMeetingRoom||e.onDevicesSelected({audio:v,video:f})}})))}),lO=Se.a.create({baseURL:"https://mephisto-video.inseciacloud.com:3001"}),dO=function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,lO(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error(t.url),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),mO={createSession:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){var n;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dO({method:"post",url:"sessions/".concat(t)});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getToken:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){var n;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dO({method:"get",url:"sessions/".concat(t,"/token")});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},pO=null,fO=0,hO=function(){},bO=null,gO=null,vO=null,OO=null;!function(e){e.GetUserPositions="GetUserPositions",e.GetUserPositionsResponse="GetUserPositionsResponse",e.UserPositionChanged="UserPositionChanged"}(Vv||(Vv={}));var yO=function(){return pO&&pO.readyState===pO.OPEN},EO=function(){OO&&window.clearTimeout(OO),OO=window.setTimeout(function(){pO&&yO()&&(console.log("[vidu] Closing connection due to heartbeat timeout"),pO.close())},31e3)},IO=function(){(pO=new WebSocket("wss://mephisto-video.inseciacloud.com:3001")).onopen=function(e){console.log("[vidu] heartbeat triggered on open"),EO(),fO=0},pO.onclose=function(e){OO&&(console.log("[vidu] heartbeat timeout cleared on close"),window.clearTimeout(OO))},pO.onmessage=hO};var kO={sendPositionUpdate:function(e,t,n,r){pO&&yO()&&pO.send(JSON.stringify({type:"UserPositionChanged",id:e,sessionId:t,left:n,top:r}))},listenForPositionUpdates:function(e,t,n){bO=e,gO=t,hO=function(t){var r=JSON.parse(t.data);switch(r.type){case Vv.GetUserPositionsResponse:console.log("[vidu] Got user positions from socket server: ",r),EO(),Object.keys(r.users).forEach(function(t){if(e!==t){var a=r.users[t].position;n(t,a)}});break;case Vv.UserPositionChanged:n(r.id,{left:r.left,top:r.top})}},pO&&(pO.onmessage=hO,function e(){pO&&yO()&&bO&&gO?pO.send(JSON.stringify({type:Vv.GetUserPositions,id:bO,sessionId:gO})):(fO++,pO&&pO.close(),console.log("[vidu] trying to reconnect to socket. Attempt: "+fO),IO()),vO=window.setTimeout(function(){e()},3e4)}())},stopListeningForPositionUpdates:function(){vO&&window.clearTimeout(vO),bO=null,gO=null}},SO=(n(515),{startPositionAvatar:{left:0,top:0},startPositionMouse:{x:0,y:0},currentPositionMouse:{x:0,y:0}}),jO={"thumbs up":"green thumbs up thumbUp-indicator","thumbs down":"red thumbs down thumbDown-indicator",beer:"yellow beer beer-indicator"},xO=function(e){var t=Object(ge.useRef)(null),n=Object(ge.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useRef)(SO),d=function(t,n){if(l.current.currentPositionMouse.x=t,l.current.currentPositionMouse.y=n,e.onPositionChange){var r=e.onPositionChange(l.current);kO.sendPositionUpdate(e.user.id,e.sessionId,r.left,r.top)}};Object(ge.useEffect)(function(){e.user.streamManager.addVideoElement(t.current)},[]),Object(ge.useEffect)(function(){if(t.current&&!e.isLocalUser){var n=e.volume*(e.isAnyMegaphoneActive?.7:1);e.user.megaphoneOn&&(n=1),t.current.volume=n,0!==n||t.current.paused||t.current.pause(),n>0&&t.current.paused&&t.current.play()}},[e.volume,e.user.megaphoneOn,e.isAnyMegaphoneActive]),Object(ge.useEffect)(function(){var t=function(){o(!1)},n=function(t){e.isLocalUser&&a&&d(t.clientX,t.clientY)},r=function(t){e.isLocalUser&&a&&d(t.touches[0].clientX,t.touches[0].clientY)};return document.addEventListener("mouseup",t),document.addEventListener("touchend",t),document.addEventListener("mousemove",n),document.addEventListener("touchmove",r),function(){document.removeEventListener("mouseup",t),document.removeEventListener("touchend",t),document.removeEventListener("mousemove",n),document.removeEventListener("touchmove",r)}});var m,p=(m=e.isLocalUser?150:50+100*e.volume,c?2*m:m),f=Math.round(p/2),h=e.user.cameraOn&&(e.isLocalUser||e.volume>0||e.user.megaphoneOn),b=!e.isLocalUser&&0===e.volume&&!e.user.megaphoneOn;return ve.a.createElement("div",{style:{width:p,height:p,borderRadius:f,position:"absolute",left:e.user.position.left-p/2,top:e.user.position.top-p/2,pointerEvents:"auto",cursor:e.isLocalUser?"move":"default",zIndex:e.isLocalUser?10:3,WebkitTransform:"translateZ(0)"},onMouseDown:function(t){l.current.startPositionAvatar=e.user.position,l.current.startPositionMouse={x:t.clientX,y:t.clientY},o(!0)},onTouchStart:function(t){l.current.startPositionAvatar=e.user.position,l.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},o(!0)},onDoubleClick:function(){u(!c)}},ve.a.createElement("div",{style:Object(Ye.a)({width:p,height:p,borderRadius:f,overflow:"hidden",backgroundColor:"#9cc8f5",pointerEvents:"auto"},e.isSpeaking?{border:"5px solid #9cc8f5"}:{border:"5px solid #ffffff"},{WebkitTransform:"translateZ(0)",zIndex:e.isLocalUser?10:3})},ve.a.createElement("video",{autoPlay:!0,disablePictureInPicture:!0,ref:t,muted:e.isLocalUser,style:{width:p,height:p,objectFit:"cover",objectPosition:"center",pointerEvents:"auto",display:h?"block":"none",zIndex:e.isLocalUser?9:2}}),!h&&ve.a.createElement(yh.a,{src:e.user.avatar,avatar:!0,verticalAlign:"middle",style:{width:p,height:p,objectFit:"cover",objectPosition:"center",pointerEvents:"none",filter:b?"brightness(0.8)":"none"}})),ve.a.createElement("div",{style:{position:"absolute",bottom:"-26px",left:0,width:"100%",textAlign:"center",fontSize:"16px",pointerEvents:"auto"}},e.user.name),ve.a.createElement("i",{className:"icon bullhorn megaphone-indicator"+(e.user.megaphoneOn?" active":"")}),ve.a.createElement("i",{className:"green icon hand paper handUp-indicator"+(e.user.handUpOn?" active":"")}),ve.a.createElement("i",{className:"icon "+jO[e.user.showIconName]+" "+(e.user.thumbUpOn?" active":"")}))},TO={startPositionAvatar:{left:0,top:0},startPositionMouse:{x:0,y:0},currentPositionMouse:{x:0,y:0}},CO=function(e){var t=Object(ge.useRef)(null),n=Object(ge.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useRef)(TO),d=function(t,n){if(l.current.currentPositionMouse.x=t,l.current.currentPositionMouse.y=n,e.onPositionChange){var r=e.onPositionChange(l.current);r&&kO.sendPositionUpdate("screen_"+e.screenShare.userId,e.sessionId,r.left,r.top)}};Object(ge.useEffect)(function(){e.screenShare.streamManager.addVideoElement(t.current)},[]),Object(ge.useEffect)(function(){var e=function(){o(!1)},t=function(e){a&&d(e.clientX,e.clientY)},n=function(e){a&&d(e.touches[0].clientX,e.touches[0].clientY)};return document.addEventListener("mouseup",e),document.addEventListener("touchend",e),document.addEventListener("mousemove",t),document.addEventListener("touchmove",n),function(){document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e),document.removeEventListener("mousemove",t),document.removeEventListener("touchmove",n)}});return ve.a.createElement("div",{style:{height:c?720:360,padding:5,boxSizing:"border-box",position:"absolute",left:e.screenShare.position.left-325,top:e.screenShare.position.top-185,pointerEvents:"auto",cursor:"move",zIndex:2,backgroundColor:"black",borderRadius:6},onMouseDown:function(t){l.current.startPositionAvatar=e.screenShare.position,l.current.startPositionMouse={x:t.clientX,y:t.clientY},o(!0),t.stopPropagation(),t.preventDefault()},onTouchStart:function(t){l.current.startPositionAvatar=e.screenShare.position,l.current.startPositionMouse={x:t.touches[0].clientX,y:t.touches[0].clientY},o(!0),t.stopPropagation(),t.preventDefault()},onClick:function(e){e.preventDefault()},onDoubleClick:function(){u(!c)}},ve.a.createElement("video",{autoPlay:!0,disablePictureInPicture:!0,ref:t,muted:!0,style:{height:"100%",pointerEvents:"auto",display:"block",borderRadius:"3px"}}))},wO=0,AO=function(e){var t=Object(ge.useRef)(),n=Object(ge.useRef)(),r=Object(ge.useRef)(),a=Object(ge.useRef)({x:0,y:0}),o=Object(ge.useRef)(1),i=Object(ge.useRef)(!1),s=Object(ge.useRef)({}),c=Object(ge.useState)(0),u=Object(Qe.a)(c,2),l=u[0],d=u[1],m=Object(ge.useState)(wO),p=Object(Qe.a)(m,2),f=(p[0],p[1]),h=Ng(),b=Object(Qe.a)(h,1)[0],g=Object(ge.useState)({x:0,y:0}),v=Object(Qe.a)(g,2),O=v[0],y=v[1],E=Object(ge.useState)(1),I=Object(Qe.a)(E,2),k=I[0],S=I[1],j=Object(ge.useState)(),x=Object(Qe.a)(j,2),T=x[0],C=x[1],w=Object(ge.useState)(),A=Object(Qe.a)(w,2),_=A[0],U=A[1],B=Object(Me.useSelector)(iO()),R=Object(ge.useRef)([]),N=Object(ge.useRef)([]),L=Object(ge.useRef)([]),D=Object(ge.useRef)({localUser:T});D.current={localUser:T};var P=Object(ge.useRef)();a.current=O,o.current=k;var M=function(e){n.current.signal({data:JSON.stringify(e),type:"userChanged"})},z=function(e){var t=JSON.parse(e.connection.data);if("screenShare"===t.type&&D.current.localUser&&t.userId===D.current.localUser.id)console.log("[vidu] Subscribe to local screen share prevented");else{var r=n.current.subscribe(e,void 0);if(r.on("streamPlaying",function(e){console.log("[vidu] STREAM PLAYING",e,r)}),console.log("[vidu] Remote Positions: ",s.current),"screenShare"===t.type){var a="screen_"+t.userId;L.current.push({userId:t.userId,streamManager:r,position:s.current[a]?s.current[a].position:s.current[t.userId]?s.current[t.userId].position:{left:200,top:500}}),console.log("[vidu] pushed remote screen share",L.current)}else R.current.push({id:t.id,name:t.name,avatar:t.avatar,streamManager:r,connectionId:e.connection.connectionId,position:s.current[t.id]?s.current[t.id].position:{left:200,top:500},cameraOn:t.isVideoActive,micOn:t.isAudioActive,megaphoneOn:t.isMegaphoneActive,handUpOn:t.isHandUpActive,thumbUpOn:t.isThumbUpActive,showIconName:t.selectedIconName}),console.log("[vidu] pushed remote user",R.current),d(l+1);f(++wO)}},F=function(){n.current.on("reconnecting",function(){return console.warn("[vidu] Oops! Trying to reconnect to the session")}),n.current.on("reconnected",function(){return console.log("[vidu] Hurray! You successfully reconnected to the session")}),n.current.on("sessionDisconnected",function(e){"networkDisconnect"===e.reason?(console.warn("[vidu] Dang-it... You lost your connection to the session",e),n.current=null,r.current=null,Q()):console.warn("[vidu] Vidu session disconnect! Reason: ",e.reason,e)}),n.current.on("exception",function(e){if("ICE_CONNECTION_FAILED"===e.name){var t=e.origin;return console.warn("[vidu] Stream "+t.streamId+" broke!"),void console.warn("[vidu] Reconnection process automatically started")}if("ICE_CONNECTION_DISCONNECTED"===e.name){var n=e.origin;return console.warn("[vidu] Stream "+n.streamId+" disconnected!"),void console.warn("[vidu] Giving it some time to be restored. If not possible, reconnection process will start")}if("NO_STREAM_PLAYING_EVENT"===e.name){var r=e.origin.stream;console.warn("[vidu] No stream playing event recevied. Trying it again for ".concat(r.streamId)),G(r),z(r)}console.error("[vidu] OpenVidu session exception occurred: ",e)})},G=function(e){R.current=R.current.filter(function(t){return t.streamManager.stream!==e}),d(l-1),L.current=L.current.filter(function(t){return t.streamManager.stream!==e}),f(++wO)},V=function(){var r=t.current.initPublisher(void 0,{audioSource:e.audioDevice,videoSource:e.videoDevice,publishAudio:!0,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1});n.current.capabilities.publish&&r.on("accessAllowed",function(){n.current.publish(r).then(function(){i.current=!0})}),n.current.on("signal:userChanged",function(e){R.current.forEach(function(t){if(t.connectionId===e.from.connectionId){var n=JSON.parse(e.data);console.log("[vidu] Updating user data: ",n),n.hasOwnProperty("isVideoActive")&&(t.cameraOn=n.isVideoActive,f(++wO)),n.hasOwnProperty("isAudioActive")&&(t.micOn=n.isAudioActive,f(++wO)),n.hasOwnProperty("isMegaphoneActive")&&(t.megaphoneOn=n.isMegaphoneActive,f(++wO)),n.hasOwnProperty("isHandUpActive")&&(t.handUpOn=n.isHandUpActive,f(++wO)),n.hasOwnProperty("isThumbUpActive")&&(t.thumbUpOn=n.isThumbUpActive,f(++wO)),n.hasOwnProperty("selectedIconName")&&(t.showIconName=n.selectedIconName,f(++wO))}})}),n.current.on("streamDestroyed",function(e){console.log("[vidu] Stream destroyed"),G(e.stream),e.preventDefault()}),M({isScreenShareActive:!1}),C({id:e.id,name:e.name,avatar:e.avatar,streamManager:r,connectionId:n.current.connection.connectionId,position:e.initialPosition,cameraOn:!0,micOn:!0,megaphoneOn:!1,handUpOn:!1,thumbUpOn:!1,showIconName:""}),r.on("streamPlaying",function(e){console.log("[vidu] publisher stream playing",e)})},H=function(){var t=Object(Ei.a)(fn.a.mark(function t(){var r,a;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,mO.createSession(e.sessionId);case 3:return r=t.sent,t.next=6,mO.getToken(r);case 6:return a=t.sent,t.next=9,n.current.connect(a,{type:"user",id:e.id,name:e.name,avatar:e.avatar,position:e.initialPosition,isVideoActive:!0,isAudioActive:!0});case 9:V(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),alert("There was an error connecting to the session: "+t.t0.message),console.log("[vidu] There was an error connecting to the session:",t.t0.code,t.t0.message);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),W=function(e,t){s.current[e]={position:t},e.includes("screen_")||R.current.forEach(function(n){n.id===e&&(n.position=t)}),f(++wO)},q=function(e,t){var n=b.getCurrentScale(),r=e.currentPositionMouse.x-e.startPositionMouse.x,a=e.currentPositionMouse.y-e.startPositionMouse.y,o={left:e.startPositionAvatar.left+r/n,top:e.startPositionAvatar.top+a/n};if(!t&&_)return U(Object(Ye.a)({},_,{position:o})),o;var i=L.current.find(function(e){return e.userId===t});i&&(i.position=o,f(++wO))},J=function(e){if(T){var t=""===T.showIconName?e:"",n=!T.thumbUpOn;C(Object(Ye.a)({},T,{thumbUpOn:n,showIconName:t})),M({isThumbUpActive:n,selectedIconName:t}),clearTimeout(P.current),P.current=window.setTimeout(function(){C(Object(Ye.a)({},D.current.localUser,{thumbUpOn:!1,showIconName:""})),M({isThumbUpActive:!1,selectedIconName:""})},3e3)}},Y=function(){var n=Object(Ei.a)(fn.a.mark(function n(){var a,o,i;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(T){n.next=2;break}return n.abrupt("return");case 2:return r.current=t.current.initSession(),n.next=5,mO.createSession(e.sessionId);case 5:return a=n.sent,n.next=8,mO.getToken(a);case 8:return o=n.sent,n.next=11,r.current.connect(o,{type:"screenShare",userId:e.id});case 11:(i=t.current.initPublisher(void 0,{videoSource:"screen",publishVideo:!0,publishAudio:!0,mirror:!1},console.log)).once("accessAllowed",function(e){i.stream.getMediaStream().getVideoTracks()[0].addEventListener("ended",function(){U(void 0)}),U({userId:T.id,streamManager:i,position:Object(Ye.a)({},T.position)}),r.current.publish(i)});case 13:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),Q=function(){t.current=new cO.OpenVidu,t.current.setAdvancedConfiguration({forceMediaReconnectionAfterNetworkDrop:!0,noStreamPlayingEventExceptionTimeout:15e3}),n.current=t.current.initSession(),n.current.on("publisherStartSpeaking",function(e){N.current.includes(e.streamId)||(N.current.push(e.streamId),f(++wO))}),n.current.on("publisherStopSpeaking",function(e){var t=N.current.indexOf(e.streamId);-1!==t&&(N.current.splice(t,1),f(++wO))}),n.current.on("streamCreated",function(e){console.log("[vidu] STREAM CREATED"),z(e.stream)}),F(),H(),kO.listenForPositionUpdates(e.id,e.sessionId,W)},K=Object(ge.useCallback)(function(){n.current&&n.current.disconnect(),r.current&&r.current.disconnect(),n.current=void 0,r.current=void 0,t.current=void 0,kO.stopListeningForPositionUpdates()},[]);Object(ge.useEffect)(function(){return window.addEventListener("beforeunload",K),Q(),function(){window.removeEventListener("beforeunload",K),K()}},[]),Object(ge.useEffect)(function(){var e=function(e){y({x:e.x,y:e.y})},t=function(e,t){S(e),y(t)};if(b){var n=b.getCurrentTranslate();y({x:n.x,y:n.y}),S(b.getCurrentScale()),b.onPanning(e),b.onZoom(t)}return function(){b&&(b.offPanning(e),b.offZoom(t))}},[b]);var Z=!!T;Object(ge.useEffect)(function(){if(b&&T){var t=b.getCurrentScale(),n={left:-1*b.getCurrentTranslate().x+e.initialPosition.left/t,top:-1*b.getCurrentTranslate().y+e.initialPosition.top/t};console.log("[vidu] local user",n,t),C(Object(Ye.a)({},T,{position:n}))}},[b,Z]);var X=Boolean(T&&T.megaphoneOn||R.current.find(function(e){return e.megaphoneOn})),$=R.current.map(function(t){return ve.a.createElement("div",null,ve.a.createElement(xO,{key:t.id,user:t,isLocalUser:!1,sessionId:e.sessionId,volume:T?Math.max(Math.min((700-Math.sqrt(Math.pow(t.position.top-T.position.top,2)+Math.pow(t.position.left-T.position.left,2)))/500,1),0):0,isSpeaking:N.current.includes(t.streamManager.stream.streamId),isAnyMegaphoneActive:X}))}),ee=L.current.map(function(t){return ve.a.createElement("div",null,ve.a.createElement(CO,{screenShare:t,sessionId:e.sessionId,onPositionChange:function(e){return q(e,t.userId)}}))});return ve.a.createElement("div",{className:"diagram-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},ve.a.createElement("div",{style:{transform:"scale(".concat(k,") translate(").concat(O.x,"px, ").concat(O.y,"px)"),transformOrigin:"0 0"}},T&&ve.a.createElement("div",null,ve.a.createElement(xO,{user:T,isLocalUser:!0,sessionId:e.sessionId,onPositionChange:function(e){var t=b.getCurrentScale(),n=e.currentPositionMouse.x-e.startPositionMouse.x,r=e.currentPositionMouse.y-e.startPositionMouse.y,a={left:e.startPositionAvatar.left+n/t,top:e.startPositionAvatar.top+r/t};return T&&C(Object(Ye.a)({},T,{position:a})),a},volume:0,isSpeaking:N.current.includes(T.streamManager.stream.streamId),isAnyMegaphoneActive:X})),$,_&&ve.a.createElement("div",null,ve.a.createElement(CO,{screenShare:_,sessionId:e.sessionId,onPositionChange:q})),ee),T&&ve.a.createElement(ve.a.Fragment,null,ve.a.createElement("button",{onClick:function(){if(T){var e=!T.cameraOn;T.streamManager.publishVideo(e),C(Object(Ye.a)({},T,{cameraOn:e})),M({isVideoActive:e})}},style:{position:"absolute",bottom:20,left:B.width+20+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:T.cameraOn?"video icon":"icon-fas-video-slash-solid",style:T.cameraOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){if(T){var e=!T.micOn;T.streamManager.publishAudio(e),C(Object(Ye.a)({},T,{micOn:e})),M({isAudioActive:e})}},style:{position:"absolute",bottom:20,left:B.width+70+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:T.micOn?"icon microphone":"icon microphone slash",style:T.micOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){if(T){var e=!T.megaphoneOn;C(Object(Ye.a)({},T,{megaphoneOn:e})),M({isMegaphoneActive:e})}},style:{position:"absolute",bottom:20,left:B.width+120+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon bullhorn",style:T.megaphoneOn?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){_?(r.current&&(_&&r.current.unpublish(_.streamManager),U(void 0),r.current.disconnect()),r.current=void 0):Y()},style:{position:"absolute",bottom:20,left:B.width+170+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon desktop",style:_?{color:"#c10303"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){if(T){var e=!T.handUpOn;C(Object(Ye.a)({},T,{handUpOn:e})),M({isHandUpActive:e})}},style:{position:"absolute",bottom:20,left:B.width+220+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon hand paper",style:T.handUpOn?{color:"#21AA21"}:{color:"#878787"}})}),ve.a.createElement("div",{className:"show_buttons"},ve.a.createElement("button",{onClick:function(){return J("thumbs up")},style:{position:"absolute",bottom:20,left:B.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ve.a.createElement("i",{className:"icon thumbs up",style:"thumbs up"==T.showIconName?{color:"#21AA21"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){return J("thumbs down")},style:{position:"absolute",bottom:60,left:B.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control icon_button_menue",children:ve.a.createElement("i",{className:"icon thumbs down icon_button_menue",style:"thumbs down"==T.showIconName?{color:"#CC1B1B"}:{color:"#878787"}})}),ve.a.createElement("button",{onClick:function(){return J("beer")},style:{position:"absolute",bottom:100,left:B.width+270+"px",pointerEvents:"all"},className:"ui circular icon button big video-control icon_button_menue",children:ve.a.createElement("i",{className:"icon beer icon_button_menue",style:"beer"==T.showIconName?{color:"#FFFF00"}:{color:"#878787"}})}))))},_O=function(e){var t=Object(ge.useState)(!0),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(""),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(""),l=Object(Qe.a)(u,2),d=l[0],m=l[1];return ge.createElement(ge.Fragment,null,""!==s&&""!==d&&ge.createElement(AO,{sessionId:e.sessionId,id:e.id,name:e.name,avatar:e.avatar,initialPosition:e.initialPosition,audioDevice:d,videoDevice:s}),ge.createElement(uO,{open:r,onDevicesSelected:function(e){m(e.audio),c(e.video),a(!1)},onCancel:function(){a(!1)},loadingMeetingRoom:e.loadingMeetingRoom}))},UO=function(e){function t(e){var n;Object(Be.a)(this,t),(n=Object(Ne.a)(this,Object(Le.a)(t).call(this,e))).mxGraph=void 0,n.divGraph=void 0,n.divDimmer=void 0,n.editorUi=void 0,n.codec=void 0,n.initialized=!1,n.mouseSync=void 0,n.boardSync=void 0,n.iioCody=void 0,n.lastFocusedCells="",n.lastClicks=null,n.uploadOpenHandle=void 0,n.boardLinkHandle=void 0,n.taskLinkHandle=void 0,n.imageUploadedListener=null,n.boardLinkListener=null,n.taskLinkListener=null,n.setUsedGraph=void 0,n.setUsedMouseSync=void 0,n.activeGraphElement=void 0,n.viduEnabled=!1,n.jitsiEnabled=!1,n.viduUser=null,n.board=void 0,n.syncChangesWithCody=function(){var e=Object(Ei.a)(fn.a.mark(function e(t,r){var a,o,i,s,c,u,l,d,m,p,f,h,b,g,v,O,y,E,I,k,S,j,x,T,C,w,A,_,U,B,R,N,L;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.iioCody&&n.iioCody.syncRequired()){e.next=3;break}return console.log("Skipping sync with cody, because no server is listening for syncs at the moment"),e.abrupt("return");case 3:if(console.log("syncing changes with cody",t.toJS()),a=n.editorUi.editor.graph,o=n.props.board.uid,i=Tt(o),t.action!==Zl.deleted){e.next=57;break}s=[],c=[],u=!0,l=!1,d=void 0,e.prev=13,m=r[Symbol.iterator]();case 15:if(u=(p=m.next()).done){e.next=30;break}if(f=p.value,!(h=f.child)){e.next=27;break}if(inspectioUtils.getTypeInclEdge(h)!==hd.edge){e.next=22;break}return c.push(h),e.abrupt("continue",27);case 22:if(b=a.getVerticesTree(h),s.push.apply(s,Object(Xa.a)(b.map(function(e){return e.getId()}))),!b.length){e.next=27;break}return e.next=27,n.iioCody.syncDeletedNodes(o,b.map(function(e){return new od(e,a.getModel(),!1,i)}));case 27:u=!0,e.next=15;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(13),l=!0,d=e.t0;case 36:e.prev=36,e.prev=37,u||null==m.return||m.return();case 39:if(e.prev=39,!l){e.next=42;break}throw d;case 42:return e.finish(39);case 43:return e.finish(36);case 44:g=0;case 45:if(!(g<c.length)){e.next=56;break}if(v=c[g],O=[],v.source&&!s.includes(v.source.getId())&&O.push(new od(v.source,a.getModel(),!1,i)),v.target&&!s.includes(v.target.getId())&&O.push(new od(v.target,a.getModel(),!1,i)),!O.length){e.next=53;break}return e.next=53,n.iioCody.syncChangedNodes(o,O);case 53:g++,e.next=45;break;case 56:return e.abrupt("return");case 57:if(t.cellId){e.next=60;break}return console.log("no cellId given for transaction"),e.abrupt("return");case 60:y=t.cellId.split(";"),E=[],I=[],k=!0,S=!1,j=void 0,e.prev=66,x=y[Symbol.iterator]();case 68:if(k=(T=x.next()).done){e.next=105;break}if(C=T.value,w=a.model.getCell(C)){e.next=74;break}return console.log("skipping cellId, cause not found in graph model",C),e.abrupt("continue",102);case 74:if(inspectioUtils.getTypeInclEdge(w)!==hd.edge){e.next=79;break}return console.log("change effected edge",w),w.source&&!I.includes(w.source.getId())&&(console.log("adding edge source to effected cells"),I.push(w.source.getId()),E.push(new od(w.source,a.getModel(),!1,i))),w.target&&!I.includes(w.target.getId())&&(console.log("adding edge target to effected cells"),I.push(w.target.getId()),E.push(new od(w.target,a.getModel(),!1,i))),e.abrupt("continue",102);case 79:if(a.isVertex(w)){e.next=101;break}for(A=a.getVerticesTree(w),_=!0,U=!1,B=void 0,e.prev=84,R=A[Symbol.iterator]();!(_=(N=R.next()).done);_=!0)L=N.value,I.includes(L.getId())||(I.push(L.getId()),E.push(new od(L,a.getModel(),!1,i)));e.next=92;break;case 88:e.prev=88,e.t1=e.catch(84),U=!0,B=e.t1;case 92:e.prev=92,e.prev=93,_||null==R.return||R.return();case 95:if(e.prev=95,!U){e.next=98;break}throw B;case 98:return e.finish(95);case 99:return e.finish(92);case 100:return e.abrupt("continue",102);case 101:I.includes(w.getId())||(I.push(w.getId()),E.push(new od(w,a.getModel(),!1,i)));case 102:k=!0,e.next=68;break;case 105:e.next=111;break;case 107:e.prev=107,e.t2=e.catch(66),S=!0,j=e.t2;case 111:e.prev=111,e.prev=112,k||null==x.return||x.return();case 114:if(e.prev=114,!S){e.next=117;break}throw j;case 117:return e.finish(114);case 118:return e.finish(111);case 119:return e.next=121,n.iioCody.syncChangedNodes(o,E);case 121:case"end":return e.stop()}},e,this,[[13,32,36,44],[37,,39,43],[66,107,111,119],[84,88,92,100],[93,,95,99],[112,,114,118]])}));return function(t,n){return e.apply(this,arguments)}}(),n.state={readyToJoinVidu:!1},n.LoadGraph=n.LoadGraph.bind(Object(sg.a)(Object(sg.a)(n))),n.divGraph=ve.a.createRef(),n.divDimmer=ve.a.createRef(),n.codec=new mxCodec,n.codec.lookup=function(e){var t=n.editorUi.editor.graph.model.getCell(e);return t||null};var r=Ng(),a=Object(Qe.a)(r,2)[1];n.setUsedGraph=a;var o=zg(),i=Object(Qe.a)(o,2)[1];if(n.setUsedMouseSync=i,e.location.search){var s=new URLSearchParams(e.location.search);s.get("vidu")&&(n.viduEnabled=!0,n.jitsiEnabled=!1),s.get("jitsi")&&(n.jitsiEnabled=!0,n.viduEnabled=!1),s.get("user")&&(n.viduUser=s.get("user"))}return n}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserBoard(this.props.match.params.uid)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;return!this.board&&e.board&&""!==e.user.name?!!e.board.detailsFetched&&(this.initGraphBoard(e),!0):(this.board&&this.board.uid!==e.board.uid&&e.history.replace(xt,{href:It(e.board.uid)}),this.editorUi&&!this.board.writeAccess&&e.board.writeAccess&&this.editorUi.editor.graph.setEnabled(!0),this.editorUi&&this.props.liteMode!==e.liteMode&&this.setLiteMode(e),this.board&&this.board.videoSessionActive!==e.board.videoSessionActive?(this.jitsiEnabled=!!e.board.videoSessionActive,this.initialized&&!this.state.readyToJoinVidu&&this.setState({readyToJoinVidu:!0}),this.board=this.board.set("videoSessionActive",e.board.videoSessionActive),!0):(this.editorUi&&e.board.shouldImport&&(this.editorUi.actions.get("import").funct(function(t){var r=mxUtils.getXml(n.editorUi.editor.getGraphXml());n.board=n.board.updateXml(r,e.user.uid),e.onBoardImported(e.board.uid,n.board,ed(n.editorUi.editor.graph,n.editorUi))}),e.onBoardImportStarted(this.board.uid)),this.editorUi&&e.board.shouldExport&&(this.editorUi.actions.get("export").funct(),e.onBoardExported(e.board.uid)),this.editorUi&&this.checkScrollToCells(e),!(this.state.readyToJoinVidu||!t.readyToJoinVidu)&&(console.log("Component should update since it is initialized now!"),!0)))}},{key:"componentWillUnmount",value:function(){this.editorUi&&this.editorUi.destroy(),this.setUsedGraph(void 0),this.setUsedMouseSync(void 0),document.body.style.overflow="auto",document.title="prooph board";var e=document.getElementById("topmenuUsers");e&&(e.innerHTML=""),this.props.board&&this.props.clearBoardHistory(this.props.board.uid),this.boardSync&&this.boardSync.stopSync(),this.mouseSync&&this.mouseSync.stopSync({userId:this.props.user.uid,boardId:this.props.board.uid}),this.iioCody&&(this.iioCody.onSyncRequired(void 0),this.iioCody.disconnect())}},{key:"render",value:function(){var e=this;return ve.a.createElement(ve.a.Fragment,null,ve.a.createElement("div",{className:"graph-container disable-user-select",ref:this.divGraph,id:"divGraph"}),ve.a.createElement("div",{ref:this.divDimmer},ve.a.createElement(Kf.a,{active:!0,className:"page"},ve.a.createElement(Zf.a,{size:"large"},"Loading Board"))),this.props.board&&ve.a.createElement(Av,{boardId:this.props.board.uid,openHandle:function(t){return e.uploadOpenHandle=t},onCancel:function(){e.uploadOpenHandle(!1)},onFileUploaded:function(t,n){e.imageUploadedListener&&e.imageUploadedListener(t,n)}}),this.props.board&&ve.a.createElement(kv,{boardId:this.props.board.uid,openHandle:function(t){return e.boardLinkHandle=t},onCancel:function(){e.boardLinkHandle(!1)},onLinkChosen:function(t){e.boardLinkListener&&e.boardLinkListener(t)}}),this.props.board&&ve.a.createElement(_v,{openHandle:function(t){return e.taskLinkHandle=t},onCancel:function(){e.taskLinkHandle(!1)},onLinkChosen:function(t){e.taskLinkListener&&e.taskLinkListener(t)}}),this.props.board&&this.viduEnabled&&ve.a.createElement(_O,{sessionId:this.props.board.uid,id:this.viduUser||this.props.user.uid,name:this.props.user.name,avatar:this.props.user.avatarUrl,initialPosition:{left:Math.floor(window.innerWidth/2),top:Math.floor(window.innerHeight/2)},loadingMeetingRoom:!this.state.readyToJoinVidu}),this.props.board&&this.jitsiEnabled&&ve.a.createElement(sO,{sessionId:this.props.board.uid,id:this.viduUser||this.props.user.uid,name:this.props.user.name,avatar:this.props.user.avatarUrl,initialPosition:{left:Math.floor(window.innerWidth/2),top:Math.floor(window.innerHeight/2)},loadingMeetingRoom:!this.state.readyToJoinVidu}))}},{key:"initGraphBoard",value:function(e){this.mxGraph=_g(),this.LoadGraph(e,{},this.mxGraph),document.body.style.overflow="hidden",document.title=e.board.name+" - prooph board",this.board=e.board}},{key:"saveBoard",value:function(){this.board&&this.props.saveBoard(this.board,ed(this.editorUi.editor.graph,this.editorUi))}},{key:"LoadGraph",value:function(e,t,n){var r=this,a=this.divGraph.current;a.innerHTML="",mxUtils.alert=function(e){r.props.onError("Board Error",e)};var o=Dn.clone(MXGRAPH_ROOT_UUIDS),i=Bg()();mxGraphModel.prototype.createId=function(e){var t=o.pop();return t||i.fromUUID(rt.a.v4())};var s=EditorUi.prototype.init;EditorUi.prototype.init=function(){s.apply(this,arguments),this.actions.get("export").setEnabled(!1)},mxResources.loadDefaultBundle=!1;var c=mxResources.getDefaultBundle(RESOURCE_BASE,mxLanguage)||mxResources.getSpecialBundle(RESOURCE_BASE,mxLanguage);n.mxUtils.getAll([c,STYLE_PATH+"/"+ispConst.THEME+"/style.xml"],function(t){mxResources.parse(t[0].getText());var n={};if(n[Graph.prototype.defaultThemeName]=t[1].getDocumentElement(),r.editorUi=new EditorUi(new Editor("0"===urlParams.chrome,n),a,!1,e.board.name,"boardSidebarContainer"),function(e,t,n,r,a){var o=e.editor.graph;o.setHistory(t),o.enableCopyToClipboard(n),o.setDeeplinkFactory(r),o.enableNotifications(a)}(r.editorUi,e.history,Ag.a,Tt(e.board.uid),function(t,n,r){"info"===r?e.onInfo(t,n):e.onError(t,n)}),r.attachImageUploadListener(),r.attachLinkBoardListener(),r.attachLinkTaskListener(),r.attachImageReplaceListener(),r.attachChangeActiveGraphElementListener(),r.attachSyncLabelChangedListener(),r.attachLookupElementListener(e),r.attachShowElementDetailsListener(),r.attachCellConnectedListener(),r.attachCodyListener(),r.initializeAutoSaveManager(e),r.setLiteMode(e),e.board.xml){var i=mxUtils.parseXml(e.board.xml);r.editorUi.editor.graph.model.beginUpdateWithoutChangeNotifications();try{r.editorUi.editor.graph.enableLazyTextPaint(),r.editorUi.editor.graph.importGraphModel(i.documentElement,void 0,void 0,void 0,!1)}finally{r.editorUi.editor.graph.model.endUpdateWithoutChangeNotifications(),r.editorUi.editor.graph.disableLazyTextPaint()}if(r.editorUi.editor.graph.setEnabled(e.board.writeAccess),r.editorUi.editor.graph.initContainerStyles(),r.viduEnabled||r.jitsiEnabled?r.editorUi.editor.graph.zoom(1,!0,!1,!1):(r.editorUi.editor.graph.zoom(.19,!0,!1,!1),r.editorUi.editor.graph.showAll()),e.location.search){var s=new URLSearchParams(e.location.search);s.get("clicks")?r.lastClicks=s.get("clicks"):r.lastClicks="0"}window.setTimeout(function(){r.initialized=!0,r.setLiteMode(r.props),r.checkScrollToCells(e)||r.viduEnabled||r.jitsiEnabled||r.editorUi.editor.graph.center(),r.divDimmer.current.innerHTML=""},e.location.search?3e3:1e3)}else r.initialized=!0,!r.viduEnabled&&!r.jitsiEnabled||r.state.readyToJoinVidu||(console.log("set state initialized without timeout func"),r.setState({readyToJoinVidu:!0})),r.divDimmer.current.innerHTML="";r.editorUi.editor.graph.setDefaultParent(r.editorUi.editor.graph.model.getCell(MXGRAPH_ROOT_UUIDS[0])),r.setUsedGraph(ed(r.editorUi.editor.graph,r.editorUi)),o=[],e.onBoardInitialized(e.board,ed(r.editorUi.editor.graph,r.editorUi))})}},{key:"attachImageUploadListener",value:function(){var e=this;this.editorUi.editor.graph.onInsertImage(function(t){e.imageUploadedListener=function(n,r){t(n,r),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0)})}},{key:"attachLinkBoardListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkBoard(function(t,n){e.boardLinkListener=function(t){n(t),e.boardLinkHandle(!1),e.boardLinkListener=null},e.boardLinkHandle(!0,t)})}},{key:"attachLinkTaskListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkTask(function(t,n){e.taskLinkListener=function(t){n(t),e.taskLinkHandle(!1),e.taskLinkListener=null},e.taskLinkHandle(!0,t)})}},{key:"attachImageReplaceListener",value:function(){var e=this;this.editorUi.editor.graph.onReplaceImage(function(t,n){e.imageUploadedListener=function(t,r){n(t,r),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0,t)})}},{key:"attachChangeActiveGraphElementListener",value:function(){var e=this;this.editorUi.editor.graph.onChangeActiveGraphElement(function(t,n,r){if(!t)return e.activeGraphElement=void 0,void e.props.onActiveGraphElementChanged(e.props.board.uid,void 0);if(t.isEdge()){var a,o="Edge";return t.source&&t.target&&(o=inspectioUtils.getLabelText(t.source)+" -> "+inspectioUtils.getLabelText(t.target),a={source:t.source.getId(),target:t.target.getId()}),void e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:vi.edge,label:o,metadata:inspectioUtils.getMetadata(t),edgeData:a,updateMetadata:n,updateSimilarElements:r})}t.isVertex()&&e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:inspectioUtils.getTypeInclEdge(t),label:inspectioUtils.getLabelText(t),metadata:inspectioUtils.getMetadata(t),updateMetadata:n,updateSimilarElements:r}),e.activeGraphElement=t})}},{key:"attachSyncLabelChangedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.LABEL_CHANGED,function(t,n){var r=n.getProperty("cell");r.isVertex()&&e.activeGraphElement&&e.activeGraphElement.getId()===r.getId()&&e.props.onActiveGraphElementLabelChanged(e.props.board.uid,r.getId(),inspectioUtils.getLabelText(r))})}},{key:"syncActiveGraphElementWithRemoteChange",value:function(e){if(e instanceof mxValueChange){var t=e.cell;t&&t.isVertex()&&this.activeGraphElement&&this.activeGraphElement.getId()===t.getId()&&(this.props.onActiveGraphElementLabelChanged(this.props.board.uid,t.getId(),inspectioUtils.getLabelText(t)),this.props.onActiveGraphElementMetadataChanged(this.props.board.uid,t.getId(),inspectioUtils.getMetadata(t)))}}},{key:"attachLookupElementListener",value:function(e){this.editorUi.editor.graph.onLookupElement(function(t,n){n&&(t="type:".concat(n.toLowerCase(),";").concat(t)),e.filterElementsTree(e.board.uid,t,!0)})}},{key:"initializeAutoSaveManager",value:function(e){var t=this,n=mxAutoSaveManager.prototype.graphModelChanged,r=new mxAutoSaveManager(this.editorUi.editor.graph);r.autoSaveDelay=1,r.autoSaveThrottle=1,r.autoSaveThreshold=1,r.graphModelChanged=function(a){var o=[];t.sortChanges(a).forEach(function(e){return o.push(mxUtils.getXml(t.codec.encode(e)))}),t.boardSync?t.board=t.board.updateVersion(new Wl({userId:e.user.uid,version:t.boardSync.currentVersion()})):t.board=t.board.updateVersion(new Wl({userId:e.user.uid,version:t.board.version.version+1}));var i=t.detectHistoryAttributesFromChanges(a),s=i.action,c=i.type,u=i.label,l=i.cellId,d=M.localBoardChanged(e.board.uid,Object(fe.List)(o),t.boardSync?t.boardSync.currentVersion():t.board.version.version,e.user.uid,s,c,u,l);t.boardSync?t.boardSync.publishChanges(d):t.saveBoard(),t.syncChangesWithCody(d,a).catch(function(e){return console.error(e)}),e.onLocalBoardChanged(d),n.call(r,a)}}},{key:"setLiteMode",value:function(e){e.liteMode?this.editorUi.editor.graph.enableLiteMode():this.editorUi.editor.graph.disableLiteMode()}},{key:"attachShowElementDetailsListener",value:function(){var e=this;this.editorUi.editor.graph.onShowMetadata(function(t){e.props.toggleElementDetails(e.props.board.uid,!0,t)})}},{key:"attachCellConnectedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.CELL_CONNECTED,function(t,n){!n.getProperty("source")&&window.setTimeout(function(){e.editorUi.editor.graph.setSelectionCell(n.getProperty("terminal"))},10)})}},{key:"checkScrollToCells",value:function(e){var t=this;if(!this.initialized)return!1;var n=!1;if(e.board.xml&&e.location.search){var r=new URLSearchParams(e.location.search),a=this.editorUi.editor.graph,o=r.get("cells");if(o){if(this.lastFocusedCells===o&&this.lastClicks===r.get("clicks"))return!1;var i=null!==this.lastClicks;this.lastFocusedCells=o,this.lastClicks=r.get("clicks");var s=o.split(";"),c=[];s.forEach(function(e){var t=a.model.getCell(e);t&&c.push(t)}),c.length>0&&(a.scrollCellsIntoView(c,!0,!0,i),n=!0,1===parseInt(r.get("select")||"0")&&a.setSelectionCells(c))}}return window.setTimeout(function(){!t.viduEnabled&&!t.jitsiEnabled||t.state.readyToJoinVidu||(console.log("set state initialized in timout func"),t.setState({readyToJoinVidu:!0}))},1e3),n}},{key:"attachCodySyncListener",value:function(){var e=this;this.iioCody&&this.iioCody.onSyncRequired(Object(Ei.a)(fn.a.mark(function t(){var n,r,a,o,i,s,c,u,l,d,m;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.iioCody){t.next=45;break}if(n=e.editorUi.editor.graph,r=n.getAllVertexElementsOfActiveLayer(),a=[],o=Tt(e.props.board.uid),!r||!Array.isArray(r)){t.next=44;break}i=!0,s=!1,c=void 0,t.prev=9,u=r[Symbol.iterator]();case 11:if(i=(l=u.next()).done){t.next=24;break}if(m=l.value,(d=a).push.apply(d,Object(Xa.a)($l([new od(m,n.getModel(),!1,o)]))),!(a.length>=10)){t.next=21;break}return t.next=17,e.iioCody.syncNodes(e.props.board.uid,a);case 17:if(t.sent){t.next=20;break}return t.abrupt("return");case 20:a=[];case 21:i=!0,t.next=11;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(9),s=!0,c=t.t0;case 30:t.prev=30,t.prev=31,i||null==u.return||u.return();case 33:if(t.prev=33,!s){t.next=36;break}throw c;case 36:return t.finish(33);case 37:return t.finish(30);case 38:if(!(a.length>0)){t.next=44;break}return t.next=41,e.iioCody.syncNodes(e.props.board.uid,a);case 41:if(t.sent){t.next=44;break}return t.abrupt("return",!1);case 44:e.iioCody.syncFinished();case 45:case"end":return t.stop()}},t,this,[[9,26,30,38],[31,,33,37]])})))}},{key:"attachCodyListener",value:function(){var e=this,t=this.editorUi.editor.graph;t.onTriggerCody(function(n){if(e.props.board&&!e.props.board.shouldShowCodyConsole&&e.props.toggleCodyConsole(e.props.board.uid,!0),e.iioCody){var r=n.map(function(n){return new od(n,t.getModel(),!1,Tt(e.props.board.uid))});e.iioCody.trigger.Cody(e.props.board.uid,$l(r).filter(function(e){return e.getType()!==vi.edge}))}})}},{key:"initRealtimeBoardSync",value:function(e){var t=this;this.boardSync=new pv(Te,e.board,e.user.uid,e.user.displayName,function(n,r){var a=[];if(n.action===Zl.added&&t.editorUi.editor.graph.model.getCell(n.cellId))console.log("[BoardSync] skipping patch, because it wants to add a cell that already exists: ",n.toJS());else{n.changeSet.forEach(function(e){var n=mxUtils.parseXml(e),r=t.codec.decode(n.documentElement);r.model=t.editorUi.editor.graph.model,r.execute(),a.push(r),t.syncActiveGraphElementWithRemoteChange(r)});var o=new mxUndoableEdit(t.editorUi.editor.graph.model,!1);o.changes=a,o.notify=function(){o.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",o,"changes",o.changes))},t.editorUi.editor.graph.model.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",o,"changes",a)),t.syncChangesWithCody(n,a).catch(function(e){return console.error(e)}),console.log("[BoardSync] Applied remote board change: ",n.toBoardVersion().version),t.board=t.board.updateVersion(new Wl({userId:e.user.uid,version:t.boardSync.currentVersion()})),e.onLocalBoardUpdatedWithRemoteChange(t.board.uid,t.board,ed(t.editorUi.editor.graph,t.editorUi)),r&&e.onRemoteBoardChanged(n)}},function(){t.board=t.board.updateVersion(new Wl({userId:e.user.uid,version:t.boardSync.currentVersion()})),t.saveBoard()}),this.boardSync.startSync()}},{key:"initMouseSync",value:function(e){var t=this,n=0,r=this.editorUi.editor.graph,a=document.getElementById("topmenu");a&&(n=a.clientHeight),this.mouseSync=new Ev(Te,this.divGraph.current,r,function(e){var t=r.view.scale,a=r.view.translate;return{x:(e.x+a.x)*t,y:(e.y+a.y)*t+n}}),this.mouseSync.onUserJoined(function(n,r,a,o){return t.addActiveUser(e,n,r,a,o)}),this.mouseSync.onUserLeft(function(e){return t.removeActiveUser(e)}),this.mouseSync.startSync({userId:e.user.uid,name:e.user.displayName,avatar:e.user.avatarUrl,boardId:e.board.uid}),this.iioCody=ev,this.attachCodySyncListener(),r.addListener(mxEvent.FIRE_MOUSE_EVENT,function(n,a){var o=a.getProperty("eventName"),i=a.getProperty("event");if(i){var s=r.view.scale,c=r.view.translate,u=i.getGraphX()/s-c.x,l=i.getGraphY()/s-c.y;o!==mxEvent.MOUSE_MOVE||!t.mouseSync||r.panningHandler.isActive()||r.panningHandler.physicsActive||t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:u,y:l},vT:c,scale:s,isPanning:!1})}}),r.addListener(r.EVT_USER_IS_PANNING,function(n,r){if(t.mouseSync){var a=r.getProperty("me"),o=r.getProperty("scale"),i=r.getProperty("translate"),s=r.getProperty("mouseDelta");if(!a)return;var c=a.getGraphX()/o-i.x,u=a.getGraphY()/o-i.y;t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:c,y:u},vT:i,scale:o,isPanning:!0},s)}}),r.addListener(r.EVT_PANNING_PHYSICS_CLEARED,function(){t.mouseSync&&t.mouseSync.syncLastKnownAbsolutePointsAfterPanning()}),r.addListener(r.EVT_USER_IS_ZOOMING,function(n,a){t.mouseSync.emitUserMouseScroll({userId:e.user.uid,boardId:e.board.uid,vT:r.view.translate,scale:r.view.scale})}),r.addListener(r.EVT_USER_IS_TYPING,function(n,r){var a=r.getProperty("typing");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?mv.Typing:mv.Default})}),r.addListener(r.EVT_USER_IS_MOVING,function(n,r){var a=r.getProperty("moving");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?mv.Moving:mv.Default})}),r.addListener(r.EVT_USER_IS_AUTO_SCROLLING,function(n,r){t.mouseSync&&t.mouseSync.emitUserIsAutoScrolling({userId:e.user.uid,boardId:e.board.uid,scale:r.getProperty("scale"),translate:r.getProperty("translate"),isPanning:r.getProperty("isPanning")})}),this.setUsedMouseSync(this.mouseSync)}},{key:"addActiveUser",value:function(e,t,n,r,a){var o=this;if(t!==e.user.uid){console.log("[mousesync] Adding active user to topmenu: ",t);var i=document.getElementById("topmenuUsers"),s=document.createElement("div");s.classList.add("item");var c=document.createElement("div");c.id="topmenuUsers-"+t,c.classList.add("ui","circular","label","observable","user"),c.style.backgroundColor=a,c.style.backgroundSize="cover",""!==r?c.style.backgroundImage="url('"+r+"')":c.innerText=n[0].toUpperCase(),c.setAttribute("data-tooltip",n),c.setAttribute("data-position","bottom center"),c.addEventListener("click",function(e){return o.toggleObserveUser(e.target)}),s.append(c),i.append(s)}}},{key:"removeActiveUser",value:function(e){console.log("[mousesync] Removing active user from topmenu: ",e);var t=document.getElementById("topmenuUsers-"+e);t&&t.parentElement.remove()}},{key:"toggleObserveUser",value:function(e){e instanceof HTMLElement&&(e.classList.contains("observed")?(e.classList.remove("observed"),this.mouseSync.stopObservingUser()):(this.unsetCurrentObservedUser(),this.mouseSync.stopObservingUser(),e.classList.add("observed"),this.mouseSync.observeUser(this.getUserIdFromLabelId(e.id))))}},{key:"unsetCurrentObservedUser",value:function(){document.getElementById("topmenuUsers").childNodes.forEach(function(e){e.firstChild instanceof HTMLElement&&e.firstChild.classList.remove("observed")})}},{key:"getUserIdFromLabelId",value:function(e){return e.replace("topmenuUsers-","")}},{key:"sortChanges",value:function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){e instanceof mxGeometryChange?1===e.cell.edge||!0===e.cell.edge?n.push(e):t.push(e):e instanceof mxChildChange&&(1===e.child.edge||!0===e.child.edge)?n.push(e):t.push(e)}),t.push.apply(t,n),t}},{key:"detectHistoryAttributesFromChanges",value:function(e){if(3===(e=this.filterOutMxStyleChange(e)).length&&e[0]instanceof mxGeometryChange&&e[1]instanceof mxGeometryChange&&e[2]instanceof mxChildChange)return Object(Ye.a)({action:null===e[2].previous?Zl.added:Zl.moved},this.detectHistoryCellTypeAndLabelFromChange(e[2]));if(1===e.length&&e[0]instanceof mxGeometryChange)return Object(Ye.a)({action:Zl.moved},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxChildChange&&null===e[0].parent)return Object(Ye.a)({action:Zl.deleted},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxValueChange)return Object(Ye.a)({action:Zl.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(2===e.length&&e[0]instanceof mxValueChange&&e[1]instanceof mxGeometryChange)return Object(Ye.a)({action:Zl.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(e.length>=4&&e[1]instanceof mxTerminalChange&&e[2]instanceof mxTerminalChange)return Object(Ye.a)({action:Zl.added},this.detectHistoryCellTypeAndLabelFromChange(e[0]));var t=!0,n=[];if(e.forEach(function(e){e instanceof mxGeometryChange?n.push(e.cell.id):t=!1}),t)return{action:Zl.moved,type:hd.multiple,label:"",cellId:n.join(";")};var r=!0;if(n=[],e.forEach(function(e){e instanceof mxChildChange&&null===e.parent?n.push(e.child.id):r=!1}),r)return{action:Zl.deleted,type:hd.multiple,label:"",cellId:n.join(";")};var a=!0,o=null;if(e.forEach(function(t,n){n%2===0&&(!(t instanceof mxChildChange&&e[n+1]instanceof mxGeometryChange)||null!==o&&o!==t.parent&&1!==t.child.edge||!inspectioUtils.isContainer(t.parent)&&1!==t.child.edge?a=!1:1!==t.child.edge&&(o=t.parent))}),o&&a)return{action:Zl.edited,type:inspectioUtils.getTypeInclEdge(o)||hd.misc,label:inspectioUtils.getLabelText(o),cellId:o.id};if(e[e.length-1]instanceof mxChildChange&&null===e[e.length-1].parent){var i=e[e.length-1].child;return{action:Zl.deleted,type:inspectioUtils.getTypeInclEdge(i)||hd.misc,label:inspectioUtils.getLabelText(i),cellId:i.id}}var s=!0;return n=[],e.forEach(function(e,t){e instanceof mxGeometryChange||e instanceof mxChildChange?e instanceof mxGeometryChange&&n.push(e.cell.id):s=!1}),s?{action:Zl.moved,type:hd.multiple,label:"",cellId:n.join(";")}:{action:Zl.edited,type:hd.misc,label:""}}},{key:"detectHistoryCellTypeAndLabelFromChange",value:function(e){var t,n=!1,r="";return e.cell?(n=inspectioUtils.getTypeInclEdge(e.cell),r=inspectioUtils.getLabelText(e.cell),t=e.cell.id):e.child&&(n=inspectioUtils.getTypeInclEdge(e.child),r=inspectioUtils.getLabelText(e.child),t=e.child.id),n||(n=hd.misc),{type:n,label:r,cellId:t}}},{key:"filterOutMxStyleChange",value:function(e){return e.filter(function(e){return!(e instanceof mxStyleChange)})}}]),t}(ge.Component),BO=ce.makeMapStateToPropsMxGraphBoard(),RO=Object(Me.connect)(BO,function(e){return Object(pt.bindActionCreators)({fetchUserBoard:N.fetchUserBoard,onError:i.Command.error,onInfo:i.Command.info,saveBoard:B.saveBoard,clearBoardHistory:B.clearBoardHistory,onBoardImportStarted:R.boardImportStarted,onBoardImported:R.boardImported,onBoardExported:R.boardExported,onBoardInitialized:R.boardInitialized,onLocalBoardChanged:R.localBoardChanged,onRemoteBoardChanged:R.remoteBoardChanged,onLocalBoardUpdatedWithRemoteChange:R.localBoardUpdatedWithRemoteChange,filterElementsTree:B.filterElementsTree,onActiveGraphElementChanged:R.activeGraphElementChanged,onActiveGraphElementLabelChanged:R.activeGraphElementLabelChanged,onActiveGraphElementMetadataChanged:R.activeGraphElementMetadataChanged,toggleElementDetails:B.toggleElementDetails,toggleCodyConsole:B.toggleCodyConsole},e)},void 0,{pure:!1})(UO),NO=fn.a.mark(DO),LO=fn.a.mark(PO);function DO(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(uh(e.payload.boardId,e.payload.teamId));case 2:if(!(t=a.sent)){a.next=18;break}return t=t.changePermissions(e.payload.permissions),a.next=7,Object(hn.c)(L.Api.adminChangeTeamBoardPermissions,e.payload.boardId,e.payload.teamId,e.payload.permissions);case 7:if(n=a.sent,r=n.response,!n.error){a.next=13;break}return a.next=13,Object(hn.g)(i.Command.error("Request Error","Could not change team permissions."));case 13:if(!r){a.next=18;break}return a.next=16,Object(hn.g)(L.Event.teamBoardPermissionsChanged(t));case 16:return a.next=18,Object(hn.g)(i.Command.info("Permissions Changed","Team permissions changed successfully."));case 18:case"end":return a.stop()}},NO,this)}function PO(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(hn.f)(DO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},LO,this)}var MO=fn.a.mark(zO);function zO(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(hn.k)([_.CHANGE_BOARD_ABBREVIATION]);case 3:return e=r.sent,r.next=6,Object(hn.c)(U.changeBoardAbbreviation,e.payload.board.uid,e.payload.board.nameAbbreviation);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(hn.g)(i.Command.error("Request Error","Could not change abbr."));case 12:return r.next=14,Object(hn.g)(N.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(hn.g)(i.Command.info("Abbreviation changed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},MO,this)}var FO=fn.a.mark(VO),GO=fn.a.mark(function e(t){var n,r;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.changeBoardPermissions,t.payload.boardId,t.payload.userId,t.payload.permissions);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed changing the board permissions."));case 8:if(!r){e.next=13;break}return e.next=11,Object(hn.g)(i.Command.info("Permissions Changed","Board permissions were changed successfully."));case 11:return e.next=13,Object(hn.g)(R.boardPermissionsChanged(t.payload.boardId,t.payload.userId,t.payload.permissions));case 13:case"end":return e.stop()}},e,this)});function VO(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.CHANGE_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(hn.f)(GO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},FO,this)}var HO=fn.a.mark(WO);function WO(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(hn.k)([_.CHANGE_RESPONSIBLE_TEAM]);case 3:return e=r.sent,r.next=6,Object(hn.c)(U.changeResponsibleTeam,e.payload.board.uid,e.payload.board.responsibleTeam);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(hn.g)(i.Command.error("Request Error","Could not change responsible team."));case 12:return r.next=14,Object(hn.g)(N.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(hn.g)(i.Command.info("Responsible team changed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},HO,this)}var qO=function(e){return"@@Inspectio/Board/:id".replace(":id",e)},JO=function(){var e=localStorage.getItem("@@Inspectio/Boards");return null===e?Object(fe.List)():Object(fe.fromJS)(JSON.parse(e))},YO=function(e,t){try{var n=JO();n.includes(e)&&(n=n.delete(n.indexOf(e)),localStorage.setItem("@@Inspectio/Boards",JSON.stringify(n.toJSON())),localStorage.removeItem(qO(e)))}catch(r){t(r)}},QO=fn.a.mark(ZO),KO=fn.a.mark(XO);function ZO(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=null,YO(e.payload.boardId,function(e){t=e}),!t){o.next=6;break}return n=i.Command.error("Failed to delete board in local storage",t),o.next=6,Object(hn.g)(n);case 6:return o.next=8,Object(hn.c)(U.deleteBoard,e.payload.boardId);case 8:if(r=o.sent,a=r.response,!r.error){o.next=14;break}return o.next=14,Object(hn.g)(i.Command.error("Request Error","Could not delete board."));case 14:if(!a){o.next=17;break}return o.next=17,Object(hn.g)(i.Command.info("Board deleted","Board deleted"));case 17:case"end":return o.stop()}},QO,this)}function XO(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.DELETE_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(ZO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},KO,this)}var $O=fn.a.mark(oy),ey=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!(a=n.error)){e.next=13;break}if(404!==a.status){e.next=11;break}return e.next=9,Object(hn.g)(R.boardClientNotConfigured(t.payload.boardId));case 9:e.next=13;break;case 11:return e.next=13,Object(hn.g)(i.Command.error("Request Error","Failed to load board client"));case 13:if(!r){e.next=21;break}if(!Cn(o=Ln(r.data,Bn([Pn("clientId"),"Response data does not contain key clientId"])))){e.next=18;break}return e.next=18,Object(hn.g)(i.Command.error("Request Error","Could not load board client"));case 18:if(!wn(o)){e.next=21;break}return e.next=21,Object(hn.g)(R.boardClientFetched(t.payload.boardId,o.value));case 21:case"end":return e.stop()}},e,this)}),ty=fn.a.mark(function e(t){var n,r,a;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load board client secret"));case 8:if(!r){e.next=16;break}if(!Cn(a=Ln(r.data,Bn([Pn("clientSecret"),"Response data does not contain key clientSecret"])))){e.next=13;break}return e.next=13,Object(hn.g)(i.Command.error("Request Error","Could not load board client secret"));case 13:if(!wn(a)){e.next=16;break}return e.next=16,Object(hn.g)(R.boardClientSecretFetched(t.payload.boardId,a.value.clientSecret));case 16:case"end":return e.stop()}},e,this)}),ny=fn.a.mark(function e(t){var n,r;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.createBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to create board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(hn.c)(ey,t);case 11:case"end":return e.stop()}},e,this)}),ry=fn.a.mark(function e(t){var n,r;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.removeBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to remove board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(hn.g)(R.boardClientNotConfigured(t.payload.boardId));case 11:case"end":return e.stop()}},e,this)}),ay=fn.a.mark(function e(t){var n,r;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.resetBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to reset board client secret"));case 8:if(!r){e.next=11;break}return e.next=11,Object(hn.c)(ty,t);case 11:case"end":return e.stop()}},e,this)});function oy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.FETCH_BOARD_CLIENT,_.FETCH_BOARD_CLIENT_SECRET,_.CREATE_BOARD_CLIENT,_.REMOVE_BOARD_CLIENT,_.RESET_BOARD_CLIENT_SECRET]);case 3:if((e=t.sent).type!==_.FETCH_BOARD_CLIENT){t.next=9;break}return t.next=7,Object(hn.f)(ey,e);case 7:t.next=27;break;case 9:if(e.type!==_.FETCH_BOARD_CLIENT_SECRET){t.next=14;break}return t.next=12,Object(hn.f)(ty,e);case 12:t.next=27;break;case 14:if(e.type!==_.CREATE_BOARD_CLIENT){t.next=19;break}return t.next=17,Object(hn.f)(ny,e);case 17:t.next=27;break;case 19:if(e.type!==_.REMOVE_BOARD_CLIENT){t.next=24;break}return t.next=22,Object(hn.f)(ry,e);case 22:t.next=27;break;case 24:if(e.type!==_.RESET_BOARD_CLIENT_SECRET){t.next=27;break}return t.next=27,Object(hn.f)(ay,e);case 27:t.next=0;break;case 29:case"end":return t.stop()}},$O,this)}var iy=fn.a.mark(cy),sy=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchBoardGraphElements,t.payload.boardId,t.payload.type);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load board graph elements"));case 8:if(!r){e.next=17;break}if(!Cn(a=Ln(r.data,Bn([Mn(),"Response data is no array"]),Nn(function(e){return xd(e)})))){e.next=13;break}return e.next=13,Object(hn.g)(i.Command.error("Request Error","Could not load board graph elements"));case 13:if(!wn(a)){e.next=17;break}return o=Object(fe.List)(a.value),e.next=17,Object(hn.g)(R.boardGraphElementsFetched(t.payload.boardId,o));case 17:case"end":return e.stop()}},e,this)});function cy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(_.FETCH_BOARD_GRAPH_ELEMENTS);case 3:return e=t.sent,t.next=6,Object(hn.f)(sy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},iy,this)}var uy=fn.a.mark(my),ly=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchBoardPermissionsForUsers,t);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!Cn(a=Ln(r.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(e){return Nd(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!wn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(hn.g)(R.boardPermissionsForUsersFetched(o));case 18:case"end":return e.stop()}},e,this)}),dy=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchBoardPermissionsForTeams,t);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!Cn(a=Ln(r.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(e){return Ud(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!wn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(hn.g)(R.boardPermissionsForTeamsFetched(o));case 18:case"end":return e.stop()}},e,this)});function my(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.FETCH_BOARD_PERMISSIONS_FOR_USERS,_.FETCH_BOARD_PERMISSIONS_FOR_TEAMS,W.Type.TEAM_ACCESS_TO_BOARD_GRANTED,W.Type.TEAM_ACCESS_TO_BOARD_REVOKED]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===vc?7:t.t0===Oc?10:t.t0===W.Type.TEAM_ACCESS_TO_BOARD_GRANTED?10:t.t0===W.Type.TEAM_ACCESS_TO_BOARD_REVOKED?10:13;break;case 7:return t.next=9,Object(hn.f)(ly,e.payload.boardId);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(hn.f)(dy,e.payload.boardId);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},uy,this)}var py=fn.a.mark(hy),fy=fn.a.mark(by);function hy(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(hn.c)(L.Api.fetchBoardStickyTemplates,e.payload.boardId);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load sticky templates"));case 8:if(!n){o.next=18;break}if(!Cn(r=Ln(n.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(e){return Bh(e)})))){o.next=14;break}return console.error("Failed to process sticky templates response from server",r.value,n.data),o.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 14:if(!wn(r)){o.next=18;break}return a=Object(fe.List)(r.value),o.next=18,Object(hn.g)(L.Event.boardStickyTemplatesFetched(a));case 18:case"end":return o.stop()}},py,this)}function by(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(hn.f)(hy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},fy,this)}var gy=fn.a.mark(Oy),vy=fn.a.mark(function e(t){var n,r,a,o;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.c)(U.fetchOpenBoardInvitations,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to load open board invitations"));case 8:if(!r){e.next=18;break}if(!Cn(a=Ln(r.data,Bn([Mn(),"Response data is not of type Array"]),Nn(function(e){return wd(e)})))){e.next=14;break}return console.error("Failed to process open board invitations response from server",a.value,r.data),e.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load open board invitations"));case 14:if(!wn(a)){e.next=18;break}return o=Object(fe.List)(a.value),e.next=18,Object(hn.g)(R.openBoardInvitationsFetched(o));case 18:case"end":return e.stop()}},e,this)});function Oy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.FETCH_OPEN_BOARD_INVITATIONS]);case 3:return e=t.sent,t.next=6,Object(hn.f)(vy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},gy,this)}var yy=fn.a.mark(Iy),Ey=fn.a.mark(function e(t){var n,r,a,o,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.i)(Yb(t.payload.boardId));case 2:if(!(n=e.sent)||!n.tempBoard){e.next=7;break}return e.next=6,Object(hn.g)(B.setBoardDetailsFetched(t.payload.boardId,!1));case 6:return e.abrupt("return");case 7:return e.next=9,Object(hn.c)(U.fetchUserBoard,t.payload.boardId);case 9:if(r=e.sent,a=r.response,!r.error){e.next=15;break}return e.next=15,Object(hn.g)(i.Command.error("Request Error","Failed to load board"));case 15:if(!a){e.next=26;break}return o=new P.Board({uid:a.data.boardId,name:a.data.name,nameAbbreviation:a.data.nameAbbreviation,tags:Object(fe.List)(a.data.tags),createdAt:a.data.createdAt,lastModified:a.data.lastModified,version:new D.BoardVersion(a.data.boardVersion),shared:a.data.shared,sharedWith:Object(fe.List)(a.data.sharedWith),assignedTeams:Object(fe.List)(a.data.assignedTeams),responsibleTeam:a.data.responsibleTeam?a.data.responsibleTeam:void 0,writeAccess:a.data.writeAccess,owner:a.data.owner,creator:a.data.creator,organization:a.data.organization,tempBoard:!1}),s=null,a.data.snapshot&&(s=new z.BoardSnapshot({boardId:a.data.boardId,xml:a.data.snapshot.content,boardVersion:new D.BoardVersion(a.data.snapshot.boardVersion)})),e.next=21,Object(hn.g)(B.updateBoards([o]));case 21:if(!s){e.next=24;break}return e.next=24,Object(hn.g)(lu(s));case 24:return e.next=26,Object(hn.g)(B.setBoardDetailsFetched(o.uid,o.writeAccess));case 26:case"end":return e.stop()}},e,this)});function Iy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.FETCH_USER_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Ey,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},yy,this)}var ky=function(e){var t=Un(e,[Pn("userId"),"userId missing"],[Pn("values"),"values missing in "+e.userId]);return Cn(t)?t:_n(new Sy({userId:e.userId,values:e.values}))},Sy=function(e){function t(e){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).call(this,e))}return Object(De.a)(t,e),t}(Object(fe.Record)({userId:"",values:{}})),jy=fn.a.mark(xy);function xy(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(hn.c)(u.getUserSettings);case 2:if(e=r.sent,t=e.response,!e.error){r.next=8;break}return r.next=8,Object(hn.g)(i.Command.error("Request Error","Could not load user settings"));case 8:if(!t){r.next=17;break}if(!Cn(n=ky(t.data))){r.next=14;break}return console.error("Failed to process user settings response from server",n.value,t.data),r.next=14,Object(hn.g)(i.Command.error("Request Error","Could not load user settings"));case 14:if(!wn(n)){r.next=17;break}return r.next=17,Object(hn.g)(l.userSettingsLoaded(n.value));case 17:case"end":return r.stop()}},jy,this)}var Ty=fn.a.mark(Uy),Cy=fn.a.mark(By),wy=fn.a.mark(Ry),Ay=fn.a.mark(Ny),_y=fn.a.mark(Ly);function Uy(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.i)(A.currentUserSelector,void 0);case 2:return t=(t=(t=(t=(t=n.sent).set("quota",e.data.quota)).set("teamQuota",e.data.teamQuota)).set("signedIn",!0)).set("activeOrganization",e.data.activeOrganization||null),n.next=9,Object(hn.g)(f.Command.signIn(t));case 9:case"end":return n.stop()}},Ty,this)}function By(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(hn.g)(N.startFetchUserBoards());case 2:return r.next=4,Object(hn.c)(U.fetchUserBoards);case 4:if(e=r.sent,t=e.response,!e.error){r.next=10;break}return r.next=10,Object(hn.g)(i.Command.error("Request Error","Could not load boards"));case 10:if(!t){r.next=14;break}return n=Object(Dn.map)(t.data,function(e){return new P.Board({uid:e.boardId,name:e.name,nameAbbreviation:e.nameAbbreviation,tags:Object(fe.List)(e.tags),createdAt:e.createdAt,lastModified:e.lastModified,version:new Wl(e.version),shared:e.shared,sharedWith:Object(fe.List)(e.sharedWith),assignedTeams:Object(fe.List)(e.assignedTeams),responsibleTeam:e.responsibleTeam||void 0,example:e.example||!1,owner:e.ownerId,creator:e.creatorId,organization:e.organization,tempBoard:!1})}),r.next=14,Object(hn.g)(cu(n));case 14:case"end":return r.stop()}},Cy,this)}function Ry(e){var t,n,r,a,o,s;return fn.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(hn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 2:if(t=c.sent,n=t.response,!(r=t.error)||404!==r.status){c.next=21;break}return a=rt.a.v4(),c.next=9,Object(hn.c)(j.Api.installUserOrganization,a);case 9:if(!(o=c.sent).error){c.next=13;break}return c.next=13,Object(hn.g)(i.Command.error("Request Error","Could not initialize organization."));case 13:if(!o.response){c.next=19;break}return c.next=16,Object(hn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 16:return s=c.sent,c.next=19,Uy(s.response);case 19:c.next=23;break;case 21:return c.next=23,Uy(n);case 23:return c.next=25,Object(hn.c)(xy);case 25:return c.next=27,Object(hn.g)(j.Query.fetchUserOrganizations());case 27:return c.next=29,Object(hn.e)(500);case 29:return c.next=31,Object(hn.c)(By);case 31:return c.next=33,Object(hn.c)(lp);case 33:return c.next=35,Object(hn.g)(cl());case 35:case"end":return c.stop()}},wy,this)}function Ny(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,By();case 2:case"end":return e.stop()}},Ay,this)}function Ly(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([te.Type.USER_AUTHENTICATED,_.FETCH_USER_BOARDS]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===te.Type.USER_AUTHENTICATED?7:t.t0===_.FETCH_USER_BOARDS?10:13;break;case 7:return t.next=9,Object(hn.f)(Ry,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(hn.f)(Ny);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},_y,this)}var Dy=fn.a.mark(My),Py=fn.a.mark(zy);function My(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.board,o.next=3,Object(hn.i)(Yb(t.uid));case 3:return n=o.sent,o.next=6,Object(hn.g)(B.forceUpdateBoards([t]));case 6:return o.next=8,Object(hn.c)(U.takeBoardSnapshot,t.uid,t.version,t.xml);case 8:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=14,Object(hn.g)(i.Command.error("Server Error","Could not import existing board."));case 14:return o.next=16,Object(hn.g)(B.forceUpdateBoards([n]));case 16:return o.abrupt("return");case 17:if(!a){o.next=20;break}return o.next=20,Object(hn.g)(i.Command.info("Board imported:",t.name));case 20:case"end":return o.stop()}},Dy,this)}function zy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(My,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Py,this)}var Fy=fn.a.mark(Vy),Gy=fn.a.mark(Hy);function Vy(e){var t,n,r,a,o,s,c,u,l,d;return fn.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.payload.boardId||nt.v4(),m.next=3,Object(hn.i)(Vl());case 3:if(n=m.sent){m.next=8;break}return m.next=7,Object(hn.g)(i.Command.error("Board Import Failed","No organization selected."));case 7:return m.abrupt("return");case 8:if(r=null,e.payload.importTemporary){m.next=13;break}return m.next=12,Object(hn.c)(U.installOrganizationBoard,n.organizationId,t,e.payload.boardName,Jl(e.payload.boardName),[]);case 12:r=m.sent;case 13:if(!r||!r.error){m.next=16;break}return m.next=16,Object(hn.g)(i.Command.error("Request Error","Could not add board."));case 16:if(!(r&&r.response||e.payload.importTemporary)){m.next=32;break}if(e.payload.importTemporary){m.next=20;break}return m.next=20,Object(hn.g)(i.Command.info("Board created","Board created"));case 20:return a=A.makeGetCurrentUser(),m.next=23,Object(hn.i)(a);case 23:return o=m.sent,s=new Kl({uid:t,name:e.payload.boardName,nameAbbreviation:Jl(e.payload.boardName),tags:Object(fe.List)(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,version:new Wl({userId:o.uid,version:1}),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),owner:null,creator:o.uid,organization:n.organizationId,tempBoard:!!e.payload.importTemporary}),m.next=27,Object(hn.g)(B.updateBoards([s]));case 27:return c=Ng(),u=Object(Qe.a)(c,2),u[0],l=u[1],d=td(s.xml||void 0),l(d),m.next=32,Object(hn.g)(B.saveBoard(s,d));case 32:case"end":return m.stop()}},Fy,this)}function Hy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Vy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Gy,this)}var Wy=fn.a.mark(Jy),qy=fn.a.mark(Yy);function Jy(e){var t,n,r,a,o,s,c,u,l;return fn.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t=e.payload.stickyTemplates.toJS(),n=[],r=!0,a=!1,o=void 0,d.prev=5,s=t[Symbol.iterator]();case 7:if(r=(c=s.next()).done){d.next=28;break}return u=c.value,d.next=11,Object(hn.c)(L.Api.setStickyTemplate,u.boardId,u.cellType,u.template);case 11:if(l=d.sent,l.response,!l.error){d.next=18;break}return d.next=17,Object(hn.g)(i.Command.error("Request Error","Could not set sticky template for "+u.cellType));case 17:return d.abrupt("continue",25);case 18:return n.push(u),d.next=21,Object(hn.c)(L.Api.updateStickyAdvancedConfig,u.boardId,u.cellType,u.templateType,u.templateSchema||void 0);case 21:if(!d.sent.error){d.next=25;break}return d.next=25,Object(hn.g)(i.Command.error("Request Error","Could not update sticky advanced config for "+u.cellType));case 25:r=!0,d.next=7;break;case 28:d.next=34;break;case 30:d.prev=30,d.t0=d.catch(5),a=!0,o=d.t0;case 34:d.prev=34,d.prev=35,r||null==s.return||s.return();case 37:if(d.prev=37,!a){d.next=40;break}throw o;case 40:return d.finish(37);case 41:return d.finish(34);case 42:return d.next=44,Object(hn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 44:return d.next=46,Object(hn.g)(L.Event.stickyTemplatesImported(Object(fe.List)(n)));case 46:e.payload.finishedCb();case 47:case"end":return d.stop()}},Wy,this,[[5,30,34,42],[35,,37,41]])}function Yy(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Jy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},qy,this)}var Qy=fn.a.mark(Ky);function Ky(){var e,t,n,r,a,o;return fn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=3,Object(hn.k)([_.ADD_BOARD]);case 3:return e=s.sent,s.next=6,Object(hn.i)(Vl());case 6:if(t=s.sent,console.log("install user board flow: ",e.payload.board.toJS()),!t){s.next=36;break}return s.next=11,Object(hn.c)(U.installOrganizationBoard,t.organizationId,e.payload.board.uid,e.payload.board.name,e.payload.board.nameAbbreviation,e.payload.board.tags.toJS(),e.payload.board.responsibleTeam);case 11:if(n=s.sent,r=n.response,!n.error){s.next=17;break}return s.next=17,Object(hn.g)(i.Command.error("Request Error","Could not add board."));case 17:if(!r){s.next=34;break}return s.next=20,Object(hn.g)(i.Command.info("Board created","Board created"));case 20:return s.next=22,Object(hn.c)(e.payload.history.push,It(e.payload.board.uid));case 22:return s.next=24,Object(hn.e)(1e3);case 24:return s.next=26,Object(hn.c)(U.fetchUserBoard,e.payload.board.uid);case 26:if(!(a=s.sent).error){s.next=30;break}return s.next=30,Object(hn.g)(i.Command.error("Request Error","Failed to load board"));case 30:if(!a.response){s.next=34;break}return o=new P.Board({uid:a.response.data.boardId,name:a.response.data.name,nameAbbreviation:r.data.nameAbbreviation,tags:Object(fe.List)(a.response.data.tags),createdAt:a.response.data.createdAt,lastModified:a.response.data.lastModified,version:new D.BoardVersion(a.response.data.boardVersion),shared:a.response.data.shared,sharedWith:Object(fe.List)(a.response.data.sharedWith),assignedTeams:Object(fe.List)(a.response.data.assignedTeams),responsibleTeam:a.response.data.responsibleTeam?a.response.data.responsibleTeam:void 0,writeAccess:a.response.data.writeAccess,owner:a.response.data.owner,creator:a.response.data.creator,organization:a.response.data.organization,tempBoard:!1}),s.next=34,Object(hn.g)(B.forceUpdateBoards([o]));case 34:s.next=38;break;case 36:return s.next=38,Object(hn.g)(i.Command.error("Board Installation Failed","No organization selected."));case 38:s.next=0;break;case 40:case"end":return s.stop()}},Qy,this)}var Zy=fn.a.mark($y),Xy=fn.a.mark(eE);function $y(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(L.Api.moveUserBoardToOrganization,e.payload.organizationId,e.payload.boardId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("Request Error","Could not move board to organization."));case 8:if(!n){a.next=21;break}return a.next=11,Object(hn.g)(L.Query.fetchUserBoards());case 11:return a.next=13,Object(hn.g)(j.Query.fetchUserOrganizations());case 13:return a.next=15,Object(hn.i)(Yb(e.payload.boardId));case 15:if(!(r=a.sent)){a.next=19;break}return a.next=19,Object(hn.g)(L.Event.userBoardMovedToOrganization(r.moveToOrganization(e.payload.organizationId)));case 19:return a.next=21,Object(hn.g)(i.Command.info("Board moved","The board has been moved to the organization."));case 21:case"end":return a.stop()}},Zy,this)}function eE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.MOVE_USER_BOARD_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)($y,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Xy,this)}var tE=fn.a.mark(nE);function nE(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(hn.k)([_.RENAME_BOARD]);case 3:return e=r.sent,r.next=6,Object(hn.c)(U.renameBoard,e.payload.board.uid,e.payload.board.name);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(hn.g)(i.Command.error("Request Error","Could not rename board."));case 12:return r.next=14,Object(hn.g)(N.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(hn.g)(i.Command.info("Board renamed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},tE,this)}var rE=fn.a.mark(oE),aE=fn.a.mark(iE);function oE(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(Ih(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(hn.c)(U.resendBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not resend board invitation"));case 12:if(!r){a.next=15;break}return a.next=15,Object(hn.g)(i.Command.info("insp.board.notify.invitation_resend.success.title","insp.board.notify.invitation_resend.success.msg"));case 15:return a.next=17,Object(hn.g)(R.boardInvitationResent(t.resend()));case 17:case"end":return a.stop()}},rE,this)}function iE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.RESEND_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(oE,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},aE,this)}var sE=fn.a.mark(uE),cE=fn.a.mark(lE);function uE(e){var t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(hn.c)(U.revokeAccessToBoard,e.payload.boardId,e.payload.userId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(hn.g)(i.Command.error("Request Error","Failed to revoke access to board."));case 8:if(!n){r.next=13;break}return r.next=11,Object(hn.g)(i.Command.info("Access Revoked","Access to board revoked."));case 11:return r.next=13,Object(hn.g)(R.boardAccessRevoked(e.payload.boardId,e.payload.userId));case 13:case"end":return r.stop()}},sE,this)}function lE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.REVOKE_ACCESS_TO_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(uE,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},cE,this)}var dE=fn.a.mark(pE),mE=fn.a.mark(fE);function pE(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(Ih(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(hn.c)(U.revokeBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not revoke board invitation"));case 12:if(!r){a.next=17;break}return a.next=15,Object(hn.g)(i.Command.info("insp.board.notify.invitation_revoke.success.title","insp.board.notify.invitation_revoke.success.msg"));case 15:return a.next=17,Object(hn.g)(R.boardInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},dE,this)}function fE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.REVOKE_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(hn.f)(pE,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},mE,this)}var hE=fn.a.mark(gE),bE=fn.a.mark(vE);function gE(e,t){var n,r,a,o,s,c,u,l;return fn.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(n=Ng(),r=Object(Qe.a)(n,1),a=r[0],console.log("saveBoardFlow: ",e.payload.board.version.version,e.payload.board.version.version%20),!e.payload.board.tempBoard){d.next=5;break}return console.log("saveBoardFlow: ","Skipping save of temp board"),d.abrupt("return");case 5:if(!(e.payload.board.version.version%20===0||e.payload.board.version.version<5||t)){d.next=18;break}o=a.exportXmlSnapshot(),s=3;case 8:return c=new Wl({userId:e.payload.board.version.userId,version:e.payload.board.version.version+(3-s)}),d.next=11,Object(hn.c)(U.takeBoardSnapshot,e.payload.board.uid,c,o);case 11:if(u=d.sent,(l=u.error)?s--:s=0,0!==s||!l){d.next=17;break}return d.next=17,Object(hn.g)(i.Command.error("Server Error","Could not take board snapshot."));case 17:if(s>0){d.next=8;break}case 18:case"end":return d.stop()}},hE,this)}function vE(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(hn.k)([_.SAVE_BOARD,_.BOARD_IMPORTED]);case 3:return e=n.sent,t=!1,e.type===_.BOARD_IMPORTED&&(t=!0),n.next=8,Object(hn.f)(gE,e,t);case 8:n.next=0;break;case 10:case"end":return n.stop()}},bE,this)}var OE=fn.a.mark(yE);function yE(){var e,t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(hn.k)([_.SET_BOARD_TAGS]);case 3:return e=r.sent,r.next=6,Object(hn.c)(U.setBoardTags,e.payload.board.uid,e.payload.board.tags);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(hn.g)(i.Command.error("Request Error","Could not set tags."));case 12:return r.next=14,Object(hn.g)(N.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(hn.g)(i.Command.info("Tags set",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},OE,this)}var EE=fn.a.mark(kE),IE=fn.a.mark(SE);function kE(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(U.shareBoard,e.payload.boardId,e.payload.email,e.payload.permissions);case 2:if(t=a.sent,n=t.response,!(r=t.error)||404!==r.status){a.next=8;break}return a.next=8,Object(hn.g)(i.Command.error("User not found","Please check the entered username. Also the user needs to sign in at least once before you can share your board with them."));case 8:if(!r){a.next=11;break}return a.next=11,Object(hn.g)(i.Command.error("Action Failed",r.data.error.message));case 11:if(!n){a.next=18;break}return a.next=14,Object(hn.g)(i.Command.info("Board shared with "+e.payload.email,""));case 14:return a.next=16,Object(hn.g)(N.fetchOpenBoardInvitations(e.payload.boardId));case 16:return a.next=18,Object(hn.g)(N.fetchBoardPermissionsForUsers(e.payload.boardId));case 18:case"end":return a.stop()}},EE,this)}function SE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.SHARE_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(kE,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},IE,this)}var jE,xE=1,TE=function(){function e(){var t=this;Object(Be.a)(this,e),this.initializationPromise=void 0,this.db=void 0,this.initializationPromise=new Promise(function(e,n){var r=indexedDB.open("insp_boards",xE);r.onupgradeneeded=function(e){t.updateDatabaseToLatestVersion(r.result,e.oldVersion)},r.onerror=function(){n("IndexedDB could not be initialized")},r.onsuccess=function(){t.db=r.result,e()}})}return Object(Re.a)(e,[{key:"get",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(t,"readonly"),e.next=3,i.objectStore(t).get(n);case 3:(s=e.sent).onsuccess=function(){return a(s.result)},s.onerror=function(){return o()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){var n=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(r,a){var o,i;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.db.transaction(t,"readonly"),e.next=3,o.objectStore(t).getAll();case 3:(i=e.sent).onsuccess=function(){return r(i.result)},i.onerror=function(){return a()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).add(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).put(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t,n){var r=this;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Ei.a)(fn.a.mark(function e(a,o){var i,s;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(s=i.objectStore(t).delete(n)).onsuccess=function(){return a()},s.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"assertDBInitialized",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializationPromise;case 2:if(this.db){e.next=4;break}throw new Error("IndexedDB is not initialized");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateDatabaseToLatestVersion",value:function(e,t){switch(console.log("Starting upgrade for DB insp_boards from version ".concat(t," to ").concat(xE)),t){case 0:e.createObjectStore("overview",{keyPath:"key"})}}}]),e}(),CE=function(){function e(t){Object(Be.a)(this,e),this.db=void 0,this.db=t,this.getOverviewSorting=this.getOverviewSorting.bind(this),this.setOverviewSorting=this.setOverviewSorting.bind(this),this.getOverviewResponsibleTeam=this.getOverviewResponsibleTeam.bind(this),this.setOverviewResponsibleTeam=this.setOverviewResponsibleTeam.bind(this)}return Object(Re.a)(e,[{key:"getOverviewSorting",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("overview","sorting");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={key:"sorting",value:nf.LAST_MODIFIED_DESC};case 5:return t=e.t0,e.abrupt("return",t.value);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setOverviewSorting",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("overview",{key:"sorting",value:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getOverviewResponsibleTeam",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(){var t;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("overview","responsibleTeam");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={key:"responsibleTeam",value:void 0};case 5:return t=e.t0,e.abrupt("return",t.value);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setOverviewResponsibleTeam",value:function(){var e=Object(Ei.a)(fn.a.mark(function e(t){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("overview",{key:"responsibleTeam",value:t});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),wE=function(){return jE||(jE=new CE(new TE)),jE},AE=fn.a.mark(BE),_E=fn.a.mark(RE),UE=fn.a.mark(NE);function BE(e,t){return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setOverviewSorting(e.payload.sort);case 2:case"end":return n.stop()}},AE,this)}function RE(e,t){return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.setOverviewResponsibleTeam(e.payload.teamId);case 2:case"end":return n.stop()}},_E,this)}function NE(){var e,t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=wE(),a.next=3,Object(hn.c)(e.getOverviewSorting);case 3:return t=a.sent,a.next=6,Object(hn.c)(e.getOverviewResponsibleTeam);case 6:return n=a.sent,a.next=9,Object(hn.g)(L.Command.sortBoardOverview(t));case 9:return a.next=11,Object(hn.g)(L.Command.filterBoardOverviewByResponsibleTeam(n));case 11:return a.next=14,Object(hn.k)([L.Type.SORT_BOARD_OVERVIEW,L.Type.FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM]);case 14:if((r=a.sent).type!==L.Type.SORT_BOARD_OVERVIEW||r.payload.sort===t){a.next=18;break}return a.next=18,Object(hn.f)(BE,r,e);case 18:if(r.type!==L.Type.FILTER_BOARD_OVERVIEW_BY_RESPONSIBLE_TEAM||r.payload.teamId===n){a.next=21;break}return a.next=21,Object(hn.f)(RE,r,e);case 21:a.next=11;break;case 23:case"end":return a.stop()}},UE,this)}var LE=function(e){return Object(tt.action)($v,{collapsed:e})},DE=function(e){return Object(tt.action)(eO,{width:e})},PE=fn.a.mark(zE),ME=fn.a.mark(FE);function zE(e,t){return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.g)(B.updateBoardElementsTree(e,t.getRoot().children()));case 2:case"end":return n.stop()}},PE,this)}function FE(){var e,t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=!1,r=!1;case 2:return o.next=5,Object(hn.k)([_.SAVE_BOARD,_.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE,_.BOARD_IMPORTED,_.BOARD_INITIALIZED,de.TOGGLE_SIDEBAR_COLLAPSED]);case 5:if(a=o.sent,!r||a.type!==de.TOGGLE_SIDEBAR_COLLAPSED){o.next=11;break}if((e=a.payload.collapsed)||!t||!n){o.next=11;break}return o.next=11,Object(hn.f)(zE,n,t);case 11:o.t0=a.type,o.next=o.t0===_.SAVE_BOARD?14:o.t0===_.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE?14:o.t0===_.BOARD_IMPORTED?14:o.t0===_.BOARD_INITIALIZED?14:22;break;case 14:if(r&&n!==a.payload.board.uid&&(r=!1),t=a.payload.graph,n=a.payload.board.uid,e){o.next=21;break}return r=!0,o.next=21,Object(hn.f)(zE,n,t);case 21:return o.abrupt("break",22);case 22:o.next=2;break;case 24:case"end":return o.stop()}},ME,this)}var GE=fn.a.mark(WE),VE=fn.a.mark(qE),HE=fn.a.mark(JE);function WE(e){var t,n,r,a,o,s,c;return fn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(hn.i)(tg(Uh(e.payload.boardId,e.payload.cellType)));case 2:return t=u.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Rh(r,a,o)),u.next=7,Object(hn.c)(L.Api.setStickyTemplate,t.boardId,t.cellType,o);case 7:if(s=u.sent,c=s.response,!s.error){u.next=13;break}return u.next=13,Object(hn.g)(i.Command.error("Request Error","Could not set sticky template."));case 13:if(!c){u.next=19;break}if(e.payload.disableNotification){u.next=17;break}return u.next=17,Object(hn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 17:return u.next=19,Object(hn.g)(L.Event.stickyTemplateSet(t.setTemplate(o)));case 19:case"end":return u.stop()}},GE,this)}function qE(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.i)(tg(Uh(e.payload.boardId,e.payload.cellType)));case 2:return(t=a.sent)||(t=Rh(e.payload.boardId,e.payload.cellType,"")),a.next=6,Object(hn.c)(L.Api.updateStickyAdvancedConfig,t.boardId,t.cellType,e.payload.templateType,e.payload.templateSchema||void 0);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(hn.g)(i.Command.error("Request Error","Could not update sticky advanced config."));case 12:if(!r){a.next=20;break}if(e.payload.disableNotification){a.next=16;break}return a.next=16,Object(hn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(hn.g)(L.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},VE,this)}function JE(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.SET_STICKY_TEMPLATE,L.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==L.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(hn.f)(WE,e);case 7:t.next=11;break;case 9:return t.next=11,Object(hn.f)(qE,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},HE,this)}var YE,QE="inspectioBoards",KE=n(64),ZE=n.n(KE),XE=n(517),$E=n(1252),eI=n(1242),tI=function(e){var t=e.maxLength||50,n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1];return a&&!e.onClick||e.label.length<=t?ge.createElement(ge.Fragment,null,e.label):ge.createElement(ge.Fragment,null,e.label.slice(0,t)+" ",ge.createElement("span",{onClick:function(t){t.preventDefault(),e.onClick&&e.onClick(!a),o(!a)}},"..."))},nI=function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ge.createElement(pg.a.Item,{as:Fe.Link,key:e.key,className:"ui vertical segment",style:{borderRadius:"0"},onClick:e.onClick,to:{pathname:It(e.entry.boardId),search:"?cells=".concat(e.entry.cellId,"&clicks=").concat(e.clicks)}},ge.createElement(hg,{cellType:e.entry.cellType}),ge.createElement(pg.a.Content,null,ge.createElement(pg.a.Header,null,ge.createElement(tI,{label:e.entry.label,maxLength:24,onClick:function(e){return a(e)}})),ge.createElement(pg.a.Description,null,"".concat(e.entry.action," by ").concat(e.entry.username)),ge.createElement(pg.a.Description,null,ge.createElement("span",{className:"date",style:{color:"grey",fontSize:"10px"}},new Date(e.entry.date).toLocaleString()))),r&&ge.createElement(pg.a.List,{style:{padding:"0"}},ge.createElement(pg.a.Item,null,ge.createElement(pg.a.Description,null,e.entry.label))))},rI=n(516),aI=function(e){var t=Object(ge.useState)(e.isActiveByDefault||!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ge.createElement(ge.Fragment,null,ge.createElement(rI.a,{content:e.title,index:e.index,active:r,onClick:function(){return a(!r)}}),ge.createElement(XE.a,{active:r},ge.createElement(pg.a,{selection:!0},e.entries)))},oI=function(e,t,n){e(n?Iu(t,n):ku(t))},iI=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useMemo)(function(){return Yb(e.match.params.uid)},[]),n=Object(ge.useMemo)(function(){return xg(e.match.params.uid)},[]),r=Object(ge.useState)(1),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=Object(Me.useSelector)(t),c=Object(Me.useSelector)(n),u=Object(Me.useDispatch)(),l=s&&s.shouldShowHistory||!1,d=function(){i(o+1)},m=Object(ge.useMemo)(function(){var e=ZE()(),t=function(e){var t=ZE()(e).startOf("isoWeek"),n=ZE()(e).startOf("month"),r=ZE()(n).subtract(1,"days").startOf("month");return{today:ZE()(e).startOf("day"),startOfWeek:t,startOfMonth:n,startOfLastMonth:r}}(e),n={today:[],yesterday:[],twoDaysAgo:[],threeDaysAgo:[],fourDaysAgo:[],fiveDaysAgo:[],sixDaysAgo:[],lastWeek:[],twoWeeksAgo:[],threeWeeksAgo:[],fourWeeksAgo:[],lastMonth:[],older:[]};return c.history.forEach(function(e,r){var a=ZE()(e.date,ZE.a.ISO_8601),i=function(e,t,n,r){return ge.createElement(nI,{entry:e,key:t,clicks:n,onClick:r})}(e,r+1,o,d),s=function(e,t,n){var r=n.today,a=n.startOfWeek,o=n.startOfMonth,i=n.startOfLastMonth;if(e.isBefore(i,"month"))return"older";if(e.isBefore(o))return"lastMonth";if(e.isBefore(a)){var s=e.diff(a,"weeks");return 0===s?"lastWeek":-1===s?"twoWeeksAgo":-2===s?"threeWeeksAgo":"fourWeeksAgo"}if(e.isBefore(r)){var c=e.diff(r,"days");return 0===c?"yesterday":-1===c?"twoDaysAgo":-2===c?"threeDaysAgo":-3===c?"fourDaysAgo":-4===c?"fiveDaysAgo":"sixDaysAgo"}return"today"}(a,0,t);n[s].push(i)}),n},[c,o]);Object(ge.useEffect)(function(){c.history.count()<50&&!c.loading&&c.olderPatchesAvailable&&oI(u,e.match.params.uid,c.oldestBoardVersion)},[c]);var p,f=Object(ge.useMemo)(function(){return function(){u(fu(e.match.params.uid,!1))}},[e.match.params.uid]),h=[],b=0;for(p in m)m.hasOwnProperty(p)&&m[p].length>0&&(h.push(ge.createElement(aI,{key:p,title:e.t("insp.history.".concat(p)),index:b,entries:m[p],isActiveByDefault:0===b})),b++);return l&&c.loading&&h.push(ge.createElement(XE.a,{active:!0},ge.createElement(pg.a,null,ge.createElement(pg.a.Item,{key:"item-loader",style:{paddingTop:"10px"}},ge.createElement(Zf.a,{active:!0,inline:"centered"}))))),ge.createElement($E.a.Group,{animation:"slide down"},l&&ge.createElement("div",{style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee"}},ge.createElement(Bf.a,{style:{height:"100%",borderRadius:"0"}},ge.createElement(Bf.a.Content,null,ge.createElement(Bf.a.Header,null,ge.createElement(hf.a,{name:"close",className:"right floated",onClick:f,style:{cursor:"pointer"}})," Activity")),ge.createElement(Bf.a.Content,{onScroll:function(t){var n=t.target;n instanceof HTMLDivElement&&n.scrollHeight-n.scrollTop===n.clientHeight&&!c.loading&&c.olderPatchesAvailable&&oI(u,e.match.params.uid,c.oldestBoardVersion)},style:{position:"relative",height:"100%",overflowY:"scroll"}},ge.createElement(eI.a,null,h)))))})),sI=Object(Pe.b)()(function(e){var t=e.match.params.invitation,n=wi(),r=Object(Me.useSelector)(n),a=Object(ge.useState)(!1),o=Object(Qe.a)(a,2),s=o[0],c=o[1],u=Object(ge.useState)(yt),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useDispatch)();return Object(ge.useEffect)(function(){r.signedIn&&qc(t).then(function(n){var r=n.response;if(n.error)return p(i.Command.error("Request failed","Failed to process board invitation")),void c(!0);if(r){var a=r.data.name,o=r.data.boardId,s=r.data.organizationId,u=0;Nc(t).then(function n(r){if(r.error)return u<2?(u++,void window.setTimeout(function(){Nc(t).then(n)},100)):(p(i.Command.error("Command failed","Failed to process board invitation")),void c(!0));s&&p(f.Command.switchActiveOrganization(s)),p(i.Command.info(e.t("insp.board.joined.title"),e.t("insp.board.joined.details",{name:a}))),m(It(o)),c(!0)})}})},[r.signedIn]),s?ge.createElement(ze.c,{to:d}):ge.createElement(Kf.a,{active:!0,className:"page"},ge.createElement(Zf.a,{size:"large"},"Processing Board Invitation"))}),cI=Object(Pe.b)()(function(e){var t=e.match.params.invitation,n=wi(),r=Object(Me.useSelector)(n),a=Object(ge.useState)(!1),o=Object(Qe.a)(a,2),s=o[0],c=o[1],u=Object(Me.useDispatch)();return Object(ge.useEffect)(function(){r.signedIn&&$d(t).then(function(n){var r=n.response;if(n.error)return u(i.Command.error("Request failed","Failed to process team invitation")),void c(!0);if(r){var a=r.data.name,o=r.data.organizationId||null,s=0;Xd(t).then(function n(r){if(r.error)return s<2?(s++,void window.setTimeout(function(){Xd(t).then(n)},100)):(u(i.Command.error("Command failed","Failed to process team invitation")),void c(!0));u(i.Command.info(e.t("insp.team.joined.title"),e.t("insp.team.joined.details",{team:a}))),o&&u(f.Command.switchActiveOrganization(o)),u(L.Query.fetchUserBoards()),c(!0)})}})},[r.signedIn]),s?ge.createElement(ze.c,{to:yt}):ge.createElement(Kf.a,{active:!0,className:"page"},ge.createElement(Zf.a,{size:"large"},"Processing Team Invitation"))}),uI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(le.BoardListSelector.makeGetAllBoards()),n=Object(ge.useState)(""),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(Me.useSelector)(wi()),s=Object(Me.useSelector)(Oi(i.activeOrganization)),c=!!s&&s.isAdmin(i.uid),u=t.filter(function(t){return(t.organization?c:!t.shared)&&!t.assignedTeams.contains(e.teamId)}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"mini"},ge.createElement(Ri.a.Header,null,e.t("insp.team.grant_access")),ge.createElement(Ri.a.Content,null,ge.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(a),o("")}},ge.createElement($e.a,{placeholder:e.t("insp.team.choose_board"),fluid:!0,search:!0,selection:!0,options:u,onChange:function(e,t){return o(t.value)},value:a}),ge.createElement("div",{style:{marginTop:"10px"}},ge.createElement(Ni.a,{primary:!0,type:"submit",disabled:""===a},e.t("app.form.confirm"))))))}),lI=n(1220),dI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useDispatch)();return d?ge.createElement(ze.c,{push:!0,to:It(e.board.uid)}):ge.createElement(ge.Fragment,null,ge.createElement(Pf.a,{open:r,onOpen:function(){a(!0)},onClose:function(){a(!1)},on:"click",position:"bottom center",disabled:e.readonly,content:ge.createElement(lI.a,{secondary:!0,vertical:!0,compact:!0},ge.createElement(lI.a.Item,{content:e.t("app.open"),onClick:function(){return m(!0)}}),ge.createElement(lI.a.Item,{content:e.t("app.form.remove"),onClick:function(){a(!1),c(!0)}})),trigger:ge.createElement("div",{className:"ui large basic orange button",key:e.board.uid,onClick:function(){e.readonly&&m(!0)}},ge.createElement("div",null,e.board.name))}),ge.createElement(ah.a,{open:s,header:e.t("insp.team.remove_board_confirm_title"),content:e.t("insp.team.remove_board_confirm_text",{board_name:e.board.name}),confirmButton:e.t("insp.team.remove_board_confirm_button"),cancelButton:ge.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return c(!1)},onConfirm:function(){e.readonly||p(V.adminRevokeTeamAccessToBoard(e.board.uid,e.team.uid)),c(!1)}}))}),mI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Vl()),n=Object(Me.useDispatch)();return ge.createElement("h3",{style:{margin:0,cursor:"pointer"},id:e.team.uid},ge.createElement(Eg,{text:e.team.name,charSize:9,widthUnit:"px",padding:20,required:!0,onTextChanged:function(r){e.addTeamMode?(n(W.Command.addTeam(e.team.uid,r,t?t.uid:null)),e.onNameChanged&&e.onNameChanged(r)):n(W.Command.renameTeam(e.team.uid,r))},focus:e.addTeamMode,onCancel:e.onCancelName,placeholder:e.t("insp.team.team_name")}),ge.createElement("span",null," \u2014 "),ge.createElement("span",{className:"sub header",style:{margin:0,cursor:"pointer"}},ge.createElement(Eg,{text:e.team.description,charSize:9,widthUnit:"px",padding:20,placeholder:e.t("insp.team.team_description"),onTextChanged:function(t){n(W.Command.changeTeamDescription(e.team.uid,t))},onCancel:e.onCancelDescription})))}),pI=n(1157),fI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(Vn()),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),h=Object(Qe.a)(p,2),g=h[0],v=h[1],O=Object(Me.useDispatch)(),y=Object(Me.useSelector)(Mp(e.teamInvitation.uid));Object(ge.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.teamInvitation.invitedUser).then(function(e){var t=e.response;if(e.error,t){var n=b.createIioUserInfoFromServerData(t.data);wn(n)&&a(n.value)}})},[e.teamInvitation.invitedUser]),Object(ge.useEffect)(function(){s&&c(!1),d&&y&&y.status===Sd.revoked&&v(!0)},[y]);return g?ge.createElement(ge.Fragment,null):ge.createElement(pI.a,null,ge.createElement(Eh,{user:r,size:"mini"}),ge.createElement("span",{style:{paddingLeft:"10px"}},e.teamInvitation.invitedUser),ge.createElement(vh.a,{floated:"right"},ge.createElement(Oh,{content:e.t("app.form.resend"),icon:"paper plane",loading:s,onClick:function(){c(!0),O(V.resendTeamInvitation(e.teamInvitation.uid))}}),ge.createElement(Oh,{content:e.t("app.form.revoke"),icon:"delete",loading:d,onClick:function(){m(!0),O(V.revokeTeamInvitation(e.teamInvitation.uid))}})))}),hI=function(e){var t=e.invitations.map(function(e){return ge.createElement(fI,{teamInvitation:e,key:e.uid})});return ge.createElement(pg.a,{relaxed:!0,divided:!0},t)},bI=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},gI=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!0),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(Object(fe.List)()),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(Me.useSelector)(wi()),v=Object(Me.useSelector)(Oi(g.activeOrganization)),O=Object(fe.List)(v?[v.ownerId].concat(Object(Xa.a)(v.members.toJS())):[]),y=Object(Me.useSelector)(ti(O)),E=Object(Me.useDispatch)();Object(ge.useEffect)(function(){e.open&&(c(!0),em(e.team.uid).then(function(e){var t=e.response,n=e.error;if(c(!1),n&&(console.error(n),b(!0)),t){var r=Ln(t.data,Bn([Mn(),"Response data is not of type Array"]),Nn(np));Cn(r)&&(console.error("Failed to process open team invitations loaded from server",r.value,t.data),b(!0)),wn(r)&&(m(Object(fe.List)(r.value)),E(H.teamInvitationsLoaded(Object(fe.List)(r.value))))}})),e.open||m(Object(fe.List)())},[e.open]);var I=!(!s&&0===d.count()),k=y.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.team.invite_user")),ge.createElement(Ri.a.Content,null,ge.createElement("form",{onSubmit:function(){E(V.inviteUserToTeam(nt.v4(),e.team.uid,r)),a(""),e.onClose()}},ge.createElement("div",{style:{marginBottom:"10px"}},ge.createElement(Gf.a,{style:{width:"100%"},fluid:!0,value:r,results:k.toArray(),placeholder:e.t("insp.team.user_email"),showNoResults:!1,resultRenderer:function(e){return ge.createElement("div",{key:e.id},ge.createElement("div",{className:"ui image avatar"},ge.createElement("img",{src:e.image,alt:e.title})),ge.createElement("div",{className:"content"},ge.createElement("div",{className:"title"},e.title),ge.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return a(t.value||"")},onResultSelect:function(e,t){a(t.result.description)},autoFocus:!0})),ge.createElement(Ni.a,{primary:!0,type:"submit",disabled:!bI(r)},e.t("insp.team.send_invitation"))),ge.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.open_invitations")),s&&ge.createElement(hf.a,{loading:!0,name:"spinner"}),I&&ge.createElement(hI,{invitations:d}),!I&&!h&&ge.createElement("p",{className:"infotextSecondary"},e.t("insp.team.empty_invitations")),h&&ge.createElement("p",{className:"infotextSecondary",style:{color:"red"}},e.t("insp.team.error_loading_invitations"))))})),vI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useDispatch)();et(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},h=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},b=e.isOwner?"admin-member":"";return ge.createElement("div",{className:"item "+b,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},ge.createElement($e.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly},ge.createElement($e.a.Menu,null,ge.createElement($e.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!s&&ge.createElement("span",{className:"ui avatar image placeholder",onClick:h}),ge.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:h,alt:e.member.username,onLoad:function(){return c(!0)},style:{display:s?"inline-block":"none"}}),ge.createElement("div",{className:"content",onClick:h},ge.createElement("div",{className:"header"},e.member.username)),ge.createElement(ah.a,{open:!e.readonly&&d,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:e.member.username}),confirmButton:e.t("insp.team.remove_user_confirm_button"),cancelButton:ge.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||p(V.removeMemberFromTeam(e.teamId,e.member.userId)),m(!1)}}))}),OI=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return ge.createElement(Ze.a,{columns:2},ge.createElement(Ff.a,{mobile:16,tablet:16,computer:12,largeScreen:12,widescreen:12},ge.createElement(ag.a,{options:i.toJS(),fluid:!0,placeholder:e.t("insp.team.move_to_organization_select"),onChange:function(e,t){return o(t.value)}})),ge.createElement(Ff.a,{mobile:16,tablet:16,computer:4,largeScreen:4,widescreen:4},ge.createElement(Ni.a,{primary:!0,floated:"right",onClick:function(){a&&t(V.moveTeamToOrganization(e.teamId,a))}},e.t("insp.team.move_to_organization_submit"))),ge.createElement(zi.a,{size:"small",info:!0},e.t("insp.team.move_to_organization_desc")))}),yI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(ti(e.team.members)),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(Me.useSelector)(Sf(e.team.uid)),h=Object(Me.useDispatch)(),b=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return ge.createElement(vI,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid})}),g=f.map(function(t){return ge.createElement(dI,{board:t,team:e.team,key:t.uid})});return ge.createElement("div",{className:"ui segment"},!e.blueprint&&ge.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.preventDefault(),o(!0)}},"Delete"),ge.createElement(mI,{team:e.team,addTeamMode:e.blueprint,onNameChanged:function(t){e.blueprint&&e.onTeamAdded&&e.onTeamAdded(e.team.uid)},onCancelName:function(){e.onCancelName&&e.onCancelName(e.team.uid)},onCancelDescription:function(){e.onCancelDescription&&e.onCancelDescription(e.team.uid)}}),ge.createElement("div",{className:"ui horizontal divider"},"Teammember"),ge.createElement("div",{className:"ui horizontal list"},ge.createElement(Ni.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(e){e.preventDefault(),u(!0)},disabled:e.blueprint},ge.createElement("i",{className:"blue user icon"})),!e.blueprint&&b),ge.createElement("div",{className:"ui horizontal divider"},"Teamboards"),ge.createElement("div",{className:"ui horizontal list"},ge.createElement(Ni.a,{basic:!0,icon:!0,color:"orange",size:"large",onClick:function(e){e.preventDefault(),p(!0)},disabled:e.blueprint},ge.createElement("i",{className:"orange sticky note icon"})),!e.blueprint&&g),e.isMovable&&ge.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.move_to_organization_title")),e.isMovable&&ge.createElement(OI,{organizations:e.targetOrganizations,teamId:e.team.uid}),ge.createElement(gI,{team:e.team,open:c,onClose:function(){u(!1)}}),ge.createElement(uI,{teamId:e.team.uid,open:m,onClose:function(){p(!1)},onSubmit:function(t){h(W.Command.adminGrantTeamAccessToBoard(t,[e.team.uid])),p(!1)}}),ge.createElement(ah.a,{open:a,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:ge.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.team.name}),onCancel:function(){return o(!1)},onConfirm:function(){h(W.Command.deleteTeam(e.team.uid))}}))}),EI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useMemo)(function(){return $m(rt.a.v4())},[r]),l=Object(Me.useSelector)(cf());s&&l.find(function(e){return e.uid===u.uid})&&(c(!1),a(!1));return ge.createElement(ge.Fragment,null,ge.createElement("div",null,ge.createElement("button",{className:"ui huge basic button",onClick:function(e){e.preventDefault(),a(!r)}},ge.createElement("i",{className:"plus icon"}),e.t("insp.team.overview_add"))),r&&ge.createElement(yI,{team:u,blueprint:!0,onTeamAdded:function(){return c(!0)},onCancelName:function(){return a(!1)},isMovable:!1,targetOrganizations:Object(fe.List)()}))}),II=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(ti(e.team.members)),n=Object(Me.useSelector)(Sf(e.team.uid)),r=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return ge.createElement(vI,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid,readonly:!0})}),a=n.map(function(t){return ge.createElement(dI,{board:t,team:e.team,key:t.uid,readonly:!0})});return ge.createElement("div",{className:"ui segment"},ge.createElement("h3",{style:{margin:0}},e.team.name,ge.createElement("span",null," \u2014 "),ge.createElement("span",{className:"sub header"},e.team.description)),ge.createElement("div",{className:"ui horizontal divider"},"Teammember"),ge.createElement("div",{className:"ui horizontal list"},r),ge.createElement("div",{className:"ui horizontal divider"},"Teamboards"),ge.createElement("div",{className:"ui horizontal list"},a))}),kI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Vl()),n=Object(Me.useSelector)(Gl(e.currentUser.uid)),r=!t||!t.explicitOrganization,a=r?n.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(fe.List)(),o=r&&a.count()>0,i=function(e,t,n){return!!(e.organizationId&&n&&e.organizationId===n.organizationId&&n.userIsAdmin)||e.isAdmin(t)},s=e.teams.filter(function(n){return i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return ge.createElement(yI,{isMovable:o,targetOrganizations:a,team:e,key:e.uid})}),c=e.teams.filter(function(n){return!i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).map(function(e){return ge.createElement(II,{team:e,key:e.uid})});return ge.createElement(ge.Fragment,null,ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(Xe.a,{as:"h1",icon:!0,textAlign:"center"},ge.createElement(Xe.a.Content,null,"Manage Your Teams",ge.createElement(Xe.a.Subheader,null))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement("div",null,ge.createElement(EI,{disabled:!1}),s))),0===s.count()&&0===c.count()&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(zi.a,{info:!0,floating:!0,content:e.t("insp.team.no_teams")}))),c.count()>0&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(Xe.a,{as:"h2",icon:!0,textAlign:"center"},ge.createElement(Xe.a.Content,null,"Joined Teams",ge.createElement(Xe.a.Subheader,null))))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,c)))});!function(e){e.organization="organization",e.teams="teams"}(YE||(YE={}));var SI,jI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(cf()),n=Object(Me.useSelector)(wi());return ge.createElement(Ge.a,null,ge.createElement(Ze.a,{stackable:!0,padded:!0},ge.createElement(kI,{teams:t,currentUser:n})))}),xI=n(1149),TI=n(1248),CI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(mf("lite_mode",!1)),n=Object(Me.useDispatch)(),r=t?"#2eba46":"inherit",a=t?"high":"half",o=t?"lite_mode_is_active":"activate_lite_mode";return ge.createElement(Pf.a,{trigger:ge.createElement(xI.a,{onClick:function(){n(Ht("lite_mode",!t))}},ge.createElement(hf.a,{name:"battery ".concat(a),style:{color:r}})),content:ge.createElement(ge.Fragment,null,ge.createElement("p",null,e.t("insp.top_menu."+o)),t&&ge.createElement("p",null,ge.createElement("small",null,e.t("insp.top_menu.lite_mode_is_active_details"))))})}),wI=Object(mt.c)(function(e){var t=Object(Me.useSelector)(wi()),n=Object(Me.useSelector)(Oi(t.activeOrganization)),r=Object(Me.useSelector)(Yb(e.match.params.uid)),a=Object(Me.useSelector)(ff()),o=Object(Me.useSelector)(mf("show_timer_hint",!1)),i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(Me.useDispatch)();Object(ge.useEffect)(function(){a&&o&&u(!0)},[a,o]);var d=!!n&&n.isAdmin(t.uid);return ge.createElement(ge.Fragment,null,ge.createElement(CI,null),ge.createElement(Pf.a,{open:c,trigger:ge.createElement(xI.a,{icon:"hourglass half",onClick:function(){return l(gu(e.match.params.uid,!0))}}),openOnTriggerClick:!1,openOnTriggerFocus:!1,openOnTriggerMouseEnter:!1,position:"bottom left",content:ge.createElement(ge.Fragment,null,ge.createElement("p",null,e.t("insp.board.timer.hint")),ge.createElement("p",null,ge.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){l(Ht("show_timer_hint",!1)),u(!1)}},e.t("insp.hint.got_it"))))}),ge.createElement($e.a,{item:!0,icon:"ellipsis vertical"},ge.createElement($e.a.Menu,{direction:"left"},ge.createElement($e.a.Item,{icon:"history",text:"Activity",onClick:function(){return l(fu(e.match.params.uid,!0))}}),ge.createElement($e.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return l(hu(e.match.params.uid,!0,!1))}}),ge.createElement($e.a.Item,{icon:"code",text:"Cody",onClick:function(){return l(bu(e.match.params.uid,!0))}}),r&&(r.organization?d:!r.shared)&&ge.createElement($e.a.Item,{icon:"cog",text:"Settings",to:jt(e.match.params.uid),as:Fe.NavLink}),r&&!r.videoSessionActive&&ge.createElement($e.a.Item,{icon:"video",text:"Join Session",onClick:function(){return l(vu(e.match.params.uid,!0))}},ge.createElement(hf.a,{name:"video"}),ge.createElement("span",null,"Join Session"),"\xa0",ge.createElement(hh.a,{basic:!0,horizontal:!0,content:"beta",color:"blue"})),r&&r.videoSessionActive&&ge.createElement($e.a.Item,{icon:"video",onClick:function(){return window.location.reload()}},"Leave Session\xa0",ge.createElement(hh.a,{basic:!0,horizontal:!0,content:"beta",color:"blue"})),ge.createElement($e.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return l(pu(e.match.params.uid))}}),ge.createElement($e.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))))}),AI=Object(Pe.b)()(Object(ze.k)(wI)),_I=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},UI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(e.email),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(Me.useSelector)(wi()),i=Object(Me.useSelector)(Oi(o.activeOrganization)),s=Object(fe.List)(i?[i.ownerId].concat(Object(Xa.a)(i.members.toJS())):[]),c=Object(Me.useSelector)(ti(s));Object(ge.useEffect)(function(){a(e.email)},[e.email]);var u=c.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"tiny"},ge.createElement(Ri.a.Header,null,e.t("insp.board.invite_user")),ge.createElement(Ri.a.Content,null,ge.createElement("div",{style:{marginBottom:"10px"}},ge.createElement(Ze.a,{container:!0,stackable:!0,doubling:!0},ge.createElement(Ff.a,{mobile:16,tablet:8,computer:10},ge.createElement(Gf.a,{fluid:!0,value:r,results:u.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return ge.createElement("div",{key:e.id},ge.createElement("div",{className:"ui image avatar"},ge.createElement("img",{src:e.image,alt:e.title})),ge.createElement("div",{className:"content"},ge.createElement("div",{className:"title"},e.title),ge.createElement("div",{className:"description"},e.description)))},onSearchChange:function(t,n){return r=n.value||"",a(r),void(_I(r)&&e.onEmailChange(r));var r},onResultSelect:function(t,n){a(n.result.description),e.onEmailChange(n.result.description)}})),ge.createElement(Ff.a,{mobile:16,tablet:8,computer:6},ge.createElement(Ni.a.Group,null,ge.createElement(Ni.a,{type:"button",className:"positive",children:"Read",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!1}))}}),ge.createElement(Ni.a.Or,{text:"+"}),ge.createElement(Ni.a,{type:"button",className:e.permissions.writeAccess?"positive":"",children:"Write",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!e.permissions.writeAccess}))}})))))),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{primary:!0,type:"submit",onClick:e.onSubmit,disabled:!_I(r)},e.t("app.form.confirm"))))}),BI=Object(ze.k)(function(e){var t=Object(Me.useSelector)(wi()),n=Object(Me.useSelector)(Oi(t.activeOrganization)),r=Object(ge.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=Object(ge.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),m=Object(Qe.a)(d,2),p=m[0],f=m[1],h=Object(Me.useSelector)(Yb(e.match.params.uid)),b=Object(Me.useDispatch)(),g=!!n&&(n.isAdmin(t.uid)||h&&h.isCreator(t.uid)),v=function(){l(!1)};return ge.createElement(ge.Fragment,null,h&&(h.organization?g:!h.shared)&&ge.createElement(ge.Fragment,null,ge.createElement(xI.a,null,ge.createElement(Ni.a,{icon:!0,className:"share",onClick:function(e){e.stopPropagation(),l(!0)}},ge.createElement(hf.a,{name:"share alternate"}),"\xa0share")),ge.createElement(UI,{open:u,onClose:v,onSubmit:function(){b(B.shareBoard(h.uid,o,p)),i(""),v()},email:o,onEmailChange:function(e){i(e)},permissions:p,onPermissionsChange:f})))}),RI=function(e){var t=wi(),n=Object(Me.useSelector)(t),r=Object(ge.useState)(!1),a=Object(Qe.a)(r,2),o=a[0],i=a[1];return ge.createElement(ge.Fragment,null,ge.createElement(Pf.a,{on:"click",position:"bottom center",open:o,onOpen:function(){i(!0)},onClose:function(){i(!1)},trigger:ge.createElement(xI.a,null,ge.createElement(hh.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(n.avatarUrl,")"),backgroundSize:"cover"}})),content:ge.createElement(lI.a,{vertical:!0,secondary:!0,compact:!0},ge.createElement(xI.a,{to:Et,as:Fe.NavLink,activeClassName:"active",onClick:function(){return i(!1)}},ge.createElement(hf.a,{name:"user"}),"Profile"),ge.createElement(xI.a,{onClick:function(){return Lx()}},ge.createElement(hf.a,{name:"sign-out"}),"Sign Out"))}))},NI=function(e){return ge.createElement(Fe.Link,{to:It(e.boardId),className:(e.activeCrumb?"active ":"")+"section"},e.children)},LI=Object(ze.k)(function(e){var t=Yb(e.match.params.uid),n=Object(Me.useSelector)(t),r="Unknown",a=ge.createElement(ge.Fragment,null);return n&&(r=n.name,n.writeAccess||(a=ge.createElement(TI.a.Section,null,"\xa0(read only)"))),ge.createElement(ge.Fragment,null,ge.createElement(TI.a.Divider,null),ge.createElement(TI.a.Section,{active:!0,as:NI,activeCrumb:!0,boardId:e.match.params.uid},r),a)}),DI=function(e){return ge.createElement(Fe.Link,{to:yt},e.children)},PI=function(e){return ge.createElement(TI.a.Section,{as:DI},"Boards")},MI=function(e){return ge.createElement(TI.a.Section,null,"Organization")},zI=function(e){return ge.createElement(TI.a.Section,null,"Teams")},FI=function(e){return ge.createElement(TI.a.Section,null,"Updates")},GI=function(e){return ge.createElement(TI.a.Section,null,"Profile")},VI=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(Me.useSelector)(iO()),n=kt(e.location.pathname)?t.width+20+"px":"270px";return ge.createElement(lI.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n}},ge.createElement(ze.d,{path:yt},ge.createElement(xI.a,null,ge.createElement(TI.a,null,ge.createElement(ze.d,{exact:!0,path:[yt,"/inspectio/board/:uid",St],component:PI}),ge.createElement(ze.d,{exact:!0,path:Et,component:GI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/updates",component:FI}),ge.createElement(ze.d,{exact:!0,path:["/inspectio/board/:uid",St],component:LI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/teams",component:zI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/organization",component:MI})))),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:BI}),ge.createElement(lI.a.Menu,{position:"right",id:"topmenuUsers"}),ge.createElement(RI,null),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:AI}))})),HI=n(178),WI=n.n(HI),qI=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Vl());return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.board.add")),ge.createElement(Ri.a.Content,null,ge.createElement(zi.a,{icon:"dollar",warning:!0,content:t&&t.userIsGuest?e.t("insp.user.quota_reached_guest"):t&&t.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")})))}),JI=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(""),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useRef)(null),v=A.makeGetCurrentBoardQuota(),O=Object(Me.useSelector)(v),y=A.makeGetCurrentUser(),E=Object(Me.useSelector)(y),I=Object(Me.useDispatch)();return ge.createElement("div",{className:"item"},ge.createElement(Ni.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){g.current.focus()},200)}},ge.createElement("i",{className:"plus icon"})," Add\xa0Board"),ge.createElement($E.a,{animation:"fade down",visible:r,duration:200},ge.createElement("div",{className:"ui icon input"},ge.createElement("form",{onSubmit:function(t){if(t.preventDefault(),""!==d)if(0!==O){var n=P.createUserBoard(E.uid,d);I(B.addBoard(n,e.history))}else c(!0);else b(!0)}},ge.createElement(Md.a,{placeholder:"Board name ...",fluid:!0,ref:g,error:h,value:d,onChange:function(e){m(e.target.value),b(""===e.target.value)}})))),ge.createElement(qI,{open:s,onClose:function(){m(""),a(!1),c(!1)}}))})),YI=function(e,t){return!!t.find(function(t){return t.uid===e})},QI=Object(Pe.b)()(function(e){var t=wi(),n=(Object(Me.useSelector)(t),Object(Me.useSelector)(cf(!0))),r=Object(ge.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=n.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.team.add_to_board",{board_name:e.board.name})),ge.createElement(Ri.a.Content,null,ge.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(o),i("")}},ge.createElement($e.a,{placeholder:e.t("insp.team.choose"),fluid:!0,search:!0,selection:!0,options:s,onChange:function(e,t){return i(t.value)},value:o}),ge.createElement("div",{style:{marginTop:"10px"}},ge.createElement(Ni.a,{primary:!0,type:"submit",disabled:!YI(o,n)},e.t("app.form.confirm"))))))}),KI=function(e,t){var n=t.find(function(t){return t.uid===e});return n?n.name:"Unknown Team"},ZI=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=(n[0],n[1],Object(ge.useState)(!1)),a=Object(Qe.a)(r,2),o=(a[0],a[1],Object(ge.useState)("")),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),l=Object(Qe.a)(u,2),d=l[0],m=l[1],f=Object(ge.useState)(!1),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=Object(ge.useState)(!1),O=Object(Qe.a)(v,2),y=O[0],E=O[1],I=Object(ge.useState)(!1),k=Object(Qe.a)(I,2),S=k[0],j=k[1],x=Object(ge.useState)(!1),T=Object(Qe.a)(x,2),C=T[0],w=T[1],A=Object(ge.useState)(void 0),_=Object(Qe.a)(A,2),U=_[0],R=(_[1],Object(ge.useState)(void 0)),N=Object(Qe.a)(R,2),L=N[0],D=(N[1],Object(Me.useDispatch)()),P=Object(Me.useSelector)(ei()),M=Object(Me.useSelector)(cf()),z=Object(Me.useSelector)(mf(uf(e.board.uid),!1));Object(ge.useEffect)(function(){e.board.sharedWith.count()<1||D(p.loadUsersInfo(e.board.sharedWith.toArray()))},[e.board.sharedWith]);var F=function(e){var t=P.find(function(t){return t.userId===e});return t?t.username:""},G=function(){g(!1)},V=function(e){e.stopPropagation()},H=z?"eye slash icon":"eye icon";return ge.createElement("div",{className:"ui item",style:{cursor:"pointer"}},!1,ge.createElement(Fe.NavLink,{className:"board-list board",to:It(e.board.uid)},e.board.name),ge.createElement(hf.a,{className:H,onClick:function(t){t.stopPropagation(),D(Ht(uf(e.board.uid),!z))}}),!1,ge.createElement("div",{onClick:V},ge.createElement(QI,{open:y,onClose:function(){E(!1)},onSubmit:function(t){D(W.Command.adminGrantTeamAccessToBoard(e.board.uid,[t])),E(!1)},board:e.board}),ge.createElement(UI,{open:b,onClose:G,onSubmit:function(){D(B.shareBoard(e.board.uid,s,d)),c(""),G()},email:s,onEmailChange:function(e){c(e)},permissions:d,onPermissionsChange:m}),ge.createElement(ah.a,{open:S,header:e.t("insp.board.remove_user_confirm_title"),content:e.t("insp.board.remove_user_confirm_text",{user_name:U?F(U):""}),onCancel:function(){return j(!1)},onConfirm:function(){U&&(D(B.revokeAccessToBoard(e.board.uid,U)),j(!1))}}),ge.createElement(ah.a,{open:C,header:e.t("insp.team.remove_from_board_confirm_title"),content:e.t("insp.team.remove_from_board_confirm_text",{team_name:L?KI(L,M):""}),onCancel:function(){return w(!1)},onConfirm:function(){L&&(D(W.Command.adminRevokeTeamAccessToBoard(e.board.uid,L)),w(!1))}})))});!function(e){e.all="all",e.onlyShared="onlyShared",e.noShared="noShared"}(SI||(SI={}));var XI,$I=Object(Pe.b)()(function(e){return ge.createElement("div",{className:"ui item",style:{cursor:"pointer",textAlign:"center",color:"#00b5ad"},onClick:function(){return e.onClick()}},e.showAll?e.t("app.showLess"):e.t("app.showAll"))}),ek=function(e){var t,n=Object(Me.useSelector)(wi()),r=Object(Me.useSelector)(Oi(n.activeOrganization)),a=!!r&&r.isAdmin(n.uid),o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=kf(!0),l=Object(Me.useSelector)(u),d=Object(Me.useSelector)(pf()),m=(Object(ge.useMemo)(function(){return l.filter(function(e){return e.shared&&!a}).count()},[l]),Object(fe.List)()),p=Object(fe.List)();l.filter(function(e){return!e.shared||a}).sortBy(function(e){return e.name},function(e,t){return e===t?0:e<t?-1:1}).forEach(function(e){!0===d[uf(e.uid)]?p=p.push(e):!s&&m.count()>=3?p=p.push(e):m=m.push(e)}),s&&(m=(t=m).push.apply(t,Object(Xa.a)(p.toArray())));var f=m.map(function(e){return ge.createElement(ZI,{key:e.uid,board:e})}).toArray();return p.count()>0||m.count()>3?f.push(ge.createElement($I,{showAll:s,key:"sidebar-show-more-boards",onClick:function(){c(!s)}})):s&&c(!1),ge.createElement(ge.Fragment,null,f)},tk=Object(ze.k)(function(e){var t=kf(!0),n=Object(Me.useSelector)(t),r="ui small label";return e.location.pathname===yt&&(r+=" teal"),ge.createElement(Fe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:yt},ge.createElement(hf.a,{className:"sticky note icon"}),ge.createElement("div",{className:r},n.count()),"Boards")}),nk=n(1025),rk=(n(1234),Object(Pe.b)()(function(e){var t=Object(ge.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return e.reset&&""!==r&&a(""),ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.feedback.header")),ge.createElement(Ri.a.Content,null,ge.createElement(zi.a,null,ge.createElement(nk.a,null,e.t("insp.feedback.info_text"),ge.createElement("p",null,"\xa0"),ge.createElement("p",null,ge.createElement("a",{href:"https://gitter.im/proophboard/community",target:"_blank"},ge.createElement(hf.a,{name:"arrow right"}),"\xa0Chat")),ge.createElement("p",null,ge.createElement("a",{href:"https://github.com/proopboard/issue-tracker/issues",target:"_blank"},ge.createElement(hf.a,{name:"arrow right"}),"\xa0Issue Tracker")))),!1),!1)})),ak="Failed to send feedback. Please try again or send an email to contact@prooph.de",ok=function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=Object(Me.useSelector)(wi());return ge.createElement(ge.Fragment,null,ge.createElement("div",{className:"ui item"},ge.createElement(Ni.a,{className:"big",onClick:function(){l(!1),o(!0)}},ge.createElement("div",{className:"header"},"Feedback"),ge.createElement("div",{className:"sub header",style:{textTransform:"none",fontWeight:"normal"}},"Send Bugs & Feature Requests"))),ge.createElement(rk,{open:a,onClose:function(){return o(!1)},onSubmit:function(e){var n,r;(n=e,r=d.email,_e("Feedback.SendUserFeedback",{text:n,userEmail:r})).then(function(e){var n=e.response;e.error&&t(i.Command.error("Request Error",ak)),n&&(l(!0),o(!1),t(i.Command.info("Feedback sent","We received your feedback. Thank you!")))}).catch(function(){t(i.Command.error("Request Error",ak))})},reset:u}))};!function(e){e.newBoard="new_board",e.replaceBoard="replace_board",e.tempBoard="temp_board"}(XI||(XI={}));var ik,sk,ck=function(e,t){var n=new FileReader;n.onload=function(){var e=n.result;null===e&&(e=""),t(e)},n.readAsText(e)},uk=function(e){return e.name.split(".").slice(0,-1).join(".")},lk=Object(Pe.b)()(function(e){var t=Object(ge.useRef)(null),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(ge.useState)(!1),d=Object(Qe.a)(l,2),m=d[0],p=d[1],f=Object(ge.useState)(null),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=A.makeGetCurrentBoardQuota(),O=Object(Me.useSelector)(v),y=A.makeGetCurrentUser(),E=Object(Me.useSelector)(y),I=If(),k=Object(Me.useSelector)(I),S=Object(ge.useState)("undefined"),j=Object(Qe.a)(S,2),x=j[0],T=j[1],C=Object(ge.useState)(void 0),w=Object(Qe.a)(C,2),_=w[0],U=w[1],R=Object(Me.useDispatch)(),N=function(e,n,r){if(r===XI.newBoard){if(0===O)return u(!0),void o(!1);ck(n,function(t){var n=nt.v4();R(B.importNewBoard(e,t,n)),o(!1),U(n)})}else{var a=k.filter(function(t){return t.name===e});if(a.count()>0){var i=a.first();ck(n,function(e){var t=i.updateXml(e,E.uid);R(B.importExistingBoard(t)),window.setTimeout(function(){U(t.uid)},50),o(!1)})}}t.current.value=""};return _&&1===k.filter(function(e){return e.uid===_}).count()?ge.createElement(ze.c,{to:It(_)}):ge.createElement("div",{className:"item"},ge.createElement(Ni.a,{className:"large basic",onClick:function(){t.current.click()},disabled:a},ge.createElement("i",{className:"download icon"})," Import\xa0Board"),ge.createElement("input",{type:"file",ref:t,style:{display:"none"},onChange:function(e){o(!0);var t=e.target.files[0]||null,n=uk(t);if(0!==k.filter(function(e){return e.name===n}).count())return g(t),T(n),void p(!0);N(uk(t),t,XI.newBoard)}}),ge.createElement(qI,{open:c,onClose:function(){u(!1)}}),ge.createElement(Ri.a,{open:m,closeIcon:!0,onClose:function(){p(!1)}},ge.createElement(Ri.a.Header,null,e.t("insp.board.import")),ge.createElement(Ri.a.Content,null,ge.createElement(zi.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",x)})),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{primary:!0,onClick:function(){p(!1),b&&N(uk(b)+" (Copy)",b,XI.newBoard)}},ge.createElement(hf.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),ge.createElement(Ni.a,{basic:!0,onClick:function(){p(!1),b&&N(uk(b),b,XI.replaceBoard)}},e.t("insp.board.btn_replace_board")))))}),dk=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(!1),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(Me.useSelector)(ff()),d=Object(Me.useSelector)(mf("show_logo_hint",!1));Object(ge.useEffect)(function(){l&&c&&d&&o(!0)},[l,c,d]);return ge.createElement(Pf.a,{open:a,position:"bottom center",content:ge.createElement(ge.Fragment,null,ge.createElement("p",null,ge.createElement("strong",null,e.t("insp.hint.new_logo_header"))),ge.createElement("p",null,e.t("insp.hint.new_logo_text"),"!"),ge.createElement("p",null,ge.createElement(hf.a,{name:"arrow right"}),"\xa0",ge.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))),ge.createElement("p",null,ge.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){o(!1),t(Ht("show_logo_hint",!1))}},e.t("insp.hint.got_it")))),trigger:ge.createElement(xI.a,{className:"logo-item"},ge.createElement(Fe.Link,{to:yt},ge.createElement("img",{className:"logo",src:"img/prooph-board-logo.png",alt:"prooph board logo",onLoad:function(){u(!0)}})))})}),mk=n(1089),pk=n(1221),fk=n(1090),hk={elements:Object(fe.List)(),filter:"",focus:!1},bk=function(e){var t=e.split(";"),n=[],r=[],a=[],o=[];return t.forEach(function(e){-1!==e.search("id:")?n.push(e.replace("id:","").trim()):-1!==e.search("type:")?r.push(e.replace("type:","").trim().toLowerCase()):-1!==e.search("tag:")?o.push(e.replace("tag:","").trim().toLowerCase()):a.push(e.trim())}),{nodeIds:n,nodeTypes:r,nodeLabels:a,nodeTags:o,strict:!1}},gk=function(e,t){if(t.nodeTypes.length&&!t.nodeTypes.includes(e.getType().toLowerCase()))return!1;if(t.nodeIds.length&&!t.nodeIds.includes(e.getId()))return!1;if(t.nodeTags.length){var n=!0,r=!1,a=void 0;try{for(var o,i=t.nodeTags[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if(!e.getTags().contains(s)){if("planned"!==s)return!1;if(!e.getTags().contains("planed"))return!1}}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}var c=!0;return t.nodeLabels.forEach(function(n){t.strict?e.getName()!==n&&(c=!1):-1===e.getName().toLowerCase().search(n.toLowerCase())&&(c=!1)}),c},vk=function e(t,n){var r=[],a=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===vi.feature}(n),o=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===vi.boundedContext.toLowerCase()}(n);return t.forEach(function(t){if(a&&t.getType()===vi.feature)gk(t,n)&&r.push(t);else if(o&&t.getType()===vi.boundedContext)gk(t,n)&&r.push(t);else{var i=e(t.children(),n);i.count()>0?r.push(t.setChildren(i)):gk(t,n)&&r.push(t.setChildren(i))}}),Object(fe.List)(r)},Ok=function e(t,n){var r=[];return t.forEach(function(t){var a=e(t.children(),n);a.count()>0&&r.push.apply(r,Object(Xa.a)(a.toArray())),gk(t,n)&&r.push(t)}),Object(fe.List)(r)},yk=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"mergeTree",value:function(e){return e.set("filter",this.filter)}},{key:"getFilteredElementsAsTree",value:function(){var e=bk(this.filter);return vk(this.elements,e)}},{key:"isFiltered",value:function(){return""!==this.filter}},{key:"getFilteredElementsByTypeAndLabel",value:function(e,t){return Ok(this.elements,{nodeIds:[],nodeLabels:[t],strict:!0,nodeTags:[],nodeTypes:[e]})}},{key:"getElement",value:function(e){var t=Ok(this.elements,{nodeIds:[e],nodeLabels:[],nodeTags:[],nodeTypes:[],strict:!0});if(t.size>0)return t.first()}}]),t}(Object(fe.Record)(hk)),Ek=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","elementsTree",t])||new yk}(t,e)}},Ik="",kk=function(e,t){return t?e.replace("type:".concat(t,";"),""):e},Sk=function(e,t){return t?"type:".concat(t,";")+e:e},jk=function(e){switch(e){case vi.event:case vi.command:case vi.role:case vi.aggregate:case vi.document:case vi.policy:case vi.externalSystem:case vi.hotSpot:case vi.ui:case vi.boundedContext:case vi.feature:case vi.icon:case vi.image:case vi.freeText:return!0;default:return!1}},xk=!1,Tk=function(e){switch(e){case hd.boundedContext.toLowerCase():return hd.boundedContext;case hd.freeText.toLowerCase():return hd.freeText;case hd.hotSpot.toLowerCase():return hd.hotSpot;case hd.externalSystem.toLowerCase():return hd.externalSystem;default:return e}},Ck=Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Ek(e.match.params.uid),r=Object(Me.useSelector)(n),a=Object(ge.useState)(r.filter),o=Object(Qe.a)(a,2),i=o[0],s=o[1],c=Object(ge.useRef)(null),u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useState)(!1),v=Object(Qe.a)(g,2),O=v[0],y=v[1];if(Ik!==r.filter){Ik=r.filter,ik=h;var E=bk(r.filter);E.nodeTypes.length&&(ik=E.nodeTypes[0],Object.values(hd).map(function(e){return e.toLowerCase()}).includes(ik)?b(ik):ik=h),s(kk(r.filter,ik))}else if(ik&&!h){var I=bk(r.filter);I.nodeTypes.length&&I.nodeTypes[0]===ik&&(s(kk(r.filter,ik)),b(ik))}r.focus&&c&&c.current&&(c.current.focus(),t(_u(e.match.params.uid,r.filter,!1)));var k=Dn.debounce(function(n){Ik=Sk(n,h),t(_u(e.match.params.uid,Ik))},500),S=function(){s(""),b(void 0),Ik="",ik=void 0,t(_u(e.match.params.uid,""))},j=h?fg.stickyColors[h]:"#909090",x=O?" focus":"";return ge.createElement("div",{className:"item"},ge.createElement("div",{className:"ui left action right icon input"},ge.createElement($e.a,{open:d,icon:!1,onClose:function(){m(!1)},scrolling:!0},ge.createElement(mk.a,{style:{zIndex:99e3}},ge.createElement(pk.a,{text:"Clear Filter",icon:"close",disabled:!h,onClick:function(){Ik=kk(Ik,h),ik=void 0,b(void 0),t(_u(e.match.params.uid,Ik))}}),ge.createElement(fk.a,null),Object.values(hd).filter(jk).map(function(n){return ge.createElement(pk.a,{key:n,onClick:function(){return function(n){Ik=kk(Ik,h),b(n),ik=n,Ik=Sk(Ik,n),t(_u(e.match.params.uid,Ik))}(n.toLowerCase())},icon:ge.createElement(hg,{cellType:n}),text:e.t("app.stickyTypes."+n)})}))),ge.createElement("div",{className:"ui left action input search filter"+x,style:{borderTop:"1px solid #dedede",borderBottom:"1px solid #dedede",borderLeft:"1px solid #dedede",borderTopLeftRadius:"0.28571429rem",borderBottomLeftRadius:"0.28571429rem"}},ge.createElement("button",{className:"ui basic icon button",onMouseDown:function(){xk=d},onClick:function(){xk||m(!0)}},!h&&ge.createElement("i",{className:"filter icon",style:{color:j}}),h&&ge.createElement(hg,{cellType:Tk(h),size:"normal"}))),ge.createElement("input",{type:"text",placeholder:"Search...",onChange:function(e){s(e.target.value),k(e.target.value)},onFocus:function(){return y(!0)},onBlur:function(){return y(!1)},className:"tree search",value:i,ref:c,onKeyDown:function(e){27===e.keyCode&&S()},style:{width:"80%"}}),!r.isFiltered()&&!h&&ge.createElement("i",{className:"search icon"}),(r.isFiltered()||h)&&ge.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:S})))}),wk=Object(ze.k)(function(e){return ge.createElement(ze.g,null,ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:Ck}))}),Ak=n(1026),_k=function(e){var t=Object(Me.useDispatch)(),n=Object(Me.useSelector)(ff()),r=Object(Me.useSelector)(mf(lf(e.date),!1));return Object(ge.useEffect)(function(){window.setTimeout(function(){n&&!r&&t(Ht(lf(e.date),!0))},5e3)},[r,n]),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(zi.a,null,ge.createElement(hh.a,{className:"".concat(r?"black":"red"," top left attached")},"New Features released ",ZE()(e.date).format("LL")),e.children)))},Uk=[{date:"2022-04-04",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Sort & Filter Overview"),ge.createElement("p",null,"The board overview can now be sorted by name, created at and last modified date. You can change sort direction by clicking on the sort icon. A team dropdown lets you quickly filter all boards of a team. Your sort and filter settings are stored in the browser's local storage. Additionally, board search supports tags now. Add tags to existing boards on the board edit page or in the advanced settings while adding a new board."))},{date:"2022-01-31",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Rearranged Editing Toolbar"),ge.createElement("p",null,ge.createElement("ul",null,ge.createElement("li",null,'Moved "font color" into main toolbar'),ge.createElement("li",null,'Moved "background color" into main toolbar'),ge.createElement("li",null,'Moved "clear formatting" into align menu'),ge.createElement("li",null,"Removed formatting menu"),ge.createElement("li",null,'Added a "wiki link" button'))))},{date:"2021-11-20",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"More Styling Options"),ge.createElement("p",null,"New styling options are available for advanced modelling and different workshop formats. The update includes:"),ge.createElement("p",null,ge.createElement("ul",null,ge.createElement("li",null,"Stickies",ge.createElement("ul",null,ge.createElement("li",null,"Change sticky type via context menu or shortcut (check context menu for available shortcuts)"),ge.createElement("li",null,"Align a group of stickies vertically and horizontally (context menu + shortcuts)"))),ge.createElement("li",null,"Contexts, Features, Textboxes",ge.createElement("ul",null,ge.createElement("li",null,"Change Style",ge.createElement("ul",null,ge.createElement("li",null,"Ellipse"),ge.createElement("li",null,"Triangle"),ge.createElement("li",null,"Rhombus"),ge.createElement("li",null,"Hexagon"))))),ge.createElement("li",null,"Arrows",ge.createElement("ul",null,ge.createElement("li",null,"Change Color"),ge.createElement("li",null,"Dotted Style"),ge.createElement("li",null,"Thickness"))),ge.createElement("li",null,"Comic Style",ge.createElement("ul",null,ge.createElement("li",null,'Select a group of elements and turn "Comic Style" on or off in the context menu'))),ge.createElement("li",null,"Keyboard Controls",ge.createElement("ul",null,ge.createElement("li",null,"Move selected element with arrow keys (keep key pressed for continued move + SHIFT key pressed for even faster move)"),ge.createElement("li",null,"Resize selected element with CTRL/CMD + arrow keys (CTRL/CMD+SHIFT for bigger resize steps)"),ge.createElement("li",null,"ALT+SHIFT + arrow keys: Copy selected element in direction of arrow key and connect it",ge.createElement("ul",null,ge.createElement("li",null,"You can model a complete flow via keyboard in combination with switch sticky type shortcuts"))),ge.createElement("li",null,"ENTER: Start text editing on selected sticky with"),ge.createElement("li",null,"ESC: Finish text editing"),ge.createElement("li",null,"CTRL/CMD+M: Start metadata editing"),ge.createElement("li",null,"ESC: pressed in metadata editor finishes editing and focuses cell on board again"))))))},{date:"2021-11-19",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Copy & Paste"),ge.createElement("p",null,"Copy & Pasting prooph board content is now possible across browsers. Next time you paste something, prooph board will ask you for access to your system's clipboard. If you grant access, the feature gets activated. Please note: this security check is built into modern browsers. By default, JavaScript is not allowed to access the system clipboard without explicit permission."))},{date:"2021-11-12",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Performance and Handling Updates"),ge.createElement("p",null,"We sat down last week to benchmark and improve performance on lager prooph boards. We disabled a couple of fade in/out animations in favor of performance and added a little physics effect when moving a board around. The latter gives a more natural feeling to compensate the deactivated fade effects. The Lite Mode still gives you best performance in case your system is under heavy load, but you should less likely have a need to activate it."))},{date:"2021-11-02",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Synchronized Timer"),ge.createElement("p",null,"You'll find a new timer feature in the board top menu (click on the hour glass icon). Setting a timer enables it for all users on the current board. Everybody will see the time ticking and a red blinking timer, when the set time is over. This is especially useful for time-boxed collaboration sessions. The person who sets the timer has control over it (pause, stop, reset)."))},{date:"2021-02-13",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Direct Import"),ge.createElement("p",null,"A new import functionality allows you to prepare a link that opens prooph board and imports a board fetched from an URL. This is especially useful for demo boards in combination with the new free version of prooph board. For example you could upload a board export on Github and prepare a link to Free Version like this: ",ge.createElement("a",{href:"https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml"},"https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml")))},{date:"2021-01-18",content:ge.createElement(ge.Fragment,null,ge.createElement(Ak.a,null,"Organization"),ge.createElement("p",null,"We've added a new administrative layer called \"Organization\" to make user and board management easier. With an organization you can share your board and user quota with colleagues. They don't need to worry about limitations, can easily create boards and share them with members. ",ge.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Managing-an-Organization",target:"_blank"},"Learn about the details"),"."))}],Bk=function(e){return ge.createElement(Ge.a,null,ge.createElement(Ze.a,{stackable:!0,padded:!0},Uk.map(function(e,t){return ge.createElement(_k,{key:t,date:e.date},e.content)})))},Rk=Object(ze.k)(function(e){var t=Object(Me.useSelector)(pf()),n=Uk.map(function(e){return e.date}).filter(function(e){return!t["update_".concat(e,"_viewed")]}).length;return ge.createElement(Fe.NavLink,{className:"item",to:"/inspectio/updates"},ge.createElement("div",{className:"ui small label"+("/inspectio/updates"===e.location.pathname?" teal":n>0?" red":"")},n),"Updates")}),Nk=Object(Pe.b)()(function(e){return ge.createElement(ge.Fragment,null,ge.createElement("div",{className:"middle aligned item"},ge.createElement("div",{className:"ui big header"},"Free Version"),ge.createElement(Ze.a,{className:"stackable two column"},ge.createElement(Ze.a.Column,null,ge.createElement(Ni.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")),ge.createElement(Ze.a.Column,null,ge.createElement("div",{className:"sub header"},"More Features, Organization & Teams, Realtime Collaboration")))))}),Lk=Object(Pe.b)()(function(e){return ge.createElement(ge.Fragment,null,ge.createElement(dk,{collapsed:!1}),ge.createElement(Nk,null),ge.createElement(wk,null),ge.createElement(lk,null),ge.createElement(JI,null),ge.createElement(tk,null),ge.createElement(ek,null),ge.createElement(Rk,null),ge.createElement(ok,null))}),Dk=function(e){var t=!!e.open;switch(e.type){case vi.layer:var n=t?"folder open":"folder";return ge.createElement(hf.a,{name:n,style:{cursor:"pointer"},className:e.className,title:e.title});default:return ge.createElement(hg,{cellType:e.type,size:"normal",title:e.title,className:e.className})}},Pk=null,Mk=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Ng(),l=Object(Qe.a)(u,1)[0],d=Object(ge.useState)(0),m=Object(Qe.a)(d,2),p=m[0],f=m[1],h=Object(ge.useState)(null),b=Object(Qe.a)(h,2),g=b[0],v=(b[1],Object(ge.useState)(!1)),O=Object(Qe.a)(v,2),y=O[0],E=O[1],I=Object(ge.useState)(!1),k=Object(Qe.a)(I,2),S=k[0],j=k[1],x=(Object(Me.useDispatch)(),l.isVisible(e.layer)),T=l.isLocked(e.layer);Object(ge.useEffect)(function(){a(e.expand)},[e.expand]);var C=x?"eye":"eye slash",w=T?"lock":"lock open",A=e.copyToLayerSuccess?e.copyToLayerSuccess:g;return ge.createElement(ge.Fragment,null,!y&&ge.createElement(pg.a.Item,{style:{padding:"5px",background:"rgba(0,0,0,0.05)"},as:Fe.NavLink,to:"#",isActive:function(){return!1},onClick:function(t){!function(t,n){if(null!==Pk)return window.clearTimeout(Pk),Pk=null,void(x&&(l.highlightLayer(e.layer),f(p+1)));Pk=window.setTimeout(function(){t||l.isActiveLayer(e.layer)||(l.setAsActiveLayer(e.layer),e.onActiveLayerChanged&&e.onActiveLayerChanged()),t&&!e.layer.isDefaultLayer()&&(l.setDefaultLayerAsActive(),e.onActiveLayerChanged&&e.onActiveLayerChanged()),a(!t),s&&c(!1),Pk=null},200),n.preventDefault()}(r,t)},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),c(!0)},className:x?"":"hidden"},ge.createElement(Dk,{type:vi.layer,open:r,title:e.t("insp.board.layers.folder_title"),className:(e.active?"active-layer":"layer")+(null!==A?A?" copy-success":" copy-failed":"")}),T&&ge.createElement(hf.a,{name:w,className:"corner left",size:"mini",fitted:!0}),!x&&ge.createElement(hf.a,{name:C,className:"corner right",size:"mini",fitted:!0}),ge.createElement(pg.a.Content,null,ge.createElement(Pf.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:s,onClose:function(){return c(!1)},style:{padding:"0px"},trigger:ge.createElement("div",null,ge.createElement(tI,{label:e.name,maxLength:50})),content:ge.createElement(ge.Fragment,null,!S&&ge.createElement(lI.a,{secondary:!0,compact:!0},ge.createElement(xI.a,{title:e.t("insp.board.layers.edit_name"),onClick:function(e){e.stopPropagation(),E(!0)}},ge.createElement(hf.a,{name:"edit"})),ge.createElement(xI.a,{title:e.t("insp.board.layers.lock_layer"),onClick:function(t){t.stopPropagation(),l.setLocked(e.layer,!l.isLocked(e.layer)),f(p+1)}},ge.createElement(hf.a,{name:w})),ge.createElement(xI.a,{title:e.t("insp.board.layers.visibility"),onClick:function(t){t.stopPropagation(),function(){var t=!l.isVisible(e.layer);l.setUserVisible(e.layer,t),e.onLayerVisibilityChanged&&e.onLayerVisibilityChanged(t),f(p+1)}()}},ge.createElement(hf.a,{name:C})),ge.createElement(xI.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),j(!0)},title:e.t("insp.board.layers.delete_layer"),disabled:!e.deletable},ge.createElement(hf.a,{name:"trash"}))),S&&ge.createElement(lI.a,{secondary:!0,compact:!0},ge.createElement(xI.a,null,e.t("insp.board.layers.delete_confirmation")),ge.createElement(xI.a,{onClick:function(t){t.stopPropagation(),l.deleteLayer(e.layer),j(!1)}},e.t("app.form.yes")),ge.createElement(xI.a,{onClick:function(e){e.stopPropagation(),j(!1),c(!1)}},e.t("app.form.no"))))}),r&&e.children)),y&&ge.createElement(pg.a.Item,{className:"add-layer"},ge.createElement(Ni.a,{icon:!0,basic:!0,size:"medium"},ge.createElement(hf.a,{name:"folder outline"})),ge.createElement(Eg,{text:e.layer.getName(),charSize:Vk,widthUnit:Hk,padding:Wk,minWidth:120,required:!0,onTextChanged:function(t){l.changeNodeName(e.layer,t),E(!1),c(!1)},focus:!0,onCancel:function(){E(!1),c(!1)},placeholder:"Board"})))}),zk=null,Fk=Object(Pe.b)()(function(e){var t=Object(ge.useState)(1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Ng(),v=Object(Qe.a)(g,1)[0];Object(ge.useEffect)(function(){c(e.expand)},[e.expand]);var O=v.isLocked(e.element),y=v.isVisible(e.element),E=y?"eye":"eye slash",I=O?"lock":"lock open",k=e.element.getType()===vi.boundedContext||e.element.getType()===vi.feature,S=e.element.children().filter(qk),j=y?"":" hidden";return ge.createElement(ge.Fragment,null,ge.createElement(pg.a.Item,{as:Fe.NavLink,to:{pathname:It(e.boardId),search:"?cells=".concat(e.element.getId(),"&clicks=").concat(r)},onClick:function(t){if(t.stopPropagation(),null!==zk)return window.clearTimeout(zk),zk=null,void a(r+1);zk=window.setTimeout(function(){c(!s),d&&m(!1),zk=null},200),y&&e.element.getType()!==vi.boundedContext&&e.element.getType()!==vi.feature?a(r+1):t.preventDefault()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),m(!0)},isActive:function(){return!1},style:{padding:"5px"},className:d?"edit"+j:j},ge.createElement(Dk,{type:e.element.getType(),open:s}),O&&ge.createElement(hf.a,{name:I,className:"corner left",size:"mini",fitted:!0}),!y&&ge.createElement(hf.a,{name:E,className:"corner right",size:"mini",fitted:!0}),ge.createElement(pg.a.Content,null,ge.createElement(Pf.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:d,onClose:function(){return m(!1)},trigger:ge.createElement("div",null,ge.createElement(tI,{label:e.element.getName(),maxLength:30})),style:{padding:"0px"},content:ge.createElement(ge.Fragment,null,!h&&ge.createElement(lI.a,{secondary:!0,compact:!0},ge.createElement(xI.a,{onClick:function(t){t.stopPropagation(),v.setLocked(e.element,!O),a(r+1)}},ge.createElement(hf.a,{name:I})),ge.createElement(xI.a,{onClick:function(t){t.stopPropagation(),v.setUserVisible(e.element,!y),a(r+1)}},ge.createElement(hf.a,{name:E})),ge.createElement(xI.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),b(!0)}},ge.createElement(hf.a,{name:"trash"}))),h&&ge.createElement(lI.a,{secondary:!0,compact:!0},ge.createElement(xI.a,null,e.t("insp.board.layers.delete_confirmation")),ge.createElement(xI.a,{onClick:function(t){t.stopPropagation(),v.deleteElement(e.element),b(!1)}},e.t("app.form.yes")),ge.createElement(xI.a,{onClick:function(e){e.stopPropagation(),b(!1),m(!1)}},e.t("app.form.no"))))}),S.count()>0&&s&&ge.createElement(Gk,{leafs:S,boardId:e.boardId,expandLeafs:e.expand}),0===S.count()&&k&&s&&ge.createElement(pg.a,null,ge.createElement(pg.a.Item,null,ge.createElement("span",{style:{color:"#747474"}},"(empty)"))))))}),Gk=function(e){var t=e.leafs.filter(qk).sort(nd).map(function(t){return ge.createElement(Fk,{expand:e.expandLeafs,element:t,key:t.getId(),boardId:e.boardId})});return ge.createElement(pg.a,{className:"elements tree"},t)},Vk=9,Hk="px",Wk=0,qk=function(e){switch(e.getType()){case vi.misc:case vi.edge:case vi.textCard:return!1;default:return""!==e.getName()}},Jk=function(){function e(t,n){Object(Be.a)(this,e),this.childrenList=void 0,this.boardName=void 0,this.childrenList=t,this.boardName=n}return Object(Re.a)(e,[{key:"getId",value:function(){return"__NO_CONTEXT__"}},{key:"getName",value:function(){return this.boardName}},{key:"getDescription",value:function(){return""}},{key:"getType",value:function(){return vi.boundedContext}},{key:"getLink",value:function(){return null}},{key:"getTags",value:function(){return Object(fe.List)()}},{key:"isLayer",value:function(){return!1}},{key:"isDefaultLayer",value:function(){return!1}},{key:"getParent",value:function(){return null}},{key:"children",value:function(){return this.childrenList}},{key:"setChildren",value:function(e){return this.childrenList=e,this}},{key:"getSources",value:function(){return Object(fe.List)()}},{key:"getTargets",value:function(){return Object(fe.List)()}},{key:"getGeometry",value:function(){return{x:0,y:0}}},{key:"getMetadata",value:function(){return null}}]),e}(),Yk=Object(Pe.b)()(Object(ze.k)(function(e){var t=e.match.params.uid,n=Object(ge.useMemo)(function(){return Ek(t)},[]),r=Object(Me.useSelector)(n),a=(Object(Me.useDispatch)(),Object(ge.useState)(!0)),o=Object(Qe.a)(a,2),i=(o[0],o[1],Object(Me.useSelector)(Yb(t))),s=Ng(),c=Object(Qe.a)(s,1)[0],u=Object(ge.useState)(0),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(0),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useState)(!1),v=Object(Qe.a)(g,2),O=v[0],y=v[1],E=Object(ge.useState)(!1),I=Object(Qe.a)(E,2),k=I[0],S=I[1],j=Object(ge.useState)(void 0),x=Object(Qe.a)(j,2),T=x[0],C=x[1];Object(ge.useEffect)(function(){c.onSelectionChanged(function(e){return S(e)})},[]);var w=r.getFilteredElementsAsTree().sortBy(function(e){return e.getName()}),A=[],_=r.getFilteredElementsAsTree().filter(function(e){return e.getType()===vi.boundedContext||(qk(e)&&A.push(e),!1)});if(A.length>0){var U=Object(fe.List)(A),B=new Jk(U,i.name);_=_.push(B)}return ge.createElement(ge.Fragment,null,ge.createElement("div",{className:"item"},ge.createElement(pg.a,{className:"elements tree"},ge.createElement(pg.a.Item,{style:{paddingBottom:"0px"}},ge.createElement("div",{className:"context-menu"},ge.createElement(Ni.a,{icon:!0,basic:!0,size:"medium",onClick:function(){y(!0)},disabled:O,title:e.t("insp.board.layers.add_layer")},ge.createElement(hf.a,{name:"plus"})),ge.createElement(Ni.a,{icon:!0,basic:!0,size:"medium",disabled:!k,onClick:function(){c.copySelectionToActiveLayer(),C(!0),window.setTimeout(function(){C(void 0)},2e3)},title:e.t("insp.board.layers.insert_selection")},ge.createElement(hf.a,{name:"window restore outline"})))),O&&ge.createElement(pg.a.Item,{className:"add-layer"},ge.createElement(Ni.a,{icon:!0,basic:!0,size:"medium"},ge.createElement(hf.a,{name:"folder outline"})),ge.createElement(Eg,{text:"",charSize:Vk,widthUnit:Hk,padding:Wk,minWidth:120,required:!0,onTextChanged:function(e){c.addLayer(e),y(!1)},focus:!0,onCancel:function(){y(!1)},placeholder:"Layer name"})),w.map(function(e){return ge.createElement(Mk,{key:e.getId(),name:""===e.getName()?"Board":e.getName(),boardId:t,layer:e,deletable:!e.isDefaultLayer(),active:c.isActiveLayer(e),onLayerVisibilityChanged:function(t){return function(e,t){if(!t&&c.isActiveLayer(e)){var n=!1;if(w.forEach(function(e){e.isDefaultLayer()&&c.isVisible(e)&&(n=!0,c.setAsActiveLayer(e))}),!n){var r=!0,a=!1,o=void 0;try{for(var i,s=w.toArray()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;c.isVisible(u)&&c.setAsActiveLayer(u)}}catch(l){a=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}}m(d+1)}(e,t)},onActiveLayerChanged:function(){return b(h+1)},copyToLayerSuccess:T,expand:r.isFiltered()&&e.children().count()>0||e.isDefaultLayer()},e.children().count()>0?ge.createElement(Gk,{leafs:e.children(),boardId:t,expandLeafs:r.isFiltered()}):ge.createElement(pg.a,null,ge.createElement(pg.a.Item,null,ge.createElement("span",{style:{color:"#747474"}},"(empty)"))))}))))})),Qk=Object(Pe.b)()(function(e){return ge.createElement(ge.Fragment,null,!e.collapsed&&ge.createElement(dk,{collapsed:e.collapsed}),!e.collapsed&&ge.createElement(Nk,null),ge.createElement("div",{className:"item"},ge.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&ge.createElement(ge.Fragment,null,ge.createElement(wk,null),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:Yk}),ge.createElement(ok,null)))}),Kk=function(e){var t=Object(Me.useDispatch)(),n=e.collapsed?"angle double right icon":"angle double left icon";return ge.createElement("span",{className:"collaps-handle",onClick:function(){var n=!e.collapsed;t(LE(n)),t(DE(n?85:250))},style:{}},ge.createElement("i",{className:n}))},Zk=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(""),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useSelector)(Vl()),f=Object(ge.useRef)(null),h=Object(Me.useDispatch)();return ge.createElement("div",{className:"item"},ge.createElement(Ni.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){f.current.focus()},200)}},ge.createElement("i",{className:"plus icon"})," Add\xa0Team"),ge.createElement($E.a,{animation:"fade down",visible:r,duration:200},ge.createElement("div",{className:"ui icon input"},ge.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==s?(h(V.addTeam(nt.v4(),s,p?p.uid:null)),c("")):m(!0)}},ge.createElement(Md.a,{placeholder:e.t("insp.team.team_name")+" ...",fluid:!0,ref:f,error:d,value:s,onChange:function(e){c(e.target.value),m(""===e.target.value)}})))))})),Xk=n(1041),$k=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useState)(void 0),v=Object(Qe.a)(g,2),O=v[0],y=v[1],E=Object(Me.useSelector)(ti(e.team.members)),I=Object(Me.useDispatch)(),k=s?"angle up icon":"angle down icon",S="ui labels "+(r?"slidedown":"slideup"),j=function(e){var t=E.find(function(t){return t.userId===e});return t?t.username:""},x=function(e){e.stopPropagation()};return ge.createElement("div",{className:"ui item",style:{cursor:"pointer"}},ge.createElement(hf.a,{className:k,onClick:function(){a(!r),s?window.setTimeout(function(){c(!1)},150):c(!0)}}),ge.createElement(Xk.NavHashLink,{scroll:function(e){var t=document.body.getBoundingClientRect().top,n=e.getBoundingClientRect().top-t-60;window.scrollTo({behavior:"smooth",top:n})},to:"/inspectio/teams#"+e.team.uid,className:"team-list team"},e.team.name),ge.createElement(hf.a,{className:"eye icon",style:{visibility:"hidden"}}),ge.createElement("div",{className:S},ge.createElement("a",{className:"ui blue basic label",onClick:function(e){x(e),m(!0)}},ge.createElement("i",{className:"white plus icon"}),e.t("insp.team.add_user")),e.team.members.filter(function(t){return t!==e.team.ownerId}).map(function(e){return ge.createElement("div",{key:e,className:"ui basic label"},j(e),ge.createElement("i",{className:"red delete icon",onClick:function(t){x(t),y(e),b(!0)}}))})),ge.createElement("div",{onClick:x},ge.createElement(gI,{team:e.team,open:d,onClose:function(){m(!1)}}),ge.createElement(ah.a,{open:h,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:O?j(O):""}),confirmButton:e.t("insp.team.remove_user_confirm_button"),onCancel:function(){return b(!1)},onConfirm:function(){O&&(I(V.removeMemberFromTeam(e.team.uid,O)),b(!1))}})))})),eS=function(e){var t=Object(Me.useSelector)(cf(!0));return ge.createElement(ge.Fragment,null,t.sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return ge.createElement($k,{key:e.uid,team:e})}))},tS=Object(ze.k)(function(e){var t=Object(Me.useSelector)(cf(!1)),n="ui small label";return"/inspectio/teams"===e.location.pathname&&(n+=" teal"),ge.createElement(Fe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:"/inspectio/teams"},ge.createElement(hf.a,{className:"ui group icon"}),ge.createElement("div",{className:n},t.count()),"Teams")}),nS=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(wi()),n=Object(Me.useSelector)(Gl(t.uid)),r=Object(ge.useState)(!1),a=Object(Qe.a)(r,2),o=a[0],i=a[1],s=Object(ge.useState)(!1),u=Object(Qe.a)(s,2),l=u[0],d=u[1],m=Object(ge.useState)(!1),p=Object(Qe.a)(m,2),f=p[0],h=p[1],b=Object(Me.useSelector)(ff()),g=Object(Me.useSelector)(mf("show_orga_hint",!1));et(function(){d(!1)}),Object(ge.useEffect)(function(){g&&h(!0)},[g,b]);var v=Object(Me.useDispatch)(),O=function(e){v(c.switchActiveOrganization(e)),i(!1)},y="My Workspace",E=!1,I=n.map(function(e){e.ownOrganization&&!e.explicitOrganization&&(E=!0);var n=e.explicitOrganization?e.organizationName:e.ownOrganization?"My Workspace":e.organizationName,r=t.activeOrganization===e.organizationId;return r&&(y=n),ge.createElement(pk.a,{active:r,onClick:function(){return!r&&O(e.organizationId)},key:e.organizationId},n)});E||(I=I.push(ge.createElement(pk.a,{active:null===t.activeOrganization,onClick:function(){return null!==t.activeOrganization&&O(null)},key:"__implicit__own_orga__"},"My Workspace")));var k=o?"angle up":"angle down";return ge.createElement(Pf.a,{open:f,content:ge.createElement(ge.Fragment,null,ge.createElement("p",null,ge.createElement("strong",null,e.t("insp.organisation.switch_hint_header"))),ge.createElement("p",null,e.t("insp.organisation.switch_hint")),ge.createElement("p",null,ge.createElement("span",{style:{color:"#32c0e7",cursor:"pointer",float:"right"},onClick:function(){h(!1),v(Ht("show_orga_hint",!1))}},e.t("insp.organisation.switch_hint_ok")))),position:"right center",trigger:ge.createElement("div",{className:"organization switch"},ge.createElement(hf.a,{name:k,style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),i(!o),d(!0)}}),ge.createElement($e.a,{icon:!1,open:o,onOpen:function(){return i(!0)},onClose:function(){l||i(!1)},text:y},ge.createElement(mk.a,null,I)))})}),rS=Object(ze.k)(function(e){Object(Me.useSelector)(wi());var t=Object(Me.useSelector)(Vl());return ge.createElement("div",{className:"item"},t&&t.userIsAdmin&&ge.createElement(Fe.NavLink,{to:"/inspectio/organization"},ge.createElement(Ni.a,{className:"large basic"},ge.createElement("i",{className:"building icon"})," Organization")),(!t||!t.userIsAdmin)&&ge.createElement(Ni.a,{className:"large basic organization",disabled:!0},ge.createElement("i",{className:"building icon"})," Organization"),ge.createElement(nS,null))}),aS=(Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(Ai()),n=Object(Me.useSelector)(Vl());return ge.createElement(ge.Fragment,null,ge.createElement(dk,{collapsed:!1}),ge.createElement(rS,null),ge.createElement(wk,null),ge.createElement(lk,null),ge.createElement(JI,null),ge.createElement(tk,null),ge.createElement(ek,null),t<2&&n&&n.explicitOrganization&&!n.userIsGuest&&ge.createElement("div",{className:"item"},ge.createElement("div",{className:"ui icon negative message"},ge.createElement("i",{className:"warning icon"}),ge.createElement("div",{className:"content"},ge.createElement("div",{className:"header"},0===t?e.t("insp.sidebar.no_boards_left_warning"):e.t("insp.sidebar.boards_left_warning",{board_count:t})),ge.createElement("p",null,e.t("insp.sidebar.boards_left_warning_upgrade"))))),ge.createElement(Zk,null),ge.createElement(tS,null),ge.createElement(eS,null),ge.createElement(Rk,null),ge.createElement(ok,null))}),Object(Pe.b)()(function(e){return ge.createElement(ge.Fragment,null,!e.collapsed&&ge.createElement(dk,{collapsed:e.collapsed}),!e.collapsed&&ge.createElement(rS,null),ge.createElement("div",{className:"item"},ge.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&ge.createElement(ge.Fragment,null,ge.createElement(wk,null),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:Yk}),ge.createElement(ok,null)))}),function(e){return ge.createElement("div",{className:"bottom aligned item"},ge.createElement("p",{className:"copyright"},"\xa9 ",(new Date).getFullYear()," ",ge.createElement("a",{href:"http://prooph-software.de"},"prooph software GmbH")))}),oS=Object(Pe.b)()(Object(ze.k)(function(e){var t=kt(e.location.pathname),n=Object(Me.useSelector)(iO()),r=Object(Me.useDispatch)(),a=Object(ge.useState)(n.width),o=Object(Qe.a)(a,2),i=o[0],s=o[1],c=Object(ge.useState)(!1),u=Object(Qe.a)(c,2),l=u[0],d=u[1];Object(ge.useEffect)(function(){l||s(n.width)},[n.width]);var m=t?" collapsible":"",p=t&&n.collapsed?" collapsed":"";return ge.createElement(ge.Fragment,null,ge.createElement("div",{className:"ui left fixed large vertical menu leftbar"+p,style:{overflowY:"scroll",width:(t?n.width:250)+"px"}},!t&&!1,!t&&ge.createElement(Lk,null),t&&!1,t&&ge.createElement(Qk,{collapsed:n.collapsed}),ge.createElement(aS,null)),ge.createElement(WI.a,{axis:t?"x":"none",onDrag:function(e,t){l||d(!0);var a=n.width+t.deltaX;r(DE(a)),n.width<=230&&!n.collapsed&&r(LE(!0)),n.width>230&&n.collapsed&&r(LE(!1))},onStop:function(e,t){d(!1),s(n.width)},position:{x:0,y:0}},ge.createElement("div",{className:"collapsebar"+m+p,style:{left:(t?i:250)+"px",cursor:t?"grabbing":"inherit"}},t&&ge.createElement(Kk,{collapsed:n.collapsed}))))})),iS=function(e,t){return e.getIn([QE,"activeGraphElements"])},sS=Object(Pe.b)()(function(e){var t=Object(ge.useState)(5e3),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=e.sources.map(function(t){return ge.createElement(pg.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Source",as:Fe.Link,to:{pathname:It(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(r)},onClick:function(){return a(r+1)}},ge.createElement(pg.a.Icon,{name:"arrow left"}),ge.createElement(pg.a.Content,null,ge.createElement(hg,{cellType:t.getType()}),ge.createElement(tI,{label:t.getName(),maxLength:30})))}).toArray();return e.targets.forEach(function(t){o.push(ge.createElement(pg.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Target",as:Fe.Link,to:{pathname:It(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(r)},onClick:function(){return a(r+1)}},ge.createElement(pg.a.Icon,{name:"arrow right"}),ge.createElement(pg.a.Content,null,ge.createElement(hg,{cellType:t.getType()}),ge.createElement(tI,{label:t.getName(),maxLength:30}))))}),ge.createElement(ge.Fragment,null,ge.createElement(zd.a,{horizontal:!0,content:"Connections"}),ge.createElement(pg.a,null,o))}),cS=ve.a.forwardRef(function(e,t){var n=Object(ge.useState)(6e3),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useRef)(null),s=e.activeGraphElement.type!==vi.textCard&&e.activeGraphElement.type!==vi.edge;return Object(ge.useImperativeHandle)(t,function(){return{retrievePayload:function(){return i.current.retrievePayload()}}}),Object(ge.useEffect)(function(){i.current&&i.current.addKeyDownHandler(function(t){!t.ctrlKey||"KeyS"!==t.code&&"KeyG"!==t.code||(t.preventDefault(),e.onTriggerCody()),"Escape"===t.code&&e.onClose&&(e.onUpdateMetadata(i.current.retrievePayload()),t.preventDefault(),t.stopPropagation(),e.onClose())})},[]),Object(ge.useEffect)(function(){s&&i.current&&i.current.initializeModel({fileId:"graph_element_".concat(e.activeGraphElement.id,".json"),language:e.boardStickyTemplate.templateType,value:e.activeGraphElement.metadata||e.boardStickyTemplate.template||"{\n  \n}\n",schema:e.boardStickyTemplate.templateSchema||void 0,onChange:function(t){i.current&&e.onUpdateMetadata(i.current.retrievePayload())}})},[e.activeGraphElement]),Object(ge.useEffect)(function(){i.current&&e.focusEditor&&i.current.focus()},[e.focusEditor]),ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(Fe.Link,{style:{borderRadius:"0",color:"#424242"},onClick:function(){return o(a+1)},to:{pathname:It(e.boardId),search:"?cells=".concat(e.activeGraphElement.id,"&clicks=").concat(a)}},ve.a.createElement(hg,{cellType:e.activeGraphElement.type})," ",ve.a.createElement("strong",null,e.t("app.stickyTypes."+e.activeGraphElement.type))),(e.activeNodeSources.size>0||e.activeNodeTargets.size>0)&&ve.a.createElement(sS,{boardId:e.boardId,sources:e.activeNodeSources,targets:e.activeNodeTargets}),s&&ve.a.createElement(ve.a.Fragment,null,ve.a.createElement(zd.a,{horizontal:!0,content:"Metadata"}),ve.a.createElement(ug,{ref:i,options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1}},style:{height:"500px"}})))}),uS=Object(Pe.b)()(Object(ze.k)(function(e){var t,n=Object(Me.useDispatch)(),r=Object(Me.useSelector)(iO()),a=Object(ge.useState)(!1),o=Object(Qe.a)(a,2),i=o[0],s=o[1],c=Object(ge.useMemo)(function(){return Yb(e.match.params.uid)},[]),u=Object(Me.useSelector)(c),l=Object(Me.useSelector)((t=e.match.params.uid,Object(ft.a)([iS],function(e){return e.has(t)?e.get(t):null}))),d=u&&u.shouldShowElementDetails||!1,m=Object(Me.useSelector)(rg(e.match.params.uid)),p=Object(Me.useSelector)(Ek(e.match.params.uid)),f=Object(ge.useState)(!1),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=Object(ge.useState)(r.rightSidebarWidth),O=Object(Qe.a)(v,2),y=O[0],E=O[1],I=Ng(),k=Object(Qe.a)(I,1)[0],S=Object(ge.useRef)(null);Object(ge.useEffect)(function(){b||E(r.rightSidebarWidth)},[r.rightSidebarWidth]),Object(ge.useEffect)(function(){n(N.fetchBoardStickyTemplates(e.match.params.uid))},[e.match.params.uid]),Object(ge.useEffect)(function(){u&&u.shouldFocusMetadataEditor&&n(B.toggleElementDetails(e.match.params.uid,d,!1))},[u&&u.shouldFocusMetadataEditor]);var j=Object(fe.List)(),x=Object(fe.List)(),T=Object(fe.List)();if(l&&l.type!==vi.edge){j=p.getFilteredElementsByTypeAndLabel(l.type,l.label).filter(function(e){return e.getId()!==l.id}).map(function(e){return e.getId()});var C=p.getElement(l.id);C&&(x=C.getSources(),T=C.getTargets())}if(l&&l.type===vi.edge&&l.edgeData){var w=p.getElement(l.edgeData.source),A=p.getElement(l.edgeData.target);w&&(x=Object(fe.List)([w])),A&&(T=Object(fe.List)([A]))}var _=function(){n(Ol(e.match.params.uid,l||void 0)),n(hu(e.match.params.uid,!1,!1)),s(!1),k.focus()};return ge.createElement(ge.Fragment,null,d&&ge.createElement("div",{style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee"}},ge.createElement(Bf.a,{style:{height:"100%",borderRadius:"0",width:r.rightSidebarWidth+"px"}},ge.createElement(Bf.a.Content,null,ge.createElement(Bf.a.Header,null,ge.createElement(hf.a,{name:"close",className:"right floated",onClick:_,style:{cursor:"pointer"}}),l&&ge.createElement(ge.Fragment,null,l.label),!l&&ge.createElement(ge.Fragment,null,"Metadata"))),ge.createElement(Bf.a.Content,{style:{position:"relative",height:"100%",overflowY:"auto"}},!l&&ge.createElement(zi.a,{info:!0},e.t("insp.sidebar.element_details.no_element_selected")),l&&ge.createElement(cS,{boardId:e.match.params.uid,activeNodeSources:x,activeNodeTargets:T,activeGraphElement:l,boardStickyTemplate:m.get(l.type),onTriggerCody:function(){return k.triggerCody()},onUpdateMetadata:function(e){l.metadata=e,l.updateMetadata(e),s(!0)},onClose:_,t:e.t,ref:S,focusEditor:!!u.shouldFocusMetadataEditor})),i&&j.size>0&&ge.createElement(Bf.a.Content,null,ge.createElement(zi.a,{compact:!0,warning:!0,size:"small"},e.t("insp.sidebar.element_details.update_similar_elements_text",{number:j.size}),"\xa0",ge.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),l&&S&&S.current&&l.updateSimilarElements(j.toArray(),S.current.retrievePayload()),s(!1)}},e.t("insp.sidebar.element_details.update_similar_elements_link"))))),ge.createElement(WI.a,{axis:"x",onDrag:function(e,t){b||g(!0);var a,o=r.rightSidebarWidth-t.deltaX;n((a=o,Object(tt.action)(tO,{width:a})))},onStop:function(e,t){g(!1),E(r.rightSidebarWidth)},position:{x:0,y:0}},ge.createElement("div",{className:"thin collapsebar collapsible",style:{right:y+"px",cursor:"grabbing"}}))))})),lS=Object(Pe.b)()(function(e){var t=e.match.params.organization,n=e.match.params.invitation,r=wi(),a=Object(Me.useSelector)(r),o=Object(Me.useSelector)(Vl()),s=Object(ge.useState)(!1),c=Object(Qe.a)(s,2),u=c[0],l=c[1],d=Object(Me.useDispatch)();return Object(ge.useEffect)(function(){if(a.signedIn&&o){var r=0;Er(t,n).then(function a(o){if(o.error)return r<2?(r++,void window.setTimeout(function(){Er(t,n).then(a)},100)):(d(i.Command.error("Command failed","Failed to process organization invitation")),void l(!0));br(t).then(function(n){var r=n.response;if(n.error)return d(i.Command.info(e.t("insp.organisation.joined.title"),"")),void l(!0);if(r){var a=Ln(r.data,Rn(function(e){return Ba(e)}));Cn(a)&&(console.error("Invalid organization response: ",a.value),d(i.Command.error("Request Error","Could not load organization"))),wn(a)&&(d(j.Query.fetchUserOrganizations()),d(f.Command.switchActiveOrganization(t)),d(i.Command.info(e.t("insp.organisation.joined.title"),e.t("insp.organisation.joined.details",{name:a.value.name})))),l(!0)}})})}},[a.signedIn,o]),u?ge.createElement(ze.c,{to:yt}):ge.createElement(Kf.a,{active:!0,className:"page"},ge.createElement(Zf.a,{size:"large"},"Processing Organization Invitation"))}),dS=n(1042),mS=n(1211),pS=function(e){var t=e.width||30;return ge.createElement("object",{className:"console-avatar",data:mS,type:"image/svg+xml",style:{width:t+"px"}})},fS=function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o="#414141",i="#414141",s="normal",c="normal",u="white";e.codyResponse.type===Hg.Error&&(o="#f31c30",i="#f31c30",s="bold",c="bold",u="#f1bec5"),e.codyResponse.type!==Hg.Warning&&e.codyResponse.type!==Hg.Question&&e.codyResponse.type!==Hg.SyncRequired||(o="#653a12",i="#653a12",s="bold",u="#fdd299"),e.codyResponse.type&&e.codyResponse.type!==Hg.Info||(o="#32c0e7",s="bold");var l,d=Array.isArray(e.codyResponse.cody)?e.codyResponse.cody:[e.codyResponse.cody];e.codyResponse.details&&(l=e.codyResponse.details,Array.isArray(l)||(l=[l]));var m={color:o,fontWeight:s},p={color:i,fontWeight:c},f=r?ge.createElement(hf.a,{name:"caret down",size:"large"}):ge.createElement(hf.a,{name:"caret right",size:"large"});return ge.createElement(ge.Fragment,null,ge.createElement("div",{className:"console-message",style:{backgroundColor:u}},ge.createElement(pS,null),ge.createElement("div",{className:"console-text"},hS(d,m,e.codyName),l&&ge.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),a(!r)}},f))),l&&r&&ge.createElement("div",{className:"console-message",style:{backgroundColor:u}},ge.createElement(pS,null),ge.createElement("div",{className:"console-text"},hS(l,p))))},hS=function(e,t,n){var r=e[0]||"";if("string"!==typeof r){if("function"!==typeof(r=r).toString)return[];r=r.toString()}var a=r.split("%c"),o=e.slice(1),i=[],s=t,c=!0;for(var u in a)if("undefined"!==typeof a[u]){var l=a[u],d=!1,m=!1,p=l.length;p>0&&(" "===l.charAt(p-1)&&(m=!0,l=l.slice(0,p-1))," "===l.charAt(0)&&(d=!0,l=l.slice(1))),p>0&&(c&&n&&(l="[".concat(n,"]: ")+l,c=!1),i.push(ge.createElement("span",{key:i.length+1,style:s},d&&ge.createElement(ge.Fragment,null,"\xa0"),ge.createElement(ge.Fragment,null,l),m&&ge.createElement(ge.Fragment,null,"\xa0")))),s=o[u]?bS(o[u]):t}return i},bS=function(e){var t={},n=e.split(";"),r=!0,a=!1,o=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value.split(":"),u=Object(Qe.a)(c,2),l=u[0],d=u[1];"string"===typeof l&&"string"===typeof d&&(t[Object(dS.camelize)(l.trim())]=d)}}catch(m){a=!0,o=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t},gS=n(1212),vS=function(e){var t="#414141",n="normal",r="white";return"error"===e.type&&(t="#f31c30",n="bold",r="#f1bec5"),"warning"===e.type&&(t="#f99f4b",n="bold"),ge.createElement("div",{className:"console-message",style:{backgroundColor:r}},ge.createElement(hh.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(gS,")"),backgroundSize:"cover",marginLeft:"3px"}}),ge.createElement("div",{className:"console-text"},ge.createElement("span",{style:{color:t,fontWeight:n}},e.message)))},OS=function(){var e=localStorage.getItem("@@Inspectio/CodyConsole");if(null===e)return[];try{return JSON.parse(e)}catch(t){return[]}}(),yS=function(e){var t=Object(Me.useSelector)(wi()),n=Object(ge.useRef)(null),r=Ng(),a=Object(Qe.a)(r,1)[0],o=Object(Me.useDispatch)();Object(ge.useEffect)(function(){window.setTimeout(function(){n.current&&(e.lastCodyMsg&&e.lastCodyMsg.type===Hg.Question||e.showConnectDefault)&&n.current.focus()},100)},[e.messageCount,e.lastCodyMsg,e.visible,e.showConnectDefault]),Object(ge.useEffect)(function(){return function(){var e;e=OS.slice(0,10),localStorage.setItem("@@Inspectio/CodyConsole",JSON.stringify(e))}});var i=e.showConnectDefault?"/connect http://localhost:3311":"";return ge.createElement("div",{className:"console-message"},ge.createElement(hh.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),ge.createElement("span",{style:{marginLeft:"3px"}},"\xa0\xa0"),ge.createElement("input",{type:"text",defaultValue:i,ref:n,onKeyDown:function(t){if("Enter"===t.key)e.onEnter(n.current.value||""),""!==n.current.value&&(void 0!==sk&&-1!==sk&&OS[sk]===n.current.value&&OS.splice(sk,1),OS.length&&OS[0]===n.current.value||OS.unshift(n.current.value)),n.current.value="",sk=void 0;else if("Escape"===t.key)e.onEscape();else if(t.ctrlKey&&"q"===t.key)e.onClose();else if("ArrowUp"===t.key)void 0===sk?sk=0:sk++,sk+1>OS.length&&(sk=OS.length-1),-1!==sk&&(n.current.value=OS[sk]),t.preventDefault();else if("ArrowDown"===t.key){if(void 0===sk)return;--sk>-1&&(n.current.value=OS[sk],n.current.focus()),-1===sk&&(OS.length&&OS[0]===n.current.value&&(n.current.value="",n.current.focus()),sk=void 0),t.preventDefault()}else t.ctrlKey&&"g"===t.key?(a.triggerCody(),t.preventDefault()):t.ctrlKey&&"m"===t.key?(o(hu(e.boardId,!0,!0)),t.preventDefault()):sk=void 0}}))},ES=function(e){var t=Object(Me.useSelector)(wi());return ge.createElement("div",{className:"console-message"},ge.createElement(hh.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),ge.createElement("div",{className:"console-text"},""===e.msg&&ge.createElement("span",null,"\xa0"),ge.createElement("span",null,e.msg)))},IS=["connect","disconnect","cockpit","help","talk"],kS=Object(ze.k)(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useState)(Object(fe.List)([])),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ge.useState)(),s=Object(Qe.a)(i,2),c=s[0],u=s[1],l=Object(Me.useSelector)(iO()),d=Object(ge.useMemo)(function(){return Yb(e.match.params.uid)},[]),m=Object(Me.useSelector)(d),p=m&&m.shouldShowCodyConsole,f=Object(ge.useState)(!1),h=Object(Qe.a)(f,2),b=h[0],g=h[1],v=Object(ge.useState)(l.codyConsoleHeight),O=Object(Qe.a)(v,2),y=O[0],E=O[1],I=Object(Me.useSelector)(wi()),k=Object(ge.useRef)(null),S=Ng(),j=Object(Qe.a)(S,1)[0],x=l.width+10,T=x+(m&&m.shouldShowElementDetails?l.rightSidebarWidth+5:0),C=function(e){o(a.push(e)),window.setTimeout(function(){k.current&&k.current.scrollBy({top:200,behavior:"smooth"})},10)};ev.setCodyResponsePrinter(function(e,t){u(e),C(ge.createElement(fS,{key:a.count()+1,codyResponse:e,codyName:t}))}),ev.setErrorPrinter(function(e){0===a.count()&&e===Wg||C(ge.createElement(vS,{key:a.count()+1,message:e,type:"error"}))}),ev.setWarningPrinter(function(e){C(ge.createElement(vS,{key:a.count()+1,message:e,type:"warning"}))});var w=function(){t(bu(e.match.params.uid,!1))};return ge.createElement($E.a.Group,{animation:"slide up"},p&&ge.createElement("div",{className:"cody console",ref:k,style:{height:"".concat(l.codyConsoleHeight,"px"),left:"".concat(x,"px"),width:"calc(100% - ".concat(T,"px)")}},!ev.codyServers&&ge.createElement(vS,{message:"No connection to Cody. Try to connect with him first!",type:"warning"}),a.toArray(),ge.createElement(yS,{showConnectDefault:!ev.codyServers,boardId:e.match.params.uid,messageCount:a.count(),lastCodyMsg:c,visible:p,onEnter:function(e){if(C(ge.createElement(ES,{key:a.count()+1,msg:e})),"/help"!==e)if("/talk"!==e){var t=e.match(/^\/connect\s+(?<uri>http(s)?:\/\/[^\s]+)\s*(?<name>[A-Za-z0-9]+)?$/);if(t)return t.groups.name&&IS.includes(t.groups.name)?void C(ge.createElement(fS,{codyResponse:{cody:'Oh sorry, you cannot use "'.concat(t.groups.name,"\" as a name. It's a reserved word!"),type:Hg.Error},codyName:"cody"})):void ev.connect.Cody(t.groups.uri,I.displayName,t.groups.name);var n=e.match(/^\/disconnect\s+(?<name>[A-Za-z0-9]+)$/);if(!n||!n.groups.name)return e.match(/^\/cockpit\s+http(s)?:\/\/.+$/)?(j.setCockpitBaseUrl(e.replace("/cockpit ","").trim()),void C(ge.createElement(fS,{codyName:"Cody",codyResponse:{cody:"Cockpit is activated now.",details:'Right click on commands, events, queries or aggregates and choose "Open In Cockpit" from context menu.'}}))):void(ev.codyServers?ev.reply(e):ev.connect.Cody(e.replace("/connect ",""),I.displayName));ev.disconnect(n.groups.name)}else ev.talk.to.Cody();else window.setTimeout(function(){ev.ask.Cody.forHelp()})},onEscape:function(){ev.abortSession()},onClose:w}),ge.createElement(WI.a,{axis:"y",onDrag:function(e,n){b||g(!0);var r,a=l.codyConsoleHeight-n.deltaY;t((r=a,Object(tt.action)(nO,{height:r})))},onStop:function(e,t){g(!1),E(l.codyConsoleHeight)},position:{x:0,y:0}},ge.createElement("div",{className:"collapsible",style:{bottom:y+"px",width:"calc(100% - ".concat(T,"px)"),cursor:"grabbing"}},ge.createElement("span",{className:"collaps-handle",onClick:w},ge.createElement("i",{className:"close icon"}))))))}),SS=function(e){return function(t){return function(e,t){return e.getIn([qo,"OrganizationInvitation",t])}(t,e)}},jS=Object(Pe.b)()(function(e){var t=Object(ge.useState)(Vn()),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(!1),h=Object(Qe.a)(p,2),g=h[0],v=h[1],O=Object(Me.useSelector)(SS(e.invitation.invitationId)),y=Object(Me.useDispatch)();Object(ge.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.invitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=b.createIioUserInfoFromServerData(t.data);wn(n)&&a(n.value)}})},[e.invitation.invitedUserEmail]),Object(ge.useEffect)(function(){s&&c(!1),d&&O&&O.status===dr.revoked&&v(!0)},[O]);return g?ge.createElement(ge.Fragment,null):ge.createElement(pI.a,null,ge.createElement(Eh,{user:r,size:"mini"}),ge.createElement("span",{style:{paddingLeft:"10px"}},e.invitation.invitedUserEmail),ge.createElement(vh.a,{floated:"right"},ge.createElement(Oh,{content:e.t("app.form.resend"),icon:"paper plane",loading:s,onClick:function(){c(!0),y(I.resendUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}}),ge.createElement(Oh,{content:e.t("app.form.revoke"),icon:"delete",loading:d,onClick:function(){m(!0),y(I.revokeUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}})))}),xS=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},TS=Object(Pe.b)()(function(e){var t=Object(ge.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(Me.useSelector)(wi()),i=Object(Me.useDispatch)(),s=Gn({userId:o.uid,username:o.displayName,avatarUrl:o.avatarUrl,position:""});wn(s)&&s.value;var c=e.organization.invitations.count()>0;return ge.createElement(Ri.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ge.createElement(Ri.a.Header,null,e.t("insp.organisation.invite_user")),ge.createElement(Ri.a.Content,null,ge.createElement("form",{onSubmit:function(){i(I.inviteUserToOrganization(e.organization.uid,r)),a(""),e.onClose()}},ge.createElement("div",{style:{marginBottom:"10px"}},ge.createElement(Md.a,{style:{width:"100%"},value:r,onChange:function(e,t){return a(t.value)},placeholder:e.t("insp.organisation.user_email"),autoFocus:!0})),ge.createElement(Ni.a,{primary:!0,type:"submit",disabled:!xS(r)||!e.hasEnoughQuota},e.t("insp.organisation.send_invitation"))),ge.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.open_invitations")),c&&ge.createElement(pg.a,{relaxed:!0,divided:!0},e.organization.invitations.map(function(t){return ge.createElement(jS,{invitation:t,organization:e.organization,key:t.invitationId})})),!c&&ge.createElement("p",{className:"infotextSecondary"},e.t("insp.organisation.empty_invitations"))))}),CS=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useDispatch)();et(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},h=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},b=e.isOwner||e.isAdmin?"admin-member":"";return ge.createElement("div",{className:"item "+b,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},ge.createElement($e.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly,className:"organization"},ge.createElement($e.a.Menu,null,e.currentUserIsOwner&&e.isAdmin&&ge.createElement($e.a.Item,{text:e.t("insp.organisation.demote_to_member"),onClick:function(){e.readonly||p(j.Command.demoteUserToOrganizationMember(e.organizationId,e.member.userId))}}),e.currentUserIsOwner&&!e.isAdmin&&!e.isGuest&&ge.createElement($e.a.Item,{text:e.t("insp.organisation.promote_to_admin"),onClick:function(){e.readonly||p(j.Command.promoteUserToOrganizationAdmin(e.organizationId,e.member.userId))}}),e.isGuest&&ge.createElement($e.a.Item,{text:e.t("insp.organisation.promote_to_member"),onClick:function(){e.readonly||p(j.Command.turnGuestIntoMember(e.member.userId,e.organizationId))}}),ge.createElement($e.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!s&&ge.createElement("span",{className:"ui avatar image placeholder",onClick:h}),ge.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:h,onLoad:function(){return c(!0)},alt:e.member.username+" Avatar",style:{display:s?"inline-block":"none"}}),ge.createElement("div",{className:"content",onClick:h},ge.createElement("div",{className:"header"},e.member.username)),ge.createElement(ah.a,{open:!e.readonly&&d,header:e.t("insp.organisation.remove_user_confirm_title"),content:e.t("insp.organisation.remove_user_confirm_text",{user_name:e.member.username}),confirmButton:e.t("insp.organisation.remove_user_confirm_button"),cancelButton:ge.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||(e.isGuest?p(j.Command.removeGuestFromOrganization(e.organizationId,e.member.userId)):p(j.Command.removeUserFromOrganization(e.organizationId,e.member.userId))),m(!1)}}))}),wS=Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(!1),i=Object(Qe.a)(o,2),s=i[0],c=i[1],u=Object(ge.useState)(!1),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(Me.useSelector)(wi()),f=Object(Me.useSelector)(Oi(e.activeOrganization.organizationId)),h=Object(Me.useDispatch)(),b=Object(Me.useSelector)(ti(f?f.members.push(f.ownerId):Object(fe.List)())),g=Object(Me.useSelector)(ti(f?f.guests:Object(fe.List)()));if(!f)return ge.createElement(zi.a,{error:!0},"Could not load organization data. Please refresh the page to try again!");var v=f.memberQuota-f.invitations.count()>0,O=b.sortBy(function(e){return e.username}).sort(function(e,t){return e.userId===f.ownerId?-1:t.userId===f.ownerId?1:f.admins.contains(e.userId)?-1:f.admins.contains(t.userId)?1:0}).map(function(e){return ge.createElement(CS,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})}),y=g.sortBy(function(e){return e.username}).map(function(e){return ge.createElement(CS,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),isGuest:!0,readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})});return ge.createElement(ge.Fragment,null,e.activeOrganization.explicitOrganization&&!v&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(zi.a,{warning:!0,floating:!0,content:e.t("insp.organisation.no_member_quota")}))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement("div",null,!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&ge.createElement("button",{className:"ui huge basic button",onClick:function(){return a(!r)}},ge.createElement("i",{className:"plus icon"}),e.t("insp.organisation.create_btn")),r&&ge.createElement("div",{className:"ui segment"},ge.createElement(Eg,{text:"",charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){h(I.setUpExplicitOrganization(e.activeOrganization.organizationId,t)),a(!1)},focus:!0,onCancel:function(){a(!1)},placeholder:e.t("insp.organisation.name")})),e.activeOrganization.explicitOrganization&&ge.createElement("div",{className:"ui segment"},ge.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.stopPropagation(),e.preventDefault(),c(!0)},style:{display:"none"}},"Delete"),ge.createElement("h3",{style:{margin:0,cursor:e.activeOrganization.ownOrganization?"pointer":"default"},id:"1234"},ge.createElement(Eg,{text:e.activeOrganization.organizationName,charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){h(I.renameOrganization(e.activeOrganization.organizationId,t))},focus:!1,onCancel:function(){console.log("cancel name change")},placeholder:e.t("insp.organisation.name"),disabled:!e.activeOrganization.ownOrganization})),ge.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.member")),ge.createElement("div",{className:"ui horizontal list"},ge.createElement(Ni.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(){m(!0)},disabled:!v&&0===f.invitations.count()},ge.createElement("i",{className:"blue user icon"})),O),y.count()>0&&ge.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.guests")),y.count()>0&&ge.createElement("div",{className:"ui horizontal list"},y),ge.createElement(TS,{open:d,onClose:function(){m(!1)},organization:f,hasEnoughQuota:v}),ge.createElement(ah.a,{open:s,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:ge.createElement(Ni.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.activeOrganization.organizationName}),onCancel:function(){return c(!1)},onConfirm:function(){alert("confirmed!")}}))))),!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null,ge.createElement(zi.a,{info:!0,floating:!0,content:e.t("insp.organisation.not_explicit")}))),ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,null)))}),AS=Object(Pe.b)()(function(e){var t=Object(Me.useSelector)(wi()),n=Object(Me.useSelector)(Vl());return ge.createElement(Ge.a,null,ge.createElement(Ze.a,{stackable:!0,padded:!0},ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(Xe.a,{as:"h1",icon:!0,textAlign:"center"},ge.createElement(Xe.a.Content,null,"Manage Organisation",ge.createElement(Xe.a.Subheader,null))))),n&&n.userIsAdmin&&ge.createElement(ge.Fragment,null,ge.createElement(wS,{currentUser:t,activeOrganization:n})),(!n||!n.userIsAdmin)&&ge.createElement(Ze.a.Row,null,ge.createElement(Ze.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ge.createElement(Ze.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ge.createElement(zi.a,{content:e.t("insp.organisation.no_admin"),warning:!0})))))}),_S=function(e){var t=e.split("/");return t[t.length-1].split(".").slice(0,-1).join(".")},US=Object(ze.k)(Object(Pe.b)()(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ge.useState)(yt),s=Object(Qe.a)(o,2),c=s[0],u=(s[1],Object(ge.useState)(!1)),l=Object(Qe.a)(u,2),d=l[0],m=l[1],p=Object(ge.useState)(void 0),f=Object(Qe.a)(p,2),h=f[0],b=f[1],g=Object(ge.useState)(void 0),v=Object(Qe.a)(g,2),O=v[0],y=v[1],E=Object(Me.useSelector)(xf()),I=Object(Me.useSelector)(wi()),k=If(),S=Object(Me.useSelector)(k),j=Object(ge.useState)("undefined"),x=Object(Qe.a)(j,2),T=x[0],C=x[1],w=Object(Me.useDispatch)(),A=decodeURIComponent(e.match.params.link),_=new URLSearchParams(e.location.search),U=!_.has("temp")||1!==parseInt(_.get("temp")+"",void 0);Object(ge.useEffect)(function(){E&&Jc(A).then(function(e){b(e);var t=_S(A),n=S.filter(function(e){return e.name===t});if(U&&0!==n.count())return C(t),void m(!0);R(t,e,U?XI.newBoard:XI.tempBoard)}).catch(function(e){console.error(e),w(i.Command.error("Request failed","Failed to load board. Please check if import link points to a valid prooph board XML file!")),a(!0)})},[A,E]);var R=function(e,t,n){if(n===XI.newBoard){var r=nt.v4();w(B.importNewBoard(e,t,r)),y(r)}else if(n===XI.tempBoard){var a=nt.v4();w(B.importNewBoard(e,t,a,!0)),y(a)}else{var o=S.filter(function(t){return t.name===e});if(o.count()>0){var i=o.first().updateXml(t,I.uid);w(B.importExistingBoard(i)),window.setTimeout(function(){y(i.uid)},50)}}};return O&&1===S.filter(function(e){return e.uid===O}).count()?ge.createElement(ze.c,{to:It(O)}):r?ge.createElement(ze.c,{to:c}):ge.createElement(ge.Fragment,null,ge.createElement(Kf.a,{active:!0,className:"page"},ge.createElement(Zf.a,{size:"large"},"Loading board from ",A)),ge.createElement(Ri.a,{open:d,closeIcon:!0,onClose:function(){m(!1)}},ge.createElement(Ri.a.Header,null,e.t("insp.board.import")),ge.createElement(Ri.a.Content,null,ge.createElement(zi.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",T)})),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{primary:!0,onClick:function(){m(!1),h&&R(_S(A)+" (Copy)",h,XI.newBoard)}},ge.createElement(hf.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),ge.createElement(Ni.a,{basic:!0,onClick:function(){m(!1),h&&R(_S(A),h,XI.replaceBoard)}},e.t("insp.board.btn_replace_board")))))})),BS=Object(ze.k)(function(e){var t=e.history.location.state.href;return window.setTimeout(function(){e.history.replace(t)},500),ge.createElement(Kf.a,{active:!0,className:"page"},ge.createElement(Zf.a,{size:"large"},"Loading Board"))}),RS=(n(531),n(532),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 1===e.length&&(e="0"+e),3===e.length&&(e=e.slice(1)),0===parseInt(e,void 0)&&(e=n?"00":""),parseInt(e,void 0)>t&&(e="".concat(t)),e}),NS=function(e){e=Math.floor(Number(e)/1e3);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),[t,n,r]},LS=function(e,t,n){return 60*parseInt(""===e?"0":e,void 0)*60*1e3+60*parseInt(""===t?"0":t,void 0)*1e3+1e3*parseInt(""===n?"0":n,void 0)},DS=function(e,t,n,r,a,o){var i,s=0,c=0,u=0;i=e-Date.now();var l=Math.floor(100*i/t);if(l>50&&"start"!==n&&r("start"),l<=50&&l>5&&"half"!==n&&r("half"),l<=5&&"end"!==n&&r("end"),i>0){var d=NS(i),m=Object(Qe.a)(d,3);s=m[0],c=m[1],u=m[2]}e>0&&i<-1e4&&o(),a([s,c,u])},PS=null,MS=Object(ze.k)(Object(Pe.b)()(function(e){var t=Object(Me.useDispatch)(),n=Object(ge.useRef)(null),r=Object(Me.useSelector)(iO()),a=Object(ge.useMemo)(function(){return Yb(e.match.params.uid)},[]),o=Object(Me.useSelector)(a),i=o&&o.shouldShowTimerModal,s=Object(Me.useSelector)(wi()),c=Object(ge.useState)(""),u=Object(Qe.a)(c,2),l=u[0],d=u[1],m=Object(ge.useState)(""),p=Object(Qe.a)(m,2),f=p[0],h=p[1],b=Object(ge.useState)(""),g=Object(Qe.a)(b,2),v=g[0],O=g[1],y=Object(ge.useState)(0),E=Object(Qe.a)(y,2),I=E[0],k=E[1],S=Object(ge.useState)(0),j=Object(Qe.a)(S,2),x=j[0],T=j[1],C=Object(ge.useState)(),w=Object(Qe.a)(C,2),A=w[0],_=w[1],U=Object(ge.useState)(!1),B=Object(Qe.a)(U,2),R=B[0],N=B[1],L=Object(ge.useState)([0,0,0]),D=Object(Qe.a)(L,2),P=D[0],M=D[1],z=Object(ge.useState)(),F=Object(Qe.a)(z,2),G=F[0],V=F[1],H=Object(ge.useState)("start"),W=Object(Qe.a)(H,2),q=W[0],J=W[1],Y=Object(ge.useState)(!1),Q=Object(Qe.a)(Y,2),K=Q[0],Z=Q[1],X=Object(ge.useState)(!0),$=Object(Qe.a)(X,2),ee=$[0],te=$[1],ne=zg(),re=Object(Qe.a)(ne,1)[0];Object(ge.useEffect)(function(){i&&window.setTimeout(function(){n&&n.current&&n.current.focus()},200)},[i]);var ae=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=60*parseInt(""===l?"0":l,void 0)*60*1e3,a=60*parseInt(""===f?"0":f,void 0)*1e3,o=1e3*parseInt(""===v?"0":v,void 0);if(G&&!n){var i=Object(Qe.a)(G,3);r=i[0],a=i[1],o=i[2],r=60*r*60*1e3,a=60*a*1e3,o*=1e3}var c=r+a+o;!G||n?T(c):V(void 0);var u=Date.now()+c;k(u),N(!0),M(NS(c)),_(s.uid),te(!1),re.startBoardTimer(hv(e.match.params.uid,u,LS(l,f,v),s.uid)),t(gu(e.match.params.uid,!1)),DS(u,c,q,J,M,oe)},oe=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];T(0),k(0),N(!1),V(void 0),_(void 0),J("start"),te(!0),t&&re.stopBoardTimer(hv(e.match.params.uid,0,0,""))},ie=function(e){k(e.deadline),T(e.duration),_(e.moderator),N(!0),te(!1),DS(e.deadline,e.duration,q,J,M,oe);var t=NS(e.duration),n=Object(Qe.a)(t,3),r=n[0],a=n[1],o=n[2];console.log("remote time started: ",e.toJSON()),d(RS(r.toString(),23)),h(RS(a.toString(),59)),O(RS(o.toString(),59))},se=function(e){console.log("Received remote timer stopped: ",e.toJSON()),oe(!1)},ce=function(e){N(!1),console.log("remote paused time: ",e.toJSON()),e.pausedTime&&(M(e.pausedTime),V(e.pausedTime))},ue=function(e,t,n,r){e===A&&Z(!1)},le=function(e){e===A&&Z(!0)};Object(ge.useEffect)(function(){return R&&(PS=window.setInterval(function(){DS(I,x,q,J,M,oe)},1e3),DS(I,x,q,J,M,oe)),function(){PS&&clearInterval(PS)}},[R,q,x,I]),Object(ge.useEffect)(function(){return console.log("attach listeners"),re.onBoardTimerStarted(ie),re.onBoardTimerStopped(se),re.onBoardTimerPaused(ce),re.onUserJoined(ue),re.onUserLeft(le),function(){console.log("detach listeners"),re.offBoardTimerStarted(ie),re.offBoardTimerPaused(ce),re.offBoardTimerStopped(se),re.offUserJoined(ue),re.offUserLeft(le)}},[e.match.params.uid,l,f,v,A]),Object(ge.useEffect)(function(){oe()},[e.match.params.uid]);var de=Object(Qe.a)(P,3),me=de[0],pe=de[1],fe=de[2],he=me+pe+fe>0,be=A===s.uid,ve=!A||be||K;return he||ee||(new Audio("/sound/gong.wav").play(),te(!0)),ge.createElement(ge.Fragment,null,I>0&&ge.createElement("div",{style:{position:"absolute",left:r.width+20+"px",top:"60px",backgroundColor:"rgb(249 251 253 / 52%)",cursor:"pointer"},onClick:function(){return t(gu(e.match.params.uid,!0))}},ge.createElement("p",{style:{padding:"20px",fontWeight:"bold",fontSize:"20px",color:he?"#939393":"#c10303"},className:he?"":"blink"},ge.createElement(hf.a,{name:"hourglass "+(he?q:"end")}),"\xa0\xa0",RS(me.toString(),23,!0),"\xa0:\xa0",RS(pe.toString(),59,!0),"\xa0:\xa0",RS(fe.toString(),59,!0))),ge.createElement(Ri.a,{open:i,closeIcon:!0,onClose:function(){t(gu(e.match.params.uid,!1))},size:"tiny"},ge.createElement(Ri.a.Header,null,e.t("insp.board.timer.modal_header")),ge.createElement(Ri.a.Content,null,ge.createElement("p",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px"}},ge.createElement(Md.a,{name:"hours",transparent:!0,type:"number",min:0,max:23,placeholder:"00",size:"large",style:{width:"55px"},value:I>0?RS(me.toString(),23):l,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void d(RS(n,23));var n},disabled:I>0}),ge.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),ge.createElement(Md.a,{name:"minutes",ref:n,transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:I>0?RS(pe.toString(),59):f,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void h(RS(n,59));var n},disabled:I>0}),ge.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),ge.createElement(Md.a,{name:"seconds",transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:I>0?RS(fe.toString(),59):v,onKeyDown:function(e){return"Enter"!==e.key||ae()},onChange:function(e,t){return n=t.value,void O(RS(n,59));var n},disabled:I>0}))),ge.createElement(Ri.a.Actions,{style:{textAlign:"center"}},ge.createElement(vh.a,null,!R&&ge.createElement(Ni.a,{icon:"play",onClick:function(){return ae()},disabled:!ve}),R&&ge.createElement(Ni.a,{icon:"pause",onClick:function(){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];N(!1),V([me,pe,fe]),t&&re.pauseBoardTimer(hv(e.match.params.uid,I,LS(l,f,v),s.uid,[me,pe,fe]))}()},disabled:!ve}),ge.createElement(Ni.a,{icon:"stop",onClick:function(){return oe()},disabled:!R||!ve}),ge.createElement(Ni.a,{icon:"undo",onClick:function(){return V(void 0),N(!1),void ae(!0)},disabled:0===I||!ve})))))})),zS=function(){return ge.createElement(ze.g,null,ge.createElement(ze.c,{exact:!0,path:"/",to:yt}),ge.createElement(ze.d,{exact:!0,path:yt,component:Qf}),ge.createElement(ze.d,{exact:!0,path:St,component:Cg}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:RO}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/boards/invitation/:invitation",component:sI}),ge.createElement(ze.d,{exact:!0,path:Et,component:Gi}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/teams",component:jI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/teams/invitation/:invitation",component:cI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/updates",component:Bk}),ge.createElement(ze.d,{exact:!0,path:xt,component:BS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/organization",component:AS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/organizations/:organization/invitation/:invitation",component:lS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/boards/import/:link",component:US}))},FS=Object(ze.k)(function(e){return ge.createElement(Ge.a,{fluid:!0},ge.createElement(VI,null),ge.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},ge.createElement(oS,null)),ge.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},ge.createElement(zS,null)),ge.createElement(Ot,null),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:kS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:iI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:uS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:MS}))}),GS=(ge.Component,Object(Pe.b)()(function(e){return ge.createElement(Ri.a,{open:e.open,closeIcon:!1,onClose:e.onClose,size:"tiny"},ge.createElement(Ri.a.Header,null,e.t("insp.collaboration_modal."+e.headerKey)),ge.createElement(Ri.a.Content,null,ge.createElement("p",null,e.t("insp.collaboration_modal.text"))),ge.createElement(Ri.a.Actions,null,ge.createElement(Ni.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")))})),VS=Object(mt.c)(function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(Me.useDispatch)();return ge.createElement(ge.Fragment,null,ge.createElement($e.a,{item:!0,icon:"ellipsis vertical"},ge.createElement($e.a.Menu,{direction:"left"},ge.createElement($e.a.Item,{icon:"history",text:"Activity",onClick:function(){return a(!0)}}),ge.createElement($e.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return o(hu(e.match.params.uid,!0,!1))}}),ge.createElement($e.a.Item,{icon:"code",text:"Cody",onClick:function(){return o(bu(e.match.params.uid,!0))}}),ge.createElement($e.a.Item,{icon:"cog",text:"Settings",to:jt(e.match.params.uid),as:Fe.NavLink}),ge.createElement($e.a.Item,{icon:"download",text:"Import Board",onClick:function(){return o(mu(e.match.params.uid))}}),ge.createElement($e.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return o(pu(e.match.params.uid))}}),ge.createElement($e.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))),ge.createElement(GS,{open:r,onClose:function(){return a(!1)},headerKey:"header_history"}))}),HS=Object(Pe.b)()(Object(ze.k)(VS)),WS=function(e){var t=Object(ge.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ge.createElement(ge.Fragment,null,ge.createElement(xI.a,null,ge.createElement(Ni.a,{icon:!0,className:"share",onClick:function(){return a(!0)}},ge.createElement(hf.a,{name:"share alternate"}),"\xa0share")),ge.createElement(GS,{open:r,onClose:function(){a(!1)},headerKey:"header_team"}))},qS=Object(Pe.b)()(Object(ze.k)(function(e){var t=Object(Me.useSelector)(iO()),n=kt(e.location.pathname)?t.width+20+"px":"270px";return ge.createElement(lI.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n}},ge.createElement(ze.d,{path:yt},ge.createElement(xI.a,null,ge.createElement(TI.a,null,ge.createElement(ze.d,{exact:!0,path:[yt,"/inspectio/board/:uid",St],component:PI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/updates",component:FI}),ge.createElement(ze.d,{exact:!0,path:["/inspectio/board/:uid",St],component:LI})))),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:WS}),ge.createElement(lI.a.Menu,{position:"right"}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:HS}))})),JS=function(){return ge.createElement(ze.g,null,ge.createElement(ze.c,{exact:!0,path:"/",to:yt}),ge.createElement(ze.d,{exact:!0,path:yt,component:Qf}),ge.createElement(ze.d,{exact:!0,path:St,component:Cg}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:RO}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/updates",component:Bk}),ge.createElement(ze.d,{exact:!0,path:xt,component:BS}))},YS=Object(ze.k)(function(e){return ge.createElement(Ge.a,{fluid:!0},ge.createElement(qS,null),ge.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},ge.createElement(oS,null)),ge.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},ge.createElement(JS,null)),ge.createElement(Ot,null),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:kS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:iI}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/board/:uid",component:uS}),ge.createElement(ze.d,{exact:!0,path:"/inspectio/boards/import/:link",component:US}))}),QS=function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),Object(Re.a)(t,[{key:"render",value:function(){var e=this.props.store,t=0===window.location.pathname.search(/^\/free-version/)?"/free-version/":"/";return ge.createElement(Pe.a,{i18n:Je},ge.createElement(Me.Provider,{store:e},ge.createElement(Fe.BrowserRouter,{basename:t},ge.createElement(YS,null))))}}]),t}(ge.Component),KS=n(1043),ZS=Object(fe.Map)(),XS=Object(Pa.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZS,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gb:return e.set("token",t.payload.auth.token);default:return e}}},function(){return Object(fe.fromJS)({})}),$S=Object(fe.Map)(),ej=Object(fe.Map)(),tj=Object(fe.Map)(),nj=Object(fe.Map)(),rj=Object(fe.Map)(),aj=Object(fe.Map)(),oj=Object(fe.Map)(),ij=Object(fe.Map)(),sj={filter:"",sortBy:nf.LAST_MODIFIED_DESC,responsibleTeam:void 0,allSharedBoardsHidden:!1,allOwnBoardsHidden:!1},cj=new(function(e){function t(){return Object(Be.a)(this,t),Object(Ne.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(De.a)(t,e),t}(Object(fe.Record)(sj))),uj=function(e){var t=[],n=e.toArray(),r=!1,a=!1,o="",i=null,s=null;return n.forEach(function(e,c){if(!r&&a&&(e=e.set("label",o),a=!1,o=""),c+1<n.length){var u=n[c+1];if(e.userId!==u.userId)return t.push(e),r=!1,a=!1,o="",i=null,s=null,!0;if(i&&s===e.action&&(e=e.set("date",i)),i=null,s=null,e.cellId===u.cellId){if(e.action===u.action)return e.cellType!==hd.multiple&&e.cellType!==hd.misc?(o=e.label,i=e.date,s=e.action,r=!1,a=!0,!0):(r||t.push(e),r=!0,!0);if(e.action===Zl.edited&&u.action===Zl.added)return r=!1,a=!0,o=e.label,!0}}r||t.push(e),r=!1,o="",a=!1,s=null,i=null}),Object(fe.List)(t)},lj=Object(fe.Map)(),dj=Object(fe.Map)(),mj=Object(Pa.combineReducers)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ej,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Zi:var n=t.payload.board;return e.set(n.uid,n);case Xi:var r=t.payload;return Object(Dn.forEach)(r,function(t){if(e.get(t.uid)){var n=e.get(t.uid);e=e.set(t.uid,n.syncSummaryInfo(t))}else e=e.set(t.uid,t)}),e;case $i:return Object(Dn.forEach)(t.payload,function(t){e=e.set(t.uid,t)}),e;case es:var a=e.get(t.payload.snapshot.boardId);return a&&(a=(a=a.updateXmlFromSnapshot(t.payload.snapshot)).set("detailsFetched",!0),e=e.set(t.payload.snapshot.boardId,a)),e;case ts:var o=e.get(t.payload.boardId);return o&&(o=(o=o.set("detailsFetched",!0)).set("writeAccess",t.payload.writeAccess),e=e.set(t.payload.boardId,o)),e;case ys:var i=e.get(t.payload.boardId);return i&&(i=i.set("detailsFetched",!1),e=e.set(t.payload.boardId,i)),e;case Hi:var s=e.get(t.payload.board.uid);return s&&(s=s.updateXmlAndVersionFromBoard(t.payload.board),e=e.set(t.payload.board.uid,s)),e;case Wi:case qi:case Ji:case Yi:return e.setIn([t.payload.board.uid],t.payload.board);case ns:return e.setIn([t.payload.boardId,"inDeletion"],!0);case rs:return e.setIn([t.payload.boardId,"inDeletion"],!1);case as:return e.removeIn([t.payload.boardId]);case ds:return e.setIn([t.payload.boardId,"shouldImport"],!0);case Vs:case Gs:return e.setIn([t.payload.boardId,"shouldImport"],!1);case ms:return e.setIn([t.payload.boardId,"shouldExport"],!0);case Hs:return e.setIn([t.payload.boardId,"shouldExport"],!1);case ps:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowElementDetails"],!1)),e.setIn([t.payload.boardId,"shouldShowHistory"],t.payload.visible);case fs:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowHistory"],!1)),(e=e.setIn([t.payload.boardId,"shouldFocusMetadataEditor"],t.payload.focusEditor)).setIn([t.payload.boardId,"shouldShowElementDetails"],t.payload.visible);case hs:return e.setIn([t.payload.boardId,"shouldShowCodyConsole"],t.payload.visible);case bs:return e=e.setIn([t.payload.boardId,"shouldShowTimerModal"],t.payload.visible);case gs:return e=e.setIn([t.payload.boardId,"videoSessionActive"],t.payload.active);case Ks:var c=e.getIn([t.payload.boardId,"sharedWith"],Object(fe.List)());return e.setIn([t.payload.boardId,"sharedWith"],c.filter(function(e){return e!==t.payload.userId}));case pc:return e.set(t.payload.uid,t.payload);case W.Type.TEAM_ACCESS_TO_BOARD_GRANTED:var u=e.getIn([t.payload.boardId,"assignedTeams"],Object(fe.List)());return e.setIn([t.payload.boardId,"assignedTeams"],u.push(t.payload.teamId));case W.Type.TEAM_ACCESS_TO_BOARD_REVOKED:var l=e.getIn([t.payload.boardId,"assignedTeams"],Object(fe.List)());return e.setIn([t.payload.boardId,"assignedTeams"],l.filter(function(e){return e!==t.payload.teamId}));default:return e}},boardPermissionsForUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $s:return Ga(e,t.payload.boardPermissions);case Zs:var n=t.payload.boardId,r=t.payload.userId,a=e.valueSeq().toArray().find(function(e){return e.boardId===n&&e.userId===r});return a?e.setIn([a.uid,"permissions"],t.payload.permissions):e;case Ks:var o=t.payload.boardId,i=t.payload.userId,s=e.valueSeq().toArray().find(function(e){return e.boardId===o&&e.userId===i});return s?e.remove(s.uid):e;default:return e}},boardPermissionsForTeams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ec:return Ga(e,t.payload.boardPermissions);case Xs:return za(e,t.payload);default:return e}},boardInvitations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case tc:return Ga(e,t.payload.boardInvitations);case Ys:case Qs:return za(e,t.payload.boardInvitation);default:return e}},boardClients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ic:return e.set(t.payload.boardId,t.payload.client);case sc:return e.set(t.payload.boardId,null);case cc:return e.setIn([t.payload.boardId,"clientSecret"],t.payload.clientSecret);default:return e}},boardGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oc:var n=e.get(t.payload.boardId)||Object(fe.Map)();return e.set(t.payload.boardId,Ga(n,t.payload.elements));default:return e}},history:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lj,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case vs:var a=n.get(r.payload.boardId,new jg),o=r.payload.entries;if(a.history.count()>0){var i=a.history.last();a=a.set("history",a.history.pop()),o=o.unshift(i)}o=uj(o);var s=r.payload.entries.last(new gd);return a=(a=a.set("history",(e=a.history).push.apply(e,Object(Xa.a)(o.toArray())))).set("oldestBoardVersion",s.boardVersion),s.cellId||s.cellType!==hd.misc||ZE()(s.date,ZE.a.ISO_8601).isBefore(ZE()("2019-07-29"))&&(a=a.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,a);case Os:var c=n.get(r.payload.boardId,new jg),u=r.payload.entries;if(c.history.count()>0){var l=c.history.first();c=c.set("history",c.history.shift()),u=u.push(l)}u=uj(u),c=c.set("history",(t=c.history).unshift.apply(t,Object(Xa.a)(u.toArray())));var d=r.payload.entries.last(new gd);return c.oldestBoardVersion||(c=c.set("oldestBoardVersion",d.boardVersion)),d.cellId||d.cellType!==hd.misc||ZE()(d.date,ZE.a.ISO_8601).isBefore(ZE()("2019-07-29"))&&(c=c.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,c);case Ss:var m=n.get(r.payload.boardId,new jg);return m=m.set("loading",r.payload.loading),n.set(r.payload.boardId,m);case ks:return n.setIn([r.payload.boardId,"olderPatchesAvailable"],!1);case ys:return n.remove(r.payload.boardId);default:return n}},loadingBoards:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case hc:return!0;case Xi:return!1;default:return e}},initialBoardListLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case fc:return!0;default:return e}},overview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Bs:return e.set("filter",t.payload.filter);case Rs:return e.set("sortBy",t.payload.sort);case Ns:return e.set("responsibleTeam",t.payload.teamId);case Ls:return e.set("allSharedBoardsHidden",t.payload.hide);case Ds:return e.set("allOwnBoardsHidden",t.payload.hide);default:return e}},elementsTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ij,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case js:var n=e.get(t.payload.boardId,new yk({elements:Object(fe.List)()}));return e.set(t.payload.boardId,n.mergeTree(new yk({elements:t.payload.elements})));case Ps:var r=e.get(t.payload.boardId,new yk({elements:Object(fe.List)()}));return e.set(t.payload.boardId,r.set("filter",t.payload.filter).set("focus",t.payload.focus||!1));default:return e}},activeGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case nc:return t.payload.element?e.set(t.payload.boardId,{id:t.payload.element.id,type:t.payload.element.type,label:t.payload.element.label,metadata:t.payload.element.metadata||void 0,edgeData:t.payload.element.edgeData||void 0,updateMetadata:t.payload.element.updateMetadata,updateSimilarElements:t.payload.element.updateSimilarElements}):e.set(t.payload.boardId,void 0);case rc:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"label"],t.payload.label);case ac:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"metadata"],t.payload.metadata);default:return e}},StickyTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case uc:case mc:return Ga(e,t.payload.stickyTemplates);case lc:case dc:return Ga(e,Object(fe.List)([t.payload.stickyTemplate]));default:return e}}},function(){return Object(fe.fromJS)({boards:void 0,StickyTemplate:void 0})}),pj=Object(Pa.combineReducers)({sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aO,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $v:return e.set("collapsed",t.payload.collapsed);case eO:return e.set("width",t.payload.width);case tO:return e.set("rightSidebarWidth",t.payload.width);case nO:return e.set("codyConsoleHeight",t.payload.height);default:return e}}},function(){return Object(fe.fromJS)({sidebar:void 0})}),fj=Object(fe.List)(),hj=Object(Pa.combineReducers)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case it:case"@@NotificationSystem/MessageHandled":var n=e.findIndex(function(e){return e.uid===t.payload.uid});return e=n>-1?t.payload.handled?e.remove(n):e.set(n,t.payload):e.push(t.payload);default:return e}}},function(){return Object(fe.fromJS)({messages:void 0})}),bj=Z.disconnectedStatus(),gj=Object(Pa.combineReducers)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bj;switch((arguments.length>1?arguments[1]:void 0).type){case Q.CONNECT_SOCKET:return Z.fromtString(Z.STATUS_CONNECTING);case Q.SOCKET_CONNECTED:return Z.fromtString(Z.STATUS_CONNECTED);case Q.SOCKET_DISCONNECTED:return Z.fromtString(Z.STATUS_DISCONNECTED);case Q.DISCONNECT_SOCKET:return Z.fromtString(Z.STATUS_DISCONNECTING);case Q.SOCKET_CONNECTION_LOST:return Z.fromtString(Z.STATUS_CONNECTION_LOST);default:return e}}},function(){return Object(fe.fromJS)({status:void 0})}),vj=Object(fe.Map)(),Oj=Object(fe.Map)().set("currentUser",new O.UserInfo(O.defaultUserProps)),yj=Object(fe.Map)(),Ej=Object(Pa.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return e.set("currentUser",t.payload.user);case L.Type.ADD_BOARD:case L.Type.IMPORT_NEW_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])-1);case L.Type.DELETE_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])+1);case W.Type.TEAM_ADDED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])-1);case W.Type.TEAM_DELETED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])+1);case Lt:return e.setIn(["currentUser"],t.payload.user);case zt:return e.setIn(["currentUser","activeOrganization"],t.payload.activeOrganization);default:return e}},userSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.USER_SETTINGS_LOADED:return e.merge(t.payload.userSettings.values,{settings_loaded:!0});case s.USER_SETTING_UPSERTED:return e.set(t.payload.key,t.payload.value);default:return e}},iioUsersInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vj,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.IIO_USERS_INFO_LOADED:return Ga(e,t.payload.usersInfo);default:return e}}},function(){return Object(fe.fromJS)({users:void 0,userSettings:void 0,iioUsersInfo:void 0})}),Ij=Object(Pa.combineReducers)({notificationSystem:hj,inspectioBoards:mj,inspectioUsers:Ej,inspectioTeams:q.inspectioTeamsReducer,inspectioOrganizations:x.inspectioOrganizationsReducer,inspectioSidebar:pj,form:Pi.reducer,auth:XS,socket:gj},function(){return Object(fe.fromJS)({notificationSystem:void 0,inspectioBoards:void 0,inspectioUsers:void 0,inspectioTeams:void 0,inspectioOrganizations:void 0,inspectioSidebar:void 0,auth:void 0,socket:void 0})}),kj=fn.a.mark(jj),Sj=fn.a.mark(xj);function jj(e){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.c)(Ti.deleteBoard,e.payload.boardId);case 2:return t.next=4,Object(hn.g)(i.Command.info("Board deleted","Board deleted"));case 4:case"end":return t.stop()}},kj,this)}function xj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(_.DELETE_BOARD);case 3:return e=t.sent,t.next=6,Object(hn.f)(jj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Sj,this)}var Tj=fn.a.mark(wj),Cj=fn.a.mark(Aj);function wj(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.c)(Ti.getBoard,e.payload.board.uid);case 2:if(!(t=n.sent)||e.payload.board.tempBoard){n.next=6;break}return n.next=6,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},t,{name:e.payload.board.name,nameAbbreviation:e.payload.board.nameAbbreviation,tags:e.payload.board.tags.toJS()}));case 6:case"end":return n.stop()}},Tj,this)}function Aj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.RENAME_BOARD,_.CHANGE_BOARD_ABBREVIATION,_.SET_BOARD_TAGS]);case 3:return e=t.sent,t.next=6,Object(hn.f)(wj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Cj,this)}var _j=fn.a.mark(Bj),Uj=fn.a.mark(Rj);function Bj(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(hn.c)(Ti.getBoard,e.payload.boardId);case 2:if(t=a.sent){a.next=5;break}return a.abrupt("return");case 5:if(!Cn(n=Ln(t.stickyTemplates,Bn([Mn(),"Response data is not of type Array"]),Nn(function(t){return Bh({boardId:e.payload.boardId,cellType:t.cellType,template:t.template,templateType:t.templateType,templateSchema:t.templateSchema})})))){a.next=9;break}return a.next=9,Object(hn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 9:if(!wn(n)){a.next=13;break}return r=Object(fe.List)(n.value),a.next=13,Object(hn.g)(L.Event.boardStickyTemplatesFetched(r));case 13:case"end":return a.stop()}},_j,this)}function Rj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Bj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Uj,this)}var Nj=fn.a.mark(Mj),Lj=fn.a.mark(zj),Dj=fn.a.mark(Fj),Pj=fn.a.mark(Gj);function Mj(){var e,t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.c)(Ti.getUserSettings);case 2:return e=n.sent,t={},e.forEach(function(e){t[e.key]=e.value}),n.next=7,Object(hn.g)(f.Event.userSettingsLoaded(new Sy({userId:Ti.getUser().userId,values:t})));case 7:case"end":return n.stop()}},Nj,this)}function zj(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.g)(f.Command.signIn({uid:Ti.getUser().userId,name:"standalone",email:"",givenName:"",familyName:"",roles:{roleMap:{anonymous:{type:"anonymous"}}},account:{accountType:"free"},quota:1e3,teamQuota:1,displayName:"standalone",avatarUrl:"",companyName:"",jobTitle:"",signedIn:!0}));case 2:case"end":return e.stop()}},Lj,this)}function Fj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.g)(N.startFetchUserBoards());case 2:return t.next=4,Object(hn.c)(Ti.getBoards);case 4:return e=t.sent,t.next=7,Object(hn.g)(cu(e.map(function(e){return new P.Board({uid:e.boardId,name:e.name,nameAbbreviation:e.nameAbbreviation||Jl(e.name),tags:Object(fe.List)(e.tags||[]),createdAt:e.createdAt||e.lastModified,lastModified:e.lastModified,version:new Wl(Hl),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),example:!1,owner:Ti.getUser().userId,creator:null,organization:null,tempBoard:!1})})));case 7:return t.next=9,Object(hn.g)(cl());case 9:case"end":return t.stop()}},Dj,this)}function Gj(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(hn.k)(_.FETCH_USER_BOARDS);case 3:return e.next=5,Object(hn.f)(Fj);case 5:return e.next=7,Object(hn.f)(zj);case 7:return e.next=9,Object(hn.f)(Mj);case 9:e.next=0;break;case 11:case"end":return e.stop()}},Pj,this)}var Vj=fn.a.mark(Wj),Hj=fn.a.mark(function e(t){var n,r,a;return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(hn.i)(If());case 2:if(!(e.sent.size<1)){e.next=6;break}return e.next=6,Object(hn.c)(Fj);case 6:return e.next=8,Object(hn.i)(Yb(t.payload.boardId));case 8:if(!(n=e.sent)||!n.tempBoard){e.next=13;break}return e.next=12,Object(hn.g)(B.setBoardDetailsFetched(t.payload.boardId,!1));case 12:return e.abrupt("return");case 13:return e.next=15,Object(hn.c)(Ti.getBoard,t.payload.boardId);case 15:if(r=e.sent){e.next=18;break}return e.abrupt("return");case 18:return a=new z.BoardSnapshot({boardId:r.boardId,xml:r.xml,boardVersion:new D.BoardVersion(Hl)}),e.next=21,Object(hn.g)(lu(a));case 21:return e.next=23,Object(hn.g)(B.setBoardDetailsFetched(t.payload.boardId,!0));case 23:case"end":return e.stop()}},e,this)});function Wj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(_.FETCH_USER_BOARD);case 3:return e=t.sent,t.next=6,Object(hn.f)(Hj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Vj,this)}var qj=fn.a.mark(Yj),Jj=fn.a.mark(Qj);function Yj(e){var t;return fn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(hn.c)(Ti.getBoard,e.payload.board.uid);case 2:if(!(t=n.sent)){n.next=10;break}return n.next=6,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},t,{xml:e.payload.board.xml,lastModified:(new Date).toISOString()}));case 6:return n.next=8,Object(hn.g)(B.forceUpdateBoards([e.payload.board]));case 8:return n.next=10,Object(hn.g)(i.Command.info("Board imported:",e.payload.board.name));case 10:case"end":return n.stop()}},qj,this)}function Qj(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Yj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Jj,this)}var Kj=fn.a.mark(Xj),Zj=fn.a.mark($j);function Xj(e){var t,n,r,a,o,s,c,u;return fn.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=e.payload.boardId||nt.v4(),e.payload.importTemporary){l.next=10;break}return l.next=4,Object(hn.c)(Ti.addBoard,{boardId:t,name:e.payload.boardName,lastModified:(new Date).toISOString(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,stickyTemplates:[]});case 4:return l.next=6,Object(hn.g)(i.Command.info("Board created","Board created"));case 6:return l.next=8,Object(hn.f)(Fj);case 8:l.next=22;break;case 10:return n=A.makeGetCurrentUser(),l.next=13,Object(hn.i)(n);case 13:return r=l.sent,a=new Kl({uid:t,name:e.payload.boardName,nameAbbreviation:Jl(e.payload.boardName),tags:Object(fe.List)(),createdAt:(new Date).toISOString(),xml:e.payload.boardXml,version:new Wl({userId:r.uid,version:1}),shared:!1,sharedWith:Object(fe.List)(),assignedTeams:Object(fe.List)(),owner:null,creator:r.uid,organization:null,tempBoard:!0}),l.next=17,Object(hn.g)(B.updateBoards([a]));case 17:return o=Ng(),s=Object(Qe.a)(o,2),s[0],c=s[1],u=td(a.xml||void 0),c(u),l.next=22,Object(hn.g)(B.saveBoard(a,u));case 22:case"end":return l.stop()}},Kj,this)}function $j(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([_.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(hn.f)(Xj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Zj,this)}var ex=fn.a.mark(nx),tx=fn.a.mark(rx);function nx(e){var t,n;return fn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(hn.c)(Ti.getBoard,e.payload.boardId);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return");case 5:return n=e.payload.stickyTemplates.map(function(e){return{cellType:e.cellType,template:e.template,templateType:e.templateType,templateSchema:e.templateSchema||null}}),r.next=8,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},t,{stickyTemplates:n.toArray()}));case 8:return r.next=10,Object(hn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 10:return r.next=12,Object(hn.g)(L.Event.stickyTemplatesImported(Object(fe.List)(e.payload.stickyTemplates)));case 12:e.payload.finishedCb();case 13:case"end":return r.stop()}},ex,this)}function rx(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(hn.f)(nx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},tx,this)}var ax=fn.a.mark(ix),ox=fn.a.mark(sx);function ix(e){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.c)(Ti.addBoard,{boardId:e.payload.board.uid,name:e.payload.board.name,createdAt:(new Date).toISOString(),lastModified:(new Date).toISOString(),xml:"",stickyTemplates:[]});case 2:return t.next=4,Object(hn.c)(e.payload.history.push,It(e.payload.board.uid));case 4:case"end":return t.stop()}},ax,this)}function sx(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(_.ADD_BOARD);case 3:return e=t.sent,t.next=6,Object(hn.f)(ix,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ox,this)}var cx=fn.a.mark(lx),ux=fn.a.mark(dx);function lx(e){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.g)(ju(e.payload.boardId,!0));case 2:return t.next=4,Object(hn.g)(Su(e.payload.boardId));case 4:return t.next=6,Object(hn.g)(ju(e.payload.boardId,!1));case 6:case"end":return t.stop()}},cx,this)}function dx(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(Es);case 3:return e=t.sent,t.next=6,Object(hn.f)(lx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ux,this)}var mx=fn.a.mark(fx),px=fn.a.mark(hx);function fx(e){var t,n,r,a;return fn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=Ng(),n=Object(Qe.a)(t,1),r=n[0],o.next=3,Object(hn.c)(Ti.getBoard,e.payload.board.uid);case 3:if(!(a=o.sent)||e.payload.board.tempBoard){o.next=7;break}return o.next=7,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},a,{xml:r.exportXmlSnapshot(),lastModified:(new Date).toISOString()}));case 7:case"end":return o.stop()}},mx,this)}function hx(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(_.SAVE_BOARD);case 3:return e=t.sent,t.next=6,Object(hn.f)(fx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},px,this)}var bx=fn.a.mark(Ox),gx=fn.a.mark(yx),vx=fn.a.mark(Ex);function Ox(e){var t,n,r,a,o,s,c;return fn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(hn.i)(tg(Uh(e.payload.boardId,e.payload.cellType)));case 2:return t=u.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Rh(r,a,o)),u.next=7,Object(hn.c)(Ti.getBoard,e.payload.boardId);case 7:if(s=u.sent){u.next=10;break}return u.abrupt("return");case 10:return c=s.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:a,templateType:t.templateType,templateSchema:t.templateSchema||null},u.next=13,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},s,{stickyTemplates:[].concat(Object(Xa.a)(s.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},c,{template:o})])}));case 13:return u.next=15,Object(hn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 15:return u.next=17,Object(hn.g)(L.Event.stickyTemplateSet(t.setTemplate(o)));case 17:case"end":return u.stop()}},bx,this)}function yx(e){var t,n,r;return fn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,null;case 2:return a.next=4,Object(hn.i)(tg(Uh(e.payload.boardId,e.payload.cellType)));case 4:return(t=a.sent)||(t=Rh(e.payload.boardId,e.payload.cellType,"")),a.next=8,Object(hn.c)(Ti.getBoard,e.payload.boardId);case 8:if(n=a.sent){a.next=11;break}return a.abrupt("return");case 11:return r=n.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:t.cellType,template:t.template},a.next=14,Object(hn.c)(Ti.updateBoard,Object(Ye.a)({},n,{stickyTemplates:[].concat(Object(Xa.a)(n.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},r,{templateType:e.payload.templateType,templateSchema:e.payload.templateSchema||null})])}));case 14:return a.next=16,Object(hn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(hn.g)(L.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},gx,this)}function Ex(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)([L.Type.SET_STICKY_TEMPLATE,L.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==L.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(hn.f)(Ox,e);case 7:t.next=11;break;case 9:return t.next=11,Object(hn.f)(yx,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},vx,this)}var Ix=fn.a.mark(Sx),kx=fn.a.mark(jx);function Sx(e){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.c)(Ti.setUserSetting,e.payload);case 2:return t.next=4,Object(hn.g)(l.userSettingUpserted(e.payload.key,e.payload.value));case 4:case"end":return t.stop()}},Ix,this)}function jx(){var e;return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(hn.k)(s.UPSERT_USER_SETTING);case 3:return e=t.sent,t.next=6,Object(hn.f)(Sx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},kx,this)}var xx={standaloneDeleteBoardFlow:xj,standaloneFetchBoardStickyTemplatesFlow:Rj,standaloneFetchUserBoardsFlow:Gj,standaloneFetchUserBoardFlow:Wj,standaloneImportNewBoardFlow:$j,standaloneImportExistingBoardFlow:Qj,standaloneInstallUserBoardFlow:sx,standaloneLoadBoardHistoryFlow:dx,standaloneSaveBoardFlow:hx,standaloneUpdateStickyTemplateFlow:Ex,standaloneUpsertUserSetting:jx,standaloneEditBoardFlow:Aj,syncElementsTreeFlow:FE,importStickyTemplates:rx,storeOverviewSettingsFlow:NE},Tx=fn.a.mark(wx),Cx=Object.values(xx).map(function(e){return fn.a.mark(function t(){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(hn.j)(fn.a.mark(function t(){return fn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(hn.c)(e);case 4:console.error("unexpected root saga termination. The root sagas are supposed to be sagas that live during the whole app lifetime!",e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Saga error, the saga will be restarted",t.t0);case 10:return t.next=12,Object(hn.e)(1e3);case 12:t.next=0;break;case 14:case"end":return t.stop()}},t,this,[[1,7]])}));case 2:case"end":return t.stop()}},t,this)})});function wx(){return fn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga started"),e.next=3,Object(hn.b)(Cx.map(function(e){return Object(hn.c)(e)}));case 3:case"end":return e.stop()}},Tx,this)}var Ax=function(e,t){var n=Object(KS.composeWithDevTools)({}),r=Object(bb.b)(),a=Object(pt.createStore)(Ij,t,n(Object(pt.applyMiddleware)(r)));return r.run(wx),a},_x=n(1044),Ux=Object(_x.a)();n(179),n(1215);n.d(t,"logout",function(){return Lx});var Bx=new be.a({url:"https://ee.local/auth",realm:"proophboard",clientId:"inspectio"}),Rx=Object(fe.fromJS)({}),Nx=Ax(Ux,Rx);Nx.dispatch(Ul()),Oe.render(ge.createElement(QS,{store:Nx,history:Ux}),document.getElementById("root"));var Lx=function(){return Bx.logout()}},500:function(e,t,n){},515:function(e,t,n){},531:function(e,t,n){},532:function(e,t,n){},590:function(e,t,n){e.exports=n(1216)},601:function(e,t){},603:function(e,t){},641:function(e,t){},642:function(e,t){},792:function(e,t){},820:function(e,t){e.exports={de:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Willkommen beim React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Umbenennen",save:"Speichern",change:"\xc4ndern",cancel:"Abbrechen",confirm:"Ok",delete:"L\xf6schen",remove:"Entfernen",upload:"Hochladen",resend:"Erneut Senden",revoke:"Widerrufen",yes:"Ja",no:"Nein",back:"Zur\xfcck",generateTemplate:"Template generieren"},showLess:"Weniger anzeigen",showAll:"Alle anzeigen",open:"\xd6ffnen",learnMore:"Mehr erfahren",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Mehr erfahren",got_it:"Alles klar",new_logo_header:"Neues Logo",new_logo_text:"InspectIO ist jetzt prooph board",new_domain_header:"Neue Domain",new_domain_text:"InspectIO ist jetzt prooph board und ab sofort erreichbar unter https://prooph-board.com. Aktualisiere am besten gleich deine bookmarks!"},overview:{all_boards:"Meine Boards",add_board:"Neues Board",last_modified:"Zuletzt ge\xe4ndert",fetch_board_error:"Es gibt ein technisches Problem beim Laden des Boards. Bitte sp\xe4ter erneut versuchen oder den Support kontaktieren.",shared_board:"Dieses Board wurde mit dir geteilt. Du kannst die Board-Eigenschaften nicht bearbeiten.",empty_space:"Hi, deine \xdcbersicht sieht leer aus. Bist du neu hier? Starte mit deinem ersten Board und schau f\xfcr weitere Infos im Wiki vorbei!",sort:{NAME:"Name",CREATED_AT:"Erstellungsdatum",LAST_MODIFIED:"Bearbeitungsdatum"},teamFilter:{all:"Alle Teams"},search:{label:"Suche ..."}},sidebar:{element_details:{json_invalid_title:"Schema Ung\xfcltig",json_invalid_text:"Das Schema ist kein g\xfcltiges JSON Dokument",no_element_selected:"Markiere ein Element auf dem Board, um dessen Metadaten zu bearbeiten.",update_similar_elements_text:"Auf dem Board befinden sich {{number}} weitere Cards vom gleichen Typ und gleichem Namen.",update_similar_elements_link:"Klicke hier, um die Metadaten auf alle Cards zu \xfcbertragen."},no_boards_left_warning:"Keine Boards mehr verf\xfcgbar",boards_left_warning:"Nur noch {{board_count}} Board verf\xfcgbar",boards_left_warning_upgrade:"Deine Organisation ben\xf6tigt ein Upgrade"},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Aktiviere den Lite Modus f\xfcr mehr Performance auf gro\xdfen Boards und w\xe4hrend Video Calls.",lite_mode_is_active:"Du befindest dich im Lite Modus.",lite_mode_is_active_details:"Elemente werden beim Zoomen nicht ausgeblendet und Schriftgr\xf6\xdfen nicht angepasst, um Rechenleistung zu sparen."},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Diese Funktion ist in der freien Version leider nicht verf\xfcgbar."},board:{add:"Neues Board",advanced_settings:"Erweiterte Einstellungen",import:"Board Import",import_existing_board:'Ein Board mit dem Namen "%name%" existiert bereits. Du kannst das Board mit dem Import \xfcberschreiben oder eine Kopie importieren. Was m\xf6chtest du tun?',btn_replace_board:"Board \xfcberschreiben",btn_import_as_new:"Als Kopie importieren",edit_header:"Board Einstellungen",edit:"%name%",share:"Permissions",share_sub:"Lade andere User ein auf dein Board zu schauen oder es zu bearbeiten.",delete_txt1:"Wenn Du das Board nicht mehr ben\xf6tigst, kannst Du es hier ",delete_link:"l\xf6schen",delete_txt2:".",really_delete:"Bitte best\xe4tige die L\xf6schung, indem du den Board Namen eingibst. Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!",tags_sub:"Setze Tags um Boards zu gruppieren und \xfcber die Suche zu finden",form:{board_name:"Board Name",board_abbr:"K\xfcrzel",responsible_team:"Zust\xe4ndiges Team",btn_add_save:"Los geht's",btn_share:"Share",btn_send_invitation:"Einladung versenden",btn_send:"Send",email:"eMail",team_name:"Teamname"},invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Board entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Board entfernt werden?',joined:{title:"Board Zugriff",details:"Du hast nun Zugriff auf das Board: {{name}}."},upload:{select_image:"Bild ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen, aus der Zwischenablage einf\xfcgen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Bild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Bild konnte nicht gel\xf6scht werden.",paste_failed:"Einf\xfcgen fehlgeschlagen",invalid_file_pasted:"Es konnte keine jpeg/png Datei in der Zwischenablage gefunden werden."},link:{headline:"Board verlinken",select_board:"W\xe4hle ein Board",select_event:"W\xe4hle ein Event"},tasklink:{headline:"Task verlinken"},notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen"}}},sticky_templates:{headline:"Card Templates",descriptions:"Hinterlege ein Metadata Template pro Card Typ",advanced_config:"Erweiterte Konfiguration",upload_info:"JSON-Schema Datei (.json) in diesen Bereich ziehen oder hier klicken, um den Upload-Dialog zu \xf6ffnen",uploaded_schema_invalid_title:"Datei ung\xfcltig",uploaded_schema_invalid_text:"Die hochgeladene Datei ist kein g\xfcltiges Schema"},layers:{moved_to_sidebar_header:"Ebenen sind jetzt in der Sidebar",moved_to_sidebar_details:"Wir haben die Ebenen-Funktion in die linke Sidebar integriert, f\xfcr mehr \xdcbersicht und schnelleren Zugriff. Im prooph board Wiki erf\xe4hrst du mehr \xfcber die \xc4nderung. Der Men\xfceintrag wird demn\xe4chst ebenfalls entfernt.",moved_to_sidebar_wiki_text:"Hier geht's zum Wiki Eintrag",delete_confirmation:"Wirklich?",add_layer:"Ebene hinzuf\xfcgen",set_global_visibility:"Deine Sichtbarkeit der Ebenen mit allen teilen",refresh_layers:"neueste \xc4nderungen vom Board \xfcbernehmen",folder_title:"Einfacher Klick \xf6ffnet die Ebene und markiert sie als aktiv.\nDoppelklick \xf6ffnet das Bearbeiten-Menu.",delete_layer:"Ebene l\xf6schen",visibility:"Ebene ein/ausblenden",lock_layer:"Ebene sperren/entsperren",edit_name:"Name der Ebene \xe4ndern",insert_selection:"Auf dem Board markierte Elemente in die aktive Ebene verschieben"},move_to_organization_title:"Zu Organisation verschieben",move_to_organization_sub_title:"Teile das Board mit Mitgliedern einer Organisation",move_to_organization_desc:"Du kannst dieses Board in eine Organisation verschieben, um es mit Mitgliedern zu teilen. User, die direkt auf das Board berechtigt, aber keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben",timer:{modal_header:"Timer einstellen",hint:"Neue Timer Funktion! Ein laufender Timer ist f\xfcr alle User auf dem Board sichtbar. Der Ersteller des Timers kann ihn pausieren und stoppen."}},organisation:{switch_hint_header:"Neu: Organisationen",switch_hint:"\xdcber eine Organisation kann das Board und User Kontingent eines Accounts mit anderen Usern geteilt werden. Mitglieder k\xf6nnen Boards direkt miteinander teilen. \xdcber die Sidebar hast du Zugriff auf das Setup.",switch_hint_ok:"Alles klar",create_btn:"Organisation erstellen",name:"Name der Organisation",not_explicit:"Erstelle eine Organisation um Mitarbeiter oder Teamkollegen einzuladen, die dein Board und User Kontingent mit nutzen k\xf6nnen.",no_member_quota:"Du kannst keine weiteren User in deine Organisation einladen, da dein Kontingent ersch\xf6pft ist. Du ben\xf6tigst ein Upgrade.",no_admin:"Du bist kein Administrator f\xfcr diese Organisation und hast keinen Zugiff auf die Userverwaltung",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User von der Organisation entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich von der Organisation entfernt werden?',remove_user_confirm_button:"Entfernen",send_invitation:"Einladung senden",open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",promote_to_admin:"Zum Admin ernennen",demote_to_member:"Admin Berechtigung entziehen",promote_to_member:"Zum Mitglied ernennen",member:"Mitglieder",guests:"G\xe4ste",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},joined:{title:"Organisation beigetreten",details:"Du bist der Organisation {{name}} beigetreten."}},team:{overview_add:"Add Team",add:"Neues Team",team_name:"Teamname",team_description:"Teambeschreibung",add_user:"Add User",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Team entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Team entfernt werden?',remove_user_confirm_button:"Entfernen",remove_board_confirm_title:"Team vom Board entfernen?",remove_board_confirm_text:'Soll das Team wirklich vom Board "{{board_name}}" entfernt werden?',remove_board_confirm_button:"Entfernen",joined:{title:"Team beigetreten",details:"Du bist dem Team {{team}} beigetreten."},add_to_board:"Team Zugriff auf {{board_name}} einrichten.",grant_access:"Team Zugriff einrichten.",choose:"W\xe4hle ein Team ...",choose_board:"W\xe4hle ein Board ...",remove_from_board_confirm_title:"Team vom Board entfernen?",remove_from_board_confirm_text:'Soll das Team "{{team_name}}" wirklich vom Board entfernt werden?',remove_team_confirm_title:"Team entfernen?",remove_team_confirm_text:'Soll das Team "{{team_name}}" wirklich entfernt werden?',open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",error_loading_invitations:"Beim Laden der Einladungen ist ein Fehler aufgetreten. Bitte sp\xe4ter erneut probieren.",send_invitation:"Einladung senden",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},no_teams:"Du hast noch keine Teams angelegt. Nutze Teams um Arbeitsgruppen zu organisieren und mehreren Usern gleichzeitig Berechtigungen auf Boards zu geben.",move_to_organization_title:"Zu Organisation verschieben",move_to_organization_desc:"Du kannst dieses Team in eine Organisation verschieben. Mitglieder des Teams, die keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben"},user:{profile_headline:"{{user_name}}",profile_subline:"Benutzerprofil bearbeiten",quota_reached:"Die maximale Anzahl an Boards ist erreicht. Deine Organization ben\xf6tigt ein Upgrade.",quota_reached_user:"Die maximale Anzahl an Boards ist erreicht. Du ben\xf6tigst ein Upgrade.",quota_reached_guest:"Du bist Gast in der aktuellen Organization und kannst keine Boards erstellen.",team_quota_reached:"Du hast die maximale Anzahl an Teams erreicht. Mit einem Free Account ist 1 Team m\xf6glich. Nach Abschluss der Betaphase wird es die M\xf6glichkeit f\xfcr ein Upgrade auf eine Basic oder Pro Subscription geben.",form:{labels:{display_name:"Anzeigename",email:"E-Mail",company:"Firma",position:"Position",password1:"Passwort",password2:"Passwort (Wiederholen)"},fields:{display_name:"Mein Anzeige Name",email:"ich@firma.de",company:"Meine Firma",position:"Entwickler / CEO / Manager"}},avatar_upload:{select_photo:"Foto ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Profilbild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Profilbild konnte nicht gel\xf6scht werden."},change_password:{passwords_not_matching_title:"Passw\xf6rter stimmen nicht \xfcberein",passwords_not_matching_text:"Die eingegebenen Passw\xf6rter stimmen nicht \xfcberein. Bitte versuche es erneut."}},history:{today:"Heute",yesterday:"Gestern",twoDaysAgo:"Vor 2 Tagen",threeDaysAgo:"Vor 3 Tagen",fourDaysAgo:"Vor 4 Tagen",fiveDaysAgo:"Vor 5 Tagen",sixDaysAgo:"Vor 6 Tagen",lastWeek:"Letzte Woche",twoWeeksAgo:"Vor 2 Wochen",threeWeeksAgo:"Vor 3 Wochen",fourWeeksAgo:"Vor 4 Wochen",lastMonth:"Letzten Monat",older:"\xc4lter"},feedback:{info_text:"F\xfcr den Austausch mit der Community steht ein Chat auf Gitter bereit. Dort lassen sich Fragen kl\xe4ren, Ideen diskutieren und Probleme analysieren. Zus\xe4tzlich steht ein Issue Tracker auf Github bereit, wo Feature Requests und Bugs gemeldet werden k\xf6nnen.",direct_msg:"M\xf6chtest du uns lieber ein direktes Feedback schreiben, kannst du unser Feedback Formular nutzen. Deine Nachricht wird in dem Fall nicht ver\xf6ffentlicht.",header:"Wir freuen uns auf dein Feedback",placeholder:"Deine Nachricht an uns",send:"Nachricht senden"},subscribe:{betaModal:{header:"Beta Phase",content:"In der Free Version werden deine Boards im Local Storage deines Browsers gespeichert. Du solltest deine Arbeit regelm\xe4\xdfig exportieren, damit sie nicht verloren geht! Die prooph board SaaS Version befindet sich aktuell in der Betaphase und wird von ausgew\xe4hlten Teams getestet. In K\xfcrze aktivieren wir das Subscription-Modell und erm\xf6glichen weiteren Teams Zugriff zur SaaS Variante, die prooph board unter anderem um Team Kollaboration und Cloud Speicher erweitert. Willst du schon jetzt diese Features nutzen oder bist an einem Workshop oder Training interessiert, sende uns bitte eine Email an contact@prooph.de. Wir freuen uns auf deine Anfrage!"}}}}},en:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Welcome to React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Rename",save:"Save",change:"Change",cancel:"Cancel",confirm:"Confirm",delete:"Delete",remove:"Remove",upload:"Upload",resend:"Resend",revoke:"Revoke",reset:"Reset",yes:"Yes",no:"No",back:"Back",generateTemplate:"Generate template"},showLess:"Show less",showAll:"Show all",open:"Open",learnMore:"Learn more",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Learn more",got_it:"Got it",new_logo_header:"New Logo",new_logo_text:"InspectIO becomes prooph board",new_domain_header:"New Logo",new_domain_text:"InspectIO becomes prooph board and is now available at https://prooph-board.com."},overview:{all_boards:"My Boards",add_board:"Add Board",last_modified:"Last modified",fetch_board_error:"Technical error when loading the board. Please try again later or contact support.",shared_board:"This is a shared board. You cannot edit the settings.",empty_space:"Hi, that space looks empty. New here? Add a board to get started and have a look at the wiki to learn more.",sort:{NAME:"Name",CREATED_AT:"Created At",LAST_MODIFIED:"Last Modified"},teamFilter:{all:"All Teams"},search:{label:"Search ..."}},sidebar:{element_details:{json_invalid_title:"Schema Invalid",json_invalid_text:"The Payload-Schema is not a valid JSON document",no_element_selected:"Select an element on the board to edit its metadata.",update_similar_elements_text:"The board contains {{number}} similar cards of same type and with same name.",update_similar_elements_link:"Click here, to update them all."},no_boards_left_warning:"No boards left",boards_left_warning:"Only {{board_count}} board left",boards_left_warning_upgrade:"Your organization needs an upgrade."},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Activate Lite Mode for extra performance on large boards and during video calls.",lite_mode_is_active:"Lite Mode is active.",lite_mode_is_active_details:"Elements don't hide when zoomed out and font scaling is deactivated to save CPU time."},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Unfortunately, this function is not available in the free version."},board:{add:"New Board",advanced_settings:"Advanced Settings",import:"Import Board",import_existing_board:'A board with name "%name%" already exists. You can override the existing one or import a copy. What do you want to do?',btn_replace_board:"Override Board",btn_import_as_new:"Import copy",edit_header:"Manage your preferences",edit:"%name%",share:"Permissions",share_sub:"Invite other people to view and/or edit your board.",delete_txt1:"If you don't need the board anymore, you can ",delete_link:"delete",delete_txt2:" it here.",really_delete:"Please confirm deletion by entering the board name. This action cannot be undone!",tags_sub:"Set tags to group boards and find them via search",form:{board_name:"Board Name",board_abbr:"Abbr",responsible_team:"Responsible Team",btn_add_save:"Let's go",btn_share:"Share",btn_send_invitation:"Send Invitation",btn_send:"Send",email:"email",team_name:"Team Name"},invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from board?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the board?',joined:{title:"Board Access",details:"You now have access to board: {{name}}."},upload:{select_image:"Select an image",drag_and_drop_info:"Drag 'n' drop a file here, paste from clipboard or click to select one",upload_failed_title:"Upload failed",upload_failed_text:"Image could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Image could not be deleted.",paste_failed:"Paste failed",invalid_file_pasted:"Could not find any jpeg/png files in the clipboard."},link:{headline:"Link to Board",select_board:"Select a Board",select_event:"Select an Event"},tasklink:{headline:"Link to Task"},notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation was resent successfully"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked"}}},client:{headline:"Board API",description:"Configure your board client in order to access its content from your own service.",notConfigured:"There is currently no external API client configured for this board.",createClient:"Click here to create one",clientId:"Client-Id",clientSecret:"Client-Secret",retrieveSecret:"Click here to retrieve",createConfirmTitle:"Create an API-Client for the board",createConfirmText:"Do you really want to create a new API-Client for this board? You should only do so if you intend to use the API to access board information from an external service.",resetConfirmTitle:"Reset the Client-Secret",resetConfirmText:"Do you really want to reset the Client-Secret for this board? The old Client-Secret will be rendered invalid and cannot be used to access the API anymore.",removeConfirmTitle:"Remove the Client-Secret",removeConfirmText:"Do you really want to remove your client? Be aware that any services relying on this client will loose access to the board.",removeText:"If you do not need your client anymore you can remove it here. Be aware that any services relying on this client will loose access to the board.",copyToClipboard:"Copy to Clipboard"},sticky_templates:{headline:"Card Templates",description:"Set a metadata template for each card type",advanced_config:"Advanced Config",upload_info:"Drop a JSON-Schema file (.json) or click here to open the upload dialog",uploaded_schema_invalid_title:"Uploaded file invalid",uploaded_schema_invalid_text:"The uploaded file is not a valid schema file."},layers:{moved_to_sidebar_header:"Layers are now part of the sidebar",moved_to_sidebar_details:"We've moved the layer functionality into the left sidebar for more overview and quicker access. You can read more about the changes in our Wiki. The menu entry will be removed soon.",moved_to_sidebar_wiki_text:"Here you can find the wiki page",delete_confirmation:"Really?",add_layer:"Add layer",set_global_visibility:"Share your layer visibility settings with all",refresh_layers:"Refresh tree with latest board changes",folder_title:"Single click opens the layer and marks it as active.\nDouble click opens the edit menu.",delete_layer:"Delete layer",visibility:"Show/hide layer",lock_layer:"Lock/unlock layer",edit_name:"Change layer name",insert_selection:"Move selected elements into active layer"},move_to_organization_title:"Move To Organization",move_to_organization_sub_title:"Share the board with organization members",move_to_organization_desc:"You can move this board to an organization to share it with members. Users who are not member of the organization but have direct access to the board, are registered as guests in the organization. This requires enough user quota, otherwise they will loose access to the board.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move",timer:{modal_header:"Set Timer",hint:"New timer feature! A running timer is visible for everybody on the board. The creator of a timer is able to pause and stop it."}},organisation:{switch_hint_header:"New: Organizations",switch_hint:"An organization allows to share your board and user quota with others. Members of an organization can share boards directly. In the sidebar you can switch to another organization or create your own.",switch_hint_ok:"Got It",create_btn:"Create Organisation",name:"Name of the organisation",not_explicit:"Create an organisation and invite colleagues to share your board and user quota with them.",no_member_quota:"The organisation user quota is reached. If you want to invite more users, please upgrade your subscription.",no_admin:"Access denied to organisation management. You're missing administration rights.",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from organisation?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the organisation?',remove_user_confirm_button:"Remove",send_invitation:"Send Invitation",open_invitations:"Open Invitations",empty_invitations:"No open invitations",promote_to_admin:"Promote to admin",demote_to_member:"Demote to member",promote_to_member:"Promote to member",member:"Member",guests:"Guests",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},joined:{title:"Organisation joined",details:"You joined the organisation {{name}}."}},team:{overview_add:"Add Team",add:"New Team",team_name:"Team name",team_description:"Team Description",add_user:"Add User",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from team?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the team?',remove_user_confirm_button:"Remove",remove_board_confirm_title:"Remove team from board?",remove_board_confirm_text:'Do you really want to remove the team from board "{{board_name}}"?',remove_board_confirm_button:"Remove",joined:{title:"Team joined",details:"You joined the team {{team}}."},add_to_board:"Set up team access to {{board_name}}.",grant_access:"Set up team access.",choose:"Choose a team ...",choose_board:"Choose a board ...",remove_from_board_confirm_title:"Remove team from board?",remove_from_board_confirm_text:'Do you really want to remove the team "{{team_name}}" from the board?',remove_team_confirm_title:"Remove team?",remove_team_confirm_text:'Do you really want to remove the team "{{team_name}}"?',open_invitations:"Open Invitations",empty_invitations:"No open invitations",error_loading_invitations:"Failed to load invitations. Please try again later.",send_invitation:"Send Invitation",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},no_teams:"You did not create a team yet. Use teams to organise working groups and assign board permissions to many users at once.",move_to_organization_title:"Move To Organization",move_to_organization_desc:"You can move this team to an organization. Users who are not already member of the organization will be registered as guests. This requires enough user quota, otherwise they will be removed from the team.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move"},user:{profile_headline:"{{user_name}}",profile_subline:"Edit User Profile",quota_reached:"The board quota is reached. Your organization needs an upgrade.",quota_reached_user:"The board quota is reached. You need an upgrade.",quota_reached_guest:"You're guest of the active organization. Guests are not allowed to create organization boards.",team_quota_reached:"The team quota is reached. With a free account you can have 1 team maximum. After our beta phase you can upgrade to a basic or professional subscription and increase the quota.",form:{labels:{display_name:"Display Name",email:"E-Mail",company:"Company",position:"Job Title",password1:"Password",password2:"Password (re-enter)"},fields:{display_name:"your display name",email:"my@company.com",company:"My Company",position:"Developer / CEO / Manager"}},avatar_upload:{select_photo:"Select a Photo",drag_and_drop_info:"Drag 'n' drop some files here, or click to select files",upload_failed_title:"Upload failed",upload_failed_text:"Profile picture could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Profile picture could not be deleted."},change_password:{passwords_not_matching_title:"Passwords do not match",passwords_not_matching_text:"The passwords you entered do not match, please try again."}},history:{today:"Today",yesterday:"Yesterday",twoDaysAgo:"2 days ago",threeDaysAgo:"3 days ago",fourDaysAgo:"4 days ago",fiveDaysAgo:"5 days ago",sixDaysAgo:"6 days ago",lastWeek:"Last week",twoWeeksAgo:"2 weeks ago",threeWeeksAgo:"3 weeks ago",fourWeeksAgo:"4 weeks ago",lastMonth:"Last month",older:"Older"},feedback:{info_text:"If you want to chat with us and other community members about prooph board you can join our Gitter Chat. Feature requests and bugs can also be submitted to our public Github issue tracker.",direct_msg:"To send us a direct message you can use the feedback form below. In this case we don't publish your message.",header:"Looking forward to your feedback",placeholder:"Your feedback",send:"Send message"},subscribe:{betaModal:{header:"Beta Phase",content:"The free version of prooph board saves all boards in your browser's local storage. Make sure to regularly export your work to avoid losing it! The prooph board SaaS version is currently beta. Selected teams are testing it right now. We will activate our subscription model soon that enables more teams to use advanced features like team collaboration and cloud storage. If you can't wait or looking for prooph board training, please send an email to contact@prooph.de. We're looking forward to hear from you!"}}}}}}}},[[590,2,1]]]);
//# sourceMappingURL=main.5d9445ae.chunk.js.map