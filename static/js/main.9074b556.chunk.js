(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1178:function(e,t,n){},1194:function(e,t){},1195:function(e,t){},1196:function(e,t){},1206:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=1206},1207:function(e,t,n){e.exports=n.p+"static/media/cody.63c5836d.svg"},1208:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAIAAAABlV4SAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABQElEQVRoge3ZMW7CMBTG8eeIQIYs7VZ3RCJzxTF6gKysrKh7VYZOSFwgB4DTMHOAMjK3qlSzdeiAnx23/hp9//mJvJ8SS1Ewzjn55xW5F0gQDRjRgBENGNGAEQ0YDcEw0gx9vR0/98/udPztbX5kbFO2L8V94xnTvLd+vD668ynRYmEZ20xWu+szqmcpF0BENDd/COeBBoxowIgGjGjAiAaMaMCIBoxowIgGjGjAiAaMhmBQfatMnrGzsl17P0Iqy3MfEgIklyEhQHI9S9+9Pz14Z6rN4foA+pkupnP/zB/sEV9Vl+3aOwVsqOrxsjO31juIaqjq8bJTHn1IQwhAEA2BAIEzhAMEyxAFECBDLECUBnNzF/HTAfUAiNJQLrbGzuIu4N9gOp+s9n3eoFT/sYMHcx56RANGNGBEA0Y0YHQBkZ0zQP+umloAAAAASUVORK5CYII="},1211:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACoNJREFUeNrs3Y9V20geB3CxLwW4g3UqWFLBmQoOKohTwUIFOBXAVmC2AnIV2FcB3grwVQBXgW/mMn6PI4STbP0dfT7v6W02L4CRNF/N/DQjFQUAAAAAAAAAAAAAAAAAAABt2+12i7A9he0mbBN7BMbR8Gdhe9z9rxgEc3sH8m3407Ctdu97iAFhb0E+DX+SuvlV3MfAsPdg2I1/nrr3h3hKdQL1ARjgOP9hV49H9QEYzjj/fteMlfoA9Hecv6jYoG9efF2VYcLSsAD6Nc5/rHglP32j57CsWh+w96Hbcf6q4lj+vO3vCdQ/zm/0al1HrwKov/G3Nl4/pq7gSEG9Df/8gCvyrMYex33FHselowbHN77TA8bk8wZrDg8VP8vMUYTDut9Vp++2MmsvXt0rDkNMK4acGlifAwqG2vBnFcf5na/cK7nC0LJjyLkRDTG8oA/j/Kxusx14m1J9gNE1/qrLdFdDaSgp2CpPVFIfYCzj/FHcSuvTLUzowzh/lJNpDpzEZFoxWY3zR73c1n5grON8V74fe0KWHZP9ON+SWvuIEXb3Xd2q95KyvBvCuE5k97+Prw9YdszgTt7OlulmWh+w7JjBnKzmwDdXHzCtmN52V62Ca2dfW3aME1LgClx0SQ25DLno4KRTlOrXMVF0pZVup9tS/T5GbrvSyIllYsqwgtqyY2ob53vi7TCP3alpxRwzzjd9N5/em8VXVBrnW57quDqurhSuFBn27NzBwVhRbUdtR7dQtVivz92dUR5494t5XR8wv2MkXT/Td/lZfcC0YgfXwXWRcJHIbZxn1RhVz5uqqzxv7LX+jvct0+XQ+kDZZcerseyXXzL7fbZhOzs5ObkI29Zpz144H57DdhX++Clsa3skrwB4DttVOMAfw+bg8l4QbMJ2Fv54kS4Yo/Yhk9/jj3BQb53eVAiCb6GrHy8cqzHvh1+cCiAAAAEACABAAAACABAAgAAABAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEACAAAAEACABAAAACABAAgAAABAAgAAABAAgAQACAAAAEACAAAAEACABAAAACABAAkI1txb8XAJCLk5OT2NDvXv31c9i+jmUffHAaMPIQ+LLb7f4Z/jhNjf8u/N2zAIDxhMCdGgAwOnoADEboqk9TV3324q9/C9skbJuw/fvF369jlz5c3Tf2nABgmA0+NuzzsP09NfrJO/989ur/r9P3KFI4xECIY/31mMb4uZ0Qi93bFvbOUfu1LYuSn2cWtvsGP0f83ueOvBoA/Qqi2PBX4Y+rdOVvSvzeMQQewzYXANCOX3/W1Q/bTWr4sxY/T6wnLFMQnAsAaL7BvW78p+E/D2G77Phz3aehwUQAQDtd/nlq/NOefKTYC4i9gZkAgPrNXjX+ZQ8/Y+wBrMZSGxAAdHXlX/b8Y8bawFIAQL2NfzGAxr83zz0EBABtux7Y553nPM9EAECJ0Mq1JiAAoJybdMtSAMAIxbsDy9zmCQgAKC/2AK4FAIzXZU5DAQEAB9QDBACM1yyXuwICAA5zLQBgvKY59AIEABzudwEA43U69KXDHgpKH62L7w/wjA/vfP1U32nx/UnA50U/niPwOX1eAQBH2BbfX8n1reRTe6/S1TcW47q8Cscg+mIIAIeJjf0qNPqP8Q09VR7ZHf5tfMT3WdHtu/wmQy4GCgC6bvxnoRHfHvNNwtcvOr4K/00AwGGNv5Y396T3+111OAwQAFDBRd2v7Uo9iXVHw4CZAIBy4li/qYba1VBAAEBJfzb1jUOwbGPAqAMIAMari7sCpwIAeiD1Atp+Lfgkvb5cAHTg89hf8kh7w4ycegG5BEBM3vi8tlWOD27kIGsBML4hwCxsD/FlDmN7ySM/DAPiEOC55R/7mwBo1rbkv4vDgcecX+hAKa3XAQRAs6l+F/5zVrJ7Fw/G9Zjf/c5/VxQaAuQ0BHixAORLyS5erA/cp/rAVJsYlW3LP08PoOXewMei/D3fWRoW3KgPCICmDO0iM+giYFw6mlaCxSD4VvLLLlMQXGofAqABAqCDINiG7SLVB8oc9NgDiD2Bh6E/0on3zwt7YQQB8Ko+EHsDVyXrA7FoE2sD9+oDCIB8guA2DQvKPmjiPA0LFuoD2Wl7LoAhQI/qA1cpCNYlv+w6BcFcu8nGRgCMMABe1QdibeCiQn1gP61YfQBDgEyC4FuqD3wt2S2cpfrAUn0AAZBPECzSsOCu5JfE4cCD+gACIK/6QJxJ+KmoMK04BYFpxQiATIJg82JacZn6QBwK3Ft2jADIKwjuUm+gSn3AsmMEQGbDgkUKgir1AcuOEQAZBcE21Qfi0KDMPeSXy45n9mDvtD1U2wqAPIIgTiv+VFRbdryy7Lh3JgJAABxbH7DsGEMA9YFK04r3y47n9mA39MQEQBP1gbOi2rLjpWXHnekiAAwBRlIfsOxYALx5kRAA4wkCy44FwEvPQ9tBAqCe+kDsCZSdVhztpxWrDzSr7Rd2bgTAeINgU3HZ8bSw7Lhp5gAIgNaDwLLjHkhrNdoeZv1LALAPgkVx4LJje68WXfSq1gKA1/WB/bTiMieHtxnV53MHP9MQgDeDYG3Zcavd/2kX4/8hPoZcALQbBHE4sF92XLYb+5DhtOKmf5ffO/idNs5wKl2l0sSgsp6aepvRrn2rBvfrJO2rtnnTFAedsLM0Vbis2pcd77oxb2h/Ljv6fabOZo45cecVr1y1LTvuqME81V3fiIXTjn6XR2cwdXVfbyqefEdPK951p7YQiN+no65/dOPspe76wKpiQ5oPMABqGT+nYdRTh5/fnRoaqw88VjgRD1p2vOuHymsjDuwx6f4zuCC4rHiFq7TseNcvT6mQN08BOHmjqz/vsNj3wxBsyOfWieY1nPpA+E8ca5a9SsZ1CH+E7TbOSPx/AWAPH+zjECcA7ZkINJSkPu5tRnN7sBF3Q278egDD7hGcpx5B2a7+fjqyHoCrvx5ABj2CysuO9QRc/QVAfkGwKMq/zWhqj9Xmaw6/hADIIwS2JZcdP9tbtbjN4eqvBpBvfWCe6gOTV43/41t3BNQAKvnpfhQA9CkEYuOPQRAfjPlX8c7tQAFQyUWsv2TTe3Q8EQCl3aWhViEAEADjEh/4cZZL139PERDKjfu/5Nb4BQCUH/dn+cgvAQDvi1f+da6/nACgC3cDavx3OR8IAUAX/iy+PyK9z2P+i9wbf/TBuUgXYuNKNx+WPfto25zH/HoA9CoEiu/rGLY9Gpp8GkvjFwD0IQQ2KQS6nF0XAyje48/yVp8AoO8hEB92El+rftZybyD+rKu4rDrnSr8AYChBsE7POIgFwia74fF7f0kN/3bU+9xpRwdTgc/KXHHT47bjW35nxfEv+4w/7x9xqJHLUt46uAtA3+sDmxQGkxQCMQx+Ld5/uEkcx/+VuvibMRX19ADIpgeAGgAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEAAgAAABAAgAQAAAAgAQAIAAAAQAIAAAAQAIAEAAAAIAEACAAAAEANAjH+wCgnXLP+/ZLgcAAAAAAAAAAAAAAAAAAAB4238EGABeFisyE/a2NgAAAABJRU5ErkJggg=="},1212:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Message",function(){return at});var a={};n.r(a),n.d(a,"notify",function(){return it}),n.d(a,"info",function(){return ct}),n.d(a,"error",function(){return st});var o={};n.r(o),n.d(o,"publishMessageHandled",function(){return ut});var i={};n.r(i),n.d(i,"Command",function(){return a}),n.d(i,"Event",function(){return o});var c={};n.r(c),n.d(c,"SERVER_CONTEXT",function(){return Ct}),n.d(c,"SIGN_IN",function(){return wt}),n.d(c,"FETCH_USER",function(){return _t}),n.d(c,"LOAD_IIO_USERS_INFO",function(){return At}),n.d(c,"IIO_USERS_INFO_LOADED",function(){return Bt}),n.d(c,"USER_SETTINGS_LOADED",function(){return Nt}),n.d(c,"USER_SETTING_UPSERTED",function(){return Rt}),n.d(c,"UPDATE_PROFILE",function(){return Lt}),n.d(c,"UPDATE_PASSWORD",function(){return Ut}),n.d(c,"UPSERT_USER_SETTING",function(){return Dt}),n.d(c,"SWITCH_ACTIVE_ORGANIZATION",function(){return zt}),n.d(c,"ACTIVE_ORGANIZATION_SWITCHED",function(){return Mt});var s={};n.r(s),n.d(s,"signIn",function(){return Pt}),n.d(s,"updateProfile",function(){return Ft}),n.d(s,"updatePassword",function(){return Gt}),n.d(s,"upsertUserSetting",function(){return Ht}),n.d(s,"switchActiveOrganization",function(){return Vt});var u={};n.r(u),n.d(u,"getUser",function(){return qt}),n.d(u,"syncUsername",function(){return Wt}),n.d(u,"getInspectioUsersInfo",function(){return Yt}),n.d(u,"getInspectioUserInfoByEmail",function(){return Qt}),n.d(u,"getUserSettings",function(){return Kt}),n.d(u,"upsertUserSetting",function(){return Jt}),n.d(u,"updateProfile",function(){return Zt}),n.d(u,"updatePassword",function(){return Xt}),n.d(u,"uploadAvatar",function(){return $t}),n.d(u,"deleteAvatar",function(){return en}),n.d(u,"switchActiveOrganization",function(){return tn});var d={};n.r(d),n.d(d,"iioUsersInfoLoaded",function(){return nn}),n.d(d,"userSettingsLoaded",function(){return rn}),n.d(d,"userSettingUpserted",function(){return an}),n.d(d,"activeOrganizationSwitched",function(){return on});var l={};n.r(l),n.d(l,"sendHttpRequest",function(){return sn}),n.d(l,"responseAction",function(){return un}),n.d(l,"resetWebData",function(){return dn});var m={};n.r(m),n.d(m,"getMessageBoxRequestConfig",function(){return ln});var p={};n.r(p),n.d(p,"fetchUser",function(){return bn}),n.d(p,"loadUsersInfo",function(){return hn});var f={};n.r(f),n.d(f,"Command",function(){return s}),n.d(f,"Query",function(){return p}),n.d(f,"Event",function(){return d}),n.d(f,"Api",function(){return u}),n.d(f,"Type",function(){return c});var b={};n.r(b),n.d(b,"TYPE_FREE",function(){return gn}),n.d(b,"TYPE_BASIC",function(){return vn}),n.d(b,"TYPE_PREMIUM",function(){return yn}),n.d(b,"TYPE_CUSTOM",function(){return On}),n.d(b,"defaultUserProps",function(){return En}),n.d(b,"assertAccountType",function(){return kn}),n.d(b,"fromString",function(){return In}),n.d(b,"fromUserToken",function(){return xn}),n.d(b,"freeAccount",function(){return jn}),n.d(b,"Account",function(){return Tn});var h={};n.r(h),n.d(h,"AGGREGATE_TYPE",function(){return Mn}),n.d(h,"defaultIioUserInfoProps",function(){return Pn}),n.d(h,"createIioUserInfoFromServerData",function(){return Fn}),n.d(h,"createAnonymous",function(){return Gn}),n.d(h,"IioUserInfo",function(){return Hn});var g={};n.r(g),n.d(g,"TYPE_ANONYMOUS",function(){return Vn}),n.d(g,"TYPE_USER",function(){return qn}),n.d(g,"TYPE_ADMIN",function(){return Wn}),n.d(g,"defaultUserProps",function(){return Yn}),n.d(g,"fromtString",function(){return Qn}),n.d(g,"anonymousRole",function(){return Kn}),n.d(g,"assertRoleType",function(){return Jn}),n.d(g,"Role",function(){return Zn});var v={};n.r(v),n.d(v,"withAnonymous",function(){return Xn}),n.d(v,"fromToken",function(){return $n}),n.d(v,"defaultUserProps",function(){return er}),n.d(v,"RoleMap",function(){return tr});var y={};n.r(y),n.d(y,"defaultUserProps",function(){return nr}),n.d(y,"UserInfo",function(){return rr});var O={};n.r(O),n.d(O,"installUserOrganization",function(){return mr}),n.d(O,"setUpImplicitOrganization",function(){return pr}),n.d(O,"setUpExplicitOrganization",function(){return fr}),n.d(O,"fetchOrganization",function(){return br}),n.d(O,"fetchUserOrganizations",function(){return hr}),n.d(O,"inviteUserToOrganization",function(){return gr}),n.d(O,"revokeUserOrganizationInvitation",function(){return vr}),n.d(O,"resendUserOrganizationInvitation",function(){return yr}),n.d(O,"acceptInvitationToOrganization",function(){return Or}),n.d(O,"promoteUserToOrganizationAdmin",function(){return Er}),n.d(O,"demoteUserToOrganizationMember",function(){return kr}),n.d(O,"removeUserFromOrganization",function(){return Ir}),n.d(O,"renameOrganization",function(){return xr}),n.d(O,"removeGuestFromOrganization",function(){return jr}),n.d(O,"turnGuestIntoMember",function(){return Tr});var E={};n.r(E),n.d(E,"SET_UP_EXPLICIT_ORGANIZATION",function(){return Sr}),n.d(E,"EXPLICIT_ORGANIZATION_SET_UP",function(){return Cr}),n.d(E,"EXPLICIT_ORGANIZATION_SET_UP_FAILED",function(){return wr}),n.d(E,"INVITE_USER_TO_ORGANIZATION",function(){return _r}),n.d(E,"USER_INVITED_TO_ORGANIZATION",function(){return Ar}),n.d(E,"REVOKE_USER_ORGANIZATION_INVITATION",function(){return Br}),n.d(E,"RESEND_USER_ORGANIZATION_INVITATION",function(){return Nr}),n.d(E,"USER_ORGANIZATION_INVITATION_REVOKED",function(){return Rr}),n.d(E,"USER_ORGANIZATION_INVITATION_RESENT",function(){return Lr}),n.d(E,"ACCEPT_INVITATION_TO_ORGANIZATION",function(){return Ur}),n.d(E,"INVITATION_TO_ORGANIZATION_ACCEPTED",function(){return Dr}),n.d(E,"PROMOTE_USER_TO_ORGANIZATION_ADMIN",function(){return zr}),n.d(E,"USER_PROMOTED_TO_ORGANIZATION_ADMIN",function(){return Mr}),n.d(E,"DEMOTE_USER_TO_ORGANIZATION_MEMBER",function(){return Pr}),n.d(E,"USER_DEMOTED_TO_ORGANIZATION_MEMBER",function(){return Fr}),n.d(E,"REMOVE_USER_FROM_ORGANIZATION",function(){return Gr}),n.d(E,"USER_REMOVED_FROM_ORGANIZATION",function(){return Hr}),n.d(E,"FETCH_ORGANIZATION",function(){return Vr}),n.d(E,"ORGANIZATION_FETCHED",function(){return qr}),n.d(E,"FETCH_USER_ORGANIZATIONS",function(){return Wr}),n.d(E,"USER_ORGANIZATIONS_FETCHED",function(){return Yr}),n.d(E,"RENAME_ORGANIZATION",function(){return Qr}),n.d(E,"ORGANIZATION_RENAMED",function(){return Kr}),n.d(E,"REMOVE_GUEST_FROM_ORGANIZATION",function(){return Jr}),n.d(E,"GUEST_REMOVED_FROM_ORGANIZATION",function(){return Zr}),n.d(E,"TURN_GUEST_INTO_MEMBER",function(){return Xr}),n.d(E,"GUEST_TURNED_INTO_MEMBER",function(){return $r});var k={};n.r(k),n.d(k,"setUpExplicitOrganization",function(){return ea}),n.d(k,"inviteUserToOrganization",function(){return ta}),n.d(k,"revokeUserOrganizationInvitation",function(){return na}),n.d(k,"resendUserOrganizationInvitation",function(){return ra}),n.d(k,"acceptInvitationToOrganization",function(){return aa}),n.d(k,"promoteUserToOrganizationAdmin",function(){return oa}),n.d(k,"demoteUserToOrganizationMember",function(){return ia}),n.d(k,"removeUserFromOrganization",function(){return ca}),n.d(k,"renameOrganization",function(){return sa}),n.d(k,"removeGuestFromOrganization",function(){return ua}),n.d(k,"turnGuestIntoMember",function(){return da});var I={};n.r(I),n.d(I,"organizationFetched",function(){return la}),n.d(I,"explicitOrganizationSetUp",function(){return ma}),n.d(I,"explicitOrganizationSetUpFailed",function(){return pa}),n.d(I,"userOrganizationsFetched",function(){return fa}),n.d(I,"userInvitedToOrganization",function(){return ba}),n.d(I,"userOrganizationInvitationRevoked",function(){return ha}),n.d(I,"userOrganizationInvitationResent",function(){return ga}),n.d(I,"invitationToOrganizationAccepted",function(){return va}),n.d(I,"userPromotedToOrganizationAdmin",function(){return ya}),n.d(I,"userDemotedToOrganizationMember",function(){return Oa}),n.d(I,"userRemovedFromOrganization",function(){return Ea}),n.d(I,"organizationRenamed",function(){return ka}),n.d(I,"guestRemovedFromOrganization",function(){return Ia}),n.d(I,"guestTurnedIntoMember",function(){return xa});var x={};n.r(x),n.d(x,"fetchOrganization",function(){return ja}),n.d(x,"fetchUserOrganizations",function(){return Ta});var j={};n.r(j),n.d(j,"Api",function(){return O}),n.d(j,"Command",function(){return k}),n.d(j,"Query",function(){return x}),n.d(j,"Event",function(){return I}),n.d(j,"Type",function(){return E});var T={};n.r(T),n.d(T,"inspectioOrganizationsReducer",function(){return Wa});var S={};n.r(S),n.d(S,"fetchOrganizationFlow",function(){return eo}),n.d(S,"fetchUserOrganizations",function(){return co}),n.d(S,"setUpExplicitOrganization",function(){return Po}),n.d(S,"inviteUserToOrganization",function(){return mo}),n.d(S,"revokeUserOrganizationInvitation",function(){return Uo}),n.d(S,"resendUserOrganizationInvitation",function(){return Bo}),n.d(S,"promoteUserToOrganizationAdmin",function(){return ho}),n.d(S,"demoteUserToOrganizationMember",function(){return Ja}),n.d(S,"removeUserFromOrganization",function(){return xo}),n.d(S,"renameOrganization",function(){return Co}),n.d(S,"removeGuestFromOrganization",function(){return Oo}),n.d(S,"turnGuestIntoMember",function(){return Vo});var C={};n.r(C),n.d(C,"getIioUserInfoById",function(){return Jo}),n.d(C,"makeGetIioUserInfoByIdSelector",function(){return Zo}),n.d(C,"iioUserListSelector",function(){return Xo}),n.d(C,"makeIioUserListSelector",function(){return $o}),n.d(C,"makeIioFilteredUserListSelector",function(){return ei});var w={};n.r(w),n.d(w,"syncUsername",function(){return ai}),n.d(w,"lazyLoadInspectioUserInfo",function(){return ur}),n.d(w,"updateProfile",function(){return di}),n.d(w,"updatePassword",function(){return mi}),n.d(w,"upsertUserSetting",function(){return hi}),n.d(w,"switchActiveOrganization",function(){return Ko});var _={};n.r(_),n.d(_,"currentUserSelector",function(){return Si}),n.d(_,"makeGetCurrentUser",function(){return Ci}),n.d(_,"makeGetCurrentBoardQuota",function(){return wi});var A={};n.r(A),n.d(A,"SERVER_CONTEXT",function(){return Gi}),n.d(A,"SAVE_BOARD",function(){return Hi}),n.d(A,"RENAME_BOARD",function(){return Vi}),n.d(A,"IMPORT_NEW_BOARD",function(){return qi}),n.d(A,"IMPORT_EXISTING_BOARD",function(){return Wi}),n.d(A,"ADD_BOARD",function(){return Yi}),n.d(A,"UPDATE_BOARDS",function(){return Qi}),n.d(A,"FORCE_UPDATE_BOARDS",function(){return Ki}),n.d(A,"SET_BOARD_TO_SNAPSHOT",function(){return Ji}),n.d(A,"SET_BOARD_DETAILS_FETCHED",function(){return Zi}),n.d(A,"CONFIRM_DELETE_BOARD",function(){return Xi}),n.d(A,"ABORT_BOARD_DELETION",function(){return $i}),n.d(A,"DELETE_BOARD",function(){return ec}),n.d(A,"SHARE_BOARD",function(){return tc}),n.d(A,"RESEND_BOARD_INVITATION",function(){return nc}),n.d(A,"REVOKE_BOARD_INVITATION",function(){return rc}),n.d(A,"REVOKE_ACCESS_TO_BOARD",function(){return ac}),n.d(A,"CHANGE_BOARD_PERMISSIONS",function(){return oc}),n.d(A,"ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS",function(){return ic}),n.d(A,"TRIGGER_IMPORT_BOARD",function(){return cc}),n.d(A,"TRIGGER_EXPORT_BOARD",function(){return sc}),n.d(A,"TOGGLE_BOARD_HISTORY",function(){return uc}),n.d(A,"TOGGLE_ELEMENT_DETAILS",function(){return dc}),n.d(A,"TOGGLE_CODY_CONSOLE",function(){return lc}),n.d(A,"TOGGLE_TIMER_MODAL",function(){return mc}),n.d(A,"APPEND_HISTORY_ENTRIES",function(){return pc}),n.d(A,"PREPEND_HISTORY_ENTRIES",function(){return fc}),n.d(A,"CLEAR_BOARD_HISTORY",function(){return bc}),n.d(A,"LOAD_FIRST_BOARD_HISTORY_CHUNK",function(){return hc}),n.d(A,"LOAD_NEXT_BOARD_HISTORY_CHUNK",function(){return gc}),n.d(A,"SET_NO_MORE_HISTORY_AVAILABLE",function(){return vc}),n.d(A,"SET_IS_LOADING_HISTORY",function(){return yc}),n.d(A,"UPDATE_BOARD_ELEMENTS_TREE",function(){return Oc}),n.d(A,"CREATE_BOARD_CLIENT",function(){return Ec}),n.d(A,"REMOVE_BOARD_CLIENT",function(){return kc}),n.d(A,"RESET_BOARD_CLIENT_SECRET",function(){return Ic}),n.d(A,"SET_STICKY_TEMPLATE",function(){return xc}),n.d(A,"UPDATE_STICKY_ADVANCED_CONFIG",function(){return jc}),n.d(A,"IMPORT_STICKY_TEMPLATES",function(){return Tc}),n.d(A,"OPEN_ELEMENTS_DETAILS",function(){return Sc}),n.d(A,"FILTER_BOARD_OVERVIEW",function(){return Cc}),n.d(A,"HIDE_SHARED_BOARDS_ON_OVERVIEW",function(){return wc}),n.d(A,"HIDE_OWN_BOARDS_ON_OVERVIEW",function(){return _c}),n.d(A,"FILTER_ELEMENTS_TREE",function(){return Ac}),n.d(A,"MOVE_USER_BOARD_TO_ORGANIZATION",function(){return Bc}),n.d(A,"SYNC_BOARD",function(){return Nc}),n.d(A,"STOP_BOARD_SYNCHRONISATION",function(){return Rc}),n.d(A,"REMOTE_BOARD_CHANGED",function(){return Lc}),n.d(A,"REMOTE_BOARD_OPENED",function(){return Uc}),n.d(A,"LOCAL_BOARD_CHANGED",function(){return Dc}),n.d(A,"LOCAL_CHANGE_SET_AS_HEAD_VERSION",function(){return zc}),n.d(A,"ENQUEUE_BOARD_CHANGED",function(){return Mc}),n.d(A,"DEQUEUE_BOARD_CHANGED",function(){return Pc}),n.d(A,"SET_BOARD_VERSION",function(){return Fc}),n.d(A,"APPLY_REMOTE_CHANGE",function(){return Gc}),n.d(A,"REMOTE_CHANGE_APPLIED",function(){return Hc}),n.d(A,"BOARD_IMPORT_STARTED",function(){return Vc}),n.d(A,"BOARD_IMPORTED",function(){return qc}),n.d(A,"BOARD_EXPORTED",function(){return Wc}),n.d(A,"BOARD_INITIALIZED",function(){return Yc}),n.d(A,"LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE",function(){return Qc}),n.d(A,"BOARD_INVITATION_SENT",function(){return Kc}),n.d(A,"BOARD_INVITATION_RESENT",function(){return Jc}),n.d(A,"BOARD_INVITATION_REVOKED",function(){return Zc}),n.d(A,"BOARD_ACCESS_REVOKED",function(){return Xc}),n.d(A,"BOARD_PERMISSIONS_CHANGED",function(){return $c}),n.d(A,"TEAM_BOARD_PERMISSIONS_CHANGED",function(){return es}),n.d(A,"BOARD_PERMISSIONS_FOR_USERS_FETCHED",function(){return ts}),n.d(A,"BOARD_PERMISSIONS_FOR_TEAMS_FETCHED",function(){return ns}),n.d(A,"OPEN_BOARD_INVITATIONS_FETCHED",function(){return rs}),n.d(A,"ACTIVE_GRAPH_ELEMENT_CHANGED",function(){return as}),n.d(A,"ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED",function(){return os}),n.d(A,"ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED",function(){return is}),n.d(A,"BOARD_GRAPH_ELEMENTS_FETCHED",function(){return cs}),n.d(A,"BOARD_CLIENT_FETCHED",function(){return ss}),n.d(A,"BOARD_CLIENT_NOT_CONFIGURED",function(){return us}),n.d(A,"BOARD_CLIENT_SECRET_FETCHED",function(){return ds}),n.d(A,"BOARD_STICKY_TEMPLATES_FETCHED",function(){return ls}),n.d(A,"STICKY_TEMPLATE_SET",function(){return ms}),n.d(A,"STICKY_ADVANCED_CONFIG_UPDATED",function(){return ps}),n.d(A,"STICKY_TEMPLATES_IMPORTED",function(){return fs}),n.d(A,"USER_BOARD_MOVED_TO_ORGANIZATION",function(){return bs}),n.d(A,"INITIAL_BOARD_LIST_LOADED",function(){return hs}),n.d(A,"START_FETCH_USER_BOARDS",function(){return gs}),n.d(A,"FETCH_USER_BOARDS",function(){return vs}),n.d(A,"FETCH_USER_BOARD",function(){return ys}),n.d(A,"FETCH_BOARD_PERMISSIONS_FOR_USERS",function(){return Os}),n.d(A,"FETCH_BOARD_PERMISSIONS_FOR_TEAMS",function(){return Es}),n.d(A,"FETCH_OPEN_BOARD_INVITATIONS",function(){return ks}),n.d(A,"FETCH_BOARD_GRAPH_ELEMENTS",function(){return Is}),n.d(A,"FETCH_BOARD_CLIENT",function(){return xs}),n.d(A,"FETCH_BOARD_CLIENT_SECRET",function(){return js}),n.d(A,"FETCH_BOARD_STICKY_TEMPLATES",function(){return Ts});var B={};n.r(B),n.d(B,"installOrganizationBoard",function(){return Ss}),n.d(B,"renameBoard",function(){return Cs}),n.d(B,"deleteBoard",function(){return ws}),n.d(B,"takeBoardSnapshot",function(){return _s}),n.d(B,"shareBoard",function(){return As}),n.d(B,"resendBoardInvitation",function(){return Bs}),n.d(B,"revokeBoardInvitation",function(){return Ns}),n.d(B,"ackBoardInvitation",function(){return Rs}),n.d(B,"revokeAccessToBoard",function(){return Ls}),n.d(B,"changeBoardPermissions",function(){return Us}),n.d(B,"adminChangeTeamBoardPermissions",function(){return Ds}),n.d(B,"fetchUserBoard",function(){return zs}),n.d(B,"fetchUserBoards",function(){return Ms}),n.d(B,"fetchOlderPatches",function(){return Ps}),n.d(B,"fetchNewerPatches",function(){return Fs}),n.d(B,"fetchBoardPermissionsForUsers",function(){return Gs}),n.d(B,"fetchBoardPermissionsForTeams",function(){return Hs}),n.d(B,"fetchOpenBoardInvitations",function(){return Vs}),n.d(B,"fetchBoardOfInvitation",function(){return qs}),n.d(B,"fetchBoardXmlFromLink",function(){return Ws}),n.d(B,"uploadBoardImage",function(){return Ys}),n.d(B,"replaceBoardImage",function(){return Qs}),n.d(B,"deleteBoardImage",function(){return Ks}),n.d(B,"fetchBoardGraphElements",function(){return Js}),n.d(B,"fetchBoardClient",function(){return Zs}),n.d(B,"fetchBoardClientSecret",function(){return Xs}),n.d(B,"createBoardClient",function(){return $s}),n.d(B,"removeBoardClient",function(){return eu}),n.d(B,"resetBoardClientSecret",function(){return tu}),n.d(B,"fetchBoardStickyTemplates",function(){return nu}),n.d(B,"setStickyTemplate",function(){return ru}),n.d(B,"updateStickyAdvancedConfig",function(){return au}),n.d(B,"moveUserBoardToOrganization",function(){return ou});var N={};n.r(N),n.d(N,"addBoard",function(){return iu}),n.d(N,"updateBoards",function(){return cu}),n.d(N,"forceUpdateBoards",function(){return su}),n.d(N,"setBoardToSnapshot",function(){return uu}),n.d(N,"setBoardDetailsFetched",function(){return du}),n.d(N,"triggerImportBoard",function(){return lu}),n.d(N,"triggerExportBoard",function(){return mu}),n.d(N,"toggleBoardHistory",function(){return pu}),n.d(N,"toggleElementDetails",function(){return fu}),n.d(N,"toggleCodyConsole",function(){return bu}),n.d(N,"toggleTimerModal",function(){return hu}),n.d(N,"appendHistoryEntries",function(){return gu}),n.d(N,"prependHistoryEntries",function(){return vu}),n.d(N,"clearBoardHistory",function(){return yu}),n.d(N,"loadNextBoardHistoryChunk",function(){return Ou}),n.d(N,"loadFirstBoardHistoryChunk",function(){return Eu}),n.d(N,"setNoMoreHistoryAvailable",function(){return ku}),n.d(N,"setIsLoadingHistory",function(){return Iu}),n.d(N,"filterBoardOverview",function(){return xu}),n.d(N,"hideSharedBoardsOnOverview",function(){return ju}),n.d(N,"hideOwnBoardsOnOverview",function(){return Tu}),n.d(N,"filterElementsTree",function(){return Su}),n.d(N,"saveBoard",function(){return Cu}),n.d(N,"renameBoard",function(){return wu}),n.d(N,"importNewBoard",function(){return _u}),n.d(N,"importExistingBoard",function(){return Au}),n.d(N,"confirmDeleteBoard",function(){return Bu}),n.d(N,"abortBoardDeletion",function(){return Nu}),n.d(N,"deleteBoard",function(){return Ru}),n.d(N,"syncBoard",function(){return Lu}),n.d(N,"shareBoard",function(){return Uu}),n.d(N,"resendBoardInvitation",function(){return Du}),n.d(N,"revokeBoardInvitation",function(){return zu}),n.d(N,"revokeAccessToBoard",function(){return Mu}),n.d(N,"changeBoardPermissions",function(){return Pu}),n.d(N,"adminChangeTeamBoardPermissions",function(){return Fu}),n.d(N,"stopBoardSynchronisation",function(){return Gu}),n.d(N,"enqueueBoardChanged",function(){return Hu}),n.d(N,"dequeueBoardChangedEvents",function(){return Vu}),n.d(N,"updateBoardElementsTree",function(){return qu}),n.d(N,"createBoardClient",function(){return Wu}),n.d(N,"removeBoardClient",function(){return Yu}),n.d(N,"resetBoardClientSecret",function(){return Qu}),n.d(N,"setStickyTemplate",function(){return Ku}),n.d(N,"updateStickyAdvancedConfig",function(){return Ju}),n.d(N,"importStickyTemplates",function(){return Zu}),n.d(N,"moveUserBoardToOrganization",function(){return Xu});var R={};n.r(R),n.d(R,"remoteBoardChanged",function(){return $u}),n.d(R,"localBoardChanged",function(){return ed}),n.d(R,"localChangeSetAsHeadVersion",function(){return td}),n.d(R,"boardImportStarted",function(){return nd}),n.d(R,"boardImported",function(){return rd}),n.d(R,"boardExported",function(){return ad}),n.d(R,"boardInitialized",function(){return od}),n.d(R,"initialBoardListLoaded",function(){return id}),n.d(R,"localBoardUpdatedWithRemoteChange",function(){return cd}),n.d(R,"boardInvitationSent",function(){return sd}),n.d(R,"boardInvitationResent",function(){return ud}),n.d(R,"boardInvitationRevoked",function(){return dd}),n.d(R,"boardAccessRevoked",function(){return ld}),n.d(R,"boardPermissionsChanged",function(){return md}),n.d(R,"teamBoardPermissionsChanged",function(){return pd}),n.d(R,"boardPermissionsForUsersFetched",function(){return fd}),n.d(R,"boardPermissionsForTeamsFetched",function(){return bd}),n.d(R,"openBoardInvitationsFetched",function(){return hd}),n.d(R,"activeGraphElementChanged",function(){return gd}),n.d(R,"activeGraphElementLabelChanged",function(){return vd}),n.d(R,"activeGraphElementMetadataChanged",function(){return yd}),n.d(R,"boardGraphElementsFetched",function(){return Od}),n.d(R,"boardClientFetched",function(){return Ed}),n.d(R,"boardClientNotConfigured",function(){return kd}),n.d(R,"boardClientSecretFetched",function(){return Id}),n.d(R,"boardStickyTemplatesFetched",function(){return xd}),n.d(R,"stickyTemplateSet",function(){return jd}),n.d(R,"stickyAdvancedConfigUpdated",function(){return Td}),n.d(R,"stickyTemplatesImported",function(){return Sd}),n.d(R,"userBoardMovedToOrganization",function(){return Cd});var L={};n.r(L),n.d(L,"startFetchUserBoards",function(){return wd}),n.d(L,"fetchUserBoards",function(){return _d}),n.d(L,"fetchUserBoard",function(){return Ad}),n.d(L,"fetchBoardPermissionsForUsers",function(){return Bd}),n.d(L,"fetchBoardPermissionsForTeams",function(){return Nd}),n.d(L,"fetchOpenBoardInvitations",function(){return Rd}),n.d(L,"fetchBoardGraphElements",function(){return Ld}),n.d(L,"fetchBoardClient",function(){return Ud}),n.d(L,"fetchBoardClientSecret",function(){return Dd}),n.d(L,"fetchBoardStickyTemplates",function(){return zd});var U={};n.r(U),n.d(U,"Api",function(){return B}),n.d(U,"Command",function(){return N}),n.d(U,"Event",function(){return R}),n.d(U,"Query",function(){return L}),n.d(U,"Type",function(){return A});var D={};n.r(D),n.d(D,"defaultBoardVersionProps",function(){return Md}),n.d(D,"BoardVersion",function(){return Pd});var z={};n.r(z),n.d(z,"defaultBoardProps",function(){return Fd}),n.d(z,"createUserBoard",function(){return Gd}),n.d(z,"Board",function(){return Hd});var M={};n.r(M),n.d(M,"defaultBoardChangedProps",function(){return ml}),n.d(M,"remoteBoardChanged",function(){return pl}),n.d(M,"localBoardChanged",function(){return fl}),n.d(M,"mapServerPatchToBoardChanged",function(){return bl}),n.d(M,"BoardChanged",function(){return hl});var P={};n.r(P),n.d(P,"defaultBoardSnapshotProps",function(){return wl}),n.d(P,"BoardSnapshot",function(){return _l});var F={};n.r(F),n.d(F,"CONNECT_SOCKET",function(){return Ll}),n.d(F,"DISCONNECT_SOCKET",function(){return Ul}),n.d(F,"SOCKET_CONNECTED",function(){return Dl}),n.d(F,"SOCKET_DISCONNECTED",function(){return zl}),n.d(F,"SOCKET_CONNECTION_LOST",function(){return Ml}),n.d(F,"SEND_SOCKET_CMD",function(){return Pl}),n.d(F,"LISTEN_ON_SOCKET_CHANNEL",function(){return Fl}),n.d(F,"STOP_LISTENING_ON_SOCKET_CHANNEL",function(){return Gl}),n.d(F,"DEFAULT_SOCKET_CMD_TIMEOUT",function(){return Hl});var G={};n.r(G),n.d(G,"connectSocket",function(){return Vl}),n.d(G,"disconnectSocket",function(){return ql}),n.d(G,"socketConnected",function(){return Wl}),n.d(G,"socketDisconnected",function(){return Yl}),n.d(G,"socketConnectionLost",function(){return Ql}),n.d(G,"sendSocketCmd",function(){return Kl}),n.d(G,"notifySocketCmdSent",function(){return Jl}),n.d(G,"ackSocketCmd",function(){return Zl}),n.d(G,"rejectSocketCmd",function(){return Xl}),n.d(G,"listenOnSocketChannel",function(){return $l}),n.d(G,"stopListeningOnSocketChannel",function(){return em}),n.d(G,"emitChannelEvent",function(){return tm}),n.d(G,"isAcknowledged",function(){return nm}),n.d(G,"isNotAcknowledged",function(){return rm}),n.d(G,"isError",function(){return am});var H={};n.r(H),n.d(H,"Action",function(){return G}),n.d(H,"Type",function(){return F});var V={};n.r(V),n.d(V,"STATUS_CONNECTED",function(){return om}),n.d(V,"STATUS_CONNECTING",function(){return im}),n.d(V,"STATUS_DISCONNECTED",function(){return cm}),n.d(V,"STATUS_DISCONNECTING",function(){return sm}),n.d(V,"STATUS_CONNECTION_LOST",function(){return um}),n.d(V,"defaultUserProps",function(){return dm}),n.d(V,"fromtString",function(){return lm}),n.d(V,"disconnectedStatus",function(){return mm}),n.d(V,"assertSocketStatus",function(){return pm}),n.d(V,"Status",function(){return fm});var q={};n.r(q),n.d(q,"AUTHENTICATE",function(){return hm}),n.d(q,"USER_AUTHENTICATED",function(){return gm});var W={};n.r(W),n.d(W,"authenticate",function(){return vm});var Y={};n.r(Y),n.d(Y,"userAuthenticated",function(){return ym});var Q={};n.r(Q),n.d(Q,"Command",function(){return W}),n.d(Q,"Event",function(){return Y}),n.d(Q,"Type",function(){return q});var K={};n.r(K),n.d(K,"tokenRefreshFlow",function(){return km});var J={};n.r(J),n.d(J,"makeTokenSelector",function(){return Im});var Z={};n.r(Z),n.d(Z,"AuthSelector",function(){return J});var X={};n.r(X),n.d(X,"manageSocketConnection",function(){return wm});var $={};n.r($),n.d($,"statusSelector",function(){return Vm}),n.d($,"makeGetStatus",function(){return qm});var ee={};n.r(ee),n.d(ee,"StatusSelector",function(){return $});var te={};n.r(te),n.d(te,"boardSelector",function(){return $m}),n.d(te,"boardQueueSelector",function(){return ep}),n.d(te,"makeBoardByIdSelector",function(){return tp}),n.d(te,"makeGetBoard",function(){return np}),n.d(te,"makeGetQueue",function(){return rp}),n.d(te,"makeMapStateToPropsAddBoard",function(){return ap}),n.d(te,"makeMapStateToPropsEditBoard",function(){return op}),n.d(te,"makeMapStateToPropsMxGraphBoard",function(){return ip});var ne={};n.r(ne),n.d(ne,"makeBoardHistoryByIdSelector",function(){return up});var re={};n.r(re),n.d(re,"boardListSelector",function(){return dp}),n.d(re,"boardLoadingSelector",function(){return lp}),n.d(re,"initialBoardListLoadedSelector",function(){return mp}),n.d(re,"boardOverviewSelector",function(){return pp}),n.d(re,"makeGetBoards",function(){return fp}),n.d(re,"makeGetTeamBoards",function(){return bp}),n.d(re,"makeIsLoadingBoards",function(){return hp}),n.d(re,"makeInitialBoardListLoaded",function(){return gp}),n.d(re,"makeGetBoardOverview",function(){return vp}),n.d(re,"makeMapStateToPropsBoardOverview",function(){return yp});var ae={};n.r(ae),n.d(ae,"BoardSelector",function(){return te}),n.d(ae,"BoardListSelector",function(){return re}),n.d(ae,"BoardHistorySelector",function(){return ne});var oe={};n.r(oe),n.d(oe,"addTeam",function(){return Kp}),n.d(oe,"renameTeam",function(){return Jp}),n.d(oe,"changeTeamDescription",function(){return Zp}),n.d(oe,"inviteUserToTeam",function(){return Xp}),n.d(oe,"resendTeamInvitation",function(){return $p}),n.d(oe,"revokeTeamInvitation",function(){return ef}),n.d(oe,"removeMemberFromTeam",function(){return tf}),n.d(oe,"deleteTeam",function(){return nf}),n.d(oe,"adminGrantTeamAccessToBoard",function(){return rf}),n.d(oe,"adminRevokeTeamAccessToBoard",function(){return af}),n.d(oe,"fetchUserTeams",function(){return of}),n.d(oe,"ackTeamInvitation",function(){return cf}),n.d(oe,"fetchTeamOfInvitation",function(){return sf}),n.d(oe,"fetchOpenTeamInvitations",function(){return uf}),n.d(oe,"moveTeamToOrganization",function(){return df});var ie={};n.r(ie),n.d(ie,"ADD_TEAM",function(){return lf}),n.d(ie,"RENAME_TEAM",function(){return mf}),n.d(ie,"CHANGE_TEAM_DESCRIPTION",function(){return pf}),n.d(ie,"INVITE_USER_TO_TEAM",function(){return ff}),n.d(ie,"RESEND_TEAM_INVITATION",function(){return bf}),n.d(ie,"REVOKE_TEAM_INVITATION",function(){return hf}),n.d(ie,"REMOVE_MEMBER_FROM_TEAM",function(){return gf}),n.d(ie,"FETCH_USER_TEAMS",function(){return vf}),n.d(ie,"UPDATE_TEAMS",function(){return yf}),n.d(ie,"ADMIN_GRANT_TEAM_ACCESS_TO_BOARD",function(){return Of}),n.d(ie,"ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD",function(){return Ef}),n.d(ie,"DELETE_TEAM",function(){return kf}),n.d(ie,"TEAM_ADDED",function(){return If}),n.d(ie,"TEAM_RENAMED",function(){return xf}),n.d(ie,"TEAM_DESCRIPTION_CHANGED",function(){return jf}),n.d(ie,"TEAMS_FETCHED",function(){return Tf}),n.d(ie,"MEMBER_REMOVED_FROM_TEAM",function(){return Sf}),n.d(ie,"TEAM_DELETED",function(){return Cf}),n.d(ie,"TEAM_INVITATIONS_LOADED",function(){return wf}),n.d(ie,"TEAM_INVITATION_RESENT",function(){return _f}),n.d(ie,"TEAM_INVITATION_REVOKED",function(){return Af}),n.d(ie,"TEAM_ACCESS_TO_BOARD_GRANTED",function(){return Bf}),n.d(ie,"TEAM_ACCESS_TO_BOARD_REVOKED",function(){return Nf}),n.d(ie,"MOVE_TEAM_TO_ORGANIZATION",function(){return Rf}),n.d(ie,"TEAM_MOVED_TO_ORGANIZATION",function(){return Lf});var ce={};n.r(ce),n.d(ce,"addTeam",function(){return Uf}),n.d(ce,"renameTeam",function(){return Df}),n.d(ce,"changeTeamDescription",function(){return zf}),n.d(ce,"inviteUserToTeam",function(){return Mf}),n.d(ce,"resendTeamInvitation",function(){return Pf}),n.d(ce,"revokeTeamInvitation",function(){return Ff}),n.d(ce,"removeMemberFromTeam",function(){return Gf}),n.d(ce,"updateTeams",function(){return Hf}),n.d(ce,"deleteTeam",function(){return Vf}),n.d(ce,"adminGrantTeamAccessToBoard",function(){return qf}),n.d(ce,"adminRevokeTeamAccessToBoard",function(){return Wf}),n.d(ce,"moveTeamToOrganization",function(){return Yf});var se={};n.r(se),n.d(se,"teamAdded",function(){return Qf}),n.d(se,"teamRenamed",function(){return Kf}),n.d(se,"teamDescriptionChanged",function(){return Jf}),n.d(se,"memberRemovedFromTeam",function(){return Zf}),n.d(se,"teamDeleted",function(){return Xf}),n.d(se,"teamInvitationsLoaded",function(){return $f}),n.d(se,"teamInvitationResent",function(){return eb}),n.d(se,"teamInvitationRevoked",function(){return tb}),n.d(se,"teamsFetched",function(){return nb}),n.d(se,"teamAccessToBoardGranted",function(){return rb}),n.d(se,"teamAccessToBoardRevoked",function(){return ab}),n.d(se,"teamMovedToOrganization",function(){return ob});var ue={};n.r(ue),n.d(ue,"Api",function(){return oe}),n.d(ue,"Command",function(){return ce}),n.d(ue,"Event",function(){return se}),n.d(ue,"Type",function(){return ie});var de={};n.r(de),n.d(de,"inspectioTeamsReducer",function(){return bb});var le={};n.r(le),n.d(le,"addTeam",function(){return Ib}),n.d(le,"renameTeam",function(){return Jb}),n.d(le,"changeTeamDescription",function(){return Ub}),n.d(le,"inviteUserToTeam",function(){return Gb}),n.d(le,"removeMemberFromTeam",function(){return Wb}),n.d(le,"adminGrantTeamAccessToBoard",function(){return wb}),n.d(le,"deleteTeam",function(){return Pb}),n.d(le,"resendTeamInvitation",function(){return th}),n.d(le,"revokeTeamInvitation",function(){return oh}),n.d(le,"refreshUserTeams",function(){return uh}),n.d(le,"moveTeamToOrganization",function(){return ph});var me={};n.r(me),n.d(me,"TOGGLE_SIDEBAR_COLLAPSED",function(){return lv}),n.d(me,"SET_SIDEBAR_WIDTH",function(){return mv}),n.d(me,"SET_RIGHT_SIDEBAR_WIDTH",function(){return pv}),n.d(me,"SET_CODY_CONSOLE_HEIGHT",function(){return fv});var pe={};n.r(pe),n.d(pe,"saveBoardFlow",function(){return yO}),n.d(pe,"deleteBoardFlow",function(){return Gv}),n.d(pe,"syncFlow",function(){return zO}),n.d(pe,"fetchUserBoardsFlow",function(){return Ty}),n.d(pe,"installUserBoardFlow",function(){return Py}),n.d(pe,"renameBoardFlow",function(){return rO}),n.d(pe,"fetchUserBoardFlow",function(){return my}),n.d(pe,"fetchBoardPermissionsFlow",function(){return ny}),n.d(pe,"fetchOpenBoardInvitationsFlow",function(){return uy}),n.d(pe,"shareBoardFlow",function(){return IO}),n.d(pe,"resendBoardInvitationFlow",function(){return cO}),n.d(pe,"revokeBoardInvitationFlow",function(){return bO}),n.d(pe,"prepareBoardHistoryFlow",function(){return Vy}),n.d(pe,"loadBoardHistoryFlow",function(){return Zy}),n.d(pe,"importNewBoardFlow",function(){return Ry}),n.d(pe,"importExistingBoardFlow",function(){return _y}),n.d(pe,"syncElementsTreeFlow",function(){return wO}),n.d(pe,"revokeAccessToBoardFlow",function(){return lO}),n.d(pe,"changeBoardPermissionsFlow",function(){return Lv}),n.d(pe,"adminChangeTeamBoardPermissions",function(){return Bv}),n.d(pe,"fetchBoardClientFlow",function(){return Kv}),n.d(pe,"fetchBoardGraphElementsFlow",function(){return Xv}),n.d(pe,"fetchBoardStickyTemplates",function(){return iy}),n.d(pe,"updateStickyTemplate",function(){return VO}),n.d(pe,"importStickyTemplates",function(){return zy}),n.d(pe,"moveUserBoardToOrganization",function(){return tO});var fe,be=n(5),he=n(536),ge=n.n(he),ve=n(0),ye=n.n(ve),Oe=n(93),Ee=n(316),ke=n.n(Ee),Ie=(n(537),function(e){return new Promise(function(t,n){ke.a.verify(e,fe,function(r,a){return r?(console.log({error:r}),n(r)):t({token:e,verifiedToken:a})})})}),xe=n(159),je=n.n(xe),Te=je.a.create({baseURL:"/board/api/v1/messagebox"}),Se=n(538),Ce=n.n(Se)()({path:"/board/socket/",autoConnect:!1,reconnection:!0,transportOptions:{polling:{extraHeaders:{}}}}),we=function(e){Te.defaults.headers.Authorization="Bearer "+e,Ce.io.opts.transportOptions.polling.extraHeaders.Authorization="Bearer "+e;var t=new Date;t.setTime(t.getTime()+6e5),document.cookie="token="+e+";path=/buckets/boards;expires="+t.toUTCString()},_e=function(e,t){return Te.post(e,t).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})},Ae=function(e,t){return Te.post(e,t,{baseURL:"/board/api/v1/user-management"}).then(function(e){return{response:e}}).catch(function(e){return{error:e.response}})},Be=n(18),Ne=n(30),Re=n(26),Le=n(25),Ue=n(27),De=n(12),ze=n(6),Me=n(16),Pe=n(35),Fe=n(1227),Ge=n(523),He=n(542),Ve=n.n(He),qe=n(837);Ge.a.use(Ve.a).init({detection:{order:["querystring","cookie","localStorage","navigator","htmlTag","path","subdomain"],caches:["localStorage","cookie"],excludeCacheFor:["cimode"]},fallbackLng:"en",debug:!0,resources:qe,react:{wait:!0}});var We=Ge.a,Ye=n(24),Qe=n(7),Ke=n(566),Je=n(1219),Ze=n(1242),Xe=n(1243);function $e(e){Object(ve.useEffect)(function(){return document.getElementsByTagName("body")[0].addEventListener("click",e),function(){document.getElementsByTagName("body")[0].removeEventListener("click",e)}},[])}var et=n(10),tt=n(33),nt=n.n(tt),rt={title:"",message:"",level:"info",position:"bl",autoDismiss:5,dismissible:!0,handled:!1,uid:void 0,action:null,hideProgressBar:!0},at=function(e){function t(e){return Object(Be.a)(this,t),void 0===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"markAsHandled",value:function(){return this.set("handled",!0)}},{key:"hasAction",value:function(){return null!==this.action}}]),t}(Object(be.Record)(rt)),ot="@@NotificationSystem/Notify",it=function(e){return Object(et.action)(ot,e)},ct=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=new r.Message({title:e,message:t,tOpts:n,level:"info",autoDismiss:a});return Object(et.action)(ot,o)},st=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=new r.Message({title:e,message:t,tOpts:n,level:"error",autoDismiss:0});return Object(et.action)(ot,a)},ut=function(e){return Object(et.action)("@@NotificationSystem/MessageHandled",e)},dt=n(143),lt=n(70),mt=n(61),pt=(n(850),dt.toast.TYPE.INFO,dt.toast.POSITION.BOTTOM_LEFT,n(34)),ft=function(e,t){return e.getIn(["notificationSystem","messages"],Object(be.fromJS)([]))},bt=function(){var e=Object(pt.a)([ft],function(e){return e});return function(t,n){return{messages:e(t,n)}}}(),ht=[],gt=function(e,t,n){e.filter(function(e){return!!e&&!e.handled}).forEach(function(e){if(e&&(!e.uid||!ht.includes(e.uid))){var r=e.message;r instanceof Error&&(r=r.message),e.uid&&ht.push(e.uid),Object(dt.toast)(ye.a.createElement("div",null,ye.a.createElement("p",null,ye.a.createElement("strong",null,n.t(e.title+""))),n.t(r)),{type:e.level,autoClose:"error"!==e.level&&2e3,hideProgressBar:e.hideProgressBar,onClose:function(){e.uid&&(ht=ht.filter(function(t){return t!==e.uid})),t(e.markAsHandled())}})}})},vt=Object(De.b)()(Object(lt.a)(Object(ze.connect)(bt,function(e){return Object(mt.bindActionCreators)({sendNotify:a.info,onHandled:o.publishMessageHandled},e)}),Object(lt.b)({componentDidMount:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&gt(t,n,this.props)},componentDidUpdate:function(){var e=this.props,t=e.messages,n=e.onHandled;t&&gt(t,n,this.props)}}))(function(e){return ve.createElement(dt.ToastContainer,{position:dt.toast.POSITION.BOTTOM_LEFT})})),yt="/inspectio",Ot="/inspectio/user/profile",Et=function(e){return"/inspectio/board/"+e},kt=function(e){return 0===e.search("/inspectio/board/")},It="/inspectio/boards/edit/:uid",xt=function(e){return"/inspectio/boards/edit/"+e},jt="/inspectio/boards/redirect",Tt=function(e){return function(t){return St()+Et(e)+"?cells=".concat(t,"&clicks=1")}},St=function(){return window.location.protocol+"//"+window.location.host},Ct="InspectIO.",wt="@@InspectioUsers/SignIn",_t="@@InspectioBoards/User",At="@@InspectioBoards/IioUsersInfo",Bt="@@InspectioBoards/IioUsersInfoLoaded",Nt="@@InspectioBoard/UserSettingsLoaded",Rt="@@InsecptioBoard/UserSettingUpserted",Lt="@@InspectioBoards/UserUpdate",Ut="@@InspectioBoards/PasswordUpdate",Dt="@@InsecptioBoards/UpsertUserSetting",zt="@@InspectioBoards/SwitchActiveOrganization",Mt="@@InspectioBoards/ActiveOrganizationSwitched",Pt=function(e){return Object(et.action)(wt,{user:e})},Ft=function(e,t){return Object(et.action)(Lt,{user:e,successCb:t})},Gt=function(e){return Object(et.action)(Ut,{password:e})},Ht=function(e,t){return Object(et.action)(Dt,{key:e,value:t})},Vt=function(e){return Object(et.action)(zt,{organizationId:e})},qt=function(e){return _e("InspectIO.User",{userId:e})},Wt=function(e,t,n,r,a){return _e("InspectIO.SyncUserName",{userId:e,name:t,email:n=n||null,avatarUrl:r=r||null,position:a=a||null})},Yt=function(e){return _e("InspectIO.Users",{userIds:e})},Qt=function(e){return _e("InspectIO.UserInfo",{email:e})},Kt=function(){return _e("InspectIO.UserSettings",{})},Jt=function(e,t){return _e("InspectIO.UpsertUserSetting",{key:e,value:String(t)})},Zt=function(e){var t={userId:e.uid,email:e.email,username:e.name,avatarUrl:e.avatarUrl,displayName:e.displayName,companyName:e.companyName,jobTitle:e.jobTitle};return Ae("update-profile",t)},Xt=function(e,t){return Ae("reset-password",{userId:e,temporary:!1,password:t})},$t=function(e,t){return n=e,r=t,Te.post(n,r,{baseURL:"/avatar/"});var n,r},en=function(e){return t=e,Te.delete(t,{baseURL:"/avatar/"});var t},tn=function(e,t){return _e(Ct+"SwitchActiveOrganization",{userId:e,organizationId:t})},nn=function(e){return Object(et.action)(Bt,{usersInfo:e})},rn=function(e){return Object(et.action)(Nt,{userSettings:e})},an=function(e,t){return Object(et.action)(Rt,{key:e,value:t})},on=function(e){return Object(et.action)(Mt,e)},cn="@@api/SEND_HTTP_REQUEST",sn=function(e,t,n){return Object(et.action)(cn,{request:e,responseActionType:t,metadata:n})},un=function(e,t,n){return Object(et.action)(e,{webData:t,metadata:n})},dn=function(e){return Object(et.action)("@@api/RESET_WEB_DATA",{responseActionType:e})},ln=function(e,t){return{url:e,method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(t),responseType:"json"}},mn=n(2),pn=n.n(mn),fn=n(1);var bn=function(e){return l.sendHttpRequest(m.getMessageBoxRequestConfig(Ct+"User",{userId:e}),_t)},hn=function(e){return Object(et.action)(At,{userIds:e})},gn="free",vn="basic",yn="premium",On="custom",En={accountType:gn},kn=function(e){switch(e){case gn:case vn:case yn:case On:break;default:throw new Error('Invalid accountType type "'+e+'" provided')}},In=function(e){return new Tn({accountType:e})},xn=function(e){var t=jn(),n=jn();return e.forEach(function(e){null!==e.match(/-account/)&&(n=new Tn({accountType:e.replace(/-account/,"")})).isEqualOrBetterThan(t)&&(t=n)}),t},jn=function(){return new Tn({accountType:gn})},Tn=function(e){function t(e){return Object(Be.a)(this,t),kn(e.accountType),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isFreeAccount",value:function(){return this.accountType===gn}},{key:"isBasicAccount",value:function(){return this.accountType===vn}},{key:"isPremiumAccount",value:function(){return this.accountType===yn}},{key:"isCustomAccount",value:function(){return this.accountType===On}},{key:"isEqualOrBetterThan",value:function(e){return this.accountType===e.accountType||this.accountType!==gn&&(e.accountType===gn||(this.accountType===On||e.accountType!==On&&this.accountType===yn))}},{key:"equals",value:function(e){return this.accountType===e.accountType}}]),t}(Object(be.Record)(En));function Sn(e){return"left"===e.tag}function Cn(e){return"right"===e.tag}function wn(e){return{value:e,tag:"left"}}function _n(e){return{value:e,tag:"right"}}function An(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=n[a],i=Object(Qe.a)(o,2),c=i[0],s=i[1];if(!c(e))return wn(s)}return _n(e)}function Bn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return An.apply(void 0,[e].concat(t))}}function Nn(e){return function(t){return e(t)}}function Rn(e){return function(t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value,u=e(s);if(Sn(u))return u;n.push(u.value)}}catch(d){a=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return _n(n)}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++){var o=(0,n[a])(e);if(Sn(o))return o;e=o.value}return _n(e)}var Un=n(56),Dn=function(e){return function(t){return!!Un.isObject(t)&&Un.has(t,e)}},zn=function(){return function(e){return Un.isArray(e)}},Mn="IioUserInfo",Pn={uid:"",userId:"",username:"",avatarUrl:"",anonymous:!0,aggregateType:Mn,position:"",email:""};function Fn(e){var t=An(e,[Dn("userId"),"userId missing"],[Dn("username"),"username missing in "+e.userId],[Dn("avatarUrl"),"avatarUrl missing in "+e.userId],[Dn("position"),"position missing in "+e.userId],[Dn("email"),"email missing in "+e.userId]);return Sn(t)?t:_n(new Hn(Object(Ye.a)({},Pn,e,{uid:e.userId})))}function Gn(){return new Hn(Pn)}var Hn=function(e){function t(e){return Object(Be.a)(this,t),""!==e.userId&&(e.anonymous=!1),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"avatar",value:function(){return this.anonymous?"":""===this.avatarUrl?this.generateDefaultAvatarUrl():this.avatarUrl}},{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.userId,"?displayName=").concat(this.username)}}]),t}(Object(be.Record)(Pn)),Vn="anonymous",qn="user",Wn="admin",Yn={type:Vn},Qn=function(e){return new Zn({type:e})},Kn=function(){return new Zn({type:Vn})},Jn=function(e){switch(e){case Vn:case qn:case Wn:break;default:throw new Error('Invalid role type "'+e+'" provided')}},Zn=function(e){function t(e){return Object(Be.a)(this,t),Jn(e.type),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isAnonymous",value:function(){return this.type===Vn}},{key:"isUser",value:function(){return this.type===qn}},{key:"isAdmin",value:function(){return this.type===Wn}},{key:"equals",value:function(e){return this.type===e.type}}]),t}(Object(be.Record)(Yn)),Xn=function(){return new tr({roleMap:Object(be.Map)().set(g.TYPE_ANONYMOUS,g.anonymousRole())})},$n=function(e){var t=Object(be.Map)();return e.forEach(function(e){if(null===e.match(/-account/)){var n=new g.Role({type:e});t=t.set(n.type,n)}}),new tr({roleMap:t})},er={roleMap:Object(be.Map)().set(g.TYPE_ANONYMOUS,g.anonymousRole())},tr=function(e){function t(e){return Object(Be.a)(this,t),e.roleMap.isEmpty()&&(e.roleMap=e.roleMap.set(g.TYPE_ANONYMOUS,g.anonymousRole())),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isAnonymous",value:function(){return this.roleMap.has(g.TYPE_ANONYMOUS)}},{key:"isUser",value:function(){return this.roleMap.has(g.TYPE_USER)}},{key:"isAdmin",value:function(){return this.roleMap.has(g.TYPE_ADMIN)}},{key:"equals",value:function(e){return this.roleMap.equals(e)}}]),t}(Object(be.Record)(er)),nr={uid:"",name:"",email:"",givenName:"",familyName:"",roles:v.withAnonymous(),account:b.freeAccount(),quota:0,teamQuota:0,displayName:"",avatarUrl:"",companyName:"",jobTitle:"",activeOrganization:null,signedIn:!1},rr=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"generateDefaultAvatarUrl",value:function(){return"/avatar/".concat(this.uid,"?displayName=").concat(this.displayName)}}]),t}(Object(be.Record)(nr)),ar=pn.a.mark(cr),or=pn.a.mark(sr),ir=pn.a.mark(ur);function cr(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.c)(u.getInspectioUsersInfo,e.payload.userIds);case 2:return t=n.sent,n.next=5,Object(fn.c)(sr,t);case 5:case"end":return n.stop()}},ar,this)}function sr(e){var t,n,r,a,o,c,s,u,l,m,p;return pn.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.response,!(n=e.error)){f.next=5;break}return console.error("Request Error","Failed to laod user info",n),f.next=5,Object(fn.g)(i.Command.error("Request Error","Failed to load user info"));case 5:if(!t){f.next=40;break}r=t.data,a=Object(be.List)(),o=!0,c=!1,s=void 0,f.prev=11,u=r[Symbol.iterator]();case 13:if(o=(l=u.next()).done){f.next=24;break}if(m=l.value,!Sn(p=Fn(m))){f.next=20;break}return console.error("Failed to process IioUserInfo loaded from server",p.value,m),f.next=20,Object(fn.g)(i.Command.error("Request Error","Failed to load user info"));case 20:Cn(p)&&(a=a.push(p.value));case 21:o=!0,f.next=13;break;case 24:f.next=30;break;case 26:f.prev=26,f.t0=f.catch(11),c=!0,s=f.t0;case 30:f.prev=30,f.prev=31,o||null==u.return||u.return();case 33:if(f.prev=33,!c){f.next=36;break}throw s;case 36:return f.finish(33);case 37:return f.finish(30);case 38:return f.next=40,Object(fn.g)(d.iioUsersInfoLoaded(a));case 40:case"end":return f.stop()}},or,this,[[11,26,30,38],[31,,33,37]])}function ur(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([c.LOAD_IIO_USERS_INFO]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===At?7:10;break;case 7:return t.next=9,Object(fn.f)(cr,e);case 9:return t.abrupt("break",10);case 10:t.next=0;break;case 12:case"end":return t.stop()}},ir,this)}var dr,lr,mr=function(e){return _e(Ct+"InstallUserOrganization",{organizationId:e})},pr=function(e){return _e(Ct+"SetUpImplicitOrganization",{organizationId:e})},fr=function(e,t){return _e(Ct+"SetUpExplicitOrganization",{organizationId:e,name:t})},br=function(e){return _e(Ct+"Organization",{organizationId:e})},hr=function(){return _e(Ct+"UserOrganizations",{})},gr=function(e,t,n){return _e(Ct+"InviteUserToOrganization",{organizationId:e,invitationId:t,invitedUserEmail:n})},vr=function(e,t){return _e(Ct+"RevokeUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},yr=function(e,t){return _e(Ct+"ResendUserOrganizationInvitation",{organizationId:e,invitedUserEmail:t})},Or=function(e,t){return _e(Ct+"AcceptInvitationToOrganization",{organizationId:e,invitationId:t})},Er=function(e,t){return _e(Ct+"PromoteUserToOrganizationAdmin",{organizationId:e,userId:t})},kr=function(e,t){return _e(Ct+"DemoteUserToOrganizationMember",{organizationId:e,userId:t})},Ir=function(e,t){return _e(Ct+"RemoveUserFromOrganization",{organizationId:e,userId:t})},xr=function(e,t){return _e(Ct+"RenameOrganization",{organizationId:e,newName:t})},jr=function(e,t){return _e(Ct+"RemoveGuestFromOrganization",{organizationId:e,userId:t})},Tr=function(e,t){return _e(Ct+"TurnGuestIntoMember",{guestId:e,organizationId:t})},Sr="@@InspectioOrganizations/SetUpExplicitOrganization",Cr="@@InspectioOrganizations/ExplicitOrganizationSetUp",wr="@@InspectioOrganizations/ExplicitOrganizationSetUpFailed",_r="@@InspectioOrganizations/InviteUserToOrganization",Ar="@@InspectioOrganizations/UserInvitedToOrganization",Br="@@InspectioOrganizations/RevokeUserOrganizationInvitation",Nr="@@InspectioOrganizations/ResendUserOrganizationInvitation",Rr="@@InspectioOrganizations/UserOrganizationInvitationRevoked",Lr="@@InspectioOrganizations/UserOrganizationInvitationResent",Ur="@@InspectioOrganizations/AcceptInvitationToOrganization",Dr="@@InspectioOrganizations/InvitationToOrganizationAccepted",zr="@@InspectioOrganizations/PromoteUserToOrganizationAdmin",Mr="@@InspectioOrganizations/UserPromotedToOrganizationAdmin",Pr="@@InspectioOrganizations/DemoteUserToOrganizationMember",Fr="@@InspectioOrganizations/UserDemotedToOrganizationMember",Gr="@@InspectioOrganizations/RemoveUserFromOrganization",Hr="@@InspectioOrganizations/UserRemovedFromOrganization",Vr="@@InspectioOrganizations/FetchOrganization",qr="@@InspectioOrganizations/OrganizationFetched",Wr="@@InspectioOrganizations/FetchUserOrganizations",Yr="@@InspectioOrganizations/UserOrganizationsFetched",Qr="@@InspectioOrganizations/RenameOrganization",Kr="@@InspectioOrganizations/OrganizationRenamed",Jr="@@InspectioOrganizations/RemoveGuestFromOrganization",Zr="@@InspectioOrganizations/GuestRemovedFromOrganization",Xr="@@InspectioOrganizations/TurnGuestIntoMember",$r="@@InspectioOrganizations/GuestTurnedIntoMember",ea=function(e,t){return Object(et.action)(Sr,{organizationId:e,name:t})},ta=function(e,t){return Object(et.action)(_r,{organizationId:e,invitedUserEmail:t})},na=function(e,t,n){return Object(et.action)(Br,{organizationId:e,invitationId:t,invitedUserEmail:n})},ra=function(e,t,n){return Object(et.action)(Nr,{organizationId:e,invitationId:t,invitedUserEmail:n})},aa=function(e,t){return Object(et.action)(Ur,{organizationId:e,invitationId:t})},oa=function(e,t){return Object(et.action)(zr,{organizationId:e,userId:t})},ia=function(e,t){return Object(et.action)(Pr,{organizationId:e,userId:t})},ca=function(e,t){return Object(et.action)(Gr,{organizationId:e,userId:t})},sa=function(e,t){return Object(et.action)(Qr,{organizationId:e,newName:t})},ua=function(e,t){return Object(et.action)(Jr,{organizationId:e,userId:t})},da=function(e,t){return Object(et.action)(Xr,{guestId:e,organizationId:t})},la=function(e){return Object(et.action)(qr,e)},ma=function(e){return Object(et.action)(Cr,e)},pa=function(e){return Object(et.action)(wr,e)},fa=function(e){return Object(et.action)(Yr,e)},ba=function(e){return Object(et.action)(Ar,e)},ha=function(e,t){return Object(et.action)(Rr,{invitation:e,organization:t})},ga=function(e,t){return Object(et.action)(Lr,{invitation:e,organization:t})},va=function(e){return Object(et.action)(Dr,e)},ya=function(e){return Object(et.action)(Mr,e)},Oa=function(e){return Object(et.action)(Fr,e)},Ea=function(e){return Object(et.action)(Hr,e)},ka=function(e){return Object(et.action)(Kr,e)},Ia=function(e){return Object(et.action)(Zr,e)},xa=function(e){return Object(et.action)($r,e)},ja=function(e){return Object(et.action)(Vr,{organizationId:e})},Ta=function(){return Object(et.action)(Wr,{})};(lr=dr||(dr={})).open="open",lr.acknowledged="acknowledged",lr.revoked="revoked";var Sa={uid:"",invitationId:"",invitedUserEmail:"",status:dr.open,aggregateType:"OrganizationInvitation"},Ca=function(e){return new _a({uid:e.invitationId,invitationId:e.invitationId,invitedUserEmail:e.invitedUserEmail,status:dr.open,aggregateType:"OrganizationInvitation"})},wa=function(e){var t=An(e,[Dn("invitationId"),"invitationId missing"],[Dn("invitedUserEmail"),"invitedUserEmail missing"]);return Sn(t)?t:_n(new _a(Object(Ye.a)({},Sa,e,{uid:e.invitationId})))},_a=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(Sa)),Aa={uid:"",ownerId:"",name:"",explicit:!1,memberQuota:0,boardQuota:0,members:Object(be.List)(),admins:Object(be.List)(),boards:Object(be.List)(),guests:Object(be.List)(),invitations:Object(be.List)(),aggregateType:"Organization"},Ba=function(e){var t=An(e,[Dn("organizationId"),"organizationId missing"],[Dn("ownerId"),"ownerId missing in ".concat(e.organizationId)],[Dn("name"),"name missing in ".concat(e.organizationId)],[Dn("explicit"),"explicit missing in ".concat(e.organizationId)],[Dn("memberQuota"),"memberQuota missing in ".concat(e.organizationId)],[Dn("boardQuota"),"boardQuota missing in ".concat(e.organizationId)],[Dn("members"),"members missing in ".concat(e.organizationId)],[Dn("admins"),"admins missing in ".concat(e.organizationId)],[Dn("boards"),"boards missing in ".concat(e.organizationId)],[Dn("guests"),"guests missing in ".concat(e.organizationId)],[Dn("invitations"),"invitations missing in ".concat(e.organizationId)]);if(Sn(t))return t;var n,r=[],a=!0,o=!1,i=void 0;try{for(var c,s=e.invitations[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){n=c.value;var u=wa(n);if(Sn(u))return u;Cn(u)&&r.push(u.value)}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}return _n(new Na({uid:e.organizationId,ownerId:e.ownerId,name:e.name,explicit:e.explicit,memberQuota:e.memberQuota,boardQuota:e.boardQuota,members:Object(be.List)(e.members),admins:Object(be.List)(e.admins),guests:Object(be.List)(e.guests),boards:Object(be.List)(e.boards),invitations:Object(be.List)(r),aggregateType:"Organization"}))},Na=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.includes(e)}},{key:"setUpAsExplicit",value:function(e){return this.set("explicit",!0).set("name",e)}},{key:"inviteUser",value:function(e,t){return this.set("invitations",this.invitations.push(Ca({invitationId:e,invitedUserEmail:t})))}},{key:"promoteAdmin",value:function(e){return this.set("admins",this.admins.push(e))}},{key:"demoteToMember",value:function(e){return this.set("admins",this.admins.filter(function(t){return t!==e}))}},{key:"revokeInvitation",value:function(e){return this.set("invitations",this.invitations.filter(function(t){return t.invitationId!==e}))}},{key:"removeUser",value:function(e){var t=this;return t=(t=(t=t.set("admins",t.get("admins",Object(be.List)()).filter(function(t){return t!==e}))).set("members",t.get("members",Object(be.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"removeGuest",value:function(e){var t=this;return t=(t=t.set("guests",t.get("guests",Object(be.List)()).filter(function(t){return t!==e}))).set("memberQuota",t.get("memberQuota",0)+1)}},{key:"turnGuestIntoMember",value:function(e){var t=this.guests.filter(function(t){return t!==e}),n=this.members.push(e);return this.set("guests",t).set("members",n)}},{key:"withNewName",value:function(e){return this.set("name",e)}}]),t}(Object(be.Record)(Aa)),Ra={uid:"",organizationId:"",userId:"",organizationName:"",ownOrganization:!1,explicitOrganization:!1,userIsAdmin:!1,userIsGuest:!0,aggregateType:"UserOrganizationInfo"},La=function(e){var t=An(e,[Dn("organizationId"),"organizationId missing"],[Dn("userId"),"userId missing"],[Dn("organizationName"),"organizationName missing"],[Dn("ownOrganization"),"ownOrganization missing"],[Dn("explicitOrganization"),"explicitOrganization missing"],[Dn("userIsAdmin"),"userIsAdmin missing"],[Dn("userIsGuest"),"userIsGuest missing"]);return Sn(t)?t:_n(new Ua(Object(Ye.a)({},Ra,e,{uid:e.organizationId})))},Ua=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(Ra)),Da=n(62);function za(e,t){return e.set(t.uid,t)}function Ma(e,t){return e.set(t.uid,t)}function Pa(e,t){return e.remove(t.uid)}function Fa(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=t.toArray()[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){e=Ma(e,o.value)}}catch(c){r=!0,a=c}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return e}function Ga(e){return Object(be.Map)()}var Ha=Object(be.Map)(),Va=Object(be.Map)(),qa=Object(be.Map)(),Wa=Object(Da.combineReducers)({Organization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ha,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qr:return za(e,t.payload);case Cr:case wr:case Ar:case Mr:case Fr:case Hr:case Zr:case Kr:case $r:return Ma(e,t.payload);case Rr:return Ma(e,t.payload.organization);default:return e}},UserOrganizationInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yr:return Fa(e,t.payload);case Cr:var n=e.get(t.payload.uid);return n?Ma(e,n.set("organizationName",t.payload.name).set("explicitOrganization",!0)):e;case wr:var r=e.get(t.payload.uid);return r?Ma(e,r.set("organizationName",t.payload.name).set("explicitOrganization",!1)):e;case Kr:var a=e.get(t.payload.uid);return a?Ma(e,a.set("organizationName",t.payload.name)):e;default:return e}},OrganizationInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Va,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Lr:case Rr:return Fa(e,Object(be.List)([t.payload.invitation]));default:return e}}},function(){return Object(be.fromJS)({Organization:void 0,UserOrganizationInfo:void 0,OrganizationInvitation:void 0})}),Ya=pn.a.mark(Ka),Qa=pn.a.mark(Ja);function Ka(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(j.Api.demoteUserToOrganizationMember,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not demote user to organization member."));case 8:if(!n){a.next=16;break}return a.next=11,Object(fn.i)(vi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(fn.g)(j.Event.userDemotedToOrganizationMember(r.demoteToMember(e.payload.userId)));case 14:return a.next=16,Object(fn.g)(i.Command.info("User demoted","The user is no longer an admin of the organization."));case 16:case"end":return a.stop()}},Ya,this)}function Ja(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.DEMOTE_USER_TO_ORGANIZATION_MEMBER]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Ka,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Qa,this)}var Za=n(44),Xa=pn.a.mark(eo),$a=pn.a.mark(function e(t){var n,r,a;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(O.fetchOrganization,t.payload.organizationId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Could not fetch organization"));case 8:if(!r){e.next=19;break}if(!Sn(a=Ln(r.data,Nn(function(e){return Ba(e)})))){e.next=14;break}return console.error("Invalid organization response: ",a.value),e.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load organization"));case 14:if(!Cn(a)){e.next=19;break}return e.next=17,Object(fn.g)(I.organizationFetched(a.value));case 17:return e.next=19,Object(fn.g)(f.Query.loadUsersInfo([a.value.ownerId].concat(Object(Za.a)(a.value.members.toJS()),Object(Za.a)(a.value.guests.toJS()))));case 19:case"end":return e.stop()}},e,this)});function eo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([E.FETCH_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)($a,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Xa,this)}var to=n(157),no=n.n(to),ro=pn.a.mark(io),ao=pn.a.mark(co),oo=!1;function io(e){var t,n,r,a,o,c,s,u,d;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(j.Api.fetchUserOrganizations);case 2:if(t=e.sent,n=t.response,!(r=t.error)){e.next=20;break}if(404!==r.status){e.next=18;break}return e.next=9,Object(fn.c)(j.Api.setUpImplicitOrganization,no()());case 9:if(!(a=e.sent).error){e.next=13;break}return e.next=13,Object(fn.g)(i.Command.error("Request Error","Could not install user organization"));case 13:if(!a.response){e.next=16;break}return e.next=16,Object(fn.g)(j.Query.fetchUserOrganizations());case 16:e.next=20;break;case 18:return e.next=20,Object(fn.g)(i.Command.error("Request Error","Could not fetch user organizations"));case 20:if(!n){e.next=56;break}if(!Sn(o=Ln(n.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(e){return La(e)})))){e.next=25;break}return e.next=25,Object(fn.g)(i.Command.error("Request Error","Could not load user organizations"));case 25:if(!Cn(o)){e.next=56;break}if(!o.value.length){e.next=44;break}return c=Object(be.List)(o.value),e.next=30,Object(fn.g)(j.Event.userOrganizationsFetched(c));case 30:return e.next=32,Object(fn.i)(_.makeGetCurrentUser());case 32:if(null!==e.sent.activeOrganization||1!==c.count()||c.first({explicitOrganization:!1}).explicitOrganization){e.next=36;break}return e.next=36,Object(fn.g)(f.Command.switchActiveOrganization(c.first({organizationId:null}).organizationId));case 36:return e.next=38,Object(fn.i)(_.makeGetCurrentUser());case 38:if(!(s=e.sent).activeOrganization){e.next=42;break}return e.next=42,Object(fn.g)(j.Query.fetchOrganization(s.activeOrganization));case 42:e.next=56;break;case 44:if(oo){e.next=56;break}return oo=!0,u=nt.a.v4(),e.next=49,Object(fn.c)(j.Api.installUserOrganization,u);case 49:if(!(d=e.sent).error){e.next=53;break}return e.next=53,Object(fn.g)(i.Command.error("Request Error","Could not initialize organization."));case 53:if(!d.response){e.next=56;break}return e.next=56,Object(fn.g)(j.Query.fetchUserOrganizations());case 56:case"end":return e.stop()}},ro,this)}function co(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.FETCH_USER_ORGANIZATIONS]);case 3:return e=t.sent,t.next=6,Object(fn.f)(io,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ao,this)}var so=pn.a.mark(lo),uo=pn.a.mark(mo);function lo(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=no()(),o.next=3,Object(fn.c)(j.Api.inviteUserToOrganization,e.payload.organizationId,t,e.payload.invitedUserEmail);case 3:if(n=o.sent,r=n.response,!n.error){o.next=9;break}return o.next=9,Object(fn.g)(i.Command.error("Request Error","Could not invite user to organization."));case 9:if(!r){o.next=17;break}return o.next=12,Object(fn.i)(vi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(fn.g)(j.Event.userInvitedToOrganization(a.inviteUser(t,e.payload.invitedUserEmail)));case 15:return o.next=17,Object(fn.g)(i.Command.info("User invited","The user was invited to the organization."));case 17:case"end":return o.stop()}},so,this)}function mo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.INVITE_USER_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(lo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},uo,this)}var po=pn.a.mark(bo),fo=pn.a.mark(ho);function bo(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(j.Api.promoteUserToOrganizationAdmin,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not promote user to organization admin."));case 8:if(!n){a.next=16;break}return a.next=11,Object(fn.i)(vi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(fn.g)(j.Event.userPromotedToOrganizationAdmin(r.promoteAdmin(e.payload.userId)));case 14:return a.next=16,Object(fn.g)(i.Command.info("User promoted","The user is now an admin of the organization."));case 16:case"end":return a.stop()}},po,this)}function ho(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.PROMOTE_USER_TO_ORGANIZATION_ADMIN]);case 3:return e=t.sent,t.next=6,Object(fn.f)(bo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},fo,this)}var go=pn.a.mark(yo),vo=pn.a.mark(Oo);function yo(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(j.Api.removeGuestFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not remove guest from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(fn.i)(vi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(fn.g)(j.Event.guestRemovedFromOrganization(r.removeGuest(e.payload.userId)));case 14:return a.next=16,Object(fn.g)(i.Command.info("Guest removed","The guest no longer has access to organization boards and teams."));case 16:case"end":return a.stop()}},go,this)}function Oo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.REMOVE_GUEST_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(yo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},vo,this)}var Eo=pn.a.mark(Io),ko=pn.a.mark(xo);function Io(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(j.Api.removeUserFromOrganization,e.payload.organizationId,e.payload.userId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not remove user from organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(fn.i)(vi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(fn.g)(j.Event.userRemovedFromOrganization(r.removeUser(e.payload.userId)));case 14:return a.next=16,Object(fn.g)(i.Command.info("User removed","The user is no longer member of the organization."));case 16:case"end":return a.stop()}},Eo,this)}function xo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.REMOVE_USER_FROM_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Io,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ko,this)}var jo=pn.a.mark(So),To=pn.a.mark(Co);function So(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(j.Api.renameOrganization,e.payload.organizationId,e.payload.newName);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not rename organization."));case 8:if(!n){a.next=16;break}return a.next=11,Object(fn.i)(vi(e.payload.organizationId));case 11:return r=a.sent,a.next=14,Object(fn.g)(j.Event.organizationRenamed(r.withNewName(e.payload.newName)));case 14:return a.next=16,Object(fn.g)(i.Command.info("Organization renamed","Renaming organization was successful."));case 16:case"end":return a.stop()}},jo,this)}function Co(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.RENAME_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(So,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},To,this)}var wo=pn.a.mark(Ao),_o=pn.a.mark(Bo);function Ao(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.c)(j.Api.resendUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(fn.g)(i.Command.error("Request Error","Could not resend invitation."));case 8:if(!n){o.next=17;break}return r=Ca({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(fn.i)(vi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(fn.g)(j.Event.userOrganizationInvitationResent(r,a));case 15:return o.next=17,Object(fn.g)(i.Command.info("User invited","Invitation was sent again."));case 17:case"end":return o.stop()}},wo,this)}function Bo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.RESEND_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Ao,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},_o,this)}var No=pn.a.mark(Lo),Ro=pn.a.mark(Uo);function Lo(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.c)(j.Api.revokeUserOrganizationInvitation,e.payload.organizationId,e.payload.invitedUserEmail);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(fn.g)(i.Command.error("Request Error","Could not revoke invitation."));case 8:if(!n){o.next=15;break}return r=Ca({invitationId:e.payload.invitationId,invitedUserEmail:e.payload.invitedUserEmail}),o.next=12,Object(fn.i)(vi(e.payload.organizationId));case 12:return a=o.sent,o.next=15,Object(fn.g)(j.Event.userOrganizationInvitationRevoked(r.set("status",dr.revoked),a.revokeInvitation(r.invitationId)));case 15:case"end":return o.stop()}},No,this)}function Uo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.REVOKE_USER_ORGANIZATION_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Lo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Ro,this)}var Do=pn.a.mark(Mo),zo=pn.a.mark(Po);function Mo(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.i)(vi(e.payload.organizationId));case 2:if(!(t=o.sent)){o.next=20;break}return n=t.setUpAsExplicit(e.payload.name),o.next=7,Object(fn.g)(j.Event.explicitOrganizationSetUp(n));case 7:return o.next=9,Object(fn.c)(j.Api.setUpExplicitOrganization,e.payload.organizationId,e.payload.name);case 9:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=15,Object(fn.g)(j.Event.explicitOrganizationSetUpFailed(t));case 15:return o.next=17,Object(fn.g)(i.Command.error("Request Error","Could not create organization."));case 17:if(!a){o.next=20;break}return o.next=20,Object(fn.g)(i.Command.info("Organization created","Organization created successfully"));case 20:case"end":return o.stop()}},Do,this)}function Po(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.SET_UP_EXPLICIT_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Mo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},zo,this)}var Fo=pn.a.mark(Ho),Go=pn.a.mark(Vo);function Ho(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(vi(e.payload.organizationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(fn.c)(j.Api.turnGuestIntoMember,e.payload.guestId,e.payload.organizationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not turn guest into member."));case 12:if(!r){a.next=17;break}return a.next=15,Object(fn.g)(i.Command.info("Member added","Guest turned into member."));case 15:return a.next=17,Object(fn.g)(j.Event.guestTurnedIntoMember(t.turnGuestIntoMember(e.payload.guestId)));case 17:case"end":return a.stop()}},Fo,this)}function Vo(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([j.Type.TURN_GUEST_INTO_MEMBER]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Ho,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Go,this)}var qo="inspectioOrganizations",Wo=pn.a.mark(Qo),Yo=pn.a.mark(Ko);function Qo(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(Ci());case 2:return t=a.sent,a.next=5,Object(fn.c)(f.Api.switchActiveOrganization,t.uid,e.payload.organizationId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(fn.g)(i.Command.error("Request Error","Could not switch active organization."));case 11:if(!r){a.next=18;break}return t=t.set("activeOrganization",e.payload.organizationId),a.next=15,Object(fn.g)(f.Event.activeOrganizationSwitched(t));case 15:if(!e.payload.organizationId){a.next=18;break}return a.next=18,Object(fn.g)(j.Query.fetchOrganization(e.payload.organizationId));case 18:case"end":return a.stop()}},Wo,this)}function Ko(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([f.Type.SWITCH_ACTIVE_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Qo,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Yo,this)}var Jo=function(e,t){return e.getIn(["inspectioUsers","iioUsersInfo",t])},Zo=function(e){return function(t){return Jo(t,e)}},Xo=function(e,t){return Object(be.List)(e.getIn(["inspectioUsers","iioUsersInfo"]).toIndexedSeq().toArray())||Object(be.List)()},$o=function(){return Object(pt.a)([Xo],function(e){return e})},ei=function(e){return Object(pt.a)([Xo],function(t){return t.filter(function(t){return e.contains(t.userId)})})},ti=pn.a.mark(ri),ni=pn.a.mark(ai);function ri(e){var t;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.i)(_.currentUserSelector,void 0);case 2:if(!(t=e.sent).displayName){e.next=6;break}return e.next=6,Object(fn.c)(u.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 6:case"end":return e.stop()}},ti,this)}function ai(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([c.SIGN_IN]);case 3:return e=t.sent,t.next=6,Object(fn.f)(ri,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ni,this)}var oi=pn.a.mark(ui),ii=pn.a.mark(di),ci=pn.a.mark(li),si=pn.a.mark(mi);function ui(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(_.currentUserSelector,void 0);case 2:if(!(t=a.sent).name){a.next=19;break}return a.next=6,Object(fn.c)(u.updateProfile,t);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not update profile with new profile picture."));case 12:if(!r){a.next=19;break}if(!t.displayName){a.next=16;break}return a.next=16,Object(fn.c)(u.syncUsername,t.uid,t.displayName,t.email,t.avatarUrl,t.jobTitle);case 16:return a.next=18,Object(fn.g)(i.Command.info("Profile Saved","Your profile has been saved"));case 18:e.payload.successCb();case 19:case"end":return a.stop()}},oi,this)}function di(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([c.UPDATE_PROFILE]);case 3:return e=t.sent,t.next=6,Object(fn.f)(ui,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ii,this)}function li(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.i)(_.currentUserSelector,void 0);case 2:if(t=o.sent,n=e.payload.password,!t.uid){o.next=16;break}return o.next=7,Object(fn.c)(u.updatePassword,t.uid,n);case 7:if(r=o.sent,a=r.response,!r.error){o.next=13;break}return o.next=13,Object(fn.g)(i.Command.error("Request Error","Could not change password."));case 13:if(!a){o.next=16;break}return o.next=16,Object(fn.g)(i.Command.info("Password changed","Password was changed successfully."));case 16:case"end":return o.stop()}},ci,this)}function mi(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([c.UPDATE_PASSWORD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(li,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},si,this)}var pi=pn.a.mark(bi),fi=pn.a.mark(hi);function bi(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.g)(d.userSettingUpserted(e.payload.key,e.payload.value));case 2:return n.next=4,Object(fn.c)(u.upsertUserSetting,e.payload.key,e.payload.value);case 4:t=n.sent,t.response,t.error&&console.log("Failed updating user setting for ".concat(e.payload.key," and ").concat(e.payload.value));case 8:case"end":return n.stop()}},pi,this)}function hi(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.a)(c.UPSERT_USER_SETTING);case 2:e=n.sent;case 3:return n.next=6,Object(fn.k)(e);case 6:return t=n.sent,n.next=9,Object(fn.c)(bi,t);case 9:n.next=3;break;case 11:case"end":return n.stop()}},fi,this)}var gi,vi=function(e){return function(t){return e?function(e,t){return e.getIn([qo,"Organization",t])}(t,e):void 0}},yi=function(e){return e.getIn([qo,"Organization"]).toList()},Oi=n(37),Ei=1,ki=function(){function e(){var t=this;Object(Be.a)(this,e),this.initializationPromise=void 0,this.db=void 0,this.initializationPromise=new Promise(function(e,n){var r=indexedDB.open("insp_standalone",Ei);r.onupgradeneeded=function(e){t.updateDatabaseToLatestVersion(r.result,e.oldVersion)},r.onerror=function(){n("IndexedDB could not be initialized")},r.onsuccess=function(){t.db=r.result,e()}})}return Object(Ne.a)(e,[{key:"get",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r=this;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Oi.a)(pn.a.mark(function e(a,o){var i,c;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.db.transaction(t,"readonly"),e.next=3,i.objectStore(t).get(n);case 3:(c=e.sent).onsuccess=function(){return a(c.result)},c.onerror=function(){return o()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){var n=this;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Oi.a)(pn.a.mark(function e(r,a){var o,i;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.db.transaction(t,"readonly"),e.next=3,o.objectStore(t).getAll();case 3:(i=e.sent).onsuccess=function(){return r(i.result)},i.onerror=function(){return a()};case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r=this;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Oi.a)(pn.a.mark(function e(a,o){var i,c;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(c=i.objectStore(t).add(n)).onsuccess=function(){return a()},c.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r=this;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Oi.a)(pn.a.mark(function e(a,o){var i,c;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(c=i.objectStore(t).put(n)).onsuccess=function(){return a()},c.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r=this;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertDBInitialized();case 2:return e.abrupt("return",new Promise(function(){var e=Object(Oi.a)(pn.a.mark(function e(a,o){var i,c;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=r.db.transaction(t,"readwrite"),(c=i.objectStore(t).delete(n)).onsuccess=function(){return a()},c.onerror=function(){return o()};case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"assertDBInitialized",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializationPromise;case 2:if(this.db){e.next=4;break}throw new Error("IndexedDB is not initialized");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateDatabaseToLatestVersion",value:function(e,t){switch(console.log("Starting upgrade for DB insp_standalone from version ".concat(t," to ").concat(Ei)),t){case 0:e.createObjectStore("boards",{keyPath:"boardId"}),e.createObjectStore("userSettings",{keyPath:"key"})}}}]),e}(),Ii=ki,xi=function(){function e(t){Object(Be.a)(this,e),this.db=void 0,this.db=t,this.getBoards=this.getBoards.bind(this),this.getBoard=this.getBoard.bind(this),this.updateBoard=this.updateBoard.bind(this),this.addBoard=this.addBoard.bind(this),this.deleteBoard=this.deleteBoard.bind(this),this.getUserSettings=this.getUserSettings.bind(this),this.setUserSetting=this.setUserSetting.bind(this)}return Object(Ne.a)(e,[{key:"getUser",value:function(){return{userId:"f1c1512d-e1b9-44c2-940c-3f7cade64a29"}}},{key:"getBoards",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("boards");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getBoard",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("boards",t);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=null;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateBoard",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.put("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addBoard",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.add("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteBoard",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.delete("boards",t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getUserSettings",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getAll("userSettings");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setUserSetting",value:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.get("userSettings",t.key);case 2:if(!e.sent){e.next=7;break}return e.next=5,this.db.put("userSettings",t);case 5:e.next=9;break;case 7:return e.next=9,this.db.add("userSettings",t);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ji=xi,Ti=new ji(new Ii),Si=function(e,t){return e.getIn(["inspectioUsers","users","currentUser"])},Ci=function(){return Object(pt.a)([Si],function(e){return e})},wi=function(){var e=function(e){return yi(e)};return Object(pt.a)([Si,e],function(e,t){return-1})},_i=n(522),Ai=n(262),Bi=n.n(Ai),Ni=(n(858),n(1235)),Ri=n(1214),Li={aspect:1,unit:"px",x:0,y:0,width:150,height:150},Ui=function(e){var t=Object(ve.useState)(Li),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(void 0),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(void 0),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=function(){e.onClose(),v()},v=function(){m(void 0),h(void 0),a(Li)};return ve.createElement(Ni.a,{open:e.open,onClose:g,closeIcon:!0},ve.createElement(Ni.a.Header,null,e.t("insp.user.avatar_upload.select_photo")),ve.createElement(Ni.a.Content,{image:!0},ve.createElement(_i.a,{onDrop:function(e){m(e[0]),h(URL.createObjectURL(e[0]))}},function(t){var n=t.getRootProps,o=t.getInputProps;return ve.createElement("section",{style:{height:"410px",width:"100%"}},ve.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),b?ve.createElement(Bi.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:b,crop:r,onChange:function(e){return a(e)},onImageLoaded:function(e){return s(e.width/e.naturalWidth)}}):ve.createElement("div",null,ve.createElement("input",o()),ve.createElement("p",null,e.t("insp.user.avatar_upload.drag_and_drop_info")))))})),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{children:e.t("app.form.cancel"),onClick:g}),ve.createElement(Ri.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){e.onUpload(l,{x:r.x/c,y:r.y/c,width:r.width/c,height:r.height/c}),v()}})))},Di=n(54),zi=Object(De.b)()(Object(Di.reduxForm)({form:"UserProfileEditForm",enableReinitialize:!0})(function(e){return ye.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.email")),ye.a.createElement(Di.Field,{name:"email",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.email")})),ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.display_name")),ye.a.createElement(Di.Field,{name:"displayName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.display_name")})),ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.company")),ye.a.createElement(Di.Field,{name:"companyName",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.company")})),ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.position")),ye.a.createElement(Di.Field,{name:"jobTitle",component:"input",type:"text",placeholder:e.t("insp.user.form.fields.position")})),ye.a.createElement("div",{className:"field"},ye.a.createElement(Ri.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.save")),ye.a.createElement(Pe.Link,{to:yt,className:"ui basic button noborder"},e.t("app.form.cancel"))))})),Mi=n(1241),Pi=Object(De.b)()(Object(Di.reduxForm)({form:"UserProfilePasswordForm",enableReinitialize:!1})(function(e){return ye.a.createElement("form",{className:"ui form"+(e.showErrorMessage?" error":""),onSubmit:e.handleSubmit},ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.password1")),ye.a.createElement(Di.Field,{name:"password1",component:"input",type:"password"})),ye.a.createElement("div",{className:"field"},ye.a.createElement("label",null,e.t("insp.user.form.labels.password2")),ye.a.createElement(Di.Field,{name:"password2",component:"input",type:"password"})),ye.a.createElement(Mi.a,{error:!0,header:e.t("insp.user.change_password.passwords_not_matching_title"),content:e.t("insp.user.change_password.passwords_not_matching_text")}),ye.a.createElement("div",{className:"field"},ye.a.createElement(Ri.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.change"))))})),Fi=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],c=Object(ve.useState)(!1),s=Object(Qe.a)(c,2),d=s[0],l=s[1],m=Object(ve.useState)(!1),p=Object(Qe.a)(m,2),f=p[0],b=p[1],h=Object(ze.useSelector)(Ci());$e(function(){o(!1)});var g=function(){t(Ft(h.merge({avatarUrl:"/avatar/"+h.uid+"?displayName="+encodeURI(h.displayName)+"&timestamp="+Date.now()}),function(){}))};return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0},ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{width:"2",className:"tabletHidden"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"12"},ve.createElement(Ze.a,{as:"h1",icon:!0,textAlign:"center"},ve.createElement(Xe.a,{open:a,icon:!1},ve.createElement(Xe.a.Menu,null,ve.createElement(Xe.a.Item,{text:e.t("app.form.upload"),onClick:function(){return l(!0)}}),ve.createElement(Xe.a.Item,{text:e.t("app.form.delete"),onClick:function(){u.deleteAvatar(h.uid).then(function(){g()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.deletion_failed_title"),e.t("insp.user.avatar_upload.deletion_failed_text")))}).finally(function(){o(!1)})}}))),ve.createElement("img",{style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),o(!a)},className:"ui circular image",src:h.avatarUrl}),ve.createElement(Ze.a.Content,null,e.t("insp.user.profile_headline",{user_name:h.displayName}),ve.createElement(Ze.a.Subheader,null,e.t("insp.user.profile_subline")))))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{width:"2",className:"tabletHidden"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"12"},ve.createElement("div",{className:"ui segments"},ve.createElement("div",{className:"ui segment"},ve.createElement(zi,{initialValues:Object(be.fromJS)(h.toJS()),onSubmit:function(n){!function(e,n){var r=h.merge(e.toJS());t(Ft(r,function(){return n.history.push(yt)}))}(n,e)}})))))),ve.createElement(Je.a,{stackable:!0},ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{width:"2",className:"tabletHidden"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"12"},ve.createElement("div",{className:"ui segments"},ve.createElement("div",{className:"ui segment"},ve.createElement(Pi,{initialValues:Object(be.fromJS)({password1:"",password2:""}),onSubmit:function(e){!function(e){var n=Object(Ye.a)({},{password1:"",password2:""},e.toJS());n.password1===n.password2?(b(!1),t(Gt(n.password1)),t(Object(Ke.a)("UserProfilePasswordForm"))):b(!0)}(e)},showErrorMessage:f})))))),ve.createElement(Ui,{t:e.t,open:d,onClose:function(){l(!1),o(!1)},onUpload:function(n,r){var a=new FormData;a.append("avatar_file",n),a.append("crop",JSON.stringify(r)),u.uploadAvatar(h.uid,a).then(function(){g()}).catch(function(){t(i.Command.error(e.t("insp.user.avatar_upload.upload_failed_title"),e.t("insp.user.avatar_upload.upload_failed_text")))}).finally(function(){l(!1),o(!1)})}}))})),Gi="InspectIO.",Hi="@@InspectioBoards/SaveBoard",Vi="@@InspectioBoards/RenameBoard",qi="@@InspectioBoards/ImportNewBoard",Wi="@@InspectioBoards/ImportExistingBoard",Yi="@@InspectioBoards/AddBoard",Qi="@@InspectioBoards/AddBoards",Ki="@@InspectioBoards/ForceUpdateBoards",Ji="@@InspectioBoards/SetBoardToSnapshot",Zi="@@InspectioBoards/SetBoardDetailsFetched",Xi="@@InspectioBoards/ConfirmDeleteBoard",$i="@@InspectioBoards/AbortBoardDeletion",ec="@@InspectioBoards/DeleteBoard",tc="@@InspectioBoards/ShareBoard",nc="@@InspectioBoards/ResendBoardInvitation",rc="@@InspectioBoards/RevokeBoardInvitation",ac="@@InspectioBoards/RevokeAccessToBoard",oc="@@InspectioBoards/ChangeBoardPermissions",ic="@@InspectioBoards/AdminChangeTeamBoardPermissions",cc="@@InspectioBoards/TriggerImportBoard",sc="@@InspectioBoards/TriggerExportBoard",uc="@@IspectioBoards/ToggleBoardHistory",dc="@@IspectioBoards/ToggleElementDetails",lc="@@InspectioBoards/ToggleCodyConsole",mc="@@InspectioBoards/ToggleTimerModal",pc="@@InspectioBoards/AppendHistoryEntries",fc="@@InspectioBoards/PrependHistoryEntries",bc="@@InspectioBoards/ClearBoardHistory",hc="@@InspectioBoards/LoadFirstBoardHistoryChunk",gc="@@InspectioBoards/LoadNextBoardHistoryChunk",vc="@@InspectioBoards/SetNoMoreHistoryAvailable",yc="@@InspectioBoards/SetIsLoadingHistory",Oc="@@InspectioBoards/UpdateBoardElementsTree",Ec="@@InspectioBoards/CreateBoardClient",kc="@@InspectioBoards/RemoveBoardClient",Ic="@@InspectioBoards/ResetBoardClientSecret",xc="@@InspectioBoards/SetStickyTemplate",jc="@@InspectioBoards/UpdateStickyAdvancedConfig",Tc="@@InspectioBoards/ImportStickyTemplates",Sc="@@InspectioBoards/OpenElementsDetails",Cc="@@InspectioBoards/FilterBoardOverview",wc="@@InspectioBoards/HideSharedBoardsOnOverview",_c="@@InspectioBoards/HideOwnBoardsOnOverview",Ac="@@InspectioBoards/FilterElementsTree",Bc="@@InspectioBoards/MoveUserBoardToOrganization",Nc="@@InspectioBoards/SyncBoard",Rc="@@InspectioBoards/StopBoardSynchronisation",Lc="@@InspectioBoards/RemoteBoardChanged",Uc="@@InspectioBoards/RemoteBoardOpened",Dc="@@InspectioBoards/LocalBoardChanged",zc="@@InspectioBoards/LocalChangeSetAsHeadVersion",Mc="@@InspectioBoards/EnqueueBoardChanged",Pc="@@InspectioBoards/DequeueBoardChanged",Fc="@@InspectioBoards/SetBoardVersion",Gc="@@InspectioBoards/ApplyRemoteChange",Hc="@@InspectioBoards/RemoteChangeApplied",Vc="@@InspectioBoards/BoardImportStarted",qc="@@InspectioBoards/BoardImported",Wc="@@InspectioBoards/BoardExported",Yc="@@InspectioBoards/BoardInitialized",Qc="@@InspectioBoards/LocalBoardUpdatedWithRemoteChange",Kc="@@InspectioBoards/BoardInvitationSent",Jc="@@InspectioBoards/BoardInvitationResent",Zc="@@InspectioBoards/BoardInvitationRevoked",Xc="@InspectioBoards/BoardAccessRevoked",$c="@@InspectioBoards/BoardPermissionsChanged",es="@@InspectioBoards/TeamBoardPermissionsChanged",ts="@@InspectioBoards/BoardPermissionsForUsersFetched",ns="@@InspectioBoards/BoardPermissionsForTeamsFetched",rs="@@InspectioBoards/OpenBoardInvitationsFetched",as="@@InspectioBoards/ActiveGraphElementChanged",os="@@InspectioBoards/ActiveGraphElementLabelChanged",is="@@InspectioBoards/ActiveGraphElementMetadataChanged",cs="@@InspectioBoards/BoardGraphElementsFetched",ss="@@InspectioBoards/BoardClientFetched",us="@@InspectioBoards/BoardClientNotConfigured",ds="@@InspectioBoards/BoardClientSecretFetched",ls="@@InspectioBoards/BoardStickyTemplatesFetched",ms="@@InspectioBoards/StickyTemplateSet",ps="@@InspectioBoards/StickyAdvancedConfigUpdated",fs="@@InspectioBoards/StickyTemplatesImported",bs="@@InspectioBoards/UserBoardMovedToOrganization",hs="@@InspectioBoards/InitialBoardListLoaded",gs="@@InspectioBoards/StartFetchUserBoards",vs="@@InspectioBoards/FetchUserBoards",ys="@@InspectioBoards/FetchUserBoard",Os="@@InspectioBoards/BoardPermissionsForUsers",Es="@@InspectioBoards/BoardPermissionsForTeams",ks="@@InspectioBoards/FetchOpenBoardInvitations",Is="@@InspectioBoards/BoardGraphElements",xs="@@InspectioBoards/FetchBoardClient",js="@@InspectioBoards/FetchBoardClientSecret",Ts="@@InspectioBoards/FetchBoardStickyTemplates",Ss=function(e,t,n){return _e(Gi+"InstallOrganizationBoard",{organizationId:e,boardId:t,boardName:n})},Cs=function(e,t){return _e(Gi+"RenameBoard",{boardId:e,name:t})},ws=function(e){return _e(Gi+"DeleteBoard",{boardId:e})},_s=function(e,t,n){return _e(Gi+"TakeBoardSnapshot",{boardId:e,boardVersion:{userId:t.userId,version:t.version},content:n})},As=function(e,t,n){return _e(Gi+"ShareBoardWithUser",{boardId:e,invitedUser:t,boardPermissions:n||{writeAccess:!0,readAccess:!0,adminAccess:!1}})},Bs=function(e){return _e(Gi+"ResendBoardInvitation",{invitationId:e})},Ns=function(e){return _e(Gi+"RevokeBoardInvitation",{invitationId:e})},Rs=function(e){return _e(Gi+"AcknowledgeInvitation",{invitationId:e})},Ls=function(e,t){return _e(Gi+"RevokeAccessToBoard",{boardId:e,userId:t})},Us=function(e,t,n){return _e(Gi+"ChangeBoardPermissions",{boardId:e,userId:t,boardPermissions:n})},Ds=function(e,t,n){return _e(Gi+"AdminChangeTeamBoardPermissions",{boardId:e,teamId:t,boardPermissions:n})},zs=function(e){return _e(Gi+"UserBoard",{boardId:e})},Ms=function(){return _e(Gi+"UserBoards",{})},Ps=function(e,t){return _e(Gi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON()})},Fs=function(e,t){return _e(Gi+"BoardHistory",{boardId:e,fromBoardVersion:t.toJSON(),mode:"newer"})},Gs=function(e){return _e(Gi+"BoardPermissionsForUsers",{boardId:e})},Hs=function(e){return _e(Gi+"BoardPermissionsForTeams",{boardId:e})},Vs=function(e){return _e(Gi+"OpenBoardInvitations",{boardId:e})},qs=function(e){return _e(Gi+"InvitationBoard",{invitationId:e})},Ws=function(e){return fetch(e).then(function(e){return e.text()})},Ys=function(e,t,n){return function(e,t,n){return Te.post(e,t,{baseURL:"/buckets/boards/",headers:{"Content-Type":n}})}(e,t,n)},Qs=function(e,t,n,r){return function(e,t,n,r){return Te.post("".concat(e,"/").concat(t),n,{baseURL:"/buckets/boards/",headers:{"Content-Type":r}})}(e,t,n,r)},Ks=function(e){return function(e){return Te.delete(e,{baseURL:"/"})}(e)},Js=function(e,t){return _e(Gi+"BoardGraphElements",{boardId:e,type:t})},Zs=function(e){return _e(Gi+"BoardClient",{boardId:e})},Xs=function(e){return _e(Gi+"BoardClientSecret",{boardId:e})},$s=function(e){return _e(Gi+"CreateBoardClient",{boardId:e})},eu=function(e){return _e(Gi+"RemoveBoardClient",{boardId:e})},tu=function(e){return _e(Gi+"ResetBoardClientSecret",{boardId:e})},nu=function(e){return _e(Gi+"StickyTemplates",{boardId:e})},ru=function(e,t,n){return _e(Gi+"SetStickyTemplate",{boardId:e,cellType:t,template:n})},au=function(e,t,n,r){return _e(Gi+"UpdateStickyAdvancedConfig",Object(Ye.a)({boardId:e,cellType:t,templateType:n},r?{templateSchema:r}:{}))},ou=function(e,t){return _e(Gi+"MoveUserBoardToOrganization",{organizationId:e,boardId:t})},iu=function(e,t){return Object(et.action)(Yi,{board:e,history:t})},cu=function(e){return Object(et.action)(Qi,e)},su=function(e){return Object(et.action)(Ki,e)},uu=function(e){return Object(et.action)(Ji,{snapshot:e})},du=function(e,t){return Object(et.action)(Zi,{boardId:e,writeAccess:t})},lu=function(e){return Object(et.action)(cc,{boardId:e})},mu=function(e){return Object(et.action)(sc,{boardId:e})},pu=function(e,t){return Object(et.action)(uc,{boardId:e,visible:t})},fu=function(e,t){return Object(et.action)(dc,{boardId:e,visible:t})},bu=function(e,t){return Object(et.action)(lc,{boardId:e,visible:t})},hu=function(e,t){return Object(et.action)(mc,{boardId:e,visible:t})},gu=function(e,t){return Object(et.action)(pc,{boardId:e,entries:t})},vu=function(e,t){return Object(et.action)(fc,{boardId:e,entries:t})},yu=function(e){return Object(et.action)(bc,{boardId:e})},Ou=function(e,t){return Object(et.action)(gc,{boardId:e,boardVersion:t})},Eu=function(e){return Object(et.action)(hc,{boardId:e})},ku=function(e){return Object(et.action)(vc,{boardId:e})},Iu=function(e,t){return Object(et.action)(yc,{boardId:e,loading:t})},xu=function(e){return Object(et.action)(Cc,{filter:e})},ju=function(e){return Object(et.action)(wc,{hide:e})},Tu=function(e){return Object(et.action)(_c,{hide:e})},Su=function(e,t,n){return Object(et.action)(Ac,{boardId:e,filter:t,focus:n})},Cu=function(e,t){return Object(et.action)(Hi,{board:e,graph:t})},wu=function(e){return Object(et.action)(Vi,{board:e})},_u=function(e,t,n){return Object(et.action)(qi,{boardName:e,boardXml:t,boardId:n})},Au=function(e){return Object(et.action)(Wi,{board:e})},Bu=function(e){return Object(et.action)(Xi,{boardId:e})},Nu=function(e){return Object(et.action)($i,{boardId:e})},Ru=function(e){return Object(et.action)(ec,{boardId:e})},Lu=function(e,t,n){return Object(et.action)(Nc,{boardId:e,userId:t,username:n})},Uu=function(e,t,n){return Object(et.action)(tc,{boardId:e,email:t,permissions:n})},Du=function(e){return Object(et.action)(nc,{invitationId:e})},zu=function(e){return Object(et.action)(rc,{invitationId:e})},Mu=function(e,t){return Object(et.action)(ac,{boardId:e,userId:t})},Pu=function(e,t,n){return Object(et.action)(oc,{boardId:e,userId:t,permissions:n})},Fu=function(e,t,n){return Object(et.action)(ic,{boardId:e,teamId:t,permissions:n})},Gu=function(e){return Object(et.action)(Rc,{boardId:e})},Hu=function(e){return Object(et.action)(Mc,{boardChanged:e})},Vu=function(e){return Object(et.action)(Pc,{events:e})},qu=function(e,t){return Object(et.action)(Oc,{boardId:e,elements:t})},Wu=function(e){return Object(et.action)(Ec,{boardId:e})},Yu=function(e){return Object(et.action)(kc,{boardId:e})},Qu=function(e){return Object(et.action)(Ic,{boardId:e})},Ku=function(e,t,n,r){return Object(et.action)(xc,{boardId:e,cellType:t,template:n,disableNotification:r})},Ju=function(e,t,n,r,a){return Object(et.action)(jc,{boardId:e,cellType:t,templateType:n,templateSchema:r,disableNotification:a})},Zu=function(e,t,n){return Object(et.action)(Tc,{boardId:e,stickyTemplates:t,finishedCb:n})},Xu=function(e,t){return Object(et.action)(Bc,{organizationId:e,boardId:t})},$u=function(e){return Object(et.action)(Lc,{event:e})},ed=function(e){return Object(et.action)(Dc,{boardChanged:e})},td=function(e){return Object(et.action)(zc,{socketCmd:e})},nd=function(e){return Object(et.action)(Vc,{boardId:e})},rd=function(e,t,n){return Object(et.action)(qc,{boardId:e,board:t,graph:n})},ad=function(e){return Object(et.action)(Wc,{boardId:e})},od=function(e,t){return Object(et.action)(Yc,{board:e,graph:t})},id=function(){return Object(et.action)(hs)},cd=function(e,t,n){return Object(et.action)(Qc,{boardId:e,board:t,graph:n})},sd=function(e){return Object(et.action)(Kc,{boardInvitation:e})},ud=function(e){return Object(et.action)(Jc,{boardInvitation:e})},dd=function(e){return Object(et.action)(Zc,{boardInvitation:e})},ld=function(e,t){return Object(et.action)(Xc,{boardId:e,userId:t})},md=function(e,t,n){return Object(et.action)($c,{boardId:e,userId:t,permissions:n})},pd=function(e){return Object(et.action)(es,e)},fd=function(e){return Object(et.action)(ts,{boardPermissions:e})},bd=function(e){return Object(et.action)(ns,{boardPermissions:e})},hd=function(e){return Object(et.action)(rs,{boardInvitations:e})},gd=function(e,t){return Object(et.action)(as,{boardId:e,element:t})},vd=function(e,t,n){return Object(et.action)(os,{boardId:e,elementId:t,label:n})},yd=function(e,t,n){return Object(et.action)(is,{boardId:e,elementId:t,metadata:n})},Od=function(e,t){return Object(et.action)(cs,{boardId:e,elements:t})},Ed=function(e,t){return Object(et.action)(ss,{boardId:e,client:t})},kd=function(e){return Object(et.action)(us,{boardId:e})},Id=function(e,t){return Object(et.action)(ds,{boardId:e,clientSecret:t})},xd=function(e){return Object(et.action)(ls,{stickyTemplates:e})},jd=function(e){return Object(et.action)(ms,{stickyTemplate:e})},Td=function(e){return Object(et.action)(ps,{stickyTemplate:e})},Sd=function(e){return Object(et.action)(fs,{stickyTemplates:e})},Cd=function(e){return Object(et.action)(bs,e)},wd=function(){return Object(et.action)(gs)},_d=function(){return Object(et.action)(vs)},Ad=function(e){return Object(et.action)(ys,{boardId:e})},Bd=function(e){return Object(et.action)(Os,{boardId:e})},Nd=function(e){return Object(et.action)(Es,{boardId:e})},Rd=function(e){return Object(et.action)(ks,{boardId:e})},Ld=function(e,t){return Object(et.action)(Is,{boardId:e,type:t})},Ud=function(e){return Object(et.action)(xs,{boardId:e})},Dd=function(e){return Object(et.action)(js,{boardId:e})},zd=function(e){return Object(et.action)(Ts,{boardId:e})},Md={userId:"",version:0,head:!1},Pd=function(e){function t(e){return Object(Be.a)(this,t),void 0!==e.head&&null!==e.head||(e.head=!1),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isHead",value:function(){return this.head||!1}},{key:"asHead",value:function(){return this.set("head",!0)}},{key:"equals",value:function(e){return this.userId===e.userId&&this.version===e.version}},{key:"isNewerThan",value:function(e){return this.userId!==e.userId||this.version>e.version}}]),t}(Object(be.Record)(Md)),Fd={uid:"",name:"",version:new Pd(Md),xml:null,lastModified:(new Date).toISOString(),inDeletion:!1,shouldImport:!1,shouldExport:!1,shouldShowHistory:!1,shouldShowElementDetails:!1,shouldShowCodyConsole:!1,shouldShowTimerModal:!1,shared:!1,detailsFetched:!1,sharedWith:Object(be.List)(),assignedTeams:Object(be.List)(),writeAccess:!1,example:!1,owner:null,creator:null,organization:null},Gd=function(e,t){return new Hd({uid:"",name:t,version:new Pd({userId:e,version:1}),xml:null,lastModified:void 0,inDeletion:!1,shared:!1,detailsFetched:!0,sharedWith:Object(be.List)(),assignedTeams:Object(be.List)(),writeAccess:!0,example:!1,owner:null,creator:e,organization:null})},Hd=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),void 0===e.xml&&(e.xml=null),void 0===e.lastModified&&(e.lastModified=(new Date).toISOString()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"updateXmlAndVersionFromBoard",value:function(e){var t=this.set("xml",e.xml);return t=(t=t.set("version",e.version)).set("lastModified",e.lastModified)}},{key:"updateXmlFromSnapshot",value:function(e){var t=this.set("xml",e.xml);return t=t.set("version",e.boardVersion)}},{key:"updateXml",value:function(e,t){var n=this.set("xml",e);return n=(n=n.set("lastModified",(new Date).toISOString())).set("version",new Pd({userId:t,version:this.version.version+1}))}},{key:"updateXmlAfterRemoteChange",value:function(e,t){var n=this.set("xml",e);return n=n.set("version",t)}},{key:"syncSummaryInfo",value:function(e){var t=this.set("sharedWith",e.sharedWith);return(t=(t=t.set("assignedTeams",e.assignedTeams)).set("owner",e.owner)).set("example",e.example)}},{key:"isCreator",value:function(e){return this.get("creator")===e}},{key:"moveToOrganization",value:function(e){var t=this.set("creator",this.get("owner"));return(t=t.set("owner",null)).set("organization",e)}}]),t}(Object(be.Record)(Fd));!function(e){e.event="event",e.command="command",e.role="role",e.projection="projection",e.aggregate="aggregate",e.document="document",e.policy="policy",e.hotSpot="hotSpot",e.externalSystem="externalSystem",e.ui="ui",e.feature="feature",e.boundedContext="boundedContext",e.freeText="freeText",e.textCard="textCard",e.edge="edge",e.misc="misc",e.icon="icon",e.image="image",e.layer="layer"}(gi||(gi={}));var Vd,qd,Wd=function e(t,n){return n||(n=[]),t.forEach(function(t){n.push(t),t.children().count()>0&&e(t.children().toJS(),n)}),n},Yd=function(e,t){return new $d(e,t)},Qd=function(e){return new tl(e)},Kd=function(e,t){return e.getType()===gi.boundedContext&&t.getType()!==gi.boundedContext?-1:t.getType()===gi.boundedContext&&e.getType()!==gi.boundedContext?1:e.getType()===gi.feature&&t.getType()!==gi.feature?-1:t.getType()===gi.feature&&e.getType()!==gi.feature?1:e.getName()<t.getName()?-1:t.getName()<e.getName()?1:0},Jd=function(e){return{id:e.getId(),name:e.getName(),type:e.getType(),link:e.getLink(),tags:e.getTags(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?ol(e.getParent(),e):null,childrenList:e.children().map(rl),sourcesList:e.getSources().map(al),targetsList:e.getTargets().map(al),geometry:new Zd(e.getGeometry()),metadata:e.getMetadata()}},Zd=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),t}(Object(be.Record)({x:0,y:0})),Xd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;Object(Be.a)(this,e),this.mxcell=void 0,this.mxgraphModel=void 0,this.id=null,this.root=null,this.name=null,this.type=null,this.tags=null,this.layer=!1,this.parentCache=void 0,this.childrenCache=null,this.sourcesCache=null,this.targetsCache=null,this.metadataCache=void 0,this.deepLinkFactory=void 0,this.mxcell=t,this.mxgraphModel=n,this.layer=r,this.root=t.getId()===MXGRAPH_ROOT_UUIDS[1],this.deepLinkFactory=a}return Object(Ne.a)(e,[{key:"getId",value:function(){return null===this.id&&(this.id=this.mxcell.getId()),this.id}},{key:"getName",value:function(){return null===this.name&&(this.name=inspectioUtils.getLabelText(this.mxcell),this.isDefaultLayer()&&""===this.name&&(this.name="Board")),this.name}},{key:"getType",value:function(){if(null!==this.type)return this.type;var e=inspectioUtils.getTypeInclEdge(this.mxcell);return e||(e=gi.misc),e===sl.multiple&&(e=gi.misc),this.isLayer()&&(e=gi.layer),this.type=e,this.type}},{key:"getLink",value:function(){return this.isLayer()?null:this.root?null:this.deepLinkFactory?this.deepLinkFactory(this.getId()):null}},{key:"getTags",value:function(){return null!==this.tags?this.tags:Object(be.List)(inspectioUtils.getTags(this.mxcell))}},{key:"getParent",value:function(){return"undefined"===typeof this.parentCache&&(this.parentCache=this.isLayer()||null===this.mxcell.getParent()?null:new e(this.mxcell.getParent(),this.mxgraphModel,this.mxgraphModel.getChildren(this.mxgraphModel.root).includes(this.mxcell.getParent()),this.deepLinkFactory)),this.parentCache}},{key:"children",value:function(){var t=this;if(null!==this.childrenCache)return this.childrenCache;var n=this.mxgraphModel.getChildren(this.mxcell);n||(n=[]);var r=Object(be.List)(n);return this.childrenCache=r.map(function(n){return new e(n,t.mxgraphModel,!!t.root,t.deepLinkFactory)}),this.childrenCache}},{key:"setChildren",value:function(e){return this.childrenCache=e,this}},{key:"getSources",value:function(){var t=this;if(null!==this.sourcesCache)return this.sourcesCache;var n=Object(be.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(r){r&&r.source&&r.source.getId()!==t.mxcell.getId()&&(n=n.push(new e(r.source,t.mxgraphModel,!1,t.deepLinkFactory)))}),this.sourcesCache=n,n):n}},{key:"getTargets",value:function(){var t=this;if(null!==this.targetsCache)return this.targetsCache;var n=Object(be.List)();return this.mxcell.isVertex()&&this.mxcell.edges?(this.mxcell.edges.forEach(function(r){r&&r.target&&r.target.getId()!==t.mxcell.getId()&&(n=n.push(new e(r.target,t.mxgraphModel,!1,t.deepLinkFactory)))}),this.targetsCache=n,n):n}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.isLayer()&&this.mxcell.getId()===MXGRAPH_ROOT_UUIDS[0]}},{key:"getGeometry",value:function(){return this.mxcell.geometry?new Zd({x:this.mxcell.geometry.x,y:this.mxcell.geometry.y}):{x:0,y:0}}},{key:"getMetadata",value:function(){if("undefined"===typeof this.metadataCache){var e=inspectioUtils.getMetadata(this.mxcell);this.metadataCache=e||null}return this.metadataCache}}]),e}(),$d=function(){function e(t,n){Object(Be.a)(this,e),this.mxgraph=void 0,this.editorUi=void 0,this.orgLayerVisibility={},this.mxgraph=t,this.editorUi=n}return Object(Ne.a)(e,[{key:"getCurrentScale",value:function(){return this.mxgraph.getCurrentScale()}},{key:"getCurrentTranslate",value:function(){return this.mxgraph.getCurrentTranslate()}},{key:"onPanning",value:function(e){this.mxgraph.onPanning(e)}},{key:"offPanning",value:function(e){this.mxgraph.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.mxgraph.translateMousePoint(e,t)}},{key:"onZoom",value:function(e){this.mxgraph.onZoom(e)}},{key:"offZoom",value:function(e){this.mxgraph.offZoom(e)}},{key:"getRoot",value:function(){var e=this.mxgraph.getModel();return rl(new Xd(e.getRoot(),e))}},{key:"openLayersDialog",value:function(){this.editorUi.actions.get("layers").funct()}},{key:"triggerCody",value:function(){this.mxgraph.triggerCody()}},{key:"hasUserLevelVisibilityChanges",value:function(){return Object.keys(this.orgLayerVisibility).length>0}},{key:"isVisible",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());return t&&this.mxgraph.getModel().isVisible(t)}},{key:"setUserVisible",value:function(e,t){var n=this,r=this.mxgraph.getModel().getCell(e.getId());if(r){this.mxgraph.model.beginUpdate();try{if(this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,r,t)),!inspectioUtils.isContainer(r)&&!e.isLayer())this.mxgraph.getAllEdges([r]).forEach(function(e){t?(e.source&&e.source!==r&&n.mxgraph.getModel().isVisible(e.source)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t)),e.target&&e.target!==r&&n.mxgraph.getModel().isVisible(e.target)&&n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))):n.mxgraph.model.execute(new mxVisibleChange(n.mxgraph.model,e,t))})}finally{this.mxgraph.model.endUpdate()}}else{if(this.orgLayerVisibility.hasOwnProperty(r.getId())||(this.orgLayerVisibility[r.getId()]=this.isVisible(e)),r){this.mxgraph.enableLazyTextPaint(),this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{this.mxgraph.getModel().setVisible(r,t)}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}this.mxgraph.disableLazyTextPaint()}window.setTimeout(function(){t&&(e.isLayer()?(n.mxgraph.zoom(.2,!0),n.mxgraph.showAll(r),n.mxgraph.scrollCellsIntoView(n.mxgraph.model.getChildren(r))):n.mxgraph.scrollCellsIntoView([r]))},200)}}},{key:"applyVisibilityGlobally",value:function(){if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdate();try{for(var e in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(e)){var t=this.mxgraph.model.getCell(e);t&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,t,this.mxgraph.model.isVisible(t)))}this.orgLayerVisibility={}}finally{this.mxgraph.model.endUpdate()}}}},{key:"isLocked",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());if(!t)return!1;var n=this.mxgraph.view.getState(t),r=null!=n?n.style:this.mxgraph.getCellStyle(t);return"1"===mxUtils.getValue(r,"locked","0").toString()}},{key:"setLocked",value:function(e,t){var n=this.mxgraph.getModel().getCell(e.getId());if(n){var r=this.mxgraph.view.getState(n);null!=r?r.style:this.mxgraph.getCellStyle(n);this.mxgraph.getModel().beginUpdate();try{this.mxgraph.setCellStyles("locked",t?"1":null,[n])}finally{this.mxgraph.getModel().endUpdate()}t&&this.mxgraph.removeSelectionCells(this.mxgraph.getModel().getDescendants(n))}}},{key:"deleteElement",value:function(e){var t=this.mxgraph.model.getCell(e.getId());t&&this.mxgraph.removeCells([t],!0)}},{key:"addLayer",value:function(e){if(this.mxgraph.isEnabled()){this.mxgraph.model.beginUpdate();try{var t=this.mxgraph.addCell(new mxCell(e),this.mxgraph.model.root);this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"deleteLayer",value:function(e){if(e.isDefaultLayer())throw Error("The default layer cannot be deleted!");var t=this.mxgraph.model.getCell(e.getId()),n=this.isActiveLayer(e);this.mxgraph.model.beginUpdate();try{var r=this.mxgraph.model.root.getIndex(t);this.mxgraph.removeCells([t],!1),n&&(r>0&&r<=this.mxgraph.model.getChildCount(this.mxgraph.model.root)?this.mxgraph.setDefaultParent(this.mxgraph.model.getChildAt(this.mxgraph.model.root,r-1)):this.mxgraph.setDefaultParent(null))}finally{this.mxgraph.model.endUpdate()}}},{key:"isActiveLayer",value:function(e){return this.mxgraph.getDefaultParent().getId()===e.getId()}},{key:"setAsActiveLayer",value:function(e){var t=this.mxgraph.model.getCell(e.getId());if(t){this.mxgraph.model.beginUpdate();try{this.mxgraph.setDefaultParent(t)}finally{this.mxgraph.model.endUpdate()}}}},{key:"setDefaultLayerAsActive",value:function(){this.mxgraph.setDefaultParent(null)}},{key:"highlightLayer",value:function(e){var t=this.mxgraph.getModel().getCell(e.getId());t&&this.mxgraph.model.getChildren(t)&&this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(t))}},{key:"changeNodeName",value:function(e,t){var n=this.mxgraph.model.getCell(e.getId());n&&this.mxgraph.cellLabelChanged(n,t)}},{key:"copySelectionToActiveLayer",value:function(){return!(!this.mxgraph.isEnabled()||this.mxgraph.isSelectionEmpty())&&(this.mxgraph.moveCells(this.mxgraph.getSelectionCells(),0,0,!1,this.mxgraph.getDefaultParent()),!0)}},{key:"exportXmlSnapshot",value:function(){var e={};if(this.hasUserLevelVisibilityChanges()){this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var t in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(t)){var n=this.mxgraph.model.getCell(t);if(n){var r=this.mxgraph.model.isVisible(n);r!==this.orgLayerVisibility[t]&&(e[t]=r,this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,n,this.orgLayerVisibility[t])))}}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}}var a=new mxCodec(mxUtils.createXmlDocument()).encode(this.mxgraph.getModel());0===this.mxgraph.view.translate.x&&0===this.mxgraph.view.translate.y||(a.setAttribute("dx",Math.round(100*this.mxgraph.view.translate.x)/100),a.setAttribute("dy",Math.round(100*this.mxgraph.view.translate.y)/100)),a.setAttribute("grid",this.mxgraph.isGridEnabled()?"1":"0"),a.setAttribute("gridSize",this.mxgraph.gridSize),a.setAttribute("guides",this.mxgraph.graphHandler.guidesEnabled?"1":"0"),a.setAttribute("tooltips",this.mxgraph.tooltipHandler.isEnabled()?"1":"0"),a.setAttribute("connect",this.mxgraph.connectionHandler.isEnabled()?"1":"0"),a.setAttribute("arrows",this.mxgraph.connectionArrowsEnabled?"1":"0"),a.setAttribute("fold",this.mxgraph.foldingEnabled?"1":"0"),a.setAttribute("page",this.mxgraph.pageVisible?"1":"0"),a.setAttribute("pageScale",this.mxgraph.pageScale),a.setAttribute("pageWidth",this.mxgraph.pageFormat.width),a.setAttribute("pageHeight",this.mxgraph.pageFormat.height),null!=this.mxgraph.background&&a.setAttribute("background",this.mxgraph.background);var o=mxUtils.getXml(a);this.mxgraph.model.beginUpdateWithoutChangeNotifications();try{for(var i in this.orgLayerVisibility)if(this.orgLayerVisibility.hasOwnProperty(i)){var c=this.mxgraph.model.getCell(i);c&&this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model,c,e[i]))}}finally{this.mxgraph.model.endUpdateWithoutChangeNotifications()}return o}},{key:"onSelectionChanged",value:function(e){var t=this;this.mxgraph.selectionModel.addListener(mxEvent.CHANGE,function(){t.mxgraph.isSelectionEmpty()?e(!1):e(!0)})}},{key:"setCockpitBaseUrl",value:function(e){this.mxgraph.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.mxgraph.container.focus()}}]),e}(),el=function(){function e(){Object(Be.a)(this,e)}return Object(Ne.a)(e,[{key:"getId",value:function(){return"__EMPTY_LAYER__"}},{key:"getName",value:function(){return"Empty Layer"}},{key:"getType",value:function(){return gi.misc}},{key:"getLink",value:function(){return null}},{key:"getTags",value:function(){return Object(be.List)()}},{key:"isLayer",value:function(){return!0}},{key:"isDefaultLayer",value:function(){return!1}},{key:"getParent",value:function(){return null}},{key:"children",value:function(){return Object(be.List)()}},{key:"getSources",value:function(){return Object(be.List)()}},{key:"getTargets",value:function(){return Object(be.List)()}},{key:"getMetadata",value:function(){return null}},{key:"setChildren",value:function(e){return this}},{key:"getGeometry",value:function(){return{x:0,y:0}}}]),e}(),tl=function(){function e(t){Object(Be.a)(this,e),this.boardXml=void 0,t||(t=""),this.boardXml=t}return Object(Ne.a)(e,[{key:"getCurrentScale",value:function(){return 1}},{key:"getCurrentTranslate",value:function(){return{x:0,y:0}}},{key:"onPanning",value:function(e){}},{key:"offPanning",value:function(e){}},{key:"translateMousePoint",value:function(e,t){return{x:e,y:t}}},{key:"onZoom",value:function(e){}},{key:"offZoom",value:function(e){}},{key:"getRoot",value:function(){return new el}},{key:"openLayersDialog",value:function(){}},{key:"triggerCody",value:function(){}},{key:"hasUserLevelVisibilityChanges",value:function(){return!1}},{key:"isVisible",value:function(e){return!1}},{key:"setUserVisible",value:function(e,t){}},{key:"applyVisibilityGlobally",value:function(){}},{key:"isLocked",value:function(e){return!1}},{key:"setLocked",value:function(e,t){}},{key:"deleteElement",value:function(e){}},{key:"addLayer",value:function(e){}},{key:"deleteLayer",value:function(e){}},{key:"isActiveLayer",value:function(e){return!1}},{key:"setAsActiveLayer",value:function(e){}},{key:"setDefaultLayerAsActive",value:function(){}},{key:"highlightLayer",value:function(e){}},{key:"changeNodeName",value:function(e,t){}},{key:"copySelectionToActiveLayer",value:function(){return!1}},{key:"exportXmlSnapshot",value:function(){return this.boardXml}},{key:"onSelectionChanged",value:function(e){}},{key:"setCockpitBaseUrl",value:function(e){}},{key:"focus",value:function(){}}]),e}(),nl={id:"",name:"",type:gi.misc,link:null,tags:Object(be.List)(),layer:!1,defaultLayer:!1,parent:null,childrenList:Object(be.List)(),sourcesList:Object(be.List)(),targetsList:Object(be.List)(),geometry:{x:0,y:0},metadata:null},rl=function e(t){return new il({id:t.getId(),name:t.getName(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?ol(t.getParent(),t):null,childrenList:t.children().map(e),sourcesList:t.getSources().map(al),targetsList:t.getTargets().map(al),geometry:new Zd(t.getGeometry()),metadata:t.getMetadata()})},al=function(e){return new il({id:e.getId(),name:e.getName(),type:e.getType(),link:e.getLink(),tags:e.getTags(),layer:e.isLayer(),defaultLayer:e.isDefaultLayer(),parent:e.getParent()?ol(e.getParent(),e):null,childrenList:e.children().map(rl),sourcesList:Object(be.List)(),targetsList:Object(be.List)(),geometry:new Zd(e.getGeometry()),metadata:e.getMetadata()})},ol=function e(t,n){return new il({id:t.getId(),name:t.getName(),type:t.getType(),link:t.getLink(),tags:t.getTags(),layer:t.isLayer(),defaultLayer:t.isDefaultLayer(),parent:t.getParent()?e(t.getParent(),t):null,childrenList:Object(be.List)(),sourcesList:Object(be.List)(),targetsList:Object(be.List)(),geometry:new Zd(t.getGeometry()),metadata:t.getMetadata()})},il=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"getLink",value:function(){return this.link}},{key:"getTags",value:function(){return this.tags}},{key:"isLayer",value:function(){return this.layer}},{key:"isDefaultLayer",value:function(){return this.defaultLayer}},{key:"getParent",value:function(){return this.parent}},{key:"children",value:function(){return this.childrenList}},{key:"getSources",value:function(){return this.sourcesList}},{key:"getTargets",value:function(){return this.targetsList}},{key:"getGeometry",value:function(){return this.geometry}},{key:"getMetadata",value:function(){return this.metadata}},{key:"setChildren",value:function(e){return this.set("childrenList",e)}}]),t}(Object(be.Record)(nl));!function(e){e.added="added",e.edited="edited",e.deleted="deleted",e.moved="moved"}(Vd||(Vd={})),function(e){e.multiple="multiple"}(qd||(qd={}));var cl,sl=Object(Ye.a)({},gi,qd),ul={userId:"",username:"",boardId:"",boardVersion:new Pd(Md),action:Vd.edited,cellType:sl.misc,label:"",date:"",cellId:void 0},dl=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),t}(Object(be.Record)(ul)),ll=function(e,t){return new dl({action:e.action,cellType:e.cellType,label:e.cellLabel,userId:t.userId,username:t.username,boardId:e.board,boardVersion:e.toBoardVersion(),date:e.recordedAt,cellId:e.cellId})},ml={uid:"",name:"BoardChanged",board:"",changeSet:Object(be.List)(),version:0,recordedAt:"",userId:"",action:Vd.edited,cellType:sl.misc,cellLabel:"",cellId:void 0},pl=function(e){var t=Object(Ye.a)({},e,{changeSet:Object(be.List)(e.changeSet)});return new hl(t)},fl=function(e,t,n,r,a,o,i,c){return new hl({uid:"",name:ml.name,board:e,changeSet:t,version:n,recordedAt:"",userId:r,action:a,cellType:o,cellLabel:i,cellId:c})},bl=function(e){return pl({uid:e.patchId,board:e.boardId,name:ml.name,changeSet:e.patch,version:e.boardVersion.version,userId:e.boardVersion.userId,recordedAt:e.recordedAt,action:e.action,cellId:null!==e.cellId?e.cellId:void 0,cellType:e.cellType,cellLabel:e.cellLabel})},hl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),""===e.recordedAt&&(e.recordedAt=(new Date).toISOString()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"toBoardVersion",value:function(){return new Pd({userId:this.userId,version:this.version})}}]),t}(Object(be.Record)(ml));!function(e){e.event="event"}(cl||(cl={}));var gl={uid:"",aggregateType:"BoardGraphElement",name:"",parentId:null,type:cl.event,children:void 0,sources:void 0,targets:void 0},vl=function(e){var t=An(e,[Dn("id"),"id missing"],[Dn("name"),"name missing in "+e.id],[Dn("parentId"),"parentId missing in "+e.id],[Dn("type"),"type missing in "+e.id]);return Sn(t)?t:_n(new yl({uid:e.id,aggregateType:"BoardGraphElement",name:e.name,parentId:e.parentId,type:e.type,sources:e.sources||void 0,targets:e.targets||void 0,children:e.children||void 0}))},yl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(gl)),Ol={uid:"",aggregateType:"BoardInvitation",boardId:"",invitedUserEmail:"",invitingUser:"",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},status:"pending",resendAttempts:0},El=function(e){var t=An(e,[Dn("invitationId"),"invitationId missing"],[Dn("boardId"),"boardId missing in "+e.permissionsId],[Dn("invitedUserEmail"),"invitedUserEmail missing in "+e.permissionsId],[Dn("invitingUser"),"invitingUser missing in "+e.permissionsId],[Dn("permissions"),"permissions missing in "+e.permissionsId],[Dn("status"),"status missing in "+e.permissionsId]);return Sn(t)?t:_n(new kl(Object(Ye.a)({},Ol,e,{uid:e.invitationId})))},kl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status","revoked")}}]),t}(Object(be.Record)(Ol)),Il={uid:"",aggregateType:"BoardPermission",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},teamId:"",boardId:""},xl=function(e){var t=An(e,[Dn("permissionsId"),"permissionsId missing"],[Dn("permissions"),"permissions missing in "+e.permissionsId],[Dn("teamId"),"teamId missing in "+e.permissionsId],[Dn("boardId"),"boardId missing in "+e.permissionsId]);return Sn(t)?t:_n(new jl({uid:e.permissionsId,aggregateType:"BoardPermission",permissions:e.permissions,teamId:e.teamId,boardId:e.boardId}))},jl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"changePermissions",value:function(e){return this.set("permissions",e)}}]),t}(Object(be.Record)(Il)),Tl={uid:"",aggregateType:"BoardPermissionForUser",permissions:{adminAccess:!1,readAccess:!1,writeAccess:!1},userId:"",boardId:""},Sl=function(e){var t=An(e,[Dn("permissionsId"),"permissionsId missing"],[Dn("permissions"),"permissions missing in "+e.permissionsId],[Dn("userId"),"userId missing in "+e.permissionsId],[Dn("boardId"),"boardId missing in "+e.permissionsId]);return Sn(t)?t:_n(new Cl({uid:e.permissionsId,aggregateType:"BoardPermissionForUser",permissions:e.permissions,userId:e.userId,boardId:e.boardId}))},Cl=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(Tl)),wl={boardId:"",xml:"",boardVersion:new Pd(Md)},_l=function(e){function t(e){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(wl)),Al=Object(De.b)()(Object(Di.reduxForm)({form:"AddBoardForm"})(function(e){return ye.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ye.a.createElement("div",{className:"field"},ye.a.createElement(Di.Field,{name:"name",component:"input",type:"text",placeholder:e.t("insp.board.form.board_name"),autoFocus:!0})),ye.a.createElement(Ri.a,{primary:!0,type:"submit"},e.t("insp.board.form.btn_add_save")))})),Bl=function(e,t){return Object(be.List)(e.getIn([qo,"UserOrganizationInfo"]).toIndexedSeq().toArray())||Object(be.List)()},Nl=function(e){return Object(pt.a)([Bl],function(t){return t.filter(function(t){return t.userId===e})})},Rl=function(){return Object(pt.a)([Bl,_.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})})},Ll="@@api/ConnectSocket",Ul="@@api/DisconnectSocket",Dl="@@api/SocketConnected",zl="@@api/SocketConnected",Ml="@@api/SocketConnectionLost",Pl="@@api/SendSocketCmd",Fl="@@api/ListenOnSocketChannel",Gl="@@api/StopListeningOnSocketChannel",Hl=2e3,Vl=function(){return Object(et.action)(Ll)},ql=function(){return Object(et.action)(Ul)},Wl=function(){return Object(et.action)(Dl)},Yl=function(){return Object(et.action)(zl)},Ql=function(e){return Object(et.action)(Ml,{reason:e})},Kl=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hl;return Object(et.action)(Pl,{name:e,data:t,responseActionType:n,metadata:r,timeout:a})},Jl=function(e,t,n){return Object(et.action)(e,{socketCmd:t,metadata:n})},Zl=function(e,t,n){return Object(et.action)(e,{socketCmd:t,metadata:n})},Xl=function(e,t,n){return Object(et.action)(e,{socketCmd:t,metadata:n})},$l=function(e,t,n){return Object(et.action)(Fl,{channelName:e,emitActionType:t,metadata:n})},em=function(e){return Object(et.action)(Gl,{channelName:e})},tm=function(e,t,n){return Object(et.action)(e,{event:t,metadata:n})},nm=function(e){return"success"===e.type},rm=function(e){return"pending"===e.type},am=function(e){return"error"===e.type},om="connected",im="connecting",cm="disconnected",sm="disconnecting",um="connectionLost",dm={status:cm},lm=function(e){return new fm({status:e})},mm=function(){return new fm({status:cm})},pm=function(e){switch(e){case om:case im:case cm:case um:case sm:break;default:throw new Error('Invalid socket status "'+e+'" provided')}},fm=function(e){function t(e){return Object(Be.a)(this,t),pm(e.status),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"isConnected",value:function(){return this.status===om}},{key:"isDisconnected",value:function(){return this.status===cm}},{key:"isConnecting",value:function(){return this.status===im}},{key:"isDisconnecting",value:function(){return this.status===sm}},{key:"hasConnectionLost",value:function(){return this.status===um}},{key:"equals",value:function(e){return this.status===e.status}}]),t}(Object(be.Record)(dm)),bm=n(521),hm="@@Auth/Authenticate",gm="@@Auth/UserAuthenticated",vm=function(e){return Object(et.action)(hm,{auth:e})},ym=function(e){return Object(et.action)(gm,{kc:e})},Om=pn.a.mark(km),Em=function(e){return new Promise(function(t,n){return e.success(function(e){return t(e)}).error(function(e){return n(e)})})};function km(){var e,t,n,r,a,o;return pn.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(fn.k)([q.USER_AUTHENTICATED]);case 2:return e=c.sent,t=0,n=e.payload.kc,c.prev=5,c.next=8,Ie(n.token);case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(5),c.next=14,Em(n.login());case 14:return c.next=16,Em(n.loadUserProfile());case 16:return r=c.sent,c.next=19,Object(fn.i)(_.currentUserSelector,void 0);case 19:return a=(a=(a=c.sent).set("uid",n.tokenParsed.sub)).set("name",r.username),o=r.attributes,a=o.display_name?a.set("displayName",o.display_name[0]):a.set("displayName",r.username),a=o.avatar_url&&""!==o.avatar_url[0]?a.set("avatarUrl",o.avatar_url[0]):a.set("avatarUrl",a.generateDefaultAvatarUrl()),o.company_name&&(a=a.set("companyName",o.company_name[0])),o.job_title&&(a=a.set("jobTitle",o.job_title[0])),a=(a=(a=(a=(a=(a=a.set("email",r.email)).set("givenName",r.firstName)).set("familyName",r.lastName)).set("roles",v.fromToken(n.resourceAccess.inspectio.roles))).set("account",b.fromUserToken(n.resourceAccess.inspectio.roles))).set("signedIn",!0),c.next=35,Object(fn.g)(f.Command.signIn(a));case 35:return c.next=37,Object(fn.g)(W.authenticate({token:n.token}));case 37:return c.next=40,Object(fn.e)(1e4);case 40:return c.prev=40,c.next=43,Em(n.updateToken(31));case 43:if(!1!==c.sent){c.next=46;break}return c.abrupt("continue",37);case 46:return c.prev=46,c.next=49,Ie(n.token);case 49:we(n.token),c.next=56;break;case 52:return c.prev=52,c.t1=c.catch(46),c.next=56,Em(n.login());case 56:return c.next=58,Object(fn.g)(W.authenticate({token:n.token}));case 58:if(!(t>0)){c.next=61;break}return c.next=61,Object(fn.g)(i.Command.info("Authorization established","You will be able to work ahead."));case 61:t=0,c.next=73;break;case 64:if(c.prev=64,c.t2=c.catch(40),0!==t){c.next=69;break}return c.next=69,Object(fn.g)(i.Command.error("Authorization error","You will be logged out shortly if connection can not be restored."));case 69:if(!(++t>2)){c.next=73;break}return c.next=73,Em(n.login());case 73:c.next=37;break;case 75:case"end":return c.stop()}},Om,this,[[5,10],[40,64],[46,52]])}var Im=function(){return function(e){return function(e,t){return e.getIn(["auth","auth","token"])}(e)}},xm=pn.a.mark(wm),jm=pn.a.mark(_m),Tm=pn.a.mark(Am),Sm=pn.a.mark(Bm),Cm=pn.a.mark(Nm);function wm(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.k)([Q.Type.USER_AUTHENTICATED]);case 2:return e.sent,e.next=5,Object(fn.f)(_m);case 5:case"end":return e.stop()}},xm,this)}function _m(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0;case 1:return n.next=4,Object(fn.k)([F.CONNECT_SOCKET,F.DISCONNECT_SOCKET]);case 4:e=n.sent,n.t0=e.type,n.next=n.t0===F.CONNECT_SOCKET?8:n.t0===F.DISCONNECT_SOCKET?25:29;break;case 8:return console.log("[Socket Flow] Received ConnectSocket command."),n.next=11,Object(fn.c)(Um);case 11:if(!0!==(t=n.sent)&&null!==t){n.next=20;break}return n.next=15,Object(fn.g)(G.socketConnected());case 15:if(!0!==t){n.next=18;break}return n.next=18,Object(fn.f)(Am);case 18:n.next=24;break;case 20:if(!1!==t){n.next=24;break}return console.warn("[Socket Flow] ConnectSocket command failed. Calling socket.disconnect now."),n.next=24,Object(fn.c)([Ce,Ce.disconnect]);case 24:return n.abrupt("break",29);case 25:return console.log("[Socket Flow] Received DisconnectSocket command."),n.next=28,Object(fn.c)([Ce,Ce.disconnect]);case 28:return n.abrupt("break",29);case 29:n.next=1;break;case 31:return n.prev=31,n.next=34,Object(fn.g)(G.socketConnectionLost("Socket saga cancelled"));case 34:return n.finish(31);case 35:case"end":return n.stop()}},jm,this,[[0,,31,35]])}function Am(){var e,t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("[Socket Flow] Running backgound tasks: listenDisconnectSaga, listenReconnectSaga, handleIO"),r.next=3,Object(fn.f)(Mm);case 3:return e=r.sent,r.next=6,Object(fn.f)(Pm);case 6:return t=r.sent,r.next=9,Object(fn.f)(Nm);case 9:return n=r.sent,r.next=12,Object(fn.k)([F.DISCONNECT_SOCKET]);case 12:return r.sent,console.warn("[Socket Flow] Received DisconnectSocket command. Canceling backgound tasks."),r.next=16,Object(fn.d)(e);case 16:return r.next=18,Object(fn.d)(t);case 18:return r.next=20,Object(fn.d)(n);case 20:case"end":return r.stop()}},Tm,this)}function Bm(e,t){return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:console.log("[Socket Flow] Received action ",e),n.t0=e.type,n.next=n.t0===F.SEND_SOCKET_CMD?4:n.t0===F.LISTEN_ON_SOCKET_CHANNEL?14:n.t0===F.STOP_LISTENING_ON_SOCKET_CHANNEL?18:20;break;case 4:return n.next=6,Object(fn.i)(ee.StatusSelector.makeGetStatus());case 6:if(!n.sent.isConnected()){n.next=12;break}return n.next=10,Object(fn.c)(Gm,e);case 10:n.next=13;break;case 12:console.warn("[Socket Flow] Cannot send socket command: ",e.payload,"Socket is not connected");case 13:return n.abrupt("break",20);case 14:return t.hasOwnProperty(e.payload.channelName)&&Fm(e.payload.channelName,t),n.next=17,Object(fn.f)(Lm,e,t);case 17:return n.abrupt("break",20);case 18:return Fm(e.payload.channelName,t),n.abrupt("break",20);case 20:case"end":return n.stop()}},Sm,this)}function Nm(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e={};case 1:return n.next=4,Object(fn.k)([F.SEND_SOCKET_CMD,F.LISTEN_ON_SOCKET_CHANNEL,F.STOP_LISTENING_ON_SOCKET_CHANNEL]);case 4:return t=n.sent,n.next=7,Object(fn.f)(Bm,t,e);case 7:n.next=1;break;case 9:case"end":return n.stop()}},Cm,this)}var Rm,Lm=pn.a.mark(function e(t,n){var r,a;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("[Socket Flow] Start listening on channel: ",t.payload.channelName),r=Object(bm.c)(function(e){return Ce.on(t.payload.channelName,function(t){e(t)}),Ce.on("error",function(t){e("undefined"!==typeof t?new Error(t.reason):new Error("Unknown error occurred."))}),function(){console.log("[Socket Flow] stop listening on channel, because redux-saga event channel was closed: ",t.payload.channelName),Ce.off(t.payload.channelName)}},bm.a.expanding(10)),n[t.payload.channelName]=r;case 3:return e.prev=4,e.next=7,Object(fn.k)(r);case 7:return a=e.sent,e.next=10,Object(fn.g)(G.emitChannelEvent(t.payload.emitActionType,a,t.payload.metadata));case 10:e.next=18;break;case 12:return e.prev=12,e.t0=e.catch(4),r.close(),e.next=17,Object(fn.g)(G.socketConnectionLost(e.t0.message));case 17:return e.abrupt("return");case 18:e.next=3;break;case 20:case"end":return e.stop()}},e,this,[[4,12]])}),Um=function(){return new Promise(function(e){Ce.connected?e(null):(Ce.on("connect",function(){return e(!0)}),Ce.open())}).then(function(e){return e}).catch(function(e){return!1})},Dm=function(){return new Promise(function(e){Ce.on("reconnect",function(){e(!0)})})},zm=function(){return new Promise(function(e){Ce.on("disconnect",function(t){e(t)})})},Mm=pn.a.mark(function e(){var t;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(fn.c)(zm);case 3:return t=e.sent,console.warn("[Socket Flow] Socket connection lost: ",t),e.next=7,Object(fn.g)(G.socketConnectionLost(t));case 7:e.next=0;break;case 9:case"end":return e.stop()}},e,this)}),Pm=pn.a.mark(function e(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(fn.c)(Dm);case 3:return console.log("[Socket Flow] socket reconnected."),e.next=6,Object(fn.e)(100);case 6:return e.next=8,Object(fn.g)(G.socketConnected());case 8:e.next=0;break;case 10:case"end":return e.stop()}},e,this)}),Fm=function(e,t){t.hasOwnProperty(e)&&(console.log("[Socket Flow] Stop listening on channel: ",e),t[e].close(),delete t[e])},Gm=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.g)(G.notifySocketCmdSent(t.payload.responseActionType,{name:t.payload.name,type:"pending",payload:t.payload.data},t.payload.metadata));case 2:return e.prev=2,e.next=5,Object(fn.i)(Z.AuthSelector.makeTokenSelector());case 5:return n=e.sent,e.next=8,Object(fn.h)({ack:Object(fn.c)(Hm,{name:t.payload.name,type:"pending",payload:Object(Ye.a)({},t.payload.data,{token:n})}),timeout:Object(fn.e)(t.payload.timeout)});case 8:if(r=e.sent,a=r.ack,o=r.timeout,!a){e.next=14;break}return e.next=14,Object(fn.g)(G.ackSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"success",payload:t.payload.data},t.payload.metadata));case 14:if(!o){e.next=17;break}return e.next=17,Object(fn.g)(G.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:"Timed out after "+t.payload.timeout+" ms"},t.payload.metadata));case 17:e.next=23;break;case 19:return e.prev=19,e.t0=e.catch(2),e.next=23,Object(fn.g)(G.rejectSocketCmd(t.payload.responseActionType,{name:t.payload.name,type:"error",payload:t.payload.data,reason:e.t0.toString()},t.payload.metadata));case 23:case"end":return e.stop()}},e,this,[[2,19]])}),Hm=function(e){return new Promise(function(t,n){try{if(Ce.disconnected)return void n(new Error("Socket not connected"));Ce.emit(e.name,e.payload,function(){return t(!0)})}catch(r){n(r)}})},Vm=function(e){return e.getIn(["socket","status","status"])},qm=function(){return Object(pt.a)([Vm],function(e){return V.fromtString(e)})},Wm=function(e){return"board_".concat(e,"_hidden")},Ym=function(e){return"update_".concat(e,"_viewed")},Qm=function(e,t){return e.getIn(["inspectioUsers","userSettings"])},Km=function(e,t){return Object(pt.a)([Qm],function(n){return n.has(e)?n.get(e):t})},Jm=function(){return Object(pt.a)([Qm],function(e){return e.toObject()})},Zm=function(){return Object(pt.a)([Qm],function(e){return!!e.get("settings_loaded")})},Xm=function(e,t){return e.getIn(["inspectioBoards","boards",t])},$m=function(e,t){return Xm(e,t.match.params.uid)},ep=function(e,t){return e.getIn(["inspectioBoards","queues",t.match.params.uid])||Object(be.List)()},tp=function(e){return function(t){return Xm(t,e)}},np=function(){return Object(pt.a)([$m],function(e){return e})},rp=function(){return Object(pt.a)([ep],function(e){return e})},ap=function(){var e=_.makeGetCurrentUser();return function(t,n){return{user:e(t,n)}}},op=function(){var e=np();return function(t,n){return{board:e(t,n)}}},ip=function(){var e=np(),t=_.makeGetCurrentUser(),n=ee.StatusSelector.makeGetStatus(),r=rp(),a=Km("lite_mode",!1);return function(o,i){return{board:e(o,i),user:t(o,i),queue:r(o,i),socketStatus:n(o,i),liteMode:a(o,i)}}},cp={history:Object(be.List)(),loading:!1,oldestBoardVersion:void 0,olderPatchesAvailable:!0},sp=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),t}(Object(be.Record)(cp)),up=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","history",t])||new sp}(t,e)}},dp=function(e,t){return Object(be.List)(e.getIn(["inspectioBoards","boards"]).toIndexedSeq().toArray())||Object(be.List)()},lp=function(e,t){return!!e.getIn(["inspectioBoards","loadingBoards"])},mp=function(e,t){return e.getIn(["inspectioBoards","initialBoardListLoaded"])||!1},pp=function(e,t){return e.getIn(["inspectioBoards","overview"])},fp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Rl();return Object(pt.a)([dp,pp,Qm,Si,t],function(t,n,r,a,o){return t=t.filter(function(e){return o?!o.explicitOrganization&&null===e.organization||e.organization===o.organizationId:null===e.organization}),""!==n.filter&&(t=t.filter(function(e){return-1!==e.name.toLowerCase().search(n.filter.toLowerCase())})),!e&&n.allSharedBoardsHidden&&(t=t.filter(function(e){return!e.shared})),!e&&n.allOwnBoardsHidden&&(t=t.filter(function(e){return e.shared})),e||(t=t.filter(function(e){return!0!==r.get(Wm(e.uid))})),t})},bp=function(e){return Object(pt.a)([dp],function(t){return t.filter(function(t){return t.assignedTeams.contains(e)})})},hp=function(){return Object(pt.a)([lp],function(e){return e})},gp=function(){return Object(pt.a)([mp],function(e){return e})},vp=function(){return Object(pt.a)([pp],function(e){return e})},yp=function(){var e=fp(),t=_.makeGetCurrentBoardQuota(),n=hp();return function(r,a){return{boards:e(r,a),userQuota:t(r,a),loading:n(r,a)}}},Op=te.makeMapStateToPropsAddBoard(),Ep=Object(De.b)()(Object(Me.k)(Object(lt.a)(Object(ze.connect)(Op,function(e){return Object(mt.bindActionCreators)({addBoard:N.addBoard},e)}),Object(lt.b)({}))(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ze.useSelector)(Rl());return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.board.add")),ve.createElement(Ni.a.Content,null,e.disabled&&!r&&ve.createElement(Mi.a,{icon:"dollar",warning:!0,content:o&&o.userIsGuest?e.t("insp.user.quota_reached_guest"):o&&o.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")}),!e.disabled&&ve.createElement(Al,{initialValues:Object(be.fromJS)(z.defaultBoardProps),onSubmit:function(t){a(!0),function(e,t){var n=z.createUserBoard(t.user.uid,e.get("name"));t.addBoard(n,t.history)}(t,e)}}),r&&ve.createElement("span",null,"...")))}))),kp=n(1237),Ip=n(1228),xp=n(229),jp=Ep,Tp=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ve.createElement(ve.Fragment,null,ve.createElement("a",{href:"#",className:"ui card event add board",onClick:function(e){e.preventDefault(),a(!0)}},ve.createElement("div",{className:"content",style:{display:"flex",flexDirection:"column",verticalAlign:"middle",textAlign:"center",justifyContent:"center",alignItems:"center"}},ve.createElement("div",null,ve.createElement("button",{className:"ui big circular icon button"},ve.createElement(xp.a,{name:"plus",size:"large"}))),ve.createElement("button",{className:"ui big basic button noborder"},e.t("insp.overview.add_board")))),ve.createElement(jp,{open:r,onClose:function(){a(!1)},disabled:e.disabled}))}),Sp=n(1244),Cp=Object(De.b)()(function(e){return ve.createElement("div",{className:"ui card event"},ve.createElement(Pe.Link,{to:Et(e.board.uid)},ve.createElement("div",{className:"content"},ve.createElement("div",{className:"header"}),ve.createElement("div",{className:"description"},ve.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),ve.createElement("div",{className:"extra"},(e.isAdmin||!e.board.shared)&&ve.createElement(Pe.Link,{to:xt(e.board.uid),className:"ui right floated"},ve.createElement(xp.a,{name:"edit outline",size:"large",link:!0})),!e.isAdmin&&e.board.shared&&ve.createElement(Sp.a,{trigger:ve.createElement(xp.a,{name:"share",size:"large",className:"ui right floated"}),content:e.t("insp.overview.shared_board")}),ve.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},e.t("insp.overview.last_modified")+": "+(t=e.board.lastModified,new Date(t).toLocaleString()))));var t}),wp=function(){return ve.createElement("div",{className:"ui card event"},ve.createElement("div",{className:"content"},ve.createElement("div",{className:"header"}),ve.createElement("div",{className:"description"},ve.createElement(xp.a,{loading:!0,name:"spinner",size:"big"}))))},_p=Object(De.b)()(function(e){return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.hint.new_domain_header")),ve.createElement(Ni.a.Content,null,ve.createElement(Mi.a,{icon:"bullhorn",info:!0,content:ve.createElement("div",null,ve.createElement("p",null,e.t("insp.hint.new_domain_text")),ve.createElement("p",null,ve.createElement(xp.a,{name:"arrow right"}),"\xa0",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))))})))}),Ap=function(e){return ve.createElement("div",{className:"ui card event"},ve.createElement("a",{href:e.board.link},ve.createElement("div",{className:"content"},ve.createElement("div",{className:"header"}),ve.createElement("div",{className:"description"},ve.createElement("span",{style:{width:"100%",wordBreak:"break-word",overflowWrap:"break-word"}},e.board.name)))),ve.createElement("div",{className:"extra"},ve.createElement("span",{style:{color:"rgb(160, 156, 156)",fontSize:"0.9em"}},"Example")))},Bp=re.makeMapStateToPropsBoardOverview(),Np={setBoardToSnapshot:N.setBoardToSnapshot,enqueueBoardChanged:N.enqueueBoardChanged},Rp=Object(lt.a)(Object(ze.connect)(Bp,Np),Object(lt.b)({}))(Object(De.b)()(Object(Me.k)(function(e){var t=Object(ze.useDispatch)(),n=Object(ze.useSelector)(Ci()),r=Object(ze.useSelector)(vi(n.activeOrganization)),a=Object(ze.useSelector)(Zm()),o=Object(ze.useSelector)(Km("show_pb_domain_hint",!1)),i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1];Object(ve.useEffect)(function(){a&&o&&u(!0)},[a,o]);var d=e.boards.filter(function(e){return e.example}),l=!!r&&r.isAdmin(n.uid);return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0,padded:!0},ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(kp.a.Group,{itemsPerRow:4},ve.createElement(Tp,{disabled:0===e.userQuota}),e.loading&&ve.createElement(wp,null),e.boards.filter(function(e){return!e.example}).sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?-1:1}).map(function(t){return ve.createElement(Cp,{key:t.uid,board:t,isAdmin:t.organization?l||t.isCreator(n.uid):t.owner===n.uid,setBoardToSnapshot:e.setBoardToSnapshot,enqueueBoardChanged:e.enqueueBoardChanged})}).toArray()))),(d.count(),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(Ip.a,{horizontal:!0,content:"Example Boards"})))),d.count()>0&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(kp.a.Group,{itemsPerRow:4},d.sortBy(function(e){return e.lastModified},function(e,t){return e===t?0:e>t?-1:1}).map(function(t){return ve.createElement(Cp,{key:t.uid,board:t,isAdmin:!1,setBoardToSnapshot:e.setBoardToSnapshot,enqueueBoardChanged:e.enqueueBoardChanged})}).toArray()))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(kp.a.Group,{itemsPerRow:4},ve.createElement(Ap,{key:"proophboard",board:{name:"Annotated prooph board",link:"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2Fprooph%20board%2520Example.xml"}}),ve.createElement(Ap,{key:"Cody_Tutorial",board:{name:"Cody Tutorial",link:"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fproophboard%2Fexample-boards%2Fmain%2FCody%2520Tutorial.xml"}}),ve.createElement(Ap,{key:"Event_Storming",board:{name:"Event Storming - The Picture",link:"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml"}}),ve.createElement(Ap,{key:"Event_Modeling",board:{name:"Event Modeling",link:"https://free.prooph-board.com/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FEvent%2520Modeling.xml"}}))))),ve.createElement(_p,{open:s,onClose:function(){u(!1),t(Ht("show_pb_domain_hint",!1))}}))}))),Lp=n(1240),Up=n(1233),Dp=n(141),zp=n.n(Dp),Mp=n(1234),Pp=n(1215),Fp=function(e){var t=e.input,n=e.placeholder,r=e.meta,a=r.touched,o=r.error;return ye.a.createElement(Mp.a.Input,Object.assign({},t,{placeholder:n,error:!(!a||!o)}))},Gp=Object(Di.reduxForm)({form:"ConfirmBoardDeletionForm",validate:function(e,t){if(e){var n=(r=t.boardName,function(e){return e===r?void 0:"Name is not correct"})(e.get("confirmedName")||"");if(n)return{confirmedName:n}}var r;return{}}})(function(e){return ye.a.createElement(Mi.a,{error:!0},ye.a.createElement(xp.a,{name:"warning sign"}),e.t("insp.board.really_delete"),ye.a.createElement(Pp.a,null,ye.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ye.a.createElement("div",{className:"field"},ye.a.createElement(Di.Field,{name:"confirmedName",type:"text",component:Fp,placeholder:e.t("insp.board.form.board_name")})),ye.a.createElement(Ri.a,{color:"red",type:"submit",disabled:e.pristine||!e.valid},e.t("app.form.confirm")),ye.a.createElement(Ri.a,{basic:!0,className:"noborder",onClick:function(t){return function(e,t){e.preventDefault(),t.onCancel()}(t,e)}},e.t("app.form.cancel")))))}),Hp=function(e,t){return e.getIn([WO,"boardClients"])},Vp=n(1232),qp=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1];return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(Mi.a,null,ye.a.createElement("p",null,e.t("insp.board.client.notConfigured"),ye.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),e.stopPropagation(),o(!0)}}," ",e.t("insp.board.client.createClient")))),ye.a.createElement(Vp.a,{header:e.t("insp.board.client.createConfirmTitle"),content:e.t("insp.board.client.createConfirmText"),open:a,onCancel:function(){return o(!1)},onConfirm:function(){t(Wu(e.boardId)),o(!1)}}))}),Wp=n(1236),Yp=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ve.useState)(!1),l=Object(Qe.a)(d,2),m=l[0],p=l[1],f=Object(ve.useState)(!1),b=Object(Qe.a)(f,2),h=b[0],g=b[1];Object(ve.useEffect)(function(){e.client&&e.client.clientSecret&&p(!1)},[e.client]);var v=function(){return o(!1)},y=function(){return u(!1)};return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(Wp.a,{unstackable:!0,basic:"very"},ye.a.createElement(Wp.a.Body,null,ye.a.createElement(Wp.a.Row,null,ye.a.createElement(Wp.a.Cell,{style:{width:"150px"}},ye.a.createElement("strong",null,e.t("insp.board.client.clientId"),":")),ye.a.createElement(Wp.a.Cell,null,e.client.clientId),ye.a.createElement(Wp.a.Cell,{style:{width:"125px"}})),ye.a.createElement(Wp.a.Row,null,ye.a.createElement(Wp.a.Cell,null,ye.a.createElement("strong",null,e.t("insp.board.client.clientSecret"),":")),ye.a.createElement(Wp.a.Cell,null,e.client.clientSecret&&ye.a.createElement(ye.a.Fragment,null,e.client.clientSecret,ye.a.createElement(xp.a,{name:h?"clipboard check":"copy",style:{cursor:"pointer",marginLeft:"5px"},title:e.t("insp.board.client.copyToClipboard"),onClick:function(){!function(e,t){var n=document.createElement("input");n.type="text",n.value=e,n.style.position="fixed",n.style.left="-1000px",n.style.top="-1000px",(t||document.body).append(n),n.select(),document.execCommand("copy"),n.parentNode.removeChild(n)}(e.client.clientSecret),g(!0),setTimeout(function(){return g(!1)},2e3)}})),!e.client.clientSecret&&ye.a.createElement("a",{href:"#",onClick:function(n){n.preventDefault(),n.stopPropagation(),t(Dd(e.boardId))}},e.t("insp.board.client.retrieveSecret"))),ye.a.createElement(Wp.a.Cell,{style:{paddingTop:"10px",paddingBottom:"10px"}},ye.a.createElement(Ri.a,{icon:!0,labelPosition:"left",title:e.t("app.form.reset"),onClick:function(){return o(!0)},loading:m,style:e.client.clientSecret?null:{visibility:"hidden"},children:ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(xp.a,{name:"redo"}),e.t("app.form.reset"))}))))),ye.a.createElement(Mi.a,null,ye.a.createElement(Wp.a,{unstackable:!0,basic:"very"},ye.a.createElement(Wp.a.Body,null,ye.a.createElement(Wp.a.Row,null,ye.a.createElement(Wp.a.Cell,null,e.t("insp.board.client.removeText")),ye.a.createElement(Wp.a.Cell,null,ye.a.createElement(Ri.a,{icon:!0,labelPosition:"left",negative:!0,floated:"right",title:e.t("app.form.remove"),onClick:function(){return u(!0)},children:ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(xp.a,{name:"delete"}),e.t("app.form.remove"))})))))),ye.a.createElement(Vp.a,{header:e.t("insp.board.client.resetConfirmTitle"),content:e.t("insp.board.client.resetConfirmText"),open:a,onCancel:v,onConfirm:function(){v(),p(!0),t(Qu(e.boardId))}}),ye.a.createElement(Vp.a,{header:e.t("insp.board.client.removeConfirmTitle"),content:e.t("insp.board.client.removeConfirmText"),open:s,onCancel:y,onConfirm:function(){y(),t(Yu(e.boardId))}}))}),Qp=(Object(De.b)()(function(e){var t,n=Object(ze.useDispatch)(),r=Object(ze.useSelector)((t=e.boardId,Object(pt.a)([Hp],function(e){return e.has(t)?e.get(t):void 0})));return Object(ve.useEffect)(function(){n(Ud(e.boardId))},[e.boardId]),ye.a.createElement("div",{className:"ui segments"},ye.a.createElement("div",{className:"ui segment"},void 0===r&&ye.a.createElement("div",{className:"ui active dimmer"},ye.a.createElement("div",{className:"ui loader"})),ye.a.createElement("h2",{className:"ui header"},e.t("insp.board.client.headline"),ye.a.createElement(zp.a,null,e.t("insp.board.client.description"))),ye.a.createElement("div",null,null===r&&ye.a.createElement(qp,{boardId:e.boardId}),r&&ye.a.createElement(Yp,{boardId:e.boardId,client:r}))))}),n(1247)),Kp=function(e,t,n){return _e(Gi+"AddTeam",{teamId:e,name:t,organizationId:n})},Jp=function(e,t){return _e(Gi+"RenameTeam",{teamId:e,name:t})},Zp=function(e,t){return _e(Gi+"ChangeTeamDescription",{teamId:e,newDescription:t})},Xp=function(e,t,n){return _e(Gi+"InviteUserToTeam",{invitationId:e,teamId:t,invitedUser:n})},$p=function(e){return _e(Gi+"ResendTeamInvitation",{invitationId:e})},ef=function(e){return _e(Gi+"RevokeTeamInvitation",{invitationId:e})},tf=function(e,t){return _e(Gi+"RemoveMemberFromTeam",{teamId:e,memberId:t})},nf=function(e){return _e(Gi+"DeleteTeam",{teamId:e})},rf=function(e,t,n){return _e(Gi+"AdminGrantTeamAccessToBoard",{boardId:e,teamId:t,boardPermissions:n||{readAccess:!0,writeAccess:!0,adminAccess:!1}})},af=function(e,t){return _e(Gi+"AdminRevokeTeamAccessToBoard",{boardId:e,teamId:t})},of=function(){return _e(Gi+"UserTeams",{})},cf=function(e){return _e(Gi+"AcknowledgeTeamInvitation",{invitationId:e})},sf=function(e){return _e(Gi+"InvitationTeam",{invitationId:e})},uf=function(e){return _e(Gi+"OpenTeamInvitations",{teamId:e})},df=function(e,t){return _e(Gi+"MoveTeamToOrganization",{teamId:e,organizationId:t})},lf="@@InspectioTeams/AddTeam",mf="@@InspectioTeams/RenameTeam",pf="@@InspectioTeams/ChangeTeamDescription",ff="@@InspectioTeams/InviteUserToTeam",bf="@@InspectioTeams/ResendTeamInvitation",hf="@@InspectioTeams/RevokeTeamInvitation",gf="@@InspectioTeams/RemoveMemberFromTeam",vf="@@InspectioTeams/FetchUserTeams",yf="@@InspectioTeams/AddTeams",Of="@@InspectioTeams/AdminGrantTeamAccessToBoard",Ef="@@InspectioTeams/AdminRevokeTeamAccessToBoard",kf="@@InspectioTeams/DeleteTeam",If="@@InspectioTeams/TeamAdded",xf="@@InspectioTeams/TeamRenamed",jf="@@InspectioTeams/TeamDescriptionChanged",Tf="@@InspectioTeams/TeamsFetched",Sf="@@InspectioTeams/MemberRemovedFromTeam",Cf="@@InspectioTeams/TeamDeleted",wf="@@InspectioTeams/TeamInvitationsLoaded",_f="@@InspectioTeams/TeamInvitationResent",Af="@@InspectioTeams/TeamInvitationRevoked",Bf="@InspectioBoards/TeamAccessToBoardGranted",Nf="@InspectioBoards/TeamAccessToBoardRevoked",Rf="@@InspectioTeams/MoveTeamToOrganization",Lf="@@InspectioTeams/TeamMovedToOrganization",Uf=function(e,t,n){return Object(et.action)(lf,{teamId:e,teamName:t,organizationId:n})},Df=function(e,t){return Object(et.action)(mf,{teamId:e,newName:t})},zf=function(e,t){return Object(et.action)(pf,{teamId:e,newDescription:t})},Mf=function(e,t,n){return Object(et.action)(ff,{invitationId:e,teamId:t,userEmail:n})},Pf=function(e){return Object(et.action)(bf,{invitationId:e})},Ff=function(e){return Object(et.action)(hf,{invitationId:e})},Gf=function(e,t){return Object(et.action)(gf,{teamId:e,memberId:t})},Hf=function(e){return Object(et.action)(yf,e)},Vf=function(e){return Object(et.action)(kf,{teamId:e})},qf=function(e,t,n){return Object(et.action)(Of,{boardId:e,teamId:t,permissions:n})},Wf=function(e,t){return Object(et.action)(Ef,{boardId:e,teamId:t})},Yf=function(e,t){return Object(et.action)(Rf,{teamId:e,organizationId:t})},Qf=function(e){return Object(et.action)(If,e)},Kf=function(e){return Object(et.action)(xf,e)},Jf=function(e){return Object(et.action)(jf,e)},Zf=function(e){return Object(et.action)(Sf,e)},Xf=function(e){return Object(et.action)(Cf,e)},$f=function(e){return Object(et.action)(wf,e)},eb=function(e){return Object(et.action)(_f,e)},tb=function(e){return Object(et.action)(Af,e)},nb=function(e){return Object(et.action)(Tf,e)},rb=function(e,t){return Object(et.action)(Bf,{boardId:e,teamId:t})},ab=function(e,t){return Object(et.action)(Nf,{boardId:e,teamId:t})},ob=function(e){return Object(et.action)(Lf,e)},ib={uid:"",name:"",description:"",ownerId:"",members:Object(be.List)(),admins:Object(be.List)(),deleted:!0,aggregateType:"Team",isNew:!1,organizationId:null},cb=function(e){var t=An(e,[Dn("teamId"),"teamId missing"],[Dn("name"),"name missing in "+e.teamId],[Dn("description"),"description missing in "+e.teamId],[Dn("ownerId"),"ownerId missing in "+e.teamId],[Dn("members"),"members missing in "+e.teamId],[Dn("admins"),"admins missing in "+e.teamId],[Dn("organizationId"),"organizationId missing in "+e.teamId],[Dn("deleted"),"deleted missing in "+e.teamId]);return Sn(t)?t:_n(new ub({uid:e.teamId,name:e.name,description:e.description,ownerId:e.ownerId,members:Object(be.List)(e.members),admins:Object(be.List)(e.admins),deleted:e.deleted,aggregateType:"Team",isNew:e.isNew||!1,organizationId:e.organizationId||null}))},sb=function(e){return new ub(Object(Ye.a)({},ib,{uid:e,isNew:!0}))},ub=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"rename",value:function(e){return this.set("name",e)}},{key:"changeDescription",value:function(e){return this.set("description",e)}},{key:"removeMember",value:function(e){var t=this.set("members",this.members.filter(function(t){return t!==e}));return t.set("admins",t.admins.filter(function(t){return t!==e}))}},{key:"moveToOrganization",value:function(e){return this.set("organizationId",e)}},{key:"isAdmin",value:function(e){return this.ownerId===e||this.admins.contains(e)}}]),t}(Object(be.Record)(ib));!function(e){e.open="open",e.acknowledged="acknowledged",e.revoked="revoked"}(Rm||(Rm={}));var db={uid:"",teamId:"",admin:"",invitedUser:"unknown@acme.com",status:Rm.open,resendAttempts:0,aggregateType:"TeamInvitation"},lb=function(e){var t=An(e,[Dn("invitationId"),"invitationId missing"],[Dn("teamId"),"teamId missing in "+e.invitationId],[Dn("admin"),"admin missing in "+e.invitationId],[Dn("invitedUser"),"invitedUser missing in "+e.invitationId],[Dn("status"),"status missing in "+e.invitationId]);return Sn(t)?t:_n(new mb(Object(Ye.a)({},e,{uid:e.invitationId,aggregateType:"TeamInvitation"})))},mb=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"resend",value:function(){return this.set("resendAttempts",this.resendAttempts+1)}},{key:"revoke",value:function(){return this.set("status",Rm.revoked)}}]),t}(Object(be.Record)(db)),pb=Object(be.Map)(),fb=Object(be.Map)(),bb=Object(Da.combineReducers)({Team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case If:return za(e,t.payload);case xf:case jf:case Sf:case Lf:return Ma(e,t.payload);case Tf:return Fa(e=Ga(),t.payload);case Cf:return Pa(e,t.payload);default:return e}},TeamInvitation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wf:return Fa(e,t.payload);case _f:case Af:return Ma(e,t.payload);default:return e}}},function(){return Object(be.fromJS)({Team:void 0,TeamInvitation:void 0})}),hb=pn.a.mark(vb),gb=pn.a.mark(yb);function vb(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=Object(be.List)(),e.forEach(function(e){t=t.merge(e.members)}),t=t.toSet().toList(),n.next=5,Object(fn.g)(p.loadUsersInfo(t.toArray()));case 5:case"end":return n.stop()}},hb,this)}function yb(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.c)(oe.fetchUserTeams);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(fn.g)(i.Command.error("Request Error","Could not load teams"));case 8:if(!n){o.next=20;break}if(!Sn(r=Ln(n.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(t){return e&&t.teamId===e&&(t.isNew=!0),cb(t)})))){o.next=14;break}return console.error("Failed to process team response from server",r.value,n.data),o.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load teams"));case 14:if(!Cn(r)){o.next=20;break}return a=Object(be.List)(r.value),o.next=18,Object(fn.g)(nb(a));case 18:return o.next=20,Object(fn.c)(vb,a);case 20:case"end":return o.stop()}},gb,this)}var Ob=pn.a.mark(kb),Eb=pn.a.mark(Ib);function kb(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(oe.addTeam,e.payload.teamId,e.payload.teamName,e.payload.organizationId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not add team."));case 8:if(!n){a.next=16;break}return r=sb(e.payload.teamId),a.next=12,Object(fn.g)(se.teamAdded(r.rename(e.payload.teamName)));case 12:return a.next=14,Object(fn.g)(i.Command.info("Team created","Team created"));case 14:return a.next=16,Object(fn.c)(yb,e.payload.teamId);case 16:case"end":return a.stop()}},Ob,this)}function Ib(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ie.ADD_TEAM]);case 3:return e=t.sent,t.next=6,Object(fn.f)(kb,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Eb,this)}var xb=pn.a.mark(Sb),jb=pn.a.mark(Cb),Tb=pn.a.mark(wb);function Sb(e){var t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.c)(oe.adminGrantTeamAccessToBoard,e.payload.boardId,e.payload.teamId,e.payload.permissions);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(fn.g)(i.Command.error("Request Error","Could not add team to board."));case 8:if(!n){r.next=13;break}return r.next=11,Object(fn.g)(ue.Event.teamAccessToBoardGranted(e.payload.boardId,e.payload.teamId));case 11:return r.next=13,Object(fn.g)(i.Command.info("Team Added","Team was successfully added to board."));case 13:case"end":return r.stop()}},xb,this)}function Cb(e){var t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.c)(oe.adminRevokeTeamAccessToBoard,e.payload.boardId,e.payload.teamId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(fn.g)(i.Command.error("Request Error","Could not revoke team access."));case 8:if(!n){r.next=13;break}return r.next=11,Object(fn.g)(ue.Event.teamAccessToBoardRevoked(e.payload.boardId,e.payload.teamId));case 11:return r.next=13,Object(fn.g)(i.Command.info("Team Access Revoked","The team has no longer access to the board."));case 13:case"end":return r.stop()}},jb,this)}function wb(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([Of,Ef]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Of?7:t.t0===Ef?10:13;break;case 7:return t.next=9,Object(fn.f)(Sb,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(fn.f)(Cb,e);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},Tb,this)}var _b=function(e){return function(t){return function(e,t){return e.getIn([fh,"Team",t])}(t,e)}},Ab=function(e,t){return Object(be.List)(e.getIn([fh,"Team"]).toIndexedSeq().toArray())||Object(be.List)()},Bb=function(e){var t=_.makeGetCurrentUser(),n=Object(pt.a)([yi,_.currentUserSelector],function(e,t){if(null!==t.activeOrganization)return e.find(function(e){return e.uid===t.activeOrganization})});return Object(pt.a)([Ab,t,n],function(t,n,r){return t=t.filter(function(e){return!e.deleted}).filter(function(e){return r?e.organizationId===r.uid||!r.explicit&&null===e.organizationId:null===e.organizationId}),e&&(t=t.filter(function(e){return e.isAdmin(n.uid)||r&&r.admins.includes(n.uid)})),t})},Nb=pn.a.mark(Lb),Rb=pn.a.mark(Ub);function Lb(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.i)(_b(e.payload.teamId));case 2:return t=o.sent,n=t.changeDescription(e.payload.newDescription),o.next=6,Object(fn.g)(ue.Event.teamDescriptionChanged(n));case 6:return o.next=8,Object(fn.c)(ue.Api.changeTeamDescription,e.payload.teamId,e.payload.newDescription);case 8:if(r=o.sent,a=r.response,!r.error){o.next=16;break}return o.next=14,Object(fn.g)(i.Command.error("Request Error","Could not change team description."));case 14:return o.next=16,Object(fn.g)(ue.Event.teamDescriptionChanged(t));case 16:if(!a){o.next=19;break}return o.next=19,Object(fn.g)(i.Command.info("Team Description Changed","Description saved successfully"));case 19:case"end":return o.stop()}},Nb,this)}function Ub(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.CHANGE_TEAM_DESCRIPTION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Lb,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Rb,this)}var Db=pn.a.mark(Mb),zb=pn.a.mark(Pb);function Mb(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(_b(e.payload.teamId));case 2:return t=a.sent,a.next=5,Object(fn.c)(ue.Api.deleteTeam,e.payload.teamId);case 5:if(n=a.sent,r=n.response,!n.error){a.next=11;break}return a.next=11,Object(fn.g)(i.Command.error("Request Error","Could not delete team."));case 11:if(!r){a.next=16;break}return a.next=14,Object(fn.g)(i.Command.info("Team deleted","Team "+t.name+"deleted"));case 14:return a.next=16,Object(fn.g)(ue.Event.teamDeleted(t));case 16:case"end":return a.stop()}},Db,this)}function Pb(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.DELETE_TEAM]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Mb,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},zb,this)}var Fb=pn.a.mark(Gb);function Gb(){var e,t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(fn.k)([ie.INVITE_USER_TO_TEAM]);case 3:return e=o.sent,o.next=6,Object(fn.c)(oe.inviteUserToTeam,e.payload.invitationId,e.payload.teamId,e.payload.userEmail);case 6:return t=o.sent,n=t.response,r=t.error,o.next=11,Object(fn.i)(_b(e.payload.teamId));case 11:if(a=o.sent,!r){o.next=15;break}return o.next=15,Object(fn.g)(i.Command.error("Request Error","Could not add user to team."));case 15:if(!n){o.next=20;break}return o.next=18,Object(fn.g)(i.Command.info("User invited","The user was invited to the team."));case 18:return o.next=20,Object(fn.c)(yb,a.isNew?a.uid:void 0);case 20:o.next=0;break;case 22:case"end":return o.stop()}},Fb,this)}var Hb=pn.a.mark(qb),Vb=pn.a.mark(Wb);function qb(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(_b(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(fn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(fn.c)(oe.removeMemberFromTeam,e.payload.teamId,e.payload.memberId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(fn.g)(i.Command.error("Request Error","Could not remove member from team."));case 15:if(!r){a.next=20;break}return a.next=18,Object(fn.g)(Zf(t.removeMember(e.payload.memberId)));case 18:return a.next=20,Object(fn.g)(i.Command.info("Member removed","The member was removed from the team."));case 20:case"end":return a.stop()}},Hb,this)}function Wb(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ie.REMOVE_MEMBER_FROM_TEAM]);case 3:return e=t.sent,t.next=6,Object(fn.f)(qb,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Vb,this)}var Yb=pn.a.mark(Kb),Qb=pn.a.mark(Jb);function Kb(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.i)(_b(e.payload.teamId));case 2:return t=o.sent,n=t.name,t=t.rename(e.payload.newName),o.next=7,Object(fn.g)(ue.Event.teamRenamed(t));case 7:return o.next=9,Object(fn.c)(ue.Api.renameTeam,e.payload.teamId,e.payload.newName);case 9:if(r=o.sent,a=r.response,!r.error){o.next=18;break}return o.next=15,Object(fn.g)(i.Command.error("Request Error","Could not rename team."));case 15:return t=t.rename(n),o.next=18,Object(fn.g)(ue.Event.teamRenamed(t));case 18:if(!a){o.next=21;break}return o.next=21,Object(fn.g)(i.Command.info("Team renamed","Team renamed to: "+e.payload.newName));case 21:case"end":return o.stop()}},Yb,this)}function Jb(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.RENAME_TEAM]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Kb,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Qb,this)}var Zb=function(e){return function(t){return function(e,t){return e.getIn([fh,"TeamInvitation",t])}(t,e)}},Xb=pn.a.mark(eh),$b=pn.a.mark(th);function eh(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(Zb(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(fn.c)(ue.Api.resendTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not resend team invitation."));case 12:if(!r){a.next=15;break}return a.next=15,Object(fn.g)(i.Command.info("insp.team.notify.invitation_resend.success.title","insp.team.notify.invitation_resend.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(fn.g)(ue.Event.teamInvitationResent(t.resend()));case 17:case"end":return a.stop()}},Xb,this)}function th(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.RESEND_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(eh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},$b,this)}var nh=pn.a.mark(ah),rh=pn.a.mark(oh);function ah(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(Zb(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(fn.c)(ue.Api.revokeTeamInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not revoke team invitation."));case 12:if(!r){a.next=17;break}return a.next=15,Object(fn.g)(i.Command.info("insp.team.notify.invitation_revoke.success.title","insp.team.notify.invitation_revoke.success.msg",{email:t.invitedUser}));case 15:return a.next=17,Object(fn.g)(ue.Event.teamInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},nh,this)}function oh(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.REVOKE_TEAM_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(ah,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},rh,this)}var ih=pn.a.mark(sh),ch=pn.a.mark(uh);function sh(e){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(yb);case 2:case"end":return e.stop()}},ih,this)}function uh(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([f.Type.ACTIVE_ORGANIZATION_SWITCHED]);case 3:return e=t.sent,t.next=6,Object(fn.f)(sh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ch,this)}var dh=pn.a.mark(mh),lh=pn.a.mark(ph);function mh(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(_b(e.payload.teamId));case 2:if(t=a.sent){a.next=7;break}return a.next=6,Object(fn.g)(i.Command.error("Internal Error","Team could not be loaded from local store. Please contact support."));case 6:return a.abrupt("return");case 7:return a.next=9,Object(fn.c)(ue.Api.moveTeamToOrganization,e.payload.teamId,e.payload.organizationId);case 9:if(n=a.sent,r=n.response,!n.error){a.next=15;break}return a.next=15,Object(fn.g)(i.Command.error("Request Error","Could not move team to organization"));case 15:if(!r){a.next=20;break}return a.next=18,Object(fn.g)(ob(t.moveToOrganization(e.payload.organizationId)));case 18:return a.next=20,Object(fn.g)(i.Command.info("Team moved","Moved team successfully to organization."));case 20:case"end":return a.stop()}},dh,this)}function ph(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([ue.Type.MOVE_TEAM_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(mh,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},lh,this)}var fh="inspectioTeams",bh=function(e,t){return Object(pt.a)([gh],function(n){return n.find(function(n){return n.teamId===t&&n.boardId===e})})},hh=function(e,t){return Object(be.List)(e.getIn([WO,"boardPermissionsForUsers"]).toIndexedSeq().toArray())||Object(be.List)()},gh=function(e,t){return Object(be.List)(e.getIn([WO,"boardPermissionsForTeams"]).toIndexedSeq().toArray())||Object(be.List)()},vh=function(e){return Object(pt.a)([gh],function(t){return t.filter(function(t){return t.boardId===e})})},yh=function(e){var t=Object(ze.useDispatch)(),n=Object(ze.useSelector)(_b(e.boardPermission.teamId)),r=e.boardPermission.permissions.readAccess,a=e.boardPermission.permissions.writeAccess;if(!r&&!a)return null;if(!n)return null;return ve.createElement(Wp.a.Row,null,ve.createElement(Wp.a.Cell,{style:{width:"310px"}},ve.createElement(Ze.a,{as:"h4",image:!0},ve.createElement("img",{className:"ui avatar image",src:"/avatar/team-".concat(n.uid,"?displayName=").concat(n.name)}),ve.createElement(Ze.a.Content,null,n.name,ve.createElement(Ze.a.Subheader,null,n.description)))),ve.createElement(Wp.a.Cell,null,ve.createElement(Ri.a.Group,null,ve.createElement(Ri.a,{className:"positive",children:"Read",onClick:function(){e.boardPermission.permissions.writeAccess&&t(N.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),ve.createElement(Ri.a.Or,{text:"+"}),ve.createElement(Ri.a,{className:a?"positive":"",children:"Write",onClick:function(){t(N.adminChangeTeamBoardPermissions(e.board.uid,n.uid,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),ve.createElement(Ri.a,{icon:!0,className:"right floated basic circular noborder",children:ve.createElement(xp.a,{className:"red close icon"}),onClick:function(){t(ue.Command.adminRevokeTeamAccessToBoard(e.board.uid,n.uid))}})))},Oh=function(e){var t=Object(ze.useSelector)(vh(e.board.uid));return ve.createElement(Wp.a,{unstackable:!0,basic:"very"},ve.createElement(Wp.a.Body,null,t.map(function(t){return ve.createElement(yh,{board:e.board,boardPermission:t,key:t.uid})})))},Eh=n(535),kh=function(e){var t=Object(ze.useDispatch)(),n=Object(ze.useSelector)(Zo(e.boardPermission.userId)),r=e.board.owner===e.boardPermission.userId||e.board.creator===e.boardPermission.userId,a=e.boardPermission.permissions.readAccess,o=e.boardPermission.permissions.writeAccess;if(!a&&!o)return null;if(!n)return null;return ve.createElement(Wp.a.Row,null,ve.createElement(Wp.a.Cell,{style:{width:"310px"}},ve.createElement(Ze.a,{as:"h4",image:!0},ve.createElement("img",{className:"ui avatar image",src:n.avatar(),alt:n.username}),ve.createElement(Ze.a.Content,null,n.username,r&&ve.createElement(Eh.a,{color:"blue",style:{marginBottom:"0.2rem",marginLeft:"0"},basic:!0},"Owner"),ve.createElement(Ze.a.Subheader,null,n.position)))),ve.createElement(Wp.a.Cell,null,ve.createElement(Ri.a.Group,null,ve.createElement(Ri.a,{className:"positive",children:"Read",disabled:r,onClick:function(){e.boardPermission.permissions.writeAccess&&t(N.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!1})))}}),ve.createElement(Ri.a.Or,{text:"+"}),ve.createElement(Ri.a,{className:o?"positive":"",children:"Write",disabled:r,onClick:function(){t(N.changeBoardPermissions(e.board.uid,n.userId,Object(Ye.a)({},e.boardPermission.permissions,{writeAccess:!e.boardPermission.permissions.writeAccess})))}})),!r&&ve.createElement(Ri.a,{icon:!0,className:"right floated basic noborder circular button",children:ve.createElement(xp.a,{className:"red close icon"}),onClick:function(){t(N.revokeAccessToBoard(e.board.uid,n.userId))}})))},Ih=function(e){Object(ze.useSelector)(Ci());var t,n=Object(ze.useSelector)((t=e.board.uid,Object(pt.a)([hh],function(e){return e.filter(function(e){return e.boardId===t})}))),r=e.board.owner||e.board.creator;return ve.createElement(Wp.a,{unstackable:!0,basic:"very"},ve.createElement(Wp.a.Body,null,ve.createElement(kh,{board:e.board,boardPermission:new Cl({uid:"",aggregateType:"BoardPermissionForUser",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!0},userId:r,boardId:e.board.uid})}),n.map(function(t){return ve.createElement(kh,{key:t.uid,board:e.board,boardPermission:t})})))},xh=n(991),jh=function(e){var t=Object(Ye.a)({},e,{basic:!0});return ye.a.createElement(Ri.a,Object.assign({},t,{className:"noborder"}))},Th=n(1218),Sh=function(e){if(e.user.anonymous)return ve.createElement(Ri.a,{circular:!0,size:e.size||"small",className:"user",icon:"user",disabled:!0,style:{cursor:"default"}});var t=ve.createElement(Th.a,{size:e.size||"small",src:e.user.avatar(),avatar:!0,verticalAlign:"middle"});return e.namePopup?ve.createElement(Sp.a,{trigger:t,content:e.user.username,position:"bottom center"}):t},Ch=function(e){return function(t){return function(e,t){return e.getIn([WO,"boardInvitations",t])}(t,e)}},wh=function(e,t){return Object(be.List)(e.getIn([WO,"boardInvitations"]).toIndexedSeq().toArray())||Object(be.List)()},_h=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(Gn()),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ve.useState)(!1),l=Object(Qe.a)(d,2),m=l[0],p=l[1],b=Object(ze.useSelector)(Ch(e.boardInvitation.uid));Object(ve.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.boardInvitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=h.createIioUserInfoFromServerData(t.data);Cn(n)&&o(n.value)}})},[e.boardInvitation.invitedUserEmail]),Object(ve.useEffect)(function(){u(!1),p(!1)},[b]);return ve.createElement(Wp.a.Row,null,ve.createElement(Wp.a.Cell,{style:{width:"250px"}},ve.createElement(Sh,{user:a,size:"mini"}),ve.createElement("span",{style:{paddingLeft:"10px"}},e.boardInvitation.invitedUserEmail)),ve.createElement(Wp.a.Cell,null,ve.createElement(xh.a,{floated:"right"},ve.createElement(jh,{content:e.t("app.form.resend"),icon:"paper plane",loading:s,onClick:function(){s||m||(u(!0),t(N.resendBoardInvitation(e.boardInvitation.uid)))}}),ve.createElement(jh,{content:e.t("app.form.revoke"),icon:"delete",loading:m,onClick:function(){s||m||(p(!0),t(N.revokeBoardInvitation(e.boardInvitation.uid)))}}))))}),Ah=function(e){return ve.createElement(Wp.a,{unstackable:!0,basic:"very"},ve.createElement(Wp.a.Body,null,e.openInvitations.map(function(t){return ve.createElement(_h,{key:t.uid,board:e.board,boardInvitation:t})})))},Bh=n(1238),Nh=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(e.email),r=Object(Qe.a)(n,2),a=r[0],o=r[1],c=Object(ve.useState)(e.permissions.writeAccess),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=e.users.filter(function(e){return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(a.toLocaleLowerCase())}).sortBy(function(e){return e.name}).map(function(e){return{id:e.userId,title:e.name,description:e.email,image:e.avatar}});return ye.a.createElement("form",{className:"ui form",onSubmit:function(n){n.preventDefault(),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a)?(e.handleSubmit({boardId:e.boardId,email:a,permissions:Object(Ye.a)({},e.permissions,{writeAccess:u})}),d(!0),o("")):t(i.Command.error("Invalid email address","Invalid email address"))}},ye.a.createElement("div",{className:"fields",style:{margin:"0"}},ye.a.createElement(Wp.a,{unstackable:!0,basic:"very"},ye.a.createElement(Wp.a.Body,null,ye.a.createElement(Wp.a.Row,null,ye.a.createElement(Wp.a.Cell,{style:{width:"310px"}},ye.a.createElement(Bh.a,{fluid:!0,value:a,results:l.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return ye.a.createElement("div",{key:e.id},ye.a.createElement("div",{className:"ui image avatar"},ye.a.createElement("img",{src:e.image,alt:e.title})),ye.a.createElement("div",{className:"content"},ye.a.createElement("div",{className:"title"},e.title),ye.a.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return o(t.value||"")},onResultSelect:function(e,t){o(t.result.description)}})),ye.a.createElement(Wp.a.Cell,null,ye.a.createElement(Ri.a.Group,null,ye.a.createElement(Ri.a,{type:"button",className:"positive",children:"Read",onClick:function(){return d(!1)}}),ye.a.createElement(Ri.a.Or,{text:"+"}),ye.a.createElement(Ri.a,{type:"button",className:u?"positive":"",children:"Write",onClick:function(){return d(!u)}}))),ye.a.createElement(Wp.a.Cell,null,ye.a.createElement(Ri.a,{primary:!0,type:"submit",floated:"right"},e.t("insp.board.form.btn_share"))))))))}),Rh=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Bb()),n=Object(ve.useState)(1),r=Object(Qe.a)(n,2),a=(r[0],r[1],Object(ve.useState)("")),o=Object(Qe.a)(a,2),i=o[0],c=o[1],s=Object(ve.useState)(e.permissions.writeAccess),u=Object(Qe.a)(s,2),d=u[0],l=u[1],m=Object(ze.useSelector)(vh(e.boardId)).map(function(e){return e.teamId}),p=(t.filter(function(e){return!m.contains(e.uid)}),t.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray());return ye.a.createElement("form",{className:"ui form",onSubmit:function(t){t.preventDefault(),e.handleSubmit({boardId:e.boardId,teamId:i,permissions:Object(Ye.a)({},e.permissions,{writeAccess:d})}),l(e.permissions.writeAccess),c("")}},ye.a.createElement("div",{className:"fields",style:{margin:"0"}},ye.a.createElement(Wp.a,{unstackable:!0,basic:"very"},ye.a.createElement(Wp.a.Body,null,ye.a.createElement(Wp.a.Row,null,ye.a.createElement(Wp.a.Cell,{style:{width:"310px"}},ye.a.createElement("div",{className:"inline field"},ye.a.createElement(Xe.a,{placeholder:e.t("insp.board.form.team_name"),search:!0,selection:!0,options:p,value:i,onChange:function(e,t){return c(t.value)}}))),ye.a.createElement(Wp.a.Cell,null,ye.a.createElement(Ri.a.Group,null,ye.a.createElement(Ri.a,{type:"button",className:"positive",children:"Read",onClick:function(){return l(!1)}}),ye.a.createElement(Ri.a.Or,{text:"+"}),ye.a.createElement(Ri.a,{type:"button",className:d?"positive":"",children:"Write",onClick:function(){return l(!d)}}))),ye.a.createElement(Wp.a.Cell,null,ye.a.createElement(Ri.a,{primary:!0,type:"submit",disabled:""===i},e.t("insp.board.form.btn_share"))))))))}),Lh=(Object(De.b)()(function(e){var t,n=Object(ze.useDispatch)(),r=Object(ze.useSelector)(Ci()),a=Object(ze.useSelector)(vi(r.activeOrganization)),o=Object(be.List)(a?[a.ownerId].concat(Object(Za.a)(a.members.toJS())):[]),i=Object(ze.useSelector)(ei(o)),c=Object(ze.useSelector)((t=e.board?e.board.uid:"",Object(pt.a)([wh],function(e){return e.filter(function(e){return e.boardId===t&&"pending"===e.status})})));if(!e.board||!a)return ve.createElement(ve.Fragment,null);var s=ve.createElement(ve.Fragment,null,ve.createElement(Nh,{boardId:e.board.uid,email:"",permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(N.shareBoard(e.boardId,e.email,e.permissions))},users:i.map(function(e){return{userId:e.userId,name:e.username,avatar:e.avatarUrl,email:e.email}})}),ve.createElement(Ip.a,null),ve.createElement(Ih,{board:e.board}),c.count()>0&&ve.createElement(ve.Fragment,null,ve.createElement(Ip.a,{horizontal:!0},"Open Invitations"),ve.createElement(Ah,{openInvitations:c,board:e.board}))),u=ve.createElement(ve.Fragment,null,ve.createElement(Rh,{boardId:e.board.uid,user:r,permissions:{readAccess:!0,writeAccess:!0,adminAccess:!1},handleSubmit:function(e){n(ue.Command.adminGrantTeamAccessToBoard(e.boardId,e.teamId,e.permissions))}}),ve.createElement(Ip.a,null),ve.createElement(Oh,{board:e.board})),d=[{menuItem:"User",render:function(){return s}},{menuItem:"Teams",render:function(){return u}}];return ve.createElement(Qp.a,{menu:{secondary:!0,pointing:!0,color:"orange"},panes:d})}),function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsText(e,"UTF-8")})}),Uh=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsArrayBuffer(e)})},Dh=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n()},r.readAsDataURL(e)})},zh={uid:"",aggregateType:"StickyTemplate",cellType:gi.misc,template:"",templateType:"json",templateSchema:void 0,boardId:""},Mh=function(e,t){return"".concat(e,"__").concat(t)},Ph=function(e){var t=An(e,[Dn("boardId"),"boardId missing"],[Dn("cellType"),"cellType missing"],[Dn("template"),"template missing"],[Dn("templateType"),"templateType is missing"]);return Sn(t)?t:_n(new Gh(Object(Ye.a)({},zh,e,{uid:Mh(e.boardId,e.cellType)})))},Fh=function(e,t,n){return new Gh({uid:Mh(e,t),aggregateType:"StickyTemplate",cellType:t,boardId:e,template:n,templateType:"json"})},Gh=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),e.templateSchema||(e.templateSchema=void 0),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"setTemplate",value:function(e){return this.set("template",e)}},{key:"setTemplateType",value:function(e){return this.set("templateType",e)}},{key:"setTemplateSchema",value:function(e){return this.set("templateSchema",e)}}]),t}(Object(be.Record)(zh)),Hh='{\n    "type": "object",\n    "properties": {\n      \n    },\n    "required": [],\n    "additionalProperties": false\n  }',Vh={command:'{\n  "newAggregate": false,\n  "schema": '.concat(Hh," \n}\n"),event:'{\n  "public": false,\n  "schema": '.concat(Hh,"\n}\n"),aggregate:'{\n  "schema": '.concat(Hh,"\n}  \n"),document:'{\n  "schema": '.concat(Hh,"\n}  \n"),policy:'{\n  "streams": []\n}\n',role:"{\n  \n}\n",hotSpot:"{\n  \n}\n",externalSystem:"{\n  \n}\n",ui:"{\n  \n}\n",feature:"{\n  \n}\n",boundedContext:"{\n  \n}\n",icon:"{\n  \n}\n",image:"{\n  \n}\n",freeText:"{\n  \n}\n"},qh=function(e){return function(t){return function(e,t){return e.getIn([WO,"StickyTemplate",t])}(t,e)}};Object(be.List)();var Wh,Yh,Qh,Kh=function(e){return function(t){var n=function(e,t){var n=Object(be.Map)();return(e.getIn([WO,"StickyTemplate"])||Object(be.List)()).toIndexedSeq().filter(function(e){return e.boardId===t.boardId}).forEach(function(e){n=n.set(e.cellType,e)}),n}(t,{boardId:e});for(var r in Vh)n.has(r)||(n=n.set(r,Fh(e,r,Vh[r])));return n}},Jh=n(1230),Zh=function(e,t,n){return e=e.replace("#/definitions/",""),n.hasOwnProperty(e)?n[e]:{type:"string"}},Xh=n(261),$h=n(129),eg=function(){return window.monaco},tg=function(e){function t(e){var n;return Object(Be.a)(this,t),(n=Object(Re.a)(this,Object(Le.a)(t).call(this,e))).editor=void 0,n.disposeOnChangeHandler=n.disposeOnChangeHandler.bind(Object($h.a)(Object($h.a)(n))),n.state={internalData:{}},n}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"componentDidMount",value:function(){this.editor=eg().editor.create(document.getElementById("container"),this.props.options||{})}},{key:"componentWillUnmount",value:function(){Object.keys(this.state.internalData).forEach(this.disposeOnChangeHandler),this.editor=void 0}},{key:"render",value:function(){return ve.createElement("div",{id:"container",style:this.props.style})}},{key:"retrievePayload",value:function(){return this.editor.getValue()}},{key:"initializeModel",value:function(e){var t=eg().Uri.parse(e.fileId),n=eg().editor.getModel(t);this.disposeOnChangeHandler(e.fileId),null===n?(n=eg().editor.createModel(e.value,e.language,t)).updateOptions({tabSize:2}):(eg().editor.setModelLanguage(n,e.language),e.value!==n.getValue()&&n.setValue(e.value)),e.onChange&&this.initializeOnChangeHandler(e.fileId,n,e.onChange),"json"===e.language&&e.schema&&this.initializeJsonDiagnostics(t,e.schema),this.editor.setModel(n)}},{key:"addCommand",value:function(e,t){this.editor.addCommand(e,t)}},{key:"addKeyDownHandler",value:function(e){this.editor.onKeyDown(e)}},{key:"focus",value:function(){this.editor.focus()}},{key:"disposeOnChangeHandler",value:function(e){this.state.internalData[e]&&this.state.internalData[e].onChangeDisposable&&(this.state.internalData[e].onChangeDisposable.dispose(),this.updateInternalData(e,{onChangeDisposable:void 0}))}},{key:"initializeOnChangeHandler",value:function(e,t,n){this.disposeOnChangeHandler(e);var r=t.onDidChangeContent(function(e){n(e)});this.updateInternalData(e,{onChangeDisposable:r})}},{key:"initializeJsonDiagnostics",value:function(e,t){eg().languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,enableSchemaRequest:!1,allowComments:!0,schemas:[{uri:"http://myserver/foo-schema.json",fileMatch:[e.toString()],schema:JSON.parse(t)}]})}},{key:"updateInternalData",value:function(e,t){this.setState({internalData:Object(Ye.a)({},this.state.internalData,Object(Xh.a)({},e,t))})}}]),t}(ve.Component),ng=n(558),rg=ye.a.forwardRef(function(e,t){var n=Object(ve.useRef)(null);return Object(ve.useEffect)(function(){n.current&&n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,"_schema.json"),language:"json",value:e.boardStickyTemplate.templateSchema||'{\n\t"type": "object",\n\t"properties": {}\n}',schema:JSON.stringify(ng)})},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateSchema]),Object(ve.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()}}}),ye.a.createElement(tg,{ref:n,style:{height:"280px",width:"100%",marginTop:"10px"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),ag=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(e.boardStickyTemplate.templateType),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useRef)(null);Object(ve.useEffect)(function(){o(e.boardStickyTemplate.templateType)},[e.boardStickyTemplate]);var c=function(){var n=Object(Oi.a)(pn.a.mark(function n(){return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t(N.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,"json"===a&&i.current?i.current.retrievePayload():void 0));case 1:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}();return ve.createElement(ve.Fragment,null,ve.createElement(Fe.a,{style:{height:"333px"}},ve.createElement(Jh.a,{options:[{key:"json",value:"json",text:"JSON"},{key:"xml",value:"xml",text:"XML"},{key:"yaml",value:"yaml",text:"YAML"}],value:a,onChange:function(e,t){return o(t.value)}}),"json"===a&&ve.createElement(rg,{ref:i,boardStickyTemplate:e.boardStickyTemplate})),e.boardStickyTemplate.templateSchema&&ve.createElement("a",{href:"#",onClick:function(n){n.preventDefault();try{var r="json"===a&&i.current?i.current.retrievePayload():void 0;if(!r)return;var o=JSON.parse(r),c=JSON.stringify(function e(t,n){var r="";if(!(t=Un.clone(t)).type&&t.$ref&&n&&(t=Object(Ye.a)({},Zh(t.$ref,t,n))),!t.type&&!t.enum)return{type:"object"};if(t.enum&&Array.isArray(t.enum))return t.enum.join("|");if(Array.isArray(t.type)){var a=!0,o=!1,i=void 0;try{for(var c,s=t.type[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var u=c.value;if("null"!==u.toLowerCase()){t.type=u;break}}}catch(d){o=!0,i=d}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}}switch(t.type.toLowerCase()){case"string":return"string";case"number":case"integer":return 0;case"boolean":return!1;case"array":return[e(t.items||{},n)];case"object":return r={},t.properties||(t.properties={}),Object.keys(t.properties).forEach(function(a){r[a]=e(t.properties[a],n)}),r;default:return"unknown"}}(o),null,2);e.onTemplateGenerated(c),window.setTimeout(function(){t(N.updateStickyAdvancedConfig(e.boardId,e.boardStickyTemplate.cellType,a,r,!0))},1e3)}catch(n){return void console.error(n)}}},e.t("app.form.generateTemplate")),ve.createElement(Ri.a,{primary:!0,onClick:c,content:e.t("app.form.save"),floated:"right"}),ve.createElement(Ri.a,{onClick:e.onClose,content:e.t("app.form.back"),floated:"right"}))}),og=n(1248),ig={stickyColors:{event:"#FF9F4B",command:"#26C0E7",role:"#f7f727",projection:"#3acbc0",aggregate:"#F5E339",document:"#73dd8e",policy:"#EABFF1",hotSpot:"#f31d30",externalSystem:"#ec98ac",ui:"#000000",feature:"#cfcfcf",boundedContext:"#a2a2a2",edge:"#414141",textCard:"#ffdfd3"}},cg=function(e){var t;switch("normal"!==e.size&&(t=e.size||"large"),e.cellType){case sl.event:case sl.command:case sl.role:case sl.projection:case sl.aggregate:case sl.document:case sl.policy:case sl.hotSpot:case sl.externalSystem:case sl.ui:return ve.createElement(xp.a,{name:"sticky note",size:t,style:{color:ig.stickyColors[e.cellType]},title:e.title,className:e.className});case sl.icon:return ve.createElement(xp.a,{name:"heart",size:t,title:e.title,className:e.className});case sl.image:return ve.createElement(xp.a,{name:"image",size:t,title:e.title,className:e.className});case sl.feature:return ve.createElement(xp.a,{name:"square",size:t,style:{Color:ig.stickyColors.feature},title:e.title,className:e.className},ve.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.84em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"F"));case sl.boundedContext:return ve.createElement(xp.a,{name:"square",size:t,style:{Color:ig.stickyColors.feature},title:e.title,className:e.className},ve.createElement("span",{style:{position:"absolute",marginTop:t?"0.17em":"0.03em",marginLeft:"-0.89em",fontFamily:"sans-serif",fontSize:"0.8em",color:"white"}},"C"));case sl.multiple:return ve.createElement(xp.a,{name:"sitemap",size:t,style:{fontSize:"1.25em"},title:e.title,className:e.className});case sl.edge:return ve.createElement(xp.a,{size:t,title:e.title,className:e.className},ve.createElement("img",{style:{width:"1em",height:"1em"},src:'data:image/svg+xml;utf8,<svg aria-hidden="true" focusable="false" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="'.concat(encodeURIComponent(ig.stickyColors.edge),'" d="M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"></path></svg>')}));case sl.textCard:return ve.createElement(xp.a,{name:"square",size:t,style:{color:ig.stickyColors.textCard},title:e.title,className:e.className},ve.createElement("span",{style:{position:"absolute",marginTop:"0.17em",marginLeft:"-0.84em",fontFamily:"sans-serif",color:"#494949",fontSize:"0.8em"}},"T"));case sl.freeText:return ve.createElement(xp.a,{name:"align center",size:t,title:e.title,className:e.className});default:return ve.createElement(xp.a,{name:"square",size:t,title:e.title,className:e.className})}},sg=function(e){return e===gi.boundedContext||e===gi.feature},ug=function(e){return!sg(e)&&!function(e){return e===gi.freeText||e===gi.image||e===gi.icon}(e)},dg=Object(De.b)()(function(e){var t=!0,n=e.boardStickyTemplates.sort(function(e,t){return ug(e.cellType)===ug(t.cellType)?e.cellType<t.cellType?-1:e.cellType>t.cellType?1:0:ug(e.cellType)?-1:ug(t.cellType)?1:sg(e.cellType)?-1:sg(t.cellType)?1:e.cellType===gi.freeText?-1:t.cellType===gi.freeText?1:0}).map(function(n){var r=e.activeCellType?e.activeCellType===n.cellType:t;return!e.activeCellType&&t&&e.onSetActiveCellType(n.cellType),t=!1,ve.createElement(og.a.Item,{key:n.cellType,as:"a",active:r,onClick:function(){e.onSetActiveCellType(n.cellType)}},ve.createElement(cg,{cellType:n.cellType,size:"large"}),ve.createElement(og.a.Content,null,e.t("app.stickyTypes."+n.cellType)))}).toIndexedSeq().toArray();return ve.createElement(og.a,{link:!0},n)}),lg=ve.forwardRef(function(e,t){var n=Object(ve.useRef)(null),r=function(t){n.current.initializeModel({fileId:"board_".concat(e.boardStickyTemplate.boardId,"_sticky_").concat(e.boardStickyTemplate.cellType,".json"),language:e.boardStickyTemplate.templateType,value:t,schema:e.boardStickyTemplate.templateSchema||void 0})};return Object(ve.useEffect)(function(){r(e.boardStickyTemplate.template),n.current.addCommand(eg().KeyMod.CtrlCmd|eg().KeyCode.KEY_S,e.onSave)},[e.boardStickyTemplate.boardId,e.boardStickyTemplate.cellType,e.boardStickyTemplate.templateType,e.boardStickyTemplate.template,e.boardStickyTemplate.templateSchema]),Object(ve.useImperativeHandle)(t,function(){return{retrievePayload:function(){return n.current.retrievePayload()},updateModelValue:function(e){return r(e)}}}),ve.createElement(tg,{ref:n,style:{height:"300px",width:"100%"},options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1}})}),mg=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(),r=Object(Qe.a)(n,2),o=r[0],i=r[1],c=Object(ve.useState)(!1),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=Object(ze.useSelector)(Kh(e.boardId)),m=Object(ze.useSelector)(tp(e.boardId)),p=Object(ve.useRef)(null),f=Object(ve.useRef)(null),b=Object(ve.useState)(!1),h=Object(Qe.a)(b,2),g=h[0],v=h[1];Object(ve.useEffect)(function(){t(L.fetchBoardStickyTemplates(e.boardId))},[]);var y=function(){if(o&&p&&p.current){var n=p.current.retrievePayload();if("json"===l.get(o).templateType)try{JSON.parse(n)}catch(r){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}t(N.setStickyTemplate(e.boardId,o,n))}};return ve.createElement("div",{className:"ui segments"},ve.createElement("div",{className:"ui segment"},ve.createElement(Xe.a,{item:!0,icon:"ellipsis vertical",style:{float:"right",marginTop:"30px",fontSize:"1.2rem"}},ve.createElement(Xe.a.Menu,{direction:"left"},ve.createElement(Xe.a.Item,{icon:"download",text:"Import Templates",onClick:function(){f.current&&f.current.click()}}),ve.createElement(Xe.a.Item,{icon:"upload",text:"Export Templates",onClick:function(){var e=JSON.stringify(l.map(function(e){return{templateType:e.templateType,template:e.template,templateSchema:e.templateSchema}}),null,2),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");r.download=m.name+" Card Templates.json",r.href=n,document.body.append(r),r.click(),window.setTimeout(function(){r.remove(),URL.revokeObjectURL(n)},150)}}))),ve.createElement("h2",{className:"ui header"},e.t("insp.board.sticky_templates.headline"),ve.createElement(zp.a,null,e.t("insp.board.sticky_templates.description"))),ve.createElement("p",null,"\xa0"),ve.createElement(Je.a,{columns:2},ve.createElement(Je.a.Column,{mobile:"6",tablet:"6",computer:"5",largeScreen:"5",widescreen:"5"},ve.createElement(dg,{boardStickyTemplates:l,activeCellType:o,onSetActiveCellType:i})),o&&ve.createElement(Je.a.Column,{mobile:"10",tablet:"10",computer:"11",largeScreen:"11",widescreen:"11",style:{borderLeft:"1px solid #d8dee2"}},!u&&ve.createElement(ve.Fragment,null,ve.createElement(lg,{ref:p,boardStickyTemplate:l.get(o),onSave:y}),ve.createElement("p",null,"\xa0"),ve.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),d(!0)}},e.t("insp.board.sticky_templates.advanced_config")),ve.createElement(Ri.a,{primary:!0,onClick:y,content:e.t("app.form.save"),floated:"right"})),u&&ve.createElement(ag,{boardId:e.boardId,boardStickyTemplate:l.get(o),onClose:function(){return d(!1)},onTemplateGenerated:function(n){o&&(d(!1),t(N.setStickyTemplate(e.boardId,o,n)),window.setTimeout(function(){p.current&&p.current.updateModelValue(n)},10))}}),ve.createElement(Lp.a,{inverted:!0,active:g},ve.createElement(Up.a,{inverted:!0},"Importing")))),ve.createElement("input",{type:"file",ref:f,style:{display:"none"},onChange:function(n){var r=n.target.files[0]||null;Lh(r).then(function(n){var r;try{r=JSON.parse(n)}catch(m){return void t(a.error(e.t("insp.sidebar.element_details.json_invalid_title"),e.t("insp.sidebar.element_details.json_invalid_text")))}if("object"===typeof r){for(var o=Object.keys(l.toJSON()),i=Object.keys(r),c=[],s=0;s<i.length;s++){var u=i[s];if(!o.includes(u))return void t(a.error("Invalid Card Templates File",e.t("File contains unknown cell type: "+u)));var d=Fh(e.boardId,u,r[u].template||"");d=d.setTemplateType(r[u].templateType||"json"),r[u].templateSchema&&(d=d.setTemplateSchema(r[u].templateSchema)),c.push(d)}v(!0),t(N.importStickyTemplates(e.boardId,Object(be.List)(c),function(){v(!1)}))}else t(a.error("Invalid Card Templates File",e.t("Selected file does not contain a JSON object of card templates")))})}})))}),pg=(Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return ve.createElement(ve.Fragment,null,ve.createElement(Jh.a,{options:i.toJS(),placeholder:e.t("insp.board.move_to_organization_select"),onChange:function(e,t){return o(t.value)}}),ve.createElement(Ri.a,{primary:!0,floated:"right",onClick:function(){a&&(t(N.moveUserBoardToOrganization(a,e.boardId)),o(void 0))}},e.t("insp.board.move_to_organization_submit")),ve.createElement(Mi.a,{size:"small",info:!0},e.t("insp.board.move_to_organization_desc")))}),Object(De.b)()(Object(Di.reduxForm)({form:"EditBoardForm"})(function(e){return ye.a.createElement("form",{className:"ui form",onSubmit:e.handleSubmit},ye.a.createElement("div",{className:"fields",style:{margin:"0"}},ye.a.createElement("div",{className:"inline field"},ye.a.createElement(Di.Field,{name:"name",component:"input",type:"text",placeholder:e.t("insp.board.form.board_name")})),ye.a.createElement(Ri.a,{primary:!0,type:"submit",className:"bottom aligned"},e.t("app.form.rename")),ye.a.createElement(Pe.Link,{to:yt,className:"ui basic button noborder"},e.t("app.form.cancel"))))}))),fg=te.makeMapStateToPropsEditBoard(),bg=Object(De.b)()(Object(Me.k)(Object(lt.a)(Object(ze.connect)(fg,function(e){return Object(mt.bindActionCreators)({renameBoard:N.renameBoard,confirmDeleteBoard:N.confirmDeleteBoard,deleteBoard:N.deleteBoard,abortDeletion:N.abortBoardDeletion,shareBoard:N.shareBoard},e)}),Object(lt.b)({}))(function(e){var t=Object(ze.useDispatch)(),n=e.board?e.board.uid:void 0,r=Object(ze.useSelector)(Rl()),a=Object(ze.useSelector)(Ci()),o=Object(ze.useSelector)(Nl(a.uid));if(Object(ve.useEffect)(function(){e.board&&(t(Bd(e.board.uid)),t(Nd(e.board.uid)),t(Rd(e.board.uid)))},[n]),!e.board)return t(Ad(e.match.params.uid)),ve.createElement(Lp.a,{className:"page"},ve.createElement(Up.a,{size:"large"},"Loading Board"));var i=!r||!r.explicitOrganization,c=i?o.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(be.List)();i&&!e.board.organization&&c.count();return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0,padded:!0},ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Ze.a,{as:"h1",icon:!0,textAlign:"center"},ve.createElement(xp.a,{name:"settings"}),ve.createElement(Ze.a.Content,null,e.t("insp.board.edit").replace("%name%",e.board.name),ve.createElement(Ze.a.Subheader,null,e.t("insp.board.edit_header")))))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement("div",{className:"ui segments"},ve.createElement("div",{className:"ui segment"},ve.createElement(pg,{initialValues:Object(be.fromJS)({name:e.board.name}),onSubmit:function(t){!function(e,t){var n=t.board.merge(e.toJS());t.renameBoard(n),t.history.replace(yt)}(t,e)}})),ve.createElement("div",{className:"ui segment"},!e.board.inDeletion&&ve.createElement(Mi.a,null,e.t("insp.board.delete_txt1"),ve.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.confirmDeleteBoard(e.board.uid)}},e.t("insp.board.delete_link")),e.t("insp.board.delete_txt2")),e.board.inDeletion&&ve.createElement(Gp,{boardName:e.board.name,initialValues:Object(be.fromJS)({confirmedName:"",uid:e.board.uid}),t:e.t,onSubmit:function(t){!function(e,t){t.deleteBoard(e.get("uid")),t.history.replace(yt)}(t,e)},onCancel:function(){return e.abortDeletion(e.board.uid)}}))))),!1,ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},e.board&&ve.createElement(mg,{boardId:e.board.uid}))),!1,!1))}))),hg=n(559),gg=n.n(hg),vg=n(560),yg=n(561),Og=n.n(yg),Eg=function(){function e(){Object(Be.a)(this,e),this.graphRef=void 0,this.selectionListeners=[]}return Object(Ne.a)(e,[{key:"setGraph",value:function(e){this.graphRef=e,e&&this.selectionListeners.forEach(function(t){return e.onSelectionChanged(t)}),this.selectionListeners=[]}},{key:"getCurrentScale",value:function(){return this.graphRef?this.graphRef.getCurrentScale():1}},{key:"getCurrentTranslate",value:function(){return this.graphRef?this.graphRef.getCurrentTranslate():{x:0,y:0}}},{key:"onPanning",value:function(e){this.graphRef&&this.graphRef.onPanning(e)}},{key:"offPanning",value:function(e){this.graphRef&&this.graphRef.offPanning(e)}},{key:"translateMousePoint",value:function(e,t){return this.graphRef?this.graphRef.translateMousePoint(e,t):{x:e,y:t}}},{key:"onZoom",value:function(e){this.graphRef&&this.graphRef.onZoom(e)}},{key:"offZoom",value:function(e){this.graphRef&&this.graphRef.offZoom(e)}},{key:"getRoot",value:function(){return this.graphRef?this.graphRef.getRoot():new el}},{key:"openLayersDialog",value:function(){this.graphRef&&this.graphRef.openLayersDialog()}},{key:"triggerCody",value:function(){this.graphRef&&this.graphRef.triggerCody()}},{key:"hasUserLevelVisibilityChanges",value:function(){return!!this.graphRef&&this.graphRef.hasUserLevelVisibilityChanges()}},{key:"isVisible",value:function(e){return!!this.graphRef&&this.graphRef.isVisible(e)}},{key:"setUserVisible",value:function(e,t){this.graphRef&&this.graphRef.setUserVisible(e,t)}},{key:"applyVisibilityGlobally",value:function(){this.graphRef&&this.graphRef.applyVisibilityGlobally()}},{key:"isLocked",value:function(e){return!!this.graphRef&&this.graphRef.isLocked(e)}},{key:"setLocked",value:function(e,t){this.graphRef&&this.graphRef.setLocked(e,t)}},{key:"deleteElement",value:function(e){this.graphRef&&this.graphRef.deleteElement(e)}},{key:"addLayer",value:function(e){this.graphRef&&this.graphRef.addLayer(e)}},{key:"deleteLayer",value:function(e){this.graphRef&&this.graphRef.deleteLayer(e)}},{key:"isActiveLayer",value:function(e){return!!this.graphRef&&this.graphRef.isActiveLayer(e)}},{key:"setAsActiveLayer",value:function(e){if(this.graphRef)return this.graphRef.setAsActiveLayer(e)}},{key:"setDefaultLayerAsActive",value:function(){this.graphRef&&this.graphRef.setDefaultLayerAsActive()}},{key:"highlightLayer",value:function(e){this.graphRef&&this.graphRef.highlightLayer(e)}},{key:"changeNodeName",value:function(e,t){this.graphRef&&this.graphRef.changeNodeName(e,t)}},{key:"copySelectionToActiveLayer",value:function(){return!!this.graphRef&&this.graphRef.copySelectionToActiveLayer()}},{key:"exportXmlSnapshot",value:function(){return this.graphRef?this.graphRef.exportXmlSnapshot():""}},{key:"onSelectionChanged",value:function(e){this.selectionListeners.push(e),this.graphRef&&this.graphRef.onSelectionChanged(e)}},{key:"setCockpitBaseUrl",value:function(e){this.graphRef&&this.graphRef.setCockpitBaseUrl(e)}},{key:"focus",value:function(){this.graphRef&&this.graphRef.focus()}}]),e}();function kg(){return Wh||(Wh=new Eg),[Wh,function(e){Wh.setGraph(e)}]}!function(e){e.Sync="Sync",e.SyncDeleted="SyncDeleted"}(Yh||(Yh={})),function(e){e.IioSaidHello="IioSaidHello",e.UserReplied="UserReplied",e.ElementEdited="ElementEdited",e.ConfirmTest="ConfirmTest"}(Qh||(Qh={}));var Ig,xg,jg,Tg,Sg="No connection to Cody. Try to connect with him first!",Cg=function(e,t){var n,r,a,o,i="string"===typeof e.cody?[e.cody]:e.cody,c="string"===typeof e.details?[e.details]:e.details;switch(e.type?e.type:Tg.Info){case Tg.Info:var s;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: #32c0e7;font-weight: bold")),(n=console).info.apply(n,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Za.a)(i.slice(1)))),e.details)(s=console).log.apply(s,["%c\ud83d\udc35 ["+t+"]: "+c[0],"color: #414141"].concat(Object(Za.a)(c.slice(1))));break;case Tg.Error:var u;if(1===i.length&&(i[0]="%c"+i[0],i.push("color: color: #f31c30;font-weight: bold")),(r=console).error.apply(r,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Za.a)(i.slice(1)))),e.details)(u=console).error.apply(u,["%c\ud83d\udc35 ["+t+"]: "+c[0],"color: #414141"].concat(Object(Za.a)(c.slice(1))));break;case Tg.Warning:case Tg.Question:var d;if(1===i.length&&(i[0]="%c"+i[0],i.push("font-weight: bold")),(a=console).warn.apply(a,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Za.a)(i.slice(1)))),e.details)(d=console).warn.apply(d,["%c\ud83d\udc35 ["+t+"]: "+c[0],"color: #414141"].concat(Object(Za.a)(c.slice(1))));break;case Tg.SyncRequired:console.warn("%c\ud83d\udc35 ["+t+"]: I need to sync all board content. Lean back for a moment. I'll tell you when I'm done.");break;default:var l;if((o=console).log.apply(o,["%c\ud83d\udc35 ["+t+"]: "+i[0],"color: #414141"].concat(Object(Za.a)(i.slice(1)))),e.details)(l=console).log.apply(l,["%c\ud83d\udc35 ["+t+"]: "+c[0],"color: #414141"].concat(Object(Za.a)(c.slice(1))))}},wg=function(e){console.error(e)},_g=function(e){console.warn(e)},Ag=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.forEach(function(t){if(n.find(function(e){return e.getId()===t.getId()})){var o=r.find(function(e){return e.getId()===t.getId()});o?(r.splice(r.indexOf(o),1),r.push(t)):r.push(t)}++a<100&&e(t.getTargets(),n,r,a)})},Bg=Cg,Ng=wg,Rg=_g,Lg=function e(t,n,r,a){if(0===n.length)return Rg("Selection is empty. Nothing to do for Cody!"),!1;if("undefined"===typeof r&&Ig)return Ug.codyServers?Ug.codyServers.forEach(function(e){Bg({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:Tg.Warning},e.name)}):Bg({cody:"Wait, wait, wait! I'm still working on last session.",details:["You can stop me by pressing %cESC","background-color: rgba(251, 159, 75, 0.2)"],type:Tg.Warning},"Cody"),!1;if(Ug.codyServers){if("undefined"===typeof r)Ig={nodes:n,currentNodeIndex:0,boardId:t,currentServerIndex:0,syncPerformed:!1},n=function(e){var t=[],n=e.filter(function(t){if(0===t.getSources().count())return!0;var n=!0;return t.getSources().forEach(function(t){e.find(function(e){return e.getId()===t.getId()})&&(n=!1)}),n});return t.push.apply(t,Object(Za.a)(n)),n.forEach(function(n){Ag(n.getTargets(),e,t)}),t}(n),e(t,n,0);else{"undefined"===typeof a&&(a=0);var o=Ug.codyServers[a];o.axios.post(Qh.ElementEdited,{node:Jd(n[r])}).then(function(i){if(200===i.status){var c=i.data;Bg(c,o.name),c.type!==Tg.Question&&c.type!==Tg.StopSession&&c.type!==Tg.SyncRequired&&c.type!==Tg.Error&&(++a<Ug.codyServers.length?(Ig.currentServerIndex=a,e(t,n,r,a)):(r+=1,Ig.currentNodeIndex=r,Ig.currentServerIndex=0,r<n.length&&e(t,n,r,0))),c.type===Tg.SyncRequired&&xg&&xg(),(c.type===Tg.StopSession||c.type===Tg.Error||r===n.length&&a===Ug.codyServers.length&&c.type!==Tg.Question)&&(Ig=void 0)}else Ng("Did not receive a valid response from ".concat(o.name,". ")+JSON.stringify(i))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Ng(e)})}return!0}return Ng(Sg),!1},Ug={syncRequired:function(){return!!Ug.codyServers&&Ug.codyServers.filter(function(e){return e.sync}).length>0},connect:{Cody:function(e,t,n){n||(n="Cody"),Ug.codyServers||(Ug.codyServers=[]);var r=Ug.codyServers.filter(function(e){return e.name!==n}),a={name:n,axios:je.a.create({baseURL:e+"/messages/"}),sync:!1};return r.push(a),Ug.codyServers=r,a.axios.post(Qh.IioSaidHello,{user:t}).then(function(e){200===e.status?(Bg(e.data,a.name),e.data.type===Tg.SyncRequired&&xg&&(jg=r.indexOf(a),xg())):Ng("Did not receive a valid response from ".concat(a.name,". ")+JSON.stringify(e))},function(e){return Bg({cody:"Failed to reach out to server",details:[e],type:Tg.Error},a.name)}),!0}},disconnect:function(e){if(Ug.codyServers){if(e)return Ug.codyServers=Ug.codyServers.filter(function(t){return t.name!==e}),void Bg({cody:"Bye Bye",type:Tg.Warning},e);Ug.codyServers=void 0,Ig=void 0,Bg=Cg,Ng=wg,Rg=_g}},reply:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(Ig&&Ug.codyServers&&Ug.codyServers[Ig.currentServerIndex]){var t=Ug.codyServers[Ig.currentServerIndex];return t.axios.post(Qh.UserReplied,{reply:e}).then(function(e){if(200===e.status){var n=e.data;if(Bg(n,t.name),n.type!==Tg.Question&&n.type!==Tg.StopSession&&n.type!==Tg.Error&&Ig){var r=Ig.nodes,a=Ig.currentNodeIndex,o=Ig.currentServerIndex+1;o<Ug.codyServers.length?(Ig.currentServerIndex=o,Lg(Ig.boardId,r,a,o)):(a+=1,Ig.currentNodeIndex=a,Ig.currentServerIndex=0,a<r.length?Lg(Ig.boardId,r,a,0):Ig.currentServerIndex=o)}(n.type===Tg.StopSession||n.type===Tg.Error||Ig&&(Ig.currentNodeIndex===Ig.nodes.length||0===Ig.nodes.length)&&Ig.currentServerIndex===Ug.codyServers.length)&&(Ig=void 0)}else Ng("Did not receive a valid response from ".concat(t.name,". ")+JSON.stringify(e))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Ng(e)}),!0}Ng(Sg)}),talk:{to:{Cody:function(){if(Ug.codyServers){var e=Ug.codyServers[Ug.codyServers.length-1];return Ig={nodes:[],currentNodeIndex:0,boardId:"",currentServerIndex:Ug.codyServers.length-1,syncPerformed:!1},e.axios.post(Qh.ConfirmTest,{}).then(function(t){200===t.status?Bg(t.data,e.name):Ng("Did not receive a valid response from ".concat(e.name,". ")+JSON.stringify(t))},function(e){"string"!==typeof e&&(e="function"===typeof e.toString?e.toString():"Unknown Error"),Ng(e)}),!0}Ng(Sg)}}},trigger:{Cody:Lg},onSyncRequired:function(e){xg=e},syncNodes:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ug.codyServers||!Ig&&"undefined"===typeof jg){e.next=14;break}if(r=Ig?Ug.codyServers[Ig.currentServerIndex]:Ug.codyServers[jg],!Ig||!Ig.syncPerformed){e.next=5;break}return Bg({cody:"Something went wrong. I already synced the entire board, but need to sync again.",details:"Looks like an endless loop. The developer who created the hooks gave me wrong instructions. Please contact them!",type:Tg.Error},r.name),e.abrupt("return",!1);case 5:return e.next=7,r.axios.post(Yh.Sync,{boardId:t,nodes:n.map(Jd)});case 7:if(200===(a=e.sent).status){e.next=11;break}return Ng("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 11:(o=a.data).type!==Tg.Empty&&Bg(o,r.name),r.sync=!0;case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),syncChangedNodes:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r,a,o,i,c,s;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ug.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=pn.a.mark(function e(){var r,a,o,i,c,u,d,l,m;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=s.value).sync){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(Oi.a)(pn.a.mark(function e(n){var a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.axios.put(Yh.Sync,{boardId:t,nodes:n.map(Jd)});case 2:if(200===(a=e.sent).status){e.next=6;break}return Ng("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 6:(o=a.data).type!==Tg.Empty&&Bg(o,r.name);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,c=!1,u=void 0,e.prev=8,d=n[Symbol.iterator]();case 10:if(i=(l=d.next()).done){e.next=20;break}if(m=l.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),c=!0,u=e.t0;case 26:e.prev=26,e.prev=27,i||null==d.return||d.return();case 29:if(e.prev=29,!c){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),c=Ug.codyServers[Symbol.iterator]();case 7:if(r=(s=c.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==c.return||c.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncDeletedNodes:function(){var e=Object(Oi.a)(pn.a.mark(function e(t,n){var r,a,o,i,c,s;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ug.codyServers){e.next=29;break}r=!0,a=!1,o=void 0,e.prev=4,i=pn.a.mark(function e(){var r,a,o,i,c,u,d,l,m;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=s.value).sync){e.next=3;break}return e.abrupt("return","continue");case 3:a=function(){var e=Object(Oi.a)(pn.a.mark(function e(n){var a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.axios.post(Yh.SyncDeleted,{boardId:t,nodes:n.map(Jd)});case 2:if(200===(a=e.sent).status){e.next=6;break}return Ng("Did not receive a valid response from ".concat(r.name,". ")+JSON.stringify(a)),e.abrupt("return",!1);case 6:(o=a.data).type!==Tg.Empty&&Bg(o,r.name);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),o=[],i=!0,c=!1,u=void 0,e.prev=8,d=n[Symbol.iterator]();case 10:if(i=(l=d.next()).done){e.next=20;break}if(m=l.value,o.push(m),!(o.length>=10)){e.next=17;break}return e.next=16,a(o);case 16:o=[];case 17:i=!0,e.next=10;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(8),c=!0,u=e.t0;case 26:e.prev=26,e.prev=27,i||null==d.return||d.return();case 29:if(e.prev=29,!c){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(!(o.length>0)){e.next=37;break}return e.next=37,a(o);case 37:case"end":return e.stop()}},e,this,[[8,22,26,34],[27,,29,33]])}),c=Ug.codyServers[Symbol.iterator]();case 7:if(r=(s=c.next()).done){e.next=15;break}return e.delegateYield(i(),"t0",9);case 9:if("continue"!==e.t0){e.next=12;break}return e.abrupt("continue",12);case 12:r=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t1=e.catch(4),a=!0,o=e.t1;case 21:e.prev=21,e.prev=22,r||null==c.return||c.return();case 24:if(e.prev=24,!a){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:return e.abrupt("return",!0);case 30:case"end":return e.stop()}},e,this,[[4,17,21,29],[22,,24,28]])}));return function(t,n){return e.apply(this,arguments)}}(),syncFinished:function(){if("undefined"!==typeof jg&&Ug.codyServers){var e=Ug.codyServers[jg];return Bg({cody:"Sync finished. We can continue!",type:Tg.Info},e.name),void(jg=void 0)}if(Ig&&Ug.codyServers){var t=Ug.codyServers[Ig.currentServerIndex];Bg({cody:"Sync finished. We can continue!",type:Tg.Info},t.name),Ig.syncPerformed=!0,Lg(Ig.boardId,Ig.nodes,Ig.currentNodeIndex,Ig.currentServerIndex)}},abortSession:function(){return Ig=void 0,Ug.codyServers?Ug.codyServers.forEach(function(e){Bg({cody:"Yeah, no problem. I stopped my work."},e.name)}):Bg({cody:"Yeah, no problem. I stopped my work."},"Cody"),!0},ask:{Cody:{forHelp:function(){Bg({cody:"It's easy. You design the solution and I'll code it for you!",details:["%cJust select one or more elements on the board and press %cCtrl+G (Cmd+G on Mac)%c or choose %cTrigger Cody%c from context menu of an element.\n\nPressing %cCtrl+Q (Cmd+Q on Mac)%c closes the console.\n\nTo enable Cockpit integration use %c/cockpit https://localhost:<cockpit_port>","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)","color: #414141","background-color: rgba(251, 159, 75, 0.2)"]},"Cody")}}},codyServers:void 0,setCodyResponsePrinter:function(e){Bg=e},setErrorPrinter:function(e){Ng=e},setWarningPrinter:function(e){Rg=e}};window.IIO=Ug,function(e){e.Info="Info",e.Error="Error",e.Warning="Warning",e.Empty="Empty",e.Question="Question",e.StopSession="StopSession",e.SyncRequired="SyncRequired"}(Tg||(Tg={}));var Dg,zg={uid:"",board:"",aggregateType:"BoardTimer",deadline:0,duration:0,moderator:"",pausedTime:void 0},Mg=function(e,t,n,r,a){return new Pg({uid:"",aggregateType:"BoardTimer",board:e,deadline:t,duration:n,moderator:r,pausedTime:a})},Pg=function(e){function t(e){return Object(Be.a)(this,t),""===e.uid&&(e.uid=tt.v4()),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)(zg));!function(e){e.Default="Default",e.Moving="Moving",e.Typing="Typing"}(Dg||(Dg={}));var Fg,Gg=["#15A2B0","#715671","#CF3241","#ED6842","#EECA51","#1F8A6D","#dd3cd3","#1114dd","#7add3a","#dd8794","#b16fdd","#9fa0bb","#bad63c","#7886dd","#8510dd","#dd796d"],Hg=0,Vg=function(e){switch(e){case Dg.Moving:return"hand rock";case Dg.Typing:return"keyboard";default:return"user"}},qg=function(){function e(t,n,r,a){Object(Be.a)(this,e),this.socket=void 0,this.container=void 0,this.registry={},this.translateGraphPoint=void 0,this.graph=void 0,this.userJoinedListeners=void 0,this.userLeftListeners=void 0,this.observedUser=void 0,this.observingFrame=void 0,this.lastMoveWasPanning=void 0,this.boardTimerStartedListeners=void 0,this.boardTimerPausedListeners=void 0,this.boardTimerStoppedListeners=void 0,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,this.socket=t,this.container=n,this.translateGraphPoint=a,this.graph=r,this.userJoinedListeners=[],this.userLeftListeners=[],this.boardTimerStartedListeners=[],this.boardTimerPausedListeners=[],this.boardTimerStoppedListeners=[],this.observedUser=null,this.observingFrame=null,this.lastMoveWasPanning=!1}return Object(Ne.a)(e,[{key:"startSync",value:function(e){var t=this;this.socket.on("MouseJoined",function(e){t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)}),this.socket.on("MouseLeft",function(n){t.stopMouseTrackingOfUser(n.userId),t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){t.registry.hasOwnProperty(e.userId)||t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})})}),this.socket.on("MouseMove",function(e){var n=e.userId,r=e.point,a=e.vT,o=e.scale;if(t.registry.hasOwnProperty(n)){var i=t.registry[n].pointerEl;if(i.style.display="block",t.observedUser===n&&(t.graph.view.setScale(o),t.graph.panGraph(e.vT.x,e.vT.y),t.graph.panningListeners.forEach(function(t){return t(e.vT)})),e.isPanning&&t.observedUser===n){var c=t.translateGraphPoint(r);i.style.left=c.x+"px",i.style.top=c.y+"px",t.registry[n].lastKnownAbsolutePoint=c}if(!e.isPanning){var s=t.translateGraphPoint(r);i.style.left=s.x+"px",i.style.top=s.y+"px",t.registry[n].lastKnownAbsolutePoint=s}t.registry[n].translate=a,t.registry[n].scale=o}}),this.socket.on("MouseScroll",function(e){var n=e.userId,r=e.scale,a=e.vT;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(r),t.graph.panGraph(a.x,a.y)),t.registry[n].translate=a,t.registry[n].scale=r)}),this.socket.on("GestureChanged",function(e){var n=e.userId;e.gesture;t.registry.hasOwnProperty(n)&&(t.registry[n].pointerIcon.className=Vg(e.gesture)+" icon")}),this.socket.on("AutoScrolling",function(e){var n=e.userId,r=e.translate,a=e.scale;e.isPanning;t.registry.hasOwnProperty(n)&&(t.observedUser===n&&(t.graph.view.setScale(a),t.graph.panGraph(r.x,r.y)),t.registry[n].translate=r,t.registry[n].scale=a)}),this.socket.on("BoardTimerStarted",function(e){var n=new Pg(e);console.log("[mousesync] Received board timer started: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!1}),this.socket.on("BoardTimerPaused",function(e){var n=new Pg(e);console.log("[mousesync] Received board timer paused: ",e),t.boardTimerPausedListeners.forEach(function(e){return e(n)}),t.activeBoardTimer=n,t.isBoardTimerPaused=!0}),this.socket.on("BoardTimerStopped",function(e){var n=new Pg(e);console.log("[mousesync] Received board timer stopped: ",e),t.activeBoardTimer=void 0,t.isBoardTimerPaused=!1,t.boardTimerStoppedListeners.forEach(function(e){return e(n)})}),this.socket.on("disconnect",function(){for(var e in console.log("[mousesync] MouseSync socket disconnected"),t.registry)t.registry.hasOwnProperty(e)&&t.stopMouseTrackingOfUser(e)});var n=function(n){n&&t.userJoinedListeners.forEach(function(t){return t(e.userId,e.name,e.avatar,"#423fbc")}),t.socket.emit("MouseJoined",e),t.socket.emit("GetCurrentMouses",e,function(e){return e.forEach(function(e){return t.trackMouseOfRemoteUser(e.userId,e.name,e.avatar)})}),t.socket.emit("GetActiveBoardTimer",{board:e.boardId},function(e){t.activeBoardTimer=e.timer?new Pg(e.timer):void 0,t.isBoardTimerPaused=e.isPaused,n&&t.boardTimerStartedListeners.length&&t.activeBoardTimer&&(console.log("[mousesync] Calling board timer started listeners with: ",e),t.boardTimerStartedListeners.forEach(function(e){return e(t.activeBoardTimer)})),t.isBoardTimerPaused&&n&&t.boardTimerPausedListeners.length&&t.activeBoardTimer&&t.boardTimerPausedListeners.forEach(function(e){return e(t.activeBoardTimer)})})};this.socket.on("reconnect",function(){console.log("[mousesync] MouseSync socket reconnected"),t.activeBoardTimer&&t.activeBoardTimer.moderator===e.userId&&(t.startBoardTimer(t.activeBoardTimer),t.isBoardTimerPaused&&t.pauseBoardTimer(t.activeBoardTimer)),n(!1)}),n(!0)}},{key:"stopSync",value:function(e){console.log("[mousesync] stop sync"),this.socket.emit("MouseLeft",e),this.socket.off("MouseJoined"),this.socket.off("MouseMove"),this.socket.off("MouseScroll"),this.socket.off("MouseLeft"),this.registry={},this.observedUser=null,this.lastMoveWasPanning=!1,this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1,document.getElementById("topmenu").style.borderColor=null}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){for(var n in this.registry)if(this.registry.hasOwnProperty(n)){var r=this.registry[n],a=r.pointerEl,o=r.lastKnownAbsolutePoint;a.style.left=o.x+Math.round(t.dx)+"px",a.style.top=o.y+Math.round(t.dy)+"px"}}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){for(var e in this.registry)if(this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.registry[e].lastKnownAbsolutePoint={x:parseInt(t.style.left,void 0),y:parseInt(t.style.top,void 0)}}}},{key:"emitUserMouseMove",value:function(e,t){e.isPanning&&t?(this.keepMousePositionsInPlaceOnPanning(e,t),this.lastMoveWasPanning=!0):this.lastMoveWasPanning&&this.syncLastKnownAbsolutePointsAfterPanning(),this.socket.emit("MouseMove",e)}},{key:"emitUserMouseScroll",value:function(e){this.socket.emit("MouseScroll",e)}},{key:"emitUserGestureChanged",value:function(e){this.socket.emit("GestureChanged",e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.socket.emit("AutoScrolling",e)}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){if(console.log("[mousesync] track mouse of remote user: ",e," in registry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e))this.observedUser===e&&this.observeUser(e);else{var r=function(e){var t=Gg[Hg];++Hg===Gg.length&&(Hg=0);var n=document.createElement("div");n.className="geRemoteMouse",n.style.position="absolute",n.style.display="none";var r=document.createElement("p"),a=document.createElement("i");a.className=Vg(Dg.Default)+" icon",a.style.color=t,r.appendChild(a),n.appendChild(r);var o=document.createElement("p");return o.className="geMouseLabel",o.innerHTML=e,o.style.color=t,n.appendChild(o),[n,a,t]}(t),a=Object(Qe.a)(r,3),o=a[0],i=a[1],c=a[2];this.registry[e]={userName:t,pointerEl:o,pointerIcon:i,color:c,scale:.2,translate:{x:0,y:0},lastKnownAbsolutePoint:{x:0,y:0}},this.container.appendChild(o),this.observedUser===e&&this.observeUser(e),this.userJoinedListeners.forEach(function(r){return r(e,t,n,c)})}}},{key:"stopMouseTrackingOfUser",value:function(e){if(console.log("[mousesync] stop mouse tracking of user",e,"in regsitry ",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){var t=this.registry[e].pointerEl;this.container.removeChild(t),delete this.registry[e],this.observedUser===e&&this.hideObservingFrame(),this.userLeftListeners.forEach(function(t){return t(e)})}}},{key:"observeUser",value:function(e){if(console.log("[mousesync] observe user",e,"in registry",this.registry.hasOwnProperty(e)),this.registry.hasOwnProperty(e)){this.observedUser=e;var t=this.registry[e],n=t.userName,r=t.color,a=t.translate,o=t.scale;document.getElementById("topmenu").style.borderColor=r;var i=document.createElement("div");i.classList.add("observing","frame"),i.style.borderColor=r;var c=document.createElement("div");c.classList.add("label"),c.innerText="Observing "+n,c.style.backgroundColor=r,c.style.color="#fff",i.append(c),this.graph.container.append(i),this.observingFrame=i,0!==a.x&&0!==a.y&&(this.graph.view.setScale(o),this.graph.panGraph(a.x,a.y))}}},{key:"hideObservingFrame",value:function(){this.observingFrame&&(this.observingFrame.remove(),this.observingFrame=null,document.getElementById("topmenu").style.borderColor=null)}},{key:"stopObservingUser",value:function(){console.log("[mousesync] stop oberving user"),this.observedUser=null,this.hideObservingFrame()}},{key:"onUserJoined",value:function(e){console.log("[mousesync] attach user joined listener"),this.userJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.userJoinedListeners=this.userJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){console.log("[mousesync] attach user left listener"),this.userLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.userLeftListeners=this.userLeftListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerPaused",value:function(e){this.boardTimerPausedListeners.push(e),this.activeBoardTimer&&this.isBoardTimerPaused&&e(this.activeBoardTimer)}},{key:"offBoardTimerPaused",value:function(e){this.boardTimerPausedListeners=this.boardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.boardTimerStartedListeners.push(e),this.activeBoardTimer&&(console.log("[mousesync] Trigger board timer started listener with active timer: ",this.activeBoardTimer.toJS()),e(this.activeBoardTimer))}},{key:"offBoardTimerStarted",value:function(e){this.boardTimerStartedListeners=this.boardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.boardTimerStoppedListeners=this.boardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.socket.emit("BoardTimerPaused",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!0}},{key:"startBoardTimer",value:function(e){this.socket.emit("BoardTimerStarted",e.toJS()),this.activeBoardTimer=e,this.isBoardTimerPaused=!1}},{key:"stopBoardTimer",value:function(e){this.socket.emit("BoardTimerStopped",e.toJS()),this.activeBoardTimer=void 0,this.isBoardTimerPaused=!1}}]),e}(),Wg=function(e,t){return e.getIn([WO,"boardGraphElements"])},Yg=Object(De.b)()(function(e){Object(ze.useDispatch)();var t,n,r=Object(ve.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],c=Object(ve.useState)(void 0),s=Object(Qe.a)(c,2),u=(s[0],s[1]),d=Object(ve.useState)(!1),l=Object(Qe.a)(d,2),m=l[0],p=l[1],f=Object(ze.useSelector)(fp(!0)),b=Object(ze.useSelector)((t=o,n=cl.event,Object(pt.a)([Wg],function(e){if(!e.has(t))return null;var r=Object(be.List)(e.get(t).toIndexedSeq().toArray());return n?r.filter(function(e){return e.type===n}):r}))),h=f.filter(function(t){return t.uid!==e.boardId}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();b&&b.toArray().map(function(e){return{text:e.name,value:e.uid,icon:ve.createElement(cg,{cellType:e.type})}});e.openHandle(function(e,t){t&&g(t.replace(St()+yt+"/board/","")),p(e)});var g=function(e){i(e),u(void 0),e.length},v=function(){e.onCancel(),y()},y=function(){i(""),u(void 0)};return ve.createElement(Ni.a,{open:m,onClose:v,closeIcon:!0},ve.createElement(Ni.a.Header,null,e.t("insp.board.link.headline")),ve.createElement(Ni.a.Content,{image:!0},ve.createElement(Xe.a,{placeholder:e.t("insp.board.link.select_board"),fluid:!0,search:!0,selection:!0,options:h,onChange:function(e,t){g(t.value)},value:o,clearable:!0,style:{marginRight:"10px"}}),!1),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{children:e.t("app.form.cancel"),onClick:v}),ve.createElement(Ri.a,{primary:!0,children:e.t("app.form.save"),onClick:function(){""!==o?e.onLinkChosen(Et(o)):e.onLinkChosen(""),y()}})))}),Qg=function(e,t){var n=Math.round(.01*t.x*e.naturalWidth),r=Math.round(.01*t.y*e.naturalHeight),a=Math.round(.01*t.width*e.naturalWidth),o=Math.round(.01*t.height*e.naturalHeight),i=document.createElement("canvas");return i.width=a,i.height=o,i.getContext("2d").drawImage(e,n,r,a,o,0,0,a,o),i},Kg=function(e,t,n){return Qg(e,t).toDataURL(n)},Jg=function(e,t,n){return new Promise(function(){var r=Object(Oi.a)(pn.a.mark(function r(a,o){return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:Qg(e,t).toBlob(function(e){e||o(),a(Uh(e))},n);case 1:case"end":return r.stop()}},r,this)}));return function(e,t){return r.apply(this,arguments)}}())},Zg={aspect:0,unit:"%",x:0,y:0,width:100,height:100},Xg=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"],$g=["image/jpeg","image/png","image/webp"],ev=Object(De.b)()(function(e){var t=Object(ve.useState)(null),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(Zg),c=Object(Qe.a)(o,2),s=c[0],u=c[1],d=Object(ve.useState)(void 0),l=Object(Qe.a)(d,2),m=l[0],p=l[1],f=Object(ve.useState)(void 0),b=Object(Qe.a)(f,2),h=b[0],g=b[1],v=Object(ve.useState)(!1),y=Object(Qe.a)(v,2),O=y[0],E=y[1],k=Object(ve.useState)(!1),I=Object(Qe.a)(k,2),x=I[0],j=I[1],T=Object(ze.useDispatch)();Object(ve.useEffect)(function(){L(),setTimeout(L,1e3)}),e.openHandle(function(e,t){a("string"===typeof t?t:null),E(e)});var S=function(t){t.length<1?T(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))):p({file:t[0],src:URL.createObjectURL(t[0])})},C=function(){e.onCancel(),w()},w=function(){p(void 0),g(void 0),u(Zg),j(!1)},_=function(){var t=Object(Oi.a)(pn.a.mark(function t(){var n,a,o,i;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m){t.next=2;break}return t.abrupt("return");case 2:if(j(!0),n=$g.includes(m.file.type),a="image/svg+xml"===m.file.type,!n){t.next=10;break}t.t0=Kg(h,s,m.file.type).replace(";base64",""),t.next=21;break;case 10:if(!a){t.next=17;break}return t.next=13,Lh(m.file);case 13:t.t2=t.sent,t.t1="data:image/svg+xml,"+t.t2,t.next=20;break;case 17:return t.next=19,Dh(m.file);case 19:t.t1=t.sent.replace(";base64","");case 20:t.t0=t.t1;case 21:return o=t.t0,e.onFileUploaded(m.file.name,o),w(),t.abrupt("return");case 25:if(!n){t.next=31;break}return t.next=28,Jg(h,s,m.file.type);case 28:t.t3=t.sent,t.next=41;break;case 31:if(!a){t.next=37;break}return t.next=34,Lh(m.file);case 34:t.t4=t.sent,t.next=40;break;case 37:return t.next=39,Uh(m.file);case 39:t.t4=t.sent;case 40:t.t3=t.t4;case 41:i=t.t3,(r?N:A)(i,m.file.type);case 43:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),A=function(t,n){B.uploadBoardImage(e.boardId,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(t.data.imageId))}).catch(R).finally(w)},N=function(t,n){B.replaceBoardImage(e.boardId,r,t,n).then(function(t){e.onFileUploaded(m.file.name,"/buckets/boards/".concat(e.boardId,"/").concat(r))}).catch(R).finally(w)},R=function(){T(i.Command.error(e.t("insp.board.upload.upload_failed_title"),e.t("insp.board.upload.upload_failed_text"))),C()},L=function(){var e=document.getElementById("imageUploadPasteInput");e&&e.focus()};return ve.createElement(Ni.a,{open:O,onClose:C,closeIcon:!0,onClick:L},ve.createElement(Ni.a.Header,null,e.t("insp.board.upload.select_image")),ve.createElement(Ni.a.Content,{image:!0,onPaste:function(t){t.preventDefault();for(var n=t.clipboardData.items,r=null,a=0;a<n.length;a++){var o=n[a];if("image/jpeg"===o.type||"image/png"===o.type){r=o.getAsFile();break}}null!==r?S([r]):T(i.Command.error(e.t("insp.board.upload.paste_failed"),e.t("insp.board.upload.invalid_file_pasted")))}},ve.createElement(_i.a,{onDrop:S,disabled:!!m,accept:Xg,maxFiles:1,maxSize:5242880,multiple:!1},function(t){var n=t.getRootProps,r=t.getInputProps;return ve.createElement("section",{style:{height:"410px",width:"100%"}},ve.createElement("div",Object.assign({},n(),{style:{width:"100%",height:"100%",padding:"1px"}}),m&&$g.includes(m.file.type)&&ve.createElement(Bi.a,{style:{maxWidth:"100%",maxHeight:"400px"},imageStyle:{maxWidth:"100%",maxHeight:"400px"},src:m.src,crop:s,onChange:function(e,t){return u(t)},onImageLoaded:g}),m&&!$g.includes(m.file.type)&&ve.createElement("img",{src:URL.createObjectURL(m.file)}),!m&&ve.createElement("div",null,ve.createElement("input",{id:"imageUploadPasteInput",type:"text",style:{position:"fixed",left:"-10000px"}}),ve.createElement("input",r()),ve.createElement("p",null,e.t("insp.board.upload.drag_and_drop_info")))))})),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{children:e.t("app.form.cancel"),onClick:C}),ve.createElement(Ri.a,{primary:!0,children:e.t("app.form.save"),onClick:_,loading:x})))}),tv=n(1229),nv=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(""),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1];e.openHandle(function(e,t){t?s(t):(s(""),m(!1)),a(e)});var p=function(){e.onCancel(),f()},f=function(){s(""),m(!1)},b=function(){e.onLinkChosen(c),f()};return ve.createElement(Ni.a,{open:r,onClose:p,closeIcon:!0},ve.createElement(Ni.a.Header,null,e.t("insp.board.tasklink.headline")),ve.createElement(Ni.a.Content,null,ve.createElement(tv.a,{type:"url",onChange:function(e,t){var n;s(t.value),m(!(""===(n=t.value)||null!==n.match(/^https?:\/\/.+$/)))},value:c,fluid:!0,placeholder:"https://issue.tracker.com/tasks/1234",required:!0,error:l,autoFocus:!0,onKeyDown:function(e){13===e.keyCode&&b()},icon:ve.createElement(xp.a,{name:"close",link:!0,onClick:f})})),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{children:e.t("app.form.cancel"),onClick:p}),ve.createElement(Ri.a,{primary:!0,children:e.t("app.form.save"),onClick:b,disabled:l})))}),rv=n(266),av=Object(De.b)()(function(e){var t=Object(ve.useRef)(),n=Object(ve.useRef)(),r=Object(ve.useRef)(null),a=Object(ve.useState)([]),o=Object(Qe.a)(a,2),i=o[0],c=o[1],s=Object(ve.useState)([]),u=Object(Qe.a)(s,2),d=u[0],l=u[1],m=Object(ve.useState)(""),p=Object(Qe.a)(m,2),f=p[0],b=p[1],h=Object(ve.useState)(""),g=Object(Qe.a)(h,2),v=g[0],y=g[1];Object(ve.useEffect)(function(){t.current=new rv.OpenVidu,n.current=t.current.initPublisher(void 0,{audioSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1}),n.current.addVideoElement(r.current),n.current.on("streamPlaying",function(){t.current.getDevices().then(function(e){var t=e.filter(function(e){return"videoinput"===e.kind}),n=e.filter(function(e){return"audioinput"===e.kind});c(t),l(n),t.length>0&&b(t[0].deviceId),n.length>0&&y(n[0].deviceId)})})},[]),Object(ve.useEffect)(function(){t.current&&n.current&&f&&t.current.getUserMedia({videoSource:f,audioSource:void 0,publishAudio:!1,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1}).then(function(e){var t=e.getVideoTracks()[0];n.current.replaceTrack(t)})},[f]);var O=i.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}}),E=d.map(function(e){return{key:e.deviceId,value:e.deviceId,text:e.label}});return ve.createElement(Ni.a,{open:e.open,onClose:e.onCancel,closeIcon:!0},ve.createElement(Ni.a.Header,null,"Join Meeting"),ve.createElement(Ni.a.Content,null,ve.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},ve.createElement(Mp.a,null,ve.createElement(Mp.a.Field,null,ve.createElement("label",null,"Camera"),ve.createElement(Jh.a,{required:!0,value:f,options:O,onChange:function(e,t){return b(t.value)}})),ve.createElement(Mp.a.Field,null,ve.createElement("label",null,"Microphone"),ve.createElement(Jh.a,{required:!0,value:v,options:E,onChange:function(e,t){return y(t.value)}}))),ve.createElement("div",null,ve.createElement("video",{autoPlay:!0,muted:!0,ref:r})))),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{children:e.t("app.form.cancel"),onClick:e.onCancel}),ve.createElement(Ri.a,{loading:e.loadingMeetingRoom,primary:!0,children:"Join",onClick:function(){e.loadingMeetingRoom||e.onDevicesSelected({audio:v,video:f})}})))}),ov=je.a.create({baseURL:"https://mephisto-video.inseciacloud.com:3001"}),iv=function(){var e=Object(Oi.a)(pn.a.mark(function e(t){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ov(t);case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.error(t.url),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),cv={createSession:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){var n;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iv({method:"post",url:"sessions/".concat(t)});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getToken:function(){var e=Object(Oi.a)(pn.a.mark(function e(t){var n;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iv({method:"get",url:"sessions/".concat(t,"/token")});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},sv=new WebSocket("wss://mephisto-video.inseciacloud.com:3001");!function(e){e.GetUserPositions="GetUserPositions",e.GetUserPositionsResponse="GetUserPositionsResponse",e.UserPositionChanged="UserPositionChanged"}(Fg||(Fg={}));var uv,dv={sendPositionUpdate:function(e,t,n,r){sv.send(JSON.stringify({type:"UserPositionChanged",id:e,sessionId:t,left:n,top:r}))},listenForPositionUpdates:function(e,t,n){sv.onmessage=function(t){var r=JSON.parse(t.data);switch(r.type){case Fg.GetUserPositionsResponse:console.log("Got user positions from socket server: ",r),Object.keys(r.users).forEach(function(t){if(e!==t){var a=r.users[t].position;n(t,a)}});break;case Fg.UserPositionChanged:n(r.id,{left:r.left,top:r.top})}},sv.send(JSON.stringify({type:Fg.GetUserPositions,id:e,sessionId:t}))}},lv="@@InspectioLayout/ToggleSidebarCollapsed",mv="@@InspectioLayout/SetSidebarWidth",pv="@@InspectioLayout/SetRightSidebarWidth",fv="@@InspectioLayout/SetCodyConsoleHeight",bv=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),t}(Object(be.Record)({collapsed:!1,width:250,rightSidebarWidth:350,codyConsoleHeight:200})),hv=new bv,gv=function(e,t){return e.getIn(["inspectioSidebar","sidebar"])||new bv},vv=function(){return Object(pt.a)([gv],function(e){return e})},yv=(n(1178),{startPositionAvatar:{left:0,top:0},startPositionMouse:{x:0,y:0},currentPositionMouse:{x:0,y:0}}),Ov=function(e){var t=Object(ve.useRef)(null),n=Object(ve.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useRef)(yv);Object(ve.useEffect)(function(){e.user.streamManager.addVideoElement(t.current)},[]),Object(ve.useEffect)(function(){if(t.current&&!e.isLocalUser){var n=e.volume*(e.isAnyMegaphoneActive?.7:1);e.user.megaphoneOn&&(n=1),t.current.volume=n,0!==n||t.current.paused||t.current.pause(),n>0&&t.current.paused&&t.current.play()}},[e.volume,e.user.megaphoneOn,e.isAnyMegaphoneActive]),Object(ve.useEffect)(function(){var t=function(){o(!1)},n=function(t){if(e.isLocalUser&&a&&(i.current.currentPositionMouse.x=t.clientX,i.current.currentPositionMouse.y=t.clientY,e.onPositionChange)){var n=e.onPositionChange(i.current);dv.sendPositionUpdate(e.user.id,e.sessionId,n.left,n.top)}};return document.addEventListener("mouseup",t),document.addEventListener("mousemove",n),function(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",n)}});var c=e.isLocalUser?150:50+100*e.volume,s=Math.round(c/2),u=e.user.cameraOn&&(e.isLocalUser||e.volume>0||e.user.megaphoneOn),d=!e.isLocalUser&&0===e.volume&&!e.user.megaphoneOn;return ye.a.createElement("div",{style:{width:c,height:c,borderRadius:s,position:"absolute",left:e.user.position.left-c/2,top:e.user.position.top-c/2,pointerEvents:"auto",cursor:e.isLocalUser?"move":"default",zIndex:e.isLocalUser?10:1},onMouseDown:function(t){i.current.startPositionAvatar=e.user.position,i.current.startPositionMouse={x:t.clientX,y:t.clientY},o(!0)}},ye.a.createElement("div",{style:Object(Ye.a)({width:c,height:c,borderRadius:s,overflow:"hidden",backgroundColor:"#9cc8f5",pointerEvents:"auto"},e.isSpeaking?{border:"5px solid #9cc8f5"}:{border:"5px solid #ffffff"})},ye.a.createElement("video",{autoPlay:!0,disablePictureInPicture:!0,ref:t,muted:e.isLocalUser,style:{width:c,height:c,objectFit:"cover",objectPosition:"center",pointerEvents:"auto",display:u?"block":"none"}}),!u&&ye.a.createElement(Th.a,{src:e.user.avatar,avatar:!0,verticalAlign:"middle",style:{width:c,height:c,objectFit:"cover",objectPosition:"center",pointerEvents:"none",filter:d?"brightness(0.8)":"none"}})),ye.a.createElement("div",{style:{position:"absolute",bottom:"-26px",left:0,width:"100%",textAlign:"center",fontSize:"16px",pointerEvents:"auto"}},e.user.name),ye.a.createElement("i",{className:"icon bullhorn megaphone-indicator"+(e.user.megaphoneOn?" active":"")}))},Ev=0,kv=function(e){var t=Object(ve.useRef)(),n=Object(ve.useRef)(),r=Object(ve.useRef)({x:0,y:0}),a=Object(ve.useRef)(1),o=Object(ve.useRef)(!1),i=Object(ve.useRef)({}),c=Object(ve.useState)(0),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=Object(ve.useState)(Ev),m=Object(Qe.a)(l,2),p=(m[0],m[1]),f=kg(),b=Object(Qe.a)(f,1)[0],h=Object(ve.useState)({x:0,y:0}),g=Object(Qe.a)(h,2),v=g[0],y=g[1],O=Object(ve.useState)(1),E=Object(Qe.a)(O,2),k=E[0],I=E[1],x=Object(ve.useState)(),j=Object(Qe.a)(x,2),T=j[0],S=j[1],C=Object(ze.useSelector)(vv()),w=Object(ve.useRef)([]),_=Object(ve.useRef)([]);r.current=v,a.current=k;var A=function(e){n.current.signal({data:JSON.stringify(e),type:"userChanged"})},B=function(){n.current.on("streamDestroyed",function(e){var t;t=e.stream,w.current=w.current.filter(function(e){return e.streamManager.stream!==t}),d(u-1),e.preventDefault()})},N=function(){var r=t.current.initPublisher(void 0,{audioSource:e.audioDevice,videoSource:e.videoDevice,publishAudio:!0,publishVideo:!0,resolution:"320x240",frameRate:30,insertMode:"APPEND",mirror:!1});n.current.capabilities.publish&&r.on("accessAllowed",function(){n.current.publish(r).then(function(){o.current=!0})}),n.current.on("signal:userChanged",function(e){w.current.forEach(function(t){if(t.connectionId===e.from.connectionId){var n=JSON.parse(e.data);console.log("[vidu] Updating user data: ",n),n.hasOwnProperty("isVideoActive")&&(t.cameraOn=n.isVideoActive,p(++Ev)),n.hasOwnProperty("isAudioActive")&&(t.micOn=n.isAudioActive,p(++Ev)),n.hasOwnProperty("isMegaphoneActive")&&(t.megaphoneOn=n.isMegaphoneActive,p(++Ev))}})}),B(),A({isScreenShareActive:!1}),S({id:e.id,name:e.name,avatar:e.avatar,streamManager:r,connectionId:n.current.connection.connectionId,position:e.initialPosition,cameraOn:!0,micOn:!0,megaphoneOn:!1}),r.on("streamPlaying",function(e){console.log("[vidu] publisher stream playing",e)})},R=function(){var t=Object(Oi.a)(pn.a.mark(function t(){var r,a;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,cv.createSession(e.sessionId);case 3:return r=t.sent,t.next=6,cv.getToken(r);case 6:return a=t.sent,t.next=9,n.current.connect(a,{id:e.id,name:e.name,avatar:e.avatar,position:e.initialPosition,isVideoActive:!0,isAudioActive:!0});case 9:N(),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),alert("There was an error connecting to the session: "+t.t0.message),console.log("[vidu] There was an error connecting to the session:",t.t0.code,t.t0.message);case 16:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),L=function(e,t){i.current[e]={position:t},w.current.forEach(function(n){n.id===e&&(n.position=t)}),p(++Ev)},U=Object(ve.useCallback)(function(){n.current&&n.current.disconnect(),n.current=void 0,t.current=void 0},[]);Object(ve.useEffect)(function(){return window.addEventListener("beforeunload",U),t.current=new rv.OpenVidu,t.current.setAdvancedConfiguration({forceMediaReconnectionAfterNetworkDrop:!0,noStreamPlayingEventExceptionTimeout:15e3}),n.current=t.current.initSession(),n.current.on("publisherStartSpeaking",function(e){_.current.includes(e.streamId)||(_.current.push(e.streamId),p(++Ev))}),n.current.on("publisherStopSpeaking",function(e){var t=_.current.indexOf(e.streamId);-1!==t&&(_.current.splice(t,1),p(++Ev))}),n.current.on("streamCreated",function(e){console.log("[vidu] STREAM CREATED");var t=n.current.subscribe(e.stream,void 0);t.on("streamPlaying",function(e){console.log("[vidu] STREAM PLAYING",e,t)});var r=JSON.parse(e.stream.connection.data);console.log("[vidu] Remote Positions: ",i.current),w.current.push({id:r.id,name:r.name,avatar:r.avatar,streamManager:t,connectionId:e.stream.connection.connectionId,position:i.current[r.id]?i.current[r.id].position:{left:200,top:500},cameraOn:r.isVideoActive,micOn:r.isAudioActive,megaphoneOn:r.isMegaphoneActive}),console.log("[vidu] pushed remote user",w.current),d(u+1)}),n.current.on("reconnecting",function(){return console.warn("[vidu] Oops! Trying to reconnect to the session")}),n.current.on("reconnected",function(){return console.log("[vidu] Hurray! You successfully reconnected to the session")}),n.current.on("sessionDisconnected",function(e){"networkDisconnect"===e.reason?console.warn("[vidu] Dang-it... You lost your connection to the session",e):console.warn("[vidu] Vidu session disconnect! Reason: ",e.reason,e)}),n.current.on("exception",function(e){if("ICE_CONNECTION_FAILED"===e.name){var t=e.origin;return console.warn("[vidu] Stream "+t.streamId+" broke!"),void console.warn("[vidu] Reconnection process automatically started")}if("ICE_CONNECTION_DISCONNECTED"===e.name){var n=e.origin;return console.warn("[vidu] Stream "+n.streamId+" disconnected!"),void console.warn("[vidu] Giving it some time to be restored. If not possible, reconnection process will start")}console.error("[vidu] OpenVidu session exception occurred: ",e)}),R(),dv.listenForPositionUpdates(e.id,e.sessionId,L),function(){window.removeEventListener("beforeunload",U)}},[]),Object(ve.useEffect)(function(){var e=function(e){y({x:e.x,y:e.y})},t=function(e,t){I(e),y(t)};if(b){var n=b.getCurrentTranslate();y({x:n.x,y:n.y}),I(b.getCurrentScale()),b.onPanning(e),b.onZoom(t)}return function(){b&&(b.offPanning(e),b.offZoom(t))}},[b]);var D=!!T;Object(ve.useEffect)(function(){if(b&&T){var t=b.getCurrentScale(),n={left:-1*b.getCurrentTranslate().x+e.initialPosition.left/t,top:-1*b.getCurrentTranslate().y+e.initialPosition.top/t};console.log("[vidu] local user",n,t),S(Object(Ye.a)({},T,{position:n}))}},[b,D]);var z=Boolean(T&&T.megaphoneOn||w.current.find(function(e){return e.megaphoneOn})),M=w.current.map(function(t){return ye.a.createElement("div",null,ye.a.createElement(Ov,{key:t.id,user:t,isLocalUser:!1,sessionId:e.sessionId,volume:T?Math.max(Math.min((700-Math.sqrt(Math.pow(t.position.top-T.position.top,2)+Math.pow(t.position.left-T.position.left,2)))/500,1),0):0,isSpeaking:_.current.includes(t.streamManager.stream.streamId),isAnyMegaphoneActive:z}))});return ye.a.createElement("div",{className:"diagram-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"}},ye.a.createElement("div",{style:{transform:"scale(".concat(k,") translate(").concat(v.x,"px, ").concat(v.y,"px)"),transformOrigin:"0 0"}},T&&ye.a.createElement("div",null,ye.a.createElement(Ov,{user:T,isLocalUser:!0,sessionId:e.sessionId,onPositionChange:function(e){var t=b.getCurrentScale(),n=e.currentPositionMouse.x-e.startPositionMouse.x,r=e.currentPositionMouse.y-e.startPositionMouse.y,a={left:e.startPositionAvatar.left+n/t,top:e.startPositionAvatar.top+r/t};return T&&S(Object(Ye.a)({},T,{position:a})),a},volume:0,isSpeaking:_.current.includes(T.streamManager.stream.streamId),isAnyMegaphoneActive:z})),M),T&&ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("button",{onClick:function(){if(T){var e=!T.cameraOn;T.streamManager.publishVideo(e),S(Object(Ye.a)({},T,{cameraOn:e})),A({isVideoActive:e})}},style:{position:"absolute",bottom:20,left:C.width+20+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ye.a.createElement("i",{className:T.cameraOn?"video icon":"icon-fas-video-slash-solid",style:T.cameraOn?{color:"#c10303"}:{color:"#878787"}})}),ye.a.createElement("button",{onClick:function(){if(T){var e=!T.micOn;T.streamManager.publishAudio(e),S(Object(Ye.a)({},T,{micOn:e})),A({isAudioActive:e})}},style:{position:"absolute",bottom:20,left:C.width+70+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ye.a.createElement("i",{className:T.micOn?"icon microphone":"icon microphone slash",style:T.micOn?{color:"#c10303"}:{color:"#878787"}})}),ye.a.createElement("button",{onClick:function(){if(T){var e=!T.megaphoneOn;S(Object(Ye.a)({},T,{megaphoneOn:e})),A({isMegaphoneActive:e})}},style:{position:"absolute",bottom:20,left:C.width+120+"px",pointerEvents:"all"},className:"ui circular icon button big video-control",children:ye.a.createElement("i",{className:"icon bullhorn",style:T.megaphoneOn?{color:"#c10303"}:{color:"#878787"}})})))},Iv=function(e){var t=Object(ve.useState)(!0),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(""),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(""),d=Object(Qe.a)(u,2),l=d[0],m=d[1];return ve.createElement(ve.Fragment,null,""!==c&&""!==l&&ve.createElement(kv,{sessionId:e.sessionId,id:e.id,name:e.name,avatar:e.avatar,initialPosition:e.initialPosition,audioDevice:l,videoDevice:c}),ve.createElement(av,{open:r,onDevicesSelected:function(e){m(e.audio),s(e.video),a(!1)},onCancel:function(){a(!1)},loadingMeetingRoom:e.loadingMeetingRoom}))},xv=function(){function e(){Object(Be.a)(this,e),this.mouseSyncRef=void 0,this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}return Object(Ne.a)(e,[{key:"setMouseSync",value:function(e){var t=this;this.mouseSyncRef=e,this.mouseSyncRef&&(this.cachedUserJoinedListeners.forEach(function(e){return t.mouseSyncRef.onUserJoined(e)}),this.cachedUserLeftListeners.forEach(function(e){return t.mouseSyncRef.onUserLeft(e)}),this.cachedBoardTimerStartedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStarted(e)}),this.cachedBoardTimerPausedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerPaused(e)}),this.cachedBoardTimerStoppedListeners.forEach(function(e){return t.mouseSyncRef.onBoardTimerStopped(e)})),this.cachedUserJoinedListeners=[],this.cachedUserLeftListeners=[],this.cachedBoardTimerStartedListeners=[],this.cachedBoardTimerPausedListeners=[],this.cachedBoardTimerStoppedListeners=[]}},{key:"emitUserGestureChanged",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserGestureChanged(e)}},{key:"emitUserIsAutoScrolling",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserIsAutoScrolling(e)}},{key:"emitUserMouseMove",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseMove(e,t)}},{key:"emitUserMouseScroll",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.emitUserMouseScroll(e)}},{key:"hideObservingFrame",value:function(){this.mouseSyncRef&&this.mouseSyncRef.hideObservingFrame()}},{key:"keepMousePositionsInPlaceOnPanning",value:function(e,t){this.mouseSyncRef&&this.mouseSyncRef.keepMousePositionsInPlaceOnPanning(e,t)}},{key:"observeUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.observeUser(e)}},{key:"onUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserJoined(e):this.cachedUserJoinedListeners.push(e)}},{key:"offUserJoined",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserJoined(e):this.cachedUserJoinedListeners=this.cachedUserJoinedListeners.filter(function(t){return t!==e})}},{key:"onUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onUserLeft(e):this.cachedUserLeftListeners.push(e)}},{key:"offUserLeft",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offUserLeft(e):this.cachedUserLeftListeners=this.cachedUserLeftListeners.filter(function(t){return t!==e})}},{key:"startSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startSync(e)}},{key:"stopMouseTrackingOfUser",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopMouseTrackingOfUser(e)}},{key:"stopObservingUser",value:function(){this.mouseSyncRef&&this.mouseSyncRef.stopObservingUser()}},{key:"stopSync",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopSync(e)}},{key:"syncLastKnownAbsolutePointsAfterPanning",value:function(){this.mouseSyncRef&&this.mouseSyncRef.syncLastKnownAbsolutePointsAfterPanning()}},{key:"trackMouseOfRemoteUser",value:function(e,t,n){this.mouseSyncRef&&this.mouseSyncRef.trackMouseOfRemoteUser(e,t,n)}},{key:"startBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.startBoardTimer(e)}},{key:"onBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerPaused(e):this.cachedBoardTimerPausedListeners.push(e)}},{key:"offBoardTimerPaused",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerPaused(e):this.cachedBoardTimerPausedListeners=this.cachedBoardTimerPausedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStarted(e):this.cachedBoardTimerStartedListeners.push(e)}},{key:"offBoardTimerStarted",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStarted(e):this.cachedBoardTimerStartedListeners=this.cachedBoardTimerStartedListeners.filter(function(t){return t!==e})}},{key:"onBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.onBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners.push(e)}},{key:"offBoardTimerStopped",value:function(e){this.mouseSyncRef?this.mouseSyncRef.offBoardTimerStopped(e):this.cachedBoardTimerStoppedListeners=this.cachedBoardTimerStoppedListeners.filter(function(t){return t!==e})}},{key:"pauseBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.pauseBoardTimer(e)}},{key:"stopBoardTimer",value:function(e){this.mouseSyncRef&&this.mouseSyncRef.stopBoardTimer(e)}}]),e}();function jv(){return uv||(uv=new xv),[uv,function(e){return uv.setMouseSync(e)}]}var Tv=function(e){function t(e){var n;Object(Be.a)(this,t),(n=Object(Re.a)(this,Object(Le.a)(t).call(this,e))).mxGraph=void 0,n.divGraph=void 0,n.divDimmer=void 0,n.editorUi=void 0,n.codec=void 0,n.initialized=!1,n.mouseSync=void 0,n.iioCody=void 0,n.lastFocusedCells="",n.lastClicks=null,n.uploadOpenHandle=void 0,n.boardLinkHandle=void 0,n.taskLinkHandle=void 0,n.imageUploadedListener=null,n.boardLinkListener=null,n.taskLinkListener=null,n.setUsedGraph=void 0,n.setUsedMouseSync=void 0,n.activeGraphElement=void 0,n.viduEnabled=!1,n.viduUser=null,n.board=void 0,n.syncChangesWithCody=function(){var e=Object(Oi.a)(pn.a.mark(function e(t,r){var a,o,i,c,s,u,d,l,m,p,f,b,h,g,v,y,O,E,k,I,x,j,T,S,C,w,_,A,B,N,R,L,U;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.iioCody&&n.iioCody.syncRequired()){e.next=3;break}return console.log("Skipping sync with cody, because no server is listening for syncs at the moment"),e.abrupt("return");case 3:if(console.log("syncing changes with cody",t.toJS()),a=n.editorUi.editor.graph,o=n.props.board.uid,i=Tt(o),t.action!==Vd.deleted){e.next=57;break}c=[],s=[],u=!0,d=!1,l=void 0,e.prev=13,m=r[Symbol.iterator]();case 15:if(u=(p=m.next()).done){e.next=30;break}if(f=p.value,!(b=f.child)){e.next=27;break}if(inspectioUtils.getTypeInclEdge(b)!==sl.edge){e.next=22;break}return s.push(b),e.abrupt("continue",27);case 22:if(h=a.getVerticesTree(b),c.push.apply(c,Object(Za.a)(h.map(function(e){return e.getId()}))),!h.length){e.next=27;break}return e.next=27,n.iioCody.syncDeletedNodes(o,h.map(function(e){return new Xd(e,a.getModel(),!1,i)}));case 27:u=!0,e.next=15;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(13),d=!0,l=e.t0;case 36:e.prev=36,e.prev=37,u||null==m.return||m.return();case 39:if(e.prev=39,!d){e.next=42;break}throw l;case 42:return e.finish(39);case 43:return e.finish(36);case 44:g=0;case 45:if(!(g<s.length)){e.next=56;break}if(v=s[g],y=[],v.source&&!c.includes(v.source.getId())&&y.push(new Xd(v.source,a.getModel(),!1,i)),v.target&&!c.includes(v.target.getId())&&y.push(new Xd(v.target,a.getModel(),!1,i)),!y.length){e.next=53;break}return e.next=53,n.iioCody.syncChangedNodes(o,y);case 53:g++,e.next=45;break;case 56:return e.abrupt("return");case 57:if(t.cellId){e.next=60;break}return console.log("no cellId given for transaction"),e.abrupt("return");case 60:O=t.cellId.split(";"),E=[],k=[],I=!0,x=!1,j=void 0,e.prev=66,T=O[Symbol.iterator]();case 68:if(I=(S=T.next()).done){e.next=105;break}if(C=S.value,w=a.model.getCell(C)){e.next=74;break}return console.log("skipping cellId, cause not found in graph model",C),e.abrupt("continue",102);case 74:if(inspectioUtils.getTypeInclEdge(w)!==sl.edge){e.next=79;break}return console.log("change effected edge",w),w.source&&!k.includes(w.source.getId())&&(console.log("adding edge source to effected cells"),k.push(w.source.getId()),E.push(new Xd(w.source,a.getModel(),!1,i))),w.target&&!k.includes(w.target.getId())&&(console.log("adding edge target to effected cells"),k.push(w.target.getId()),E.push(new Xd(w.target,a.getModel(),!1,i))),e.abrupt("continue",102);case 79:if(a.isVertex(w)){e.next=101;break}for(_=a.getVerticesTree(w),A=!0,B=!1,N=void 0,e.prev=84,R=_[Symbol.iterator]();!(A=(L=R.next()).done);A=!0)U=L.value,k.includes(U.getId())||(k.push(U.getId()),E.push(new Xd(U,a.getModel(),!1,i)));e.next=92;break;case 88:e.prev=88,e.t1=e.catch(84),B=!0,N=e.t1;case 92:e.prev=92,e.prev=93,A||null==R.return||R.return();case 95:if(e.prev=95,!B){e.next=98;break}throw N;case 98:return e.finish(95);case 99:return e.finish(92);case 100:return e.abrupt("continue",102);case 101:k.includes(w.getId())||(k.push(w.getId()),E.push(new Xd(w,a.getModel(),!1,i)));case 102:I=!0,e.next=68;break;case 105:e.next=111;break;case 107:e.prev=107,e.t2=e.catch(66),x=!0,j=e.t2;case 111:e.prev=111,e.prev=112,I||null==T.return||T.return();case 114:if(e.prev=114,!x){e.next=117;break}throw j;case 117:return e.finish(114);case 118:return e.finish(111);case 119:return e.next=121,n.iioCody.syncChangedNodes(o,E);case 121:case"end":return e.stop()}},e,this,[[13,32,36,44],[37,,39,43],[66,107,111,119],[84,88,92,100],[93,,95,99],[112,,114,118]])}));return function(t,n){return e.apply(this,arguments)}}(),n.state={readyToJoinVidu:!1},n.LoadGraph=n.LoadGraph.bind(Object($h.a)(Object($h.a)(n))),n.divGraph=ye.a.createRef(),n.divDimmer=ye.a.createRef(),n.codec=new mxCodec,n.codec.lookup=function(e){var t=n.editorUi.editor.graph.model.getCell(e);return t||null};var r=kg(),a=Object(Qe.a)(r,2)[1];n.setUsedGraph=a;var o=jv(),i=Object(Qe.a)(o,2)[1];if(n.setUsedMouseSync=i,e.location.search){var c=new URLSearchParams(e.location.search);c.get("vidu")&&(n.viduEnabled=!0),c.get("user")&&(n.viduUser=c.get("user"))}return n}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUserBoard(this.props.match.params.uid)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this;if(!this.board&&e.board&&""!==e.user.name)return!!e.board.detailsFetched&&(this.initGraphBoard(e),!0);if(this.board&&this.board.uid!==e.board.uid&&e.history.replace(jt,{href:Et(e.board.uid)}),this.editorUi&&!this.board.writeAccess&&e.board.writeAccess&&this.editorUi.editor.graph.setEnabled(!0),this.editorUi&&this.props.liteMode!==e.liteMode&&this.setLiteMode(e),this.editorUi&&!e.queue.isEmpty()){var r=0;return e.queue.forEach(function(e){var t=[];if(!n.board||e.toBoardVersion().isNewerThan(n.board.version)){r++,e.changeSet.forEach(function(e){var r=mxUtils.parseXml(e),a=n.codec.decode(r.documentElement);a.model=n.editorUi.editor.graph.model,a.execute(),t.push(a),n.syncActiveGraphElementWithRemoteChange(a)});var a=new mxUndoableEdit(n.editorUi.editor.graph.model,!1);a.changes=t,a.notify=function(){a.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",a,"changes",a.changes))},n.editorUi.editor.graph.model.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",a,"changes",t)),n.syncChangesWithCody(e,t).catch(function(e){return console.error(e)})}else console.log("Skipped outdated remote board change: ",e.toJSON())}),r>0&&this.saveBoard(e.queue.last(new M.BoardChanged(M.defaultBoardChangedProps)).toBoardVersion().asHead()),e.dequeueBoardChanged(e.queue),this.editorUi&&this.checkScrollToCells(e),!1}return this.editorUi&&e.board.shouldImport&&(this.editorUi.actions.get("import").funct(function(t){var r=mxUtils.getXml(n.editorUi.editor.getGraphXml());n.board=n.board.updateXml(r,e.user.uid),e.onBoardImported(e.board.uid,n.board,Yd(n.editorUi.editor.graph,n.editorUi))}),e.onBoardImportStarted(this.board.uid)),this.editorUi&&e.board.shouldExport&&(this.editorUi.actions.get("export").funct(),e.onBoardExported(e.board.uid)),this.editorUi&&this.checkScrollToCells(e),!(this.state.readyToJoinVidu||!t.readyToJoinVidu)&&(console.log("Component should update since it is initialized now!"),!0)}},{key:"componentWillUnmount",value:function(){this.editorUi&&this.editorUi.destroy(),this.setUsedGraph(void 0),this.setUsedMouseSync(void 0),document.body.style.overflow="auto",document.title="prooph board";var e=document.getElementById("topmenuUsers");e&&(e.innerHTML=""),this.props.board&&(this.props.stopBoardSync(this.props.board.uid),this.props.clearBoardHistory(this.props.board.uid)),this.mouseSync&&this.mouseSync.stopSync({userId:this.props.user.uid,boardId:this.props.board.uid}),this.iioCody&&(this.iioCody.onSyncRequired(void 0),this.iioCody.disconnect())}},{key:"render",value:function(){var e=this;return ye.a.createElement(ye.a.Fragment,null,ye.a.createElement("div",{className:"graph-container disable-user-select",ref:this.divGraph,id:"divGraph"}),ye.a.createElement("div",{ref:this.divDimmer},ye.a.createElement(Lp.a,{active:!0,className:"page"},ye.a.createElement(Up.a,{size:"large"},"Loading Board"))),this.props.board&&ye.a.createElement(ev,{boardId:this.props.board.uid,openHandle:function(t){return e.uploadOpenHandle=t},onCancel:function(){e.uploadOpenHandle(!1)},onFileUploaded:function(t,n){e.imageUploadedListener&&e.imageUploadedListener(t,n)}}),this.props.board&&ye.a.createElement(Yg,{boardId:this.props.board.uid,openHandle:function(t){return e.boardLinkHandle=t},onCancel:function(){e.boardLinkHandle(!1)},onLinkChosen:function(t){e.boardLinkListener&&e.boardLinkListener(t)}}),this.props.board&&ye.a.createElement(nv,{openHandle:function(t){return e.taskLinkHandle=t},onCancel:function(){e.taskLinkHandle(!1)},onLinkChosen:function(t){e.taskLinkListener&&e.taskLinkListener(t)}}),this.props.board&&this.viduEnabled&&ye.a.createElement(Iv,{sessionId:this.props.board.uid,id:this.viduUser||this.props.user.uid,name:this.props.user.name,avatar:this.props.user.avatarUrl,initialPosition:{left:Math.floor(window.innerWidth/2),top:Math.floor(window.innerHeight/2)},loadingMeetingRoom:!this.state.readyToJoinVidu}))}},{key:"initGraphBoard",value:function(e){this.mxGraph=vg(),this.LoadGraph(e,{},this.mxGraph),document.body.style.overflow="hidden",document.title=e.board.name+" - prooph board",this.board=e.board}},{key:"saveBoard",value:function(e,t){var n=mxUtils.getXml(this.editorUi.editor.getGraphXml());e?(this.board=this.board.updateXmlAfterRemoteChange(n,e),console.log("board version on save remote change: ",this.board.version.version),this.props.onLocalBoardUpdatedWithRemoteChange(this.board.uid,this.board,Yd(this.editorUi.editor.graph,this.editorUi))):(this.board=this.board.updateXml(n,this.props.user.uid),console.log("board version on save local change: ",this.board.version.version)),t&&this.props.saveBoard(this.board,Yd(this.editorUi.editor.graph,this.editorUi))}},{key:"LoadGraph",value:function(e,t,n){var r=this,a=this.divGraph.current;a.innerHTML="",mxUtils.alert=function(e){r.props.onError("Board Error",e)};var o=Un.clone(MXGRAPH_ROOT_UUIDS),i=Og()();mxGraphModel.prototype.createId=function(e){var t=o.pop();return t||i.fromUUID(nt.a.v4())};var c=EditorUi.prototype.init;EditorUi.prototype.init=function(){c.apply(this,arguments),this.actions.get("export").setEnabled(!1)},mxResources.loadDefaultBundle=!1;var s=mxResources.getDefaultBundle(RESOURCE_BASE,mxLanguage)||mxResources.getSpecialBundle(RESOURCE_BASE,mxLanguage);n.mxUtils.getAll([s,STYLE_PATH+"/"+ispConst.THEME+"/style.xml"],function(t){mxResources.parse(t[0].getText());var n={};if(n[Graph.prototype.defaultThemeName]=t[1].getDocumentElement(),r.editorUi=new EditorUi(new Editor("0"===urlParams.chrome,n),a,!1,e.board.name,"boardSidebarContainer"),function(e,t,n,r,a){var o=e.editor.graph;o.setHistory(t),o.enableCopyToClipboard(n),o.setDeeplinkFactory(r),o.enableNotifications(a)}(r.editorUi,e.history,gg.a,Tt(e.board.uid),function(t,n,r){"info"===r?e.onInfo(t,n):e.onError(t,n)}),r.attachImageUploadListener(),r.attachLinkBoardListener(),r.attachLinkTaskListener(),r.attachImageReplaceListener(),r.attachChangeActiveGraphElementListener(),r.attachSyncLabelChangedListener(),r.attachLookupElementListener(e),r.attachShowElementDetailsListener(),r.attachCellConnectedListener(),r.attachCodyListener(),r.initializeAutoSaveManager(e),r.setLiteMode(e),e.board.xml){var i=mxUtils.parseXml(e.board.xml);r.editorUi.editor.graph.model.beginUpdateWithoutChangeNotifications();try{r.editorUi.editor.graph.enableLazyTextPaint(),r.editorUi.editor.graph.importGraphModel(i.documentElement,void 0,void 0,void 0,!1)}finally{r.editorUi.editor.graph.model.endUpdateWithoutChangeNotifications(),r.editorUi.editor.graph.disableLazyTextPaint()}if(r.editorUi.editor.graph.setEnabled(e.board.writeAccess),r.editorUi.editor.graph.initContainerStyles(),r.viduEnabled?r.editorUi.editor.graph.zoom(1,!0,!1,!1):(r.editorUi.editor.graph.zoom(.19,!0,!1,!1),r.editorUi.editor.graph.showAll()),e.location.search){var c=new URLSearchParams(e.location.search);c.get("clicks")?r.lastClicks=c.get("clicks"):r.lastClicks="0"}window.setTimeout(function(){r.initialized=!0,r.setLiteMode(r.props),r.checkScrollToCells(e)||r.viduEnabled||r.editorUi.editor.graph.center(),r.divDimmer.current.innerHTML=""},e.location.search?3e3:1e3)}else r.initialized=!0,r.viduEnabled&&!r.state.readyToJoinVidu&&(console.log("set state initialized without timeout func"),r.setState({readyToJoinVidu:!0})),r.divDimmer.current.innerHTML="";r.editorUi.editor.graph.setDefaultParent(r.editorUi.editor.graph.model.getCell(MXGRAPH_ROOT_UUIDS[0])),r.setUsedGraph(Yd(r.editorUi.editor.graph,r.editorUi)),o=[],e.syncBoard(e.board.uid,e.user.uid,e.user.name),e.onBoardInitialized(e.board,Yd(r.editorUi.editor.graph,r.editorUi)),r.initMouseSync(e)})}},{key:"attachImageUploadListener",value:function(){var e=this;this.editorUi.editor.graph.onInsertImage(function(t){e.imageUploadedListener=function(n,r){t(n,r),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0)})}},{key:"attachLinkBoardListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkBoard(function(t,n){e.boardLinkListener=function(t){n(t),e.boardLinkHandle(!1),e.boardLinkListener=null},e.boardLinkHandle(!0,t)})}},{key:"attachLinkTaskListener",value:function(){var e=this;this.editorUi.editor.graph.onLinkTask(function(t,n){e.taskLinkListener=function(t){n(t),e.taskLinkHandle(!1),e.taskLinkListener=null},e.taskLinkHandle(!0,t)})}},{key:"attachImageReplaceListener",value:function(){var e=this;this.editorUi.editor.graph.onReplaceImage(function(t,n){e.imageUploadedListener=function(t,r){n(t,r),e.uploadOpenHandle(!1),e.imageUploadedListener=null},e.uploadOpenHandle(!0,t)})}},{key:"attachChangeActiveGraphElementListener",value:function(){var e=this;this.editorUi.editor.graph.onChangeActiveGraphElement(function(t,n,r){if(!t)return e.activeGraphElement=void 0,void e.props.onActiveGraphElementChanged(e.props.board.uid,void 0);if(t.isEdge()){var a,o="Edge";return t.source&&t.target&&(o=inspectioUtils.getLabelText(t.source)+" -> "+inspectioUtils.getLabelText(t.target),a={source:t.source.getId(),target:t.target.getId()}),void e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:gi.edge,label:o,metadata:inspectioUtils.getMetadata(t),edgeData:a,updateMetadata:n,updateSimilarElements:r})}t.isVertex()&&e.props.onActiveGraphElementChanged(e.props.board.uid,{id:t.getId(),type:inspectioUtils.getTypeInclEdge(t),label:inspectioUtils.getLabelText(t),metadata:inspectioUtils.getMetadata(t),updateMetadata:n,updateSimilarElements:r}),e.activeGraphElement=t})}},{key:"attachSyncLabelChangedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.LABEL_CHANGED,function(t,n){var r=n.getProperty("cell");r.isVertex()&&e.activeGraphElement&&e.activeGraphElement.getId()===r.getId()&&e.props.onActiveGraphElementLabelChanged(e.props.board.uid,r.getId(),inspectioUtils.getLabelText(r))})}},{key:"syncActiveGraphElementWithRemoteChange",value:function(e){if(e instanceof mxValueChange){var t=e.cell;t&&t.isVertex()&&this.activeGraphElement&&this.activeGraphElement.getId()===t.getId()&&(this.props.onActiveGraphElementLabelChanged(this.props.board.uid,t.getId(),inspectioUtils.getLabelText(t)),this.props.onActiveGraphElementMetadataChanged(this.props.board.uid,t.getId(),inspectioUtils.getMetadata(t)))}}},{key:"attachLookupElementListener",value:function(e){this.editorUi.editor.graph.onLookupElement(function(t,n){n&&(t="type:".concat(n.toLowerCase(),";").concat(t)),e.filterElementsTree(e.board.uid,t,!0)})}},{key:"initializeAutoSaveManager",value:function(e){var t=this,n=mxAutoSaveManager.prototype.graphModelChanged,r=new mxAutoSaveManager(this.editorUi.editor.graph);r.autoSaveDelay=1,r.autoSaveThrottle=1,r.autoSaveThreshold=1,r.graphModelChanged=function(a){var o=[];t.sortChanges(a).forEach(function(e){return o.push(mxUtils.getXml(t.codec.encode(e)))}),t.saveBoard(void 0,!0);var i=t.detectHistoryAttributesFromChanges(a),c=i.action,s=i.type,u=i.label,d=i.cellId,l=M.localBoardChanged(e.board.uid,Object(be.List)(o),t.board.version.version,e.user.uid,c,s,u,d);e.onLocalBoardChanged(l),t.syncChangesWithCody(l,a).catch(function(e){return console.error(e)}),n.call(r,a)}}},{key:"setLiteMode",value:function(e){e.liteMode?this.editorUi.editor.graph.enableLiteMode():this.editorUi.editor.graph.disableLiteMode()}},{key:"attachShowElementDetailsListener",value:function(){var e=this;this.editorUi.editor.graph.onShowMetadata(function(){e.props.toggleElementDetails(e.props.board.uid,!0)})}},{key:"attachCellConnectedListener",value:function(){var e=this;this.editorUi.editor.graph.addListener(mxEvent.CELL_CONNECTED,function(t,n){!n.getProperty("source")&&window.setTimeout(function(){e.editorUi.editor.graph.setSelectionCell(n.getProperty("terminal"))},10)})}},{key:"checkScrollToCells",value:function(e){var t=this;if(!this.initialized)return!1;var n=!1;if(e.board.xml&&e.location.search){var r=new URLSearchParams(e.location.search),a=this.editorUi.editor.graph,o=r.get("cells");if(o){if(this.lastFocusedCells===o&&this.lastClicks===r.get("clicks"))return!1;var i=null!==this.lastClicks;this.lastFocusedCells=o,this.lastClicks=r.get("clicks");var c=o.split(";"),s=[];c.forEach(function(e){var t=a.model.getCell(e);t&&s.push(t)}),s.length>0&&(a.scrollCellsIntoView(s,!0,!0,i),n=!0,1===parseInt(r.get("select")||"0")&&a.setSelectionCells(s))}}return window.setTimeout(function(){t.viduEnabled&&!t.state.readyToJoinVidu&&(console.log("set state initialized in timout func"),t.setState({readyToJoinVidu:!0}))},1e3),n}},{key:"attachCodySyncListener",value:function(){var e=this;this.iioCody&&this.iioCody.onSyncRequired(Object(Oi.a)(pn.a.mark(function t(){var n,r,a,o,i,c,s,u,d,l,m;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.iioCody){t.next=45;break}if(n=e.editorUi.editor.graph,r=n.getAllVertexElementsOfActiveLayer(),a=[],o=Tt(e.props.board.uid),!r||!Array.isArray(r)){t.next=44;break}i=!0,c=!1,s=void 0,t.prev=9,u=r[Symbol.iterator]();case 11:if(i=(d=u.next()).done){t.next=24;break}if(m=d.value,(l=a).push.apply(l,Object(Za.a)(Wd([new Xd(m,n.getModel(),!1,o)]))),!(a.length>=10)){t.next=21;break}return t.next=17,e.iioCody.syncNodes(e.props.board.uid,a);case 17:if(t.sent){t.next=20;break}return t.abrupt("return");case 20:a=[];case 21:i=!0,t.next=11;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(9),c=!0,s=t.t0;case 30:t.prev=30,t.prev=31,i||null==u.return||u.return();case 33:if(t.prev=33,!c){t.next=36;break}throw s;case 36:return t.finish(33);case 37:return t.finish(30);case 38:if(!(a.length>0)){t.next=44;break}return t.next=41,e.iioCody.syncNodes(e.props.board.uid,a);case 41:if(t.sent){t.next=44;break}return t.abrupt("return",!1);case 44:e.iioCody.syncFinished();case 45:case"end":return t.stop()}},t,this,[[9,26,30,38],[31,,33,37]])})))}},{key:"attachCodyListener",value:function(){var e=this,t=this.editorUi.editor.graph;t.onTriggerCody(function(n){if(e.props.board&&!e.props.board.shouldShowCodyConsole&&e.props.toggleCodyConsole(e.props.board.uid,!0),e.iioCody){var r=n.map(function(n){return new Xd(n,t.getModel(),!1,Tt(e.props.board.uid))});e.iioCody.trigger.Cody(e.props.board.uid,Wd(r).filter(function(e){return e.getType()!==gi.edge}))}})}},{key:"initMouseSync",value:function(e){var t=this,n=0,r=this.editorUi.editor.graph,a=document.getElementById("topmenu");a&&(n=a.clientHeight),this.mouseSync=new qg(Ce,this.divGraph.current,r,function(e){var t=r.view.scale,a=r.view.translate;return{x:(e.x+a.x)*t,y:(e.y+a.y)*t+n}}),this.mouseSync.onUserJoined(function(n,r,a,o){return t.addActiveUser(e,n,r,a,o)}),this.mouseSync.onUserLeft(function(e){return t.removeActiveUser(e)}),this.mouseSync.startSync({userId:e.user.uid,name:e.user.displayName,avatar:e.user.avatarUrl,boardId:e.board.uid}),this.iioCody=Ug,this.attachCodySyncListener(),r.addListener(mxEvent.FIRE_MOUSE_EVENT,function(n,a){var o=a.getProperty("eventName"),i=a.getProperty("event");if(i){var c=r.view.scale,s=r.view.translate,u=i.getGraphX()/c-s.x,d=i.getGraphY()/c-s.y;o!==mxEvent.MOUSE_MOVE||!t.mouseSync||r.panningHandler.isActive()||r.panningHandler.physicsActive||t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:u,y:d},vT:s,scale:c,isPanning:!1})}}),r.addListener(r.EVT_USER_IS_PANNING,function(n,r){if(t.mouseSync){var a=r.getProperty("me"),o=r.getProperty("scale"),i=r.getProperty("translate"),c=r.getProperty("mouseDelta");if(!a)return;var s=a.getGraphX()/o-i.x,u=a.getGraphY()/o-i.y;t.mouseSync.emitUserMouseMove({userId:e.user.uid,boardId:e.board.uid,point:{x:s,y:u},vT:i,scale:o,isPanning:!0},c)}}),r.addListener(r.EVT_PANNING_PHYSICS_CLEARED,function(){t.mouseSync&&t.mouseSync.syncLastKnownAbsolutePointsAfterPanning()}),r.addListener(r.EVT_USER_IS_ZOOMING,function(n,a){t.mouseSync.emitUserMouseScroll({userId:e.user.uid,boardId:e.board.uid,vT:r.view.translate,scale:r.view.scale})}),r.addListener(r.EVT_USER_IS_TYPING,function(n,r){var a=r.getProperty("typing");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?Dg.Typing:Dg.Default})}),r.addListener(r.EVT_USER_IS_MOVING,function(n,r){var a=r.getProperty("moving");t.mouseSync.emitUserGestureChanged({userId:e.user.uid,boardId:e.board.uid,gesture:a?Dg.Moving:Dg.Default})}),r.addListener(r.EVT_USER_IS_AUTO_SCROLLING,function(n,r){t.mouseSync&&t.mouseSync.emitUserIsAutoScrolling({userId:e.user.uid,boardId:e.board.uid,scale:r.getProperty("scale"),translate:r.getProperty("translate"),isPanning:r.getProperty("isPanning")})}),this.setUsedMouseSync(this.mouseSync)}},{key:"addActiveUser",value:function(e,t,n,r,a){var o=this;if(t!==e.user.uid){var i=document.getElementById("topmenuUsers"),c=document.createElement("div");c.classList.add("item");var s=document.createElement("div");s.id="topmenuUsers-"+t,s.classList.add("ui","circular","label","observable","user"),s.style.backgroundColor=a,s.style.backgroundSize="cover",""!==r?s.style.backgroundImage="url('"+r+"')":s.innerText=n[0].toUpperCase(),s.setAttribute("data-tooltip",n),s.setAttribute("data-position","bottom center"),s.addEventListener("click",function(e){return o.toggleObserveUser(e.target)}),c.append(s),i.append(c)}}},{key:"removeActiveUser",value:function(e){var t=document.getElementById("topmenuUsers-"+e);t&&t.parentElement.remove()}},{key:"toggleObserveUser",value:function(e){e instanceof HTMLElement&&(e.classList.contains("observed")?(e.classList.remove("observed"),this.mouseSync.stopObservingUser()):(this.unsetCurrentObservedUser(),this.mouseSync.stopObservingUser(),e.classList.add("observed"),this.mouseSync.observeUser(this.getUserIdFromLabelId(e.id))))}},{key:"unsetCurrentObservedUser",value:function(){document.getElementById("topmenuUsers").childNodes.forEach(function(e){e.firstChild instanceof HTMLElement&&e.firstChild.classList.remove("observed")})}},{key:"getUserIdFromLabelId",value:function(e){return e.replace("topmenuUsers-","")}},{key:"sortChanges",value:function(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(e){e instanceof mxGeometryChange?1===e.cell.edge||!0===e.cell.edge?n.push(e):t.push(e):e instanceof mxChildChange&&(1===e.child.edge||!0===e.child.edge)?n.push(e):t.push(e)}),t.push.apply(t,n),t}},{key:"detectHistoryAttributesFromChanges",value:function(e){if(3===(e=this.filterOutMxStyleChange(e)).length&&e[0]instanceof mxGeometryChange&&e[1]instanceof mxGeometryChange&&e[2]instanceof mxChildChange)return Object(Ye.a)({action:null===e[2].previous?Vd.added:Vd.moved},this.detectHistoryCellTypeAndLabelFromChange(e[2]));if(1===e.length&&e[0]instanceof mxGeometryChange)return Object(Ye.a)({action:Vd.moved},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxChildChange&&null===e[0].parent)return Object(Ye.a)({action:Vd.deleted},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(1===e.length&&e[0]instanceof mxValueChange)return Object(Ye.a)({action:Vd.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(2===e.length&&e[0]instanceof mxValueChange&&e[1]instanceof mxGeometryChange)return Object(Ye.a)({action:Vd.edited},this.detectHistoryCellTypeAndLabelFromChange(e[0]));if(e.length>=4&&e[1]instanceof mxTerminalChange&&e[2]instanceof mxTerminalChange)return Object(Ye.a)({action:Vd.added},this.detectHistoryCellTypeAndLabelFromChange(e[0]));var t=!0,n=[];if(e.forEach(function(e){e instanceof mxGeometryChange?n.push(e.cell.id):t=!1}),t)return{action:Vd.moved,type:sl.multiple,label:"",cellId:n.join(";")};var r=!0;if(n=[],e.forEach(function(e){e instanceof mxChildChange&&null===e.parent?n.push(e.child.id):r=!1}),r)return{action:Vd.deleted,type:sl.multiple,label:"",cellId:n.join(";")};var a=!0,o=null;if(e.forEach(function(t,n){n%2===0&&(!(t instanceof mxChildChange&&e[n+1]instanceof mxGeometryChange)||null!==o&&o!==t.parent&&1!==t.child.edge||!inspectioUtils.isContainer(t.parent)&&1!==t.child.edge?a=!1:1!==t.child.edge&&(o=t.parent))}),o&&a)return{action:Vd.edited,type:inspectioUtils.getTypeInclEdge(o)||sl.misc,label:inspectioUtils.getLabelText(o),cellId:o.id};if(e[e.length-1]instanceof mxChildChange&&null===e[e.length-1].parent){var i=e[e.length-1].child;return{action:Vd.deleted,type:inspectioUtils.getTypeInclEdge(i)||sl.misc,label:inspectioUtils.getLabelText(i),cellId:i.id}}var c=!0;return n=[],e.forEach(function(e,t){e instanceof mxGeometryChange||e instanceof mxChildChange?e instanceof mxGeometryChange&&n.push(e.cell.id):c=!1}),c?{action:Vd.moved,type:sl.multiple,label:"",cellId:n.join(";")}:{action:Vd.edited,type:sl.misc,label:""}}},{key:"detectHistoryCellTypeAndLabelFromChange",value:function(e){var t,n=!1,r="";return e.cell?(n=inspectioUtils.getTypeInclEdge(e.cell),r=inspectioUtils.getLabelText(e.cell),t=e.cell.id):e.child&&(n=inspectioUtils.getTypeInclEdge(e.child),r=inspectioUtils.getLabelText(e.child),t=e.child.id),n||(n=sl.misc),{type:n,label:r,cellId:t}}},{key:"filterOutMxStyleChange",value:function(e){return e.filter(function(e){return!(e instanceof mxStyleChange)})}}]),t}(ve.Component),Sv=te.makeMapStateToPropsMxGraphBoard(),Cv=Object(ze.connect)(Sv,function(e){return Object(mt.bindActionCreators)({fetchUserBoard:L.fetchUserBoard,onError:i.Command.error,onInfo:i.Command.info,saveBoard:N.saveBoard,syncBoard:N.syncBoard,stopBoardSync:N.stopBoardSynchronisation,clearBoardHistory:N.clearBoardHistory,onLocalBoardChanged:R.localBoardChanged,dequeueBoardChanged:N.dequeueBoardChangedEvents,onBoardImportStarted:R.boardImportStarted,onBoardImported:R.boardImported,onBoardExported:R.boardExported,onBoardInitialized:R.boardInitialized,onLocalBoardUpdatedWithRemoteChange:R.localBoardUpdatedWithRemoteChange,filterElementsTree:N.filterElementsTree,onActiveGraphElementChanged:R.activeGraphElementChanged,onActiveGraphElementLabelChanged:R.activeGraphElementLabelChanged,onActiveGraphElementMetadataChanged:R.activeGraphElementMetadataChanged,toggleElementDetails:N.toggleElementDetails,toggleCodyConsole:N.toggleCodyConsole},e)},void 0,{pure:!1})(Tv),wv=pn.a.mark(Av),_v=pn.a.mark(Bv);function Av(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(bh(e.payload.boardId,e.payload.teamId));case 2:if(!(t=a.sent)){a.next=18;break}return t=t.changePermissions(e.payload.permissions),a.next=7,Object(fn.c)(U.Api.adminChangeTeamBoardPermissions,e.payload.boardId,e.payload.teamId,e.payload.permissions);case 7:if(n=a.sent,r=n.response,!n.error){a.next=13;break}return a.next=13,Object(fn.g)(i.Command.error("Request Error","Could not change team permissions."));case 13:if(!r){a.next=18;break}return a.next=16,Object(fn.g)(U.Event.teamBoardPermissionsChanged(t));case 16:return a.next=18,Object(fn.g)(i.Command.info("Permissions Changed","Team permissions changed successfully."));case 18:case"end":return a.stop()}},wv,this)}function Bv(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Av,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},_v,this)}var Nv=pn.a.mark(Lv),Rv=pn.a.mark(function e(t){var n,r;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.changeBoardPermissions,t.payload.boardId,t.payload.userId,t.payload.permissions);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed changing the board permissions."));case 8:if(!r){e.next=13;break}return e.next=11,Object(fn.g)(i.Command.info("Permissions Changed","Board permissions were changed successfully."));case 11:return e.next=13,Object(fn.g)(R.boardPermissionsChanged(t.payload.boardId,t.payload.userId,t.payload.permissions));case 13:case"end":return e.stop()}},e,this)});function Lv(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.CHANGE_BOARD_PERMISSIONS]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Rv,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Nv,this)}var Uv=function(e){return"@@Inspectio/Board/:id".replace(":id",e)},Dv=function(){var e=localStorage.getItem("@@Inspectio/Boards");return null===e?Object(be.List)():Object(be.fromJS)(JSON.parse(e))},zv=function(e,t){try{var n=Dv();n.includes(e)&&(n=n.delete(n.indexOf(e)),localStorage.setItem("@@Inspectio/Boards",JSON.stringify(n.toJSON())),localStorage.removeItem(Uv(e)))}catch(r){t(r)}},Mv=pn.a.mark(Fv),Pv=pn.a.mark(Gv);function Fv(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=null,zv(e.payload.boardId,function(e){t=e}),!t){o.next=6;break}return n=i.Command.error("Failed to delete board in local storage",t),o.next=6,Object(fn.g)(n);case 6:return o.next=8,Object(fn.c)(B.deleteBoard,e.payload.boardId);case 8:if(r=o.sent,a=r.response,!r.error){o.next=14;break}return o.next=14,Object(fn.g)(i.Command.error("Request Error","Could not delete board."));case 14:if(!a){o.next=17;break}return o.next=17,Object(fn.g)(i.Command.info("Board deleted","Board deleted"));case 17:case"end":return o.stop()}},Mv,this)}function Gv(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.DELETE_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Fv,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Pv,this)}var Hv=pn.a.mark(Kv),Vv=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!(a=n.error)){e.next=13;break}if(404!==a.status){e.next=11;break}return e.next=9,Object(fn.g)(R.boardClientNotConfigured(t.payload.boardId));case 9:e.next=13;break;case 11:return e.next=13,Object(fn.g)(i.Command.error("Request Error","Failed to load board client"));case 13:if(!r){e.next=21;break}if(!Sn(o=Ln(r.data,Bn([Dn("clientId"),"Response data does not contain key clientId"])))){e.next=18;break}return e.next=18,Object(fn.g)(i.Command.error("Request Error","Could not load board client"));case 18:if(!Cn(o)){e.next=21;break}return e.next=21,Object(fn.g)(R.boardClientFetched(t.payload.boardId,o.value));case 21:case"end":return e.stop()}},e,this)}),qv=pn.a.mark(function e(t){var n,r,a;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load board client secret"));case 8:if(!r){e.next=16;break}if(!Sn(a=Ln(r.data,Bn([Dn("clientSecret"),"Response data does not contain key clientSecret"])))){e.next=13;break}return e.next=13,Object(fn.g)(i.Command.error("Request Error","Could not load board client secret"));case 13:if(!Cn(a)){e.next=16;break}return e.next=16,Object(fn.g)(R.boardClientSecretFetched(t.payload.boardId,a.value.clientSecret));case 16:case"end":return e.stop()}},e,this)}),Wv=pn.a.mark(function e(t){var n,r;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.createBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to create board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(fn.c)(Vv,t);case 11:case"end":return e.stop()}},e,this)}),Yv=pn.a.mark(function e(t){var n,r;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.removeBoardClient,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to remove board client"));case 8:if(!r){e.next=11;break}return e.next=11,Object(fn.g)(R.boardClientNotConfigured(t.payload.boardId));case 11:case"end":return e.stop()}},e,this)}),Qv=pn.a.mark(function e(t){var n,r;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.resetBoardClientSecret,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to reset board client secret"));case 8:if(!r){e.next=11;break}return e.next=11,Object(fn.c)(qv,t);case 11:case"end":return e.stop()}},e,this)});function Kv(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.FETCH_BOARD_CLIENT,A.FETCH_BOARD_CLIENT_SECRET,A.CREATE_BOARD_CLIENT,A.REMOVE_BOARD_CLIENT,A.RESET_BOARD_CLIENT_SECRET]);case 3:if((e=t.sent).type!==A.FETCH_BOARD_CLIENT){t.next=9;break}return t.next=7,Object(fn.f)(Vv,e);case 7:t.next=27;break;case 9:if(e.type!==A.FETCH_BOARD_CLIENT_SECRET){t.next=14;break}return t.next=12,Object(fn.f)(qv,e);case 12:t.next=27;break;case 14:if(e.type!==A.CREATE_BOARD_CLIENT){t.next=19;break}return t.next=17,Object(fn.f)(Wv,e);case 17:t.next=27;break;case 19:if(e.type!==A.REMOVE_BOARD_CLIENT){t.next=24;break}return t.next=22,Object(fn.f)(Yv,e);case 22:t.next=27;break;case 24:if(e.type!==A.RESET_BOARD_CLIENT_SECRET){t.next=27;break}return t.next=27,Object(fn.f)(Qv,e);case 27:t.next=0;break;case 29:case"end":return t.stop()}},Hv,this)}var Jv=pn.a.mark(Xv),Zv=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchBoardGraphElements,t.payload.boardId,t.payload.type);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load board graph elements"));case 8:if(!r){e.next=17;break}if(!Sn(a=Ln(r.data,Bn([zn(),"Response data is no array"]),Rn(function(e){return vl(e)})))){e.next=13;break}return e.next=13,Object(fn.g)(i.Command.error("Request Error","Could not load board graph elements"));case 13:if(!Cn(a)){e.next=17;break}return o=Object(be.List)(a.value),e.next=17,Object(fn.g)(R.boardGraphElementsFetched(t.payload.boardId,o));case 17:case"end":return e.stop()}},e,this)});function Xv(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(A.FETCH_BOARD_GRAPH_ELEMENTS);case 3:return e=t.sent,t.next=6,Object(fn.f)(Zv,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Jv,this)}var $v=pn.a.mark(ny),ey=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchBoardPermissionsForUsers,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!Sn(a=Ln(r.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(e){return Sl(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!Cn(a)){e.next=18;break}return o=Object(be.List)(a.value),e.next=18,Object(fn.g)(R.boardPermissionsForUsersFetched(o));case 18:case"end":return e.stop()}},e,this)}),ty=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchBoardPermissionsForTeams,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load board permissions"));case 8:if(!r){e.next=18;break}if(!Sn(a=Ln(r.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(e){return xl(e)})))){e.next=14;break}return console.error("Failed to process board permissions response from server",a.value,r.data),e.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load board permissions"));case 14:if(!Cn(a)){e.next=18;break}return o=Object(be.List)(a.value),e.next=18,Object(fn.g)(R.boardPermissionsForTeamsFetched(o));case 18:case"end":return e.stop()}},e,this)});function ny(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.FETCH_BOARD_PERMISSIONS_FOR_USERS,A.FETCH_BOARD_PERMISSIONS_FOR_TEAMS]);case 3:if((e=t.sent).type!==Os){t.next=9;break}return t.next=7,Object(fn.f)(ey,e);case 7:t.next=11;break;case 9:return t.next=11,Object(fn.f)(ty,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},$v,this)}var ry=pn.a.mark(oy),ay=pn.a.mark(iy);function oy(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(fn.c)(U.Api.fetchBoardStickyTemplates,e.payload.boardId);case 2:if(t=o.sent,n=t.response,!t.error){o.next=8;break}return o.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load sticky templates"));case 8:if(!n){o.next=18;break}if(!Sn(r=Ln(n.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(e){return Ph(e)})))){o.next=14;break}return console.error("Failed to process sticky templates response from server",r.value,n.data),o.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 14:if(!Cn(r)){o.next=18;break}return a=Object(be.List)(r.value),o.next=18,Object(fn.g)(U.Event.boardStickyTemplatesFetched(a));case 18:case"end":return o.stop()}},ry,this)}function iy(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(fn.f)(oy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},ay,this)}var cy=pn.a.mark(uy),sy=pn.a.mark(function e(t){var n,r,a,o;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchOpenBoardInvitations,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load open board invitations"));case 8:if(!r){e.next=18;break}if(!Sn(a=Ln(r.data,Bn([zn(),"Response data is not of type Array"]),Rn(function(e){return El(e)})))){e.next=14;break}return console.error("Failed to process open board invitations response from server",a.value,r.data),e.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load open board invitations"));case 14:if(!Cn(a)){e.next=18;break}return o=Object(be.List)(a.value),e.next=18,Object(fn.g)(R.openBoardInvitationsFetched(o));case 18:case"end":return e.stop()}},e,this)});function uy(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.FETCH_OPEN_BOARD_INVITATIONS]);case 3:return e=t.sent,t.next=6,Object(fn.f)(sy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},cy,this)}var dy=pn.a.mark(my),ly=pn.a.mark(function e(t){var n,r,a,o,c,s,u;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.c)(B.fetchUserBoard,t.payload.boardId);case 2:if(n=e.sent,r=n.response,!n.error){e.next=8;break}return e.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to load board"));case 8:if(!r){e.next=30;break}return a=new z.Board({uid:r.data.boardId,name:r.data.name,lastModified:r.data.lastModified,version:new D.BoardVersion(r.data.boardVersion),shared:r.data.shared,sharedWith:Object(be.List)(r.data.sharedWith),assignedTeams:Object(be.List)(r.data.assignedTeams),writeAccess:r.data.writeAccess,owner:r.data.owner,creator:r.data.creator,organization:r.data.organization}),o=null,c=[],r.data.snapshot&&(o=new P.BoardSnapshot({boardId:r.data.boardId,xml:r.data.snapshot.content,boardVersion:new D.BoardVersion(r.data.snapshot.boardVersion)})),e.next=15,Object(fn.g)(N.updateBoards([a]));case 15:if(!o){e.next=18;break}return e.next=18,Object(fn.g)(uu(o));case 18:c=[],r.data.patches.forEach(function(e){return c.push(bl(e))}),s=0;case 21:if(!(s<c.length)){e.next=28;break}return u=c[s],e.next=25,Object(fn.g)(Hu(u));case 25:s++,e.next=21;break;case 28:return e.next=30,Object(fn.g)(N.setBoardDetailsFetched(a.uid,a.writeAccess));case 30:case"end":return e.stop()}},e,this)});function my(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.FETCH_USER_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(ly,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},dy,this)}var py=function(e){var t=An(e,[Dn("userId"),"userId missing"],[Dn("values"),"values missing in "+e.userId]);return Sn(t)?t:_n(new fy({userId:e.userId,values:e.values}))},fy=function(e){function t(e){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).call(this,e))}return Object(Ue.a)(t,e),t}(Object(be.Record)({userId:"",values:{}})),by=pn.a.mark(hy);function hy(){var e,t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.c)(u.getUserSettings);case 2:if(e=r.sent,t=e.response,!e.error){r.next=8;break}return r.next=8,Object(fn.g)(i.Command.error("Request Error","Could not load user settings"));case 8:if(!t){r.next=17;break}if(!Sn(n=py(t.data))){r.next=14;break}return console.error("Failed to process user settings response from server",n.value,t.data),r.next=14,Object(fn.g)(i.Command.error("Request Error","Could not load user settings"));case 14:if(!Cn(n)){r.next=17;break}return r.next=17,Object(fn.g)(d.userSettingsLoaded(n.value));case 17:case"end":return r.stop()}},by,this)}var gy=pn.a.mark(ky),vy=pn.a.mark(Iy),yy=pn.a.mark(xy),Oy=pn.a.mark(jy),Ey=pn.a.mark(Ty);function ky(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.i)(_.currentUserSelector,void 0);case 2:return t=(t=(t=(t=(t=n.sent).set("quota",e.data.quota)).set("teamQuota",e.data.teamQuota)).set("signedIn",!0)).set("activeOrganization",e.data.activeOrganization||null),n.next=9,Object(fn.g)(f.Command.signIn(t));case 9:case"end":return n.stop()}},gy,this)}function Iy(){var e,t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.g)(L.startFetchUserBoards());case 2:return r.next=4,Object(fn.c)(B.fetchUserBoards);case 4:if(e=r.sent,t=e.response,!e.error){r.next=10;break}return r.next=10,Object(fn.g)(i.Command.error("Request Error","Could not load boards"));case 10:if(!t){r.next=14;break}return n=Object(Un.map)(t.data,function(e){return new z.Board({uid:e.boardId,name:e.name,lastModified:e.lastModified,version:new Pd(e.version),shared:e.shared,sharedWith:Object(be.List)(e.sharedWith),assignedTeams:Object(be.List)(e.assignedTeams),example:e.example||!1,owner:e.ownerId,creator:e.creatorId,organization:e.organization})}),r.next=14,Object(fn.g)(cu(n));case 14:case"end":return r.stop()}},vy,this)}function xy(e){var t,n,r,a,o,c;return pn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(fn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 2:if(t=s.sent,n=t.response,!(r=t.error)||404!==r.status){s.next=21;break}return a=nt.a.v4(),s.next=9,Object(fn.c)(j.Api.installUserOrganization,a);case 9:if(!(o=s.sent).error){s.next=13;break}return s.next=13,Object(fn.g)(i.Command.error("Request Error","Could not initialize organization."));case 13:if(!o.response){s.next=19;break}return s.next=16,Object(fn.c)(f.Api.getUser,e.payload.kc.tokenParsed.sub);case 16:return c=s.sent,s.next=19,ky(c.response);case 19:s.next=23;break;case 21:return s.next=23,ky(n);case 23:return s.next=25,Object(fn.c)(hy);case 25:return s.next=27,Object(fn.g)(j.Query.fetchUserOrganizations());case 27:return s.next=29,Object(fn.e)(500);case 29:return s.next=31,Object(fn.c)(Iy);case 31:return s.next=33,Object(fn.c)(yb);case 33:return s.next=35,Object(fn.g)(id());case 35:case"end":return s.stop()}},yy,this)}function jy(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iy();case 2:case"end":return e.stop()}},Oy,this)}function Ty(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([Q.Type.USER_AUTHENTICATED,A.FETCH_USER_BOARDS]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===Q.Type.USER_AUTHENTICATED?7:t.t0===A.FETCH_USER_BOARDS?10:13;break;case 7:return t.next=9,Object(fn.f)(xy,e);case 9:return t.abrupt("break",13);case 10:return t.next=12,Object(fn.f)(jy);case 12:return t.abrupt("break",13);case 13:t.next=0;break;case 15:case"end":return t.stop()}},Ey,this)}var Sy=pn.a.mark(wy),Cy=pn.a.mark(_y);function wy(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.board,o.next=3,Object(fn.i)(tp(t.uid));case 3:return n=o.sent,o.next=6,Object(fn.g)(N.forceUpdateBoards([t]));case 6:return o.next=8,Object(fn.c)(B.takeBoardSnapshot,t.uid,t.version,t.xml);case 8:if(r=o.sent,a=r.response,!r.error){o.next=17;break}return o.next=14,Object(fn.g)(i.Command.error("Server Error","Could not import existing board."));case 14:return o.next=16,Object(fn.g)(N.forceUpdateBoards([n]));case 16:return o.abrupt("return");case 17:if(!a){o.next=20;break}return o.next=20,Object(fn.g)(i.Command.info("Board imported:",t.name));case 20:case"end":return o.stop()}},Sy,this)}function _y(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(wy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Cy,this)}var Ay=pn.a.mark(Ny),By=pn.a.mark(Ry);function Ny(e){var t,n,r,a,o,c,s,u,d,l,m;return pn.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload.boardId||tt.v4(),p.next=3,Object(fn.i)(Rl());case 3:if(n=p.sent){p.next=8;break}return p.next=7,Object(fn.g)(i.Command.error("Board Import Failed","No organization selected."));case 7:return p.abrupt("return");case 8:return p.next=10,Object(fn.c)(B.installOrganizationBoard,n.organizationId,t,e.payload.boardName);case 10:if(r=p.sent,a=r.response,!r.error){p.next=16;break}return p.next=16,Object(fn.g)(i.Command.error("Request Error","Could not add board."));case 16:if(!a){p.next=31;break}return p.next=19,Object(fn.g)(i.Command.info("Board created","Board created"));case 19:return o=_.makeGetCurrentUser(),p.next=22,Object(fn.i)(o);case 22:return c=p.sent,s=new Hd({uid:t,name:e.payload.boardName,xml:e.payload.boardXml,version:new Pd({userId:c.uid,version:1}),shared:!1,sharedWith:Object(be.List)(),assignedTeams:Object(be.List)(),owner:null,creator:c.uid,organization:n.organizationId}),p.next=26,Object(fn.g)(N.updateBoards([s]));case 26:return u=kg(),d=Object(Qe.a)(u,2),d[0],l=d[1],m=Qd(s.xml||void 0),l(m),p.next=31,Object(fn.g)(N.saveBoard(s,m));case 31:case"end":return p.stop()}},Ay,this)}function Ry(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Ny,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},By,this)}var Ly=pn.a.mark(Dy),Uy=pn.a.mark(zy);function Dy(e){var t,n,r,a,o,c,s,u,d;return pn.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:t=e.payload.stickyTemplates.toJS(),n=[],r=!0,a=!1,o=void 0,l.prev=5,c=t[Symbol.iterator]();case 7:if(r=(s=c.next()).done){l.next=28;break}return u=s.value,l.next=11,Object(fn.c)(U.Api.setStickyTemplate,u.boardId,u.cellType,u.template);case 11:if(d=l.sent,d.response,!d.error){l.next=18;break}return l.next=17,Object(fn.g)(i.Command.error("Request Error","Could not set sticky template for "+u.cellType));case 17:return l.abrupt("continue",25);case 18:return n.push(u),l.next=21,Object(fn.c)(U.Api.updateStickyAdvancedConfig,u.boardId,u.cellType,u.templateType,u.templateSchema||void 0);case 21:if(!l.sent.error){l.next=25;break}return l.next=25,Object(fn.g)(i.Command.error("Request Error","Could not update sticky advanced config for "+u.cellType));case 25:r=!0,l.next=7;break;case 28:l.next=34;break;case 30:l.prev=30,l.t0=l.catch(5),a=!0,o=l.t0;case 34:l.prev=34,l.prev=35,r||null==c.return||c.return();case 37:if(l.prev=37,!a){l.next=40;break}throw o;case 40:return l.finish(37);case 41:return l.finish(34);case 42:return l.next=44,Object(fn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 44:return l.next=46,Object(fn.g)(U.Event.stickyTemplatesImported(Object(be.List)(n)));case 46:e.payload.finishedCb();case 47:case"end":return l.stop()}},Ly,this,[[5,30,34,42],[35,,37,41]])}function zy(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Dy,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Uy,this)}var My=pn.a.mark(Py);function Py(){var e,t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=3,Object(fn.k)([A.ADD_BOARD]);case 3:return e=a.sent,a.next=6,Object(fn.i)(Rl());case 6:if(!(t=a.sent)){a.next=23;break}return a.next=10,Object(fn.c)(B.installOrganizationBoard,t.organizationId,e.payload.board.uid,e.payload.board.name);case 10:if(n=a.sent,r=n.response,!n.error){a.next=16;break}return a.next=16,Object(fn.g)(i.Command.error("Request Error","Could not add board."));case 16:if(!r){a.next=21;break}return a.next=19,Object(fn.g)(i.Command.info("Board created","Board created"));case 19:return a.next=21,Object(fn.c)(e.payload.history.push,Et(e.payload.board.uid));case 21:a.next=25;break;case 23:return a.next=25,Object(fn.g)(i.Command.error("Board Installation Failed","No organization selected."));case 25:a.next=0;break;case 27:case"end":return a.stop()}},My,this)}var Fy=pn.a.mark(Hy),Gy=pn.a.mark(Vy);function Hy(e){var t,n,r,a,o,i,c,s,u,d,l=arguments;return pn.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:t=l.length>1&&void 0!==l[1]&&l[1],n=Object(be.List)(),a=!0,o=!1,i=void 0,m.prev=5,c=pn.a.mark(function e(){var a,o,i,c,s,d;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.value,e.next=3,Object(fn.i)(C.getIioUserInfoById,a.userId);case 3:if(o=e.sent,r=a.board,o){e.next=20;break}return e.next=8,Object(fn.g)(f.Query.loadUsersInfo([a.userId]));case 8:i=!0;case 9:if(!i){e.next=20;break}return e.next=12,Object(fn.h)({infoLoaded:Object(fn.k)([f.Type.IIO_USERS_INFO_LOADED]),timeout:Object(fn.e)(5e3)});case 12:if(c=e.sent,s=c.infoLoaded,!c.timeout){e.next=17;break}return e.abrupt("return",{v:void 0});case 17:s.payload.usersInfo.forEach(function(e){e.userId===a.userId&&(o=e,i=!1)}),e.next=9;break;case 20:d=ll(a,o),n=t?n.unshift(d):n.push(d);case 22:case"end":return e.stop()}},e,this)}),s=e[Symbol.iterator]();case 8:if(a=(u=s.next()).done){m.next=16;break}return m.delegateYield(c(),"t0",10);case 10:if("object"!==typeof(d=m.t0)){m.next=13;break}return m.abrupt("return",d.v);case 13:a=!0,m.next=8;break;case 16:m.next=22;break;case 18:m.prev=18,m.t1=m.catch(5),o=!0,i=m.t1;case 22:m.prev=22,m.prev=23,a||null==s.return||s.return();case 25:if(m.prev=25,!o){m.next=28;break}throw i;case 28:return m.finish(25);case 29:return m.finish(22);case 30:if(!r){m.next=38;break}if(!t){m.next=36;break}return m.next=34,Object(fn.g)(vu(r,n));case 34:m.next=38;break;case 36:return m.next=38,Object(fn.g)(gu(r,n));case 38:case"end":return m.stop()}},Fy,this,[[5,18,22,30],[23,,25,29]])}function Vy(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(fn.k)([A.DEQUEUE_BOARD_CHANGED,A.LOCAL_BOARD_CHANGED]);case 3:e=n.sent,n.t0=e.type,n.next=n.t0===Pc?7:n.t0===Dc?11:14;break;case 7:return t=e.payload.events.toArray(),n.next=10,Object(fn.f)(Hy,t,!0);case 10:return n.abrupt("break",14);case 11:return n.next=13,Object(fn.f)(Hy,[e.payload.boardChanged],!0);case 13:return n.abrupt("break",14);case 14:n.next=0;break;case 16:case"end":return n.stop()}},Gy,this)}var qy=pn.a.mark(Ky),Wy=pn.a.mark(Jy),Yy=pn.a.mark(Zy),Qy=function(e){return new hl({board:e.boardId,cellId:e.cellId||void 0,cellLabel:e.cellLabel,cellType:e.cellType,action:e.action,recordedAt:e.recordedAt,userId:e.boardVersion.userId,version:e.boardVersion.version,changeSet:Object(be.List)(e.patch),name:"BoardChanged",uid:e.patchId})};function Ky(e){var t,n,r,a,o,i,c;return pn.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=tp(e.payload.boardId),n=up(e.payload.boardId),s.next=4,Object(fn.i)(t);case 4:return r=s.sent,s.next=7,Object(fn.i)(n);case 7:if(a=s.sent,!r||a.loading){s.next=31;break}return s.next=11,Object(fn.g)(Iu(e.payload.boardId,!0));case 11:return s.next=13,Object(fn.c)(B.fetchOlderPatches,e.payload.boardId,r.version);case 13:if(o=s.sent,i=o.response,!o.error){s.next=22;break}return s.next=19,Object(fn.g)(ku(e.payload.boardId));case 19:return s.next=21,Object(fn.g)(Iu(e.payload.boardId,!1));case 21:return s.abrupt("return");case 22:if(!i){s.next=29;break}if(0!==(c=Object(Un.map)(i.data,function(e){return Qy(e)})).length){s.next=27;break}return s.next=27,Object(fn.g)(ku(e.payload.boardId));case 27:return s.next=29,Object(fn.c)(Hy,c);case 29:return s.next=31,Object(fn.g)(Iu(e.payload.boardId,!1));case 31:case"end":return s.stop()}},qy,this)}function Jy(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.g)(Iu(e.payload.boardId,!0));case 2:return a.next=4,Object(fn.c)(B.fetchOlderPatches,e.payload.boardId,e.payload.boardVersion);case 4:if(t=a.sent,n=t.response,!t.error){a.next=13;break}return a.next=10,Object(fn.g)(ku(e.payload.boardId));case 10:return a.next=12,Object(fn.g)(Iu(e.payload.boardId,!1));case 12:return a.abrupt("return");case 13:if(!n){a.next=20;break}if(0!==(r=Object(Un.map)(n.data,function(e){return Qy(e)})).length){a.next=18;break}return a.next=18,Object(fn.g)(ku(e.payload.boardId));case 18:return a.next=20,Object(fn.c)(Hy,r);case 20:return a.next=22,Object(fn.g)(Iu(e.payload.boardId,!1));case 22:case"end":return a.stop()}},Wy,this)}function Zy(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([hc,gc]);case 3:e=t.sent,t.t0=e.type,t.next=t.t0===gc?7:t.t0===hc?10:12;break;case 7:return t.next=9,Object(fn.f)(Jy,e);case 9:return t.abrupt("break",12);case 10:return t.next=12,Object(fn.f)(Ky,e);case 12:t.next=0;break;case 14:case"end":return t.stop()}},Yy,this)}var Xy=pn.a.mark(eO),$y=pn.a.mark(tO);function eO(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(U.Api.moveUserBoardToOrganization,e.payload.organizationId,e.payload.boardId);case 2:if(t=a.sent,n=t.response,!t.error){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("Request Error","Could not move board to organization."));case 8:if(!n){a.next=21;break}return a.next=11,Object(fn.g)(U.Query.fetchUserBoards());case 11:return a.next=13,Object(fn.g)(j.Query.fetchUserOrganizations());case 13:return a.next=15,Object(fn.i)(tp(e.payload.boardId));case 15:if(!(r=a.sent)){a.next=19;break}return a.next=19,Object(fn.g)(U.Event.userBoardMovedToOrganization(r.moveToOrganization(e.payload.organizationId)));case 19:return a.next=21,Object(fn.g)(i.Command.info("Board moved","The board has been moved to the organization."));case 21:case"end":return a.stop()}},Xy,this)}function tO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.MOVE_USER_BOARD_TO_ORGANIZATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(eO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},$y,this)}var nO=pn.a.mark(rO);function rO(){var e,t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,Object(fn.k)([A.RENAME_BOARD]);case 3:return e=r.sent,r.next=6,Object(fn.c)(B.renameBoard,e.payload.board.uid,e.payload.board.name);case 6:if(t=r.sent,n=t.response,!t.error){r.next=14;break}return r.next=12,Object(fn.g)(i.Command.error("Request Error","Could not rename board."));case 12:return r.next=14,Object(fn.g)(L.fetchUserBoards());case 14:if(!n){r.next=17;break}return r.next=17,Object(fn.g)(i.Command.info("Board renamed",""));case 17:r.next=0;break;case 19:case"end":return r.stop()}},nO,this)}var aO=pn.a.mark(iO),oO=pn.a.mark(cO);function iO(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(Ch(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(fn.c)(B.resendBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not resend board invitation"));case 12:if(!r){a.next=15;break}return a.next=15,Object(fn.g)(i.Command.info("insp.board.notify.invitation_resend.success.title","insp.board.notify.invitation_resend.success.msg"));case 15:return a.next=17,Object(fn.g)(R.boardInvitationResent(t.resend()));case 17:case"end":return a.stop()}},aO,this)}function cO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.RESEND_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(iO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oO,this)}var sO=pn.a.mark(dO),uO=pn.a.mark(lO);function dO(e){var t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.c)(B.revokeAccessToBoard,e.payload.boardId,e.payload.userId);case 2:if(t=r.sent,n=t.response,!t.error){r.next=8;break}return r.next=8,Object(fn.g)(i.Command.error("Request Error","Failed to revoke access to board."));case 8:if(!n){r.next=13;break}return r.next=11,Object(fn.g)(i.Command.info("Access Revoked","Access to board revoked."));case 11:return r.next=13,Object(fn.g)(R.boardAccessRevoked(e.payload.boardId,e.payload.userId));case 13:case"end":return r.stop()}},sO,this)}function lO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.REVOKE_ACCESS_TO_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(dO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},uO,this)}var mO=pn.a.mark(fO),pO=pn.a.mark(bO);function fO(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(Ch(e.payload.invitationId));case 2:if(!(t=a.sent)){a.next=17;break}return a.next=6,Object(fn.c)(B.revokeBoardInvitation,e.payload.invitationId);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not revoke board invitation"));case 12:if(!r){a.next=17;break}return a.next=15,Object(fn.g)(i.Command.info("insp.board.notify.invitation_revoke.success.title","insp.board.notify.invitation_revoke.success.msg"));case 15:return a.next=17,Object(fn.g)(R.boardInvitationRevoked(t.revoke()));case 17:case"end":return a.stop()}},mO,this)}function bO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.REVOKE_BOARD_INVITATION]);case 3:return e=t.sent,t.next=6,Object(fn.f)(fO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},pO,this)}var hO=pn.a.mark(vO),gO=pn.a.mark(yO);function vO(e,t){var n,r,a,o,c,s;return pn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n=kg(),r=Object(Qe.a)(n,1),a=r[0],console.log("saveBoardFlow: ",t%10),!(t%10===0||e.payload.board.version.version<5)){u.next=14;break}a.exportXmlSnapshot(),o=3;case 5:return u.next=7,Object(fn.c)(B.takeBoardSnapshot,e.payload.board.uid,e.payload.board.version,a.exportXmlSnapshot());case 7:if(c=u.sent,(s=c.error)?o--:o=0,0!==o||!s){u.next=13;break}return u.next=13,Object(fn.g)(i.Command.error("Server Error","Could not take board snapshot."));case 13:if(o>0){u.next=5;break}case 14:case"end":return u.stop()}},hO,this)}function yO(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=0;case 1:return n.next=4,Object(fn.k)([A.SAVE_BOARD,A.BOARD_IMPORTED]);case 4:return(t=n.sent).type===A.BOARD_IMPORTED&&(e=9),e++,n.next=9,Object(fn.f)(vO,t,e);case 9:n.next=1;break;case 11:case"end":return n.stop()}},gO,this)}var OO=pn.a.mark(kO),EO=pn.a.mark(IO);function kO(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(B.shareBoard,e.payload.boardId,e.payload.email,e.payload.permissions);case 2:if(t=a.sent,n=t.response,!(r=t.error)||404!==r.status){a.next=8;break}return a.next=8,Object(fn.g)(i.Command.error("User not found","Please check the entered username. Also the user needs to sign in at least once before you can share your board with them."));case 8:if(!r){a.next=11;break}return a.next=11,Object(fn.g)(i.Command.error("Action Failed",r.data.error.message));case 11:if(!n){a.next=18;break}return a.next=14,Object(fn.g)(i.Command.info("Board shared with "+e.payload.email,""));case 14:return a.next=16,Object(fn.g)(L.fetchOpenBoardInvitations(e.payload.boardId));case 16:return a.next=18,Object(fn.g)(L.fetchBoardPermissionsForUsers(e.payload.boardId));case 18:case"end":return a.stop()}},OO,this)}function IO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.SHARE_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(kO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},EO,this)}var xO=function(e){return Object(et.action)(lv,{collapsed:e})},jO=function(e){return Object(et.action)(mv,{width:e})},TO=pn.a.mark(CO),SO=pn.a.mark(wO);function CO(e,t){return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.g)(N.updateBoardElementsTree(e,t.getRoot().children()));case 2:case"end":return n.stop()}},TO,this)}function wO(){var e,t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=!1,r=!1;case 2:return o.next=5,Object(fn.k)([A.SAVE_BOARD,A.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE,A.BOARD_IMPORTED,A.BOARD_INITIALIZED,me.TOGGLE_SIDEBAR_COLLAPSED]);case 5:if(a=o.sent,!r||a.type!==me.TOGGLE_SIDEBAR_COLLAPSED){o.next=11;break}if((e=a.payload.collapsed)||!t||!n){o.next=11;break}return o.next=11,Object(fn.f)(CO,n,t);case 11:o.t0=a.type,o.next=o.t0===A.SAVE_BOARD?14:o.t0===A.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE?14:o.t0===A.BOARD_IMPORTED?14:o.t0===A.BOARD_INITIALIZED?14:22;break;case 14:if(r&&n!==a.payload.board.uid&&(r=!1),t=a.payload.graph,n=a.payload.board.uid,e){o.next=21;break}return r=!0,o.next=21,Object(fn.f)(CO,n,t);case 21:return o.abrupt("break",22);case 22:o.next=2;break;case 24:case"end":return o.stop()}},SO,this)}var _O=pn.a.mark(zO),AO=!1,BO=null,NO=null,RO=null,LO=[],UO=null,DO=pn.a.mark(function e(t){var n,r,a,o,i,c,s,u,d,l,m,p,f,b,h;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.i)(ee.StatusSelector.makeGetStatus());case 2:n=e.sent,e.t0=t.type,e.next=e.t0===A.LOCAL_BOARD_CHANGED?6:e.t0===A.SYNC_BOARD?11:e.t0===A.STOP_BOARD_SYNCHRONISATION?23:e.t0===A.REMOTE_BOARD_CHANGED?32:e.t0===H.Type.SOCKET_CONNECTION_LOST?40:e.t0===H.Type.SOCKET_CONNECTED?47:100;break;case 6:if(!n.isConnected()){e.next=9;break}return e.next=9,Object(fn.g)(H.Action.sendSocketCmd(t.payload.boardChanged.name,t.payload.boardChanged.toJS(),A.LOCAL_CHANGE_SET_AS_HEAD_VERSION));case 9:return AO&&LO.push(t),e.abrupt("break",101);case 11:return BO=t.payload.userId,NO=t.payload.username,RO=t.payload.boardId,e.next=16,Object(fn.g)(H.Action.connectSocket());case 16:return e.next=18,Object(fn.k)([H.Type.SOCKET_CONNECTED]);case 18:return e.next=20,Object(fn.g)(H.Action.listenOnSocketChannel("BoardChanged",A.REMOTE_BOARD_CHANGED));case 20:return e.next=22,Object(fn.g)(H.Action.sendSocketCmd("BoardOpened",{boardId:t.payload.boardId,userId:t.payload.userId,username:t.payload.username},A.REMOTE_BOARD_OPENED));case 22:return e.abrupt("break",101);case 23:return BO=null,NO=null,RO=null,AO=!1,LO=[],UO=null,e.next=31,Object(fn.g)(H.Action.stopListeningOnSocketChannel("BoardChanged"));case 31:return e.abrupt("break",101);case 32:return e.next=34,Object(fn.i)(te.makeBoardByIdSelector(t.payload.event.board));case 34:if(r=e.sent,a=M.remoteBoardChanged(t.payload.event),!r||!a.toBoardVersion().isNewerThan(r.version)){e.next=39;break}return e.next=39,Object(fn.g)(N.enqueueBoardChanged(a));case 39:return e.abrupt("break",101);case 40:if(AO=!0,!RO){e.next=46;break}return e.next=44,Object(fn.i)(te.makeBoardByIdSelector(RO));case 44:o=e.sent,UO=o.version;case 46:return e.abrupt("break",101);case 47:if(!AO||!RO){e.next=99;break}return AO=!1,e.next=51,Object(fn.g)(H.Action.listenOnSocketChannel("BoardChanged",A.REMOTE_BOARD_CHANGED));case 51:return e.next=53,Object(fn.g)(H.Action.sendSocketCmd("BoardOpened",{boardId:RO,userId:BO,username:NO},A.REMOTE_BOARD_OPENED));case 53:i=0;case 54:if(!(i<LO.length)){e.next=63;break}return c=LO[i],e.next=58,Object(fn.g)(H.Action.sendSocketCmd(c.payload.boardChanged.name,c.payload.boardChanged.toJS(),A.LOCAL_CHANGE_SET_AS_HEAD_VERSION));case 58:return e.next=60,Object(fn.e)(50);case 60:i++,e.next=54;break;case 63:if(LO=[],!UO){e.next=98;break}return e.next=67,Object(fn.c)(B.fetchNewerPatches,RO,UO);case 67:if(s=e.sent,u=s.response,s.error,!u){e.next=98;break}d=Object(Un.map)(u.data,function(e){return Qy(e)}),l=!0,m=!1,p=void 0,e.prev=75,f=d[Symbol.iterator]();case 77:if(l=(b=f.next()).done){e.next=84;break}return h=b.value,e.next=81,Object(fn.g)(N.enqueueBoardChanged(h));case 81:l=!0,e.next=77;break;case 84:e.next=90;break;case 86:e.prev=86,e.t1=e.catch(75),m=!0,p=e.t1;case 90:e.prev=90,e.prev=91,l||null==f.return||f.return();case 93:if(e.prev=93,!m){e.next=96;break}throw p;case 96:return e.finish(93);case 97:return e.finish(90);case 98:UO=null;case 99:case 100:return e.abrupt("break",101);case 101:case"end":return e.stop()}},e,this,[[75,86,90,98],[91,,93,97]])});function zO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.LOCAL_BOARD_CHANGED,A.SYNC_BOARD,A.STOP_BOARD_SYNCHRONISATION,A.REMOTE_BOARD_CHANGED,H.Type.SOCKET_CONNECTION_LOST,H.Type.SOCKET_CONNECTED]);case 3:return e=t.sent,t.next=6,Object(fn.f)(DO,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},_O,this)}var MO=pn.a.mark(GO),PO=pn.a.mark(HO),FO=pn.a.mark(VO);function GO(e){var t,n,r,a,o,c,s;return pn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(fn.i)(qh(Mh(e.payload.boardId,e.payload.cellType)));case 2:return t=u.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Fh(r,a,o)),u.next=7,Object(fn.c)(U.Api.setStickyTemplate,t.boardId,t.cellType,o);case 7:if(c=u.sent,s=c.response,!c.error){u.next=13;break}return u.next=13,Object(fn.g)(i.Command.error("Request Error","Could not set sticky template."));case 13:if(!s){u.next=19;break}if(e.payload.disableNotification){u.next=17;break}return u.next=17,Object(fn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 17:return u.next=19,Object(fn.g)(U.Event.stickyTemplateSet(t.setTemplate(o)));case 19:case"end":return u.stop()}},MO,this)}function HO(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.i)(qh(Mh(e.payload.boardId,e.payload.cellType)));case 2:return(t=a.sent)||(t=Fh(e.payload.boardId,e.payload.cellType,"")),a.next=6,Object(fn.c)(U.Api.updateStickyAdvancedConfig,t.boardId,t.cellType,e.payload.templateType,e.payload.templateSchema||void 0);case 6:if(n=a.sent,r=n.response,!n.error){a.next=12;break}return a.next=12,Object(fn.g)(i.Command.error("Request Error","Could not update sticky advanced config."));case 12:if(!r){a.next=20;break}if(e.payload.disableNotification){a.next=16;break}return a.next=16,Object(fn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(fn.g)(U.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},PO,this)}function VO(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.SET_STICKY_TEMPLATE,U.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==U.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(fn.f)(GO,e);case 7:t.next=11;break;case 9:return t.next=11,Object(fn.f)(HO,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},FO,this)}var qO,WO="inspectioBoards",YO=n(64),QO=n.n(YO),KO=n(518),JO=n(1249),ZO=n(1239),XO=function(e){var t=e.maxLength||50,n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1];return a&&!e.onClick||e.label.length<=t?ve.createElement(ve.Fragment,null,e.label):ve.createElement(ve.Fragment,null,e.label.slice(0,t)+" ",ve.createElement("span",{onClick:function(t){t.preventDefault(),e.onClick&&e.onClick(!a),o(!a)}},"..."))},$O=function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ve.createElement(og.a.Item,{as:Pe.Link,key:e.key,className:"ui vertical segment",style:{borderRadius:"0"},onClick:e.onClick,to:{pathname:Et(e.entry.boardId),search:"?cells=".concat(e.entry.cellId,"&clicks=").concat(e.clicks)}},ve.createElement(cg,{cellType:e.entry.cellType}),ve.createElement(og.a.Content,null,ve.createElement(og.a.Header,null,ve.createElement(XO,{label:e.entry.label,maxLength:24,onClick:function(e){return a(e)}})),ve.createElement(og.a.Description,null,"".concat(e.entry.action," by ").concat(e.entry.username)),ve.createElement(og.a.Description,null,ve.createElement("span",{className:"date",style:{color:"grey",fontSize:"10px"}},new Date(e.entry.date).toLocaleString()))),r&&ve.createElement(og.a.List,{style:{padding:"0"}},ve.createElement(og.a.Item,null,ve.createElement(og.a.Description,null,e.entry.label))))},eE=n(517),tE=function(e){var t=Object(ve.useState)(e.isActiveByDefault||!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ve.createElement(ve.Fragment,null,ve.createElement(eE.a,{content:e.title,index:e.index,active:r,onClick:function(){return a(!r)}}),ve.createElement(KO.a,{active:r},ve.createElement(og.a,{selection:!0},e.entries)))},nE=function(e,t,n){e(n?Ou(t,n):Eu(t))},rE=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ve.useMemo)(function(){return tp(e.match.params.uid)},[]),n=Object(ve.useMemo)(function(){return up(e.match.params.uid)},[]),r=Object(ve.useState)(1),a=Object(Qe.a)(r,2),o=a[0],i=a[1],c=Object(ze.useSelector)(t),s=Object(ze.useSelector)(n),u=Object(ze.useDispatch)(),d=c&&c.shouldShowHistory||!1,l=function(){i(o+1)},m=Object(ve.useMemo)(function(){var e=QO()(),t=function(e){var t=QO()(e).startOf("isoWeek"),n=QO()(e).startOf("month"),r=QO()(n).subtract(1,"days").startOf("month");return{today:QO()(e).startOf("day"),startOfWeek:t,startOfMonth:n,startOfLastMonth:r}}(e),n={today:[],yesterday:[],twoDaysAgo:[],threeDaysAgo:[],fourDaysAgo:[],fiveDaysAgo:[],sixDaysAgo:[],lastWeek:[],twoWeeksAgo:[],threeWeeksAgo:[],fourWeeksAgo:[],lastMonth:[],older:[]};return s.history.forEach(function(e,r){var a=QO()(e.date,QO.a.ISO_8601),i=function(e,t,n,r){return ve.createElement($O,{entry:e,key:t,clicks:n,onClick:r})}(e,r+1,o,l),c=function(e,t,n){var r=n.today,a=n.startOfWeek,o=n.startOfMonth,i=n.startOfLastMonth;if(e.isBefore(i,"month"))return"older";if(e.isBefore(o))return"lastMonth";if(e.isBefore(a)){var c=e.diff(a,"weeks");return 0===c?"lastWeek":-1===c?"twoWeeksAgo":-2===c?"threeWeeksAgo":"fourWeeksAgo"}if(e.isBefore(r)){var s=e.diff(r,"days");return 0===s?"yesterday":-1===s?"twoDaysAgo":-2===s?"threeDaysAgo":-3===s?"fourDaysAgo":-4===s?"fiveDaysAgo":"sixDaysAgo"}return"today"}(a,0,t);n[c].push(i)}),n},[s,o]);Object(ve.useEffect)(function(){s.history.count()<50&&!s.loading&&s.olderPatchesAvailable&&nE(u,e.match.params.uid,s.oldestBoardVersion)},[s]);var p,f=Object(ve.useMemo)(function(){return function(){u(pu(e.match.params.uid,!1))}},[e.match.params.uid]),b=[],h=0;for(p in m)m.hasOwnProperty(p)&&m[p].length>0&&(b.push(ve.createElement(tE,{key:p,title:e.t("insp.history.".concat(p)),index:h,entries:m[p],isActiveByDefault:0===h})),h++);return d&&s.loading&&b.push(ve.createElement(KO.a,{active:!0},ve.createElement(og.a,null,ve.createElement(og.a.Item,{key:"item-loader",style:{paddingTop:"10px"}},ve.createElement(Up.a,{active:!0,inline:"centered"}))))),ve.createElement(JO.a.Group,{animation:"slide down"},d&&ve.createElement("div",{style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee"}},ve.createElement(kp.a,{style:{height:"100%",borderRadius:"0"}},ve.createElement(kp.a.Content,null,ve.createElement(kp.a.Header,null,ve.createElement(xp.a,{name:"close",className:"right floated",onClick:f,style:{cursor:"pointer"}})," Activity")),ve.createElement(kp.a.Content,{onScroll:function(t){var n=t.target;n instanceof HTMLDivElement&&n.scrollHeight-n.scrollTop===n.clientHeight&&!s.loading&&s.olderPatchesAvailable&&nE(u,e.match.params.uid,s.oldestBoardVersion)},style:{position:"relative",height:"100%",overflowY:"scroll"}},ve.createElement(ZO.a,null,b)))))})),aE=Object(De.b)()(function(e){var t=e.match.params.invitation,n=Ci(),r=Object(ze.useSelector)(n),a=Object(ve.useState)(!1),o=Object(Qe.a)(a,2),c=o[0],s=o[1],u=Object(ve.useState)(yt),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useDispatch)();return Object(ve.useEffect)(function(){r.signedIn&&qs(t).then(function(n){var r=n.response;if(n.error)return p(i.Command.error("Request failed","Failed to process board invitation")),void s(!0);if(r){var a=r.data.name,o=r.data.boardId,c=r.data.organizationId,u=0;Rs(t).then(function n(r){if(r.error)return u<2?(u++,void window.setTimeout(function(){Rs(t).then(n)},100)):(p(i.Command.error("Command failed","Failed to process board invitation")),void s(!0));c&&p(f.Command.switchActiveOrganization(c)),p(i.Command.info(e.t("insp.board.joined.title"),e.t("insp.board.joined.details",{name:a}))),m(Et(o)),s(!0)})}})},[r.signedIn]),c?ve.createElement(Me.c,{to:l}):ve.createElement(Lp.a,{active:!0,className:"page"},ve.createElement(Up.a,{size:"large"},"Processing Board Invitation"))}),oE=Object(De.b)()(function(e){var t=e.match.params.invitation,n=Ci(),r=Object(ze.useSelector)(n),a=Object(ve.useState)(!1),o=Object(Qe.a)(a,2),c=o[0],s=o[1],u=Object(ze.useDispatch)();return Object(ve.useEffect)(function(){r.signedIn&&sf(t).then(function(n){var r=n.response;if(n.error)return u(i.Command.error("Request failed","Failed to process team invitation")),void s(!0);if(r){var a=r.data.name,o=r.data.organizationId||null,c=0;cf(t).then(function n(r){if(r.error)return c<2?(c++,void window.setTimeout(function(){cf(t).then(n)},100)):(u(i.Command.error("Command failed","Failed to process team invitation")),void s(!0));u(i.Command.info(e.t("insp.team.joined.title"),e.t("insp.team.joined.details",{team:a}))),o&&u(f.Command.switchActiveOrganization(o)),u(U.Query.fetchUserBoards()),s(!0)})}})},[r.signedIn]),c?ve.createElement(Me.c,{to:yt}):ve.createElement(Lp.a,{active:!0,className:"page"},ve.createElement(Up.a,{size:"large"},"Processing Team Invitation"))}),iE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(ae.BoardListSelector.makeGetBoards(!0)),n=Object(ve.useState)(""),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ze.useSelector)(Ci()),c=Object(ze.useSelector)(vi(i.activeOrganization)),s=!!c&&c.isAdmin(i.uid),u=t.filter(function(t){return(t.organization?s:!t.shared)&&!t.assignedTeams.contains(e.teamId)}).map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.team.grant_access")),ve.createElement(Ni.a.Content,null,ve.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(a),o("")}},ve.createElement(Xe.a,{placeholder:e.t("insp.team.choose_board"),fluid:!0,search:!0,selection:!0,options:u,onChange:function(e,t){return o(t.value)},value:a}),ve.createElement("div",{style:{marginTop:"10px"}},ve.createElement(Ri.a,{primary:!0,type:"submit",disabled:""===a},e.t("app.form.confirm"))))))}),cE=n(1216),sE=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useDispatch)();return l?ve.createElement(Me.c,{push:!0,to:Et(e.board.uid)}):ve.createElement(ve.Fragment,null,ve.createElement(Sp.a,{open:r,onOpen:function(){a(!0)},onClose:function(){a(!1)},on:"click",position:"bottom center",disabled:e.readonly,content:ve.createElement(cE.a,{secondary:!0,vertical:!0,compact:!0},ve.createElement(cE.a.Item,{content:e.t("app.open"),onClick:function(){return m(!0)}}),ve.createElement(cE.a.Item,{content:e.t("app.form.remove"),onClick:function(){a(!1),s(!0)}})),trigger:ve.createElement("div",{className:"ui large basic orange button",key:e.board.uid,onClick:function(){e.readonly&&m(!0)}},ve.createElement("div",null,e.board.name))}),ve.createElement(Vp.a,{open:c,header:e.t("insp.team.remove_board_confirm_title"),content:e.t("insp.team.remove_board_confirm_text",{board_name:e.board.name}),confirmButton:e.t("insp.team.remove_board_confirm_button"),cancelButton:ve.createElement(Ri.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return s(!1)},onConfirm:function(){e.readonly||p(ce.adminRevokeTeamAccessToBoard(e.board.uid,e.team.uid)),s(!1)}}))}),uE=function(e){var t=Object(ve.useState)(e.focus||!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(e.text),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useRef)(null),f=function(){e.required&&""===l?(s(!0),window.setTimeout(function(){p&&p.current&&p.current.focus()},200)):(l!==e.text&&e.onTextChanged(l),a(!1))},b=""!==l?l.length:e.placeholder?e.placeholder.length:0,h=e.padding||0,g=e.charSize*b+h;e.minWidth&&g<e.minWidth&&(g=e.minWidth);var v=e.border||"2px solid #4593CE";c&&(v="4px solid #E0B4B4");var y=""===e.text?e.placeholder||"":e.text,O=r&&!e.disabled;return ve.createElement(ve.Fragment,null,O&&ve.createElement(tv.a,{transparent:!0,error:c,value:l,ref:p,onBlur:f,onChange:function(t,n){return""!==(r=n.value)&&c&&s(!1),""===r&&e.required&&!c&&s(!0),void m(r);var r},onKeyDown:function(t){"Enter"===t.key?f():"Escape"===t.key&&(m(e.text),s(!1),a(!1),e.onCancel&&e.onCancel())},placeholder:e.placeholder,autoFocus:e.focus,style:{width:g+e.widthUnit,borderBottom:v}}),!O&&ve.createElement("span",{onClick:function(){a(!0),window.setTimeout(function(){p&&p.current&&p.current.focus()},200)}},y))},dE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Rl()),n=Object(ze.useDispatch)();return ve.createElement("h3",{style:{margin:0,cursor:"pointer"},id:e.team.uid},ve.createElement(uE,{text:e.team.name,charSize:9,widthUnit:"px",padding:20,required:!0,onTextChanged:function(r){e.addTeamMode?(n(ue.Command.addTeam(e.team.uid,r,t?t.uid:null)),e.onNameChanged&&e.onNameChanged(r)):n(ue.Command.renameTeam(e.team.uid,r))},focus:e.addTeamMode,onCancel:e.onCancelName,placeholder:e.t("insp.team.team_name")}),ve.createElement("span",null," \u2014 "),ve.createElement("span",{className:"sub header",style:{margin:0,cursor:"pointer"}},ve.createElement(uE,{text:e.team.description,charSize:9,widthUnit:"px",padding:20,placeholder:e.t("insp.team.team_description"),onTextChanged:function(t){n(ue.Command.changeTeamDescription(e.team.uid,t))},onCancel:e.onCancelDescription})))}),lE=n(1153),mE=Object(De.b)()(function(e){var t=Object(ve.useState)(Gn()),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),b=Object(Qe.a)(p,2),g=b[0],v=b[1],y=Object(ze.useDispatch)(),O=Object(ze.useSelector)(Zb(e.teamInvitation.uid));Object(ve.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.teamInvitation.invitedUser).then(function(e){var t=e.response;if(e.error,t){var n=h.createIioUserInfoFromServerData(t.data);Cn(n)&&a(n.value)}})},[e.teamInvitation.invitedUser]),Object(ve.useEffect)(function(){c&&s(!1),l&&O&&O.status===Rm.revoked&&v(!0)},[O]);return g?ve.createElement(ve.Fragment,null):ve.createElement(lE.a,null,ve.createElement(Sh,{user:r,size:"mini"}),ve.createElement("span",{style:{paddingLeft:"10px"}},e.teamInvitation.invitedUser),ve.createElement(xh.a,{floated:"right"},ve.createElement(jh,{content:e.t("app.form.resend"),icon:"paper plane",loading:c,onClick:function(){s(!0),y(ce.resendTeamInvitation(e.teamInvitation.uid))}}),ve.createElement(jh,{content:e.t("app.form.revoke"),icon:"delete",loading:l,onClick:function(){m(!0),y(ce.revokeTeamInvitation(e.teamInvitation.uid))}})))}),pE=function(e){var t=e.invitations.map(function(e){return ve.createElement(mE,{teamInvitation:e,key:e.uid})});return ve.createElement(og.a,{relaxed:!0,divided:!0},t)},fE=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},bE=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ve.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!0),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(Object(be.List)()),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ze.useSelector)(Ci()),v=Object(ze.useSelector)(vi(g.activeOrganization)),y=Object(be.List)(v?[v.ownerId].concat(Object(Za.a)(v.members.toJS())):[]),O=Object(ze.useSelector)(ei(y)),E=Object(ze.useDispatch)();Object(ve.useEffect)(function(){e.open&&(s(!0),uf(e.team.uid).then(function(e){var t=e.response,n=e.error;if(s(!1),n&&(console.error(n),h(!0)),t){var r=Ln(t.data,Bn([zn(),"Response data is not of type Array"]),Rn(lb));Sn(r)&&(console.error("Failed to process open team invitations loaded from server",r.value,t.data),h(!0)),Cn(r)&&(m(Object(be.List)(r.value)),E(se.teamInvitationsLoaded(Object(be.List)(r.value))))}})),e.open||m(Object(be.List)())},[e.open]);var k=!(!c&&0===l.count()),I=O.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.team.invite_user")),ve.createElement(Ni.a.Content,null,ve.createElement("form",{onSubmit:function(){E(ce.inviteUserToTeam(tt.v4(),e.team.uid,r)),a(""),e.onClose()}},ve.createElement("div",{style:{marginBottom:"10px"}},ve.createElement(Bh.a,{style:{width:"100%"},fluid:!0,value:r,results:I.toArray(),placeholder:e.t("insp.team.user_email"),showNoResults:!1,resultRenderer:function(e){return ve.createElement("div",{key:e.id},ve.createElement("div",{className:"ui image avatar"},ve.createElement("img",{src:e.image,alt:e.title})),ve.createElement("div",{className:"content"},ve.createElement("div",{className:"title"},e.title),ve.createElement("div",{className:"description"},e.description)))},onSearchChange:function(e,t){return a(t.value||"")},onResultSelect:function(e,t){a(t.result.description)},autoFocus:!0})),ve.createElement(Ri.a,{primary:!0,type:"submit",disabled:!fE(r)},e.t("insp.team.send_invitation"))),ve.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.open_invitations")),c&&ve.createElement(xp.a,{loading:!0,name:"spinner"}),k&&ve.createElement(pE,{invitations:l}),!k&&!b&&ve.createElement("p",{className:"infotextSecondary"},e.t("insp.team.empty_invitations")),b&&ve.createElement("p",{className:"infotextSecondary",style:{color:"red"}},e.t("insp.team.error_loading_invitations"))))})),hE=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useDispatch)();$e(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},b=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},h=e.isOwner?"admin-member":"";return ve.createElement("div",{className:"item "+h,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},ve.createElement(Xe.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly},ve.createElement(Xe.a.Menu,null,ve.createElement(Xe.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!c&&ve.createElement("span",{className:"ui avatar image placeholder",onClick:b}),ve.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:b,alt:e.member.username,onLoad:function(){return s(!0)},style:{display:c?"inline-block":"none"}}),ve.createElement("div",{className:"content",onClick:b},ve.createElement("div",{className:"header"},e.member.username)),ve.createElement(Vp.a,{open:!e.readonly&&l,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:e.member.username}),confirmButton:e.t("insp.team.remove_user_confirm_button"),cancelButton:ve.createElement(Ri.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||p(ce.removeMemberFromTeam(e.teamId,e.member.userId)),m(!1)}}))}),gE=n(231),vE=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=e.organizations.map(function(e){return{key:e.uid,value:e.uid,text:e.organizationName}});return ve.createElement(Je.a,{columns:2},ve.createElement(gE.a,{mobile:16,tablet:16,computer:12,largeScreen:12,widescreen:12},ve.createElement(Jh.a,{options:i.toJS(),fluid:!0,placeholder:e.t("insp.team.move_to_organization_select"),onChange:function(e,t){return o(t.value)}})),ve.createElement(gE.a,{mobile:16,tablet:16,computer:4,largeScreen:4,widescreen:4},ve.createElement(Ri.a,{primary:!0,floated:"right",onClick:function(){a&&t(ce.moveTeamToOrganization(e.teamId,a))}},e.t("insp.team.move_to_organization_submit"))),ve.createElement(Mi.a,{size:"small",info:!0},e.t("insp.team.move_to_organization_desc")))}),yE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(ei(e.team.members)),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ve.useState)(!1),l=Object(Qe.a)(d,2),m=l[0],p=l[1],f=Object(ze.useSelector)(bp(e.team.uid)),b=Object(ze.useDispatch)(),h=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return ve.createElement(hE,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid})}),g=f.map(function(t){return ve.createElement(sE,{board:t,team:e.team,key:t.uid})});return ve.createElement("div",{className:"ui segment"},!e.blueprint&&ve.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.preventDefault(),o(!0)}},"Delete"),ve.createElement(dE,{team:e.team,addTeamMode:e.blueprint,onNameChanged:function(t){e.blueprint&&e.onTeamAdded&&e.onTeamAdded(e.team.uid)},onCancelName:function(){e.onCancelName&&e.onCancelName(e.team.uid)},onCancelDescription:function(){e.onCancelDescription&&e.onCancelDescription(e.team.uid)}}),ve.createElement("div",{className:"ui horizontal divider"},"Teammember"),ve.createElement("div",{className:"ui horizontal list"},ve.createElement(Ri.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(e){e.preventDefault(),u(!0)},disabled:e.blueprint},ve.createElement("i",{className:"blue user icon"})),!e.blueprint&&h),ve.createElement("div",{className:"ui horizontal divider"},"Teamboards"),ve.createElement("div",{className:"ui horizontal list"},ve.createElement(Ri.a,{basic:!0,icon:!0,color:"orange",size:"large",onClick:function(e){e.preventDefault(),p(!0)},disabled:e.blueprint},ve.createElement("i",{className:"orange sticky note icon"})),!e.blueprint&&g),e.isMovable&&ve.createElement("div",{className:"ui horizontal divider"},e.t("insp.team.move_to_organization_title")),e.isMovable&&ve.createElement(vE,{organizations:e.targetOrganizations,teamId:e.team.uid}),ve.createElement(bE,{team:e.team,open:s,onClose:function(){u(!1)}}),ve.createElement(iE,{teamId:e.team.uid,open:m,onClose:function(){p(!1)},onSubmit:function(t){b(ue.Command.adminGrantTeamAccessToBoard(t,e.team.uid)),p(!1)}}),ve.createElement(Vp.a,{open:a,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:ve.createElement(Ri.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.team.name}),onCancel:function(){return o(!1)},onConfirm:function(){b(ue.Command.deleteTeam(e.team.uid))}}))}),OE=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useMemo)(function(){return sb(nt.a.v4())},[r]),d=Object(ze.useSelector)(Bb());c&&d.find(function(e){return e.uid===u.uid})&&(s(!1),a(!1));return ve.createElement(ve.Fragment,null,ve.createElement("div",null,ve.createElement("button",{className:"ui huge basic button",onClick:function(e){e.preventDefault(),a(!r)}},ve.createElement("i",{className:"plus icon"}),e.t("insp.team.overview_add"))),r&&ve.createElement(yE,{team:u,blueprint:!0,onTeamAdded:function(){return s(!0)},onCancelName:function(){return a(!1)},isMovable:!1,targetOrganizations:Object(be.List)()}))}),EE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(ei(e.team.members)),n=Object(ze.useSelector)(bp(e.team.uid)),r=t.sortBy(function(e){return e.username}).sort(function(t,n){return t.userId===e.team.ownerId?-1:n.userId===e.team.ownerId?1:0}).map(function(t){return ve.createElement(hE,{key:t.userId,member:t,isOwner:e.team.ownerId===t.userId,teamId:e.team.uid,readonly:!0})}),a=n.map(function(t){return ve.createElement(sE,{board:t,team:e.team,key:t.uid,readonly:!0})});return ve.createElement("div",{className:"ui segment"},ve.createElement("h3",{style:{margin:0}},e.team.name,ve.createElement("span",null," \u2014 "),ve.createElement("span",{className:"sub header"},e.team.description)),ve.createElement("div",{className:"ui horizontal divider"},"Teammember"),ve.createElement("div",{className:"ui horizontal list"},r),ve.createElement("div",{className:"ui horizontal divider"},"Teamboards"),ve.createElement("div",{className:"ui horizontal list"},a))}),kE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Rl()),n=Object(ze.useSelector)(Nl(e.currentUser.uid)),r=!t||!t.explicitOrganization,a=r?n.filter(function(e){return e.explicitOrganization&&!e.userIsGuest}):Object(be.List)(),o=r&&a.count()>0,i=function(e,t,n){return!!(e.organizationId&&n&&e.organizationId===n.organizationId&&n.userIsAdmin)||e.isAdmin(t)},c=e.teams.filter(function(n){return i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return ve.createElement(yE,{isMovable:o,targetOrganizations:a,team:e,key:e.uid})}),s=e.teams.filter(function(n){return!i(n,e.currentUser.uid,t)}).sortBy(function(e){return e.name}).map(function(e){return ve.createElement(EE,{team:e,key:e.uid})});return ve.createElement(ve.Fragment,null,ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Ze.a,{as:"h1",icon:!0,textAlign:"center"},ve.createElement(Ze.a.Content,null,"Manage Your Teams",ve.createElement(Ze.a.Subheader,null))))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement("div",null,ve.createElement(OE,{disabled:!1}),c))),0===c.count()&&0===s.count()&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(Mi.a,{info:!0,floating:!0,content:e.t("insp.team.no_teams")}))),s.count()>0&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Ze.a,{as:"h2",icon:!0,textAlign:"center"},ve.createElement(Ze.a.Content,null,"Joined Teams",ve.createElement(Ze.a.Subheader,null))))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,s)))});!function(e){e.organization="organization",e.teams="teams"}(qO||(qO={}));var IE,xE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Bb()),n=Object(ze.useSelector)(Ci());return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0,padded:!0},ve.createElement(kE,{teams:t,currentUser:n})))}),jE=n(1145),TE=n(1245),SE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Km("lite_mode",!1)),n=Object(ze.useDispatch)(),r=t?"#2eba46":"inherit",a=t?"high":"half",o=t?"lite_mode_is_active":"activate_lite_mode";return ve.createElement(Sp.a,{trigger:ve.createElement(jE.a,{onClick:function(){n(Ht("lite_mode",!t))}},ve.createElement(xp.a,{name:"battery ".concat(a),style:{color:r}})),content:ve.createElement(ve.Fragment,null,ve.createElement("p",null,e.t("insp.top_menu."+o)),t&&ve.createElement("p",null,ve.createElement("small",null,e.t("insp.top_menu.lite_mode_is_active_details"))))})}),CE=Object(lt.c)(function(e){var t=Object(ze.useSelector)(Ci()),n=Object(ze.useSelector)(vi(t.activeOrganization)),r=Object(ze.useSelector)(tp(e.match.params.uid)),a=Object(ze.useSelector)(Zm()),o=Object(ze.useSelector)(Km("show_timer_hint",!1)),i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ze.useDispatch)();Object(ve.useEffect)(function(){a&&o&&u(!0)},[a,o]);var l=!!n&&n.isAdmin(t.uid);return ve.createElement(ve.Fragment,null,ve.createElement(SE,null),ve.createElement(Sp.a,{open:s,trigger:ve.createElement(jE.a,{icon:"hourglass half",onClick:function(){return d(hu(e.match.params.uid,!0))}}),openOnTriggerClick:!1,openOnTriggerFocus:!1,openOnTriggerMouseEnter:!1,position:"bottom left",content:ve.createElement(ve.Fragment,null,ve.createElement("p",null,e.t("insp.board.timer.hint")),ve.createElement("p",null,ve.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){d(Ht("show_timer_hint",!1)),u(!1)}},e.t("insp.hint.got_it"))))}),ve.createElement(Xe.a,{item:!0,icon:"ellipsis vertical"},ve.createElement(Xe.a.Menu,{direction:"left"},ve.createElement(Xe.a.Item,{icon:"history",text:"Activity",onClick:function(){return d(pu(e.match.params.uid,!0))}}),ve.createElement(Xe.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return d(fu(e.match.params.uid,!0))}}),ve.createElement(Xe.a.Item,{icon:"code",text:"Cody",onClick:function(){return d(bu(e.match.params.uid,!0))}}),r&&(r.organization?l:!r.shared)&&ve.createElement(Xe.a.Item,{icon:"cog",text:"Settings",to:xt(e.match.params.uid),as:Pe.NavLink}),ve.createElement(Xe.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return d(mu(e.match.params.uid))}}),ve.createElement(Xe.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))))}),wE=Object(De.b)()(Object(Me.k)(CE)),_E=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},AE=Object(De.b)()(function(e){var t=Object(ve.useState)(e.email),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ze.useSelector)(Ci()),i=Object(ze.useSelector)(vi(o.activeOrganization)),c=Object(be.List)(i?[i.ownerId].concat(Object(Za.a)(i.members.toJS())):[]),s=Object(ze.useSelector)(ei(c));Object(ve.useEffect)(function(){a(e.email)},[e.email]);var u=s.filter(function(e){return e.username.toLocaleLowerCase().includes(r.toLocaleLowerCase())||e.email.toLocaleLowerCase().includes(r.toLocaleLowerCase())}).sortBy(function(e){return e.username}).map(function(e){return{id:e.userId,title:e.username,description:e.email,image:e.avatarUrl}});return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose,size:"tiny"},ve.createElement(Ni.a.Header,null,e.t("insp.board.invite_user")),ve.createElement(Ni.a.Content,null,ve.createElement("div",{style:{marginBottom:"10px"}},ve.createElement(Je.a,{container:!0,stackable:!0,doubling:!0},ve.createElement(gE.a,{mobile:16,tablet:8,computer:10},ve.createElement(Bh.a,{fluid:!0,value:r,results:u.toArray(),placeholder:e.t("insp.board.form.email"),showNoResults:!1,resultRenderer:function(e){return ve.createElement("div",{key:e.id},ve.createElement("div",{className:"ui image avatar"},ve.createElement("img",{src:e.image,alt:e.title})),ve.createElement("div",{className:"content"},ve.createElement("div",{className:"title"},e.title),ve.createElement("div",{className:"description"},e.description)))},onSearchChange:function(t,n){return r=n.value||"",a(r),void(_E(r)&&e.onEmailChange(r));var r},onResultSelect:function(t,n){a(n.result.description),e.onEmailChange(n.result.description)}})),ve.createElement(gE.a,{mobile:16,tablet:8,computer:6},ve.createElement(Ri.a.Group,null,ve.createElement(Ri.a,{type:"button",className:"positive",children:"Read",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!1}))}}),ve.createElement(Ri.a.Or,{text:"+"}),ve.createElement(Ri.a,{type:"button",className:e.permissions.writeAccess?"positive":"",children:"Write",onClick:function(){return e.onPermissionsChange(Object(Ye.a)({},e.permissions,{writeAccess:!e.permissions.writeAccess}))}})))))),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{primary:!0,type:"submit",onClick:e.onSubmit,disabled:!_E(r)},e.t("app.form.confirm"))))}),BE=Object(Me.k)(function(e){var t=Object(ze.useSelector)(Ci()),n=Object(ze.useSelector)(vi(t.activeOrganization)),r=Object(ve.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],c=Object(ve.useState)(!1),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=Object(ve.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),m=Object(Qe.a)(l,2),p=m[0],f=m[1],b=Object(ze.useSelector)(tp(e.match.params.uid)),h=Object(ze.useDispatch)(),g=!!n&&(n.isAdmin(t.uid)||b&&b.isCreator(t.uid)),v=function(){d(!1)};return ve.createElement(ve.Fragment,null,b&&(b.organization?g:!b.shared)&&ve.createElement(ve.Fragment,null,ve.createElement(jE.a,null,ve.createElement(Ri.a,{icon:!0,className:"share",onClick:function(e){e.stopPropagation(),d(!0)}},ve.createElement(xp.a,{name:"share alternate"}),"\xa0share")),ve.createElement(AE,{open:u,onClose:v,onSubmit:function(){h(N.shareBoard(b.uid,o,p)),i(""),v()},email:o,onEmailChange:function(e){i(e)},permissions:p,onPermissionsChange:f})))}),NE=function(e){var t=Ci(),n=Object(ze.useSelector)(t),r=Object(ve.useState)(!1),a=Object(Qe.a)(r,2),o=a[0],i=a[1];return ve.createElement(ve.Fragment,null,ve.createElement(Sp.a,{on:"click",position:"bottom center",open:o,onOpen:function(){i(!0)},onClose:function(){i(!1)},trigger:ve.createElement(jE.a,null,ve.createElement(Eh.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(n.avatarUrl,")"),backgroundSize:"cover"}})),content:ve.createElement(cE.a,{vertical:!0,secondary:!0,compact:!0},ve.createElement(jE.a,{to:Ot,as:Pe.NavLink,activeClassName:"active",onClick:function(){return i(!1)}},ve.createElement(xp.a,{name:"user"}),"Profile"),ve.createElement(jE.a,{onClick:function(){return Bj()}},ve.createElement(xp.a,{name:"sign-out"}),"Sign Out"))}))},RE=function(e){return ve.createElement(Pe.Link,{to:Et(e.boardId),className:(e.activeCrumb?"active ":"")+"section"},e.children)},LE=Object(Me.k)(function(e){var t=tp(e.match.params.uid),n=Object(ze.useSelector)(t),r="Unknown",a=ve.createElement(ve.Fragment,null);return n&&(r=n.name,n.writeAccess||(a=ve.createElement(TE.a.Section,null,"\xa0(read only)"))),ve.createElement(ve.Fragment,null,ve.createElement(TE.a.Divider,null),ve.createElement(TE.a.Section,{active:!0,as:RE,activeCrumb:!0,boardId:e.match.params.uid},r),a)}),UE=function(e){return ve.createElement(Pe.Link,{to:yt},e.children)},DE=function(e){return ve.createElement(TE.a.Section,{as:UE},"Boards")},zE=function(e){return ve.createElement(TE.a.Section,null,"Organization")},ME=function(e){return ve.createElement(TE.a.Section,null,"Teams")},PE=function(e){return ve.createElement(TE.a.Section,null,"Updates")},FE=function(e){return ve.createElement(TE.a.Section,null,"Profile")},GE=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ze.useSelector)(vv()),n=kt(e.location.pathname)?t.width+20+"px":"270px";return ve.createElement(cE.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n}},ve.createElement(Me.d,{path:yt},ve.createElement(jE.a,null,ve.createElement(TE.a,null,ve.createElement(Me.d,{exact:!0,path:[yt,"/inspectio/board/:uid",It],component:DE}),ve.createElement(Me.d,{exact:!0,path:Ot,component:FE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/updates",component:PE}),ve.createElement(Me.d,{exact:!0,path:["/inspectio/board/:uid",It],component:LE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/teams",component:ME}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/organization",component:zE})))),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:BE}),ve.createElement(cE.a.Menu,{position:"right",id:"topmenuUsers"}),ve.createElement(NE,null),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:wE}))})),HE=n(211),VE=n.n(HE),qE=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Rl());return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.board.add")),ve.createElement(Ni.a.Content,null,ve.createElement(Mi.a,{icon:"dollar",warning:!0,content:t&&t.userIsGuest?e.t("insp.user.quota_reached_guest"):t&&t.explicitOrganization?e.t("insp.user.quota_reached"):e.t("insp.user.quota_reached_user")})))}),WE=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(""),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ve.useRef)(null),v=_.makeGetCurrentBoardQuota(),y=Object(ze.useSelector)(v),O=_.makeGetCurrentUser(),E=Object(ze.useSelector)(O),k=Object(ze.useDispatch)();return ve.createElement("div",{className:"item"},ve.createElement(Ri.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){g.current.focus()},200)}},ve.createElement("i",{className:"plus icon"})," Add\xa0Board"),ve.createElement(JO.a,{animation:"fade down",visible:r,duration:200},ve.createElement("div",{className:"ui icon input"},ve.createElement("form",{onSubmit:function(t){if(t.preventDefault(),""!==l)if(0!==y){var n=z.createUserBoard(E.uid,l);k(N.addBoard(n,e.history))}else s(!0);else h(!0)}},ve.createElement(tv.a,{placeholder:"Board name ...",fluid:!0,ref:g,error:b,value:l,onChange:function(e){m(e.target.value),h(""===e.target.value)}})))),ve.createElement(qE,{open:c,onClose:function(){m(""),a(!1),s(!1)}}))})),YE=function(e,t){return!!t.find(function(t){return t.uid===e})},QE=Object(De.b)()(function(e){var t=Ci(),n=(Object(ze.useSelector)(t),Object(ze.useSelector)(Bb(!0))),r=Object(ve.useState)(""),a=Object(Qe.a)(r,2),o=a[0],i=a[1],c=n.map(function(e){return{key:e.uid,value:e.uid,text:e.name}}).toArray();return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.team.add_to_board",{board_name:e.board.name})),ve.createElement(Ni.a.Content,null,ve.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit(o),i("")}},ve.createElement(Xe.a,{placeholder:e.t("insp.team.choose"),fluid:!0,search:!0,selection:!0,options:c,onChange:function(e,t){return i(t.value)},value:o}),ve.createElement("div",{style:{marginTop:"10px"}},ve.createElement(Ri.a,{primary:!0,type:"submit",disabled:!YE(o,n)},e.t("app.form.confirm"))))))}),KE=function(e,t){var n=t.find(function(t){return t.uid===e});return n?n.name:"Unknown Team"},JE=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=(n[0],n[1],Object(ve.useState)(!1)),a=Object(Qe.a)(r,2),o=(a[0],a[1],Object(ve.useState)("")),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)({adminAccess:!1,writeAccess:!0,readAccess:!0}),d=Object(Qe.a)(u,2),l=d[0],m=d[1],f=Object(ve.useState)(!1),b=Object(Qe.a)(f,2),h=b[0],g=b[1],v=Object(ve.useState)(!1),y=Object(Qe.a)(v,2),O=y[0],E=y[1],k=Object(ve.useState)(!1),I=Object(Qe.a)(k,2),x=I[0],j=I[1],T=Object(ve.useState)(!1),S=Object(Qe.a)(T,2),C=S[0],w=S[1],_=Object(ve.useState)(void 0),A=Object(Qe.a)(_,2),B=A[0],R=(A[1],Object(ve.useState)(void 0)),L=Object(Qe.a)(R,2),U=L[0],D=(L[1],Object(ze.useDispatch)()),z=Object(ze.useSelector)($o()),M=Object(ze.useSelector)(Bb()),P=Object(ze.useSelector)(Km(Wm(e.board.uid),!1));Object(ve.useEffect)(function(){e.board.sharedWith.count()<1||D(p.loadUsersInfo(e.board.sharedWith.toArray()))},[e.board.sharedWith]);var F=function(e){var t=z.find(function(t){return t.userId===e});return t?t.username:""},G=function(){g(!1)},H=function(e){e.stopPropagation()},V=P?"eye slash icon":"eye icon";return ve.createElement("div",{className:"ui item",style:{cursor:"pointer"}},!1,ve.createElement(Pe.NavLink,{className:"board-list board",to:Et(e.board.uid)},e.board.name),ve.createElement(xp.a,{className:V,onClick:function(t){t.stopPropagation(),D(Ht(Wm(e.board.uid),!P))}}),!1,ve.createElement("div",{onClick:H},ve.createElement(QE,{open:O,onClose:function(){E(!1)},onSubmit:function(t){D(ue.Command.adminGrantTeamAccessToBoard(e.board.uid,t)),E(!1)},board:e.board}),ve.createElement(AE,{open:h,onClose:G,onSubmit:function(){D(N.shareBoard(e.board.uid,c,l)),s(""),G()},email:c,onEmailChange:function(e){s(e)},permissions:l,onPermissionsChange:m}),ve.createElement(Vp.a,{open:x,header:e.t("insp.board.remove_user_confirm_title"),content:e.t("insp.board.remove_user_confirm_text",{user_name:B?F(B):""}),onCancel:function(){return j(!1)},onConfirm:function(){B&&(D(N.revokeAccessToBoard(e.board.uid,B)),j(!1))}}),ve.createElement(Vp.a,{open:C,header:e.t("insp.team.remove_from_board_confirm_title"),content:e.t("insp.team.remove_from_board_confirm_text",{team_name:U?KE(U,M):""}),onCancel:function(){return w(!1)},onConfirm:function(){U&&(D(ue.Command.adminRevokeTeamAccessToBoard(e.board.uid,U)),w(!1))}})))});!function(e){e.all="all",e.onlyShared="onlyShared",e.noShared="noShared"}(IE||(IE={}));var ZE,XE=Object(De.b)()(function(e){return ve.createElement("div",{className:"ui item",style:{cursor:"pointer",textAlign:"center",color:"#00b5ad"},onClick:function(){return e.onClick()}},e.showAll?e.t("app.showLess"):e.t("app.showAll"))}),$E=function(e){var t,n=Object(ze.useSelector)(Ci()),r=Object(ze.useSelector)(vi(n.activeOrganization)),a=!!r&&r.isAdmin(n.uid),o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=fp(!0),d=Object(ze.useSelector)(u),l=Object(ze.useSelector)(Jm()),m=(Object(ve.useMemo)(function(){return d.filter(function(e){return e.shared&&!a}).count()},[d]),Object(be.List)()),p=Object(be.List)();d.filter(function(e){return!e.shared||a}).sortBy(function(e){return e.name},function(e,t){return e===t?0:e<t?-1:1}).forEach(function(e){!0===l[Wm(e.uid)]?p=p.push(e):!c&&m.count()>=3?p=p.push(e):m=m.push(e)}),c&&(m=(t=m).push.apply(t,Object(Za.a)(p.toArray())));var f=m.map(function(e){return ve.createElement(JE,{key:e.uid,board:e})}).toArray();return p.count()>0||m.count()>3?f.push(ve.createElement(XE,{showAll:c,key:"sidebar-show-more-boards",onClick:function(){s(!c)}})):c&&s(!1),ve.createElement(ve.Fragment,null,f)},ek=Object(Me.k)(function(e){var t=fp(!0),n=Object(ze.useSelector)(t),r="ui small label";return e.location.pathname===yt&&(r+=" teal"),ve.createElement(Pe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:yt},ve.createElement(xp.a,{className:"sticky note icon"}),ve.createElement("div",{className:r},n.count()),"Boards")}),tk=n(497),nk=(n(1231),Object(De.b)()(function(e){var t=Object(ve.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return e.reset&&""!==r&&a(""),ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.feedback.header")),ve.createElement(Ni.a.Content,null,ve.createElement(Mi.a,null,ve.createElement(tk.a,null,e.t("insp.feedback.info_text"),ve.createElement("p",null,"\xa0"),ve.createElement("p",null,ve.createElement("a",{href:"https://gitter.im/proophboard/community",target:"_blank"},ve.createElement(xp.a,{name:"arrow right"}),"\xa0Chat")),ve.createElement("p",null,ve.createElement("a",{href:"https://github.com/proopboard/issue-tracker/issues",target:"_blank"},ve.createElement(xp.a,{name:"arrow right"}),"\xa0Issue Tracker")))),!1),!1)})),rk="Failed to send feedback. Please try again or send an email to contact@prooph.de",ak=function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],c=Object(ve.useState)(!1),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=Object(ze.useSelector)(Ci());return ve.createElement(ve.Fragment,null,ve.createElement("div",{className:"ui item"},ve.createElement(Ri.a,{className:"big",onClick:function(){d(!1),o(!0)}},ve.createElement("div",{className:"header"},"Feedback"),ve.createElement("div",{className:"sub header",style:{textTransform:"none",fontWeight:"normal"}},"Send Bugs & Feature Requests"))),ve.createElement(nk,{open:a,onClose:function(){return o(!1)},onSubmit:function(e){var n,r;(n=e,r=l.email,_e("Feedback.SendUserFeedback",{text:n,userEmail:r})).then(function(e){var n=e.response;e.error&&t(i.Command.error("Request Error",rk)),n&&(d(!0),o(!1),t(i.Command.info("Feedback sent","We received your feedback. Thank you!")))}).catch(function(){t(i.Command.error("Request Error",rk))})},reset:u}))};!function(e){e.newBoard="new_board",e.replaceBoard="replace_board"}(ZE||(ZE={}));var ok,ik,ck=function(e,t){var n=new FileReader;n.onload=function(){var e=n.result;null===e&&(e=""),t(e)},n.readAsText(e)},sk=function(e){return e.name.split(".").slice(0,-1).join(".")},uk=Object(De.b)()(function(e){var t=Object(ve.useRef)(null),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ve.useState)(!1),l=Object(Qe.a)(d,2),m=l[0],p=l[1],f=Object(ve.useState)(null),b=Object(Qe.a)(f,2),h=b[0],g=b[1],v=_.makeGetCurrentBoardQuota(),y=Object(ze.useSelector)(v),O=_.makeGetCurrentUser(),E=Object(ze.useSelector)(O),k=fp(),I=Object(ze.useSelector)(k),x=Object(ve.useState)("undefined"),j=Object(Qe.a)(x,2),T=j[0],S=j[1],C=Object(ve.useState)(void 0),w=Object(Qe.a)(C,2),A=w[0],B=w[1],R=Object(ze.useDispatch)(),L=function(e,n,r){if(r===ZE.newBoard){if(0===y)return u(!0),void o(!1);ck(n,function(t){var n=tt.v4();R(N.importNewBoard(e,t,n)),o(!1),B(n)})}else{var a=I.filter(function(t){return t.name===e});if(a.count()>0){var i=a.first();ck(n,function(e){var t=i.updateXml(e,E.uid);R(N.importExistingBoard(t)),window.setTimeout(function(){B(t.uid)},50),o(!1)})}}t.current.value=""};return A&&1===I.filter(function(e){return e.uid===A}).count()?ve.createElement(Me.c,{to:Et(A)}):ve.createElement("div",{className:"item"},ve.createElement(Ri.a,{className:"large basic",onClick:function(){t.current.click()},disabled:a},ve.createElement("i",{className:"download icon"})," Import\xa0Board"),ve.createElement("input",{type:"file",ref:t,style:{display:"none"},onChange:function(e){o(!0);var t=e.target.files[0]||null,n=sk(t);if(0!==I.filter(function(e){return e.name===n}).count())return g(t),S(n),void p(!0);L(sk(t),t,ZE.newBoard)}}),ve.createElement(qE,{open:s,onClose:function(){u(!1)}}),ve.createElement(Ni.a,{open:m,closeIcon:!0,onClose:function(){p(!1)}},ve.createElement(Ni.a.Header,null,e.t("insp.board.import")),ve.createElement(Ni.a.Content,null,ve.createElement(Mi.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",T)})),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{primary:!0,onClick:function(){p(!1),h&&L(sk(h)+" (Copy)",h,ZE.newBoard)}},ve.createElement(xp.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),ve.createElement(Ri.a,{basic:!0,onClick:function(){p(!1),h&&L(sk(h),h,ZE.replaceBoard)}},e.t("insp.board.btn_replace_board")))))}),dk=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(!1),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(!1),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ze.useSelector)(Zm()),l=Object(ze.useSelector)(Km("show_logo_hint",!1));Object(ve.useEffect)(function(){d&&s&&l&&o(!0)},[d,s,l]);return ve.createElement(Sp.a,{open:a,position:"bottom center",content:ve.createElement(ve.Fragment,null,ve.createElement("p",null,ve.createElement("strong",null,e.t("insp.hint.new_logo_header"))),ve.createElement("p",null,e.t("insp.hint.new_logo_text"),"!"),ve.createElement("p",null,ve.createElement(xp.a,{name:"arrow right"}),"\xa0",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Rebranding",target:"_blank"},e.t("insp.hint.learn_more"))),ve.createElement("p",null,ve.createElement("span",{style:{color:"#9cc8f5",cursor:"pointer",float:"right"},onClick:function(){o(!1),t(Ht("show_logo_hint",!1))}},e.t("insp.hint.got_it")))),trigger:ve.createElement(jE.a,{className:"logo-item"},ve.createElement(Pe.Link,{to:yt},ve.createElement("img",{className:"logo",src:"img/prooph-board-logo.png",alt:"prooph board logo",onLoad:function(){u(!0)}})))})}),lk=function(e){var t=Object(ze.useDispatch)(),n=vp(),r=Object(ze.useSelector)(n).filter;return ve.createElement("div",{className:"item"},ve.createElement("div",{className:"ui icon input"},ve.createElement("input",{type:"text",placeholder:"Search...",value:r,onChange:function(e){t(xu(e.target.value))}}),""===r&&ve.createElement("i",{className:"search icon"}),""!==r&&ve.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:function(e){e.preventDefault(),t(xu(""))}})))},mk=n(1085),pk=n(1217),fk=n(1086),bk={elements:Object(be.List)(),filter:"",focus:!1},hk=function(e){var t=e.split(";"),n=[],r=[],a=[],o=[];return t.forEach(function(e){-1!==e.search("id:")?n.push(e.replace("id:","").trim()):-1!==e.search("type:")?r.push(e.replace("type:","").trim().toLowerCase()):-1!==e.search("tag:")?o.push(e.replace("tag:","").trim().toLowerCase()):a.push(e.trim())}),{nodeIds:n,nodeTypes:r,nodeLabels:a,nodeTags:o,strict:!1}},gk=function(e,t){if(t.nodeTypes.length&&!t.nodeTypes.includes(e.getType().toLowerCase()))return!1;if(t.nodeIds.length&&!t.nodeIds.includes(e.getId()))return!1;if(t.nodeTags.length){var n=!0,r=!1,a=void 0;try{for(var o,i=t.nodeTags[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(!e.getTags().contains(c)){if("planned"!==c)return!1;if(!e.getTags().contains("planed"))return!1}}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}var s=!0;return t.nodeLabels.forEach(function(n){t.strict?e.getName()!==n&&(s=!1):-1===e.getName().toLowerCase().search(n.toLowerCase())&&(s=!1)}),s},vk=function e(t,n){var r=[],a=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===gi.feature}(n),o=function(e){return 1===e.nodeTypes.length&&e.nodeTypes[0]===gi.boundedContext.toLowerCase()}(n);return t.forEach(function(t){if(a&&t.getType()===gi.feature)gk(t,n)&&r.push(t);else if(o&&t.getType()===gi.boundedContext)gk(t,n)&&r.push(t);else{var i=e(t.children(),n);i.count()>0?r.push(t.setChildren(i)):gk(t,n)&&r.push(t.setChildren(i))}}),Object(be.List)(r)},yk=function e(t,n){var r=[];return t.forEach(function(t){var a=e(t.children(),n);a.count()>0&&r.push.apply(r,Object(Za.a)(a.toArray())),gk(t,n)&&r.push(t)}),Object(be.List)(r)},Ok=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"mergeTree",value:function(e){return e.set("filter",this.filter)}},{key:"getFilteredElementsAsTree",value:function(){var e=hk(this.filter);return vk(this.elements,e)}},{key:"isFiltered",value:function(){return""!==this.filter}},{key:"getFilteredElementsByTypeAndLabel",value:function(e,t){return yk(this.elements,{nodeIds:[],nodeLabels:[t],strict:!0,nodeTags:[],nodeTypes:[e]})}},{key:"getElement",value:function(e){var t=yk(this.elements,{nodeIds:[e],nodeLabels:[],nodeTags:[],nodeTypes:[],strict:!0});if(t.size>0)return t.first()}}]),t}(Object(be.Record)(bk)),Ek=function(e){return function(t){return function(e,t){return e.getIn(["inspectioBoards","elementsTree",t])||new Ok}(t,e)}},kk="",Ik=function(e,t){return t?e.replace("type:".concat(t,";"),""):e},xk=function(e,t){return t?"type:".concat(t,";")+e:e},jk=function(e){switch(e){case gi.event:case gi.command:case gi.role:case gi.aggregate:case gi.document:case gi.policy:case gi.externalSystem:case gi.hotSpot:case gi.ui:case gi.boundedContext:case gi.feature:case gi.icon:case gi.image:case gi.freeText:return!0;default:return!1}},Tk=!1,Sk=function(e){switch(e){case sl.boundedContext.toLowerCase():return sl.boundedContext;case sl.freeText.toLowerCase():return sl.freeText;case sl.hotSpot.toLowerCase():return sl.hotSpot;case sl.externalSystem.toLowerCase():return sl.externalSystem;default:return e}},Ck=Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Ek(e.match.params.uid),r=Object(ze.useSelector)(n),a=Object(ve.useState)(r.filter),o=Object(Qe.a)(a,2),i=o[0],c=o[1],s=Object(ve.useRef)(null),u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ve.useState)(!1),v=Object(Qe.a)(g,2),y=v[0],O=v[1];if(kk!==r.filter){kk=r.filter,ok=b;var E=hk(r.filter);E.nodeTypes.length&&(ok=E.nodeTypes[0],Object.values(sl).map(function(e){return e.toLowerCase()}).includes(ok)?h(ok):ok=b),c(Ik(r.filter,ok))}else if(ok&&!b){var k=hk(r.filter);k.nodeTypes.length&&k.nodeTypes[0]===ok&&(c(Ik(r.filter,ok)),h(ok))}r.focus&&s&&s.current&&(s.current.focus(),t(Su(e.match.params.uid,r.filter,!1)));var I=Un.debounce(function(n){kk=xk(n,b),t(Su(e.match.params.uid,kk))},500),x=function(){c(""),h(void 0),kk="",ok=void 0,t(Su(e.match.params.uid,""))},j=b?ig.stickyColors[b]:"#909090",T=y?" focus":"";return ve.createElement("div",{className:"item"},ve.createElement("div",{className:"ui left action right icon input"},ve.createElement(Xe.a,{open:l,icon:!1,onClose:function(){m(!1)},scrolling:!0},ve.createElement(mk.a,{style:{zIndex:99e3}},ve.createElement(pk.a,{text:"Clear Filter",icon:"close",disabled:!b,onClick:function(){kk=Ik(kk,b),ok=void 0,h(void 0),t(Su(e.match.params.uid,kk))}}),ve.createElement(fk.a,null),Object.values(sl).filter(jk).map(function(n){return ve.createElement(pk.a,{key:n,onClick:function(){return function(n){kk=Ik(kk,b),h(n),ok=n,kk=xk(kk,n),t(Su(e.match.params.uid,kk))}(n.toLowerCase())},icon:ve.createElement(cg,{cellType:n}),text:e.t("app.stickyTypes."+n)})}))),ve.createElement("div",{className:"ui left action input search filter"+T,style:{borderTop:"1px solid #dedede",borderBottom:"1px solid #dedede",borderLeft:"1px solid #dedede",borderTopLeftRadius:"0.28571429rem",borderBottomLeftRadius:"0.28571429rem"}},ve.createElement("button",{className:"ui basic icon button",onMouseDown:function(){Tk=l},onClick:function(){Tk||m(!0)}},!b&&ve.createElement("i",{className:"filter icon",style:{color:j}}),b&&ve.createElement(cg,{cellType:Sk(b),size:"normal"}))),ve.createElement("input",{type:"text",placeholder:"Search...",onChange:function(e){c(e.target.value),I(e.target.value)},onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},className:"tree search",value:i,ref:s,onKeyDown:function(e){27===e.keyCode&&x()},style:{width:"80%"}}),!r.isFiltered()&&!b&&ve.createElement("i",{className:"search icon"}),(r.isFiltered()||b)&&ve.createElement("i",{className:"close link icon",style:{cursor:"pointer"},onClick:x})))}),wk=Object(Me.k)(function(e){return ve.createElement(Me.g,null,ve.createElement(Me.d,{exact:!0,path:yt,component:lk}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:Ck}))}),_k=n(498),Ak=function(e){var t=Object(ze.useDispatch)(),n=Object(ze.useSelector)(Zm()),r=Object(ze.useSelector)(Km(Ym(e.date),!1));return Object(ve.useEffect)(function(){window.setTimeout(function(){n&&!r&&t(Ht(Ym(e.date),!0))},5e3)},[r,n]),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Mi.a,null,ve.createElement(Eh.a,{className:"".concat(r?"black":"red"," top left attached")},"New Features released ",QO()(e.date).format("LL")),e.children)))},Bk=[{date:"2021-11-20",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"More Styling Options"),ve.createElement("p",null,"New styling options are available for advanced modelling and different workshop formats. The update includes:"),ve.createElement("p",null,ve.createElement("ul",null,ve.createElement("li",null,"Stickies",ve.createElement("ul",null,ve.createElement("li",null,"Change sticky type via context menu or shortcut (check context menu for available shortcuts)"),ve.createElement("li",null,"Align a group of stickies vertically and horizontally (context menu + shortcuts)"))),ve.createElement("li",null,"Contexts, Features, Textboxes",ve.createElement("ul",null,ve.createElement("li",null,"Change Style",ve.createElement("ul",null,ve.createElement("li",null,"Ellipse"),ve.createElement("li",null,"Triangle"),ve.createElement("li",null,"Rhombus"),ve.createElement("li",null,"Hexagon"))))),ve.createElement("li",null,"Arrows",ve.createElement("ul",null,ve.createElement("li",null,"Change Color"),ve.createElement("li",null,"Dotted Style"),ve.createElement("li",null,"Thickness"))),ve.createElement("li",null,"Comic Style",ve.createElement("ul",null,ve.createElement("li",null,'Select a group of elements and turn "Comic Style" on or off in the context menu'))),ve.createElement("li",null,"Keyboard Controls",ve.createElement("ul",null,ve.createElement("li",null,"Move selected element with arrow keys (keep key pressed for continued move + SHIFT key pressed for even faster move)"),ve.createElement("li",null,"Resize selected element with CTRL/CMD + arrow keys (CTRL/CMD+SHIFT for bigger resize steps)"),ve.createElement("li",null,"ALT+SHIFT + arrow keys: Copy selected element in direction of arrow key and connect it",ve.createElement("ul",null,ve.createElement("li",null,"You can model a complete flow via keyboard in combination with switch sticky type shortcuts"))),ve.createElement("li",null,"ENTER: Start text editing on selected sticky with"),ve.createElement("li",null,"ESC: Finish text editing"),ve.createElement("li",null,"CTRL/CMD+M: Start metadata editing"),ve.createElement("li",null,"ESC: pressed in metadata editor finishes editing and focuses cell on board again"))))))},{date:"2020-11-19",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Copy & Paste"),ve.createElement("p",null,"Copy & Pasting prooph board content is now possible across browsers. Next time you paste something, prooph board will ask you for access to your system's clipboard. If you grant access, the feature gets activated. Please note: this security check is built into modern browsers. By default, JavaScript is not allowed to access the system clipboard without explicit permission."))},{date:"2021-11-12",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Performance and Handling Updates"),ve.createElement("p",null,"We sat down last week to benchmark and improve performance on lager prooph boards. We disabled a couple of fade in/out animations in favor of performance and added a little physics effect when moving a board around. The latter gives a more natural feeling to compensate the deactivated fade effects. The Lite Mode still gives you best performance in case your system is under heavy load, but you should less likely have a need to activate it."))},{date:"2021-11-02",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Synchronized Timer"),ve.createElement("p",null,"You'll find a new timer feature in the board top menu (click on the hour glass icon). Setting a timer enables it for all users on the current board. Everybody will see the time ticking and a red blinking timer, when the set time is over. This is especially useful for time-boxed collaboration sessions. The person who sets the timer has control over it (pause, stop, reset)."))},{date:"2021-02-13",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Direct Import"),ve.createElement("p",null,"A new import functionality allows you to prepare a link that opens prooph board and imports a board fetched from an URL. This is especially useful for demo boards in combination with the new free version of prooph board. For example you could upload a board export on Github and prepare a link to Free Version like this: ",ve.createElement("a",{href:"https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml"},"https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml")))},{date:"2021-01-18",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Organization"),ve.createElement("p",null,"We've added a new administrative layer called \"Organization\" to make user and board management easier. With an organization you can share your board and user quota with colleagues. They don't need to worry about limitations, can easily create boards and share them with members. ",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Managing-an-Organization",target:"_blank"},"Learn about the details"),"."))},{date:"2020-12-07",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Lite Mode"),ve.createElement("p",null,"If you encounter performance problems on large boards or during video calls, you can turn on the Lite Mode. This will disable zoom effects like hiding elements or scaling the font size of Bounded Context and Feature frames. ",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Lite-Mode",target:"_blank"},"Learn more")),ve.createElement(_k.a,null,"Swim Lanes"),ve.createElement("p",null,'Bounded Context and Feature Frames hide their content when zooming out. If you want to use them as swim lanes, you might want to always see the content. Therefore we added the option to turn off zoom effect on a specific frame. Right click on a Bounded Context or Feature and check "Swim Lane" in the context menu.'))},{date:"2020-11-30",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Improved Elements Tree"),ve.createElement("p",null,"The Elements Tree in the workspace sidebar got a redesign and is now simpler to use. You can show/hide and (un)lock any element. ",ve.createElement("strong",null,"Be aware that changes are synced directly with your peers.")," The share button was too confusing for many users. Check out the details in the ",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Working-with-Layers",target:"_blank"},"wiki")),ve.createElement(_k.a,null,"Filter Elements"),ve.createElement("p",null,"You'll find a new filter icon next to the search input in the workspace sidebar. Select an element type and the elements tree will list all elements of that type. This can be combined with a search."),ve.createElement(_k.a,null,"Font Scaling"),ve.createElement("p",null,"When zooming out Features and Bounded Contexts hide their content and increase font size, so that the label is still readable. More zoom steps scale the font to a new maximum size of 300px. On existing boards this can lead to overlapping labels when Frames are too close together or are too small. It's not a big deal, but you might want to reorganise your boards to look nice again in the bird view."))},{date:"2020-11-16",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Two-Click Gesture"),ve.createElement("p",null,"We improved the behavior when clicking on an element in the board workspace sidebar. In the past, a click (instead of Drag & Drop) added the element on a random position on the board. That was a confusing behavior. If you click now, an insert mode is activated. The mouse cursor turns into the element you're going to insert. Choose the position on the board where you want to insert the element and click again to complete the insert action."),ve.createElement(_k.a,null,"Copy-on-click disabled"),ve.createElement("p",null,"To connect two elements on the board, you have to drag one of the arrows next to an element and drop the connection on another element. This works fine, but the arrows had a second functionality. If you did not start dragging but simply clicking on an arrow, the source element was copied. We disabled that functionality, because many users accidentally copy elements and are confused by the result."),ve.createElement(_k.a,null,"Improved Realtime Synchronisation"),ve.createElement("p",null,"If many users work together on a board realtime synchronisation ensures that all users see the same content on the board. As long as the network connection is stable this works fine, but unstable connections can lead to information loss. We added some advanced synchonisation strategies that can deal with temporally unavailable network connections. We will monitor the changes and improve them further if needed."))},{date:"2020-08-26",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Organize work on a board with layers"),ve.createElement("p",null,'A few weeks ago we activated a first version of a feature called "Layers". It was a bit hidden in the board top menu. We asked some teams to try out the feature and give us feedback if it is useful or too complicated. Turns out that layers are a very good addition to prooph board. They help you organize different activities on a team board. So we collected the feedback and integrated layers as a main functionality quickly accessible from the left sidebar on the board workspace and integrated in the context tree. You can find detailed information on the ',ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Working-with-Layers",target:"_blank"},"wiki page")))},{date:"2020-08-24",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Card Metadata"),ve.createElement("p",null,"prooph board aims to combine problem and solution space in one tool. You can start with High Level Event Storming and go all the way down to solution design \u2013 all supported by InspectIO. Card Metadata is supposed to help documenting technical details like message or data schema, API information, etc. Those details are placed in a new sidebar, accessible for everyone who is interested, but hidden from the main workspace. So non technical team members are not distracted by them. Check out the ",ve.createElement("a",{href:"https://github.com/event-engine/inspectio/wiki/Card-Metadata",target:"_blank"},"wiki page")," for more details."),ve.createElement(_k.a,null,"Resizable Sidebars"),ve.createElement("p",null,"The new metadata sidebar as well as the left sidebar on the workspace are now resizable, so you can organize your viewport according to available screen size and your personal preferences."))},{date:"2020-01-04",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Team Overview"),ve.createElement("p",null,'So far team management was only available from the sidebar. To give you full control over your teams, we\'ve added a team overview page. It can be accessed through the sidebar menu item "Teams". Besides your own teams, the overview shows which teams you have joined as a member. '))},{date:"2019-11-11",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Agile Development Workflow"),ve.createElement("p",null,'Software development is an iterative process. To better support continuous change, we\'ve added the possibility to mark Features and Bounded Contexts as "important", "planed", "ready" and "deployed". Right click on a Context or Feature, choose the tag you want to apply and the background color will change. The sidebar search supports tag filters as well. Try it by typing ',ve.createElement("strong",null,"tag:important"),' in the search bar. If you marked a Context or Feature as "important", it is included in the filtered tree.'))},{date:"2019-11-01",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"App Sidebar"),ve.createElement("p",null,"Enjoy quick access to important actions from our new sidebar. You can add new or import existing boards, share them with your teammates and search by board name. A visibility toggle (eye icon next to a board in the sidebar) hides a board in the overview."),ve.createElement(_k.a,null,"Workspace Sidebar"),ve.createElement("p",null,"The workspace sidebar has changed, too. You'll find a new elements tree below the sticky deck. Navigate through the board, search and filter the tree. Sticky notes are grouped by Bounded Context and Feature. Besides a sticky note text search, you can also use special filters. Try to look up all hot spots on your board by using the query: \"",ve.createElement("strong",null,"type:hotspot"),'" (A future release will add a more convenient way to apply special filters).'),ve.createElement(_k.a,null,"User Profile"),ve.createElement("p",null,"You can access and change your user profile now! This includes personal information, changing your password and uploading an avatar. Personalize your account so that colleagues and friends recognize you immediately when joining a board session."),ve.createElement(_k.a,null,"Teams"),ve.createElement("p",null,"Togther with the sidebar, you get access to our new team management. Invite others to join your team and connect it with a board to provide access for all at once. For now you can manage teams only from the sidebar. A details page will follow soon!"))},{date:"2019-09-08",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Improved Performance"),ve.createElement("p",null,"Non responsive zoom and scrolling gestures belong to the past. We switched the rendering engine to make use of native browser SVG transformations. This means, you can put much more stickies on the board, even without grouping them in Bounded Contexts and Features. The extra performance boost allowed us to increase the details zoom factor. When zooming out you'll longer see all details. In a future version it will also be possible to disable the fade out effect completely."),ve.createElement(_k.a,null,"Auto Scrolling"),ve.createElement("p",null,"When moving or connecting elements near the screen border, the board is automatically scrolled in the direction. Combined with the higher details zoom factor, it's now much easier to move elements to a position outside of the current view port."))},{date:"2019-07-29",content:ve.createElement(ve.Fragment,null,ve.createElement(_k.a,null,"Activity"),ve.createElement("p",null,"Starting from now, every change is logged and can be accessed from the ",ve.createElement("strong",null,"board menu")," in the top right corner of the workspace. Changes are grouped by time and give you detailed information about who changed what. A click takes you directly to the changed element as long as it is not removed. Longer names and texts are cut. You can view the full text by clicking on the three dots at the end of the text. Use the Activity log to see what your team has designed while you were off."),ve.createElement(_k.a,null,"Deep Linking"),ve.createElement("p",null,"We just added the possibility to deep link elements on a board. Right click on any element or even a selected group, choose ",ve.createElement("strong",null,"Copy Link")," from the context menu and share it with your team mates."))}],Nk=function(e){return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0,padded:!0},Bk.map(function(e,t){return ve.createElement(Ak,{key:t,date:e.date},e.content)})))},Rk=Object(Me.k)(function(e){var t=Object(ze.useSelector)(Jm()),n=Bk.map(function(e){return e.date}).filter(function(e){return!t["update_".concat(e,"_viewed")]}).length;return ve.createElement(Pe.NavLink,{className:"item",to:"/inspectio/updates"},ve.createElement("div",{className:"ui small label"+("/inspectio/updates"===e.location.pathname?" teal":n>0?" red":"")},n),"Updates")}),Lk=Object(De.b)()(function(e){return ve.createElement(ve.Fragment,null,ve.createElement("div",{className:"middle aligned item"},ve.createElement("div",{className:"ui big header"},"Free Version"),ve.createElement(Je.a,{className:"stackable two column"},ve.createElement(Je.a.Column,null,ve.createElement(Ri.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")),ve.createElement(Je.a.Column,null,ve.createElement("div",{className:"sub header"},"More Features, Organization & Teams, Realtime Collaboration")))))}),Uk=Object(De.b)()(function(e){return ve.createElement(ve.Fragment,null,ve.createElement(dk,{collapsed:!1}),ve.createElement(Lk,null),ve.createElement(wk,null),ve.createElement(uk,null),ve.createElement(WE,null),ve.createElement(ek,null),ve.createElement($E,null),ve.createElement(Rk,null),ve.createElement(ak,null))}),Dk=function(e){var t=!!e.open;switch(e.type){case gi.layer:var n=t?"folder open":"folder";return ve.createElement(xp.a,{name:n,style:{cursor:"pointer"},className:e.className,title:e.title});default:return ve.createElement(cg,{cellType:e.type,size:"normal",title:e.title,className:e.className})}},zk=null,Mk=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=kg(),d=Object(Qe.a)(u,1)[0],l=Object(ve.useState)(0),m=Object(Qe.a)(l,2),p=m[0],f=m[1],b=Object(ve.useState)(null),h=Object(Qe.a)(b,2),g=h[0],v=(h[1],Object(ve.useState)(!1)),y=Object(Qe.a)(v,2),O=y[0],E=y[1],k=Object(ve.useState)(!1),I=Object(Qe.a)(k,2),x=I[0],j=I[1],T=(Object(ze.useDispatch)(),d.isVisible(e.layer)),S=d.isLocked(e.layer);Object(ve.useEffect)(function(){a(e.expand)},[e.expand]);var C=T?"eye":"eye slash",w=S?"lock":"lock open",_=e.copyToLayerSuccess?e.copyToLayerSuccess:g;return ve.createElement(ve.Fragment,null,!O&&ve.createElement(og.a.Item,{style:{padding:"5px",background:"rgba(0,0,0,0.05)"},as:Pe.NavLink,to:"#",isActive:function(){return!1},onClick:function(t){!function(t,n){if(null!==zk)return window.clearTimeout(zk),zk=null,void(T&&(d.highlightLayer(e.layer),f(p+1)));zk=window.setTimeout(function(){t||d.isActiveLayer(e.layer)||(d.setAsActiveLayer(e.layer),e.onActiveLayerChanged&&e.onActiveLayerChanged()),t&&!e.layer.isDefaultLayer()&&(d.setDefaultLayerAsActive(),e.onActiveLayerChanged&&e.onActiveLayerChanged()),a(!t),c&&s(!1),zk=null},200),n.preventDefault()}(r,t)},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),s(!0)},className:T?"":"hidden"},ve.createElement(Dk,{type:gi.layer,open:r,title:e.t("insp.board.layers.folder_title"),className:(e.active?"active-layer":"layer")+(null!==_?_?" copy-success":" copy-failed":"")}),S&&ve.createElement(xp.a,{name:w,className:"corner left",size:"mini",fitted:!0}),!T&&ve.createElement(xp.a,{name:C,className:"corner right",size:"mini",fitted:!0}),ve.createElement(og.a.Content,null,ve.createElement(Sp.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:c,onClose:function(){return s(!1)},style:{padding:"0px"},trigger:ve.createElement("div",null,ve.createElement(XO,{label:e.name,maxLength:50})),content:ve.createElement(ve.Fragment,null,!x&&ve.createElement(cE.a,{secondary:!0,compact:!0},ve.createElement(jE.a,{title:e.t("insp.board.layers.edit_name"),onClick:function(e){e.stopPropagation(),E(!0)}},ve.createElement(xp.a,{name:"edit"})),ve.createElement(jE.a,{title:e.t("insp.board.layers.lock_layer"),onClick:function(t){t.stopPropagation(),d.setLocked(e.layer,!d.isLocked(e.layer)),f(p+1)}},ve.createElement(xp.a,{name:w})),ve.createElement(jE.a,{title:e.t("insp.board.layers.visibility"),onClick:function(t){t.stopPropagation(),function(){var t=!d.isVisible(e.layer);d.setUserVisible(e.layer,t),e.onLayerVisibilityChanged&&e.onLayerVisibilityChanged(t),f(p+1)}()}},ve.createElement(xp.a,{name:C})),ve.createElement(jE.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),j(!0)},title:e.t("insp.board.layers.delete_layer"),disabled:!e.deletable},ve.createElement(xp.a,{name:"trash"}))),x&&ve.createElement(cE.a,{secondary:!0,compact:!0},ve.createElement(jE.a,null,e.t("insp.board.layers.delete_confirmation")),ve.createElement(jE.a,{onClick:function(t){t.stopPropagation(),d.deleteLayer(e.layer),j(!1)}},e.t("app.form.yes")),ve.createElement(jE.a,{onClick:function(e){e.stopPropagation(),j(!1),s(!1)}},e.t("app.form.no"))))}),r&&e.children)),O&&ve.createElement(og.a.Item,{className:"add-layer"},ve.createElement(Ri.a,{icon:!0,basic:!0,size:"medium"},ve.createElement(xp.a,{name:"folder outline"})),ve.createElement(uE,{text:e.layer.getName(),charSize:Hk,widthUnit:Vk,padding:qk,minWidth:120,required:!0,onTextChanged:function(t){d.changeNodeName(e.layer,t),E(!1),s(!1)},focus:!0,onCancel:function(){E(!1),s(!1)},placeholder:"Board"})))}),Pk=null,Fk=Object(De.b)()(function(e){var t=Object(ve.useState)(1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=kg(),v=Object(Qe.a)(g,1)[0];Object(ve.useEffect)(function(){s(e.expand)},[e.expand]);var y=v.isLocked(e.element),O=v.isVisible(e.element),E=O?"eye":"eye slash",k=y?"lock":"lock open",I=e.element.getType()===gi.boundedContext||e.element.getType()===gi.feature,x=e.element.children().filter(Wk),j=O?"":" hidden";return ve.createElement(ve.Fragment,null,ve.createElement(og.a.Item,{as:Pe.NavLink,to:{pathname:Et(e.boardId),search:"?cells=".concat(e.element.getId(),"&clicks=").concat(r)},onClick:function(t){if(t.stopPropagation(),null!==Pk)return window.clearTimeout(Pk),Pk=null,void a(r+1);Pk=window.setTimeout(function(){s(!c),l&&m(!1),Pk=null},200),O&&e.element.getType()!==gi.boundedContext&&e.element.getType()!==gi.feature?a(r+1):t.preventDefault()},onContextMenu:function(e){e.stopPropagation(),e.preventDefault(),m(!0)},isActive:function(){return!1},style:{padding:"5px"},className:l?"edit"+j:j},ve.createElement(Dk,{type:e.element.getType(),open:c}),y&&ve.createElement(xp.a,{name:k,className:"corner left",size:"mini",fitted:!0}),!O&&ve.createElement(xp.a,{name:E,className:"corner right",size:"mini",fitted:!0}),ve.createElement(og.a.Content,null,ve.createElement(Sp.a,{position:"bottom center",closeOnTriggerBlur:!1,closeOnTriggerMouseLeave:!1,hideOnScroll:!0,open:l,onClose:function(){return m(!1)},trigger:ve.createElement("div",null,ve.createElement(XO,{label:e.element.getName(),maxLength:30})),style:{padding:"0px"},content:ve.createElement(ve.Fragment,null,!b&&ve.createElement(cE.a,{secondary:!0,compact:!0},ve.createElement(jE.a,{onClick:function(t){t.stopPropagation(),v.setLocked(e.element,!y),a(r+1)}},ve.createElement(xp.a,{name:k})),ve.createElement(jE.a,{onClick:function(t){t.stopPropagation(),v.setUserVisible(e.element,!O),a(r+1)}},ve.createElement(xp.a,{name:E})),ve.createElement(jE.a,{className:"delete-ele",onClick:function(e){e.stopPropagation(),h(!0)}},ve.createElement(xp.a,{name:"trash"}))),b&&ve.createElement(cE.a,{secondary:!0,compact:!0},ve.createElement(jE.a,null,e.t("insp.board.layers.delete_confirmation")),ve.createElement(jE.a,{onClick:function(t){t.stopPropagation(),v.deleteElement(e.element),h(!1)}},e.t("app.form.yes")),ve.createElement(jE.a,{onClick:function(e){e.stopPropagation(),h(!1),m(!1)}},e.t("app.form.no"))))}),x.count()>0&&c&&ve.createElement(Gk,{leafs:x,boardId:e.boardId,expandLeafs:e.expand}),0===x.count()&&I&&c&&ve.createElement(og.a,null,ve.createElement(og.a.Item,null,ve.createElement("span",{style:{color:"#747474"}},"(empty)"))))))}),Gk=function(e){var t=e.leafs.filter(Wk).sort(Kd).map(function(t){return ve.createElement(Fk,{expand:e.expandLeafs,element:t,key:t.getId(),boardId:e.boardId})});return ve.createElement(og.a,{className:"elements tree"},t)},Hk=9,Vk="px",qk=0,Wk=function(e){switch(e.getType()){case gi.misc:case gi.edge:case gi.textCard:return!1;default:return""!==e.getName()}},Yk=function(){function e(t,n){Object(Be.a)(this,e),this.childrenList=void 0,this.boardName=void 0,this.childrenList=t,this.boardName=n}return Object(Ne.a)(e,[{key:"getId",value:function(){return"__NO_CONTEXT__"}},{key:"getName",value:function(){return this.boardName}},{key:"getType",value:function(){return gi.boundedContext}},{key:"getLink",value:function(){return null}},{key:"getTags",value:function(){return Object(be.List)()}},{key:"isLayer",value:function(){return!1}},{key:"isDefaultLayer",value:function(){return!1}},{key:"getParent",value:function(){return null}},{key:"children",value:function(){return this.childrenList}},{key:"setChildren",value:function(e){return this.childrenList=e,this}},{key:"getSources",value:function(){return Object(be.List)()}},{key:"getTargets",value:function(){return Object(be.List)()}},{key:"getGeometry",value:function(){return{x:0,y:0}}},{key:"getMetadata",value:function(){return null}}]),e}(),Qk=Object(De.b)()(Object(Me.k)(function(e){var t=e.match.params.uid,n=Object(ve.useMemo)(function(){return Ek(t)},[]),r=Object(ze.useSelector)(n),a=(Object(ze.useDispatch)(),Object(ve.useState)(!0)),o=Object(Qe.a)(a,2),i=(o[0],o[1],Object(ze.useSelector)(tp(t))),c=kg(),s=Object(Qe.a)(c,1)[0],u=Object(ve.useState)(0),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(0),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ve.useState)(!1),v=Object(Qe.a)(g,2),y=v[0],O=v[1],E=Object(ve.useState)(!1),k=Object(Qe.a)(E,2),I=k[0],x=k[1],j=Object(ve.useState)(void 0),T=Object(Qe.a)(j,2),S=T[0],C=T[1];Object(ve.useEffect)(function(){s.onSelectionChanged(function(e){return x(e)})},[]);var w=r.getFilteredElementsAsTree().sortBy(function(e){return e.getName()}),_=[],A=r.getFilteredElementsAsTree().filter(function(e){return e.getType()===gi.boundedContext||(Wk(e)&&_.push(e),!1)});if(_.length>0){var B=Object(be.List)(_),N=new Yk(B,i.name);A=A.push(N)}return ve.createElement(ve.Fragment,null,ve.createElement("div",{className:"item"},ve.createElement(og.a,{className:"elements tree"},ve.createElement(og.a.Item,{style:{paddingBottom:"0px"}},ve.createElement("div",{className:"context-menu"},ve.createElement(Ri.a,{icon:!0,basic:!0,size:"medium",onClick:function(){O(!0)},disabled:y,title:e.t("insp.board.layers.add_layer")},ve.createElement(xp.a,{name:"plus"})),ve.createElement(Ri.a,{icon:!0,basic:!0,size:"medium",disabled:!I,onClick:function(){s.copySelectionToActiveLayer(),C(!0),window.setTimeout(function(){C(void 0)},2e3)},title:e.t("insp.board.layers.insert_selection")},ve.createElement(xp.a,{name:"window restore outline"})))),y&&ve.createElement(og.a.Item,{className:"add-layer"},ve.createElement(Ri.a,{icon:!0,basic:!0,size:"medium"},ve.createElement(xp.a,{name:"folder outline"})),ve.createElement(uE,{text:"",charSize:Hk,widthUnit:Vk,padding:qk,minWidth:120,required:!0,onTextChanged:function(e){s.addLayer(e),O(!1)},focus:!0,onCancel:function(){O(!1)},placeholder:"Layer name"})),w.map(function(e){return ve.createElement(Mk,{key:e.getId(),name:""===e.getName()?"Board":e.getName(),boardId:t,layer:e,deletable:!e.isDefaultLayer(),active:s.isActiveLayer(e),onLayerVisibilityChanged:function(t){return function(e,t){if(!t&&s.isActiveLayer(e)){var n=!1;if(w.forEach(function(e){e.isDefaultLayer()&&s.isVisible(e)&&(n=!0,s.setAsActiveLayer(e))}),!n){var r=!0,a=!1,o=void 0;try{for(var i,c=w.toArray()[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var u=i.value;s.isVisible(u)&&s.setAsActiveLayer(u)}}catch(d){a=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}}m(l+1)}(e,t)},onActiveLayerChanged:function(){return h(b+1)},copyToLayerSuccess:S,expand:r.isFiltered()&&e.children().count()>0||e.isDefaultLayer()},e.children().count()>0?ve.createElement(Gk,{leafs:e.children(),boardId:t,expandLeafs:r.isFiltered()}):ve.createElement(og.a,null,ve.createElement(og.a.Item,null,ve.createElement("span",{style:{color:"#747474"}},"(empty)"))))}))))})),Kk=Object(De.b)()(function(e){return ve.createElement(ve.Fragment,null,!e.collapsed&&ve.createElement(dk,{collapsed:e.collapsed}),!e.collapsed&&ve.createElement(Lk,null),ve.createElement("div",{className:"item"},ve.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&ve.createElement(ve.Fragment,null,ve.createElement(wk,null),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:Qk}),ve.createElement(ak,null)))}),Jk=function(e){var t=Object(ze.useDispatch)(),n=e.collapsed?"angle double right icon":"angle double left icon";return ve.createElement("span",{className:"collaps-handle",onClick:function(){var n=!e.collapsed;t(xO(n)),t(jO(n?85:250))},style:{}},ve.createElement("i",{className:n}))},Zk=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(""),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useSelector)(Rl()),f=Object(ve.useRef)(null),b=Object(ze.useDispatch)();return ve.createElement("div",{className:"item"},ve.createElement(Ri.a,{className:"large basic",onClick:function(){a(!r),r||window.setTimeout(function(){f.current.focus()},200)}},ve.createElement("i",{className:"plus icon"})," Add\xa0Team"),ve.createElement(JO.a,{animation:"fade down",visible:r,duration:200},ve.createElement("div",{className:"ui icon input"},ve.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==c?(b(ce.addTeam(tt.v4(),c,p?p.uid:null)),s("")):m(!0)}},ve.createElement(tv.a,{placeholder:e.t("insp.team.team_name")+" ...",fluid:!0,ref:f,error:l,value:c,onChange:function(e){s(e.target.value),m(""===e.target.value)}})))))})),Xk=n(562),$k=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ve.useState)(void 0),v=Object(Qe.a)(g,2),y=v[0],O=v[1],E=Object(ze.useSelector)(ei(e.team.members)),k=Object(ze.useDispatch)(),I=c?"angle up icon":"angle down icon",x="ui labels "+(r?"slidedown":"slideup"),j=function(e){var t=E.find(function(t){return t.userId===e});return t?t.username:""},T=function(e){e.stopPropagation()};return ve.createElement("div",{className:"ui item",style:{cursor:"pointer"}},ve.createElement(xp.a,{className:I,onClick:function(){a(!r),c?window.setTimeout(function(){s(!1)},150):s(!0)}}),ve.createElement(Xk.NavHashLink,{scroll:function(e){var t=document.body.getBoundingClientRect().top,n=e.getBoundingClientRect().top-t-60;window.scrollTo({behavior:"smooth",top:n})},to:"/inspectio/teams#"+e.team.uid,className:"team-list team"},e.team.name),ve.createElement(xp.a,{className:"eye icon",style:{visibility:"hidden"}}),ve.createElement("div",{className:x},ve.createElement("a",{className:"ui blue basic label",onClick:function(e){T(e),m(!0)}},ve.createElement("i",{className:"white plus icon"}),e.t("insp.team.add_user")),e.team.members.filter(function(t){return t!==e.team.ownerId}).map(function(e){return ve.createElement("div",{key:e,className:"ui basic label"},j(e),ve.createElement("i",{className:"red delete icon",onClick:function(t){T(t),O(e),h(!0)}}))})),ve.createElement("div",{onClick:T},ve.createElement(bE,{team:e.team,open:l,onClose:function(){m(!1)}}),ve.createElement(Vp.a,{open:b,header:e.t("insp.team.remove_user_confirm_title"),content:e.t("insp.team.remove_user_confirm_text",{user_name:y?j(y):""}),confirmButton:e.t("insp.team.remove_user_confirm_button"),onCancel:function(){return h(!1)},onConfirm:function(){y&&(k(ce.removeMemberFromTeam(e.team.uid,y)),h(!1))}})))})),eI=function(e){var t=Object(ze.useSelector)(Bb(!0));return ve.createElement(ve.Fragment,null,t.sortBy(function(e){return e.name}).sortBy(function(e){return!e.isNew}).map(function(e){return ve.createElement($k,{key:e.uid,team:e})}))},tI=Object(Me.k)(function(e){var t=Object(ze.useSelector)(Bb(!1)),n="ui small label";return"/inspectio/teams"===e.location.pathname&&(n+=" teal"),ve.createElement(Pe.NavLink,{exact:!0,className:"item",activeClassName:"active",to:"/inspectio/teams"},ve.createElement(xp.a,{className:"ui group icon"}),ve.createElement("div",{className:n},t.count()),"Teams")}),nI=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Ci()),n=Object(ze.useSelector)(Nl(t.uid)),r=Object(ve.useState)(!1),a=Object(Qe.a)(r,2),o=a[0],i=a[1],c=Object(ve.useState)(!1),u=Object(Qe.a)(c,2),d=u[0],l=u[1],m=Object(ve.useState)(!1),p=Object(Qe.a)(m,2),f=p[0],b=p[1],h=Object(ze.useSelector)(Zm()),g=Object(ze.useSelector)(Km("show_orga_hint",!1));$e(function(){l(!1)}),Object(ve.useEffect)(function(){g&&b(!0)},[g,h]);var v=Object(ze.useDispatch)(),y=function(e){v(s.switchActiveOrganization(e)),i(!1)},O="My Workspace",E=!1,k=n.map(function(e){e.ownOrganization&&!e.explicitOrganization&&(E=!0);var n=e.explicitOrganization?e.organizationName:e.ownOrganization?"My Workspace":e.organizationName,r=t.activeOrganization===e.organizationId;return r&&(O=n),ve.createElement(pk.a,{active:r,onClick:function(){return!r&&y(e.organizationId)},key:e.organizationId},n)});E||(k=k.push(ve.createElement(pk.a,{active:null===t.activeOrganization,onClick:function(){return null!==t.activeOrganization&&y(null)},key:"__implicit__own_orga__"},"My Workspace")));var I=o?"angle up":"angle down";return ve.createElement(Sp.a,{open:f,content:ve.createElement(ve.Fragment,null,ve.createElement("p",null,ve.createElement("strong",null,e.t("insp.organisation.switch_hint_header"))),ve.createElement("p",null,e.t("insp.organisation.switch_hint")),ve.createElement("p",null,ve.createElement("span",{style:{color:"#32c0e7",cursor:"pointer",float:"right"},onClick:function(){b(!1),v(Ht("show_orga_hint",!1))}},e.t("insp.organisation.switch_hint_ok")))),position:"right center",trigger:ve.createElement("div",{className:"organization switch"},ve.createElement(xp.a,{name:I,style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),i(!o),l(!0)}}),ve.createElement(Xe.a,{icon:!1,open:o,onOpen:function(){return i(!0)},onClose:function(){d||i(!1)},text:O},ve.createElement(mk.a,null,k)))})}),rI=Object(Me.k)(function(e){Object(ze.useSelector)(Ci());var t=Object(ze.useSelector)(Rl());return ve.createElement("div",{className:"item"},t&&t.userIsAdmin&&ve.createElement(Pe.NavLink,{to:"/inspectio/organization"},ve.createElement(Ri.a,{className:"large basic"},ve.createElement("i",{className:"building icon"})," Organization")),(!t||!t.userIsAdmin)&&ve.createElement(Ri.a,{className:"large basic organization",disabled:!0},ve.createElement("i",{className:"building icon"})," Organization"),ve.createElement(nI,null))}),aI=(Object(De.b)()(function(e){var t=Object(ze.useSelector)(wi()),n=Object(ze.useSelector)(Rl());return ve.createElement(ve.Fragment,null,ve.createElement(dk,{collapsed:!1}),ve.createElement(rI,null),ve.createElement(wk,null),ve.createElement(uk,null),ve.createElement(WE,null),ve.createElement(ek,null),ve.createElement($E,null),t<2&&n&&n.explicitOrganization&&!n.userIsGuest&&ve.createElement("div",{className:"item"},ve.createElement("div",{className:"ui icon negative message"},ve.createElement("i",{className:"warning icon"}),ve.createElement("div",{className:"content"},ve.createElement("div",{className:"header"},0===t?e.t("insp.sidebar.no_boards_left_warning"):e.t("insp.sidebar.boards_left_warning",{board_count:t})),ve.createElement("p",null,e.t("insp.sidebar.boards_left_warning_upgrade"))))),ve.createElement(Zk,null),ve.createElement(tI,null),ve.createElement(eI,null),ve.createElement(Rk,null),ve.createElement(ak,null))}),Object(De.b)()(function(e){return ve.createElement(ve.Fragment,null,!e.collapsed&&ve.createElement(dk,{collapsed:e.collapsed}),!e.collapsed&&ve.createElement(rI,null),ve.createElement("div",{className:"item"},ve.createElement("div",{id:"boardSidebarContainer"})),!e.collapsed&&ve.createElement(ve.Fragment,null,ve.createElement(wk,null),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:Qk}),ve.createElement(ak,null)))}),function(e){return ve.createElement("div",{className:"bottom aligned item"},ve.createElement("p",{className:"copyright"},"\xa9 2021 ",ve.createElement("a",{href:"http://prooph-software.de"},"prooph software GmbH")))}),oI=Object(De.b)()(Object(Me.k)(function(e){var t=kt(e.location.pathname),n=Object(ze.useSelector)(vv()),r=Object(ze.useDispatch)(),a=Object(ve.useState)(n.width),o=Object(Qe.a)(a,2),i=o[0],c=o[1],s=Object(ve.useState)(!1),u=Object(Qe.a)(s,2),d=u[0],l=u[1];Object(ve.useEffect)(function(){d||c(n.width)},[n.width]);var m=t?" collapsible":"",p=t&&n.collapsed?" collapsed":"";return ve.createElement(ve.Fragment,null,ve.createElement("div",{className:"ui left fixed large vertical menu leftbar"+p,style:{overflowY:"scroll",width:(t?n.width:250)+"px"}},!t&&!1,!t&&ve.createElement(Uk,null),t&&!1,t&&ve.createElement(Kk,{collapsed:n.collapsed}),ve.createElement(aI,null)),ve.createElement(VE.a,{axis:t?"x":"none",onDrag:function(e,t){d||l(!0);var a=n.width+t.deltaX;r(jO(a)),n.width<=230&&!n.collapsed&&r(xO(!0)),n.width>230&&n.collapsed&&r(xO(!1))},onStop:function(e,t){l(!1),c(n.width)},position:{x:0,y:0}},ve.createElement("div",{className:"collapsebar"+m+p,style:{left:(t?i:250)+"px",cursor:t?"grabbing":"inherit"}},t&&ve.createElement(Jk,{collapsed:n.collapsed}))))})),iI=function(e,t){return e.getIn([WO,"activeGraphElements"])},cI=Object(De.b)()(function(e){var t=Object(ve.useState)(5e3),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=e.sources.map(function(t){return ve.createElement(og.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Source",as:Pe.Link,to:{pathname:Et(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(r)},onClick:function(){return a(r+1)}},ve.createElement(og.a.Icon,{name:"arrow left"}),ve.createElement(og.a.Content,null,ve.createElement(cg,{cellType:t.getType()}),ve.createElement(XO,{label:t.getName(),maxLength:30})))}).toArray();return e.targets.forEach(function(t){o.push(ve.createElement(og.a.Item,{key:t.getId(),style:{borderRadius:"0",color:"#424242"},title:"Target",as:Pe.Link,to:{pathname:Et(e.boardId),search:"?cells=".concat(t.getId(),"&select=1&clicks=").concat(r)},onClick:function(){return a(r+1)}},ve.createElement(og.a.Icon,{name:"arrow right"}),ve.createElement(og.a.Content,null,ve.createElement(cg,{cellType:t.getType()}),ve.createElement(XO,{label:t.getName(),maxLength:30}))))}),ve.createElement(ve.Fragment,null,ve.createElement(Ip.a,{horizontal:!0,content:"Connections"}),ve.createElement(og.a,null,o))}),sI=ye.a.forwardRef(function(e,t){var n=Object(ve.useState)(6e3),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useRef)(null),c=e.activeGraphElement.type!==gi.textCard&&e.activeGraphElement.type!==gi.edge;return Object(ve.useImperativeHandle)(t,function(){return{retrievePayload:function(){return i.current.retrievePayload()}}}),Object(ve.useEffect)(function(){i.current&&i.current.addKeyDownHandler(function(t){!t.ctrlKey||"KeyS"!==t.code&&"KeyG"!==t.code||(t.preventDefault(),e.onTriggerCody()),"Escape"===t.code&&e.onClose&&(e.onUpdateMetadata(i.current.retrievePayload()),t.preventDefault(),t.stopPropagation(),e.onClose())})},[]),Object(ve.useEffect)(function(){c&&i.current&&(i.current.initializeModel({fileId:"graph_element_".concat(e.activeGraphElement.id,".json"),language:e.boardStickyTemplate.templateType,value:e.activeGraphElement.metadata||e.boardStickyTemplate.template||"{\n  \n}\n",schema:e.boardStickyTemplate.templateSchema||void 0,onChange:function(t){i.current&&e.onUpdateMetadata(i.current.retrievePayload())}}),i.current.focus())},[e.activeGraphElement]),ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(Pe.Link,{style:{borderRadius:"0",color:"#424242"},onClick:function(){return o(a+1)},to:{pathname:Et(e.boardId),search:"?cells=".concat(e.activeGraphElement.id,"&clicks=").concat(a)}},ye.a.createElement(cg,{cellType:e.activeGraphElement.type})," ",ye.a.createElement("strong",null,e.t("app.stickyTypes."+e.activeGraphElement.type))),(e.activeNodeSources.size>0||e.activeNodeTargets.size>0)&&ye.a.createElement(cI,{boardId:e.boardId,sources:e.activeNodeSources,targets:e.activeNodeTargets}),c&&ye.a.createElement(ye.a.Fragment,null,ye.a.createElement(Ip.a,{horizontal:!0,content:"Metadata"}),ye.a.createElement(tg,{ref:i,options:{fontSize:12,folding:!1,glyphMargin:!1,lineNumbers:"off",lineDecorationsWidth:3,minimap:{enabled:!1},formatOnPaste:!0,scrollBeyondLastLine:!1,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1}},style:{height:"500px"}})))}),uI=Object(De.b)()(Object(Me.k)(function(e){var t,n=Object(ze.useDispatch)(),r=Object(ze.useSelector)(vv()),a=Object(ve.useState)(!1),o=Object(Qe.a)(a,2),i=o[0],c=o[1],s=Object(ve.useMemo)(function(){return tp(e.match.params.uid)},[]),u=Object(ze.useSelector)(s),d=Object(ze.useSelector)((t=e.match.params.uid,Object(pt.a)([iI],function(e){return e.has(t)?e.get(t):null}))),l=u&&u.shouldShowElementDetails||!1,m=Object(ze.useSelector)(Kh(e.match.params.uid)),p=Object(ze.useSelector)(Ek(e.match.params.uid)),f=Object(ve.useState)(!1),b=Object(Qe.a)(f,2),h=b[0],g=b[1],v=Object(ve.useState)(r.rightSidebarWidth),y=Object(Qe.a)(v,2),O=y[0],E=y[1],k=kg(),I=Object(Qe.a)(k,1)[0],x=Object(ve.useRef)(null);Object(ve.useEffect)(function(){h||E(r.rightSidebarWidth)},[r.rightSidebarWidth]),Object(ve.useEffect)(function(){n(L.fetchBoardStickyTemplates(e.match.params.uid))},[e.match.params.uid]);var j=Object(be.List)(),T=Object(be.List)(),S=Object(be.List)();if(d&&d.type!==gi.edge){j=p.getFilteredElementsByTypeAndLabel(d.type,d.label).filter(function(e){return e.getId()!==d.id}).map(function(e){return e.getId()});var C=p.getElement(d.id);C&&(T=C.getSources(),S=C.getTargets())}if(d&&d.type===gi.edge&&d.edgeData){var w=p.getElement(d.edgeData.source),_=p.getElement(d.edgeData.target);w&&(T=Object(be.List)([w])),_&&(S=Object(be.List)([_]))}var A=function(){n(gd(e.match.params.uid,d||void 0)),n(fu(e.match.params.uid,!1)),c(!1),I.focus()};return ve.createElement(ve.Fragment,null,l&&ve.createElement("div",{style:{position:"absolute",paddingTop:"50px",top:"0px",right:"0px",height:"100%",overflow:"hidden",borderLeft:"5px solid #eee"}},ve.createElement(kp.a,{style:{height:"100%",borderRadius:"0",width:r.rightSidebarWidth+"px"}},ve.createElement(kp.a.Content,null,ve.createElement(kp.a.Header,null,ve.createElement(xp.a,{name:"close",className:"right floated",onClick:A,style:{cursor:"pointer"}}),d&&ve.createElement(ve.Fragment,null,d.label),!d&&ve.createElement(ve.Fragment,null,"Metadata"))),ve.createElement(kp.a.Content,{style:{position:"relative",height:"100%",overflowY:"auto"}},!d&&ve.createElement(Mi.a,{info:!0},e.t("insp.sidebar.element_details.no_element_selected")),d&&ve.createElement(sI,{boardId:e.match.params.uid,activeNodeSources:T,activeNodeTargets:S,activeGraphElement:d,boardStickyTemplate:m.get(d.type),onTriggerCody:function(){return I.triggerCody()},onUpdateMetadata:function(e){d.metadata=e,d.updateMetadata(e),c(!0)},onClose:A,t:e.t,ref:x})),i&&j.size>0&&ve.createElement(kp.a.Content,null,ve.createElement(Mi.a,{compact:!0,warning:!0,size:"small"},e.t("insp.sidebar.element_details.update_similar_elements_text",{number:j.size}),"\xa0",ve.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),d&&x&&x.current&&d.updateSimilarElements(j.toArray(),x.current.retrievePayload()),c(!1)}},e.t("insp.sidebar.element_details.update_similar_elements_link"))))),ve.createElement(VE.a,{axis:"x",onDrag:function(e,t){h||g(!0);var a,o=r.rightSidebarWidth-t.deltaX;n((a=o,Object(et.action)(pv,{width:a})))},onStop:function(e,t){g(!1),E(r.rightSidebarWidth)},position:{x:0,y:0}},ve.createElement("div",{className:"thin collapsebar collapsible",style:{right:O+"px",cursor:"grabbing"}}))))})),dI=Object(De.b)()(function(e){var t=e.match.params.organization,n=e.match.params.invitation,r=Ci(),a=Object(ze.useSelector)(r),o=Object(ze.useSelector)(Rl()),c=Object(ve.useState)(!1),s=Object(Qe.a)(c,2),u=s[0],d=s[1],l=Object(ze.useDispatch)();return Object(ve.useEffect)(function(){if(a.signedIn&&o){var r=0;Or(t,n).then(function a(o){if(o.error)return r<2?(r++,void window.setTimeout(function(){Or(t,n).then(a)},100)):(l(i.Command.error("Command failed","Failed to process organization invitation")),void d(!0));br(t).then(function(n){var r=n.response;if(n.error)return l(i.Command.info(e.t("insp.organisation.joined.title"),"")),void d(!0);if(r){var a=Ln(r.data,Nn(function(e){return Ba(e)}));Sn(a)&&(console.error("Invalid organization response: ",a.value),l(i.Command.error("Request Error","Could not load organization"))),Cn(a)&&(l(j.Query.fetchUserOrganizations()),l(f.Command.switchActiveOrganization(t)),l(i.Command.info(e.t("insp.organisation.joined.title"),e.t("insp.organisation.joined.details",{name:a.value.name})))),d(!0)}})})}},[a.signedIn,o]),u?ve.createElement(Me.c,{to:yt}):ve.createElement(Lp.a,{active:!0,className:"page"},ve.createElement(Up.a,{size:"large"},"Processing Organization Invitation"))}),lI=n(563),mI=n(1207),pI=function(e){var t=e.width||30;return ve.createElement("object",{className:"console-avatar",data:mI,type:"image/svg+xml",style:{width:t+"px"}})},fI=function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o="#414141",i="#414141",c="normal",s="normal",u="white";e.codyResponse.type===Tg.Error&&(o="#f31c30",i="#f31c30",c="bold",s="bold",u="#f1bec5"),e.codyResponse.type!==Tg.Warning&&e.codyResponse.type!==Tg.Question&&e.codyResponse.type!==Tg.SyncRequired||(o="#653a12",i="#653a12",c="bold",u="#fdd299"),e.codyResponse.type&&e.codyResponse.type!==Tg.Info||(o="#32c0e7",c="bold");var d,l=Array.isArray(e.codyResponse.cody)?e.codyResponse.cody:[e.codyResponse.cody];e.codyResponse.details&&(d=e.codyResponse.details,Array.isArray(d)||(d=[d]));var m={color:o,fontWeight:c},p={color:i,fontWeight:s},f=r?ve.createElement(xp.a,{name:"caret down",size:"large"}):ve.createElement(xp.a,{name:"caret right",size:"large"});return ve.createElement(ve.Fragment,null,ve.createElement("div",{className:"console-message",style:{backgroundColor:u}},ve.createElement(pI,null),ve.createElement("div",{className:"console-text"},bI(l,m,e.codyName),d&&ve.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),a(!r)}},f))),d&&r&&ve.createElement("div",{className:"console-message",style:{backgroundColor:u}},ve.createElement(pI,null),ve.createElement("div",{className:"console-text"},bI(d,p))))},bI=function(e,t,n){var r=e[0]||"";if("string"!==typeof r){if("function"!==typeof(r=r).toString)return[];r=r.toString()}var a=r.split("%c"),o=e.slice(1),i=[],c=t,s=!0;for(var u in a)if("undefined"!==typeof a[u]){var d=a[u],l=!1,m=!1,p=d.length;p>0&&(" "===d.charAt(p-1)&&(m=!0,d=d.slice(0,p-1))," "===d.charAt(0)&&(l=!0,d=d.slice(1))),p>0&&(s&&n&&(d="[".concat(n,"]: ")+d,s=!1),i.push(ve.createElement("span",{key:i.length+1,style:c},l&&ve.createElement(ve.Fragment,null,"\xa0"),ve.createElement(ve.Fragment,null,d),m&&ve.createElement(ve.Fragment,null,"\xa0")))),c=o[u]?hI(o[u]):t}return i},hI=function(e){var t={},n=e.split(";"),r=!0,a=!1,o=void 0;try{for(var i,c=n[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var s=i.value.split(":"),u=Object(Qe.a)(s,2),d=u[0],l=u[1];"string"===typeof d&&"string"===typeof l&&(t[Object(lI.camelize)(d.trim())]=l)}}catch(m){a=!0,o=m}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t},gI=n(1208),vI=function(e){var t="#414141",n="normal",r="white";return"error"===e.type&&(t="#f31c30",n="bold",r="#f1bec5"),"warning"===e.type&&(t="#f99f4b",n="bold"),ve.createElement("div",{className:"console-message",style:{backgroundColor:r}},ve.createElement(Eh.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(gI,")"),backgroundSize:"cover",marginLeft:"3px"}}),ve.createElement("div",{className:"console-text"},ve.createElement("span",{style:{color:t,fontWeight:n}},e.message)))},yI=function(){var e=localStorage.getItem("@@Inspectio/CodyConsole");if(null===e)return[];try{return JSON.parse(e)}catch(t){return[]}}(),OI=function(e){var t=Object(ze.useSelector)(Ci()),n=Object(ve.useRef)(null),r=kg(),a=Object(Qe.a)(r,1)[0],o=Object(ze.useDispatch)();Object(ve.useEffect)(function(){window.setTimeout(function(){n.current&&(e.lastCodyMsg&&e.lastCodyMsg.type===Tg.Question||e.showConnectDefault)&&n.current.focus()},100)},[e.messageCount,e.lastCodyMsg,e.visible,e.showConnectDefault]),Object(ve.useEffect)(function(){return function(){var e;e=yI.slice(0,10),localStorage.setItem("@@Inspectio/CodyConsole",JSON.stringify(e))}});var i=e.showConnectDefault?"/connect http://localhost:3311":"";return ve.createElement("div",{className:"console-message"},ve.createElement(Eh.a,{circular:!0,className:"user",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),ve.createElement("span",{style:{marginLeft:"3px"}},"\xa0\xa0"),ve.createElement("input",{type:"text",defaultValue:i,ref:n,onKeyDown:function(t){if("Enter"===t.key)e.onEnter(n.current.value||""),""!==n.current.value&&(void 0!==ik&&-1!==ik&&yI[ik]===n.current.value&&yI.splice(ik,1),yI.length&&yI[0]===n.current.value||yI.unshift(n.current.value)),n.current.value="",ik=void 0;else if("Escape"===t.key)e.onEscape();else if(t.ctrlKey&&"q"===t.key)e.onClose();else if("ArrowUp"===t.key)void 0===ik?ik=0:ik++,ik+1>yI.length&&(ik=yI.length-1),-1!==ik&&(n.current.value=yI[ik]),t.preventDefault();else if("ArrowDown"===t.key){if(void 0===ik)return;--ik>-1&&(n.current.value=yI[ik],n.current.focus()),-1===ik&&(yI.length&&yI[0]===n.current.value&&(n.current.value="",n.current.focus()),ik=void 0),t.preventDefault()}else t.ctrlKey&&"g"===t.key?(a.triggerCody(),t.preventDefault()):t.ctrlKey&&"m"===t.key?(o(fu(e.boardId,!0)),t.preventDefault()):ik=void 0}}))},EI=function(e){var t=Object(ze.useSelector)(Ci());return ve.createElement("div",{className:"console-message"},ve.createElement(Eh.a,{circular:!0,className:"user console-avatar",style:{backgroundImage:"url(".concat(t.avatarUrl,")"),backgroundSize:"cover",marginLeft:"1px"}}),ve.createElement("div",{className:"console-text"},""===e.msg&&ve.createElement("span",null,"\xa0"),ve.createElement("span",null,e.msg)))},kI=["connect","disconnect","cockpit","help","talk"],II=Object(Me.k)(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useState)(Object(be.List)([])),r=Object(Qe.a)(n,2),a=r[0],o=r[1],i=Object(ve.useState)(),c=Object(Qe.a)(i,2),s=c[0],u=c[1],d=Object(ze.useSelector)(vv()),l=Object(ve.useMemo)(function(){return tp(e.match.params.uid)},[]),m=Object(ze.useSelector)(l),p=m&&m.shouldShowCodyConsole,f=Object(ve.useState)(!1),b=Object(Qe.a)(f,2),h=b[0],g=b[1],v=Object(ve.useState)(d.codyConsoleHeight),y=Object(Qe.a)(v,2),O=y[0],E=y[1],k=Object(ze.useSelector)(Ci()),I=Object(ve.useRef)(null),x=kg(),j=Object(Qe.a)(x,1)[0],T=d.width+10,S=T+(m&&m.shouldShowElementDetails?d.rightSidebarWidth+5:0),C=function(e){o(a.push(e)),window.setTimeout(function(){I.current&&I.current.scrollBy({top:200,behavior:"smooth"})},10)};Ug.setCodyResponsePrinter(function(e,t){u(e),C(ve.createElement(fI,{key:a.count()+1,codyResponse:e,codyName:t}))}),Ug.setErrorPrinter(function(e){0===a.count()&&e===Sg||C(ve.createElement(vI,{key:a.count()+1,message:e,type:"error"}))}),Ug.setWarningPrinter(function(e){C(ve.createElement(vI,{key:a.count()+1,message:e,type:"warning"}))});var w=function(){t(bu(e.match.params.uid,!1))};return ve.createElement(JO.a.Group,{animation:"slide up"},p&&ve.createElement("div",{className:"cody console",ref:I,style:{height:"".concat(d.codyConsoleHeight,"px"),left:"".concat(T,"px"),width:"calc(100% - ".concat(S,"px)")}},!Ug.codyServers&&ve.createElement(vI,{message:"No connection to Cody. Try to connect with him first!",type:"warning"}),a.toArray(),ve.createElement(OI,{showConnectDefault:!Ug.codyServers,boardId:e.match.params.uid,messageCount:a.count(),lastCodyMsg:s,visible:p,onEnter:function(e){if(C(ve.createElement(EI,{key:a.count()+1,msg:e})),"/help"!==e)if("/talk"!==e){var t=e.match(/^\/connect\s+(?<uri>http(s)?:\/\/[^\s]+)\s*(?<name>[A-Za-z0-9]+)?$/);if(t)return t.groups.name&&kI.includes(t.groups.name)?void C(ve.createElement(fI,{codyResponse:{cody:'Oh sorry, you cannot use "'.concat(t.groups.name,"\" as a name. It's a reserved word!"),type:Tg.Error},codyName:"cody"})):void Ug.connect.Cody(t.groups.uri,k.displayName,t.groups.name);var n=e.match(/^\/disconnect\s+(?<name>[A-Za-z0-9]+)$/);if(!n||!n.groups.name)return e.match(/^\/cockpit\s+http(s)?:\/\/.+$/)?(j.setCockpitBaseUrl(e.replace("/cockpit ","").trim()),void C(ve.createElement(fI,{codyName:"Cody",codyResponse:{cody:"Cockpit is activated now.",details:'Right click on commands, events, queries or aggregates and choose "Open In Cockpit" from context menu.'}}))):void(Ug.codyServers?Ug.reply(e):Ug.connect.Cody(e.replace("/connect ",""),k.displayName));Ug.disconnect(n.groups.name)}else Ug.talk.to.Cody();else window.setTimeout(function(){Ug.ask.Cody.forHelp()})},onEscape:function(){Ug.abortSession()},onClose:w}),ve.createElement(VE.a,{axis:"y",onDrag:function(e,n){h||g(!0);var r,a=d.codyConsoleHeight-n.deltaY;t((r=a,Object(et.action)(fv,{height:r})))},onStop:function(e,t){g(!1),E(d.codyConsoleHeight)},position:{x:0,y:0}},ve.createElement("div",{className:"collapsible",style:{bottom:O+"px",width:"calc(100% - ".concat(S,"px)"),cursor:"grabbing"}},ve.createElement("span",{className:"collaps-handle",onClick:w},ve.createElement("i",{className:"close icon"}))))))}),xI=function(e){return function(t){return function(e,t){return e.getIn([qo,"OrganizationInvitation",t])}(t,e)}},jI=Object(De.b)()(function(e){var t=Object(ve.useState)(Gn()),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(!1),b=Object(Qe.a)(p,2),g=b[0],v=b[1],y=Object(ze.useSelector)(xI(e.invitation.invitationId)),O=Object(ze.useDispatch)();Object(ve.useEffect)(function(){f.Api.getInspectioUserInfoByEmail(e.invitation.invitedUserEmail).then(function(e){var t=e.response;if(e.error,t){var n=h.createIioUserInfoFromServerData(t.data);Cn(n)&&a(n.value)}})},[e.invitation.invitedUserEmail]),Object(ve.useEffect)(function(){c&&s(!1),l&&y&&y.status===dr.revoked&&v(!0)},[y]);return g?ve.createElement(ve.Fragment,null):ve.createElement(lE.a,null,ve.createElement(Sh,{user:r,size:"mini"}),ve.createElement("span",{style:{paddingLeft:"10px"}},e.invitation.invitedUserEmail),ve.createElement(xh.a,{floated:"right"},ve.createElement(jh,{content:e.t("app.form.resend"),icon:"paper plane",loading:c,onClick:function(){s(!0),O(k.resendUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}}),ve.createElement(jh,{content:e.t("app.form.revoke"),icon:"delete",loading:l,onClick:function(){m(!0),O(k.revokeUserOrganizationInvitation(e.organization.uid,e.invitation.invitationId,e.invitation.invitedUserEmail))}})))}),TI=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},SI=Object(De.b)()(function(e){var t=Object(ve.useState)(""),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ze.useSelector)(Ci()),i=Object(ze.useDispatch)(),c=Fn({userId:o.uid,username:o.displayName,avatarUrl:o.avatarUrl,position:""});Cn(c)&&c.value;var s=e.organization.invitations.count()>0;return ve.createElement(Ni.a,{open:e.open,closeIcon:!0,onClose:e.onClose},ve.createElement(Ni.a.Header,null,e.t("insp.organisation.invite_user")),ve.createElement(Ni.a.Content,null,ve.createElement("form",{onSubmit:function(){i(k.inviteUserToOrganization(e.organization.uid,r)),a(""),e.onClose()}},ve.createElement("div",{style:{marginBottom:"10px"}},ve.createElement(tv.a,{style:{width:"100%"},value:r,onChange:function(e,t){return a(t.value)},placeholder:e.t("insp.organisation.user_email"),autoFocus:!0})),ve.createElement(Ri.a,{primary:!0,type:"submit",disabled:!TI(r)||!e.hasEnoughQuota},e.t("insp.organisation.send_invitation"))),ve.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.open_invitations")),s&&ve.createElement(og.a,{relaxed:!0,divided:!0},e.organization.invitations.map(function(t){return ve.createElement(jI,{invitation:t,organization:e.organization,key:t.invitationId})})),!s&&ve.createElement("p",{className:"infotextSecondary"},e.t("insp.organisation.empty_invitations"))))}),CI=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useDispatch)();$e(function(){a(!1)});var f=function(t){return!e.isOwner&&!e.readonly},b=function(t){f(e.member.userId)&&(t.stopPropagation(),a(!r))},h=e.isOwner||e.isAdmin?"admin-member":"";return ve.createElement("div",{className:"item "+h,key:e.member.userId,style:f(e.member.userId)?{cursor:"pointer"}:{}},ve.createElement(Xe.a,{open:r,icon:!1,pointing:"top",disabled:e.readonly,className:"organization"},ve.createElement(Xe.a.Menu,null,e.currentUserIsOwner&&e.isAdmin&&ve.createElement(Xe.a.Item,{text:e.t("insp.organisation.demote_to_member"),onClick:function(){e.readonly||p(j.Command.demoteUserToOrganizationMember(e.organizationId,e.member.userId))}}),e.currentUserIsOwner&&!e.isAdmin&&!e.isGuest&&ve.createElement(Xe.a.Item,{text:e.t("insp.organisation.promote_to_admin"),onClick:function(){e.readonly||p(j.Command.promoteUserToOrganizationAdmin(e.organizationId,e.member.userId))}}),e.isGuest&&ve.createElement(Xe.a.Item,{text:e.t("insp.organisation.promote_to_member"),onClick:function(){e.readonly||p(j.Command.turnGuestIntoMember(e.member.userId,e.organizationId))}}),ve.createElement(Xe.a.Item,{text:e.t("app.form.remove"),onClick:function(){return m(!0)}}))),!c&&ve.createElement("span",{className:"ui avatar image placeholder",onClick:b}),ve.createElement("img",{className:"ui avatar image",src:e.member.avatar(),onClick:b,onLoad:function(){return s(!0)},alt:e.member.username+" Avatar",style:{display:c?"inline-block":"none"}}),ve.createElement("div",{className:"content",onClick:b},ve.createElement("div",{className:"header"},e.member.username)),ve.createElement(Vp.a,{open:!e.readonly&&l,header:e.t("insp.organisation.remove_user_confirm_title"),content:e.t("insp.organisation.remove_user_confirm_text",{user_name:e.member.username}),confirmButton:e.t("insp.organisation.remove_user_confirm_button"),cancelButton:ve.createElement(Ri.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),onCancel:function(){return m(!1)},onConfirm:function(){e.readonly||(e.isGuest?p(j.Command.removeGuestFromOrganization(e.organizationId,e.member.userId)):p(j.Command.removeUserFromOrganization(e.organizationId,e.member.userId))),m(!1)}}))}),wI=Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(!1),i=Object(Qe.a)(o,2),c=i[0],s=i[1],u=Object(ve.useState)(!1),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ze.useSelector)(Ci()),f=Object(ze.useSelector)(vi(e.activeOrganization.organizationId)),b=Object(ze.useDispatch)(),h=Object(ze.useSelector)(ei(f?f.members.push(f.ownerId):Object(be.List)())),g=Object(ze.useSelector)(ei(f?f.guests:Object(be.List)()));if(!f)return ve.createElement(Mi.a,{error:!0},"Could not load organization data. Please refresh the page to try again!");var v=f.memberQuota-f.invitations.count()>0,y=h.sortBy(function(e){return e.username}).sort(function(e,t){return e.userId===f.ownerId?-1:t.userId===f.ownerId?1:f.admins.contains(e.userId)?-1:f.admins.contains(t.userId)?1:0}).map(function(e){return ve.createElement(CI,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})}),O=g.sortBy(function(e){return e.username}).map(function(e){return ve.createElement(CI,{key:e.userId,member:e,currentUserIsOwner:f.ownerId===p.uid,isOwner:f.ownerId===e.userId,isAdmin:f.admins.contains(e.userId),isGuest:!0,readonly:f.ownerId===e.userId||f.ownerId!==p.uid&&f.admins.contains(e.userId),organizationId:f.uid})});return ve.createElement(ve.Fragment,null,e.activeOrganization.explicitOrganization&&!v&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(Mi.a,{warning:!0,floating:!0,content:e.t("insp.organisation.no_member_quota")}))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement("div",null,!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&ve.createElement("button",{className:"ui huge basic button",onClick:function(){return a(!r)}},ve.createElement("i",{className:"plus icon"}),e.t("insp.organisation.create_btn")),r&&ve.createElement("div",{className:"ui segment"},ve.createElement(uE,{text:"",charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){b(k.setUpExplicitOrganization(e.activeOrganization.organizationId,t)),a(!1)},focus:!0,onCancel:function(){a(!1)},placeholder:e.t("insp.organisation.name")})),e.activeOrganization.explicitOrganization&&ve.createElement("div",{className:"ui segment"},ve.createElement("a",{href:"#",className:"ui small right floated basic button noborder",onClick:function(e){e.stopPropagation(),e.preventDefault(),s(!0)},style:{display:"none"}},"Delete"),ve.createElement("h3",{style:{margin:0,cursor:e.activeOrganization.ownOrganization?"pointer":"default"},id:"1234"},ve.createElement(uE,{text:e.activeOrganization.organizationName,charSize:9,widthUnit:"px",padding:20,minWidth:200,required:!0,onTextChanged:function(t){b(k.renameOrganization(e.activeOrganization.organizationId,t))},focus:!1,onCancel:function(){console.log("cancel name change")},placeholder:e.t("insp.organisation.name"),disabled:!e.activeOrganization.ownOrganization})),ve.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.member")),ve.createElement("div",{className:"ui horizontal list"},ve.createElement(Ri.a,{basic:!0,icon:!0,color:"blue",size:"large",onClick:function(){m(!0)},disabled:!v&&0===f.invitations.count()},ve.createElement("i",{className:"blue user icon"})),y),O.count()>0&&ve.createElement("div",{className:"ui horizontal divider"},e.t("insp.organisation.guests")),O.count()>0&&ve.createElement("div",{className:"ui horizontal list"},O),ve.createElement(SI,{open:l,onClose:function(){m(!1)},organization:f,hasEnoughQuota:v}),ve.createElement(Vp.a,{open:c,header:e.t("insp.team.remove_team_confirm_title"),confirmButton:e.t("app.form.remove"),cancelButton:ve.createElement(Ri.a,{content:e.t("app.form.cancel"),className:"basic noborder"}),content:e.t("insp.team.remove_team_confirm_text",{team_name:e.activeOrganization.organizationName}),onCancel:function(){return s(!1)},onConfirm:function(){alert("confirmed!")}}))))),!e.activeOrganization.explicitOrganization&&e.activeOrganization.ownOrganization&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null,ve.createElement(Mi.a,{info:!0,floating:!0,content:e.t("insp.organisation.not_explicit")}))),ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,null)))}),_I=Object(De.b)()(function(e){var t=Object(ze.useSelector)(Ci()),n=Object(ze.useSelector)(Rl());return ve.createElement(Fe.a,null,ve.createElement(Je.a,{stackable:!0,padded:!0},ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Ze.a,{as:"h1",icon:!0,textAlign:"center"},ve.createElement(Ze.a.Content,null,"Manage Organisation",ve.createElement(Ze.a.Subheader,null))))),n&&n.userIsAdmin&&ve.createElement(ve.Fragment,null,ve.createElement(wI,{currentUser:t,activeOrganization:n})),(!n||!n.userIsAdmin)&&ve.createElement(Je.a.Row,null,ve.createElement(Je.a.Column,{computer:"1",largeScreen:"2",widescreen:"3"}),ve.createElement(Je.a.Column,{mobile:"16",tablet:"16",computer:"14",largeScreen:"12",widescreen:"10"},ve.createElement(Mi.a,{content:e.t("insp.organisation.no_admin"),warning:!0})))))}),AI=function(e){var t=e.split("/");return t[t.length-1].split(".").slice(0,-1).join(".")},BI=Object(Me.k)(Object(De.b)()(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ve.useState)(yt),c=Object(Qe.a)(o,2),s=c[0],u=(c[1],Object(ve.useState)(!1)),d=Object(Qe.a)(u,2),l=d[0],m=d[1],p=Object(ve.useState)(void 0),f=Object(Qe.a)(p,2),b=f[0],h=f[1],g=Object(ve.useState)(void 0),v=Object(Qe.a)(g,2),y=v[0],O=v[1],E=Object(ze.useSelector)(gp()),k=Object(ze.useSelector)(Ci()),I=fp(),x=Object(ze.useSelector)(I),j=Object(ve.useState)("undefined"),T=Object(Qe.a)(j,2),S=T[0],C=T[1],w=Object(ze.useDispatch)(),_=decodeURIComponent(e.match.params.link);Object(ve.useEffect)(function(){E&&Ws(_).then(function(e){h(e);var t=AI(_);if(0!==x.filter(function(e){return e.name===t}).count())return C(t),void m(!0);A(t,e,ZE.newBoard)}).catch(function(e){console.error(e),w(i.Command.error("Request failed","Failed to load board. Please check if import link points to a valid prooph board XML file!")),a(!0)})},[_,E]);var A=function(e,t,n){if(n===ZE.newBoard){var r=tt.v4();w(N.importNewBoard(e,t,r)),O(r)}else{var a=x.filter(function(t){return t.name===e});if(a.count()>0){var o=a.first().updateXml(t,k.uid);w(N.importExistingBoard(o)),window.setTimeout(function(){O(o.uid)},50)}}};return y&&1===x.filter(function(e){return e.uid===y}).count()?ve.createElement(Me.c,{to:Et(y)}):r?ve.createElement(Me.c,{to:s}):ve.createElement(ve.Fragment,null,ve.createElement(Lp.a,{active:!0,className:"page"},ve.createElement(Up.a,{size:"large"},"Loading board from ",_)),ve.createElement(Ni.a,{open:l,closeIcon:!0,onClose:function(){m(!1)}},ve.createElement(Ni.a.Header,null,e.t("insp.board.import")),ve.createElement(Ni.a.Content,null,ve.createElement(Mi.a,{icon:"warning",warning:!0,content:e.t("insp.board.import_existing_board").replace("%name%",S)})),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{primary:!0,onClick:function(){m(!1),b&&A(AI(_)+" (Copy)",b,ZE.newBoard)}},ve.createElement(xp.a,{name:"plus"})," ",e.t("insp.board.btn_import_as_new")),ve.createElement(Ri.a,{basic:!0,onClick:function(){m(!1),b&&A(AI(_),b,ZE.replaceBoard)}},e.t("insp.board.btn_replace_board")))))})),NI=Object(Me.k)(function(e){var t=e.history.location.state.href;return window.setTimeout(function(){e.history.replace(t)},500),ve.createElement(Lp.a,{active:!0,className:"page"},ve.createElement(Up.a,{size:"large"},"Loading Board"))}),RI=(n(533),n(534),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 1===e.length&&(e="0"+e),3===e.length&&(e=e.slice(1)),0===parseInt(e,void 0)&&(e=n?"00":""),parseInt(e,void 0)>t&&(e="".concat(t)),e}),LI=function(e){e=Math.floor(Number(e)/1e3);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return t<0&&(t=0),n<0&&(n=0),r<0&&(r=0),[t,n,r]},UI=function(e,t,n){return 60*parseInt(""===e?"0":e,void 0)*60*1e3+60*parseInt(""===t?"0":t,void 0)*1e3+1e3*parseInt(""===n?"0":n,void 0)},DI=function(e,t,n,r,a,o){var i,c=0,s=0,u=0;i=e-Date.now();var d=Math.floor(100*i/t);if(d>50&&"start"!==n&&r("start"),d<=50&&d>5&&"half"!==n&&r("half"),d<=5&&"end"!==n&&r("end"),i>0){var l=LI(i),m=Object(Qe.a)(l,3);c=m[0],s=m[1],u=m[2]}e>0&&i<-1e4&&o(),a([c,s,u])},zI=null,MI=Object(Me.k)(Object(De.b)()(function(e){var t=Object(ze.useDispatch)(),n=Object(ve.useRef)(null),r=Object(ze.useSelector)(vv()),a=Object(ve.useMemo)(function(){return tp(e.match.params.uid)},[]),o=Object(ze.useSelector)(a),i=o&&o.shouldShowTimerModal,c=Object(ze.useSelector)(Ci()),s=Object(ve.useState)(""),u=Object(Qe.a)(s,2),d=u[0],l=u[1],m=Object(ve.useState)(""),p=Object(Qe.a)(m,2),f=p[0],b=p[1],h=Object(ve.useState)(""),g=Object(Qe.a)(h,2),v=g[0],y=g[1],O=Object(ve.useState)(0),E=Object(Qe.a)(O,2),k=E[0],I=E[1],x=Object(ve.useState)(0),j=Object(Qe.a)(x,2),T=j[0],S=j[1],C=Object(ve.useState)(),w=Object(Qe.a)(C,2),_=w[0],A=w[1],B=Object(ve.useState)(!1),N=Object(Qe.a)(B,2),R=N[0],L=N[1],U=Object(ve.useState)([0,0,0]),D=Object(Qe.a)(U,2),z=D[0],M=D[1],P=Object(ve.useState)(),F=Object(Qe.a)(P,2),G=F[0],H=F[1],V=Object(ve.useState)("start"),q=Object(Qe.a)(V,2),W=q[0],Y=q[1],Q=Object(ve.useState)(!1),K=Object(Qe.a)(Q,2),J=K[0],Z=K[1],X=jv(),$=Object(Qe.a)(X,1)[0];Object(ve.useEffect)(function(){i&&window.setTimeout(function(){n&&n.current&&n.current.focus()},200)},[i]);var ee=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=60*parseInt(""===d?"0":d,void 0)*60*1e3,a=60*parseInt(""===f?"0":f,void 0)*1e3,o=1e3*parseInt(""===v?"0":v,void 0);if(G&&!n){var i=Object(Qe.a)(G,3);r=i[0],a=i[1],o=i[2],r=60*r*60*1e3,a=60*a*1e3,o*=1e3}var s=r+a+o;!G||n?S(s):H(void 0);var u=Date.now()+s;I(u),L(!0),M(LI(s)),A(c.uid),$.startBoardTimer(Mg(e.match.params.uid,u,UI(d,f,v),c.uid)),t(hu(e.match.params.uid,!1)),DI(u,s,W,Y,M,te)},te=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];S(0),I(0),L(!1),H(void 0),A(void 0),Y("start"),t&&$.stopBoardTimer(Mg(e.match.params.uid,0,0,""))},ne=function(e){I(e.deadline),S(e.duration),A(e.moderator),L(!0),DI(e.deadline,e.duration,W,Y,M,te);var t=LI(e.duration),n=Object(Qe.a)(t,3),r=n[0],a=n[1],o=n[2];console.log("remote time started: ",e.toJSON()),l(RI(r.toString(),23)),b(RI(a.toString(),59)),y(RI(o.toString(),59))},re=function(e){console.log("Received remote timer stopped: ",e.toJSON()),te(!1)},ae=function(e){L(!1),console.log("remote paused time: ",e.toJSON()),e.pausedTime&&(M(e.pausedTime),H(e.pausedTime))},oe=function(e,t,n,r){e===_&&Z(!1)},ie=function(e){e===_&&Z(!0)};Object(ve.useEffect)(function(){return R&&(zI=window.setInterval(function(){DI(k,T,W,Y,M,te)},1e3),DI(k,T,W,Y,M,te)),function(){zI&&clearInterval(zI)}},[R,W,T,k]),Object(ve.useEffect)(function(){return console.log("attach listeners"),$.onBoardTimerStarted(ne),$.onBoardTimerStopped(re),$.onBoardTimerPaused(ae),$.onUserJoined(oe),$.onUserLeft(ie),function(){console.log("detach listeners"),$.offBoardTimerStarted(ne),$.offBoardTimerPaused(ae),$.offBoardTimerStopped(re),$.offUserJoined(oe),$.offUserLeft(ie)}},[e.match.params.uid,d,f,v,_]),Object(ve.useEffect)(function(){te()},[e.match.params.uid]);var ce=Object(Qe.a)(z,3),se=ce[0],ue=ce[1],de=ce[2],le=se+ue+de>0,me=_===c.uid,pe=!_||me||J;return ve.createElement(ve.Fragment,null,k>0&&ve.createElement("div",{style:{position:"absolute",left:r.width+20+"px",top:"60px",backgroundColor:"rgb(249 251 253 / 52%)",cursor:"pointer"},onClick:function(){return t(hu(e.match.params.uid,!0))}},ve.createElement("p",{style:{padding:"20px",fontWeight:"bold",fontSize:"20px",color:le?"#939393":"#c10303"},className:le?"":"blink"},ve.createElement(xp.a,{name:"hourglass "+(le?W:"end")}),"\xa0\xa0",RI(se.toString(),23,!0),"\xa0:\xa0",RI(ue.toString(),59,!0),"\xa0:\xa0",RI(de.toString(),59,!0))),ve.createElement(Ni.a,{open:i,closeIcon:!0,onClose:function(){t(hu(e.match.params.uid,!1))},size:"tiny"},ve.createElement(Ni.a.Header,null,e.t("insp.board.timer.modal_header")),ve.createElement(Ni.a.Content,null,ve.createElement("p",{style:{textAlign:"center",fontWeight:"bold",fontSize:"24px"}},ve.createElement(tv.a,{name:"hours",transparent:!0,type:"number",min:0,max:23,placeholder:"00",size:"large",style:{width:"55px"},value:k>0?RI(se.toString(),23):d,onKeyDown:function(e){return"Enter"!==e.key||ee()},onChange:function(e,t){return n=t.value,void l(RI(n,23));var n},disabled:k>0}),ve.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),ve.createElement(tv.a,{name:"minutes",ref:n,transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:k>0?RI(ue.toString(),59):f,onKeyDown:function(e){return"Enter"!==e.key||ee()},onChange:function(e,t){return n=t.value,void b(RI(n,59));var n},disabled:k>0}),ve.createElement("span",{style:{paddingRight:"20px"}},"\xa0:\xa0"),ve.createElement(tv.a,{name:"seconds",transparent:!0,type:"number",min:0,max:59,placeholder:"00",size:"large",style:{width:"55px"},value:k>0?RI(de.toString(),59):v,onKeyDown:function(e){return"Enter"!==e.key||ee()},onChange:function(e,t){return n=t.value,void y(RI(n,59));var n},disabled:k>0}))),ve.createElement(Ni.a.Actions,{style:{textAlign:"center"}},ve.createElement(xh.a,null,!R&&ve.createElement(Ri.a,{icon:"play",onClick:function(){return ee()},disabled:!pe}),R&&ve.createElement(Ri.a,{icon:"pause",onClick:function(){return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];L(!1),H([se,ue,de]),t&&$.pauseBoardTimer(Mg(e.match.params.uid,k,UI(d,f,v),c.uid,[se,ue,de]))}()},disabled:!pe}),ve.createElement(Ri.a,{icon:"stop",onClick:function(){return te()},disabled:!R||!pe}),ve.createElement(Ri.a,{icon:"undo",onClick:function(){return H(void 0),L(!1),void ee(!0)},disabled:0===k||!pe})))))})),PI=function(){return ve.createElement(Me.g,null,ve.createElement(Me.c,{exact:!0,path:"/",to:yt}),ve.createElement(Me.d,{exact:!0,path:yt,component:Rp}),ve.createElement(Me.d,{exact:!0,path:It,component:bg}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:Cv}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/boards/invitation/:invitation",component:aE}),ve.createElement(Me.d,{exact:!0,path:Ot,component:Fi}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/teams",component:xE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/teams/invitation/:invitation",component:oE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/updates",component:Nk}),ve.createElement(Me.d,{exact:!0,path:jt,component:NI}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/organization",component:_I}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/organizations/:organization/invitation/:invitation",component:dI}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/boards/import/:link",component:BI}))},FI=Object(Me.k)(function(e){return ve.createElement(Fe.a,{fluid:!0},ve.createElement(GE,null),ve.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},ve.createElement(oI,null)),ve.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},ve.createElement(PI,null)),ve.createElement(vt,null),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:II}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:rE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:uI}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:MI}))}),GI=(ve.Component,Object(De.b)()(function(e){return ve.createElement(Ni.a,{open:e.open,closeIcon:!1,onClose:e.onClose,size:"tiny"},ve.createElement(Ni.a.Header,null,e.t("insp.collaboration_modal."+e.headerKey)),ve.createElement(Ni.a.Content,null,ve.createElement("p",null,e.t("insp.collaboration_modal.text"))),ve.createElement(Ni.a.Actions,null,ve.createElement(Ri.a,{className:"positive",href:"https://prooph-board.com#pricing",target:"_blank"},"Upgrade")))})),HI=Object(lt.c)(function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1],o=Object(ze.useDispatch)();return ve.createElement(ve.Fragment,null,ve.createElement(Xe.a,{item:!0,icon:"ellipsis vertical"},ve.createElement(Xe.a.Menu,{direction:"left"},ve.createElement(Xe.a.Item,{icon:"history",text:"Activity",onClick:function(){return a(!0)}}),ve.createElement(Xe.a.Item,{icon:"clipboard outline",text:e.t("insp.top_menu.element_details"),onClick:function(){return o(fu(e.match.params.uid,!0))}}),ve.createElement(Xe.a.Item,{icon:"code",text:"Cody",onClick:function(){return o(bu(e.match.params.uid,!0))}}),ve.createElement(Xe.a.Item,{icon:"cog",text:"Settings",to:xt(e.match.params.uid),as:Pe.NavLink}),ve.createElement(Xe.a.Item,{icon:"download",text:"Import Board",onClick:function(){return o(lu(e.match.params.uid))}}),ve.createElement(Xe.a.Item,{icon:"upload",text:"Export Board",onClick:function(){return o(mu(e.match.params.uid))}}),ve.createElement(Xe.a.Item,{icon:"question",text:"FAQs",as:"a",href:"https://wiki.prooph-board.com",target:"_blank"}))),ve.createElement(GI,{open:r,onClose:function(){return a(!1)},headerKey:"header_history"}))}),VI=Object(De.b)()(Object(Me.k)(HI)),qI=function(e){var t=Object(ve.useState)(!1),n=Object(Qe.a)(t,2),r=n[0],a=n[1];return ve.createElement(ve.Fragment,null,ve.createElement(jE.a,null,ve.createElement(Ri.a,{icon:!0,className:"share",onClick:function(){return a(!0)}},ve.createElement(xp.a,{name:"share alternate"}),"\xa0share")),ve.createElement(GI,{open:r,onClose:function(){a(!1)},headerKey:"header_team"}))},WI=Object(De.b)()(Object(Me.k)(function(e){var t=Object(ze.useSelector)(vv()),n=kt(e.location.pathname)?t.width+20+"px":"270px";return ve.createElement(cE.a,{fixed:"top",inverted:!1,id:"topmenu",style:{paddingLeft:n}},ve.createElement(Me.d,{path:yt},ve.createElement(jE.a,null,ve.createElement(TE.a,null,ve.createElement(Me.d,{exact:!0,path:[yt,"/inspectio/board/:uid",It],component:DE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/updates",component:PE}),ve.createElement(Me.d,{exact:!0,path:["/inspectio/board/:uid",It],component:LE})))),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:qI}),ve.createElement(cE.a.Menu,{position:"right"}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:VI}))})),YI=function(){return ve.createElement(Me.g,null,ve.createElement(Me.c,{exact:!0,path:"/",to:yt}),ve.createElement(Me.d,{exact:!0,path:yt,component:Rp}),ve.createElement(Me.d,{exact:!0,path:It,component:bg}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:Cv}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/updates",component:Nk}),ve.createElement(Me.d,{exact:!0,path:jt,component:NI}))},QI=Object(Me.k)(function(e){return ve.createElement(Fe.a,{fluid:!0},ve.createElement(WI,null),ve.createElement("div",{style:{zIndex:103,position:"fixed",display:"flex",flexDirection:"column",top:"0",bottom:"0",left:"0",overflowX:"hidden",flex:"1"}},ve.createElement(oI,null)),ve.createElement("div",{style:{marginLeft:"250px",paddingTop:"90px"}},ve.createElement(YI,null)),ve.createElement(vt,null),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:II}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:rE}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/board/:uid",component:uI}),ve.createElement(Me.d,{exact:!0,path:"/inspectio/boards/import/:link",component:BI}))}),KI=function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),Object(Ne.a)(t,[{key:"render",value:function(){var e=this.props.store,t=0===window.location.pathname.search(/^\/free-version/)?"/free-version/":"/";return ve.createElement(De.a,{i18n:We},ve.createElement(ze.Provider,{store:e},ve.createElement(Pe.BrowserRouter,{basename:t},ve.createElement(QI,null))))}}]),t}(ve.Component),JI=n(564),ZI=Object(be.Map)(),XI=Object(Da.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZI,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hm:return e.set("token",t.payload.auth.token);default:return e}}},function(){return Object(be.fromJS)({})}),$I=Object(be.Map)(),ex=Object(be.Map)(),tx=Object(be.Map)(),nx=Object(be.Map)(),rx=Object(be.Map)(),ax=Object(be.Map)(),ox=Object(be.Map)(),ix=Object(be.Map)(),cx=new(function(e){function t(){return Object(Be.a)(this,t),Object(Re.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ue.a)(t,e),t}(Object(be.Record)({filter:"",allSharedBoardsHidden:!1,allOwnBoardsHidden:!1}))),sx=function(e){var t=[],n=e.toArray(),r=!1,a=!1,o="",i=null,c=null;return n.forEach(function(e,s){if(!r&&a&&(e=e.set("label",o),a=!1,o=""),s+1<n.length){var u=n[s+1];if(e.userId!==u.userId)return t.push(e),r=!1,a=!1,o="",i=null,c=null,!0;if(i&&c===e.action&&(e=e.set("date",i)),i=null,c=null,e.cellId===u.cellId){if(e.action===u.action)return e.cellType!==sl.multiple&&e.cellType!==sl.misc?(o=e.label,i=e.date,c=e.action,r=!1,a=!0,!0):(r||t.push(e),r=!0,!0);if(e.action===Vd.edited&&u.action===Vd.added)return r=!1,a=!0,o=e.label,!0}}r||t.push(e),r=!1,o="",a=!1,c=null,i=null}),Object(be.List)(t)},ux=Object(be.Map)(),dx=Object(be.Map)(),lx=Object(be.Map)(),mx=Object(Da.combineReducers)({boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ex,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yi:var n=t.payload.board;return e.set(n.uid,n);case Qi:var r=t.payload;return Object(Un.forEach)(r,function(t){if(e.get(t.uid)){var n=e.get(t.uid);e=e.set(t.uid,n.syncSummaryInfo(t))}else e=e.set(t.uid,t)}),e;case Ki:return Object(Un.forEach)(t.payload,function(t){e=e.set(t.uid,t)}),e;case Ji:var a=e.get(t.payload.snapshot.boardId);return a&&(a=(a=a.updateXmlFromSnapshot(t.payload.snapshot)).set("detailsFetched",!0),e=e.set(t.payload.snapshot.boardId,a)),e;case Zi:var o=e.get(t.payload.boardId);return o&&(o=(o=o.set("detailsFetched",!0)).set("writeAccess",t.payload.writeAccess),e=e.set(t.payload.boardId,o)),e;case Hi:var i=e.get(t.payload.board.uid);return i&&(i=i.updateXmlAndVersionFromBoard(t.payload.board),e=e.set(t.payload.board.uid,i)),e;case Vi:return e.setIn([t.payload.board.uid],t.payload.board);case Xi:return e.setIn([t.payload.boardId,"inDeletion"],!0);case $i:return e.setIn([t.payload.boardId,"inDeletion"],!1);case ec:return e.removeIn([t.payload.boardId]);case zc:if(H.Action.isAcknowledged(t.payload.socketCmd)){var c=[t.payload.socketCmd.payload.board,"version"],s=t.payload.socketCmd.payload,u=s.userId,d=s.version,l=new D.BoardVersion({userId:u,version:d}),m=e.getIn(c);if(m.equals(l))return e.setIn(c,m.asHead())}return e;case cc:return e.setIn([t.payload.boardId,"shouldImport"],!0);case qc:case Vc:return e.setIn([t.payload.boardId,"shouldImport"],!1);case sc:return e.setIn([t.payload.boardId,"shouldExport"],!0);case Wc:return e.setIn([t.payload.boardId,"shouldExport"],!1);case uc:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowElementDetails"],!1)),e.setIn([t.payload.boardId,"shouldShowHistory"],t.payload.visible);case dc:return t.payload.visible&&(e=e.setIn([t.payload.boardId,"shouldShowHistory"],!1)),e.setIn([t.payload.boardId,"shouldShowElementDetails"],t.payload.visible);case lc:return e.setIn([t.payload.boardId,"shouldShowCodyConsole"],t.payload.visible);case mc:return e=e.setIn([t.payload.boardId,"shouldShowTimerModal"],t.payload.visible);case Xc:var p=e.getIn([t.payload.boardId,"sharedWith"],Object(be.List)());return e.setIn([t.payload.boardId,"sharedWith"],p.filter(function(e){return e!==t.payload.userId}));case bs:return e.set(t.payload.uid,t.payload);case ue.Type.TEAM_ACCESS_TO_BOARD_GRANTED:var f=e.getIn([t.payload.boardId,"assignedTeams"],Object(be.List)());return e.setIn([t.payload.boardId,"assignedTeams"],f.push(t.payload.teamId));case ue.Type.TEAM_ACCESS_TO_BOARD_REVOKED:var b=e.getIn([t.payload.boardId,"assignedTeams"],Object(be.List)());return e.setIn([t.payload.boardId,"assignedTeams"],b.filter(function(e){return e!==t.payload.teamId}));default:return e}},boardPermissionsForUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ox,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ts:return Fa(e,t.payload.boardPermissions);case $c:var n=t.payload.boardId,r=t.payload.userId,a=e.valueSeq().toArray().find(function(e){return e.boardId===n&&e.userId===r});return a?e.setIn([a.uid,"permissions"],t.payload.permissions):e;case Xc:var o=t.payload.boardId,i=t.payload.userId,c=e.valueSeq().toArray().find(function(e){return e.boardId===o&&e.userId===i});return c?e.remove(c.uid):e;default:return e}},boardPermissionsForTeams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ax,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ns:return Fa(e,t.payload.boardPermissions);case es:return Ma(e,t.payload);default:return e}},boardInvitations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rs:return Fa(e,t.payload.boardInvitations);case Jc:case Zc:return Ma(e,t.payload.boardInvitation);default:return e}},boardClients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ss:return e.set(t.payload.boardId,t.payload.client);case us:return e.set(t.payload.boardId,null);case ds:return e.setIn([t.payload.boardId,"clientSecret"],t.payload.clientSecret);default:return e}},boardGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cs:var n=e.get(t.payload.boardId)||Object(be.Map)();return e.set(t.payload.boardId,Fa(n,t.payload.elements));default:return e}},queues:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Mc:return function(e,t){var n=e.get(t.board,Object(be.List)());return e.set(t.board,n.push(t))}(e,t.payload.boardChanged);case Pc:return function(e,t){var n=t.first(new M.BoardChanged(M.defaultBoardChangedProps)),r=e.get(n.board,Object(be.List)());return t.forEach(function(t){r=r.filter(function(e){return e.uid!==t.uid}),e=e.set(t.board,r)}),e}(e,t.payload.events);default:return e}},history:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ux,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case pc:var a=n.get(r.payload.boardId,new sp),o=r.payload.entries;if(a.history.count()>0){var i=a.history.last();a=a.set("history",a.history.pop()),o=o.unshift(i)}o=sx(o);var c=r.payload.entries.last(new dl);return a=(a=a.set("history",(e=a.history).push.apply(e,Object(Za.a)(o.toArray())))).set("oldestBoardVersion",c.boardVersion),c.cellId||c.cellType!==sl.misc||QO()(c.date,QO.a.ISO_8601).isBefore(QO()("2019-07-29"))&&(a=a.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,a);case fc:var s=n.get(r.payload.boardId,new sp),u=r.payload.entries;if(s.history.count()>0){var d=s.history.first();s=s.set("history",s.history.shift()),u=u.push(d)}u=sx(u),s=s.set("history",(t=s.history).unshift.apply(t,Object(Za.a)(u.toArray())));var l=r.payload.entries.last(new dl);return s.oldestBoardVersion||(s=s.set("oldestBoardVersion",l.boardVersion)),l.cellId||l.cellType!==sl.misc||QO()(l.date,QO.a.ISO_8601).isBefore(QO()("2019-07-29"))&&(s=s.set("olderPatchesAvailable",!1)),n.set(r.payload.boardId,s);case yc:var m=n.get(r.payload.boardId,new sp);return m=m.set("loading",r.payload.loading),n.set(r.payload.boardId,m);case vc:return n.setIn([r.payload.boardId,"olderPatchesAvailable"],!1);case bc:return n.remove(r.payload.boardId);default:return n}},loadingBoards:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case gs:return!0;case Qi:return!1;default:return e}},initialBoardListLoaded:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case hs:return!0;default:return e}},overview:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Cc:return e.set("filter",t.payload.filter);case wc:return e.set("allSharedBoardsHidden",t.payload.hide);case _c:return e.set("allOwnBoardsHidden",t.payload.hide);default:return e}},elementsTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ix,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oc:var n=e.get(t.payload.boardId,new Ok({elements:Object(be.List)()}));return e.set(t.payload.boardId,n.mergeTree(new Ok({elements:t.payload.elements})));case Ac:var r=e.get(t.payload.boardId,new Ok({elements:Object(be.List)()}));return e.set(t.payload.boardId,r.set("filter",t.payload.filter).set("focus",t.payload.focus||!1));default:return e}},activeGraphElements:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case as:return t.payload.element?e.set(t.payload.boardId,{id:t.payload.element.id,type:t.payload.element.type,label:t.payload.element.label,metadata:t.payload.element.metadata||void 0,edgeData:t.payload.element.edgeData||void 0,updateMetadata:t.payload.element.updateMetadata,updateSimilarElements:t.payload.element.updateSimilarElements}):e.set(t.payload.boardId,void 0);case os:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"label"],t.payload.label);case is:return e.getIn([t.payload.boardId,"id"])!==t.payload.elementId?e:e.setIn([t.payload.boardId,"metadata"],t.payload.metadata);default:return e}},StickyTemplate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ls:case fs:return Fa(e,t.payload.stickyTemplates);case ms:case ps:return Fa(e,Object(be.List)([t.payload.stickyTemplate]));default:return e}}},function(){return Object(be.fromJS)({boards:void 0,queues:void 0,StickyTemplate:void 0})}),px=Object(Da.combineReducers)({sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hv,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lv:return e.set("collapsed",t.payload.collapsed);case mv:return e.set("width",t.payload.width);case pv:return e.set("rightSidebarWidth",t.payload.width);case fv:return e.set("codyConsoleHeight",t.payload.height);default:return e}}},function(){return Object(be.fromJS)({sidebar:void 0})}),fx=Object(be.List)(),bx=Object(Da.combineReducers)({messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ot:case"@@NotificationSystem/MessageHandled":var n=e.findIndex(function(e){return e.uid===t.payload.uid});return e=n>-1?t.payload.handled?e.remove(n):e.set(n,t.payload):e.push(t.payload);default:return e}}},function(){return Object(be.fromJS)({messages:void 0})}),hx=V.disconnectedStatus(),gx=Object(Da.combineReducers)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hx;switch((arguments.length>1?arguments[1]:void 0).type){case F.CONNECT_SOCKET:return V.fromtString(V.STATUS_CONNECTING);case F.SOCKET_CONNECTED:return V.fromtString(V.STATUS_CONNECTED);case F.SOCKET_DISCONNECTED:return V.fromtString(V.STATUS_DISCONNECTED);case F.DISCONNECT_SOCKET:return V.fromtString(V.STATUS_DISCONNECTING);case F.SOCKET_CONNECTION_LOST:return V.fromtString(V.STATUS_CONNECTION_LOST);default:return e}}},function(){return Object(be.fromJS)({status:void 0})}),vx=Object(be.Map)(),yx=Object(be.Map)().set("currentUser",new y.UserInfo(y.defaultUserProps)),Ox=Object(be.Map)(),Ex=Object(Da.combineReducers)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wt:return e.set("currentUser",t.payload.user);case U.Type.ADD_BOARD:case U.Type.IMPORT_NEW_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])-1);case U.Type.DELETE_BOARD:return e.setIn(["currentUser","quota"],e.getIn(["currentUser","quota"])+1);case ue.Type.TEAM_ADDED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])-1);case ue.Type.TEAM_DELETED:return e.setIn(["currentUser","teamQuota"],e.getIn(["currentUser","teamQuota"])+1);case Lt:return e.setIn(["currentUser"],t.payload.user);case Mt:return e.setIn(["currentUser","activeOrganization"],t.payload.activeOrganization);default:return e}},userSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ox,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.USER_SETTINGS_LOADED:return e.merge(t.payload.userSettings.values,{settings_loaded:!0});case c.USER_SETTING_UPSERTED:return e.set(t.payload.key,t.payload.value);default:return e}},iioUsersInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vx,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.IIO_USERS_INFO_LOADED:return Fa(e,t.payload.usersInfo);default:return e}}},function(){return Object(be.fromJS)({users:void 0,userSettings:void 0,iioUsersInfo:void 0})}),kx=Object(Da.combineReducers)({notificationSystem:bx,inspectioBoards:mx,inspectioUsers:Ex,inspectioTeams:de.inspectioTeamsReducer,inspectioOrganizations:T.inspectioOrganizationsReducer,inspectioSidebar:px,form:Di.reducer,auth:XI,socket:gx},function(){return Object(be.fromJS)({notificationSystem:void 0,inspectioBoards:void 0,inspectioUsers:void 0,inspectioTeams:void 0,inspectioOrganizations:void 0,inspectioSidebar:void 0,auth:void 0,socket:void 0})}),Ix=pn.a.mark(jx),xx=pn.a.mark(Tx);function jx(e){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.c)(Ti.deleteBoard,e.payload.boardId);case 2:return t.next=4,Object(fn.g)(i.Command.info("Board deleted","Board deleted"));case 4:case"end":return t.stop()}},Ix,this)}function Tx(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(A.DELETE_BOARD);case 3:return e=t.sent,t.next=6,Object(fn.f)(jx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},xx,this)}var Sx=pn.a.mark(wx),Cx=pn.a.mark(_x);function wx(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(fn.c)(Ti.getBoard,e.payload.boardId);case 2:if(t=a.sent){a.next=5;break}return a.abrupt("return");case 5:if(!Sn(n=Ln(t.stickyTemplates,Bn([zn(),"Response data is not of type Array"]),Rn(function(t){return Ph({boardId:e.payload.boardId,cellType:t.cellType,template:t.template,templateType:t.templateType,templateSchema:t.templateSchema})})))){a.next=9;break}return a.next=9,Object(fn.g)(i.Command.error("Request Error","Could not load sticky templates"));case 9:if(!Cn(n)){a.next=13;break}return r=Object(be.List)(n.value),a.next=13,Object(fn.g)(U.Event.boardStickyTemplatesFetched(r));case 13:case"end":return a.stop()}},Sx,this)}function _x(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.FETCH_BOARD_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(fn.f)(wx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Cx,this)}var Ax=pn.a.mark(Lx),Bx=pn.a.mark(Ux),Nx=pn.a.mark(Dx),Rx=pn.a.mark(zx);function Lx(){var e,t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.c)(Ti.getUserSettings);case 2:return e=n.sent,t={},e.forEach(function(e){t[e.key]=e.value}),n.next=7,Object(fn.g)(f.Event.userSettingsLoaded(new fy({userId:Ti.getUser().userId,values:t})));case 7:case"end":return n.stop()}},Ax,this)}function Ux(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.g)(f.Command.signIn({uid:Ti.getUser().userId,name:"standalone",email:"",givenName:"",familyName:"",roles:{roleMap:{anonymous:{type:"anonymous"}}},account:{accountType:"free"},quota:1e3,teamQuota:1,displayName:"standalone",avatarUrl:"",companyName:"",jobTitle:"",signedIn:!0}));case 2:case"end":return e.stop()}},Bx,this)}function Dx(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.g)(L.startFetchUserBoards());case 2:return t.next=4,Object(fn.c)(Ti.getBoards);case 4:return e=t.sent,t.next=7,Object(fn.g)(cu(e.map(function(e){return new z.Board({uid:e.boardId,name:e.name,lastModified:e.lastModified,version:new Pd(Md),shared:!1,sharedWith:Object(be.List)(),assignedTeams:Object(be.List)(),example:!1,owner:Ti.getUser().userId,creator:null,organization:null})})));case 7:return t.next=9,Object(fn.g)(id());case 9:case"end":return t.stop()}},Nx,this)}function zx(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(fn.k)(A.FETCH_USER_BOARDS);case 3:return e.next=5,Object(fn.f)(Dx);case 5:return e.next=7,Object(fn.f)(Ux);case 7:return e.next=9,Object(fn.f)(Lx);case 9:e.next=0;break;case 11:case"end":return e.stop()}},Rx,this)}var Mx=pn.a.mark(Fx),Px=pn.a.mark(function e(t){var n,r;return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(fn.i)(fp());case 2:if(!(e.sent.size<1)){e.next=6;break}return e.next=6,Object(fn.c)(Dx);case 6:return e.next=8,Object(fn.c)(Ti.getBoard,t.payload.boardId);case 8:if(n=e.sent){e.next=11;break}return e.abrupt("return");case 11:return r=new P.BoardSnapshot({boardId:n.boardId,xml:n.xml,boardVersion:new D.BoardVersion(Md)}),e.next=14,Object(fn.g)(uu(r));case 14:return e.next=16,Object(fn.g)(N.setBoardDetailsFetched(t.payload.boardId,!0));case 16:case"end":return e.stop()}},e,this)});function Fx(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(A.FETCH_USER_BOARD);case 3:return e=t.sent,t.next=6,Object(fn.f)(Px,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Mx,this)}var Gx=pn.a.mark(Vx),Hx=pn.a.mark(qx);function Vx(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(fn.c)(Ti.getBoard,e.payload.board.uid);case 2:if(!(t=n.sent)){n.next=10;break}return n.next=6,Object(fn.c)(Ti.updateBoard,Object(Ye.a)({},t,{xml:e.payload.board.xml}));case 6:return n.next=8,Object(fn.g)(N.forceUpdateBoards([e.payload.board]));case 8:return n.next=10,Object(fn.g)(i.Command.info("Board imported:",e.payload.board.name));case 10:case"end":return n.stop()}},Gx,this)}function qx(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.IMPORT_EXISTING_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Vx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Hx,this)}var Wx=pn.a.mark(Qx),Yx=pn.a.mark(Kx);function Qx(e){var t;return pn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.boardId||tt.v4(),n.next=3,Object(fn.c)(Ti.addBoard,{boardId:t,name:e.payload.boardName,lastModified:(new Date).toISOString(),xml:e.payload.boardXml,stickyTemplates:[]});case 3:return n.next=5,Object(fn.g)(i.Command.info("Board created","Board created"));case 5:return n.next=7,Object(fn.f)(Dx);case 7:case"end":return n.stop()}},Wx,this)}function Kx(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([A.IMPORT_NEW_BOARD]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Qx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Yx,this)}var Jx=pn.a.mark(Xx),Zx=pn.a.mark($x);function Xx(e){var t,n;return pn.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(fn.c)(Ti.getBoard,e.payload.boardId);case 2:if(t=r.sent){r.next=5;break}return r.abrupt("return");case 5:return n=e.payload.stickyTemplates.map(function(e){return{cellType:e.cellType,template:e.template,templateType:e.templateType,templateSchema:e.templateSchema||null}}),r.next=8,Object(fn.c)(Ti.updateBoard,Object(Ye.a)({},t,{stickyTemplates:n.toArray()}));case 8:return r.next=10,Object(fn.g)(i.Command.info("Card Templates imported","You can now use them on the board!"));case 10:return r.next=12,Object(fn.g)(U.Event.stickyTemplatesImported(Object(be.List)(e.payload.stickyTemplates)));case 12:e.payload.finishedCb();case 13:case"end":return r.stop()}},Jx,this)}function $x(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.IMPORT_STICKY_TEMPLATES]);case 3:return e=t.sent,t.next=6,Object(fn.f)(Xx,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},Zx,this)}var ej=pn.a.mark(nj),tj=pn.a.mark(rj);function nj(e){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.c)(Ti.addBoard,{boardId:e.payload.board.uid,name:e.payload.board.name,lastModified:(new Date).toISOString(),xml:"",stickyTemplates:[]});case 2:return t.next=4,Object(fn.c)(e.payload.history.push,Et(e.payload.board.uid));case 4:case"end":return t.stop()}},ej,this)}function rj(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(A.ADD_BOARD);case 3:return e=t.sent,t.next=6,Object(fn.f)(nj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},tj,this)}var aj=pn.a.mark(ij),oj=pn.a.mark(cj);function ij(e){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.g)(Iu(e.payload.boardId,!0));case 2:return t.next=4,Object(fn.g)(ku(e.payload.boardId));case 4:return t.next=6,Object(fn.g)(Iu(e.payload.boardId,!1));case 6:case"end":return t.stop()}},aj,this)}function cj(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(hc);case 3:return e=t.sent,t.next=6,Object(fn.f)(ij,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},oj,this)}var sj=pn.a.mark(dj),uj=pn.a.mark(lj);function dj(e){var t,n,r,a;return pn.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=kg(),n=Object(Qe.a)(t,1),r=n[0],o.next=3,Object(fn.c)(Ti.getBoard,e.payload.board.uid);case 3:if(!(a=o.sent)){o.next=7;break}return o.next=7,Object(fn.c)(Ti.updateBoard,Object(Ye.a)({},a,{xml:r.exportXmlSnapshot()}));case 7:case"end":return o.stop()}},sj,this)}function lj(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(A.SAVE_BOARD);case 3:return e=t.sent,t.next=6,Object(fn.f)(dj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},uj,this)}var mj=pn.a.mark(bj),pj=pn.a.mark(hj),fj=pn.a.mark(gj);function bj(e){var t,n,r,a,o,c,s;return pn.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,Object(fn.i)(qh(Mh(e.payload.boardId,e.payload.cellType)));case 2:return t=u.sent,n=e.payload,r=n.boardId,a=n.cellType,o=n.template,t||(t=Fh(r,a,o)),u.next=7,Object(fn.c)(Ti.getBoard,e.payload.boardId);case 7:if(c=u.sent){u.next=10;break}return u.abrupt("return");case 10:return s=c.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:a,templateType:t.templateType,templateSchema:t.templateSchema||null},u.next=13,Object(fn.c)(Ti.updateBoard,Object(Ye.a)({},c,{stickyTemplates:[].concat(Object(Za.a)(c.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},s,{template:o})])}));case 13:return u.next=15,Object(fn.g)(i.Command.info("Sticky Template set","Sticky template for "+a+" set"));case 15:return u.next=17,Object(fn.g)(U.Event.stickyTemplateSet(t.setTemplate(o)));case 17:case"end":return u.stop()}},mj,this)}function hj(e){var t,n,r;return pn.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,null;case 2:return a.next=4,Object(fn.i)(qh(Mh(e.payload.boardId,e.payload.cellType)));case 4:return(t=a.sent)||(t=Fh(e.payload.boardId,e.payload.cellType,"")),a.next=8,Object(fn.c)(Ti.getBoard,e.payload.boardId);case 8:if(n=a.sent){a.next=11;break}return a.abrupt("return");case 11:return r=n.stickyTemplates.find(function(e){return e.cellType===t.cellType})||{cellType:t.cellType,template:t.template},a.next=14,Object(fn.c)(Ti.updateBoard,Object(Ye.a)({},n,{stickyTemplates:[].concat(Object(Za.a)(n.stickyTemplates.filter(function(e){return e.cellType!==t.cellType})),[Object(Ye.a)({},r,{templateType:e.payload.templateType,templateSchema:e.payload.templateSchema||null})])}));case 14:return a.next=16,Object(fn.g)(i.Command.info("Advanced Sticky Config updated","Advanced Sticky Config for "+t.cellType+" updated"));case 16:return t=t.setTemplateType(e.payload.templateType),e.payload.templateSchema&&(t=t.setTemplateSchema(e.payload.templateSchema)),a.next=20,Object(fn.g)(U.Event.stickyAdvancedConfigUpdated(t));case 20:case"end":return a.stop()}},pj,this)}function gj(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)([U.Type.SET_STICKY_TEMPLATE,U.Type.UPDATE_STICKY_ADVANCED_CONFIG]);case 3:if((e=t.sent).type!==U.Type.SET_STICKY_TEMPLATE){t.next=9;break}return t.next=7,Object(fn.f)(bj,e);case 7:t.next=11;break;case 9:return t.next=11,Object(fn.f)(hj,e);case 11:t.next=0;break;case 13:case"end":return t.stop()}},fj,this)}var vj=pn.a.mark(Oj),yj=pn.a.mark(Ej);function Oj(e){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.c)(Ti.setUserSetting,e.payload);case 2:return t.next=4,Object(fn.g)(d.userSettingUpserted(e.payload.key,e.payload.value));case 4:case"end":return t.stop()}},vj,this)}function Ej(){var e;return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(fn.k)(c.UPSERT_USER_SETTING);case 3:return e=t.sent,t.next=6,Object(fn.f)(Oj,e);case 6:t.next=0;break;case 8:case"end":return t.stop()}},yj,this)}var kj={standaloneDeleteBoardFlow:Tx,standaloneFetchBoardStickyTemplatesFlow:_x,standaloneFetchUserBoardsFlow:zx,standaloneFetchUserBoardFlow:Fx,standaloneImportNewBoardFlow:Kx,standaloneImportExistingBoardFlow:qx,standaloneInstallUserBoardFlow:rj,standaloneLoadBoardHistoryFlow:cj,standaloneSaveBoardFlow:lj,standaloneUpdateStickyTemplateFlow:gj,standaloneUpsertUserSetting:Ej,syncElementsTreeFlow:wO,importStickyTemplates:$x},Ij=pn.a.mark(jj),xj=Object.values(kj).map(function(e){return pn.a.mark(function t(){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(fn.j)(pn.a.mark(function t(){return pn.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(fn.c)(e);case 4:console.error("unexpected root saga termination. The root sagas are supposed to be sagas that live during the whole app lifetime!",e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("Saga error, the saga will be restarted",t.t0);case 10:return t.next=12,Object(fn.e)(1e3);case 12:t.next=0;break;case 14:case"end":return t.stop()}},t,this,[[1,7]])}));case 2:case"end":return t.stop()}},t,this)})});function jj(){return pn.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("root saga started"),e.next=3,Object(fn.b)(xj.map(function(e){return Object(fn.c)(e)}));case 3:case"end":return e.stop()}},Ij,this)}var Tj=function(e,t){var n=Object(JI.composeWithDevTools)({}),r=Object(bm.b)(),a=Object(mt.createStore)(kx,t,n(Object(mt.applyMiddleware)(r)));return r.run(jj),a},Sj=n(565),Cj=Object(Sj.a)();n(520),n(1211);n.d(t,"logout",function(){return Bj});var wj=new ge.a({url:"https://ee.local/auth",realm:"proophboard",clientId:"inspectio"}),_j=Object(be.fromJS)({}),Aj=Tj(Cj,_j);Aj.dispatch(_d()),Oe.render(ve.createElement(KI,{store:Aj,history:Cj}),document.getElementById("root"));var Bj=function(){return wj.logout()}},533:function(e,t,n){},534:function(e,t,n){},558:function(e){e.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},default:{},examples:{type:"array",items:[]},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#",default:!1},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:[],enum:{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:{}}},607:function(e,t,n){e.exports=n(1212)},618:function(e,t){},620:function(e,t){},658:function(e,t){},659:function(e,t){},809:function(e,t){},837:function(e,t){e.exports={de:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Willkommen beim React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Umbenennen",save:"Speichern",change:"\xc4ndern",cancel:"Abbrechen",confirm:"Ok",delete:"L\xf6schen",remove:"Entfernen",upload:"Hochladen",resend:"Erneut Senden",revoke:"Widerrufen",yes:"Ja",no:"Nein",back:"Zur\xfcck",generateTemplate:"Template generieren"},showLess:"Weniger anzeigen",showAll:"Alle anzeigen",open:"\xd6ffnen",learnMore:"Mehr erfahren",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Mehr erfahren",got_it:"Alles klar",new_logo_header:"Neues Logo",new_logo_text:"InspectIO ist jetzt prooph board",new_domain_header:"Neue Domain",new_domain_text:"InspectIO ist jetzt prooph board und ab sofort erreichbar unter https://prooph-board.com. Aktualisiere am besten gleich deine bookmarks!"},overview:{all_boards:"Meine Boards",add_board:"Neues Board",last_modified:"Zuletzt ge\xe4ndert",fetch_board_error:"Es gibt ein technisches Problem beim Laden des Boards. Bitte sp\xe4ter erneut versuchen oder den Support kontaktieren.",shared_board:"Dieses Board wurde mit dir geteilt. Du kannst die Board-Eigenschaften nicht bearbeiten."},sidebar:{element_details:{json_invalid_title:"Schema Ung\xfcltig",json_invalid_text:"Das Schema ist kein g\xfcltiges JSON Dokument",no_element_selected:"Markiere ein Element auf dem Board, um dessen Metadaten zu bearbeiten.",update_similar_elements_text:"Auf dem Board befinden sich {{number}} weitere Cards vom gleichen Typ und gleichem Namen.",update_similar_elements_link:"Klicke hier, um die Metadaten auf alle Cards zu \xfcbertragen."},no_boards_left_warning:"Keine Boards mehr verf\xfcgbar",boards_left_warning:"Nur noch {{board_count}} Board verf\xfcgbar",boards_left_warning_upgrade:"Deine Organisation ben\xf6tigt ein Upgrade"},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Aktiviere den Lite Modus f\xfcr mehr Performance auf gro\xdfen Boards und w\xe4hrend Video Calls.",lite_mode_is_active:"Du befindest dich im Lite Modus.",lite_mode_is_active_details:"Elemente werden beim Zoomen nicht ausgeblendet und Schriftgr\xf6\xdfen nicht angepasst, um Rechenleistung zu sparen."},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Diese Funktion ist in der freien Version leider nicht verf\xfcgbar."},board:{add:"Neues Board",import:"Board Import",import_existing_board:'Ein Board mit dem Namen "%name%" existiert bereits. Du kannst das Board mit dem Import \xfcberschreiben oder eine Kopie importieren. Was m\xf6chtest du tun?',btn_replace_board:"Board \xfcberschreiben",btn_import_as_new:"Als Kopie importieren",edit_header:"Board Einstellungen",edit:"%name%",share:"Permissions",share_sub:"Lade andere User ein auf dein Board zu schauen oder es zu bearbeiten.",delete_txt1:"Wenn Du das Board nicht mehr ben\xf6tigst, kannst Du es hier ",delete_link:"l\xf6schen",delete_txt2:".",really_delete:"Bitte best\xe4tige die L\xf6schung, indem du den Board Namen eingibst. Diese Aktion kann nicht r\xfcckg\xe4ngig gemacht werden!",form:{board_name:"Board Name",btn_add_save:"Los geht's",btn_share:"Share",btn_send_invitation:"Einladung versenden",btn_send:"Send",email:"eMail",team_name:"Teamname"},invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Board entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Board entfernt werden?',joined:{title:"Board Zugriff",details:"Du hast nun Zugriff auf das Board: {{name}}."},upload:{select_image:"Bild ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen, aus der Zwischenablage einf\xfcgen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Bild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Bild konnte nicht gel\xf6scht werden.",paste_failed:"Einf\xfcgen fehlgeschlagen",invalid_file_pasted:"Es konnte keine jpeg/png Datei in der Zwischenablage gefunden werden."},link:{headline:"Board verlinken",select_board:"W\xe4hle ein Board",select_event:"W\xe4hle ein Event"},tasklink:{headline:"Task verlinken"},notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen"}}},sticky_templates:{headline:"Card Templates",descriptions:"Hinterlege ein Metadata Template pro Card Typ",advanced_config:"Erweiterte Konfiguration",upload_info:"JSON-Schema Datei (.json) in diesen Bereich ziehen oder hier klicken, um den Upload-Dialog zu \xf6ffnen",uploaded_schema_invalid_title:"Datei ung\xfcltig",uploaded_schema_invalid_text:"Die hochgeladene Datei ist kein g\xfcltiges Schema"},layers:{moved_to_sidebar_header:"Ebenen sind jetzt in der Sidebar",moved_to_sidebar_details:"Wir haben die Ebenen-Funktion in die linke Sidebar integriert, f\xfcr mehr \xdcbersicht und schnelleren Zugriff. Im prooph board Wiki erf\xe4hrst du mehr \xfcber die \xc4nderung. Der Men\xfceintrag wird demn\xe4chst ebenfalls entfernt.",moved_to_sidebar_wiki_text:"Hier geht's zum Wiki Eintrag",delete_confirmation:"Wirklich?",add_layer:"Ebene hinzuf\xfcgen",set_global_visibility:"Deine Sichtbarkeit der Ebenen mit allen teilen",refresh_layers:"neueste \xc4nderungen vom Board \xfcbernehmen",folder_title:"Einfacher Klick \xf6ffnet die Ebene und markiert sie als aktiv.\nDoppelklick \xf6ffnet das Bearbeiten-Menu.",delete_layer:"Ebene l\xf6schen",visibility:"Ebene ein/ausblenden",lock_layer:"Ebene sperren/entsperren",edit_name:"Name der Ebene \xe4ndern",insert_selection:"Auf dem Board markierte Elemente in die aktive Ebene verschieben"},move_to_organization_title:"Zu Organisation verschieben",move_to_organization_sub_title:"Teile das Board mit Mitgliedern einer Organisation",move_to_organization_desc:"Du kannst dieses Board in eine Organisation verschieben, um es mit Mitgliedern zu teilen. User, die direkt auf das Board berechtigt, aber keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben",timer:{modal_header:"Timer einstellen",hint:"Neue Timer Funktion! Ein laufender Timer ist f\xfcr alle User auf dem Board sichtbar. Der Ersteller des Timers kann ihn pausieren und stoppen."}},organisation:{switch_hint_header:"Neu: Organisationen",switch_hint:"\xdcber eine Organisation kann das Board und User Kontingent eines Accounts mit anderen Usern geteilt werden. Mitglieder k\xf6nnen Boards direkt miteinander teilen. \xdcber die Sidebar hast du Zugriff auf das Setup.",switch_hint_ok:"Alles klar",create_btn:"Organisation erstellen",name:"Name der Organisation",not_explicit:"Erstelle eine Organisation um Mitarbeiter oder Teamkollegen einzuladen, die dein Board und User Kontingent mit nutzen k\xf6nnen.",no_member_quota:"Du kannst keine weiteren User in deine Organisation einladen, da dein Kontingent ersch\xf6pft ist. Du ben\xf6tigst ein Upgrade.",no_admin:"Du bist kein Administrator f\xfcr diese Organisation und hast keinen Zugiff auf die Userverwaltung",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User von der Organisation entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich von der Organisation entfernt werden?',remove_user_confirm_button:"Entfernen",send_invitation:"Einladung senden",open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",promote_to_admin:"Zum Admin ernennen",demote_to_member:"Admin Berechtigung entziehen",promote_to_member:"Zum Mitglied ernennen",member:"Mitglieder",guests:"G\xe4ste",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},joined:{title:"Organisation beigetreten",details:"Du bist der Organisation {{name}} beigetreten."}},team:{overview_add:"Add Team",add:"Neues Team",team_name:"Teamname",team_description:"Teambeschreibung",add_user:"Add User",invite_user:"User einladen",user_email:"Email-Adresse des Users",remove_user_confirm_title:"User vom Team entfernen?",remove_user_confirm_text:'Soll der User "{{user_name}}" wirklich vom Team entfernt werden?',remove_user_confirm_button:"Entfernen",remove_board_confirm_title:"Team vom Board entfernen?",remove_board_confirm_text:'Soll das Team wirklich vom Board "{{board_name}}" entfernt werden?',remove_board_confirm_button:"Entfernen",joined:{title:"Team beigetreten",details:"Du bist dem Team {{team}} beigetreten."},add_to_board:"Team Zugriff auf {{board_name}} einrichten.",grant_access:"Team Zugriff einrichten.",choose:"W\xe4hle ein Team ...",choose_board:"W\xe4hle ein Board ...",remove_from_board_confirm_title:"Team vom Board entfernen?",remove_from_board_confirm_text:'Soll das Team "{{team_name}}" wirklich vom Board entfernt werden?',remove_team_confirm_title:"Team entfernen?",remove_team_confirm_text:'Soll das Team "{{team_name}}" wirklich entfernt werden?',open_invitations:"Offene Einladungen",empty_invitations:"Es gibt keine offenen Einladungen",error_loading_invitations:"Beim Laden der Einladungen ist ein Fehler aufgetreten. Bitte sp\xe4ter erneut probieren.",send_invitation:"Einladung senden",notify:{invitation_resend:{success:{title:"Einladung erneut gesendet",msg:"Die Einladung wurde erneut versendet an: {{email}}"}},invitation_revoke:{success:{title:"Einladung widerrufen",msg:"Die Einladung wurde widerrufen."}}},no_teams:"Du hast noch keine Teams angelegt. Nutze Teams um Arbeitsgruppen zu organisieren und mehreren Usern gleichzeitig Berechtigungen auf Boards zu geben.",move_to_organization_title:"Zu Organisation verschieben",move_to_organization_desc:"Du kannst dieses Team in eine Organisation verschieben. Mitglieder des Teams, die keine Mitglieder der Organisation sind, werden als G\xe4ste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.",move_to_organization_select:"W\xe4hle eine Organisation",move_to_organization_submit:"Verschieben"},user:{profile_headline:"{{user_name}}",profile_subline:"Benutzerprofil bearbeiten",quota_reached:"Die maximale Anzahl an Boards ist erreicht. Deine Organization ben\xf6tigt ein Upgrade.",quota_reached_user:"Die maximale Anzahl an Boards ist erreicht. Du ben\xf6tigst ein Upgrade.",quota_reached_guest:"Du bist Gast in der aktuellen Organization und kannst keine Boards erstellen.",team_quota_reached:"Du hast die maximale Anzahl an Teams erreicht. Mit einem Free Account ist 1 Team m\xf6glich. Nach Abschluss der Betaphase wird es die M\xf6glichkeit f\xfcr ein Upgrade auf eine Basic oder Pro Subscription geben.",form:{labels:{display_name:"Anzeigename",email:"E-Mail",company:"Firma",position:"Position",password1:"Passwort",password2:"Passwort (Wiederholen)"},fields:{display_name:"Mein Anzeige Name",email:"ich@firma.de",company:"Meine Firma",position:"Entwickler / CEO / Manager"}},avatar_upload:{select_photo:"Foto ausw\xe4hlen",drag_and_drop_info:"Bilder in diesen Bereich ziehen oder hier klicken",upload_failed_title:"Upload fehlgeschlagen",upload_failed_text:"Profilbild konnte nicht aktualisiert werden.",deletion_failed_title:"L\xf6schung fehlgeschlagen",deletion_failed_text:"Profilbild konnte nicht gel\xf6scht werden."},change_password:{passwords_not_matching_title:"Passw\xf6rter stimmen nicht \xfcberein",passwords_not_matching_text:"Die eingegebenen Passw\xf6rter stimmen nicht \xfcberein. Bitte versuche es erneut."}},history:{today:"Heute",yesterday:"Gestern",twoDaysAgo:"Vor 2 Tagen",threeDaysAgo:"Vor 3 Tagen",fourDaysAgo:"Vor 4 Tagen",fiveDaysAgo:"Vor 5 Tagen",sixDaysAgo:"Vor 6 Tagen",lastWeek:"Letzte Woche",twoWeeksAgo:"Vor 2 Wochen",threeWeeksAgo:"Vor 3 Wochen",fourWeeksAgo:"Vor 4 Wochen",lastMonth:"Letzten Monat",older:"\xc4lter"},feedback:{info_text:"F\xfcr den Austausch mit der Community steht ein Chat auf Gitter bereit. Dort lassen sich Fragen kl\xe4ren, Ideen diskutieren und Probleme analysieren. Zus\xe4tzlich steht ein Issue Tracker auf Github bereit, wo Feature Requests und Bugs gemeldet werden k\xf6nnen.",direct_msg:"M\xf6chtest du uns lieber ein direktes Feedback schreiben, kannst du unser Feedback Formular nutzen. Deine Nachricht wird in dem Fall nicht ver\xf6ffentlicht.",header:"Wir freuen uns auf dein Feedback",placeholder:"Deine Nachricht an uns",send:"Nachricht senden"},subscribe:{betaModal:{header:"Beta Phase",content:"In der Free Version werden deine Boards im Local Storage deines Browsers gespeichert. Du solltest deine Arbeit regelm\xe4\xdfig exportieren, damit sie nicht verloren geht! Die prooph board SaaS Version befindet sich aktuell in der Betaphase und wird von ausgew\xe4hlten Teams getestet. In K\xfcrze aktivieren wir das Subscription-Modell und erm\xf6glichen weiteren Teams Zugriff zur SaaS Variante, die prooph board unter anderem um Team Kollaboration und Cloud Speicher erweitert. Willst du schon jetzt diese Features nutzen oder bist an einem Workshop oder Training interessiert, sende uns bitte eine Email an contact@prooph.de. Wir freuen uns auf deine Anfrage!"}}}}},en:{translation:{app:{title:"React + Redux + Semantic UI Skeleton",welcome:"Welcome to React + Redux + Semantic UI Skeleton",topmenu:{profile:"Profil"},form:{rename:"Rename",save:"Save",change:"Change",cancel:"Cancel",confirm:"Confirm",delete:"Delete",remove:"Remove",upload:"Upload",resend:"Resend",revoke:"Revoke",reset:"Reset",yes:"Yes",no:"No",back:"Back",generateTemplate:"Generate template"},showLess:"Show less",showAll:"Show all",open:"Open",learnMore:"Learn more",stickyTypes:{event:"Event",command:"Command",aggregate:"Aggregate",document:"Information",role:"Role",hotSpot:"Hot Spot",ui:"UI / API",externalSystem:"External System",boundedContext:"Bounded Context",feature:"Feature",edge:"Connector",policy:"Policy",freeText:"Text",textCard:"Text",icon:"Icon",image:"Image"}},insp:{hint:{learn_more:"Learn more",got_it:"Got it",new_logo_header:"New Logo",new_logo_text:"InspectIO becomes prooph board",new_domain_header:"New Logo",new_domain_text:"InspectIO becomes prooph board and is now available at https://prooph-board.com."},overview:{all_boards:"My Boards",add_board:"Add Board",last_modified:"Last modified",fetch_board_error:"Technical error when loading the board. Please try again later or contact support.",shared_board:"This is a shared board. You cannot edit the settings."},sidebar:{element_details:{json_invalid_title:"Schema Invalid",json_invalid_text:"The Payload-Schema is not a valid JSON document",no_element_selected:"Select an element on the board to edit its metadata.",update_similar_elements_text:"The board contains {{number}} similar cards of same type and with same name.",update_similar_elements_link:"Click here, to update them all."},no_boards_left_warning:"No boards left",boards_left_warning:"Only {{board_count}} board left",boards_left_warning_upgrade:"Your organization needs an upgrade."},top_menu:{activity:"Activity",element_details:"Metadata",import_board:"Import Board",export_board:"Export Board",activate_lite_mode:"Activate Lite Mode for extra performance on large boards and during video calls.",lite_mode_is_active:"Lite Mode is active.",lite_mode_is_active_details:"Elements don't hide when zoomed out and font scaling is deactivated to save CPU time."},collaboration_modal:{header_team:"Team Collaboration",header_history:"Change History",text:"Unfortunately, this function is not available in the free version."},board:{add:"New Board",import:"Import Board",import_existing_board:'A board with name "%name%" already exists. You can override the existing one or import a copy. What do you want to do?',btn_replace_board:"Override Board",btn_import_as_new:"Import copy",edit_header:"Manage your preferences",edit:"%name%",share:"Permissions",share_sub:"Invite other people to view and/or edit your board.",delete_txt1:"If you don't need the board anymore, you can ",delete_link:"delete",delete_txt2:" it here.",really_delete:"Please confirm deletion by entering the board name. This action cannot be undone!",form:{board_name:"Board Name",btn_add_save:"Let's go",btn_share:"Share",btn_send_invitation:"Send Invitation",btn_send:"Send",email:"email",team_name:"Team Name"},invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from board?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the board?',joined:{title:"Board Access",details:"You now have access to board: {{name}}."},upload:{select_image:"Select an image",drag_and_drop_info:"Drag 'n' drop a file here, paste from clipboard or click to select one",upload_failed_title:"Upload failed",upload_failed_text:"Image could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Image could not be deleted.",paste_failed:"Paste failed",invalid_file_pasted:"Could not find any jpeg/png files in the clipboard."},link:{headline:"Link to Board",select_board:"Select a Board",select_event:"Select an Event"},tasklink:{headline:"Link to Task"},notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation was resent successfully"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked"}}},client:{headline:"Board API",description:"Configure your board client in order to access its content from your own service.",notConfigured:"There is currently no external API client configured for this board.",createClient:"Click here to create one",clientId:"Client-Id",clientSecret:"Client-Secret",retrieveSecret:"Click here to retrieve",createConfirmTitle:"Create an API-Client for the board",createConfirmText:"Do you really want to create a new API-Client for this board? You should only do so if you intend to use the API to access board information from an external service.",resetConfirmTitle:"Reset the Client-Secret",resetConfirmText:"Do you really want to reset the Client-Secret for this board? The old Client-Secret will be rendered invalid and cannot be used to access the API anymore.",removeConfirmTitle:"Remove the Client-Secret",removeConfirmText:"Do you really want to remove your client? Be aware that any services relying on this client will loose access to the board.",removeText:"If you do not need your client anymore you can remove it here. Be aware that any services relying on this client will loose access to the board.",copyToClipboard:"Copy to Clipboard"},sticky_templates:{headline:"Card Templates",description:"Set a metadata template for each card type",advanced_config:"Advanced Config",upload_info:"Drop a JSON-Schema file (.json) or click here to open the upload dialog",uploaded_schema_invalid_title:"Uploaded file invalid",uploaded_schema_invalid_text:"The uploaded file is not a valid schema file."},layers:{moved_to_sidebar_header:"Layers are now part of the sidebar",moved_to_sidebar_details:"We've moved the layer functionality into the left sidebar for more overview and quicker access. You can read more about the changes in our Wiki. The menu entry will be removed soon.",moved_to_sidebar_wiki_text:"Here you can find the wiki page",delete_confirmation:"Really?",add_layer:"Add layer",set_global_visibility:"Share your layer visibility settings with all",refresh_layers:"Refresh tree with latest board changes",folder_title:"Single click opens the layer and marks it as active.\nDouble click opens the edit menu.",delete_layer:"Delete layer",visibility:"Show/hide layer",lock_layer:"Lock/unlock layer",edit_name:"Change layer name",insert_selection:"Move selected elements into active layer"},move_to_organization_title:"Move To Organization",move_to_organization_sub_title:"Share the board with organization members",move_to_organization_desc:"You can move this board to an organization to share it with members. Users who are not member of the organization but have direct access to the board, are registered as guests in the organization. This requires enough user quota, otherwise they will loose access to the board.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move",timer:{modal_header:"Set Timer",hint:"New timer feature! A running timer is visible for everybody on the board. The creator of a timer is able to pause and stop it."}},organisation:{switch_hint_header:"New: Organizations",switch_hint:"An organization allows to share your board and user quota with others. Members of an organization can share boards directly. In the sidebar you can switch to another organization or create your own.",switch_hint_ok:"Got It",create_btn:"Create Organisation",name:"Name of the organisation",not_explicit:"Create an organisation and invite colleagues to share your board and user quota with them.",no_member_quota:"The organisation user quota is reached. If you want to invite more users, please upgrade your subscription.",no_admin:"Access denied to organisation management. You're missing administration rights.",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from organisation?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the organisation?',remove_user_confirm_button:"Remove",send_invitation:"Send Invitation",open_invitations:"Open Invitations",empty_invitations:"No open invitations",promote_to_admin:"Promote to admin",demote_to_member:"Demote to member",promote_to_member:"Promote to member",member:"Member",guests:"Guests",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},joined:{title:"Organisation joined",details:"You joined the organisation {{name}}."}},team:{overview_add:"Add Team",add:"New Team",team_name:"Team name",team_description:"Team Description",add_user:"Add User",invite_user:"Invite User",user_email:"Email Address of User",remove_user_confirm_title:"Remove user from team?",remove_user_confirm_text:'Do you really want to remove the user "{{user_name}}" from the team?',remove_user_confirm_button:"Remove",remove_board_confirm_title:"Remove team from board?",remove_board_confirm_text:'Do you really want to remove the team from board "{{board_name}}"?',remove_board_confirm_button:"Remove",joined:{title:"Team joined",details:"You joined the team {{team}}."},add_to_board:"Set up team access to {{board_name}}.",grant_access:"Set up team access.",choose:"Choose a team ...",choose_board:"Choose a board ...",remove_from_board_confirm_title:"Remove team from board?",remove_from_board_confirm_text:'Do you really want to remove the team "{{team_name}}" from the board?',remove_team_confirm_title:"Remove team?",remove_team_confirm_text:'Do you really want to remove the team "{{team_name}}"?',open_invitations:"Open Invitations",empty_invitations:"No open invitations",error_loading_invitations:"Failed to load invitations. Please try again later.",send_invitation:"Send Invitation",notify:{invitation_resend:{success:{title:"Invitation sent",msg:"Invitation sent again to: {{email}}"}},invitation_revoke:{success:{title:"Invitation revoked",msg:"The invitation has been revoked."}}},no_teams:"You did not create a team yet. Use teams to organise working groups and assign board permissions to many users at once.",move_to_organization_title:"Move To Organization",move_to_organization_desc:"You can move this team to an organization. Users who are not already member of the organization will be registered as guests. This requires enough user quota, otherwise they will be removed from the team.",move_to_organization_select:"Select organization",move_to_organization_submit:"Move"},user:{profile_headline:"{{user_name}}",profile_subline:"Edit User Profile",quota_reached:"The board quota is reached. Your organization needs an upgrade.",quota_reached_user:"The board quota is reached. You need an upgrade.",quota_reached_guest:"You're guest of the active organization. Guests are not allowed to create organization boards.",team_quota_reached:"The team quota is reached. With a free account you can have 1 team maximum. After our beta phase you can upgrade to a basic or professional subscription and increase the quota.",form:{labels:{display_name:"Display Name",email:"E-Mail",company:"Company",position:"Job Title",password1:"Password",password2:"Password (re-enter)"},fields:{display_name:"your display name",email:"my@company.com",company:"My Company",position:"Developer / CEO / Manager"}},avatar_upload:{select_photo:"Select a Photo",drag_and_drop_info:"Drag 'n' drop some files here, or click to select files",upload_failed_title:"Upload failed",upload_failed_text:"Profile picture could not be updated.",deletion_failed_title:"Deletion failed",deletion_failed_text:"Profile picture could not be deleted."},change_password:{passwords_not_matching_title:"Passwords do not match",passwords_not_matching_text:"The passwords you entered do not match, please try again."}},history:{today:"Today",yesterday:"Yesterday",twoDaysAgo:"2 days ago",threeDaysAgo:"3 days ago",fourDaysAgo:"4 days ago",fiveDaysAgo:"5 days ago",sixDaysAgo:"6 days ago",lastWeek:"Last week",twoWeeksAgo:"2 weeks ago",threeWeeksAgo:"3 weeks ago",fourWeeksAgo:"4 weeks ago",lastMonth:"Last month",older:"Older"},feedback:{info_text:"If you want to chat with us and other community members about prooph board you can join our Gitter Chat. Feature requests and bugs can also be submitted to our public Github issue tracker.",direct_msg:"To send us a direct message you can use the feedback form below. In this case we don't publish your message.",header:"Looking forward to your feedback",placeholder:"Your feedback",send:"Send message"},subscribe:{betaModal:{header:"Beta Phase",content:"The free version of prooph board saves all boards in your browser's local storage. Make sure to regularly export your work to avoid losing it! The prooph board SaaS version is currently beta. Selected teams are testing it right now. We will activate our subscription model soon that enables more teams to use advanced features like team collaboration and cloud storage. If you can't wait or looking for prooph board training, please send an email to contact@prooph.de. We're looking forward to hear from you!"}}}}}}}},[[607,2,1]]]);
//# sourceMappingURL=main.9074b556.chunk.js.map