{"version":3,"sources":["../node_modules/typescript/lib sync","theme/img/cody.svg","theme/img/inspect-avatar.png","theme/img/prooph-software-logo-icon.png","api/ConfiguredJwtVerify.ts","api/ConfiguredAxios.ts","api/ConfiguredSocket.ts","api/util.ts","i18n.tsx","core/hooks/useOnBodyClick.ts","NotificationSystem/model/NotificationMessage.ts","NotificationSystem/actions/constants.ts","NotificationSystem/actions/commands.ts","NotificationSystem/actions/events.ts","NotificationSystem/components/Notifications.tsx","NotificationSystem/selectors/message.ts","NotificationSystem/containers/NotificationsContainer.tsx","routes.ts","User/actions/constants.ts","User/actions/commands.ts","User/actions/api.ts","User/actions/events.ts","api/constants.ts","api/actions.ts","api/MessageBox.ts","User/actions/queries.ts","User/model/Account.ts","core/validation/either.ts","core/validation/predicates.ts","User/model/IioUserInfo.ts","User/model/Role.ts","User/model/RoleMap.ts","User/model/UserInfo.ts","User/saga/LazyLoadInspectioUserInfo.ts","Organization/actions/api.ts","Organization/model/OrganizationInvitation.ts","Organization/actions/constants.ts","Organization/actions/commands.ts","Organization/actions/events.ts","Organization/actions/queries.ts","Organization/model/Organization.ts","Organization/model/UserOrganizationInfo.ts","core/reducer/applyAggregateChanged.ts","Organization/reducers/applyOrganizationEvents.ts","Organization/reducers/applyOrganizationInvitationEvents.ts","Organization/reducers/applyUserOrganizationInfoEvents.ts","Organization/reducers/index.ts","Organization/sagas/demoteUserToOrganizationMember.ts","Organization/sagas/fetchOrganizationFlow.ts","Organization/sagas/fetchUserOrganizations.ts","Organization/sagas/inviteUserToOrganization.ts","Organization/sagas/promoteUserToOrganizationAdmin.ts","Organization/sagas/removeGuestFromOrganization.ts","Organization/sagas/removeUserFromOrganization.ts","Organization/sagas/renameOrganization.ts","Organization/sagas/resendUserOrganizationInvitation.ts","Organization/sagas/revokeUserOrganizationInvitation.ts","Organization/sagas/setUpExplicitOrganization.ts","Organization/sagas/turnGuestIntoMember.ts","Organization/index.ts","User/saga/switchActiveOrganization.ts","User/selectors/iioUserInfo.ts","User/saga/SyncUsernameFlow.ts","User/saga/UpdateProfileFlow.tsx","User/saga/UpsertUserSettingFlow.ts","Organization/selectors/selectOrganization.ts","InspectioBoards/model/Graph.ts","standalone/storage/StandaloneIndexedDB.ts","standalone/storage/StandaloneStorageManager.ts","standalone/util.ts","User/selectors/currentUser.ts","User/components/UserAvatarUploadModal.tsx","User/components/UserProfileEditForm.tsx","User/components/UserProfilePaswordForm.tsx","User/components/UserProfile.tsx","InspectioBoards/actions/constants.ts","InspectioBoards/actions/api.ts","InspectioBoards/actions/commands.ts","InspectioBoards/actions/events.ts","InspectioBoards/actions/queries.ts","InspectioBoards/model/BoardVersion.ts","InspectioBoards/model/Board.ts","InspectioBoards/model/HistoryEntry.ts","InspectioBoards/model/BoardGraphElement.ts","InspectioBoards/model/BoardChanged.ts","InspectioBoards/model/BoardInvitation.ts","InspectioBoards/model/BoardPermissionForTeam.ts","InspectioBoards/model/BoardPermissionForUser.ts","InspectioBoards/model/BoardSnapshot.ts","InspectioBoards/components/AddBoardForm.tsx","InspectioBoards/components/constants.ts","Organization/selectors/selectUserOrganizationInfo.ts","Socket/actions/constants.ts","Socket/actions/actions.ts","Socket/model/Status.ts","Auth/actions/constants.ts","Auth/actions/commands.ts","Auth/actions/events.ts","Auth/sagas/tokenRefreshFlow.ts","Auth/selectors/auth.ts","Socket/sagas/socketFlow.ts","InspectioTeams/model/TeamInvitation.ts","Socket/selectors/status.ts","User/selectors/userSettings.ts","InspectioBoards/selectors/board.ts","InspectioBoards/model/HistoryState.ts","InspectioBoards/selectors/boardHistory.ts","InspectioBoards/selectors/boardList.ts","InspectioBoards/containers/AddBoardContainer.tsx","InspectioBoards/components/AddBoard.tsx","InspectioBoards/components/AddBoardButton.tsx","InspectioBoards/components/AddBoardCard.tsx","InspectioBoards/components/BoardCard.tsx","core/dateTime.ts","InspectioBoards/components/LoadingBoardCard.tsx","InspectioBoards/components/NewDomainModal.tsx","InspectioBoards/components/StandaloneExampleBoardCard.tsx","InspectioBoards/containers/BoardOverviewContainer.tsx","InspectioBoards/components/BoardOverview.tsx","InspectioBoards/components/ConfirmBoardDeletionForm.tsx","InspectioBoards/selectors/boardClient.ts","InspectioBoards/components/EditBoard/BoardClientConfiguration/BoardClientNotConfiguredMessage.tsx","InspectioBoards/components/EditBoard/BoardClientConfiguration/BoardClientTable.tsx","core/copyToClipboard.ts","InspectioBoards/components/EditBoard/BoardClientConfiguration.tsx","InspectioTeams/actions/api.ts","InspectioTeams/actions/constants.ts","InspectioTeams/actions/commands.ts","InspectioTeams/actions/events.ts","InspectioTeams/model/Team.ts","InspectioTeams/reducers/applyTeamEvents.ts","InspectioTeams/reducers/applyTeamInvitationEvents.ts","InspectioTeams/reducers/index.ts","InspectioTeams/sagas/loadUserTeams.ts","InspectioTeams/sagas/addTeam.ts","InspectioTeams/sagas/adminGrantTeamAccessToBoard.ts","InspectioTeams/selectors/selectTeam.ts","InspectioTeams/sagas/changeTeamDescription.ts","InspectioTeams/sagas/deleteTeam.ts","InspectioTeams/sagas/inviteUserToTeam.ts","InspectioTeams/sagas/removeMemberFromTeam.ts","InspectioTeams/sagas/renameTeam.ts","InspectioTeams/selectors/TeamInvitation.ts","InspectioTeams/sagas/resendTeamInvitation.ts","InspectioTeams/sagas/revokeTeamInvitation.ts","InspectioTeams/sagas/refreshUserTeams.ts","InspectioTeams/sagas/moveTeamToOrganization.ts","InspectioTeams/index.ts","InspectioBoards/selectors/boardPermission.ts","InspectioBoards/components/EditBoard/BoardPermissionsForTeamsTableEntry.tsx","InspectioBoards/components/EditBoard/BoardPermissionsForTeamsTable.tsx","InspectioBoards/components/EditBoard/BoardPermissionsTableEntry.tsx","InspectioBoards/components/EditBoard/BoardPermissionsTable.tsx","core/components/SecondaryButton/index.tsx","User/components/UserAvatar.tsx","InspectioBoards/selectors/boardInvitation.ts","InspectioBoards/components/EditBoard/OpenBoardInvitationsTableEntry.tsx","InspectioBoards/components/EditBoard/OpenBoardInvitationsTable.tsx","InspectioBoards/components/EditBoard/ShareBoardForm.tsx","InspectioBoards/components/EditBoard/ShareBoardWithTeamForm.tsx","core/readFile.ts","InspectioBoards/components/EditBoard/BoardPermissionsMenu.tsx","InspectioBoards/model/StickyTemplate.ts","InspectioBoards/model/DefaultStickyTemplate.ts","InspectioBoards/selectors/StickyTemplate.ts","InspectioBoards/hooks/useGraph.tsx","InspectioBoards/service/Cody/Command.ts","InspectioBoards/service/Cody/Event.ts","core/convertJsonSchemaToEditorValue.ts","core/components/CodeEditor/CodeEditor.tsx","InspectioBoards/components/EditBoard/BoardStickyConfiguration/BoardStickySchemaEditor.tsx","InspectioBoards/components/EditBoard/BoardStickyConfiguration/BoardStickyAdvancedConfig.tsx","theme/palette.ts","InspectioBoards/components/CellIcon.tsx","InspectioBoards/components/EditBoard/BoardStickyConfiguration/BoardStickySelection.tsx","InspectioBoards/components/EditBoard/BoardStickyConfiguration/BoardStickyTemplateEditor.tsx","InspectioBoards/components/EditBoard/BoardStickyTemplates.tsx","InspectioBoards/components/EditBoardForm.tsx","InspectioBoards/components/EditBoard/MoveBoardMenu.tsx","InspectioBoards/containers/EditBoardContainer.tsx","InspectioBoards/components/EditBoard.tsx","InspectioBoards/service/Cody.ts","InspectioBoards/model/BoardTimer.ts","InspectioBoards/service/RemoteMouseSync.ts","api/ConfiguredJitsiSocket.ts","InspectioBoards/selectors/boardGraphElement.ts","InspectioBoards/components/MxGraphBoardLink.tsx","core/imageCrop.ts","InspectioBoards/components/MxGraphImageUpload.tsx","InspectioBoards/components/MxGraphTaskLink.tsx","InspectioBoards/components/OpenVidu/JitsiJoinMeetingDialog.tsx","api/ConfiguredViduSocket.ts","InspectioBoards/components/OpenVidu/JitsiVideo.tsx","InspectioBoards/components/OpenVidu/JitsiMeeting.tsx","Layout/actions/constants.ts","Layout/reducers/applySidebarActions.ts","Layout/selectors/sidebar.ts","InspectioBoards/components/OpenVidu/JitsiMeetingLobby.tsx","InspectioBoards/components/OpenVidu/JoinMeetingDialog.tsx","api/ConfiguredViduApi.ts","InspectioBoards/hooks/useMouseSync.ts","InspectioBoards/components/OpenVidu/OpenViduVideo.tsx","InspectioBoards/components/OpenVidu/OpenViduScreenShare.tsx","InspectioBoards/components/OpenVidu/Meeting.tsx","InspectioBoards/components/OpenVidu/MeetingLobby.tsx","InspectioBoards/components/MxGraphBoard.tsx","InspectioBoards/components/MxGraphBoard/initializeGraphEditor.ts","InspectioBoards/containers/MxGraphBoardContainer.tsx","InspectioBoards/sagas/adminChangeTeamBoardPermissions.ts","InspectioBoards/sagas/changeBoardPermissionsFlow.ts","core/localStorage.ts","InspectioBoards/sagas/deleteBoardFlow.ts","InspectioBoards/sagas/fetchBoardClientFlow.ts","InspectioBoards/sagas/fetchBoardGraphElementsFlow.ts","InspectioBoards/sagas/fetchBoardPermissionsFlow.ts","InspectioBoards/sagas/fetchBoardStickyTemplates.ts","InspectioBoards/sagas/fetchOpenBoardInvitationsFlow.ts","InspectioBoards/sagas/fetchUserBoardFlow.ts","User/model/UserSettings.ts","User/saga/LoadUserSettingsFlow.ts","InspectioBoards/sagas/fetchUserBoardsFlow.ts","InspectioBoards/sagas/importExistingBoardFlow.ts","InspectioBoards/sagas/importNewBoardFlow.ts","InspectioBoards/sagas/importStickyTemplates.ts","InspectioBoards/sagas/installUserBoardFlow.ts","InspectioBoards/sagas/prepareBoardHistoryFlow.ts","InspectioBoards/sagas/loadBoardHistoryFlow.ts","InspectioBoards/sagas/moveUserBoardToOrganization.ts","InspectioBoards/sagas/renameBoardFlow.ts","InspectioBoards/sagas/resendBoardInvitationFlow.ts","InspectioBoards/sagas/revokeAccessToBoardFlow.ts","InspectioBoards/sagas/revokeBoardInvitationFlow.ts","InspectioBoards/sagas/saveBoardFlow.ts","InspectioBoards/sagas/shareBoardFlow.ts","Layout/actions/commands.ts","InspectioBoards/sagas/syncElementsTreeFlow.ts","InspectioBoards/sagas/syncFlow.ts","InspectioBoards/sagas/updateStickyTemplate.ts","InspectioBoards/index.ts","InspectioTeams/components/TeamOverview.tsx","InspectioBoards/components/MaxLengthLabel.tsx","InspectioBoards/components/BoardHistoryEntry.tsx","InspectioBoards/components/BoardHistoryGroup.tsx","InspectioBoards/components/BoardHistory.tsx","InspectioBoards/components/BoardInvitation.tsx","InspectioTeams/components/TeamInvitation.tsx","InspectioTeams/components/AddBoardToTeamModal.tsx","InspectioTeams/components/BoardEntry.tsx","core/components/EditableTextline/index.tsx","InspectioTeams/components/EditableTeamHeader.tsx","InspectioTeams/components/OpenInvitation.tsx","InspectioTeams/components/OpenInvitationList.tsx","InspectioTeams/components/InviteUserToTeamModal.tsx","InspectioTeams/components/MemberEntry.tsx","InspectioTeams/components/MoveTeamMenu.tsx","InspectioTeams/components/TeamCard.tsx","InspectioTeams/components/AddTeamCard.tsx","InspectioTeams/components/JoinedTeamCard.tsx","InspectioTeams/components/TeamOverview/TeamTab.tsx","Layout/Sidebar/SharedBoardsItem.tsx","User/components/TopmenuLiteMode.tsx","InspectioBoards/components/BoardTopMenu.tsx","InspectioBoards/components/InviteUserToBoardModal.tsx","InspectioBoards/components/ShareBoardButton.tsx","User/components/TopmenuAvatar.tsx","Layout/Breadcrumb/BoardCrumb.tsx","Layout/Breadcrumb/BoardOverviewCrumb.tsx","Layout/Breadcrumb/OrganizationOverviewCrumb.tsx","Layout/Breadcrumb/TeamOverviewCrumb.tsx","Layout/Breadcrumb/UpdatesCrumb.tsx","Layout/Breadcrumb/UserProfileCrumb.tsx","Layout/TopMenu.tsx","InspectioBoards/components/BoardQuotaReachedModal.tsx","Layout/Sidebar/AddBoard.tsx","InspectioTeams/components/AddTeamToBoardModal.tsx","Layout/Sidebar/BoardListItem.tsx","Layout/Sidebar/ImportBoard.tsx","Layout/Sidebar/ShowMoreBoardsItem.tsx","Layout/Sidebar/BoardList.tsx","Layout/Sidebar/BoardOverview.tsx","Feedback/components/FeedbackModal.tsx","Layout/Sidebar/Feedback.tsx","Feedback/actions/api.ts","InspectioBoards/components/MxGraphBoardSearch.tsx","InspectioBoards/components/CodyConsole/UserInput.tsx","Layout/Sidebar/Logo.tsx","InspectioBoards/components/BoardOverviewSearch.tsx","InspectioBoards/model/ElementsTree.ts","InspectioBoards/selectors/elementsTree.ts","Layout/Sidebar/Search.tsx","Updates/components/UpdateListEntry.tsx","Updates/components/UpdatePage.tsx","Layout/Sidebar/Updates.tsx","Layout/Sidebar/Upgrade.tsx","standalone/components/Layout/Sidebar/OverviewSidebar.tsx","InspectioBoards/components/LeafIcon.tsx","InspectioBoards/components/BoardTreeView/BoardLayer.tsx","InspectioBoards/components/BoardTreeView/BoardTreeLeaf.tsx","InspectioBoards/components/BoardTreeView/BoardTree.tsx","InspectioBoards/components/BoardTreeView.tsx","standalone/components/Layout/Sidebar/WorkspaceSidebar.tsx","Layout/Sidebar/CollapseToggle.tsx","Layout/Sidebar/AddTeam.tsx","Layout/Sidebar/TeamListItem.tsx","Layout/Sidebar/TeamList.tsx","Layout/Sidebar/TeamOverview.tsx","User/components/SideMenuOrganizationSwitch.tsx","Layout/Sidebar/Organization.tsx","Layout/Sidebar/Copyright.tsx","Layout/Sidebar/OverviewSidebar.tsx","Layout/Sidebar/WorkspaceSidebar.tsx","Layout/Sidebar.tsx","InspectioBoards/selectors/activeGraphElement.ts","InspectioBoards/components/BoardElementDetails/ElementConnections.tsx","InspectioBoards/components/MxGraphBoard/clickRange.ts","InspectioBoards/components/BoardElementDetails/BoardElementMetadata.tsx","InspectioBoards/components/BoardElementDetails.tsx","Organization/components/AcceptOrganizationInvitation.tsx","InspectioBoards/components/CodyConsole/CodyEmoji.tsx","InspectioBoards/components/CodyConsole/CodyMessage.tsx","InspectioBoards/components/CodyConsole/definitions.ts","InspectioBoards/components/CodyConsole/InspectIoMessage.tsx","InspectioBoards/components/CodyConsole/UserMessage.tsx","InspectioBoards/components/CodyConsole.tsx","Organization/selectors/selectOrganizationInvitation.ts","Organization/components/Invitations/OpenOrganizationInvitation.tsx","Organization/components/InviteUserToOrganisationModal.tsx","Organization/components/OrganizationMemberEntry.tsx","Organization/components/OrganisationManagement.tsx","Organization/components/OrganizationOverview.tsx","InspectioBoards/components/BoardImportFromLink.tsx","InspectioBoards/components/MxGraphBoardRedirect.tsx","InspectioBoards/components/MxGraphBoard/BoardTimer.tsx","App.tsx","standalone/components/CollaborationInfoModal.tsx","standalone/components/Layout/BoardTopMenu.tsx","standalone/components/ShareBoardButton.tsx","standalone/components/Layout/TopMenu.tsx","AppStandalone.tsx","Auth/reducers/applyAuth.ts","Auth/reducers/index.ts","InspectioBoards/reducers/applyActiveGraphElementActions.ts","InspectioBoards/reducers/applyBoardActions.ts","InspectioBoards/reducers/applyBoardClientActions.ts","InspectioBoards/reducers/applyBoardGraphElementActions.ts","InspectioBoards/reducers/applyBoardInvitationActions.ts","InspectioBoards/reducers/applyBoardPermissionsForTeamsActions.ts","InspectioBoards/reducers/applyBoardPermissionsForUsersActions.ts","InspectioBoards/reducers/applyElementsTreeActions.ts","InspectioBoards/reducers/applyOverviewActions.ts","InspectioBoards/reducers/manageBoardHistory.ts","InspectioBoards/reducers/manageBoardQueues.ts","InspectioBoards/reducers/StickyTemplate.ts","InspectioBoards/reducers/index.ts","InspectioBoards/reducers/applyLoadingBoards.ts","InspectioBoards/reducers/applyInitialBoardListLoaded.ts","Layout/reducers/index.ts","NotificationSystem/reducers/applyNotify.ts","NotificationSystem/reducers/index.ts","Socket/reducers/applyStatusActions.ts","Socket/reducers/index.ts","User/reducers/applyIioUsersActions.ts","User/reducers/applyUserActions.ts","User/reducers/applyUserSettingsActions.ts","User/reducers/index.ts","reducer.ts","standalone/sagas/deleteBoardFlow.ts","standalone/sagas/fetchBoardStickyTemplates.ts","standalone/sagas/fetchUserBoardsFlow.ts","standalone/sagas/fetchUserBoardFlow.ts","standalone/sagas/importExistingBoardFlow.ts","standalone/sagas/importNewBoardFlow.ts","standalone/sagas/importStickyTemplates.ts","standalone/sagas/installUserBoardFlow.ts","standalone/sagas/loadBoardHistoryFlow.ts","standalone/sagas/saveBoardFlow.ts","standalone/sagas/updateStickyTemplate.ts","standalone/sagas/upsertUserSettingFlow.ts","standalone/sagas/index.ts","saga.ts","configureStore.ts","history.ts","notify.tsx","index.tsx","i18n/index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","__webpack_require__","p","getKey","ConfiguredJwtVerify","token","Promise","reject","jwt","verify","error","verifiedToken","console","log","configuredAxios","axios","create","baseURL","io","path","autoConnect","reconnection","transportOptions","polling","extraHeaders","distributeNewToken","defaults","headers","Authorization","configuredSocket","opts","expiresDate","Date","setTime","getTime","document","cookie","toUTCString","axiosApiPromise","messageName","payload","api","post","then","response","catch","userManagementApiPromise","resources","require","i18n","use","LngDetector","init","detection","order","caches","excludeCacheFor","fallbackLng","debug","react","wait","useOnBodyClick","onClick","useEffect","getElementsByTagName","addEventListener","removeEventListener","defaultMessageProps","title","message","level","position","autoDismiss","dismissible","handled","uid","undefined","action","hideProgressBar","Message","_Record","data","Object","classCallCheck","this","uuid","possibleConstructorReturn","getPrototypeOf","call","inherits","createClass","key","value","set","Record","NOTIFY","notify","info","tOpts","arguments","length","msg","NotificationModel","publishMessageHandled","toast","TYPE","INFO","POSITION","BOTTOM_LEFT","notificationsSelector","state","props","getIn","fromJS","mapStateToProps","getNotifications","createSelector","messages","makeMapStateTopPropsNotifications","currentlyVisible","showUnhandledMessages","onHandled","filter","forEach","includes","push","react_default","a","createElement","t","type","autoClose","onClose","markAsHandled","withNamespaces","compose","connect","dispatch","bindActionCreators","sendNotify","Command","Event","lifecycle","componentDidMount","_ref","componentDidUpdate","_ref2","react_toastify_lib","inspectio","userProfile","compileInspectioBoardWorkspace","boardUid","isInspectioBoardWorkspace","pathname","search","inspectioEditBoard","compileInspectioBoardEdit","BoardRedirect","makeWorkspaceDeeplinkFacory","cellId","getHostUrlPart","concat","window","location","protocol","host","SERVER_CONTEXT","SIGN_IN","FETCH_USER","LOAD_IIO_USERS_INFO","IIO_USERS_INFO_LOADED","USER_SETTINGS_LOADED","USER_SETTING_UPSERTED","UPDATE_PROFILE","UPDATE_PASSWORD","UPSERT_USER_SETTING","SWITCH_ACTIVE_ORGANIZATION","ACTIVE_ORGANIZATION_SWITCHED","signIn","user","updateProfile","successCb","updatePassword","password","upsertUserSetting","switchActiveOrganization","organizationId","getUser","userId","syncUsername","username","email","avatarUrl","name","getInspectioUsersInfo","userIds","getInspectioUserInfoByEmail","getUserSettings","String","displayName","companyName","jobTitle","temporary","uploadAvatar","file","deleteAvatar","delete","iioUsersInfoLoaded","usersInfo","userSettingsLoaded","userSettings","userSettingUpserted","activeOrganizationSwitched","SEND_HTTP_REQUEST","sendHttpRequest","request","responseActionType","metadata","responseAction","webData","resetWebData","getMessageBoxRequestConfig","url","method","Content-Type","JSON","stringify","responseType","fetchUser","ApiAction","loadUsersInfo","TYPE_FREE","TYPE_BASIC","TYPE_PREMIUM","TYPE_CUSTOM","defaultUserProps","accountType","assertAccountType","fromString","Account","fromUserToken","roles","freeAccount","otherAccount","match","replace","isEqualOrBetterThan","other","isFailure","val","tag","isSuccess","Failure","Success","validate","_len","predicates","Array","_key","_i","_ref3","slicedToArray","execValidate","_len2","_key2","apply","exec","func","execForEach","list","newList","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","Symbol","iterator","next","done","item","result","err","return","pipe","_len5","funcs","_key5","_i2","eitherFunc","hasKey","obj","_","isArray","AGGREGATE_TYPE","defaultIioUserInfoProps","anonymous","aggregateType","createIioUserInfoFromServerData","validatedData","IioUserInfo","objectSpread","createAnonymous","generateDefaultAvatarUrl","TYPE_ANONYMOUS","TYPE_USER","TYPE_ADMIN","fromtString","role","Role","anonymousRole","assertRoleType","withAnonymous","RoleMap","roleMap","Map","RoleModel","fromToken","map","isEmpty","has","equals","givenName","familyName","RoleMapModel","account","AccountModel","quota","teamQuota","activeOrganization","signedIn","UserInfo","onLoadUsersInfo","onResponse","lazyLoadInspectioUserInfo","regenerator_default","wrap","_context","prev","Action","sent","stop","LazyLoadInspectioUserInfo_marked","rawUserInfoList","userInfoList","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","rawInfo","_context2","put","NotifyAction","List","t0","finish","_marked2","_context3","take","fork","abrupt","_marked3","Status","installUserOrganization","setUpImplicitOrganization","setUpExplicitOrganization","fetchOrganization","fetchUserOrganizations","inviteUserToOrganization","invitationId","invitedUserEmail","revokeUserOrganizationInvitation","resendUserOrganizationInvitation","acceptInvitationToOrganization","promoteUserToOrganizationAdmin","demoteUserToOrganizationMember","removeUserFromOrganization","renameOrganization","newName","removeGuestFromOrganization","turnGuestIntoMember","guestId","SET_UP_EXPLICIT_ORGANIZATION","EXPLICIT_ORGANIZATION_SET_UP","EXPLICIT_ORGANIZATION_SET_UP_FAILED","INVITE_USER_TO_ORGANIZATION","USER_INVITED_TO_ORGANIZATION","REVOKE_USER_ORGANIZATION_INVITATION","RESEND_USER_ORGANIZATION_INVITATION","USER_ORGANIZATION_INVITATION_REVOKED","USER_ORGANIZATION_INVITATION_RESENT","ACCEPT_INVITATION_TO_ORGANIZATION","INVITATION_TO_ORGANIZATION_ACCEPTED","PROMOTE_USER_TO_ORGANIZATION_ADMIN","USER_PROMOTED_TO_ORGANIZATION_ADMIN","DEMOTE_USER_TO_ORGANIZATION_MEMBER","USER_DEMOTED_TO_ORGANIZATION_MEMBER","REMOVE_USER_FROM_ORGANIZATION","USER_REMOVED_FROM_ORGANIZATION","FETCH_ORGANIZATION","ORGANIZATION_FETCHED","FETCH_USER_ORGANIZATIONS","USER_ORGANIZATIONS_FETCHED","RENAME_ORGANIZATION","ORGANIZATION_RENAMED","REMOVE_GUEST_FROM_ORGANIZATION","GUEST_REMOVED_FROM_ORGANIZATION","TURN_GUEST_INTO_MEMBER","GUEST_TURNED_INTO_MEMBER","organizationFetched","organization","explicitOrganizationSetUp","explicitOrganizationSetUpFailed","userOrganizationsFetched","userOrganizations","userInvitedToOrganization","userOrganizationInvitationRevoked","invitation","userOrganizationInvitationResent","invitationToOrganizationAccepted","userPromotedToOrganizationAdmin","userDemotedToOrganizationMember","userRemovedFromOrganization","organizationRenamed","guestRemovedFromOrganization","guestTurnedIntoMember","defaultOrganizationInvitationProps","status","open","createOrganizationInvitation","OrganizationInvitation","createOrganizationInvitationFromServerData","defaultOrganizationProps","ownerId","explicit","memberQuota","boardQuota","members","admins","boards","guests","invitations","createOrganizationFromServerData","Organization","admin","self","get","adminId","memberId","newGuests","guest","newMembers","defaultUserOrganizationInfoProps","organizationName","ownOrganization","explicitOrganization","userIsAdmin","userIsGuest","createUserOrganizationInfoFromServerData","UserOrganizationInfo","addAggregate","ar","updateAggregate","removeAggregate","remove","upsertAggregates","arList","toArray","removeAllAggregates","initialState","inspectioOrganizationsReducer","combineReducers","event","implOrga","resetOrga","renamedOrga","handleDemoteUserToOrganizationMember","command","Api","select","makeOrganizationSelector","demoteToMember","demoteUserToOrganizationMember_marked","Type","demoteUserToOrganizationMember_marked2","fetchOrganizationFlow","onFetchOrganization","mark","UserAction","Query","toConsumableArray","toJS","fetchOrganizationFlow_marked","handleFetchUserOrganizations","implicitOrgaSetup","query","installResponse","organizations","updatedCurrentUser","v4","UserModule","makeGetCurrentUser","count","first","fetchUserOrganizations_marked","fetchUserOrganizations_marked2","handleInviteUserToOrganization","inviteUser","inviteUserToOrganization_marked","inviteUserToOrganization_marked2","handlePromoteUserToOrganizationAdmin","promoteAdmin","promoteUserToOrganizationAdmin_marked","promoteUserToOrganizationAdmin_marked2","handleRemoveGuestFromOrganization","removeGuest","removeGuestFromOrganization_marked","removeGuestFromOrganization_marked2","handleRemoveUserFromOrganization","removeUser","removeUserFromOrganization_marked","removeUserFromOrganization_marked2","handleRenameOrganization","withNewName","renameOrganization_marked","renameOrganization_marked2","handleResendUserOrganizationInvitation","resendUserOrganizationInvitation_marked","resendUserOrganizationInvitation_marked2","handleRevokeUserOrganizationInvitation","revoked","revokeInvitation","revokeUserOrganizationInvitation_marked","revokeUserOrganizationInvitation_marked2","handleSetUpExplicitOrganization","setUpAsExplicit","setUpExplicitOrganization_marked","setUpExplicitOrganization_marked2","handleTurnGuestIntoMember","turnGuestIntoMember_marked","turnGuestIntoMember_marked2","MODULE","handleSwitchActiveOrganization","OrganizationModule","switchActiveOrganization_marked","switchActiveOrganization_marked2","getIioUserInfoById","makeGetIioUserInfoByIdSelector","iioUserListSelector","toIndexedSeq","makeIioUserListSelector","users","makeIioFilteredUserListSelector","userIdList","contains","onUserAuthenticated","UserSelector","currentUserSelector","SyncUsernameFlow_marked","SyncUsernameFlow_marked2","onUpdateProfile","onUpdatePassword","UpdateProfileFlow_marked","UpdateProfileFlow_marked2","pass","UpdateProfileFlow_marked3","_context4","_marked4","onUpsertUserSetting","UpsertUserSettingFlow_marked","requestChan","actionChannel","UpsertUserSettingFlow_marked2","NodeType","getOrganizationById","getOrganizationList","toList","DB_VERSION","StandaloneIndexedDB","_this","initializationPromise","db","openRequest","indexedDB","onupgradeneeded","updateDatabaseToLatestVersion","oldVersion","onerror","onsuccess","objectStore","assertDBInitialized","asyncToGenerator","_callee","transaction","_this2","_x3","_x4","_callee3","_this3","getAll","_x6","_x7","_callee5","_context5","_this4","add","_x10","_x11","_ref4","_callee7","_context7","_this5","_x14","_x15","_ref5","_callee9","_context9","_this6","_x18","_x19","createObjectStore","keyPath","StandaloneStorageManager","getBoards","bind","getBoard","updateBoard","addBoard","deleteBoard","setUserSetting","boardId","board","setting","standaloneStorageManager","makeGetCurrentBoardQuota","organizationListSelector","INITIAL_CROP","aspect","unit","x","y","width","height","UserAvatarUploadModal","_useState","useState","_useState2","crop","setCrop","_useState3","_useState4","imageScale","setImageScale","_useState5","_useState6","setFile","_useState7","_useState8","src","setSrc","closeModal","resetModal","Modal","closeIcon","Header","Content","image","react_dropzone_dist_es","onDrop","acceptedFiles","URL","createObjectURL","getRootProps","getInputProps","style","assign","padding","ReactCrop_min_default","maxWidth","maxHeight","imageStyle","onChange","newCrop","onImageLoaded","naturalWidth","Actions","Button","children","primary","onUpload","reduxForm","form","enableReinitialize","className","onSubmit","handleSubmit","immutable","component","placeholder","react_router_dom","to","showErrorMessage","Message_Message","header","content","withRouter","useDispatch","showAvatarActions","setShowAvatarActions","showAvatarUploadModal","setShowAvatarUploadModal","showPasswordErrorMessage","setShowPasswordErrorMessage","currentUser","useSelector","updateProfileWithNewAvatarUrl","merge","encodeURI","now","Container","Grid","stackable","Row","Column","mobile","tablet","computer","as","icon","textAlign","Dropdown","Menu","Item","text","finally","cursor","stopPropagation","user_name","Subheader","components_UserProfileEditForm","initialValues","cProps","history","Routes","submitForm","UserProfilePaswordForm","password1","password2","pws","reset","submitFormPassword","components_UserAvatarUploadModal","FormData","append","SAVE_BOARD","RENAME_BOARD","IMPORT_NEW_BOARD","IMPORT_EXISTING_BOARD","ADD_BOARD","UPDATE_BOARDS","FORCE_UPDATE_BOARDS","SET_BOARD_TO_SNAPSHOT","SET_BOARD_DETAILS_FETCHED","CONFIRM_DELETE_BOARD","ABORT_BOARD_DELETION","DELETE_BOARD","SHARE_BOARD","RESEND_BOARD_INVITATION","REVOKE_BOARD_INVITATION","REVOKE_ACCESS_TO_BOARD","CHANGE_BOARD_PERMISSIONS","ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS","TRIGGER_IMPORT_BOARD","TRIGGER_EXPORT_BOARD","TOGGLE_BOARD_HISTORY","TOGGLE_ELEMENT_DETAILS","TOGGLE_CODY_CONSOLE","TOGGLE_TIMER_MODAL","TOGGLE_VIDEO_SESSION","APPEND_HISTORY_ENTRIES","PREPEND_HISTORY_ENTRIES","CLEAR_BOARD_HISTORY","LOAD_FIRST_BOARD_HISTORY_CHUNK","LOAD_NEXT_BOARD_HISTORY_CHUNK","SET_NO_MORE_HISTORY_AVAILABLE","SET_IS_LOADING_HISTORY","UPDATE_BOARD_ELEMENTS_TREE","CREATE_BOARD_CLIENT","REMOVE_BOARD_CLIENT","RESET_BOARD_CLIENT_SECRET","SET_STICKY_TEMPLATE","UPDATE_STICKY_ADVANCED_CONFIG","IMPORT_STICKY_TEMPLATES","OPEN_ELEMENTS_DETAILS","FILTER_BOARD_OVERVIEW","HIDE_SHARED_BOARDS_ON_OVERVIEW","HIDE_OWN_BOARDS_ON_OVERVIEW","FILTER_ELEMENTS_TREE","MOVE_USER_BOARD_TO_ORGANIZATION","SYNC_BOARD","STOP_BOARD_SYNCHRONISATION","REMOTE_BOARD_CHANGED","REMOTE_BOARD_OPENED","LOCAL_BOARD_CHANGED","LOCAL_CHANGE_SET_AS_HEAD_VERSION","ENQUEUE_BOARD_CHANGED","DEQUEUE_BOARD_CHANGED","SET_BOARD_VERSION","APPLY_REMOTE_CHANGE","REMOTE_CHANGE_APPLIED","BOARD_IMPORT_STARTED","BOARD_IMPORTED","BOARD_EXPORTED","BOARD_INITIALIZED","LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE","BOARD_INVITATION_SENT","BOARD_INVITATION_RESENT","BOARD_INVITATION_REVOKED","BOARD_ACCESS_REVOKED","BOARD_PERMISSIONS_CHANGED","TEAM_BOARD_PERMISSIONS_CHANGED","BOARD_PERMISSIONS_FOR_USERS_FETCHED","BOARD_PERMISSIONS_FOR_TEAMS_FETCHED","OPEN_BOARD_INVITATIONS_FETCHED","ACTIVE_GRAPH_ELEMENT_CHANGED","ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED","ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED","BOARD_GRAPH_ELEMENTS_FETCHED","BOARD_CLIENT_FETCHED","BOARD_CLIENT_NOT_CONFIGURED","BOARD_CLIENT_SECRET_FETCHED","BOARD_STICKY_TEMPLATES_FETCHED","STICKY_TEMPLATE_SET","STICKY_ADVANCED_CONFIG_UPDATED","STICKY_TEMPLATES_IMPORTED","USER_BOARD_MOVED_TO_ORGANIZATION","INITIAL_BOARD_LIST_LOADED","START_FETCH_USER_BOARDS","FETCH_USER_BOARDS","FETCH_USER_BOARD","FETCH_BOARD_PERMISSIONS_FOR_USERS","FETCH_BOARD_PERMISSIONS_FOR_TEAMS","FETCH_OPEN_BOARD_INVITATIONS","FETCH_BOARD_GRAPH_ELEMENTS","FETCH_BOARD_CLIENT","FETCH_BOARD_CLIENT_SECRET","FETCH_BOARD_STICKY_TEMPLATES","installOrganizationBoard","boardName","renameBoard","takeBoardSnapshot","boardVersion","version","shareBoard","permissions","invitedUser","boardPermissions","writeAccess","readAccess","adminAccess","resendBoardInvitation","revokeBoardInvitation","ackBoardInvitation","revokeAccessToBoard","changeBoardPermissions","adminChangeTeamBoardPermissions","teamId","fetchUserBoard","fetchUserBoards","fetchOlderPatches","fromBoardVersion","toJSON","fetchNewerPatches","mode","fetchBoardPermissionsForUsers","fetchBoardPermissionsForTeams","fetchOpenBoardInvitations","fetchBoardOfInvitation","fetchBoardXmlFromLink","link","fetch","uploadBoardImage","imageContent","mimeType","boardImageUploadApiPromise","replaceBoardImage","imageId","boardImageReplacementApiPromise","deleteBoardImage","imageUrl","boardImageDeletionApiPromise","fetchBoardGraphElements","fetchBoardClient","fetchBoardClientSecret","createBoardClient","removeBoardClient","resetBoardClientSecret","fetchBoardStickyTemplates","setStickyTemplate","cellType","template","updateStickyAdvancedConfig","templateType","templateSchema","moveUserBoardToOrganization","updateBoards","forceUpdateBoards","setBoardToSnapshot","snapshot","setBoardDetailsFetched","triggerImportBoard","triggerExportBoard","toggleBoardHistory","visible","toggleElementDetails","focusEditor","toggleCodyConsole","toggleTimerModal","toggleVideoSession","active","appendHistoryEntries","entries","prependHistoryEntries","clearBoardHistory","loadNextBoardHistoryChunk","loadFirstBoardHistoryChunk","setNoMoreHistoryAvailable","setIsLoadingHistory","loading","filterBoardOverview","hideSharedBoardsOnOverview","hide","hideOwnBoardsOnOverview","filterElementsTree","focus","saveBoard","graph","importNewBoard","boardXml","importTemporary","importExistingBoard","confirmDeleteBoard","abortBoardDeletion","syncBoard","stopBoardSynchronisation","enqueueBoardChanged","boardChanged","dequeueBoardChangedEvents","events","updateBoardElementsTree","elements","disableNotification","importStickyTemplates","stickyTemplates","finishedCb","remoteBoardChanged","localBoardChanged","localChangeSetAsHeadVersion","socketCmd","boardImportStarted","boardImported","boardExported","boardInitialized","initialBoardListLoaded","localBoardUpdatedWithRemoteChange","boardInvitationSent","boardInvitation","boardInvitationResent","boardInvitationRevoked","boardAccessRevoked","boardPermissionsChanged","teamBoardPermissionsChanged","boardPermission","boardPermissionsForUsersFetched","boardPermissionsForTeamsFetched","openBoardInvitationsFetched","boardInvitations","activeGraphElementChanged","element","activeGraphElementLabelChanged","elementId","label","activeGraphElementMetadataChanged","boardGraphElementsFetched","boardClientFetched","client","boardClientNotConfigured","boardClientSecretFetched","clientSecret","boardStickyTemplatesFetched","stickyTemplateSet","stickyTemplate","stickyAdvancedConfigUpdated","stickyTemplatesImported","userBoardMovedToOrganization","startFetchUserBoards","defaultBoardVersionProps","head","BoardVersion","defaultBoardProps","xml","lastModified","toISOString","inDeletion","shouldImport","shouldExport","shouldShowHistory","shouldShowElementDetails","shouldFocusMetadataEditor","shouldShowCodyConsole","shouldShowTimerModal","videoSessionActive","shared","detailsFetched","sharedWith","assignedTeams","example","owner","creator","tempBoard","createUserBoard","Board","createTempBoard","changed","remoteBoardVersion","HistoryAction","HistoryCellTypeAddition","flattenNodeChildren","nodes","targetArr","node","deriveGraphFromMxgraph","mxgraph","editorUi","MxGraphWrapper","makeEmptyGraph","EmptyGraph","sortNodesByType","b","getType","boundedContext","feature","getName","convertNodeToJs","getId","description","getDescription","getLink","tags","getTags","layer","isLayer","defaultLayer","isDefaultLayer","parent","getParent","makeParentNodeRecord","childrenList","makeNodeRecord","sourcesList","getSources","makeConnectedNodeRecord","targetsList","getTargets","geometry","GraphPointRecord","getGeometry","getMetadata","MxGraphElement","mxcell","mxgraphModel","deepLinkFactory","root","parentCache","childrenCache","sourcesCache","targetsCache","metadataCache","MXGRAPH_ROOT_UUIDS","inspectioUtils","getLabelText","getLabelSecondaryText","getTypeInclEdge","misc","HistoryCellType","multiple","getChildren","child","sources","isVertex","edges","edge","source","targets","target","meta","orgLayerVisibility","getCurrentScale","getCurrentTranslate","listener","onPanning","offPanning","translateMousePoint","onZoom","offZoom","mxmodel","getModel","getRoot","actions","funct","triggerCody","cell","getCell","isVisible","model","beginUpdate","execute","mxVisibleChange","isContainer","getAllEdges","endUpdate","hasOwnProperty","enableLazyTextPaint","beginUpdateWithoutChangeNotifications","setVisible","endUpdateWithoutChangeNotifications","disableLazyTextPaint","setTimeout","zoom","showAll","scrollCellsIntoView","hasUserLevelVisibilityChanges","view","getState","getCellStyle","mxUtils","getValue","toString","locked","setCellStyles","removeSelectionCells","getDescendants","removeCells","isEnabled","addCell","mxCell","setDefaultParent","isActiveLayer","index","getIndex","getChildCount","getChildAt","getDefaultParent","cellLabelChanged","isSelectionEmpty","moveCells","getSelectionCells","userLayerVisibility","layerVisibleForUser","mxCodec","createXmlDocument","encode","translate","setAttribute","Math","round","isGridEnabled","gridSize","graphHandler","guidesEnabled","tooltipHandler","connectionHandler","connectionArrowsEnabled","foldingEnabled","pageVisible","pageScale","pageFormat","background","getXml","layerId","selectionModel","addListener","mxEvent","CHANGE","baseUrl","setCockpitBaseUrl","container","EmptyLayer","defaultNodeRecordProps","NodeRecord","referencingChild","GraphElementType","defaultHistoryEntryProps","edited","date","HistoryEntry","makeHistoryEntry","userInfo","cellLabel","toBoardVersion","recordedAt","defaultBoardChangedProps","changeSet","iData","BoardChanged","mapServerPatchToBoardChanged","serverPatch","patchId","patch","defaultBoardGraphElementProps","parentId","createBoardGraphElementFromServerData","BoardGraphElement","defaultBoardInvitationProps","invitingUser","resendAttempts","createBoardInvitationFromServerData","permissionsId","BoardInvitation","defaultBoardPermissionProps","createBoardPermissionForTeamFromServerData","BoardPermissionForTeam","createBoardPermissionForUserFromServerData","BoardPermissionForUser","defaultBoardSnapshotProps","BoardSnapshot","autoFocus","userOrganizationInfoListSelector","makeUserOrganizationInfoListSelector","UserOrganizationInfoList","makeActiveUserOrganizationInfoSelector","User","userOrganizationInfoList","find","orga","CONNECT_SOCKET","DISCONNECT_SOCKET","SOCKET_CONNECTED","SOCKET_DISCONNECTED","SOCKET_CONNECTION_LOST","SEND_SOCKET_CMD","LISTEN_ON_SOCKET_CHANNEL","STOP_LISTENING_ON_SOCKET_CHANNEL","DEFAULT_SOCKET_CMD_TIMEOUT","connectSocket","disconnectSocket","socketConnected","socketDisconnected","socketConnectionLost","reason","sendSocketCmd","timeout","notifySocketCmdSent","ackSocketCmd","rejectSocketCmd","listenOnSocketChannel","channelName","emitActionType","stopListeningOnSocketChannel","emitChannelEvent","isAcknowledged","cmd","isNotAcknowledged","isError","STATUS_CONNECTED","STATUS_CONNECTING","STATUS_DISCONNECTED","STATUS_DISCONNECTING","STATUS_CONNECTION_LOST","disconnectedStatus","assertSocketStatus","AUTHENTICATE","USER_AUTHENTICATED","authenticate","auth","userAuthenticated","kc","tokenRefreshFlow","keycloakPromise","promise","success","authErrors","profile","attr","verifyJwt","login","loadUserProfile","tokenParsed","sub","attributes","display_name","avatar_url","company_name","job_title","firstName","lastName","resourceAccess","delay","updateToken","t1","t2","tokenRefreshFlow_marked","makeTokenSelector","getToken","manageSocketConnection","flow","runBackgroundTasks","onHandleIO","handleIO","Auth","socketFlow_marked","warn","socket","disconnect","socketFlow_marked2","disconnectTask","reconnectTask","ioTask","listenDisconnectSaga","listenReconnectSaga","cancel","socketFlow_marked3","channelRegistry","Socket","StatusSelector","makeGetStatus","isConnected","sendCmd","stopListeningOnChannel","listenOnChannel","socketFlow_marked4","_marked5","registry","chan","_context6","eventChannel","emit","on","errorEvent","off","buffers","expanding","close","connected","reconnectSocket","_reason","_context8","ack","AuthSelector","race","pushCmd","disconnected","statusSelector","StatusModel","keyBoardHidden","keyUpdateViewed","userSettingsSelector","makeUserSettingSelector","defaultVal","settings","makeUserSettingsSelector","toObject","makeUserSettingsLoadedSelector","getBoardById","boardSelector","params","boardQueueSelector","makeBoardByIdSelector","makeGetBoard","makeGetQueue","queue","makeMapStateToPropsAddBoard","getCurrentUser","makeMapStateToPropsEditBoard","makeMapStateToPropsMxGraphBoard","getSocketStatus","SocketSelector","getQueue","getLiteModeSetting","socketStatus","liteMode","defaultHistoryStateData","oldestBoardVersion","olderPatchesAvailable","HistoryState","makeBoardHistoryByIdSelector","getBoardHistoryById","boardListSelector","boardLoadingSelector","initialBoardListLoadedSelector","boardOverviewSelector","makeGetBoards","returnHiddenBoards","activeUserOrganizationInfoSelector","boardOverview","toLowerCase","allSharedBoardsHidden","allOwnBoardsHidden","makeGetTeamBoards","makeIsLoadingBoards","isLoading","makeInitialBoardListLoaded","listLoaded","makeGetBoardOverview","makeMapStateToPropsBoardOverview","getQuota","isLoadingBoards","userQuota","BoardSelector","isAddingBoard","setIsAddingBoard","size","disabled","warning","components_AddBoardForm","BoardModel","AddBoardModal","AddBoard","setAddBoard","preventDefault","href","display","flexDirection","verticalAlign","justifyContent","alignItems","Icon","AddBoardCard_AddBoardModal","wordBreak","overflowWrap","isAdmin","Popup","trigger","color","fontSize","isoDateTime","toLocaleString","LoadingBoardCard","StandaloneExampleBoardCard","BoardListSelector","mapDispatchToProps","settingsLoaded","showHint","popupOpen","setPopupOpen","padded","Card","Group","itemsPerRow","components_AddBoardCard","LoadingBoardCard_LoadingBoardCard","sortBy","components_BoardCard","isCreator","Segment","Inline","rel","components_AddBoardButton","Divider","horizontal","components_StandaloneExampleBoardCard","components_NewDomainModal","renderConfirm","componentProps","input","_componentProps$meta","touched","Form","Input","values","confirmedName","pristine","valid","basic","onCancel","handleAbortClick","boardClientsSelector","confirmOpen","setConfirmOpen","Fragment","Confirm","onConfirm","resetConfirmOpen","setResetConfirmOpen","removeConfirmOpen","setRemoveConfirmOpen","resetLoading","setResetLoading","clientSecretCopied","setClientSecretCopied","closeResetConfirm","closeRemoveConfirm","Table","unstackable","Body","Cell","clientId","marginLeft","appendTo","inputElement","left","top","body","execCommand","parentNode","removeChild","copyToClipboard","paddingTop","paddingBottom","labelPosition","visibility","negative","floated","boardClients","HeaderSubheader_default","BoardClientConfiguration_BoardClientNotConfiguredMessage","BoardClientConfiguration_BoardClientTable","addTeam","teamName","renameTeam","changeTeamDescription","newDescription","inviteUserToTeam","userEmail","resendTeamInvitation","revokeTeamInvitation","removeMemberFromTeam","deleteTeam","adminGrantTeamAccessToBoard","adminRevokeTeamAccessToBoard","fetchUserTeams","ackTeamInvitation","fetchTeamOfInvitation","fetchOpenTeamInvitations","moveTeamToOrganization","ADD_TEAM","RENAME_TEAM","CHANGE_TEAM_DESCRIPTION","INVITE_USER_TO_TEAM","RESEND_TEAM_INVITATION","REVOKE_TEAM_INVITATION","REMOVE_MEMBER_FROM_TEAM","FETCH_USER_TEAMS","UPDATE_TEAMS","ADMIN_GRANT_TEAM_ACCESS_TO_BOARD","ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD","DELETE_TEAM","TEAM_ADDED","TEAM_RENAMED","TEAM_DESCRIPTION_CHANGED","TEAMS_FETCHED","MEMBER_REMOVED_FROM_TEAM","TEAM_DELETED","TEAM_INVITATIONS_LOADED","TEAM_INVITATION_RESENT","TEAM_INVITATION_REVOKED","TEAM_ACCESS_TO_BOARD_GRANTED","TEAM_ACCESS_TO_BOARD_REVOKED","MOVE_TEAM_TO_ORGANIZATION","TEAM_MOVED_TO_ORGANIZATION","updateTeams","teams","teamIds","teamAdded","team","teamRenamed","teamDescriptionChanged","memberRemovedFromTeam","teamDeleted","teamInvitationsLoaded","teamInvitations","teamInvitationResent","teamInvitation","teamInvitationRevoked","teamsFetched","teamAccessToBoardGranted","teamAccessToBoardRevoked","teamMovedToOrganization","defaultTeamProps","deleted","isNew","createTeamFromServerData","Team","createNewTeam","member","defaultTeamInvitationProps","createTeamInvitationFromServerData","TeamInvitation","inspectioTeamsReducer","loadMembersOfAllTeams","loadUserTeams","memberIds","toSet","loadUserTeams_marked","newTeam","loadUserTeams_marked2","handleAddTeam","rename","addTeam_marked","addTeam_marked2","onAdminGrantTeamAccessToBoard","onAdminRevokeTeamAccessToBoard","plural","adminGrantTeamAccessToBoard_marked","adminGrantTeamAccessToBoard_marked2","adminGrantTeamAccessToBoard_marked3","makeTeamSelector","getTeamById","teamListSelector","makeTeamListSelector","withAdminAccess","activeOrganizationSelector","handleChangeTeamDescription","orgTeam","changedTeam","changeDescription","changeTeamDescription_marked","changeTeamDescription_marked2","handleDeleteTeam","deleteTeam_marked","deleteTeam_marked2","inviteUserToTeam_marked","handleRemoveMemberFromTeam","removeMember","removeMemberFromTeam_marked","removeMemberFromTeam_marked2","handleRenameTeam","oldName","renameTeam_marked","renameTeam_marked2","makeTeamInvitationSelector","getTeamInvitationById","handleResendTeamInvitation","resend","resendTeamInvitation_marked","resendTeamInvitation_marked2","handleRevokeTeamInvitation","revoke","revokeTeamInvitation_marked","revokeTeamInvitation_marked2","handleRefreshUserTeams","refreshUserTeams","refreshUserTeams_marked","refreshUserTeams_marked2","handleMoveTeamToOrganization","moveToOrganization","moveTeamToOrganization_marked","moveTeamToOrganization_marked2","makeBoardPermissionForTeamSelector","boardPermissionForTeamListSelector","permission","boardPermissionForUserListSelector","makeBoardPermissionForTeamListSelector","BoardPermissionsForTeamsTableEntry","hasReadAccess","hasWriteAccess","Or","TeamAction","BoardPermissionsForTeamsTable","BoardPermissionsForTeamsTableEntry_BoardPermissionsForTeamsTableEntry","BoardPermissionTableEntry","isOwner","avatar","alt","Label","marginBottom","BoardPermissionTable","onwerId","BoardPermissionsTableEntry_BoardPermissionTableEntry","SecondaryButton","btnProps","UserAvatar","circular","Image","namePopup","makeBoardInvitationSelector","getBoardInvitationById","boardInvitationListSelector","setUserInfo","isResending","setIsResending","isRevoking","setIsRevoking","components_UserAvatar","paddingLeft","ButtonGroup","components_SecondaryButton","OpenBoardInvitationsTable","openInvitations","EditBoard_OpenBoardInvitationsTableEntry","setEmail","setWriteAccess","filteredUsers","toLocaleLowerCase","test","Notify","margin","Search_Search","fluid","results","showNoResults","resultRenderer","onSearchChange","onResultSelect","selectedTeams","setSelectedTeams","teamBlacklist","ownTeamsOptions","selection","options","dProps","readFile","organizationUserIds","organizationUsers","openBoardInvitations","usersPane","EditBoard_ShareBoardForm","BoardPermissionsTable_BoardPermissionTable","OpenBoardInvitationsTable_OpenBoardInvitationsTable","teamsPane","EditBoard_ShareBoardWithTeamForm","BoardPermissionsForTeamsTable_BoardPermissionsForTeamsTable","panes","menuItem","render","Tab","menu","secondary","pointing","reader","FileReader","onload","readAsText","readFileArrayBuffer","readAsArrayBuffer","readFileBase64","readAsDataURL","defaultStickyTemplateProps","deriveStickTemplateId","createStickyTemplateFromServerData","StickyTemplate","createStickyTemplateFromDefault","OBJ_SCHEMA","DEFAULT_TEMPLATE","aggregate","policy","hotSpot","externalSystem","ui","freeText","makeStickyTemplateSelector","getStickyTemplateById","currentGraph","makeBoardStickyTemplateMapSelector","stickyTemplateMap","stickyMap","boardStickyTemplateMapSelector","resolveRef","ref","schema","definitions","monaco","CodeEditor","editor","disposeOnChangeHandler","assertThisInitialized","internalData","getElementById","modelData","modelUri","Uri","parse","fileId","createModel","language","updateOptions","tabSize","setModelLanguage","setValue","initializeOnChangeHandler","initializeJsonDiagnostics","setModel","keybinding","handler","addCommand","onKeyDown","onChangeDisposable","dispose","updateInternalData","newDisposable","onDidChangeContent","languages","json","jsonDefaults","setDiagnosticsOptions","enableSchemaRequest","allowComments","schemas","uri","fileMatch","setState","defineProperty","React","forwardRef","codeEditorRef","useRef","current","initializeModel","boardStickyTemplate","jsonSchemaMetaSchema","useImperativeHandle","retrievePayload","components_CodeEditor_CodeEditor","marginTop","folding","glyphMargin","lineNumbers","lineDecorationsWidth","minimap","enabled","formatOnPaste","scrollBeyondLastLine","setTemplateType","boardStickySchemaEditorRef","handleUpdateStickyAdvancedConfig","Select","BoardStickyConfiguration_BoardStickySchemaEditor","rawSchema","parsedSchema","newTemplate","convertJsonSchemaToEditorValue","editorValue","$ref","enum","join","items","properties","prop","onTemplateGenerated","Palette","stickyColors","projection","textCard","CellIcon","Color","fontFamily","encodeURIComponent","isFrame","isCard","isSpecialShape","isFirst","stickies","boardStickyTemplates","sort","activeCellType","onSetActiveCellType","components_CellIcon","initializeModelWithValue","KeyMod","CtrlCmd","KeyCode","KEY_S","onSave","updateModelValue","setActiveCellType","advancedConfigActive","setAdvancedConfigActive","stickyTemplateEditorRef","uploadEl","isImporting","setIsImporting","handleUpdateTemplate","_unused","float","direction","click","templatesStr","tpl","jsonBlob","Blob","download","revokeObjectURL","columns","largeScreen","widescreen","BoardStickyConfiguration_BoardStickySelection","borderLeft","BoardStickyConfiguration_BoardStickyTemplateEditor","BoardStickyConfiguration_BoardStickyAdvancedConfig","Dimmer","inverted","Loader","files","templates","_unused2","cellTypes","tplCellTypes","importableStickyTemplates","tplCellType","setTemplateSchema","selectedOrganization","setSelectedOrganization","abortDeletion","isPrivateWorkspace","validTargetOrganizations","components_EditBoardForm","components_ConfirmBoardDeletionForm","handleConfirmDeletion","EditBoard_BoardStickyTemplates","GraphRef","graphRef","selectionListeners","onSelectionChanged","openLayersDialog","setUserVisible","applyVisibilityGlobally","isLocked","setLocked","deleteElement","addLayer","deleteLayer","setAsActiveLayer","setDefaultLayerAsActive","highlightLayer","changeNodeName","copySelectionToActiveLayer","exportXmlSnapshot","useGraph","setGraph","currentSession","syncRequiredCallback","newlyConnectedCodySyncIndex","CodyResponseType","NO_CODY_CONNECTION","printCodyResponse","res","codyName","_console","_console3","_console5","_console7","cody","details","Info","_console2","slice","_console4","Warning","Question","_console6","SyncRequired","_console8","printError","printWarning","addTargetsToSortedNodesList","originalNodes","sortedNodes","nestingLevel","orgN","targetInSortedNodes","sN","splice","indexOf","codyResponsePrinter","errorPrinter","warningPrinter","currentNodeIndex","currentServerIndex","IIO","codyServers","syncPerformed","nodesWithoutSourceInNodeList","n","allSourcesNotInNodeList","nodeNoSource","sortNodes","ElementEdited","codyRes","StopSession","syncRequired","server","sync","Cody","connectedServers","codyServer","IioSaidHello","reply","_reply","_x","UserReplied","talk","lastServer","ConfirmTest","onSyncRequired","cb","syncNodes","_syncNodes","_cody3","Sync","Empty","_x2","syncChangedNodes","_syncChangedNodes","_loop","performSync","chunk","_callee2","currentChunk","delegateYield","_x5","syncDeletedNodes","_syncDeletedNodes","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_loop2","_iterator3","_step3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_callee4","SyncDeleted","_x9","_x8","syncFinished","abortSession","ask","forHelp","setCodyResponsePrinter","printer","setErrorPrinter","setWarningPrinter","Gesture","defaultBoardTimerProps","deadline","duration","moderator","pausedTime","createBoardTimer","BoardTimer","MessageType","colors","nextPointerColor","getPointerIconFromGesture","gesture","Moving","Typing","RemoteMouseSync","translateGraphPoint","userJoinedListeners","userLeftListeners","observedUser","observingFrame","lastMoveWasPanning","boardTimerStartedListeners","boardTimerPausedListeners","boardTimerStoppedListeners","activeBoardTimer","isBoardTimerPaused","joined","evt","trackMouseOfRemoteUser","stopMouseTrackingOfUser","evts","joinedEvt","move","point","vT","scale","pointerEl","setScale","panGraph","panningListeners","l","isPanning","absolutePoint","lastKnownAbsolutePoint","scroll","gestureChanged","pointerIcon","autoScrollEvent","timer","boardTimer","triggerJoinedListeners","li","isPaused","startBoardTimer","pauseBoardTimer","borderColor","mouseDelta","_this$registry$_userI","dx","dy","parseInt","keepMousePositionsInPlaceOnPanning","syncLastKnownAbsolutePointsAfterPanning","userName","observeUser","_makeNewPointer","pointerDiv","pointerP","pointer","Default","appendChild","labelP","innerHTML","makeNewPointer","_makeNewPointer2","pointerI","hideObservingFrame","_this$registry$userId","frame","classList","innerText","backgroundColor","boardGraphElementsSelector","selectedBoard","setSelectedBoard","setSelectedEvent","setOpen","boardGraphElements","boardChoices","openHandle","openFromHandle","currentLink","selectBoard","clearable","marginRight","onLinkChosen","createCropCanvas","cropStartX","cropStartY","naturalHeight","newWidth","newHeight","canvas","getContext","drawImage","getCroppedImageBase64","toDataURL","getCroppedImageArrayBuffer","toBlob","blob","ACCEPTED_IMAGE_TYPES","CROP_IMAGE_TYPES","setImageId","setImage","_useState9","_useState10","_useState11","_useState12","uploading","setUploading","focusPasteInput","currentImageId","onFileSelected","upload","isCroppedImage","isVectorGraphic","imageDataURL","imageData","onFileUploaded","t3","t4","replaceImage","uploadNewImage","imageUploadErrorHandler","onPaste","clipboardData","i","getAsFile","accept","maxFiles","maxSize","newPercentCrop","setLink","setError","chooseLink","required","keyCode","videoRef","videoDevices","setVideoDevices","audioDevices","setAudioDevices","selectedVideoDevice","setSelectedVideoDevice","selectedAudioDevice","setSelectedAudioDevice","JitsiMeetJS","audioRef","newDeviceList","setTracklist","localTrackMuted","setLocal","localAudioTrack","localVideoTrack","tmpSelectedVideoDevice","tmpSelectedAudioDevice","mediaDevices","enumerateDevices","devices","device","deviceId","kind","tmpSetVideoDevices","tmpSetAudioDevices","d","createLocalTracks","maxFps","facingMode","tracks","deviceIds","nd","tmpTracklist","track","attach","cameraDeviceId","detach","micDeviceId","videoDeviceChoices","audoDeviceChoices","Field","autoPlay","muted","loadingMeetingRoom","onDevicesSelected","audio","video","reconnectTrys","positionListener","currentUserId","currentSessionId","pingTimeout","heartbeatTimeout","readyState","OPEN","heartbeat","clearTimeout","WebSocket","onopen","onclose","onmessage","WebSocketConnection","sendPositionUpdate","sessionId","send","sendStatusUpdate","listenForUpdates","GetUserPositionsResponse","UserPositionChanged","UserStatusChanged","ping","GetUserPositions","stopListeningForPositionUpdates","defaultPositionChange","startPositionAvatar","startPositionMouse","currentPositionMouse","emojiIconSettings","thumbs up","thumbs down","beer","JitsiVideo","isDragging","setIsDragging","positionChange","isFocused","setIsFocused","changePosition","onPositionChange","newPosition","isLocalUser","audioTrack","getParticipantId","videoTrack","volume","isAnyMegaphoneActive","megaphoneOn","paused","pause","play","mouseUpListener","mouseMoveListener","clientX","clientY","touchMoveListener","touches","currentSize","borderRadius","showVideo","cameraOn","darkenAvatar","pointerEvents","zIndex","WebkitTransform","onMouseDown","onTouchStart","onDoubleClick","overflow","micOn","border","disablePictureInPicture","objectFit","objectPosition","bottom","handUpOn","showIconName","emojiOn","JitsiMeeting","connection","room","localTracks","localUser","initialPosition","remoteUsers","graphTranslate","graphScale","componentWillUnmount","onConnectionSuccess","onConnectionFailed","onConnectionDisconnect","onDeviceListChanged","onConferenceJoined","onLocalTrack","onRoomTrackAdded","onRoomTrackRemoved","updateRemoteUser","handleLocalUserPositionChanged","renderRemoteTracks","toggleCamera","toggleMic","toggleMegaphone","toggleHandUp","toggleEmoji","videoDevice","audioDevice","hosts","domain","muc","bosh","JitsiConnection","CONNECTION_ESTABLISHED","CONNECTION_FAILED","CONNECTION_DISCONNECTED","DEVICE_LIST_CHANGED","translatedPoint","panningListener","zoomListener","prevProps","initJitsiConference","openBridgeChannel","conference","CONFERENCE_JOINED","TRACK_ADDED","TRACK_REMOVED","addTrack","isLocal","tmpUser","userIndex","random","remoteUser","updateRemoteUserPosition","updateRemoteUserStatus","mouseDeltaX","mouseDeltaY","isCameraNowActive","unmute","mute","isMicNowActive","isMuted","isMegaphoneNowActive","isHandUpNowActive","iconName","iconInfo","isEmojiNowActive","timeoutRef","components_OpenVidu_JitsiVideo","max","min","sqrt","pow","_this7","transform","transformOrigin","sidebar","Component","TOGGLE_SIDEBAR_COLLAPSED","SET_SIDEBAR_WIDTH","SET_RIGHT_SIDEBAR_WIDTH","SET_CODY_CONSOLE_HEIGHT","SidebarState","collapsed","rightSidebarWidth","codyConsoleHeight","sidebarSelector","makeGetSidebarSelector","MeetingLobby","modalOpen","setModalOpen","_useGraph","OpenVidu_JitsiMeeting","JitsiJoinMeetingDialog","openViduRef","publisherRef","OpenVidu","initPublisher","audioSource","publishAudio","publishVideo","resolution","frameRate","insertMode","mirror","addVideoElement","getDevices","tmpVideoDevices","tmpAudioDevices","getUserMedia","videoSource","mediaStream","getVideoTracks","replaceTrack","axiosInstance","sendApiRequest","createSession","_createSession","_getToken","currentMouseSync","listenForPositionUpdates","OpenViduVideo","streamManager","isSpeaking","thumbUpOn","OpenViduScreenShare","screenShare","boxSizing","localPositionChanged","Meeting","openVidu","session","screenShareSession","graphTranslateRef","graphScaleRef","localUserAccessAllowed","remotePositions","remoteUsersCount","setRemoteUsersCount","setPositionChanged","setGraphTranslate","setGraphScale","setLocalUser","localScreenShare","setLocalScreenShare","remoteUsersRef","speakingStreamsRef","remoteScreenSharesRef","stateRef","sendSignalUserChanged","signal","subscribeToStream","stream","subscriber","subscribe","screenSharePositionId","connectionId","isVideoActive","isAudioActive","isMegaphoneActive","isHandUpActive","isThumbUpActive","selectedIconName","subscribeToDebuggingEvents","openViduConnect","origin","streamId","deleteSubscriber","connectWebCam","publisher","capabilities","publish","from","isScreenShareActive","connectToSession","_session","OpenViduApi","alert","handleScreenSharePositionChanged","remoteScreenShare","isThumbUpNowActive","shareScreen","screenStreamManager","initSession","once","getMediaStream","setAdvancedConfiguration","forceMediaReconnectionAfterNetworkDrop","noStreamPlayingEventExceptionTimeout","onBeforeUnload","useCallback","localUserNotNull","Boolean","remoteVideos","components_OpenVidu_OpenViduVideo","remoteScreenShares","OpenVidu_OpenViduScreenShare","unpublish","OpenVidu_Meeting","OpenVidu_JoinMeetingDialog","MouseSyncRef","mouseSyncRef","cachedUserJoinedListeners","cachedUserLeftListeners","cachedBoardTimerStartedListeners","cachedBoardTimerPausedListeners","cachedBoardTimerStoppedListeners","mouseSync","onUserJoined","onUserLeft","onBoardTimerStarted","onBoardTimerPaused","onBoardTimerStopped","emitUserGestureChanged","emitUserIsAutoScrolling","emitUserMouseMove","emitUserMouseScroll","offUserJoined","offUserLeft","startSync","stopObservingUser","stopSync","offBoardTimerPaused","offBoardTimerStarted","offBoardTimerStopped","stopBoardTimer","useMouseSync","setMouseSync","MxGraphBoard","mxGraph","divGraph","divDimmer","codec","initialized","iioCody","lastFocusedCells","lastClicks","uploadOpenHandle","boardLinkHandle","taskLinkHandle","imageUploadedListener","boardLinkListener","taskLinkListener","setUsedGraph","setUsedMouseSync","activeGraphElement","viduEnabled","jitsiEnabled","viduUser","syncChangesWithCody","changes","deletedCellIds","deletedEdges","change","deletedCell","deletedCells","deletedEdge","edgeNodes","transactionCellIds","effectedCells","effectedCellIds","_cellId","vertexChildren","vertexChild","getVerticesTree","split","readyToJoinVidu","LoadGraph","createRef","lookup","_useMouseSync","URLSearchParams","nextProps","nextState","initGraphBoard","setEnabled","setLiteMode","handledChanges","isNewerThan","parseXml","decode","documentElement","syncActiveGraphElementWithRemoteChange","edit","mxUndoableEdit","fireEvent","mxEventObject","last","BoardSync","asHead","dequeueBoardChanged","checkScrollToCells","getGraphXml","updateXml","onBoardImported","onBoardImportStarted","onBoardExported","destroy","activeUsers","stopBoardSync","components_MxGraphImageUpload","imageName","components_MxGraphBoardLink","components_MxGraphTaskLink","OpenVidu_MeetingLobby","floor","innerWidth","innerHeight","JitsiMeetingLobby","mxFactory","remoteVersion","triggerSave","updateXmlAfterRemoteChange","onLocalBoardUpdatedWithRemoteChange","onError","uuidPool","uuidT","shortUUID","mxGraphModel","prototype","createId","pop","fromUUID","editorUiInit","EditorUi","mxResources","loadDefaultBundle","bundle","getDefaultBundle","RESOURCE_BASE","mxLanguage","getSpecialBundle","STYLE_PATH","ispConst","THEME","xhr","getText","themes","Graph","defaultThemeName","getDocumentElement","Editor","urlParams","chrome","copyApi","deeplinkFactory","notifyFunc","setHistory","enableCopyToClipboard","setDeeplinkFactory","enableNotifications","initializeGraphEditor","copy","onInfo","attachImageUploadListener","attachLinkBoardListener","attachLinkTaskListener","attachImageReplaceListener","attachChangeActiveGraphElementListener","attachSyncLabelChangedListener","attachLookupElementListener","attachShowElementDetailsListener","attachCellConnectedListener","attachCodyListener","initializeAutoSaveManager","graphDoc","importGraphModel","initContainerStyles","center","onBoardInitialized","initMouseSync","onInsertImage","processImageUrl","imgName","imgUrl","onLinkBoard","processBoardLink","boardLink","onLinkTask","processTaskLink","taskLink","_this8","onReplaceImage","_this9","onChangeActiveGraphElement","updateMetadata","updateSimilarElements","onActiveGraphElementChanged","isEdge","edgeData","edgeLabel","_this10","LABEL_CHANGED","sender","getProperty","onActiveGraphElementLabelChanged","mxValueChange","onActiveGraphElementMetadataChanged","onLookupElement","elementLabel","elementType","_this11","mxAutoSaveGraphModelChanged","mxAutoSaveManager","graphModelChanged","localAutoSave","autoSaveDelay","autoSaveThrottle","autoSaveThreshold","sortChanges","_this11$detectHistory","detectHistoryAttributesFromChanges","onLocalBoardChanged","enableLiteMode","disableLiteMode","_this12","onShowMetadata","focusMetadataEditor","_this13","CELL_CONNECTED","setSelectionCell","_this14","cellsFocused","cellsToFocus","animateScroll","cellIds","cells","setSelectionCells","_this15","_chunk","getAllVertexElementsOfActiveLayer","_this16","onTriggerCody","_this17","topMenuHeight","topMenu","clientHeight","tr","addActiveUser","removeActiveUser","attachCodySyncListener","FIRE_MOUSE_EVENT","evtName","me","getGraphX","getGraphY","MOUSE_MOVE","panningHandler","isActive","physicsActive","EVT_USER_IS_PANNING","EVT_PANNING_PHYSICS_CLEARED","EVT_USER_IS_ZOOMING","EVT_USER_IS_TYPING","isTyping","EVT_USER_IS_MOVING","isMoving","EVT_USER_IS_AUTO_SCROLLING","_this18","topMenuUsers","backgroundSize","backgroundImage","toUpperCase","toggleObserveUser","parentElement","HTMLElement","unsetCurrentObservedUser","getUserIdFromLabelId","childNodes","firstChild","labelId","otherChanges","edgeChanged","mxGeometryChange","mxChildChange","filterOutMxStyleChange","previous","added","moved","detectHistoryCellTypeAndLabelFromChange","mxTerminalChange","allMoved","allDeleted","allAddedToContainer","deletedContainer","allMovedOutOfContainer","mxStyleChange","MxGraphBoardContainer","Notification","pure","handleAdminChangeTeamBoardPermissions","changePermissions","adminChangeTeamBoardPermissions_marked","adminChangeTeamBoardPermissions_marked2","changeBoardPermissionsFlow","onChangeBoardPermissions","changeBoardPermissionsFlow_marked","boardKey","loadBoardList","boardsJson","localStorage","getItem","deleteInspectioBoard","onErr","boardList","setItem","removeItem","deleteBoardFlow","localError","errorNotification","deleteBoardFlow_marked","deleteBoardFlow_marked2","fetchBoardClientFlow","onFetchBoardClient","onFetchBoardClientSecret","onCreateBoardClient","onRemoveBoardClient","onResetBoardClientSecret","fetchBoardClientFlow_marked","fetchBoardGraphElementsFlow","onFetchBoardGraphElements","fetchBoardGraphElementsFlow_marked","fetchBoardPermissionsFlow","onFetchBoardPermissionsForUsers","onFetchBoardPermissionsForTeams","fetchBoardPermissionsFlow_marked","handleFetchBoardStickyTemplates","fetchBoardStickyTemplates_marked","fetchBoardStickyTemplates_marked2","fetchOpenBoardInvitationsFlow","onFetchOpenBoardInvitations","fetchOpenBoardInvitationsFlow_marked","fetchUserBoardFlow","onFetchUserBoard","patches","BoardVersioning","fetchUserBoardFlow_marked","createUserSettingsFromServerData","UserSettings","_ImmutableRecord","ImmutableRecord","loadUserSettings","LoadUserSettingsFlow_marked","updateUserData","loadUserBoards","onFetchUserBoards","fetchUserBoardsFlow","fetchUserBoardsFlow_marked","creatorId","fetchUserBoardsFlow_marked2","getUserReponse","fetchUserBoardsFlow_marked3","fetchUserBoardsFlow_marked4","fetchUserBoardsFlow_marked5","importExistingBoardFlow","oldBoard","importExistingBoardFlow_marked","importExistingBoardFlow_marked2","importNewBoardFlow","_useGraph2","emptyGraphWithXml","importNewBoardFlow_marked","importNewBoardFlow_marked2","handleImportStickyTemplates","tpls","importedTpls","importStickyTemplates_marked","importStickyTemplates_marked2","installUserBoardFlow","installUserBoardFlow_marked","onBoardChanged","prepareBoardHistoryFlow","boardChangedList","prependEntries","_ret","_args2","iioUserInfo","noMatchingInfo","infoLoaded","historyEntry","IioUserInfoSelector","v","loadedInfo","unshift","prepareBoardHistoryFlow_marked","prepareBoardHistoryFlow_marked2","onLoadFirst","onLoadNext","loadBoardHistoryFlow","marshalBoardChanged","getBoardHistory","loadBoardHistoryFlow_marked","loadBoardHistoryFlow_marked2","_action","loadBoardHistoryFlow_marked3","handleMoveUserBoardToOrganization","OrgaModule","moveUserBoardToOrganization_marked","moveUserBoardToOrganization_marked2","renameBoardFlow","renameBoardFlow_marked","onResendBoardInvitation","resendBoardInvitationFlow","resendBoardInvitationFlow_marked","resendBoardInvitationFlow_marked2","onRevokeAccess","revokeAccessToBoardFlow","revokeAccessToBoardFlow_marked","revokeAccessToBoardFlow_marked2","onRevokeBoardInvitation","revokeBoardInvitationFlow","revokeBoardInvitationFlow_marked","revokeBoardInvitationFlow_marked2","onSaveBoard","saveBoardFlow","snapshotCount","retry","saveBoardFlow_marked","saveBoardFlow_marked2","onShareBoard","shareBoardFlow","shareBoardFlow_marked","shareBoardFlow_marked2","toggleSidebarCollapsed","setSidebarWidth","syncElementsTreeFlow","syncElementsTreeFlow_marked","sidebarCollapsed","latestGraph","latestBoardId","SidebarAction","syncElementsTreeFlow_marked2","syncFlow","currentBoard","localChangeSetBuffer","boardVersionOnConnectionLost","handleSyncFlowAction","_remoteBoardChanged","conLostBoard","localBoardChangedAction","syncFlow_marked","handleSetStickyTemplate","updateStickyTemplate","_command$payload","setTemplate","updateStickyTemplate_marked","updateStickyTemplate_marked2","updateStickyTemplate_marked3","ActivePage","MaxLengthLabel","maxLength","setActive","BoardHistoryEntry","setShowAll","Link","entry","clicks","components_MaxLengthLabel","s","Description","BoardHistoryGroup","isActiveByDefault","AccordionTitle","AccordionContent","loadHistory","getBoardByIdSelector","useMemo","getBoardHistoryByIdSelector","setClicks","handleClick","feedEvents","moment","relativeMoments","startOfWeek","startOf","startOfMonth","startOfLastMonth","subtract","today","generateRelativeMomentsFromNow","groupedHistory","yesterday","twoDaysAgo","threeDaysAgo","fourDaysAgo","fiveDaysAgo","sixDaysAgo","lastWeek","twoWeeksAgo","threeWeeksAgo","fourWeeksAgo","lastMonth","older","entryDate","ISO_8601","entryComponent","components_BoardHistoryEntry","marshalFeedEvent","groupKey","isBefore","numOfWeeks","diff","numOfDays","convertToRelativeHistoryGroup","group","handleCloseHistory","boardHistoryGroups","components_BoardHistoryGroup","inline","Transition","animation","right","onScroll","HTMLDivElement","scrollHeight","scrollTop","overflowY","Accordion","doRedirect","setDoRedirect","redirectPath","setRedirectPath","retries","handleAckResponse","ackResponse","react_router","userBoards","BoardModule","showDropdown","setShowDropdown","showRemoveBoardConfirm","setShowRemoveBoardConfirm","redirectToBoard","setRedirectToBoard","Route","onOpen","readonly","vertical","compact","board_name","confirmButton","cancelButton","EditableTextline","enterText","setEnterText","hasError","setHasError","inputEl","handleBlur","onTextChanged","valueLength","charSize","minWidth","showInput","transparent","onBlur","newVal","widthUnit","borderBottom","components_EditableTextline","addTeamMode","onNameChanged","onCancelName","desc","onCancelDescription","isRevoked","setIsRevoked","cachedInvitation","ListItem","OpenInvitationList","components_OpenInvitation","relaxed","divided","isValidEmail","loadingInvitations","setLoadingInvitations","setInvitations","failedToLoad","setFailedToLoad","hasInvitations","components_OpenInvitationList","avatarLoaded","setAvatarLoaded","showRemoveMemberConfirm","setShowRemoveMemberConfirm","canBeRemoved","handleMemberClick","adminClass","onLoad","GridColumn","showDeleteModal","setShowDeleteModal","showAddUserModal","setShowAddUserModal","showAddBoardToTeamModal","setShowAddBoardToTeamModal","memberList","m","mA","mB","components_MemberEntry","components_BoardEntry","blueprint","components_EditableTeamHeader","onTeamAdded","isMovable","components_MoveTeamMenu","targetOrganizations","components_InviteUserToTeamModal","components_AddBoardToTeamModal","team_name","showCard","setShowCard","checkExistingTeams","setCheckExistingTeams","existingTeams","existingTeam","components_TeamCard","activeOrganizationInfo","teamsAreMovable","orgaInfo","teamCards","joinedTeamCards","components_JoinedTeamCard","components_AddTeamCard","floating","DisplayMode","TeamOverview_TeamTab","translateKey","MenuItem","BoardTopMenu","components_TopmenuLiteMode","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","NavLink","reload","doubling","emailVal","onEmailChange","onPermissionsChange","setUserEmail","setPermissions","closeAddUserModal","components_InviteUserToBoardModal","TopmenuAvatar","activeClassName","logout","BoardLink","activeCrumb","readOnly","Breadcrumb","Section","HomeLink","BoardOverviewCrumb","OrganizationOverviewCrumb","TeamOverviewCrumb","UpdatesCrumb","UserProfileCrumb","fixed","exact","BoardCrumb","ShareBoardButton","components_TopmenuAvatar","showModal","setShowModal","setBoardName","getUserQuota","components_BoardQuotaReachedModal","validateTeamExists","selectedTeam","setSelectedTeam","getTeamNameById","showAddTeamModal","setShowAddTeamModal","_useState13","_useState14","_useState15","_useState16","showRemoveTeamConfirm","setShowRemoveTeamConfirm","_useState17","_useState18","memberToRemove","_useState19","_useState20","teamToRemove","hidden","getUsernameByUserId","eyeIcon","components_AddTeamToBoardModal","ImportMode","BoardList","_ownVisibleBoards","isOrgaAdmin","ownVisibleBoards","ownHiddenBoards","ownBoard","boardListItems","Sidebar_BoardListItem","Sidebar_ShowMoreBoardsItem","badgeClasses","feedback","setFeedback","MessageContent","ERROR_MSG","Feedback","showFeedbackModal","setShowFeedbackModal","resetFeedbackModal","setResetFeedbackModal","textTransform","fontWeight","components_FeedbackModal","feedbackText","lastSelectedType","currentHistoryEntry","readFileContent","handleFileContent","extractBoardName","setDisabled","showQuotaModal","setShowQuotaModal","askForImportMode","setAskForImportMode","currentFile","setCurrentFile","existingBoardName","setExistingBoardName","setBoardId","processFile","importMode","newBoard","newBoardId","existingBoardList","existingBoard","updatedBoard","replaceBoard","logoLoaded","setLogoLoaded","BoardOverviewSearch","defaultTreeProps","parseFilter","parts","nodeIds","nodeTypes","nodeLabels","nodeTags","part","trim","strict","matchNode","matchesAllLabelParts","labelFilter","filterChildren","filteredChildren","isFeatureFilter","isFeatureTypeFilter","isContextFilter","isContextTypeFilter","filteredSubChildren","setChildren","filterElements","filteredElements","ele","ElementsTree","parsedFilter","nodeType","matchedEles","makeElementsTreeByBoardIdSelector","getElementsTreeByBoardId","lastFilterVal","withoutSelectedType","searchVal","selectedType","withSelectedType","validFilterType","filterIsOpen","mapLowercaseTypeToNodeType","elementsTreeSelector","elementsTree","searchInput","showFilter","setShowFilter","setSelectedType","searchHasFocus","setSearchHasFocus","dispatchFilterChange","handleClear","filterColor","focusClass","scrolling","DropdownMenu","DropdownItem","DropdownDivider","handleSelectType","borderTop","borderTopLeftRadius","borderBottomLeftRadius","onFocus","isFiltered","MxGraphBoardSearch","UpdateListEntry","viewed","format","UpdateList","MessageHeader","UpdatePage","update","updateIndex","components_UpdateListEntry","Sidebar_Logo","Sidebar_Upgrade","Sidebar_Search","Sidebar_ImportBoard","Sidebar_AddBoard","Sidebar_BoardOverview","Sidebar_BoardList","Sidebar_Updates","Sidebar_Feedback","LeafIcon","dblClickTimer","showChildren","setShowChildren","showSettings","setShowSettings","copyToLayerSuccess","nameEditMode","setNameEditMode","layerDeleteMode","setLayerDeleteMode","expand","visibleIcon","lockIcon","showCopySuccess","leafOpen","onActiveLayerChanged","handleLeafIconClick","onContextMenu","components_LeafIcon","fitted","closeOnTriggerBlur","closeOnTriggerMouseLeave","hideOnScroll","willBeVisible","onLayerVisibilityChanged","handleVisibleClick","deletable","EDITABLE_LAYER_INPUT_CHAR_SIZE","EDITABLE_LAYER_CHAR_SIZE_UNIT","EDITABLE_LAYER_ADDITIONAL_CHAR_PADDING","newLayerName","deleteMode","setDeleteMode","canHaveChildren","validChildren","isValidLeaf","hiddenClass","BoardTreeView_BoardTree","leafs","expandLeafs","BoardTree","BoardTreeView_BoardTreeLeaf","NoContextNode","getElementsTreeSelector","visibilityChanges","setVisibilityChanges","activeLayerChanges","setActiveLayerChanges","showNewLayerInput","setShowNewLayerInput","copyIntoLayerPossible","setCopyIntoLayerPossible","showCopyToLayerSuccess","setShowCopyToLayerSuccess","hasSelection","layers","getFilteredElementsAsTree","noContextNodes","contexts","others","noContextNode","layerName","BoardTreeView_BoardLayer","defaultLayerSetAsActive","handleLayerVisibilityChanged","BoardTreeView","CollapseToggle","iconClass","newCollapsed","setTeamName","iconUp","setIconUp","setMemberToRemove","angleIcon","contentClass","react_router_hash_link_lib","el","bodyRect","getBoundingClientRect","offsetPosition","scrollTo","behavior","TeamList","teamList","Sidebar_TeamListItem","arrowClick","setArrowClick","handleOrganizationClick","activeOrgaName","hasImplicitOrganization","orgaName","components_SideMenuOrganizationSwitch","Copyright","Sidebar_Organization","board_count","Sidebar_AddTeam","Sidebar_TeamOverview","Sidebar_TeamList","isBoardWorkspace","collabsableLeft","setCollabsableLeft","collapsible","Sidebar_OverviewSidebar","Sidebar_WorkspaceSidebar","Sidebar_Copyright","cjs_default","axis","onDrag","deltaX","onStop","Sidebar_CollapseToggle","activeGraphElementsSelector","links","isNodeWithMetadata","addKeyDownHandler","ctrlKey","onUpdateMetadata","activeNodeSources","activeNodeTargets","BoardElementDetails_ElementConnections","automaticLayout","scrollbar","alwaysConsumeMouseWheel","showSimilarElements","setShowSimilarElements","activeGraphElements","collabsableRight","setCollabsableRight","boardElementMetadataRef","similarElements","getFilteredElementsByTypeAndLabel","activeNode","getElement","activeSource","activeTarget","handleCloseElementDetails","BoardElementDetails_BoardElementMetadata","number","codyEmoji","CodyEmoji","CodyMessage","showDetails","setShowDetails","msgColor","detailsColor","detailsFontWeight","codyResponse","defaultStyle","detailsStyle","showDetailsIcon","CodyConsole_CodyEmoji","applyMessageStyle","msgAndStyles","msgParts","styles","spans","nextStyle","firstPart","partI","firstCharIsWhitespace","lastCharIsWhitespace","charAt","parseStyleString","cssProps","propStrs","_propStr$split","_propStr$split2","camelize","iioAvatar","InspectIoMessage","historyJson","loadCodyConsoleHistory","UserInput","lastCodyMsg","showConnectDefault","messageCount","defaultValue","onEnter","onEscape","UserMessage","RESERVED_NAMES","setMessages","setLastCodyMsg","collabsableBottom","setCollabsableBottom","consoleEl","sidebarWidth","bothSidebarsWidth","addMessage","scrollBy","CodyConsole_CodyMessage","CodyConsole_InspectIoMessage","handleCloseClick","CodyConsole_UserInput","CodyConsole_UserMessage","foundConnect","groups","foundDisconnect","deltaY","makeOrganizationInvitationSelector","getOrganizationInvitationById","hasEnoughQuota","Invitations_OpenOrganizationInvitation","currentUserIsOwner","isGuest","showNewOrga","setShowNewOrga","organizationData","components_OrganizationMemberEntry","guestList","InviteUserToOrganisationModal","components_OrganisationManagement","setBoardXml","decodeURIComponent","queryParams","shouldSave","loadedBoardXml","convertToTimeNumber","emptyZeros","convertDurationToHms","Number","h","convertHmsToDuration","calculateCurrentTime","hourglass","setHourglass","setCurrentTime","timeLeft","timerHours","timerMinutes","timerSeconds","leftPercentage","_convertDurationToHms","_convertDurationToHms2","intervalRef","minRef","hours","setHours","minutes","setMinutes","seconds","setSeconds","setDeadline","setDuration","setModerator","isPlaying","setIsPlaying","currentTime","setPausedTime","_useState21","_useState22","moderatorHasLeft","setModeratorHasLeft","ignorePausedTime","hoursMillis","minutesMillis","secondsMillis","_pausedTime","calculatedDuration","newDeadline","triggerMouseSync","handleRemoteTimerStarted","_convertDurationToHms3","_convertDurationToHms4","remoteHours","remoteMinutes","remoteSeconds","handleRemoteTimerStopped","handleRemoteTimerPaused","handleRemoteUserJoined","handleRemoteUserLeft","setInterval","clearInterval","_currentTime","currentHours","currentMinutes","currentSeconds","isTimeLeft","isModerator","canModerate","hoursVal","paddingRight","minutesVal","secondsVal","Main","BoardOverview","EditBoard","UserProfile","TeamOverview","MxGraphBoardRedirect","OrganizationOverview","AcceptOrganizationInvitation","BoardImportFromLink","Root","Layout_TopMenu","overflowX","flex","Layout_Sidebar","App_Main","NotificationsContainer","CodyConsole","BoardHistory","BoardElementDetails","headerKey","infoModalOpen","setInfoModalOpen","components_CollaborationInfoModal","components_Layout_TopMenu","AppStandalone_Main","App","store","baseName","es","react_redux_es","basename","AppStandalone_Root","authReducer","BoardOverviewState","filterDuplicates","filteredEntries","historyArr","skipNext","setPrevLabel","prevLabel","prevRecordedAt","prevAction","inspectioBoardsReducer","syncSummaryInfo","boardToUpdate","updateXmlFromSnapshot","boardToUpdateFetched","boardToSave","updateXmlAndVersionFromBoard","setIn","removeIn","_action$payload$socke","headVersion","currentVersion","teamsAdd","teamsRevoke","boardPermissionsForUsers","valueSeq","permissionEntry","boardPermissionsForTeams","boardElementsState","queues","boardQueue","enqueue","firstBoardChanged","queuedBoardChanged","dequeue","_aBoardHistory$histor","_pBoardHistory$histor","aBoardHistory","aNewEntries","currentLastEntry","lastEntry","pBoardHistory","pNewEntries","firstEntry","shift","pLastEntry","loadingHistoryState","loadingBoards","overview","oldElementsTree","mergeTree","oldFilteredTree","inspectioSidebarReducer","NotificationSystemReducer","idx","findIndex","lMsg","reducer","UserModel","inspectioUserReducer","BoardAction","settings_loaded","iioUsersInfo","rootReducer","notificationSystem","inspectioBoards","inspectioUsers","inspectioTeams","InspectioTeams","inspectioOrganizations","InspectioOrganizations","inspectioSidebar","formReducer","socketReducer","onDeleteBoard","standaloneDeleteBoardFlow","sagas_deleteBoardFlow_marked","sagas_deleteBoardFlow_marked2","standaloneFetchBoardStickyTemplatesFlow","boardData","stickyTemplateData","sagas_fetchBoardStickyTemplates_marked","sagas_fetchBoardStickyTemplates_marked2","onLoadUserSettings","onSignIn","standaloneFetchUserBoardsFlow","sagas_fetchUserBoardsFlow_marked","sagas_fetchUserBoardsFlow_marked2","sagas_fetchUserBoardsFlow_marked3","sagas_fetchUserBoardsFlow_marked4","standaloneFetchUserBoardFlow","sagas_fetchUserBoardFlow_marked","onImportExistingBoard","standaloneImportExistingBoardFlow","sagas_importExistingBoardFlow_marked","sagas_importExistingBoardFlow_marked2","onImportNewBoard","standaloneImportNewBoardFlow","sagas_importNewBoardFlow_marked","sagas_importNewBoardFlow_marked2","sagas_importStickyTemplates_marked","sagas_importStickyTemplates_marked2","onInstallUserBoard","standaloneInstallUserBoardFlow","sagas_installUserBoardFlow_marked","installUserBoardFlow_marked2","standaloneLoadBoardHistoryFlow","sagas_loadBoardHistoryFlow_marked","sagas_loadBoardHistoryFlow_marked2","standaloneSaveBoardFlow","sagas_saveBoardFlow_marked","sagas_saveBoardFlow_marked2","standaloneUpdateStickyTemplateFlow","oldStickyTemplateData","sagas_updateStickyTemplate_marked","sagas_updateStickyTemplate_marked2","sagas_updateStickyTemplate_marked3","standaloneUpsertUserSetting","upsertUserSettingFlow_marked","upsertUserSettingFlow_marked2","StandaloneSaga","rootSaga","rootSagas","saga","spawn","all","saga_marked","configureStore","composeEnhancers","composeWithDevTools","sagaMiddleware","createSagaMiddleware","createStore","applyMiddleware","run","createBrowserHistory","__webpack_exports__","Keycloak","process","realm","ReactDOM","AppStandalone","de","translation","app","welcome","topmenu","save","confirm","yes","no","back","generateTemplate","showLess","learnMore","stickyTypes","insp","hint","learn_more","got_it","new_logo_header","new_logo_text","new_domain_header","new_domain_text","all_boards","add_board","last_modified","fetch_board_error","shared_board","empty_space","element_details","json_invalid_title","json_invalid_text","no_element_selected","update_similar_elements_text","update_similar_elements_link","no_boards_left_warning","boards_left_warning","boards_left_warning_upgrade","top_menu","activity","import_board","export_board","activate_lite_mode","lite_mode_is_active","lite_mode_is_active_details","collaboration_modal","header_team","header_history","import","import_existing_board","btn_replace_board","btn_import_as_new","edit_header","share","share_sub","delete_txt1","delete_link","delete_txt2","really_delete","btn_add_save","btn_share","btn_send_invitation","btn_send","invite_user","user_email","remove_user_confirm_title","remove_user_confirm_text","select_image","drag_and_drop_info","upload_failed_title","upload_failed_text","deletion_failed_title","deletion_failed_text","paste_failed","invalid_file_pasted","headline","select_board","select_event","tasklink","invitation_resend","invitation_revoke","sticky_templates","descriptions","advanced_config","upload_info","uploaded_schema_invalid_title","uploaded_schema_invalid_text","moved_to_sidebar_header","moved_to_sidebar_details","moved_to_sidebar_wiki_text","delete_confirmation","add_layer","set_global_visibility","refresh_layers","folder_title","delete_layer","lock_layer","edit_name","insert_selection","move_to_organization_title","move_to_organization_sub_title","move_to_organization_desc","move_to_organization_select","move_to_organization_submit","modal_header","organisation","switch_hint_header","switch_hint","switch_hint_ok","create_btn","not_explicit","no_member_quota","no_admin","remove_user_confirm_button","send_invitation","open_invitations","empty_invitations","promote_to_admin","demote_to_member","promote_to_member","overview_add","team_description","add_user","remove_board_confirm_title","remove_board_confirm_text","remove_board_confirm_button","add_to_board","grant_access","choose","choose_board","remove_from_board_confirm_title","remove_from_board_confirm_text","remove_team_confirm_title","remove_team_confirm_text","error_loading_invitations","no_teams","profile_headline","profile_subline","quota_reached","quota_reached_user","quota_reached_guest","team_quota_reached","labels","company","fields","avatar_upload","select_photo","change_password","passwords_not_matching_title","passwords_not_matching_text","info_text","direct_msg","betaModal","en","notConfigured","createClient","retrieveSecret","createConfirmTitle","createConfirmText","resetConfirmTitle","resetConfirmText","removeConfirmTitle","removeConfirmText","removeText"],"mappings":"q4EAAA,SAAAA,EAAAC,GACA,IAAAC,EAAA,IAAAC,MAAA,uBAAAF,EAAA,KAEA,MADAC,EAAAE,KAAA,mBACAF,EAEAF,EAAAK,KAAA,WAAuC,UACvCL,EAAAM,QAAAN,EACAO,EAAAC,QAAAR,EACAA,EAAAS,GAAA,2BCRAF,EAAAC,QAAiBE,EAAAC,EAAuB,qDCAxCJ,EAAAC,QAAA,ikBCAAD,EAAAC,QAAA,+9lCCSII,iFAgDWC,WAAA,SAACC,GACZ,OAAO,IAAIC,QACP,SAACT,EAASU,GACNC,KAAIC,OACAJ,EACAF,GAEA,SAACO,EAAqBC,GAClB,OAAID,GACAE,QAAQC,IAAI,CAACH,UACNH,EAAOG,IAGXb,EAAQ,CACXQ,QACAM,6CChETG,GAJSC,KAAMC,OAAO,CACnCC,QAAS,uCCHIC,aAAG,CACdC,KAAM,iBACNC,aAAa,EACbC,cAAc,EACdC,iBAAkB,CACdC,QAAS,CACLC,aAAc,OCiBbC,GAAqB,SAACpB,GAC/BS,GAAgBY,SAASC,QAAQC,cAAgB,UAAYvB,EAE7DwB,GAAiBX,GAAGY,KAAKR,iBAAkBC,QAAQC,aAAaI,cAAgB,UAAYvB,EAE5F,IAAM0B,EAAc,IAAIC,KACxBD,EAAYE,QAAQF,EAAYG,UAAY,KAC5CC,SAASC,OAAS,SAAW/B,EAAQ,iCAAmC0B,EAAYM,eAG3EC,GAAkB,SAACC,EAAqBC,GACjD,OAAOC,GAAIC,KAAKH,EAAaC,GACxBG,KAAK,SAACC,GAAD,MAA8B,CAACA,cACpCC,MAAM,SAACnC,GAAD,MAAwB,CAACA,MAAOA,EAAMkC,aAGxCE,GAA2B,SAACP,EAAqBC,GAC1D,OAAOC,GAAIC,KAAKH,EAAaC,EAAS,CAAEvB,QAAS,kCAC5C0B,KAAK,SAACC,GAAD,MAA8B,CAACA,cACpCC,MAAM,SAACnC,GAAD,MAAwB,CAACA,MAAOA,EAAMkC,uICzC/CG,GAAYC,EAAQ,KAW1BC,KAGKC,IAAIC,MAKJC,KAAK,CACFC,UAlBiB,CAErBC,MAAO,CAAC,cAAe,SAAU,eAAgB,YAAa,UAAW,OAAQ,aAGjFC,OAAQ,CAAC,eAAgB,UACzBC,gBAAiB,CAAC,WAadC,YAAa,KACbC,OAAO,EAEPX,aAIAY,MAAO,CACHC,MAAM,KAIHX,UAAf,+DClCO,SAASY,GAAeC,GAC3BC,qBAAU,WAGN,OAFA5B,SAAS6B,qBAAqB,QAAQ,GAAGC,iBAAiB,QAASH,GAE5D,WACH3B,SAAS6B,qBAAqB,QAAQ,GAAGE,oBAAoB,QAASJ,KAE3E,oCCaDK,GAAoC,CACtCC,MAAO,GACPC,QAAS,GACTC,MAAO,OACPC,SAAU,KACVC,YAAa,EACbC,aAAa,EACbC,SAAS,EACTC,SAAKC,EACLC,OAAQ,KACRC,iBAAiB,GAGRC,GAAb,SAAAC,GAEI,SAAAD,EAAmBE,GAA6B,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAL,QAC5BH,IAAbK,EAAKN,MACLM,EAAKN,IAAMU,SAF6BH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAH,GAAAS,KAAAJ,KAItCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAH,EAAAC,GAAAE,OAAAQ,GAAA,EAAAR,CAAAH,EAAA,EAAAY,IAAA,gBAAAC,MAAA,WAUQ,OAAOR,KAAKS,IAAI,WAAW,KAVnC,CAAAF,IAAA,YAAAC,MAAA,WAcQ,OAAO,OAASR,KAAKP,WAd7BE,EAAA,CAA6Be,kBAAO3B,KClCvB4B,GAAS,8BCGTC,GAAS,SAAC3B,GAAD,OAA0CQ,kBAAOkB,GAAQ1B,IAElE4B,GAAQ,SAAC7B,EAAeC,GAA2E,IAA1D6B,EAA0DC,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,QAAhCvB,EAAWJ,EAAqB2B,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAP,EAC/FE,EAAM,IAAIC,EAAkBvB,QAAQ,CAClCX,QACAC,UACA6B,QACA5B,MAAO,OACPE,gBAGR,OAAOK,kBAAOkB,GAAQM,IAGb3F,GAAS,SAAC0D,EAAeC,GAA0D,IAAzC6B,EAAyCC,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,QAAfvB,EACvEyB,EAAM,IAAIC,EAAkBvB,QAAQ,CAClCX,QACAC,UACA6B,QACA5B,MAAO,QACPE,YAAa,IAGrB,OAAOK,kBAAOkB,GAAQM,ICvBbE,GAAwB,SAAClC,GAAD,OAAwCQ,kBFF9C,sCEEsER,2CC4B3FmC,SAAMC,KAAKC,KAEPF,SAAMG,SAASC,mBC7BhBC,GAAwB,SAACC,EAAYC,GAAb,OAA4BD,EAAME,MAAM,CAAC,qBAAsB,YAAaC,kBAAO,MCWlHC,GDF2C,WAC7C,IAAMC,EAPCC,aACH,CAACP,IACD,SAACQ,GAAD,OAAgFA,IAOpF,OAAO,SAACP,EAAyBC,GAG7B,MAAO,CACHM,SAHaF,EAAiBL,EAAOC,KCFzBO,GAYpBC,GAA6B,GAE3BC,GAAwB,SAACH,EAA2CI,EAAqDV,GAC3HM,EAASK,OAAO,SAAC9B,GACb,QAAKA,IAGGA,EAAMlB,UAEbiD,QAAQ,SAACtB,GACN,GAAKA,KAIFA,EAAI1B,MAAO4C,GAAiBK,SAASvB,EAAI1B,MAA5C,CAIA,IAAIN,EAAegC,EAAIhC,QAEpBA,aAAmB3E,QAClB2E,EAAUA,EAAQA,SAEnBgC,EAAI1B,KACH4C,GAAiBM,KAAKxB,EAAI1B,KAG9B6B,iBACIsB,GAAAC,EAAAC,cAAA,WAAKF,GAAAC,EAAAC,cAAA,SAAGF,GAAAC,EAAAC,cAAA,cAAUjB,EAAMkB,EAAE5B,EAAIjC,MAAM,MAAkB2C,EAAMkB,EAAE5D,IAC9D,CACI6D,KAAM7B,EAAI/B,MACV6D,UAAyB,UAAd9B,EAAI/B,OAA2B,IAC1CQ,gBAAiBuB,EAAIvB,gBACrBsD,QAAS,WACF/B,EAAI1B,MACH4C,GAAmBA,GAAiBG,OAAO,SAAA/C,GAAG,OAAIA,IAAQ0B,EAAI1B,OAElE8C,EAAUpB,EAAIgC,wBAMvBC,kBAAiBC,aAC5BC,mBAAQtB,GApDe,SAACuB,GAAD,OAAwBC,8BAC/C,CACIC,WAAYC,EAAQ3C,KACpBwB,UAAWoB,EAAMtC,uBAErBkC,KAgDAK,aAAU,CACNC,kBADM,WACc,IAAAC,EAEZ5D,KAAK2B,MADDM,EADQ2B,EACR3B,SAAUI,EADFuB,EACEvB,UAGbJ,GAILG,GAAsBH,EAAUI,EAAWrC,KAAK2B,QAEpDkC,mBAXM,WAWe,IAAAC,EAEb9D,KAAK2B,MADDM,EADS6B,EACT7B,SAAUI,EADDyB,EACCzB,UAGbJ,GAILG,GAAsBH,EAAUI,EAAWrC,KAAK2B,UArB5BwB,CFhCH,SAACxB,GAAD,OACzBpD,GAAA,cAACwF,GAAA,eAAD,CAAgB5E,SAAUiC,SAAMG,SAASC,iBGtChCwC,GAAY,aACZC,GAAcD,0BAEdE,GAAiC,SAACC,GAAD,MAA8BH,oBAAwBG,GACvFC,GAA4B,SAACC,GAAD,OAA0E,IAA3CA,EAASC,OAAON,sBAG3EO,GAAqBP,8BACrBQ,GAA4B,SAACL,GAAD,MAA8BH,0BAA8BG,GAQxFM,GAAgBT,6BAIhBU,GAA8B,SAACP,GAAD,OACvC,SAACQ,GAAD,OAAYC,KAAmBV,GAA+BC,GAAlD,UAAAU,OAAwEF,EAAxE,eAEVC,GAAiB,WACnB,OAAQE,OAAOC,SAASC,SAAW,KAAOF,OAAOC,SAASE,MC1BjDC,GAAiB,aAEjBC,GAAU,0BAGVC,GAAa,yBACbC,GAAsB,iCAGtBC,GAAwB,uCACxBC,GAAuB,sCACvBC,GAAwB,uCAGxBC,GAAiB,+BACjBC,GAAkB,mCAClBC,GAAsB,sCAGtBC,GAA6B,6CAC7BC,GAA+B,+CCb/BC,GAAS,SAACC,GAAD,OAA8BtG,kBAAO0F,GAAS,CAACY,UAExDC,GAAgB,SAACD,EAA0BE,GAA3B,OAAqDxG,kBAAOgG,GAAgB,CAACM,OAAME,eAEnGC,GAAiB,SAACC,GAAD,OAAsB1G,kBAAOiG,GAAiB,CAACS,cAEhEC,GAAoB,SAAC7F,EAAaC,GAAd,OAA2Cf,kBAAOkG,GAAqB,CAACpF,MAAKC,WAEjG6F,GAA2B,SAACC,GAAD,OAA2C7G,kBAAOmG,GAA4B,CAACU,oBCF1GC,GAAU,SAACC,GACpB,OAAOtJ,GAAgB,iBAAkB,CAACsJ,YAGjCC,GAAe,SACxBD,EACAE,EACAC,EACAC,EACAzH,GAMA,OAAQjC,GACJ,yBACA,CAACsJ,SAAQK,KAAMH,EAAUC,MAN7BA,EAAQA,GAAS,KAMmBC,UALpCA,EAAYA,GAAa,KAKsBzH,SAJ/CA,EAAWA,GAAY,QAQd2H,GAAwB,SAACC,GAClC,OAAO7J,GAAgB,kBAAmB,CAAC6J,aAGlCC,GAA8B,SAACL,GACxC,OAAOzJ,GAAgB,qBAAsB,CAACyJ,WAGrCM,GAAkB,WAC3B,OAAO/J,GAAgB,yBAA0B,KAGxCkJ,GAAoB,SAAC7F,EAAaC,GAC3C,OAAOtD,GAAgB,8BAA+B,CAACqD,MAAKC,MAAO0G,OAAO1G,MAGjEwF,GAAgB,SAACD,GAC1B,IAAMlG,EAAO,CACT2G,OAAQT,EAAKxG,IACboH,MAAOZ,EAAKY,MACZD,SAAUX,EAAKc,KACfD,UAAWb,EAAKa,UAChBO,YAAapB,EAAKoB,YAClBC,YAAarB,EAAKqB,YAClBC,SAAUtB,EAAKsB,UAGnB,OAAO3J,GAAyB,iBAAkBmC,IAGzCqG,GAAiB,SAACM,EAAgBL,GAO3C,OAAOzI,GAAyB,iBANnB,CACT8I,SACAc,WAAW,EACXnB,cAMKoB,GAAe,SAACf,EAAgBgB,GACzC,Ob5BmCrK,Ea4BLqJ,Eb5B0BpJ,Ea4BlBoK,Eb3B/BnK,GAAIC,KAAKH,EAAaC,EAAQ,CAAEvB,QAAS,aADd,IAACsB,EAAqBC,Ga+B/CqK,GAAe,SAACjB,GACzB,Ob5BqCrJ,Ea4BLqJ,Eb3BzBnJ,GAAIqK,OAAOvK,EAAa,CAAEtB,QAAS,aADN,IAACsB,Ga+B5BkJ,GAA2B,SAACG,EAAgBF,GACrD,OAAOpJ,GAAgBgI,GAAiB,2BAA4B,CAAEsB,SAAQF,oBCvErEqB,GAAqB,SAACC,GAAD,OAAkCnI,kBAAO6F,GAAuB,CAACsC,eAEtFC,GAAqB,SAACC,GAAD,OAAgCrI,kBAAO8F,GAAsB,CAACuC,kBAEnFC,GAAsB,SAACxH,EAAaC,GAAd,OAA2Cf,kBAAO+F,GAAuB,CAACjF,MAAKC,WAErGwH,GAA6B,SAACjC,GAAD,OAAoBtG,kBAAOoG,GAA8BE,IClBtFkC,GAAoB,0BCQpBC,GAAmB,SAAQC,EAA6BC,EAA4BC,GAAjE,OAAsF5I,kBAAOwI,GAAmB,CAACE,UAASC,qBAAoBC,cAEjKC,GAAkB,SAAWF,EAA4BG,EAAqBF,GAA5D,OAAiF5I,kBAAO2I,EAAoB,CAACG,UAASF,cAExIG,GAAe,SAACJ,GAAD,OAAgC3I,kBDX9B,uBCWqD,CAAC2I,wBCXvEK,GAA8B,SAAItL,EAAqBC,GAChE,MAAO,CACHsL,IAAKvL,EACLwL,OAAQ,OACRpM,QAAS,CACLqM,eAAgB,oBAEpB/I,KAAMgJ,KAAKC,UAAU1L,GACrB2L,aAAc,oCCJf,IAAMC,GAAY,SAACxC,GACtB,OAAOyC,EAAiBf,gBAAoBe,EAAqBR,2BAC7DvD,GAAiB,OACjB,CAACsB,WACFpB,KAGM8D,GAAgB,SAACnC,GAAD,OAAuBtH,kBAAO4F,GAAqB,CAAC0B,aCVpEoC,GAAY,OACZC,GAAa,QACbC,GAAe,UACfC,GAAc,SAoBdC,GAAiC,CAC1CC,YAAaL,IAGJM,GAAoB,SAACD,GAC9B,OAAQA,GACJ,KAAKL,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACD,MACJ,QACI,MAAM,IAAIhP,MAAM,6BAA+BkP,EAAc,gBAI5DE,GAAa,SAACF,GAAD,OAA8B,IAAIG,GAAQ,CAACH,iBAExDI,GAAgB,SAACC,GAC1B,IAAIL,EAAcM,KACdC,EAAeD,KAWnB,OATAD,EAAMtH,QAAQ,SAAC/B,GACqB,OAA5BA,EAAMwJ,MAAM,cACZD,EAAe,IAAIJ,GAAQ,CAACH,YAAahJ,EAAMyJ,QAAQ,WAAY,OAElDC,oBAAoBV,KACjCA,EAAcO,KAInBP,GAGEM,GAAc,kBAAe,IAAIH,GAAQ,CAACH,YAAaL,MAEvDQ,GAAb,SAAA/J,GACI,SAAA+J,EAAmB9J,GAAoB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAA2J,GACpCF,GAAkB5J,EAAK2J,aADY1J,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA6J,GAAAvJ,KAAAJ,KAE7BH,IAHd,OAAAC,OAAAO,GAAA,EAAAP,CAAA6J,EAAA/J,GAAAE,OAAAQ,GAAA,EAAAR,CAAA6J,EAAA,EAAApJ,IAAA,gBAAAC,MAAA,WAOQ,OAAOR,KAAKwJ,cAAgBL,KAPpC,CAAA5I,IAAA,iBAAAC,MAAA,WAWQ,OAAOR,KAAKwJ,cAAgBJ,KAXpC,CAAA7I,IAAA,mBAAAC,MAAA,WAeQ,OAAOR,KAAKwJ,cAAgBH,KAfpC,CAAA9I,IAAA,kBAAAC,MAAA,WAmBQ,OAAOR,KAAKwJ,cAAgBF,KAnBpC,CAAA/I,IAAA,sBAAAC,MAAA,SAsB+B2J,GACvB,OAAInK,KAAKwJ,cAAgBW,EAAMX,aAI3BxJ,KAAKwJ,cAAgBL,KAIrBgB,EAAMX,cAAgBL,KAItBnJ,KAAKwJ,cAAgBF,IAIrBa,EAAMX,cAAgBF,IAItBtJ,KAAKwJ,cAAgBH,OA3CjC,CAAA9I,IAAA,SAAAC,MAAA,SAkDkB2J,GACV,OAAOnK,KAAKwJ,cAAgBW,EAAMX,gBAnD1CG,EAAA,CAA6BjJ,kBAAO6I,KC5C7B,SAASa,GAAaC,GACzB,MAAgC,SAA3BA,EAAmBC,IAMrB,SAASC,GAAaF,GACzB,MAAgC,UAA3BA,EAAmBC,IAOrB,SAASE,GAAWH,GACvB,MAAO,CAAE7J,MAAO6J,EAAKC,IAAK,QAGvB,SAASG,GAAWJ,GACvB,MAAO,CAAE7J,MAAO6J,EAAKC,IAAK,SAiBvB,SAASI,GAAeL,GAAgE,QAAAM,EAAA5J,UAAAC,OAArD4J,EAAqD,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAArDF,EAAqDE,EAAA,GAAA/J,UAAA+J,GAC3F,QAAAC,EAAA,EAAAA,EAAyBH,EAAzB5J,OAAA+J,IAAqC,KAAAC,EAAZJ,EAAYG,GAAAjH,EAAAhE,OAAAmL,GAAA,EAAAnL,CAAAkL,EAAA,GAAzBlQ,EAAyBgJ,EAAA,GAAtBxI,EAAsBwI,EAAA,GACjC,IAAKhJ,EAAEuP,GACH,OAAOG,GAAQlP,GAGvB,OAAOmP,GAAQJ,GAGZ,SAASa,KAAsF,QAAAC,EAAApK,UAAAC,OAAhE4J,EAAgE,IAAAC,MAAAM,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAhER,EAAgEQ,GAAArK,UAAAqK,GAClG,OAAO,SAACf,GACJ,OAAOK,GAAQW,WAAR,GAAShB,GAATxF,OAAiB+F,KAoBzB,SAASU,GAAWC,GACvB,OAAO,SAAClB,GAAD,OAAYkB,EAAKlB,IAGrB,SAASmB,GAAqBD,GACjC,OAAO,SAACE,GACJ,IAAMC,EAAe,GADHC,GAAA,EAAAC,GAAA,EAAAC,OAAArM,EAAA,IAGlB,QAAAsM,EAAAC,EAAkBN,EAAlBO,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAAwB,KAAdS,EAAcN,EAAAtL,MACd6L,EAASd,EAAKa,GAEpB,GAAGhC,GAAUiC,GACT,OAAOA,EAGXX,EAAQjJ,KAAK4J,EAAO7L,QAVN,MAAA8L,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAI,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAX,EAAA,MAAAC,GAalB,OAAOpB,GAAQiB,IAIhB,SAASc,GAAWnC,GAA6D,QAAAoC,EAAA1L,UAAAC,OAAlD0L,EAAkD,IAAA7B,MAAA4B,EAAA,EAAAA,EAAA,KAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAlDD,EAAkDC,EAAA,GAAA5L,UAAA4L,GACpF,QAAAC,EAAA,EAAAA,EAAyBF,EAAzB1L,OAAA4L,IAAgC,CAA3B,IACKP,GAASQ,EADMH,EAAJE,IACSvC,GAE1B,GAAGD,GAAUiC,GACT,OAAOA,EAGXhC,EAAMgC,EAAO7L,MAGjB,OAAOiK,GAAQJ,gBCpHNyC,GAAU,SAAGvM,GACtB,OAAO,SAACwM,GACJ,QAAIC,YAAWD,IAIRC,OAAMD,EAAKxM,KAIb0M,GAAW,WACpB,OAAO,SAACF,GACJ,OAAOC,WAAUD,KCRZG,GAAiB,cAcjBC,GAA4C,CACrD5N,IAAK,GACLiH,OAAQ,GACRE,SAAU,GACVE,UAAW,GACXwG,WAAW,EACXC,cAAeH,GACf/N,SAAU,GACVwH,MAAO,IAGJ,SAAS2G,GAAgCzN,GAC5C,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,UAAW,kBACnB,CAACA,GAAO,YAAa,uBAAuBjN,EAAK2G,QACjD,CAACsG,GAAO,aAAc,wBAAwBjN,EAAK2G,QACnD,CAACsG,GAAO,YAAa,uBAAuBjN,EAAK2G,QACjD,CAACsG,GAAO,SAAU,oBAAoBjN,EAAK2G,SAG/C,OAAG4D,GAAUmD,GACFA,EAGJ9C,GAAQ,IAAI+C,GAAJ1N,OAAA2N,GAAA,EAAA3N,CAAA,GACRqN,GACAtN,EAFQ,CAGXN,IAAKM,EAAK2G,WAIX,SAASkH,KACZ,OAAO,IAAIF,GAAYL,IAGpB,IAAMK,GAAb,SAAA5N,GACI,SAAA4N,EAAmB3N,GAAwB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAwN,GACrB,KAAhB3N,EAAK2G,SACJ3G,EAAKuN,WAAY,GAFkBtN,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA0N,GAAApN,KAAAJ,KAKjCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA0N,EAAA5N,GAAAE,OAAAQ,GAAA,EAAAR,CAAA0N,EAAA,EAAAjN,IAAA,SAAAC,MAAA,WAUQ,OAAGR,KAAKoN,UACG,GAGW,KAAnBpN,KAAK4G,UACG5G,KAAK2N,2BAGT3N,KAAK4G,YAlBpB,CAAArG,IAAA,2BAAAC,MAAA,WAsBQ,iBAAAqE,OAAkB7E,KAAKwG,OAAvB,iBAAA3B,OAA6C7E,KAAK0G,cAtB1D8G,EAAA,CAAiC9M,kBAAOyM,KCrD3BS,GAAiB,YACjBC,GAAY,OACZC,GAAa,QAiBbvE,GAA8B,CACvCzG,KAAM8K,IAGGG,GAAc,SAACC,GAAD,OAA0B,IAAIC,GAAK,CAACnL,KAAMkL,KAExDE,GAAgB,kBAAY,IAAID,GAAK,CAACnL,KAAM8K,MAE5CO,GAAiB,SAACrL,GAC3B,OAAQA,GACJ,KAAK8K,GACL,KAAKC,GACL,KAAKC,GACD,MACJ,QACI,MAAM,IAAIxT,MAAM,sBAAwBwI,EAAO,gBAI9CmL,GAAb,SAAArO,GACI,SAAAqO,EAAmBpO,GAAiB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAiO,GACjCE,GAAetO,EAAKiD,MADYhD,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAmO,GAAA7N,KAAAJ,KAE1BH,IAHd,OAAAC,OAAAO,GAAA,EAAAP,CAAAmO,EAAArO,GAAAE,OAAAQ,GAAA,EAAAR,CAAAmO,EAAA,EAAA1N,IAAA,cAAAC,MAAA,WAOQ,OAAOR,KAAK8C,OAAS8K,KAP7B,CAAArN,IAAA,SAAAC,MAAA,WAWQ,OAAOR,KAAK8C,OAAS+K,KAX7B,CAAAtN,IAAA,UAAAC,MAAA,WAeQ,OAAOR,KAAK8C,OAASgL,KAf7B,CAAAvN,IAAA,SAAAC,MAAA,SAkBkB2J,GACV,OAAOnK,KAAK8C,OAASqH,EAAMrH,SAnBnCmL,EAAA,CAA0BvN,kBAAO6I,KCjCpB6E,GAAgB,kBAAM,IAAIC,GAAQ,CAACC,QAASC,iBAA0C9N,IAAI+N,EAAUZ,eAAgBY,EAAUN,oBAE9HO,GAAY,SAAC5E,GACtB,IAAI6E,EAAmBH,iBASvB,OAPA1E,EAAMtH,QAAQ,SAAC/B,GACX,GAAI,OAASA,EAAMwJ,MAAM,YAAa,CAClC,IAAMgE,EAAO,IAAIQ,EAAUP,KAAK,CAACnL,KAAMtC,IACvCkO,EAAMA,EAAIjO,IAAIuN,EAAKlL,KAAMkL,MAI1B,IAAIK,GAAQ,CAACC,QAASI,KAgBpBnF,GAAiC,CAC1C+E,QA/BoBC,iBAA0C9N,IAAI+N,EAAUZ,eAAgBY,EAAUN,kBAkC7FG,GAAb,SAAAzO,GACI,SAAAyO,EAAmBxO,GAAoB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAqO,GAChCxO,EAAKyO,QAAQK,YACb9O,EAAKyO,QAAUzO,EAAKyO,QAAQ7N,IAAI+N,EAAUZ,eAAgBY,EAAUN,kBAFrCpO,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAuO,GAAAjO,KAAAJ,KAI7BH,IALd,OAAAC,OAAAO,GAAA,EAAAP,CAAAuO,EAAAzO,GAAAE,OAAAQ,GAAA,EAAAR,CAAAuO,EAAA,EAAA9N,IAAA,cAAAC,MAAA,WASQ,OAAOR,KAAKsO,QAAQM,IAAIJ,EAAUZ,kBAT1C,CAAArN,IAAA,SAAAC,MAAA,WAaQ,OAAOR,KAAKsO,QAAQM,IAAIJ,EAAUX,aAb1C,CAAAtN,IAAA,UAAAC,MAAA,WAiBQ,OAAOR,KAAKsO,QAAQM,IAAIJ,EAAUV,cAjB1C,CAAAvN,IAAA,SAAAC,MAAA,SAoBkB2J,GACV,OAAOnK,KAAKsO,QAAQO,OAAO1E,OArBnCkE,EAAA,CAA6B3N,kBAAO6I,KCFvBA,GAA8B,CACvChK,IAAK,GACLsH,KAAM,GACNF,MAAO,GACPmI,UAAW,GACXC,WAAY,GACZlF,MAAOmF,EAAaZ,gBACpBa,QAASC,EAAapF,cACtBqF,MAAO,EACPC,UAAW,EACXjI,YAAa,GACbP,UAAW,GACXQ,YAAa,GACbC,SAAU,GACVgI,mBAAoB,KACpBC,UAAU,GAGDC,GAAb,SAAA3P,GACI,SAAA2P,EAAmB1P,GAAiB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAuP,GAChB,KAAb1P,EAAKN,MACLM,EAAKN,IAAMU,SAFiBH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAyP,GAAAnP,KAAAJ,KAK1BH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAyP,EAAA3P,GAAAE,OAAAQ,GAAA,EAAAR,CAAAyP,EAAA,EAAAhP,IAAA,2BAAAC,MAAA,WAUQ,iBAAAqE,OAAkB7E,KAAKT,IAAvB,iBAAAsF,OAA0C7E,KAAKmH,iBAVvDoI,EAAA,CAA8B7O,kBAAO6I,kBCzC3BiG,iBAMAC,iBA6BOC,IAnCjB,SAAUF,GAAgB/P,GAA1B,IAAAjC,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACqB,OADrB2D,EAAA3D,KAAA,EAC2B9L,aAAK2P,EAAWjJ,sBAAuBrH,EAAOrC,QAAQ2J,SADjF,OAGI,OAFMvJ,EADVqS,EAAAG,KAAAH,EAAA3D,KAAA,EAGU9L,aAAKqP,GAAYjS,GAH3B,wBAAAqS,EAAAI,SAAAC,GAAAlQ,MAMA,SAAUyP,GAAV7L,GAAA,IAAApG,EAAAlC,EAAA6U,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAArE,EAAA,OAAAsD,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,UAAsB1O,EAAtBoG,EAAsBpG,WAAUlC,EAAhCsI,EAAgCtI,OAAhC,CAAAqV,EAAAzE,KAAA,QAIQ,OADA1Q,QAAQF,MAAM,gBAAiB,2BAA4BA,GAHnEqV,EAAAzE,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,6BAJ9D,WAOQkC,EAPR,CAAAmT,EAAAzE,KAAA,SAQciE,EAAgF3S,EAASqC,KAC3FuQ,EAAeU,kBAT3BT,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAmR,EAAAb,KAAA,GAAAU,EAW8BL,EAX9BnE,OAAAC,YAAA,WAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAAwE,EAAAzE,KAAA,YAWmBwE,EAXnBD,EAAAjQ,OAce4J,GAFGiC,EAASiB,GAAgCoD,IAZ3D,CAAAC,EAAAzE,KAAA,SAiBgB,OADA1Q,QAAQF,MAAM,mDAAoD+Q,EAAO7L,MAAOkQ,GAhBhGC,EAAAzE,KAAA,GAiBsB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,6BAjBtE,QAoBeiP,GAAU8B,KACT+D,EAAeA,EAAa3N,KAAK4J,EAAO7L,QArBxD,QAAA6P,GAAA,EAAAM,EAAAzE,KAAA,iBAAAyE,EAAAzE,KAAA,iBAAAyE,EAAAb,KAAA,GAAAa,EAAAI,GAAAJ,EAAA,UAAAL,GAAA,EAAAC,EAAAI,EAAAI,GAAA,QAAAJ,EAAAb,KAAA,GAAAa,EAAAb,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAoE,EAAAb,KAAA,IAAAQ,EAAA,CAAAK,EAAAzE,KAAA,eAAAqE,EAAA,eAAAI,EAAAK,OAAA,mBAAAL,EAAAK,OAAA,YAyBQ,OAzBRL,EAAAzE,KAAA,GAyBc0E,aAAIb,EAAapI,mBAAmByI,IAzBlD,yBAAAO,EAAAV,SAAAgB,GAAAjR,KAAA,6BA6BO,SAAU0P,KAAV,IAAAjQ,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE4B,OAF5BgF,EAAAhF,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY1K,sBAHjB,OAEO5F,EAFPyR,EAAAlB,KAAAkB,EAAAH,GAMStR,EAAOqD,KANhBoO,EAAAhF,KAAAgF,EAAAH,KAOU1L,GAPV,kBAQS,OART6L,EAAAhF,KAAA,EAQekF,aAAK5B,GAAiB/P,GARrC,cAAAyR,EAAAG,OAAA,oBAAAH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAAqB,GAAAtR,MC3CA,ICKKuR,MDLCC,GAA0B,SAAClL,GACpC,OAAOpJ,GAAgBgI,GAAiB,0BAA2B,CAAEoB,oBAG5DmL,GAA4B,SAACnL,GACtC,OAAOpJ,GAAgBgI,GAAiB,4BAA6B,CAAEoB,oBAG9DoL,GAA4B,SAACpL,EAAgCO,GACtE,OAAO3J,GAAgBgI,GAAiB,4BAA6B,CAACoB,iBAAgBO,UAG7E8K,GAAoB,SAACrL,GAC9B,OAAOpJ,GAAgBgI,GAAiB,eAAgB,CAAEoB,oBAGjDsL,GAAyB,WAClC,OAAO1U,GAAgBgI,GAAiB,oBAAqB,KAGpD2M,GAA2B,SAACvL,EAAgCwL,EAAwCC,GAC7G,OAAO7U,GAAgBgI,GAAiB,2BAA4B,CAACoB,iBAAgBwL,eAAcC,sBAG1FC,GAAmC,SAAC1L,EAAgCyL,GAC7E,OAAO7U,GAAgBgI,GAAiB,mCAAoC,CAACoB,iBAAgByL,sBAGpFE,GAAmC,SAAC3L,EAAgCyL,GAC7E,OAAO7U,GAAgBgI,GAAiB,mCAAoC,CAACoB,iBAAgByL,sBAGpFG,GAAiC,SAAC5L,EAAgCwL,GAC3E,OAAO5U,GAAgBgI,GAAiB,iCAAkC,CAACoB,iBAAgBwL,kBAGlFK,GAAiC,SAAC7L,EAAgCE,GAC3E,OAAOtJ,GAAgBgI,GAAiB,iCAAkC,CAACoB,iBAAgBE,YAGlF4L,GAAiC,SAAC9L,EAAgCE,GAC3E,OAAOtJ,GAAgBgI,GAAiB,iCAAkC,CAACoB,iBAAgBE,YAGlF6L,GAA6B,SAAC/L,EAAgCE,GACvE,OAAOtJ,GAAgBgI,GAAiB,6BAA8B,CAACoB,iBAAgBE,YAG9E8L,GAAqB,SAAChM,EAAgCiM,GAC/D,OAAOrV,GAAgBgI,GAAiB,qBAAsB,CAACoB,iBAAgBiM,aAGtEC,GAA8B,SAAClM,EAAgCE,GACxE,OAAOtJ,GAAgBgI,GAAiB,8BAA+B,CAACoB,iBAAgBE,YAG/EiM,GAAsB,SAACC,EAAiBpM,GACjD,OAAOpJ,GAAgBgI,GAAiB,sBAAuB,CAACwN,UAASpM,oBE/DhEqM,GAA+B,qDAC/BC,GAA+B,qDAC/BC,GAAsC,2DAEtCC,GAA8B,oDAC9BC,GAA+B,qDAC/BC,GAAsC,4DACtCC,GAAsC,4DACtCC,GAAuC,6DACvCC,GAAsC,4DACtCC,GAAoC,0DACpCC,GAAsC,4DACtCC,GAAqC,0DACrCC,GAAsC,2DACtCC,GAAqC,0DACrCC,GAAsC,2DACtCC,GAAgC,sDAChCC,GAAiC,uDAEjCC,GAAqB,6CACrBC,GAAuB,+CAEvBC,GAA2B,kDAC3BC,GAA6B,oDAE7BC,GAAsB,8CACtBC,GAAuB,+CAEvBC,GAAiC,uDACjCC,GAAkC,wDAElCC,GAAyB,+CACzBC,GAA2B,iDCjB3B3C,GAA4B,SAACpL,EAAgCO,GAAjC,OAA4DpH,kBAAOkT,GAA8B,CAACrM,iBAAgBO,UAE9IgL,GAA2B,SAACvL,EAAgCyL,GAAjC,OAA6DtS,kBAAOqT,GAA6B,CAACxM,iBAAgByL,sBAC7IC,GAAmC,SAAC1L,EAAgCwL,EAAwCC,GAAzE,OAAqGtS,kBAAOuT,GAAqC,CAAC1M,iBAAgBwL,eAAcC,sBACnNE,GAAmC,SAAC3L,EAAgCwL,EAAwCC,GAAzE,OAAqGtS,kBAAOwT,GAAqC,CAAC3M,iBAAgBwL,eAAcC,sBACnNG,GAAiC,SAAC5L,EAAgCwL,GAAjC,OAA4ErS,kBAAO2T,GAAmC,CAAC9M,iBAAgBwL,kBACxKK,GAAiC,SAAC7L,EAAgCE,GAAjC,OAAoD/G,kBAAO6T,GAAoC,CAAChN,iBAAgBE,YACjJ4L,GAAiC,SAAC9L,EAAgCE,GAAjC,OAAoD/G,kBAAO+T,GAAoC,CAAClN,iBAAgBE,YACjJ6L,GAA6B,SAAC/L,EAAgCE,GAAjC,OAAoD/G,kBAAOiU,GAA+B,CAACpN,iBAAgBE,YACxI8L,GAAqB,SAAChM,EAAgCiM,GAAjC,OAA+D9S,kBAAOuU,GAAqB,CAAC1N,iBAAgBiM,aACjIC,GAA8B,SAAClM,EAAgCE,GAAjC,OAAoD/G,kBAAOyU,GAAgC,CAAC5N,iBAAgBE,YAC1IiM,GAAsB,SAACC,EAAiBpM,GAAlB,OAAqD7G,kBAAO2U,GAAwB,CAAC1B,UAASpM,oBCJpHgO,GAAsB,SAACC,GAAD,OAAgC9U,kBAAOoU,GAAsBU,IACnFC,GAA4B,SAACD,GAAD,OAAgC9U,kBAAOmT,GAA8B2B,IACjGE,GAAkC,SAACF,GAAD,OAAgC9U,kBAAOoT,GAAqC0B,IAC9GG,GAA2B,SAACC,GAAD,OAAmDlV,kBAAOsU,GAA4BY,IACjHC,GAA4B,SAACL,GAAD,OAAgC9U,kBAAOsT,GAA8BwB,IACjGM,GAAoC,SAACC,EAAoCP,GAArC,OAAoE9U,kBAAOyT,GAAsC,CAAC4B,aAAYP,kBAClKQ,GAAmC,SAACD,EAAoCP,GAArC,OAAoE9U,kBAAO0T,GAAqC,CAAC2B,aAAYP,kBAChKS,GAAmC,SAACT,GAAD,OAAgC9U,kBAAO4T,GAAqCkB,IAC/GU,GAAkC,SAACV,GAAD,OAAgC9U,kBAAO8T,GAAqCgB,IAC9GW,GAAkC,SAACX,GAAD,OAAgC9U,kBAAOgU,GAAqCc,IAC9GY,GAA8B,SAACZ,GAAD,OAAgC9U,kBAAOkU,GAAgCY,IACrGa,GAAsB,SAACb,GAAD,OAAgC9U,kBAAOwU,GAAsBM,IACnFc,GAA+B,SAACd,GAAD,OAAgC9U,kBAAO0U,GAAiCI,IACvGe,GAAwB,SAACf,GAAD,OAAgC9U,kBAAO4U,GAA0BE,IChCzF5C,GAAoB,SAACrL,GAAD,OAA4B7G,kBAAOmU,GAAoB,CAAEtN,oBAE7EsL,GAAyB,kBAAMnS,kBAAOqU,GAA0B,MJMjEvC,gFAcL,IAAMgE,GAAkE,CAC3EhW,IAAK,GACLuS,aAAc,GACdC,iBAAkB,GAClByD,OAAQjE,GAAOkE,KACfpI,cAvB0B,0BA0BjBqI,GAA+B,SAAC7V,GACzC,OAAO,IAAI8V,GAAuB,CAC9BpW,IAAKM,EAAKiS,aACVA,aAAcjS,EAAKiS,aACnBC,iBAAkBlS,EAAKkS,iBACvByD,OAAQjE,GAAOkE,KACfpI,cAhCsB,4BAoCjBuI,GAA6C,SAAC/V,GACvD,IAAM0N,EAA0D7C,GAAS7K,EACrE,CAACiN,GAAO,gBAAiB,wBACzB,CAACA,GAAO,oBAAqB,6BAGjC,OAAI1C,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAIkL,GAAJ7V,OAAA2N,GAAA,EAAA3N,CAAA,GACRyV,GACA1V,EAFQ,CAGXN,IAAKM,EAAKiS,kBAIL6D,GAAb,SAAA/V,GACI,SAAA+V,EAAmB9V,GAAmC,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAA2V,GAClC,KAAb9V,EAAKN,MACLM,EAAKN,IAAMU,SAFmCH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA6V,GAAAvV,KAAAJ,KAK5CH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA6V,EAAA/V,GAAA+V,EAAA,CAA4CjV,kBAAO6U,KKhBtCM,GAA8C,CACvDtW,IAAK,GACLuW,QAAS,GACTjP,KAAM,GACNkP,UAAU,EACVC,YAAa,EACbC,WAAY,EACZC,QAASpF,kBACTqF,OAAQrF,kBACRsF,OAAQtF,kBACRuF,OAAQvF,kBACRwF,YAAaxF,kBACbzD,cA9B0B,gBAiCjBkJ,GAAmC,SAAC1W,GAC7C,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,kBAAmB,0BAC3B,CAACA,GAAO,WAAR,sBAAAjI,OAA0ChF,EAAKyG,iBAC/C,CAACwG,GAAO,QAAR,mBAAAjI,OAAoChF,EAAKyG,iBACzC,CAACwG,GAAO,YAAR,uBAAAjI,OAA4ChF,EAAKyG,iBACjD,CAACwG,GAAO,eAAR,0BAAAjI,OAAkDhF,EAAKyG,iBACvD,CAACwG,GAAO,cAAR,yBAAAjI,OAAgDhF,EAAKyG,iBACrD,CAACwG,GAAO,WAAR,sBAAAjI,OAA0ChF,EAAKyG,iBAC/C,CAACwG,GAAO,UAAR,qBAAAjI,OAAwChF,EAAKyG,iBAC7C,CAACwG,GAAO,UAAR,qBAAAjI,OAAwChF,EAAKyG,iBAC7C,CAACwG,GAAO,UAAR,qBAAAjI,OAAwChF,EAAKyG,iBAC7C,CAACwG,GAAO,eAAR,0BAAAjI,OAAkDhF,EAAKyG,kBAG3D,GAAI8D,GAAUmD,GACV,OAAOA,EAGX,IACIuH,EADEwB,EAAc,GAnB0FjG,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IAsB9G,QAAAiR,EAAAD,EAAkB3Q,EAAKyW,YAAvBtK,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAAoC,CAAhCyE,EAAgCrE,EAAAjQ,MAChC,IAAM6L,EAASuJ,GAA2Cd,GAE1D,GAAG1K,GAAUiC,GACT,OAAOA,EAGR9B,GAAU8B,IACTiK,EAAY7T,KAAK4J,EAAO7L,QA9B8E,MAAA8L,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,GAkC9G,OAAO9F,GAAQ,IAAI+L,GAAa,CAC5BjX,IAAKM,EAAKyG,eACVwP,QAASjW,EAAKiW,QACdjP,KAAMhH,EAAKgH,KACXkP,SAAUlW,EAAKkW,SACfC,YAAanW,EAAKmW,YAClBC,WAAYpW,EAAKoW,WACjBC,QAASpF,gBAAKjR,EAAKqW,SACnBC,OAAQrF,gBAAKjR,EAAKsW,QAClBE,OAAQvF,gBAAKjR,EAAKwW,QAClBD,OAAQtF,gBAAKjR,EAAKuW,QAClBE,YAAaxF,gBAAKwF,GAClBjJ,cA/EsB,mBAmFjBmJ,GAAb,SAAA5W,GACI,SAAA4W,EAAmB3W,GAAyB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAwW,GACzB,KAAb3W,EAAKN,MACJM,EAAKN,IAAMU,SAFyBH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA0W,GAAApW,KAAAJ,KAKlCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA0W,EAAA5W,GAAAE,OAAAQ,GAAA,EAAAR,CAAA0W,EAAA,EAAAjW,IAAA,UAAAC,MAAA,SASmBgG,GACX,OAAOxG,KAAK8V,UAAYtP,GAAUxG,KAAKmW,OAAO3T,SAASgE,KAV/D,CAAAjG,IAAA,kBAAAC,MAAA,SAa2BqG,GAEnB,OADa7G,KAAKS,IAAI,YAAY,GACtBA,IAAI,OAAQoG,KAfhC,CAAAtG,IAAA,aAAAC,MAAA,SAkBsBsR,EAAwCnL,GACtD,OAAO3G,KAAKS,IAAI,cAAeT,KAAKsW,YAAY7T,KAC5CiT,GAA6B,CAAC5D,eAAcC,iBAAkBpL,QApB1E,CAAApG,IAAA,eAAAC,MAAA,SAwBwBgG,GAChB,OAAOxG,KAAKS,IAAI,SAAUT,KAAKmW,OAAO1T,KAAK+D,MAzBnD,CAAAjG,IAAA,iBAAAC,MAAA,SA4B0BgG,GAClB,OAAOxG,KAAKS,IAAI,SAAUT,KAAKmW,OAAO7T,OAAO,SAAAmU,GAAK,OAAIA,IAAUjQ,OA7BxE,CAAAjG,IAAA,mBAAAC,MAAA,SAgC4BsR,GACpB,OAAO9R,KAAKS,IAAI,cAAeT,KAAKsW,YAAYhU,OAAO,SAAAwS,GAAU,OAAIA,EAAWhD,eAAiBA,OAjCzG,CAAAvR,IAAA,aAAAC,MAAA,SAoCsBgG,GACd,IAAIkQ,EAAO1W,KAIX,OADA0W,GADAA,GADAA,EAAOA,EAAKjW,IAAI,SAAUiW,EAAKC,IAAI,SAAU7F,mBAAQxO,OAAO,SAAAsU,GAAO,OAAIA,IAAYpQ,MACvE/F,IAAI,UAAWiW,EAAKC,IAAI,UAAW7F,mBAAQxO,OAAO,SAAAuU,GAAQ,OAAIA,IAAarQ,MAC3E/F,IAAI,cAAeiW,EAAKC,IAAI,cAAe,GAAK,KAxCpE,CAAApW,IAAA,cAAAC,MAAA,SA4CuBgG,GACf,IAAIkQ,EAAO1W,KAGX,OADA0W,GADAA,EAAOA,EAAKjW,IAAI,SAAUiW,EAAKC,IAAI,SAAU7F,mBAAQxO,OAAO,SAAAoQ,GAAO,OAAIA,IAAYlM,MACvE/F,IAAI,cAAeiW,EAAKC,IAAI,cAAe,GAAK,KA/CpE,CAAApW,IAAA,sBAAAC,MAAA,SAmD+BkS,GACvB,IAAMoE,EAAY9W,KAAKqW,OAAO/T,OAAO,SAAAyU,GAAK,OAAIA,IAAUrE,IAClDsE,EAAahX,KAAKkW,QAAQzT,KAAKiQ,GACrC,OAAO1S,KAAKS,IAAI,SAAUqW,GAAWrW,IAAI,UAAWuW,KAtD5D,CAAAzW,IAAA,cAAAC,MAAA,SAyDuBqG,GACf,OAAO7G,KAAKS,IAAI,OAAQoG,OA1DhC2P,EAAA,CAAkC9V,kBAAOmV,KCrF5BoB,GAA8D,CACvE1X,IAAK,GACL+G,eAAgB,GAChBE,OAAQ,GACR0Q,iBAAkB,GAClBC,iBAAiB,EACjBC,sBAAsB,EACtBC,aAAa,EACbC,aAAa,EACbjK,cAzB0B,wBA4BjBkK,GAA2C,SAAC1X,GACrD,IAAM0N,EAAwD7C,GAAS7K,EACnE,CAACiN,GAAO,kBAAmB,0BAC3B,CAACA,GAAO,UAAW,kBACnB,CAACA,GAAO,oBAAqB,4BAC7B,CAACA,GAAO,mBAAoB,2BAC5B,CAACA,GAAO,wBAAyB,gCACjC,CAACA,GAAO,eAAgB,uBACxB,CAACA,GAAO,eAAgB,wBAG5B,OAAI1C,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAI+M,GAAJ1X,OAAA2N,GAAA,EAAA3N,CAAA,GACRmX,GACApX,EAFQ,CAGXN,IAAKM,EAAKyG,oBAILkR,GAAb,SAAA5X,GACI,SAAA4X,EAAmB3X,GAAiC,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAwX,GAChC,KAAb3X,EAAKN,MACLM,EAAKN,IAAMU,SAFiCH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA0X,GAAApX,KAAAJ,KAK1CH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA0X,EAAA5X,GAAA4X,EAAA,CAA0C9W,kBAAOuW,cCjD1C,SAASQ,GAAgB/V,EAAwBgW,GACpD,OAAOhW,EAAMjB,IAAIiX,EAAGnY,IAAKmY,GAGtB,SAASC,GAAmBjW,EAAwBgW,GACvD,OAAOhW,EAAMjB,IAAIiX,EAAGnY,IAAKmY,GAGtB,SAASE,GAAmBlW,EAAwBgW,GACvD,OAAOhW,EAAMmW,OAAOH,EAAGnY,KAGpB,SAASuY,GAAoBpW,EAAwBqW,GAA8C,IAAA1H,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IACtG,QAAAiR,EAAAD,EAAgBuH,EAAOC,UAAvBhM,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAAkC,CAC9B3O,EAAQiW,GAAgBjW,EADM+O,EAAAjQ,QADoE,MAAA8L,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,GAItG,OAAO7O,EAWJ,SAASuW,GAAuBvW,GACnC,OA/BO6M,iBCgBJ,IAAM2J,GAAmC3J,iBCTnC2J,GAA4C3J,iBCK5C2J,GAA0C3J,iBCL1C4J,GAAgCC,2BAAyE,CAClH5B,aHWA,WAAqG,IAApG9U,EAAoGX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAxEmX,GAAcG,EAA0DtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACrG,OAAQ6Y,EAAMvV,MACV,KAAK+Q,GACD,OAAO4D,GAAa/V,EAAO2W,EAAMjb,SACrC,KAAKwV,GACL,KAAKC,GACL,KAAKE,GACL,KAAKQ,GACL,KAAKE,GACL,KAAKE,GACL,KAAKQ,GACL,KAAKF,GACL,KAAKI,GACD,OAAOsD,GAAgBjW,EAAO2W,EAAMjb,SACxC,KAAK8V,GACD,OAAOyE,GAAgBjW,EAAO2W,EAAMjb,QAAQmX,cAChD,QACI,OAAO7S,IG3Bf8V,qBDKuD,WAA8F,IAA7F9V,EAA6FX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA1DmX,GAAcG,EAA4CtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACrJ,OAAQ6Y,EAAMvV,MACV,KAAKiR,GACD,OAAO+D,GAAiBpW,EAAO2W,EAAMjb,SACzC,KAAKwV,GACD,IAAM0F,EAAW5W,EAAMiV,IAAI0B,EAAMjb,QAAQmC,KACzC,OAAG+Y,EACQX,GAAgBjW,EAAO4W,EAAS7X,IAAI,mBAAoB4X,EAAMjb,QAAQyJ,MAAMpG,IAAI,wBAAwB,IAExGiB,EAEf,KAAKmR,GACD,IAAM0F,EAAY7W,EAAMiV,IAAI0B,EAAMjb,QAAQmC,KAC1C,OAAGgZ,EACQZ,GAAgBjW,EAAO6W,EAAU9X,IAAI,mBAAoB4X,EAAMjb,QAAQyJ,MAAMpG,IAAI,wBAAwB,IAEzGiB,EAEf,KAAKuS,GACD,IAAMuE,EAAc9W,EAAMiV,IAAI0B,EAAMjb,QAAQmC,KAC5C,OAAGiZ,EACQb,GAAgBjW,EAAO8W,EAAY/X,IAAI,mBAAoB4X,EAAMjb,QAAQyJ,OAEzEnF,EAEf,QACI,OAAOA,IC9BfiU,uBFDyD,WAAkG,IAAjGjU,EAAiGX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA5DmX,GAAcG,EAA8CtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC3J,OAAQ6Y,EAAMvV,MACV,KAAKqQ,GACL,KAAKD,GACD,OAAO4E,GAAiBpW,EAAOoP,gBAAK,CAACuH,EAAMjb,QAAQ0X,cACvD,QACI,OAAOpT,KEJhB,kBAAMG,kBAAO,CACZ2U,kBAAchX,EACdgY,0BAAsBhY,EACtBmW,4BAAwBnW,mBCZlBiZ,iBAgBOrG,IAhBjB,SAAUqG,GAAqCC,GAA/C,IAAA9U,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAIvG,+BAAgCsG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQoJ,QADpI,UAAA5C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,kDAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQ6B,OAR7B2D,EAAA3D,KAAA,GAQmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBARnF,QAUQ,OAFMiO,EARd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAUc0E,aAAIb,EAAOtM,MAAMyR,gCAAgCX,EAAauE,eAAeJ,EAAQtb,QAAQoJ,UAV3G,QAYQ,OAZRqJ,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,wDAZ5D,yBAAAgP,EAAAI,SAAA8I,GAAA/Y,MAgBO,SAAUoS,KAAV,IAAAsG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKxF,qCAHjB,OAMC,OAJMkF,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKqH,GAAsCC,GANlD,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAgJ,GAAAjZ,gCCYUkZ,IAzBXC,GAAmBxJ,GAAAhN,EAAAyW,KAAG,SAAtBD,EAAiC1Z,GAAX,IAAAmE,EAAApG,EAAA6O,EAAA,OAAAsD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACgB,OADhB2D,EAAA3D,KAAA,EACsB9L,aAAK2P,EAAW4B,kBAAmBlS,EAAOrC,QAAQkJ,gBADxE,UAAA1C,EAAAiM,EAAAG,KACjBxS,EADiBoG,EACjBpG,UADiBoG,EACPtI,MADO,CAAAuU,EAAA3D,KAAA,QAIpB,OAJoB2D,EAAA3D,KAAA,EAId0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAJlC,WAOpBkC,EAPoB,CAAAqS,EAAA3D,KAAA,aAahB9B,GALEiC,EAASG,GACXhP,EAASqC,KACTyL,GAAK,SAACzL,GAAD,OAAe0W,GAAiC1W,OAVrC,CAAAgQ,EAAA3D,KAAA,SAehB,OADA1Q,QAAQF,MAAM,kCAAmC+Q,EAAO7L,OAdxCqP,EAAA3D,KAAA,GAeV0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,gCAftC,YAkBhBiP,GAAU8B,GAlBM,CAAAwD,EAAA3D,KAAA,SAmBhB,OAnBgB2D,EAAA3D,KAAA,GAmBV0E,aAAIb,EAAauE,oBAAoBjI,EAAO7L,QAnBlC,QAoBhB,OApBgBqP,EAAA3D,KAAA,GAoBV0E,aAAIyI,EAAWC,MAAMpQ,cAAjB,CAAgCmD,EAAO7L,MAAMsV,SAA7CjR,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAyDuM,EAAO7L,MAAM0V,QAAQsD,QAA9E1Z,OAAAyZ,GAAA,EAAAzZ,CAAyFuM,EAAO7L,MAAM6V,OAAOmD,WApBvG,yBAAA3J,EAAAI,SAAtBkJ,EAAsBnZ,QAyBrB,SAAUkZ,KAAV,IAAAzZ,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY6D,qBAHjB,OAMC,OAJMnU,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK+H,GAAqB1Z,GANjC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAwJ,GAAAzZ,4CClBG0Z,iBAuEO9H,IAzEb+H,IAAoB,EAExB,SAAUD,GAA6BE,GAAvC,IAAAhW,EAAApG,EAAAlC,EAAAue,EAAAxN,EAAAyN,EAAAC,EAAAzT,EAAAkL,EAAA,OAAA7B,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAAK2P,EAAO4I,IAAI/G,wBADlE,UAAAhO,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,WAAUlC,EADrBsI,EACqBtI,OADrB,CAAAuU,EAAA3D,KAAA,YAI4B,MAAjB5Q,EAAMka,OAJjB,CAAA3F,EAAA3D,KAAA,SAKoC,OALpC2D,EAAA3D,KAAA,EAK0C9L,aAAK2P,EAAO4I,IAAIlH,0BAA2BuI,QALrF,YAKkBH,EALlBhK,EAAAG,MAO+B1U,MAP/B,CAAAuU,EAAA3D,KAAA,SAQgB,OARhB2D,EAAA3D,KAAA,GAQsB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wCARtE,YAWeue,EAAgBrc,SAX/B,CAAAqS,EAAA3D,KAAA,SAYgB,OAZhB2D,EAAA3D,KAAA,GAYsB0E,aAAIb,EAAOuJ,MAAM1H,0BAZvC,QAAA/B,EAAA3D,KAAA,iBAeY,OAfZ2D,EAAA3D,KAAA,GAekB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCAflE,YAoBQkC,EApBR,CAAAqS,EAAA3D,KAAA,aA6BY9B,GAREiC,EAASG,GACXhP,EAASqC,KACTqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GACT,OAAO0X,GAAyC1X,OAzBhE,CAAAgQ,EAAA3D,KAAA,SA8BY,OA9BZ2D,EAAA3D,KAAA,GA8BkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCA9BlE,YAiCYiP,GAAU8B,GAjCtB,CAAAwD,EAAA3D,KAAA,aAkCeG,EAAO7L,MAAMQ,OAlC5B,CAAA6O,EAAA3D,KAAA,SAqCgB,OAFM4N,EAAgBhJ,gBAAKzE,EAAO7L,OAnClDqP,EAAA3D,KAAA,GAqCsB0E,aAAIb,EAAOtM,MAAMiR,yBAAyBoF,IArChE,QAuCoC,OAvCpCjK,EAAA3D,KAAA,GAuC0C0M,aAAOqB,EAAwBC,sBAvCzE,WA2CsD,OA3CtDrK,EAAAG,KA2C+BX,oBACkB,IAA1ByK,EAAcK,SACbL,EAAcM,MAAM,CAAChD,sBAAsB,IAAQA,qBA7C3E,CAAAvH,EAAA3D,KAAA,SA8CoB,OA9CpB2D,EAAA3D,KAAA,GA8C0B0E,aAAIqJ,EAAkBzW,QAAQ6C,yBAAyByT,EAAcM,MAAM,CAAC9T,eAAgB,OAAOA,iBA9C7H,QAiD2C,OAjD3CuJ,EAAA3D,KAAA,GAiDiD0M,aAAOqB,EAAwBC,sBAjDhF,aAiDsBH,EAjDtBlK,EAAAG,MAmDsCX,mBAnDtC,CAAAQ,EAAA3D,KAAA,SAoDoB,OApDpB2D,EAAA3D,KAAA,GAoD0B0E,aAAIb,EAAOuJ,MAAM3H,kBAAkBoI,EAAmB1K,qBApDhF,QAAAQ,EAAA3D,KAAA,oBAsDuByN,GAtDvB,CAAA9J,EAAA3D,KAAA,SAyD8D,OAF9CyN,IAAoB,EACdrT,EAAiBrG,KAAK+Z,KAxD5CnK,EAAA3D,KAAA,GAyDoE9L,aAAK2P,EAAO4I,IAAInH,wBAAyBlL,GAzD7G,aAyDsBkL,EAzDtB3B,EAAAG,MA2D4C1U,MA3D5C,CAAAuU,EAAA3D,KAAA,SA4DoB,OA5DpB2D,EAAA3D,KAAA,GA4D0B0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCA5D1E,YA+DoBkW,EAAwBhU,SA/D5C,CAAAqS,EAAA3D,KAAA,SAgEoB,OAhEpB2D,EAAA3D,KAAA,GAgE0B0E,aAAIb,EAAOuJ,MAAM1H,0BAhE3C,yBAAA/B,EAAAI,SAAAoK,GAAAra,MAuEO,SAAU4R,KAAV,IAAAgI,EAAA,OAAAjK,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEsB,OAFtByE,EAAAzE,KAAA,EAE4BiF,aAAK,CAC5BpB,EAAOiJ,KAAKlF,2BAHjB,OAMC,OAJM8F,EAFPjJ,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKsI,GAA8BE,GAN1C,OAAAjJ,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAqK,GAAAta,uBChFGua,iBAiBO1I,IAjBjB,SAAU0I,GAA+B7B,GAAzC,IAAA5G,EAAAlO,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAE8B,OADpB4F,EAAekI,OADzBnK,EAAA3D,KAAA,EAEoC9L,aAAK2P,EAAO4I,IAAI9G,yBAA0B6G,EAAQtb,QAAQkJ,eAAgBwL,EAAc4G,EAAQtb,QAAQ2U,kBAF5I,UAAAnO,EAAAiM,EAAAG,KAEWxS,EAFXoG,EAEWpG,UAFXoG,EAEqBtI,MAFrB,CAAAuU,EAAA3D,KAAA,QAKQ,OALR2D,EAAA3D,KAAA,EAKc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,2CAL9D,WAQOkC,EARP,CAAAqS,EAAA3D,KAAA,SAS6B,OAT7B2D,EAAA3D,KAAA,GASmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBATnF,QAWQ,OAFMiO,EATd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAWc0E,aAAIb,EAAOtM,MAAMmR,0BAA0BL,EAAaiG,WAAW1I,EAAc4G,EAAQtb,QAAQ2U,oBAX/G,QAaQ,OAbRlC,EAAA3D,KAAA,GAac0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,8CAb5D,yBAAAgP,EAAAI,SAAAwK,GAAAza,MAiBO,SAAU6R,KAAV,IAAA6G,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKlG,8BAHjB,OAMC,OAJM4F,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKmJ,GAAgC7B,GAN5C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAyK,GAAA1a,uBClBG2a,iBAgBOxI,IAhBjB,SAAUwI,GAAqCjC,GAA/C,IAAA9U,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAIxG,+BAAgCuG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQoJ,QADpI,UAAA5C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,kDAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQ6B,OAR7B2D,EAAA3D,KAAA,GAQmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBARnF,QAUQ,OAFMiO,EARd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAUc0E,aAAIb,EAAOtM,MAAMwR,gCAAgCV,EAAaqG,aAAalC,EAAQtb,QAAQoJ,UAVzG,QAYQ,OAZRqJ,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kDAZ7D,yBAAAgP,EAAAI,SAAA4K,GAAA7a,MAgBO,SAAUmS,KAAV,IAAAuG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAK1F,qCAHjB,OAMC,OAJMoF,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKuJ,GAAsCjC,GANlD,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA6K,GAAA9a,uBChBG+a,iBAgBOvI,IAhBjB,SAAUuI,GAAkCrC,GAA5C,IAAA9U,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAInG,4BAA6BkG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQoJ,QADjI,UAAA5C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,8CAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQ6B,OAR7B2D,EAAA3D,KAAA,GAQmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBARnF,QAUQ,OAFMiO,EARd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAUc0E,aAAIb,EAAOtM,MAAM4R,6BAA6Bd,EAAayG,YAAYtC,EAAQtb,QAAQoJ,UAVrG,QAYQ,OAZRqJ,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,qEAZ7D,yBAAAgP,EAAAI,SAAAgL,GAAAjb,MAgBO,SAAUwS,KAAV,IAAAkG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAK9E,iCAHjB,OAMC,OAJMwE,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK2J,GAAmCrC,GAN/C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAiL,GAAAlb,uBChBGmb,iBAgBO9I,IAhBjB,SAAU8I,GAAiCzC,GAA3C,IAAA9U,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAItG,2BAA4BqG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQoJ,QADhI,UAAA5C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,6CAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQ6B,OAR7B2D,EAAA3D,KAAA,GAQmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBARnF,QAUQ,OAFMiO,EARd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAUc0E,aAAIb,EAAOtM,MAAM0R,4BAA4BZ,EAAa6G,WAAW1C,EAAQtb,QAAQoJ,UAVnG,QAYQ,OAZRqJ,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,sDAZ5D,yBAAAgP,EAAAI,SAAAoL,GAAArb,MAgBO,SAAUqS,KAAV,IAAAqG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKtF,gCAHjB,OAMC,OAJMgF,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK+J,GAAkCzC,GAN9C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAqL,GAAAtb,uBChBGub,iBAgBOjJ,IAhBjB,SAAUiJ,GAAyB7C,GAAnC,IAAA9U,EAAApG,EAAA+W,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAIrG,mBAAoBoG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQmV,SADxH,UAAA3O,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,mCAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQ6B,OAR7B2D,EAAA3D,KAAA,GAQmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBARnF,QAUQ,OAFMiO,EARd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAUc0E,aAAIb,EAAOtM,MAAM2R,oBAAoBb,EAAaiH,YAAY9C,EAAQtb,QAAQmV,WAV5F,QAYQ,OAZR1C,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,uBAAwB,0CAZpE,yBAAAgP,EAAAI,SAAAwL,GAAAzb,MAgBO,SAAUsS,KAAV,IAAAoG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKhF,sBAHjB,OAMC,OAJM0E,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKmK,GAA0B7C,GANtC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAyL,GAAA1b,uBCfG2b,iBAsBO1J,IAtBjB,SAAU0J,GAAuCjD,GAAjD,IAAA9U,EAAApG,EAAAsX,EAAAP,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAI1G,iCAAkCyG,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQ2U,kBADtI,UAAAnO,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAY6B,OAJf4I,EAAaY,GAA6B,CAC5C5D,aAAc4G,EAAQtb,QAAQ0U,aAC9BC,iBAAkB2G,EAAQtb,QAAQ2U,mBAV9ClC,EAAA3D,KAAA,GAYmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBAZnF,QAcQ,OAFMiO,EAZd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAcc0E,aAAIb,EAAOtM,MAAMsR,iCACnBD,EACAP,IAhBZ,QAkBQ,OAlBR1E,EAAA3D,KAAA,GAkBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,+BAlB5D,yBAAAgP,EAAAI,SAAA2L,GAAA5b,MAsBO,SAAUiS,KAAV,IAAAyG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAK/F,sCAHjB,OAMC,OAJMyF,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKuK,GAAwCjD,GANpD,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA4L,GAAA7b,uBCtBG8b,iBAqBO9J,IArBjB,SAAU8J,GAAuCpD,GAAjD,IAAA9U,EAAApG,EAAAsX,EAAAP,EAAA,OAAA5E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAI3G,iCAAkC0G,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQ2U,kBADtI,UAAAnO,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAY6B,OAJf4I,EAAaY,GAA6B,CAC5C5D,aAAc4G,EAAQtb,QAAQ0U,aAC9BC,iBAAkB2G,EAAQtb,QAAQ2U,mBAV9ClC,EAAA3D,KAAA,GAYmC0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBAZnF,QAcQ,OAFMiO,EAZd1E,EAAAG,KAAAH,EAAA3D,KAAA,GAcc0E,aAAIb,EAAOtM,MAAMoR,kCACnBC,EAAWrU,IAAI,SAAU8Q,GAAOwK,SAChCxH,EAAayH,iBAAiBlH,EAAWhD,gBAhBrD,yBAAAjC,EAAAI,SAAAgM,GAAAjc,MAqBO,SAAUgS,KAAV,IAAA0G,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKhG,sCAHjB,OAMC,OAJM0F,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK0K,GAAwCpD,GANpD,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAiM,GAAAlc,uBCrBGmc,iBAqBOzK,IArBjB,SAAUyK,GAAgCzD,GAA1C,IAAAnE,EAAA6C,EAAAxT,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACyB,OADzB2D,EAAA3D,KAAA,EAC+B0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBAD/E,YACUiO,EADV1E,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAMQ,OAFMkL,EAAuB7C,EAAa6H,gBAAgB1D,EAAQtb,QAAQyJ,MAJlFgJ,EAAA3D,KAAA,EAMc0E,aAAIb,EAAOtM,MAAM+Q,0BAA0B4C,IANzD,OAQgD,OARhDvH,EAAA3D,KAAA,EAQsD9L,aAAK2P,EAAO4I,IAAIjH,0BAA2BgH,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQyJ,MARjJ,UAAAjD,EAAAiM,EAAAG,KAQexS,EARfoG,EAQepG,UARfoG,EAQyBtI,MARzB,CAAAuU,EAAA3D,KAAA,SAWY,OAXZ2D,EAAA3D,KAAA,GAWkB0E,aAAIb,EAAOtM,MAAMgR,gCAAgCF,IAXnE,QAYY,OAZZ1E,EAAA3D,KAAA,GAYkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,mCAZlE,YAeWkC,EAfX,CAAAqS,EAAA3D,KAAA,SAgBY,OAhBZ2D,EAAA3D,KAAA,GAgBkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,uBAAwB,sCAhBxE,yBAAAgP,EAAAI,SAAAoM,GAAArc,MAqBO,SAAU0R,KAAV,IAAAgH,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKrG,+BAHjB,OAMC,OAJM+F,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK+K,GAAiCzD,GAN7C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAqM,GAAAtc,uBCrBGuc,iBAiBO9J,IAjBjB,SAAU8J,GAA0B7D,GAApC,IAAAnE,EAAA3Q,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACyB,OADzB2D,EAAA3D,KAAA,EAC+B0M,aAAOC,GAAyBH,EAAQtb,QAAQkJ,iBAD/E,YACUiO,EADV1E,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAIgD,OAJhD2D,EAAA3D,KAAA,EAIsD9L,aAAK2P,EAAO4I,IAAIlG,oBAAqBiG,EAAQtb,QAAQsV,QAASgG,EAAQtb,QAAQkJ,gBAJpI,UAAA1C,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAOY,OAPZ2D,EAAA3D,KAAA,GAOkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAPlE,YAUWkC,EAVX,CAAAqS,EAAA3D,KAAA,SAWY,OAXZ2D,EAAA3D,KAAA,GAWkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,8BAXhE,QAYY,OAZZgP,EAAA3D,KAAA,GAYkB0E,aAAIb,EAAOtM,MAAM6R,sBAAsBf,EAAa9B,oBAAoBiG,EAAQtb,QAAQsV,WAZ1G,yBAAA7C,EAAAI,SAAAuM,GAAAxc,MAiBO,SAAUyS,KAAV,IAAAiG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAK5E,yBAHjB,OAMC,OAJMsE,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKmL,GAA2B7D,GANvC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAwM,GAAAzc,MCrBP,IAAM0c,GAAS,sCCKLC,iBAgBOtW,IAhBjB,SAAUsW,GAA+BjE,GAAzC,IAAA3S,EAAAnC,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACe,OADf2D,EAAA3D,KAAA,EACqB0M,aAAOsB,MAD5B,OAE4C,OADpCnU,EADR8J,EAAAG,KAAAH,EAAA3D,KAAA,EAEkD9L,aAAK2P,EAAO4I,IAAItS,yBAA0BN,EAAKxG,IAAKmZ,EAAQtb,QAAQkJ,gBAFtH,UAAA1C,EAAAiM,EAAAG,KAEWxS,EAFXoG,EAEWpG,UAFXoG,EAEqBtI,MAFrB,CAAAuU,EAAA3D,KAAA,SAKQ,OALR2D,EAAA3D,KAAA,GAKc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,0CAL9D,YAOQkC,EAPR,CAAAqS,EAAA3D,KAAA,SASQ,OADAnG,EAAOA,EAAKtF,IAAI,qBAAsBiY,EAAQtb,QAAQkJ,gBAR9DuJ,EAAA3D,KAAA,GASc0E,aAAIb,EAAOtM,MAAMuE,2BAA2BjC,IAT1D,YAUW2S,EAAQtb,QAAQkJ,eAV3B,CAAAuJ,EAAA3D,KAAA,SAWY,OAXZ2D,EAAA3D,KAAA,GAWkB0E,aAAIgM,EAA0BtD,MAAM3H,kBAAkB+G,EAAQtb,QAAQkJ,iBAXxF,yBAAAuJ,EAAAI,SAAA4M,GAAA7c,MAgBO,SAAUqG,KAAV,IAAAqS,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKpT,6BAHjB,OAMC,OAJM8S,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKuL,GAAgCjE,GAN5C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA6M,GAAA9c,MCpBA,IAAM+c,GAAqB,SAACrb,EAAiC8E,GAAlC,OAA4E9E,EAAME,MAAM,CAAC,iBAAkB,eAAgB4E,KAEhJwW,GAAiC,SAACxW,GAAD,OAA6F,SAAC9E,GAAD,OAAqCqb,GAAmBrb,EAAO8E,KAE7LyW,GAAsB,SAACvb,EAAiCC,GAAlC,OAC/BmP,gBAAKpP,EAAME,MAAM,CAAC,iBAAkB,iBAAiBsb,eAAelF,YAAclH,mBAEzEqM,GAA0B,WACnC,OAAOnb,aACH,CAACib,IACD,SAACG,GACG,OAAOA,KAKNC,GAAkC,SAACC,GAC5C,OAAOtb,aACH,CAACib,IACD,SAACG,GACG,OAAOA,EAAM9a,OAAO,SAACzB,GACjB,OAAOyc,EAAWC,SAAS1c,EAAK2F,0BClBtCgX,iBAQO/W,IARjB,SAAU+W,GAAoB/d,GAA9B,IAAAsG,EAAA,OAAA4J,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC2B,OAD3B2D,EAAA3D,KAAA,EACiC0M,aAAO6E,EAAaC,yBAAqBle,GAD1E,YACUuG,EADV8J,EAAAG,MAGY7I,YAHZ,CAAA0I,EAAA3D,KAAA,QAIS,OAJT2D,EAAA3D,KAAA,EAIe9L,aAAK2P,EAAWtJ,aAAcV,EAAKxG,IAAKwG,EAAKoB,YAAapB,EAAKY,MAAOZ,EAAKa,UAAWb,EAAKsB,UAJ1G,wBAAAwI,EAAAI,SAAA0N,GAAA3d,MAQO,SAAUyG,KAAV,IAAAhH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY5K,UAHjB,OAMC,OAJM1F,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKoM,GAAqB/d,GANjC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA2N,GAAA5d,uBCNG6d,iBAoBO7X,iBAUP8X,iBAgBO5X,IA9CjB,SAAU2X,GAAgBpe,GAA1B,IAAAsG,EAAAnC,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC2B,OAD3B2D,EAAA3D,KAAA,EACiC0M,aAAO6E,EAAaC,yBAAqBle,GAD1E,YACUuG,EADV8J,EAAAG,MAGYnJ,KAHZ,CAAAgJ,EAAA3D,KAAA,SAIgD,OAJhD2D,EAAA3D,KAAA,EAIsD9L,aAAK2P,EAAW/J,cAAeD,GAJrF,UAAAnC,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAOY,OAPZ2D,EAAA3D,KAAA,GAOkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uDAPlE,YAUWkC,EAVX,CAAAqS,EAAA3D,KAAA,aAWenG,EAAKoB,YAXpB,CAAA0I,EAAA3D,KAAA,SAYgB,OAZhB2D,EAAA3D,KAAA,GAYsB9L,aAAK2P,EAAWtJ,aAAcV,EAAKxG,IAAKwG,EAAKoB,YAAapB,EAAKY,MAAOZ,EAAKa,UAAWb,EAAKsB,UAZjH,QAcY,OAdZwI,EAAA3D,KAAA,GAckB0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,gCAdjE,QAeYpB,EAAOrC,QAAQ6I,YAf3B,yBAAA4J,EAAAI,SAAA8N,GAAA/d,MAoBO,SAAUgG,KAAV,IAAAvG,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAYtK,iBAHjB,OAMC,OAJMhG,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKyM,GAAiBpe,GAN7B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA+N,GAAAhe,MAUP,SAAU8d,GAAiBre,GAA3B,IAAAsG,EAAAkY,EAAAna,EAAAtG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAC2B,OAD3BgF,EAAAhF,KAAA,EACiC0M,aAAO6E,EAAaC,yBAAqBle,GAD1E,UACUuG,EADVmL,EAAAlB,KAEUiO,EAAexe,EAAOrC,QAAQ+I,UAEhCJ,EAAKxG,IAJb,CAAA2R,EAAAhF,KAAA,SAKgD,OALhDgF,EAAAhF,KAAA,EAKsD9L,aAAK2P,EAAW7J,eAAgBH,EAAKxG,IAAK0e,GALhG,UAAAna,EAAAoN,EAAAlB,KAKexS,EALfsG,EAKetG,UALfsG,EAKyBxI,MALzB,CAAA4V,EAAAhF,KAAA,SAQY,OARZgF,EAAAhF,KAAA,GAQkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,+BARlE,YAUYkC,EAVZ,CAAA0T,EAAAhF,KAAA,SAWY,OAXZgF,EAAAhF,KAAA,GAWkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,mBAAoB,uCAXpE,yBAAAqQ,EAAAjB,SAAAiO,GAAAle,MAgBO,SAAUkG,KAAV,IAAAzG,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,OAE0C,OAF1CiS,EAAAjS,KAAA,EAEgDiF,aAAK,CAChDpB,EAAYrK,kBAHjB,OAMC,OAJMjG,EAFP0e,EAAAnO,KAAAmO,EAAAjS,KAAA,EAMOkF,aAAK0M,GAAkBre,GAN9B,OAAA0e,EAAAjS,KAAA,gCAAAiS,EAAAlO,SAAAmO,GAAApe,uBClDGqe,iBAiBOjY,IAjBjB,SAAUiY,GAAoB5e,GAA9B,IAAAmE,EAAA,OAAA+L,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAGI,OAHJ2D,EAAA3D,KAAA,EAGU0E,aAAIb,EAAahI,oBAAoBtI,EAAOrC,QAAQmD,IAAKd,EAAOrC,QAAQoD,QAHlF,OAK4C,OAL5CqP,EAAA3D,KAAA,EAKkD9L,aAC1C2P,EAAW3J,kBACX3G,EAAOrC,QAAQmD,IACfd,EAAOrC,QAAQoD,OARvB,OAAAoD,EAAAiM,EAAAG,KAAApM,EAKWpG,SALXoG,EAKqBtI,OAQbE,QAAQC,IAAR,oCAAAoJ,OAAgDpF,EAAOrC,QAAQmD,IAA/D,SAAAsE,OAA0EpF,EAAOrC,QAAQoD,QAbjG,wBAAAqP,EAAAI,SAAAqO,GAAAte,MAiBO,SAAUoG,KAAV,IAAAmY,EAAA9e,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEiB,OAFjByE,EAAAzE,KAAA,EAEuBsS,aAAczO,EAAYpK,qBAFjD,OAEG4Y,EAFH5N,EAAAX,KAAA,OAK4B,OAL5BW,EAAAzE,KAAA,EAKkCiF,aAAKoN,GALvC,OAOC,OAFM9e,EALPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAOO9L,aAAKie,GAAqB5e,GAPjC,OAAAkR,EAAAzE,KAAA,iCAAAyE,EAAAV,SAAAwO,GAAAze,MCjBA,ICcK0e,GDXC7F,GAA2B,SAACvS,GAAD,OACpC,SAAC5E,GAAD,OAAqC4E,EAJN,SAAC5E,EAAiCnC,GAAlC,OAC/BmC,EAAME,MAAM,CAAC8a,GAAQ,eAAgBnd,IAGiBof,CAAoBjd,EAAO4E,QAAkB9G,IAE1Fof,GAAsB,SAACld,GAAD,OAAyDA,EAAME,MAAM,CAAC8a,GAAQ,iBAAiBmC,mBER5HC,GAAqB,EAKrBC,cAIF,SAAAA,IAAc,IAAAC,EAAAhf,KAAAF,OAAAC,GAAA,EAAAD,CAAAE,KAAA+e,GAAA/e,KAHNif,2BAGM,EAAAjf,KAFNkf,QAEM,EACVlf,KAAKif,sBAAwB,IAAI/jB,QAAQ,SAACT,EAASU,GAC/C,IAAMgkB,EAAcC,UAAU3J,KAAK,kBAAmBqJ,IAEtDK,EAAYE,gBAAkB,SAAChH,GAC3B2G,EAAKM,8BAA8BH,EAAY9S,OAAQgM,EAAMkH,aAGjEJ,EAAYK,QAAU,WAClBrkB,EAAO,uCAGXgkB,EAAYM,UAAY,WACpBT,EAAKE,GAAKC,EAAY9S,OACtB5R,kGAKKilB,EAAqBnf,+FAC5BP,KAAK2f,sDAEJ,IAAIzkB,QAAJ,eAAA0I,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAAyG,EAAOplB,EAASU,GAAhB,IAAA2kB,EAAA3X,EAAA,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,cACT4T,EAAcC,EAAKb,GAAIY,YAAYJ,EAAa,YADvC7P,EAAA3D,KAAA,EAEO4T,EAAYJ,YAAYA,GAAa/I,IAAIpW,GAFhD,QAET4H,EAFS0H,EAAAG,MAIPyP,UAAY,kBAAMhlB,EAAQ0N,EAAQkE,SAC1ClE,EAAQqX,QAAU,kBAAMrkB,KALT,wBAAA0U,EAAAI,SAAA4P,EAAA7f,SAAZ,gBAAAggB,EAAAC,GAAA,OAAArc,EAAAyH,MAAArL,KAAAe,YAAA,mLASS2e,+FACV1f,KAAK2f,sDAEJ,IAAIzkB,QAAJ,eAAA4I,EAAAhE,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAA8G,EAAOzlB,EAASU,GAAhB,IAAA2kB,EAAA3X,EAAA,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,cACT4T,EAAcK,EAAKjB,GAAIY,YAAYJ,EAAa,YADvCxO,EAAAhF,KAAA,EAEO4T,EAAYJ,YAAYA,GAAaU,SAF5C,QAETjY,EAFS+I,EAAAlB,MAIPyP,UAAY,kBAAMhlB,EAAQ0N,EAAQkE,SAC1ClE,EAAQqX,QAAU,kBAAMrkB,KALT,wBAAA+V,EAAAjB,SAAAiQ,EAAAlgB,SAAZ,gBAAAqgB,EAAAC,GAAA,OAAAxc,EAAAuH,MAAArL,KAAAe,YAAA,8KASM2e,EAAqB7f,+FAC5BG,KAAK2f,sDAEJ,IAAIzkB,QAAJ,eAAA8P,EAAAlL,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAAmH,EAAO9lB,EAASU,GAAhB,IAAA2kB,EAAA3X,EAAA,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAA4Q,GAAA,cAAAA,EAAA1Q,KAAA0Q,EAAAtU,MAAA,OACT4T,EAAcW,EAAKvB,GAAIY,YAAYJ,EAAa,cAChDvX,EAAU2X,EAAYJ,YAAYA,GAAagB,IAAI7gB,IAEjD4f,UAAY,kBAAMhlB,KAC1B0N,EAAQqX,QAAU,kBAAMrkB,KALT,wBAAAqlB,EAAAvQ,SAAAsQ,EAAAvgB,SAAZ,gBAAA2gB,EAAAC,GAAA,OAAA5V,EAAAK,MAAArL,KAAAe,YAAA,gLASM2e,EAAqB7f,+FAC5BG,KAAK2f,sDAEJ,IAAIzkB,QAAJ,eAAA2lB,EAAA/gB,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAA0H,EAAOrmB,EAASU,GAAhB,IAAA2kB,EAAA3X,EAAA,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAAmR,GAAA,cAAAA,EAAAjR,KAAAiR,EAAA7U,MAAA,OACT4T,EAAckB,EAAK9B,GAAIY,YAAYJ,EAAa,cAChDvX,EAAU2X,EAAYJ,YAAYA,GAAa9O,IAAI/Q,IAEjD4f,UAAY,kBAAMhlB,KAC1B0N,EAAQqX,QAAU,kBAAMrkB,KALT,wBAAA4lB,EAAA9Q,SAAA6Q,EAAA9gB,SAAZ,gBAAAihB,EAAAC,GAAA,OAAAL,EAAAxV,MAAArL,KAAAe,YAAA,mLASS2e,EAAqBnf,+FAC/BP,KAAK2f,sDAEJ,IAAIzkB,QAAJ,eAAAimB,EAAArhB,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAAgI,EAAO3mB,EAASU,GAAhB,IAAA2kB,EAAA3X,EAAA,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAAyR,GAAA,cAAAA,EAAAvR,KAAAuR,EAAAnV,MAAA,OACT4T,EAAcwB,EAAKpC,GAAIY,YAAYJ,EAAa,cAChDvX,EAAU2X,EAAYJ,YAAYA,GAAahY,OAAOnH,IAEpDkf,UAAY,kBAAMhlB,KAC1B0N,EAAQqX,QAAU,kBAAMrkB,KALT,wBAAAkmB,EAAApR,SAAAmR,EAAAphB,SAAZ,gBAAAuhB,EAAAC,GAAA,OAAAL,EAAA9V,MAAArL,KAAAe,YAAA,mRAUDf,KAAKif,gCAENjf,KAAKkf,yBACA,IAAI5kB,MAAM,wLAIc4kB,EAAiBK,GAQnD,OANA/jB,QAAQC,IAAR,wDAAAoJ,OAAoE0a,EAApE,QAAA1a,OAAqFia,KAM7ES,GACJ,KAAK,EACDL,EAAGuC,kBAxGgB,SAwGuB,CAAEC,QAAS,YACrDxC,EAAGuC,kBAxGuB,eAwGuB,CAAEC,QAAS,kBAK7D3C,MClHT4C,cAGF,SAAAA,EAAYzC,GAA0Bpf,OAAAC,GAAA,EAAAD,CAAAE,KAAA2hB,GAAA3hB,KAF9Bkf,QAE6B,EACjClf,KAAKkf,GAAKA,EACVlf,KAAK4hB,UAAY5hB,KAAK4hB,UAAUC,KAAK7hB,MACrCA,KAAK8hB,SAAW9hB,KAAK8hB,SAASD,KAAK7hB,MACnCA,KAAK+hB,YAAc/hB,KAAK+hB,YAAYF,KAAK7hB,MACzCA,KAAKgiB,SAAWhiB,KAAKgiB,SAASH,KAAK7hB,MACnCA,KAAKiiB,YAAcjiB,KAAKiiB,YAAYJ,KAAK7hB,MACzCA,KAAKiH,gBAAkBjH,KAAKiH,gBAAgB4a,KAAK7hB,MACjDA,KAAKkiB,eAAiBliB,KAAKkiB,eAAeL,KAAK7hB,6DAI/C,MAAO,CACHwG,OAAQ,uMAKCxG,KAAKkf,GAAGkB,ODjBM,+NCoBT+B,oFACLniB,KAAKkf,GAAGvI,IDrBM,SCqBmBwL,mDAAY,4NAGrCC,oFACfpiB,KAAKkf,GAAGtO,IDzBa,SCyBYwR,iLAGrBA,oFACZpiB,KAAKkf,GAAGwB,ID7Ba,SC6BY0B,oLAGlBD,oFACfniB,KAAKkf,GAAGxX,ODjCa,SCiCeya,2QAI7BniB,KAAKkf,GAAGkB,ODpCa,2OCuCViC,oFACdriB,KAAKkf,GAAGvI,IDxCgB,eCwCgB0L,EAAQ9hB,uDAChDP,KAAKkf,GAAGtO,IDzCgB,eCyCgByR,gDAExCriB,KAAKkf,GAAGwB,ID3CgB,eC2CgB2B,+GAK3CV,MCnDFW,GAA2B,IAAIX,GAAyB,IAAI5C,ICO5DrB,GAAsB,SAAChc,EAAiCC,GAAlC,OAAiDD,EAAME,MAAM,CAAC,iBAAkB,QAAS,iBAE/GsY,GAAqB,WAC9B,OAAOlY,aACH,CAAC0b,IACD,SAAC3X,GAAD,OAAkDA,KAI7Cwc,GAA2B,WACpC,IAAMC,ELNN,SAAC9gB,GAAD,OAAqCkd,GAAoBld,IKQzD,OAAOM,aACH,CAAC0b,GAAqB8E,GACtB,SAACzc,EAA0B+T,GAEnB,OAAQ,mECPlB2I,GAAe,CAAEC,OAAQ,EAAGC,KAAM,KAAcC,EAAG,EAAGC,EAAG,EAAGC,MAAO,IAAKC,OAAQ,KA2EvEC,GAzEe,SAACrhB,GAAsC,IAAAshB,EACzCC,oBAAST,IADgCU,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC1DG,EAD0DD,EAAA,GACpDE,EADoDF,EAAA,GAAAG,EAE7BJ,oBAAiB,GAFYK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAE1DE,EAF0DD,EAAA,GAE9CE,EAF8CF,EAAA,GAAAG,EAGzCR,yBAAyB1jB,GAHgBmkB,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG1Dlc,EAH0Dmc,EAAA,GAGpDC,EAHoDD,EAAA,GAAAE,EAI3CX,yBAA2B1jB,GAJgBskB,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAI1DE,EAJ0DD,EAAA,GAIrDE,EAJqDF,EAAA,GAW3DG,EAAa,WACftiB,EAAMqB,UACNkhB,KAGEA,EAAa,WACfN,OAAQpkB,GACRwkB,OAAOxkB,GACP6jB,EAAQZ,KAGZ,OACIlkB,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAMzS,QAASihB,EAAYG,WAAW,GACrD7lB,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,yCACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,CAAeC,OAAO,GAClBhmB,GAAA,cAACimB,GAAA,EAAD,CAAUC,OApBC,SAACC,GACpBd,EAAQc,EAAc,IACtBV,EAAOW,IAAIC,gBAAgBF,EAAc,OAmB5B,SAAA9gB,GAAA,IAAEihB,EAAFjhB,EAAEihB,aAAcC,EAAhBlhB,EAAgBkhB,cAAhB,OACGvmB,GAAA,yBAASwmB,MAAO,CAAEhC,OAAQ,QAASD,MAAO,SACtCvkB,GAAA,oBAAAuB,OAAAklB,OAAA,GAASH,IAAT,CAAyBE,MAAO,CAAEjC,MAAO,OAAQC,OAAQ,OAAQkC,QAAS,SACrElB,EACGxlB,GAAA,cAAC2mB,GAAAviB,EAAD,CACIoiB,MAAO,CAAEI,SAAU,OAAQC,UAAW,SACtCC,WAAY,CAAEF,SAAU,OAAQC,UAAW,SAC3CrB,IAAKA,EACLX,KAAMA,EACNkC,SAAU,SAACC,GAAD,OAAkBlC,EAAQkC,IACpCC,cAAe,SAAAjB,GAAK,OAAId,EAAcc,EAAMzB,MAAQyB,EAAMkB,iBAG9DlnB,GAAA,yBACIA,GAAA,sBAAWumB,KACXvmB,GAAA,uBAAIoD,EAAMkB,EAAE,qDAQxCtE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAASulB,IAEb1lB,GAAA,cAAConB,GAAA,EAAD,CACIE,SAAS,EACTD,SAAUjkB,EAAMkB,EAAE,iBAClBnE,QAAS,WACLiD,EAAMmkB,SAASte,EAAM,CACjBob,EAAGQ,EAAKR,EAAIY,EACZX,EAAGO,EAAKP,EAAIW,EACZV,MAAOM,EAAKN,MAAQU,EACpBT,OAAQK,EAAKL,OAASS,IAE1BU,mBC9BThhB,kBAAiB6iB,qBAAgD,CAACC,KAAM,sBAAuBC,oBAAoB,GAAlGF,CA7BJ,SAACpkB,GAAD,OACxBe,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAAUxkB,EAAMykB,cACtC1jB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,gCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,QAAQyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,kCAG3EH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,uCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,cAAcyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,yCAGjFH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,kCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,cAAcyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,oCAGjFH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,mCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,WAAWyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,qCAG9EH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASojB,UAAU,kBAAkBvkB,EAAMkB,EAAE,kBACzEH,GAAAC,EAAAC,cAAC4jB,GAAA,KAAD,CAAMC,GAAIziB,GAAWkiB,UAAU,4BAA4BvkB,EAAMkB,EAAE,oCCChEK,kBAAiB6iB,qBAAiD,CAACC,KAAM,0BAA2BC,oBAAoB,GAAvGF,CA3BA,SAACpkB,GAE7B,OACIe,GAAAC,EAAAC,cAAA,QAAMsjB,UAAW,WAAavkB,EAAM+kB,iBAAmB,SAAW,IAAKP,SAAUxkB,EAAMykB,cACnF1jB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAW,SACZxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,oCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAM,YAAayf,UAAW,QAASxjB,KAAM,cAGxDJ,GAAAC,EAAAC,cAAA,OAAKsjB,UAAW,SACZxjB,GAAAC,EAAAC,cAAA,aAAQjB,EAAMkB,EAAE,oCAChBH,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAM,YAAayf,UAAW,QAASxjB,KAAM,cAGxDJ,GAAAC,EAAAC,cAAC+jB,GAAA,EAAD,CACIrrB,OAAO,EACPsrB,OAAQjlB,EAAMkB,EAAE,0DAChBgkB,QAASllB,EAAMkB,EAAE,2DAGrBH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAW,SACZxjB,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAM,SAAUojB,UAAW,kBAAmBvkB,EAAMkB,EAAE,yBC8I9EK,kBAAiB4jB,aA/JZ,SAACnlB,GAEjB,IAAM0B,EAAW0jB,yBAF4B9D,EAGKC,qBAAkB,GAHvBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGtC+D,EAHsC7D,EAAA,GAGnB8D,EAHmB9D,EAAA,GAAAG,EAIaJ,qBAAkB,GAJ/BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAItC4D,EAJsC3D,EAAA,GAIf4D,EAJe5D,EAAA,GAAAG,EAKmBR,qBAAkB,GALrCS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAKtC0D,EALsCzD,EAAA,GAKZ0D,EALY1D,EAAA,GAMvC2D,EAAcC,uBAAYrN,MAEhCzb,GAAe,WACXwoB,GAAqB,KAGzB,IA6CMO,EAAgC,WAClCnkB,EAAS2C,GACLshB,EAAaG,MAAM,CACf7gB,UAAW,WAAa0gB,EAAY/nB,IAChC,gBAAkBmoB,UAAUJ,EAAYngB,aAAe,cAAgBvK,KAAK+qB,QAEpF,gBAqBR,OAAOppB,GAAA,cAACqpB,GAAA,EAAD,KACHrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,GACbvpB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAalF,MAAM,IAAIoD,UAAU,iBACjC3nB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,MAC1C5pB,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAKC,MAAM,EAAMC,UAAU,UAClC/pB,GAAA,cAACgqB,GAAA,EAAD,CAAU9S,KAAMuR,EAAmBqB,MAAM,GACrC9pB,GAAA,cAACgqB,GAAA,EAASC,KAAV,KACIjqB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIC,KAAM/mB,EAAMkB,EAAE,mBACdnE,QAAS,kBAAMyoB,GAAyB,MAE5C5oB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIC,KAAM/mB,EAAMkB,EAAE,mBACdnE,QA5DX,WACjBia,EAAIlR,aAAa6f,EAAY/nB,KACxBhC,KAAK,WACFiqB,MAEH/pB,MAAM,WACH4F,EAASwN,EAAarN,QAAQlI,MAC1BqG,EAAMkB,EAAE,iDACRlB,EAAMkB,EAAE,oDAGf8lB,QAAQ,WACL1B,GAAqB,UAoDb1oB,GAAA,qBACIwmB,MAAO,CAAE6D,OAAQ,WACjBlqB,QAAS,SAACrE,GAAuBA,EAAEwuB,kBAAmB5B,GAAsBD,IAC5Ed,UAAW,oBACXnC,IAAKuD,EAAY1gB,YAErBrI,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,KACK3iB,EAAMkB,EAAE,6BAA8B,CAACimB,UAAWxB,EAAYngB,cAC/D5I,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,KAAoBpnB,EAAMkB,EAAE,kCAK5CtE,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAalF,MAAM,IAAIoD,UAAU,iBACjC3nB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,MAC1C5pB,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,qBAAK2nB,UAAU,cACX3nB,GAAA,cAACyqB,GAAD,CACIC,cAAepnB,kBAAOylB,EAAY9N,QAClC2M,SAAU,SAACtmB,IA9GpB,SAACA,EAAiBqpB,GACjC,IAAMnjB,EAAOuhB,EAAaG,MAAM5nB,EAAK2Z,QACrCnW,EAAS2C,GAAcD,EAAM,kBAAMmjB,EAAOC,QAAQ1mB,KAAK2mB,OA4GVC,CAAWxpB,EAAM8B,WAQ9DpD,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,GACbvpB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAalF,MAAM,IAAIoD,UAAU,iBACjC3nB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,MAC1C5pB,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,qBAAK2nB,UAAU,cACX3nB,GAAA,cAAC+qB,GAAD,CACIL,cAAepnB,kBAAO,CAAC0nB,UAAW,GAAGC,UAAW,KAChDrD,SAAU,SAACtmB,IAvEZ,SAACA,GACxB,IAKM4pB,EAAG3pB,OAAA2N,GAAA,EAAA3N,CAAA,GALa,CAClBypB,UAAW,GACXC,UAAW,IAGmB3pB,EAAK2Z,QAEnCiQ,EAAIF,YAAcE,EAAID,WACtBnC,GAA4B,GAC5BhkB,EAAS6C,GAAeujB,EAAIF,YAC5BlmB,EAASqmB,aAAM,6BAEfrC,GAA4B,GA0DasC,CAAmB9pB,IACxC6mB,iBAAkBU,SAQ1C7oB,GAAA,cAACqrB,GAAD,CACI/mB,EAAGlB,EAAMkB,EACT4S,KAAMyR,EACNlkB,QAAS,WACLmkB,GAAyB,GACzBF,GAAqB,IAEzBnB,SAzIa,SAACte,EAAW4b,GAC7B,IAAMvjB,EAAO,IAAIgqB,SACjBhqB,EAAKiqB,OAAO,cAAetiB,GAC3B3H,EAAKiqB,OAAO,OAAQjhB,KAAKC,UAAUsa,IAEnCzK,EAAIpR,aAAa+f,EAAY/nB,IAAIM,GAC5BtC,KAAK,WACFiqB,MAEH/pB,MAAM,WACH4F,EAASwN,EAAarN,QAAQlI,MAC1BqG,EAAMkB,EAAE,+CACRlB,EAAMkB,EAAE,kDAGf8lB,QAAQ,WACLxB,GAAyB,GACzBF,GAAqB,YCjExB/hB,GAAiB,aAEjB6kB,GAAa,8BACbC,GAAe,gCACfC,GAAmB,mCACnBC,GAAwB,wCACxBC,GAAY,6BACZC,GAAgB,8BAChBC,GAAsB,sCACtBC,GAAwB,uCACxBC,GAA4B,2CAC5BC,GAAuB,uCACvBC,GAAuB,uCACvBC,GAAe,gCACfC,GAAc,+BACdC,GAA0B,0CAC1BC,GAA0B,0CAC1BC,GAAyB,wCACzBC,GAA2B,2CAC3BC,GAAsC,oDACtCC,GAAuB,uCACvBC,GAAuB,uCACvBC,GAAuB,sCACvBC,GAAyB,wCACzBC,GAAsB,sCACtBC,GAAqB,qCACrBC,GAAuB,uCACvBC,GAAyB,yCACzBC,GAA0B,0CAC1BC,GAAsB,sCACtBC,GAAiC,+CACjCC,GAAgC,8CAChCC,GAAgC,8CAChCC,GAAyB,wCACzBC,GAA6B,4CAC7BC,GAAsB,sCACtBC,GAAsB,sCACtBC,GAA4B,2CAC5BC,GAAsB,sCACtBC,GAAgC,+CAChCC,GAA0B,0CAE1BC,GAAwB,wCAExBC,GAAwB,wCACxBC,GAAiC,+CACjCC,GAA8B,4CAC9BC,GAAuB,uCAEvBC,GAAkC,gDAIlCC,GAAa,8BACbC,GAA6B,6CAC7BC,GAAuB,uCACvBC,GAAsB,sCACtBC,GAAsB,sCACtBC,GAAmC,gDACnCC,GAAwB,wCACxBC,GAAwB,wCACxBC,GAAoB,oCACpBC,GAAsB,sCACtBC,GAAwB,wCACxBC,GAAuB,uCACvBC,GAAiB,kCACjBC,GAAiB,kCACjBC,GAAoB,qCACpBC,GAAyC,sDAGzCC,GAAwB,wCACxBC,GAA0B,0CAC1BC,GAA2B,2CAC3BC,GAAuB,sCACvBC,GAA4B,4CAC5BC,GAAiC,gDACjCC,GAAsC,oDACtCC,GAAsC,oDACtCC,GAAiC,gDACjCC,GAA+B,8CAC/BC,GAAqC,mDACrCC,GAAwC,sDACxCC,GAA+B,8CAC/BC,GAAuB,uCACvBC,GAA8B,6CAC9BC,GAA8B,6CAC9BC,GAAiC,gDACjCC,GAAsB,sCACtBC,GAAiC,gDACjCC,GAA4B,4CAC5BC,GAAmC,iDACnCC,GAA4B,2CAG5BC,GAA0B,yCAC1BC,GAAoB,oCACpBC,GAAmB,mCACnBC,GAAoC,6CACpCC,GAAoC,6CACpCC,GAA+B,8CAC/BC,GAA6B,uCAC7BC,GAAqB,qCACrBC,GAA4B,2CAC5BC,GAA+B,8CCtF/BC,GAA2B,SAACtpB,EAAgC6b,EAA6B0N,GAClG,OAAO3yB,GAAgBgI,GAAiB,2BAA4B,CAACoB,iBAAgB6b,UAAS0N,eAGrFC,GAAc,SAAC3N,EAA6Btb,GACrD,OAAO3J,GAAgBgI,GAAiB,cAAe,CAACid,UAAStb,UAGxDob,GAAc,SAACE,GACxB,OAAOjlB,GAAgBgI,GAAiB,cAAe,CAACid,aAG/C4N,GAAoB,SAAC5N,EAA6B6N,EAA4CnJ,GACvG,OAAO3pB,GACHgI,GAAiB,oBACjB,CAACid,UAAS6N,aAAc,CAACxpB,OAAQwpB,EAAaxpB,OAAQypB,QAASD,EAAaC,SAAUpJ,aAGjFqJ,GAAa,SAAC/N,EAA6Bxb,EAAwBwpB,GAC5E,OAAOjzB,GACHgI,GAAiB,qBACjB,CAACid,UAASiO,YAAazpB,EAAO0pB,iBAAmBF,GAAe,CAACG,aAAa,EAAMC,YAAY,EAAMC,aAAa,MAI9GC,GAAwB,SAAC3e,GAClC,OAAO5U,GAAgBgI,GAAiB,wBAAyB,CAAE4M,kBAG1D4e,GAAwB,SAAC5e,GAClC,OAAO5U,GAAgBgI,GAAiB,wBAAyB,CAAE4M,kBAG1D6e,GAAqB,SAAC7e,GAC/B,OAAO5U,GACHgI,GAAiB,wBACjB,CAAC4M,kBAII8e,GAAsB,SAACzO,EAA6B3b,GAC7D,OAAOtJ,GAAgBgI,GAAiB,sBAAuB,CAACid,UAAS3b,YAGhEqqB,GAAyB,SAAC1O,EAA6B3b,EAA0B2pB,GAC1F,OAAOjzB,GAAgBgI,GAAiB,yBAA0B,CAACid,UAAS3b,SAAQ6pB,iBAAkBF,KAG7FW,GAAkC,SAAC3O,EAA6B4O,EAA0BZ,GACnG,OAAOjzB,GAAgBgI,GAAiB,kCAAmC,CAACid,UAAS4O,SAAQV,iBAAkBF,KAGtGa,GAAiB,SAAC7O,GAC3B,OAAOjlB,GAAgBgI,GAAiB,YAAa,CAACid,aAG7C8O,GAAkB,WAC3B,OAAO/zB,GAAgBgI,GAAiB,aAAc,KAG7CgsB,GAAoB,SAAC/O,EAA6B6N,GAC3D,OAAO9yB,GAAgBgI,GAAiB,eAAgB,CAACid,UAASgP,iBAAkBnB,EAAaoB,YAGxFC,GAAoB,SAAClP,EAA6B6N,GAC3D,OAAO9yB,GAAgBgI,GAAiB,eAAgB,CAACid,UAASgP,iBAAkBnB,EAAaoB,SAAUE,KAAM,WAGxGC,GAAgC,SAACpP,GAC1C,OAAOjlB,GAAgBgI,GAAiB,2BAA4B,CAAEid,aAG7DqP,GAAgC,SAACrP,GAC1C,OAAOjlB,GAAgBgI,GAAiB,2BAA4B,CAAEid,aAG7DsP,GAA4B,SAACtP,GACtC,OAAOjlB,GAAgBgI,GAAiB,uBAAwB,CAAEid,aAGzDuP,GAAyB,SAAC5f,GACnC,OAAO5U,GAAgBgI,GAAiB,kBAAmB,CAAC4M,kBAGnD6f,GAAwB,SAACC,GAClC,OAAOC,MAAMD,GAAMr0B,KAAK,SAAAC,GAAQ,OAAIA,EAASkrB,UAGpCoJ,GAAmB,SAAC3P,EAAkB4P,EAAkCC,GACjF,OrEpDsC,SAAC7P,EAAiB/kB,EAA6B40B,GACrF,OAAO30B,GAAIC,KACP6kB,EACA/kB,EACA,CAAEvB,QAAS,mBAAoBU,QAAS,CAAEqM,eAAgBopB,KqEgDvDC,CAA2B9P,EAAS4P,EAAcC,IAGhDE,GAAoB,SAAC/P,EAAkBgQ,EAAiBJ,EAAkCC,GACnG,OrEhD2C,SAAC7P,EAAiBgQ,EAAiB/0B,EAA6B40B,GAC3G,OAAO30B,GAAIC,KAAJ,GAAAuH,OACAsd,EADA,KAAAtd,OACWstB,GACd/0B,EACA,CAAEvB,QAAS,mBAAqBU,QAAS,CAAEqM,eAAgBopB,KqE4CxDI,CAAgCjQ,EAASgQ,EAASJ,EAAcC,IAG9DK,GAAmB,SAACC,GAC7B,OrE5CwC,SAACA,GACzC,OAAOj1B,GAAIqK,OAAO4qB,EAAU,CAAEz2B,QAAO,MqE2C9B02B,CAA6BD,IAG3BE,GAA0B,SAACrQ,EAAkBrf,GACtD,OAAO5F,GAAgBgI,GAAiB,qBAAsB,CAAEid,UAASrf,UAGhE2vB,GAAmB,SAACtQ,GAC7B,OAAOjlB,GAAgBgI,GAAiB,cAAe,CAAEid,aAGhDuQ,GAAyB,SAACvQ,GACnC,OAAOjlB,GAAgBgI,GAAiB,oBAAqB,CAAEid,aAGtDwQ,GAAoB,SAACxQ,GAC9B,OAAOjlB,GAAgBgI,GAAiB,oBAAqB,CAAEid,aAGtDyQ,GAAoB,SAACzQ,GAC9B,OAAOjlB,GAAgBgI,GAAiB,oBAAqB,CAAEid,aAGtD0Q,GAAyB,SAAC1Q,GACnC,OAAOjlB,GAAgBgI,GAAiB,yBAA0B,CAAEid,aAG3D2Q,GAA4B,SAAC3Q,GACtC,OAAOjlB,GAAgBgI,GAAiB,kBAAmB,CAAEid,aAGpD4Q,GAAoB,SAAC5Q,EAA6B6Q,EAAoBC,GAC/E,OAAO/1B,GAAgBgI,GAAiB,oBAAqB,CAACid,UAAS6Q,WAAUC,cAGxEC,GAA6B,SAAC/Q,EAA6B6Q,EAAoBG,EAA4BC,GACpH,OAAOl2B,GAAgBgI,GAAiB,6BAAlBpF,OAAA2N,GAAA,EAAA3N,CAAA,CAAiDqiB,UAAS6Q,WAAUG,gBAAkBC,EAAiB,CAACA,kBAAkB,MAGvIC,GAA8B,SAAC/sB,EAAgC6b,GACxE,OAAOjlB,GAAgBgI,GAAiB,8BAA+B,CAACoB,iBAAgB6b,aC1G/EH,GAAW,SAACI,EAAyB+G,GAA1B,OAAoD1pB,kBAAO0qB,GAAW,CAAC/H,QAAO+G,aACzFmK,GAAe,SAACld,GAAD,OAAgC3W,kBAAO2qB,GAAehU,IACrEmd,GAAoB,SAACnd,GAAD,OAAgC3W,kBAAO4qB,GAAqBjU,IAChFod,GAAqB,SAACC,GAAD,OAA2Ch0B,kBAAO6qB,GAAuB,CAACmJ,cAC/FC,GAAyB,SAACvR,EAA6BmO,GAA9B,OAAuD7wB,kBAAO8qB,GAA2B,CAACpI,UAASmO,iBAE5HqD,GAAqB,SAACxR,GAAD,OAAiC1iB,kBAAOwrB,GAAsB,CAAC9I,aACpFyR,GAAqB,SAACzR,GAAD,OAAiC1iB,kBAAOyrB,GAAsB,CAAC/I,aACpF0R,GAAqB,SAAC1R,EAA6B2R,GAA9B,OAAmDr0B,kBAAO0rB,GAAsB,CAAChJ,UAAS2R,aAC/GC,GAAuB,SAAC5R,EAA6B2R,EAAkBE,GAAhD,OAAyEv0B,kBAAO2rB,GAAwB,CAACjJ,UAAS2R,UAASE,iBAClJC,GAAoB,SAAC9R,EAA6B2R,GAA9B,OAAmDr0B,kBAAO4rB,GAAqB,CAAClJ,UAAS2R,aAC7GI,GAAmB,SAAC/R,EAA6B2R,GAA9B,OAAmDr0B,kBAAO6rB,GAAoB,CAACnJ,UAAS2R,aAC3GK,GAAqB,SAAChS,EAA6BiS,GAA9B,OAAkD30B,kBAAO8rB,GAAsB,CAACpJ,UAASiS,YAC9GC,GAAuB,SAAClS,EAA6BmS,GAA9B,OAAwD70B,kBAAO+rB,GAAwB,CAACrJ,UAASmS,aACxHC,GAAwB,SAACpS,EAA6BmS,GAA9B,OAAwD70B,kBAAOgsB,GAAyB,CAACtJ,UAASmS,aAC1HE,GAAoB,SAACrS,GAAD,OAAiC1iB,kBAAOisB,GAAqB,CAACvJ,aAClFsS,GAA4B,SAACtS,EAA6B6N,GAA9B,OAA6DvwB,kBAAOmsB,GAA+B,CAACzJ,UAAS6N,kBACzI0E,GAA6B,SAACvS,GAAD,OAAiC1iB,kBAAOksB,GAAgC,CAACxJ,aACtGwS,GAA4B,SAACxS,GAAD,OAAiC1iB,kBAAOosB,GAA+B,CAAC1J,aACpGyS,GAAsB,SAACzS,EAA6B0S,GAA9B,OAAmDp1B,kBAAOqsB,GAAwB,CAAC3J,UAAS0S,aAGlHC,GAAsB,SAACxyB,GAAD,OAAoB7C,kBAAO8sB,GAAuB,CAACjqB,YACzEyyB,GAA6B,SAACC,GAAD,OAAmBv1B,kBAAO+sB,GAAgC,CAACwI,UACxFC,GAA0B,SAACD,GAAD,OAAmBv1B,kBAAOgtB,GAA6B,CAACuI,UAClFE,GAAqB,SAAC/S,EAAkB7f,EAAgB6yB,GAAnC,OAAuD11B,kBAAOitB,GAAsB,CAACvK,UAAS7f,SAAQ6yB,WAE3HC,GAAY,SAAChT,EAAyBiT,GAA1B,OAA2C51B,kBAAOsqB,GAAY,CAAC3H,QAAOiT,WAClFvF,GAAc,SAAC1N,GAAD,OAA6B3iB,kBAAOuqB,GAAc,CAAC5H,WACjEkT,GAAiB,SAACzF,EAAmB0F,EAAkBpT,EAAmBqT,GAAzD,OAAuF/1B,kBAAOwqB,GAAkB,CAAC4F,YAAW0F,WAAUpT,UAASqT,qBAChKC,GAAsB,SAACrT,GAAD,OAA6B3iB,kBAAOyqB,GAAuB,CAAC9H,WAElFsT,GAAqB,SAACvT,GAAD,OAAqB1iB,kBAAO+qB,GAAsB,CAACrI,aAExEwT,GAAqB,SAACxT,GAAD,OAAqB1iB,kBAAOgrB,GAAsB,CAACtI,aAExEF,GAAc,SAACE,GAAD,OAAiC1iB,kBAAOirB,GAAc,CAACvI,aAErEyT,GAAY,SAACzT,EAA6B3b,EAA0BE,GAAxD,OAAyFjH,kBAAOmtB,GAAY,CAACzK,UAAS3b,SAAQE,cAC1IwpB,GAAa,SAAC/N,EAA6Bxb,EAAwBwpB,GAAtD,OAAoF1wB,kBAAOkrB,GAAa,CAACxI,UAASxb,QAAOwpB,iBACtIM,GAAwB,SAAC3e,GAAD,OAAqCrS,kBAAOmrB,GAAwB,CAAC9Y,kBAC7F4e,GAAwB,SAAC5e,GAAD,OAAqCrS,kBAAOorB,GAAyB,CAAC/Y,kBAC9F8e,GAAsB,SAACzO,EAA6B3b,GAA9B,OAA2D/G,kBAAOqrB,GAAwB,CAAC3I,UAAS3b,YAC1HqqB,GAAyB,SAAC1O,EAA6B3b,EAA0B2pB,GAAxD,OAAqF1wB,kBAAOsrB,GAA0B,CAAC5I,UAAS3b,SAAQ2pB,iBACjKW,GAAkC,SAAC3O,EAA6B4O,EAA+BZ,GAA7D,OAA0F1wB,kBAAOurB,GAAqC,CAAC7I,UAAS4O,SAAQZ,iBAC1L0F,GAA2B,SAAC1T,GAAD,OAAiC1iB,kBAAOotB,GAA4B,CAAC1K,aAEhG2T,GAAsB,SAACC,GAAD,OAA0Ct2B,kBAAOytB,GAAuB,CAAC6I,kBAE/FC,GAA4B,SAACC,GAAD,OAAkCx2B,kBAAO0tB,GAAuB,CAAC8I,YAE7FC,GAA0B,SAAC/T,EAA6BgU,GAA9B,OAAuD12B,kBAAOssB,GAA4B,CAAC5J,UAASgU,cAE9HxD,GAAoB,SAACxQ,GAAD,OAAiC1iB,kBAAOusB,GAAqB,CAAC7J,aAClFyQ,GAAoB,SAACzQ,GAAD,OAAiC1iB,kBAAOwsB,GAAqB,CAAC9J,aAClF0Q,GAAyB,SAAC1Q,GAAD,OAAiC1iB,kBAAOysB,GAA2B,CAAC/J,aAE7F4Q,GAAoB,SAAC5Q,EAA6B6Q,EAAoBC,EAAkBmD,GAApE,OAAsG32B,kBAAO0sB,GAAqB,CAAChK,UAAS6Q,WAAUC,WAAUmD,yBACpLlD,GAA6B,SAAC/Q,EAA6B6Q,EAAoBG,EAA4BC,EAAiCgD,GAA/G,OAAiJ32B,kBAAO2sB,GAA+B,CAACjK,UAAS6Q,WAAUG,eAAcC,iBAAgBgD,yBACtQC,GAAwB,SAAClU,EAA6BmU,EAAuCC,GAArE,OAAgG92B,kBAAO4sB,GAAyB,CAAClK,UAASmU,kBAAiBC,gBAEnLlD,GAA8B,SAAC/sB,EAAgC6b,GAAjC,OAAsD1iB,kBAAOktB,GAAiC,CAACrmB,iBAAgB6b,aC3E7IqU,GAAqB,SAACne,GAAD,OAA2C5Y,kBAAOqtB,GAAsB,CAACzU,WAE9Foe,GAAoB,SAACV,GAAD,OAA0Ct2B,kBAAOutB,GAAqB,CAAC+I,kBAE3FW,GAA8B,SAACC,GAAD,OAA+El3B,kBAAOwtB,GAAkC,CAAC0J,eAEvJC,GAAqB,SAACzU,GAAD,OAAsB1iB,kBAAO8tB,GAAsB,CAACpL,aACzE0U,GAAgB,SAAC1U,EAAkBC,EAAciT,GAAjC,OAAkD51B,kBAAO+tB,GAAgB,CAACrL,UAASC,QAAOiT,WAC1GyB,GAAgB,SAAC3U,GAAD,OAAsB1iB,kBAAOguB,GAAgB,CAACtL,aAC9D4U,GAAmB,SAAC3U,EAAciT,GAAf,OAAgC51B,kBAAOiuB,GAAmB,CAACtL,QAAOiT,WAErF2B,GAAyB,kBAAMv3B,kBAAOwvB,KAEtCgI,GAAoC,SAAC9U,EAAkBC,EAAciT,GAAjC,OAAkD51B,kBAAOkuB,GAAwC,CAACxL,UAASC,QAAOiT,WAEtJ6B,GAAsB,SAACC,GAAD,OAAsD13B,kBAAOmuB,GAAuB,CAACuJ,qBAC3GC,GAAwB,SAACD,GAAD,OAAsD13B,kBAAOouB,GAAyB,CAACsJ,qBAC/GE,GAAyB,SAACF,GAAD,OAAsD13B,kBAAOquB,GAA0B,CAACqJ,qBACjHG,GAAqB,SAACnV,EAAkB3b,GAAnB,OAAgD/G,kBAAOsuB,GAAsB,CAAC5L,UAAS3b,YAC5G+wB,GAA0B,SAACpV,EAAkB3b,EAA0B2pB,GAA7C,OAA0E1wB,kBAAOuuB,GAA2B,CAAC7L,UAAS3b,SAAQ2pB,iBACxJqH,GAA8B,SAACC,GAAD,OAAoEh4B,kBAAOwuB,GAAgCwJ,IAEzIC,GAAkC,SAACrH,GAAD,OAC3C5wB,kBAAOyuB,GAAqC,CAACmC,sBAEpCsH,GAAkC,SAACtH,GAAD,OAC3C5wB,kBAAO0uB,GAAqC,CAACkC,sBAEpCuH,GAA8B,SAACC,GAAD,OAA6Dp4B,kBAAO2uB,GAAgC,CAACyJ,sBAEnIC,GAA4B,SAAC3V,EAAkB4V,GAAnB,OAA+Dt4B,kBAAO4uB,GAA8B,CAAClM,UAAS4V,aAC1IC,GAAiC,SAAC7V,EAAkB8V,EAAmBC,GAAtC,OAAwDz4B,kBAAO6uB,GAAoC,CAACnM,UAAS8V,YAAWC,WACzJC,GAAoC,SAAChW,EAAkB8V,EAAmB5vB,GAAtC,OAAuE5I,kBAAO8uB,GAAuC,CAACpM,UAAS8V,YAAW5vB,cAC9K+vB,GAA4B,SAACjW,EAAkBgU,GAAnB,OAA2E12B,kBAAO+uB,GAA8B,CAAErM,UAASgU,cACvJkC,GAAqB,SAAClW,EAAkBmW,GAAnB,OAA2C74B,kBAAOgvB,GAAsB,CAAEtM,UAASmW,YACxGC,GAA2B,SAACpW,GAAD,OAAsB1iB,kBAAOivB,GAA6B,CAAEvM,aACvFqW,GAA2B,SAACrW,EAAkBsW,GAAnB,OAA4Ch5B,kBAAOkvB,GAA6B,CAAExM,UAASsW,kBAEtHC,GAA8B,SAACpC,GAAD,OAA2C72B,kBAAOmvB,GAAgC,CAAC0H,qBACjHqC,GAAoB,SAACC,GAAD,OAAoCn5B,kBAAOovB,GAAqB,CAAC+J,oBACrFC,GAA8B,SAACD,GAAD,OAAoCn5B,kBAAOqvB,GAAgC,CAAC8J,oBAC1GE,GAA0B,SAACxC,GAAD,OAA2C72B,kBAAOsvB,GAA2B,CAACuH,qBACxGyC,GAA+B,SAAC3W,GAAD,OAAkB3iB,kBAAOuvB,GAAkC5M,ICjE1F4W,GAAuB,kBAAMv5B,kBAAOyvB,KAEpC+B,GAAkB,kBAAMxxB,kBAAO0vB,KAE/B6B,GAAiB,SAAC7O,GAAD,OAAiC1iB,kBAAO2vB,GAAkB,CAACjN,aAE5EoP,GAAgC,SAACpP,GAAD,OAAiC1iB,kBAAO4vB,GAAmC,CAAClN,aAE5GqP,GAAgC,SAACrP,GAAD,OAAiC1iB,kBAAO6vB,GAAmC,CAACnN,aAE5GsP,GAA4B,SAACtP,GAAD,OAAiC1iB,kBAAO8vB,GAA8B,CAACpN,aAEnGqQ,GAA0B,SAACrQ,EAA6Brf,GAA9B,OAAyDrD,kBAAO+vB,GAA4B,CAACrN,UAASrf,UAEhI2vB,GAAmB,SAACtQ,GAAD,OAAiC1iB,kBAAOgwB,GAAoB,CAACtN,aAEhFuQ,GAAyB,SAACvQ,GAAD,OAAiC1iB,kBAAOiwB,GAA2B,CAACvN,aAE7F2Q,GAA4B,SAAC3Q,GAAD,OAAiC1iB,kBAAOkwB,GAA8B,CAACxN,aCrBnG8W,GAA8C,CACvDzyB,OAAQ,GACRypB,QAAS,EACTiJ,MAAM,GAGGC,GAAb,SAAAv5B,GACI,SAAAu5B,EAAmBt5B,GAAyB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAm5B,QACxB35B,IAAdK,EAAKq5B,MAAoC,OAAdr5B,EAAKq5B,OAC/Br5B,EAAKq5B,MAAO,GAFwBp5B,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAq5B,GAAA/4B,KAAAJ,KAKlCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAq5B,EAAAv5B,GAAAE,OAAAQ,GAAA,EAAAR,CAAAq5B,EAAA,EAAA54B,IAAA,SAAAC,MAAA,WAUQ,OAAOR,KAAKk5B,OAAQ,IAV5B,CAAA34B,IAAA,SAAAC,MAAA,WAcQ,OAAOR,KAAKS,IAAI,QAAQ,KAdhC,CAAAF,IAAA,SAAAC,MAAA,SAiBkB2J,GACV,OAAOnK,KAAKwG,SAAW2D,EAAM3D,QAAUxG,KAAKiwB,UAAY9lB,EAAM8lB,UAlBtE,CAAA1vB,IAAA,cAAAC,MAAA,SAqBuB2J,GACf,OAAGnK,KAAKwG,SAAW2D,EAAM3D,QAIlBxG,KAAKiwB,QAAU9lB,EAAM8lB,YA1BpCkJ,EAAA,CAAkCz4B,kBAAOu4B,KCyB5BG,GAAgC,CACzC75B,IAAK,GACLsH,KAAM,GACNopB,QAAS,IAAIkJ,GAAaF,IAC1BI,IAAK,KACLC,cAAqB,IAAI18B,MAAU28B,cACnCC,YAAY,EACZC,cAAc,EACdC,cAAc,EACdC,mBAAmB,EACnBC,0BAA0B,EAC1BC,2BAA2B,EAC3BC,uBAAuB,EACvBC,sBAAsB,EACtBC,oBAAoB,EACpBC,QAAQ,EACRC,gBAAgB,EAChBC,WAAYrpB,kBACZspB,cAAetpB,kBACfwf,aAAa,EACb+J,SAAS,EACTC,MAAO,KACPC,QAAS,KACThmB,aAAc,KACdimB,WAAW,GAGFC,GAAkB,SAACj0B,EAA0BK,GACtD,OAAO,IAAI6zB,GAAM,CACbn7B,IAAK,GACLsH,OACAopB,QAAS,IAAIkJ,GAAa,CAAC3yB,SAAQypB,QAAS,IAC5CoJ,IAAK,KACLC,kBAAc95B,EACdg6B,YAAY,EACZS,QAAQ,EACRC,gBAAgB,EAChBC,WAAYrpB,kBACZspB,cAAetpB,kBACfwf,aAAa,EACb+J,SAAS,EACTC,MAAO,KACPC,QAAS/zB,EACT+N,aAAc,KACdimB,WAAW,KAING,GAAkB,SAACn0B,EAA0BK,GACtD,OAAO,IAAI6zB,GAAM,CACbn7B,IAAK,GACLsH,OACAopB,QAAS,IAAIkJ,GAAa,CAAC3yB,SAAQypB,QAAS,IAC5CoJ,IAAK,KACLC,kBAAc95B,EACdg6B,YAAY,EACZS,QAAQ,EACRC,gBAAgB,EAChBC,WAAYrpB,kBACZspB,cAAetpB,kBACfwf,aAAa,EACb+J,SAAS,EACTC,MAAO,KACPC,QAAS/zB,EACT+N,aAAc,KACdimB,WAAW,KAINE,GAAb,SAAA96B,GACI,SAAA86B,EAAmB76B,GAAkB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAA06B,GAClB,KAAb76B,EAAKN,MACJM,EAAKN,IAAMU,cAGCT,IAAbK,EAAKw5B,MACJx5B,EAAKw5B,IAAM,WAGU75B,IAAtBK,EAAKy5B,eACJz5B,EAAKy5B,cAAsB,IAAI18B,MAAU28B,eAVZz5B,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA46B,GAAAt6B,KAAAJ,KAa3BH,IAdd,OAAAC,OAAAO,GAAA,EAAAP,CAAA46B,EAAA96B,GAAAE,OAAAQ,GAAA,EAAAR,CAAA46B,EAAA,EAAAn6B,IAAA,+BAAAC,MAAA,SAiBwC4hB,GAEhC,IAAIwY,EAAU56B,KAAKS,IAAI,MAAO2hB,EAAMiX,KAGpC,OADAuB,GADAA,EAAUA,EAAQn6B,IAAI,UAAW2hB,EAAM6N,UACrBxvB,IAAI,eAAgB2hB,EAAMkX,gBArBpD,CAAA/4B,IAAA,wBAAAC,MAAA,SAyBiCizB,GAEzB,IAAImH,EAAU56B,KAAKS,IAAI,MAAOgzB,EAAS4F,KAEvC,OADAuB,EAAUA,EAAQn6B,IAAI,UAAWgzB,EAASzD,gBA5BlD,CAAAzvB,IAAA,YAAAC,MAAA,SAgCqB64B,EAAa7yB,GAE1B,IAAIo0B,EAAU56B,KAAKS,IAAI,MAAO44B,GAK9B,OADAuB,GAHAA,EAAUA,EAAQn6B,IAAI,gBAAuB,IAAI7D,MAAU28B,gBAGzC94B,IAAI,UAAW,IAAI04B,GAAa,CAAC3yB,SAAQypB,QAASjwB,KAAKiwB,QAAQA,QAAU,OAtCnG,CAAA1vB,IAAA,6BAAAC,MAAA,SA0CsC64B,EAAawB,GAE3C,IAAID,EAAU56B,KAAKS,IAAI,MAAO44B,GAE9B,OADAuB,EAAUA,EAAQn6B,IAAI,UAAWo6B,KA7CzC,CAAAt6B,IAAA,kBAAAC,MAAA,SAiD2B2J,GAEnB,IAAIywB,EAAU56B,KAAKS,IAAI,aAAc0J,EAAMgwB,YAG3C,OADAS,GADAA,EAAUA,EAAQn6B,IAAI,gBAAiB0J,EAAMiwB,gBAC3B35B,IAAI,QAAS0J,EAAMmwB,QACtB75B,IAAI,UAAW0J,EAAMkwB,WAtD5C,CAAA95B,IAAA,YAAAC,MAAA,SAyDqBgG,GAEb,OAAOxG,KAAK2W,IAAI,aAAenQ,IA3DvC,CAAAjG,IAAA,qBAAAC,MAAA,SA8D8B8F,GAEtB,IAAIs0B,EAAU56B,KAAKS,IAAI,UAAWT,KAAK2W,IAAI,UAE3C,OADAikB,EAAUA,EAAQn6B,IAAI,QAAS,OAChBA,IAAI,eAAgB6F,OAlE3Co0B,EAAA,CAA2Bh6B,kBAAO04B,efxFtB1a,yYAgFL,IgBxFKoc,GAOPC,GhBiFQC,GAAsB,SAAtBA,EAAuBC,EAAeC,GAY/C,OAXIA,IACAA,EAAY,IAGhBD,EAAM14B,QAAQ,SAAA44B,GACVD,EAAWz4B,KAAK04B,GACbA,EAAKvV,WAAWzL,QAAU,GACzB6gB,EAAoBG,EAAKvV,WAAWpM,OAAQ0hB,KAI7CA,GAIEE,GAAyB,SAACC,EAAcC,GACjD,OAAO,IAAIC,GAAeF,EAASC,IAG1BE,GAAiB,SAACjG,GAC3B,OAAO,IAAIkG,GAAWlG,IAuBbmG,GAAkB,SAAC/4B,EAASg5B,GACrC,OAAGh5B,EAAEi5B,YAAcld,GAASmd,gBAAkBF,EAAEC,YAAcld,GAASmd,gBAC3D,EAGTF,EAAEC,YAAcld,GAASmd,gBAAkBl5B,EAAEi5B,YAAcld,GAASmd,eAC5D,EAGRl5B,EAAEi5B,YAAcld,GAASod,SAAWH,EAAEC,YAAcld,GAASod,SACpD,EAGTH,EAAEC,YAAcld,GAASod,SAAWn5B,EAAEi5B,YAAcld,GAASod,QACrD,EAGRn5B,EAAEo5B,UAAYJ,EAAEI,WACP,EAGTJ,EAAEI,UAAYp5B,EAAEo5B,UACR,EAGJ,GAGEC,GAAkB,SAACb,GAC5B,MAAO,CACHvgC,GAAIugC,EAAKc,QACTp1B,KAAMs0B,EAAKY,UACXG,YAAaf,EAAKgB,iBAClBr5B,KAAMq4B,EAAKS,UACXhK,KAAMuJ,EAAKiB,UACXC,KAAMlB,EAAKmB,UACXC,MAAOpB,EAAKqB,UACZC,aAActB,EAAKuB,iBACnBC,OAAQxB,EAAKyB,YAAaC,GAAqB1B,EAAKyB,YAAqBzB,GAAQ,KACjF2B,aAAc3B,EAAKvV,WAAWlX,IAAIquB,IAClCC,YAAa7B,EAAK8B,aAAavuB,IAAIwuB,IACnCC,YAAahC,EAAKiC,aAAa1uB,IAAIwuB,IACnCG,SAAU,IAAIC,GAAiBnC,EAAKoC,eACpCl1B,SAAU8yB,EAAKqC,gBAKjBF,6IAAyB58B,kBAAO,CAACkiB,EAAG,EAAGC,EAAG,KAGnC4a,GAAb,WAkBI,SAAAA,EAAaC,EAAaC,GAA0F,IAAvEpB,EAAuEx7B,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,IAAAA,UAAA,GAA/C68B,EAA+C78B,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAAAM,OAAAC,GAAA,EAAAD,CAAAE,KAAAy9B,GAAAz9B,KAjB5G09B,YAiB4G,EAAA19B,KAhB5G29B,kBAgB4G,EAAA39B,KAd5GpF,GAAoB,KAcwFoF,KAb5G69B,KAAuB,KAaqF79B,KAZ5G6G,KAAwB,KAYoF7G,KAX5Gk8B,YAAsC,KAWsEl8B,KAV5G8C,KAAwB,KAUoF9C,KAT5Gq8B,KAA6B,KAS+Er8B,KAR5Gu8B,OAAiB,EAQ2Fv8B,KAP5G89B,iBAAuCt+B,EAOqEQ,KAN5G+9B,cAAmC,KAMyE/9B,KAL5Gg+B,aAAkC,KAK0Eh+B,KAJ5Gi+B,aAAkC,KAI0Ej+B,KAH5Gk+B,mBAA2C1+B,EAGiEQ,KAF5G49B,qBAA+Cp+B,EAGnDQ,KAAK09B,OAASA,EACd19B,KAAK29B,aAAeA,EACpB39B,KAAKu8B,MAAQA,EACbv8B,KAAK69B,KAAOH,EAAOzB,UAAYkC,mBAAmB,GAClDn+B,KAAK49B,gBAAkBA,EAvB/B,OAAA99B,OAAAQ,GAAA,EAAAR,CAAA29B,EAAA,EAAAl9B,IAAA,QAAAC,MAAA,WA8BQ,OAHG,OAASR,KAAKpF,KACboF,KAAKpF,GAAKoF,KAAK09B,OAAOzB,SAEnBj8B,KAAKpF,KA9BpB,CAAA2F,IAAA,UAAAC,MAAA,WAyCQ,OAPG,OAASR,KAAK6G,OACb7G,KAAK6G,KAAOu3B,eAAeC,aAAar+B,KAAK09B,QAE1C19B,KAAK08B,kBAAkC,KAAd18B,KAAK6G,OAC7B7G,KAAK6G,KAAO,UAGb7G,KAAK6G,OAzCpB,CAAAtG,IAAA,iBAAAC,MAAA,WAiDQ,OAJG,OAASR,KAAKk8B,cACbl8B,KAAKk8B,YAAckC,eAAeE,sBAAsBt+B,KAAK09B,SAG1D19B,KAAKk8B,cAjDpB,CAAA37B,IAAA,UAAAC,MAAA,WAqDQ,GAAG,OAASR,KAAK8C,KACb,OAAO9C,KAAK8C,KAGhB,IAAIA,EAAOs7B,eAAeG,gBAAgBv+B,KAAK09B,QAgB/C,OAdI56B,IACAA,EAAO4b,GAAS8f,MAGjB17B,IAAS27B,GAAgBC,WACxB57B,EAAO4b,GAAS8f,MAGjBx+B,KAAKw8B,YACJ15B,EAAO4b,GAAS6d,OAGpBv8B,KAAK8C,KAAOA,EAEL9C,KAAK8C,OAzEpB,CAAAvC,IAAA,UAAAC,MAAA,WA6EQ,OAAGR,KAAKw8B,UACG,KAGRx8B,KAAK69B,KACG,KAGP79B,KAAK49B,gBAIF59B,KAAK49B,gBAAgB59B,KAAKi8B,SAHtB,OAtFnB,CAAA17B,IAAA,UAAAC,MAAA,WA6FQ,OAAG,OAASR,KAAKq8B,KACNr8B,KAAKq8B,KAGTvrB,gBAAKstB,eAAe9B,QAAQt8B,KAAK09B,WAjGhD,CAAAn9B,IAAA,YAAAC,MAAA,WA8GQ,MAT+B,qBAArBR,KAAK89B,cACX99B,KAAK89B,YAAc99B,KAAKw8B,WAAyC,OAA5Bx8B,KAAK09B,OAAOd,YAAsB,KAAO,IAAIa,EAC9Ez9B,KAAK09B,OAAOd,YACZ58B,KAAK29B,aACL39B,KAAK29B,aAAagB,YAAY3+B,KAAK29B,aAAaE,MAAMr7B,SAASxC,KAAK09B,OAAOd,aAC3E58B,KAAK49B,kBAIN59B,KAAK89B,cA9GpB,CAAAv9B,IAAA,WAAAC,MAAA,WAiHkC,IAAAwe,EAAAhf,KAC1B,GAAG,OAASA,KAAK+9B,cACb,OAAO/9B,KAAK+9B,cAGhB,IAAInY,EAAyB5lB,KAAK29B,aAAagB,YAAY3+B,KAAK09B,QAE5D9X,IACAA,EAAW,IAGf,IAAMkX,EAAehsB,gBAAK8U,GAI1B,OAFA5lB,KAAK+9B,cAAgBjB,EAAapuB,IAAI,SAAAkwB,GAAK,OAAI,IAAInB,EAAemB,EAAO5f,EAAK2e,eAAgB3e,EAAK6e,KAAM7e,EAAK4e,mBAEvG59B,KAAK+9B,gBAhIpB,CAAAx9B,IAAA,cAAAC,MAAA,SAmIuBolB,GAEf,OADA5lB,KAAK+9B,cAAgBnY,EACd5lB,OArIf,CAAAO,IAAA,aAAAC,MAAA,WAwIoC,IAAAuf,EAAA/f,KAC5B,GAAG,OAASA,KAAKg+B,aACb,OAAOh+B,KAAKg+B,aAGhB,IAAIa,EAAU/tB,kBAEd,OAAI9Q,KAAK09B,OAAOoB,YAAe9+B,KAAK09B,OAAOqB,OAI3C/+B,KAAK09B,OAAOqB,MAAMx8B,QAAQ,SAACy8B,GACpBA,GAAQA,EAAKC,QAAUD,EAAKC,OAAOhD,UAAYlc,EAAK2d,OAAOzB,UAC1D4C,EAAUA,EAAQp8B,KAAK,IAAIg7B,EAAeuB,EAAKC,OAAQlf,EAAK4d,cAAc,EAAO5d,EAAK6d,qBAI9F59B,KAAKg+B,aAAea,EAEbA,GAXIA,IAhJnB,CAAAt+B,IAAA,aAAAC,MAAA,WA8JoC,IAAA2f,EAAAngB,KAC5B,GAAG,OAASA,KAAKi+B,aACb,OAAOj+B,KAAKi+B,aAGhB,IAAIiB,EAAUpuB,kBAEd,OAAI9Q,KAAK09B,OAAOoB,YAAe9+B,KAAK09B,OAAOqB,OAI3C/+B,KAAK09B,OAAOqB,MAAMx8B,QAAQ,SAACy8B,GACpBA,GAAQA,EAAKG,QAAUH,EAAKG,OAAOlD,UAAY9b,EAAKud,OAAOzB,UAC1DiD,EAAUA,EAAQz8B,KAAK,IAAIg7B,EAAeuB,EAAKG,OAAQhf,EAAKwd,cAAc,EAAOxd,EAAKyd,qBAI9F59B,KAAKi+B,aAAeiB,EACbA,GAVIA,IAtKnB,CAAA3+B,IAAA,UAAAC,MAAA,WAoLQ,OAAOR,KAAKu8B,QApLpB,CAAAh8B,IAAA,iBAAAC,MAAA,WAwLQ,OAAOR,KAAKw8B,WAAax8B,KAAK09B,OAAOzB,UAAYkC,mBAAmB,KAxL5E,CAAA59B,IAAA,cAAAC,MAAA,WA4LQ,OAAIR,KAAK09B,OAAOL,SAIT,IAAIC,GAAiB,CAAC1a,EAAG5iB,KAAK09B,OAAOL,SAASza,EAAGC,EAAG7iB,KAAK09B,OAAOL,SAASxa,IAHrE,CAACD,EAAE,EAAGC,EAAE,KA7L3B,CAAAtiB,IAAA,cAAAC,MAAA,WAoMQ,GAAiC,qBAAvBR,KAAKk+B,cAA+B,CAC1C,IAAMkB,EAAOhB,eAAeZ,YAAYx9B,KAAK09B,QAC7C19B,KAAKk+B,cAAgBkB,GAAa,KAGtC,OAAOp/B,KAAKk+B,kBAzMpBT,EAAA,GA8MMlC,cAKF,SAAAA,EAAYF,EAAcC,GAAgBx7B,OAAAC,GAAA,EAAAD,CAAAE,KAAAu7B,GAAAv7B,KAJlCq7B,aAIiC,EAAAr7B,KAHjCs7B,cAGiC,EAAAt7B,KAFjCq/B,mBAAkD,GAGtDr/B,KAAKq7B,QAAUA,EACfr7B,KAAKs7B,SAAWA,iEAIhB,OAAOt7B,KAAKq7B,QAAQiE,gEAIpB,OAAOt/B,KAAKq7B,QAAQkE,wDAGPC,GACbx/B,KAAKq7B,QAAQoE,UAAUD,sCAGTA,GACdx/B,KAAKq7B,QAAQqE,WAAWF,+CAGD5c,EAAWC,GAClC,OAAO7iB,KAAKq7B,QAAQsE,oBAAoB/c,EAAGC,kCAGjC2c,GACVx/B,KAAKq7B,QAAQuE,OAAOJ,mCAGTA,GACXx/B,KAAKq7B,QAAQwE,QAAQL,qCAIrB,IAAMM,EAAU9/B,KAAKq7B,QAAQ0E,WAC7B,OAAOhD,GAAe,IAAIU,GAAeqC,EAAQE,UAAWF,+CAI5D9/B,KAAKs7B,SAAS2E,QAAQtpB,IAAI,UAAUupB,8CAIpClgC,KAAKq7B,QAAQ8E,sEAIb,OAAOrgC,OAAOtF,KAAKwF,KAAKq/B,oBAAoBr+B,OAAS,oCAGxCm6B,GACb,IAAMiF,EAAOpgC,KAAKq7B,QAAQ0E,WAAWM,QAAQlF,EAAKc,SAElD,OAAOmE,GAAQpgC,KAAKq7B,QAAQ0E,WAAWO,UAAUF,0CAG/BjF,EAAYrH,GAAwB,IAAArT,EAAAzgB,KAChDogC,EAAOpgC,KAAKq7B,QAAQ0E,WAAWM,QAAQlF,EAAKc,SAOlD,GAAGmE,EAAH,CACIpgC,KAAKq7B,QAAQkF,MAAMC,cAEnB,IAEI,GADAxgC,KAAKq7B,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgB1gC,KAAKq7B,QAAQkF,MAAOH,EAAMtM,KACrEsK,eAAeuC,YAAYP,KAAUjF,EAAKqB,UACrBx8B,KAAKq7B,QAAQuF,YAAY,CAACR,IAEzC79B,QAAQ,SAAAy8B,GACPlL,GACIkL,EAAKC,QAAUD,EAAKC,SAAWmB,GAAQ3f,EAAK4a,QAAQ0E,WAAWO,UAAUtB,EAAKC,SAC7Exe,EAAK4a,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgBjgB,EAAK4a,QAAQkF,MAAOvB,EAAMlL,IAG1EkL,EAAKG,QAAUH,EAAKG,SAAWiB,GAAQ3f,EAAK4a,QAAQ0E,WAAWO,UAAUtB,EAAKG,SAC7E1e,EAAK4a,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgBjgB,EAAK4a,QAAQkF,MAAOvB,EAAMlL,KAG7ErT,EAAK4a,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgBjgB,EAAK4a,QAAQkF,MAAOvB,EAAMlL,MAfzF,QAoBI9zB,KAAKq7B,QAAQkF,MAAMM,iBAvB3B,CA6CA,GAJI7gC,KAAKq/B,mBAAmByB,eAAeV,EAAKnE,WAC5Cj8B,KAAKq/B,mBAAmBe,EAAKnE,SAAWj8B,KAAKsgC,UAAUnF,IAGxDiF,EAAM,CACLpgC,KAAKq7B,QAAQ0F,sBACb/gC,KAAKq7B,QAAQkF,MAAMS,wCAEnB,IACIhhC,KAAKq7B,QAAQ0E,WAAWkB,WAAWb,EAAMtM,GAD7C,QAGI9zB,KAAKq7B,QAAQkF,MAAMW,sCAGvBlhC,KAAKq7B,QAAQ8F,uBAGjBr8B,OAAOs8B,WAAW,WACXtN,IACIqH,EAAKqB,WACJ/b,EAAK4a,QAAQgG,KAAK,IAAK,GACvB5gB,EAAK4a,QAAQiG,QAAQlB,GACrB3f,EAAK4a,QAAQkG,oBAAoB9gB,EAAK4a,QAAQkF,MAAM5B,YAAYyB,KAEhE3f,EAAK4a,QAAQkG,oBAAoB,CAACnB,MAG3C,wDAIH,GAAGpgC,KAAKwhC,gCAAiC,CACrCxhC,KAAKq7B,QAAQkF,MAAMC,cAEnB,IACI,IAAK,IAAM77B,KAAU3E,KAAKq/B,mBACtB,GAAGr/B,KAAKq/B,mBAAmByB,eAAen8B,GAAS,CAC/C,IAAMy7B,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQ17B,GAErCy7B,GACCpgC,KAAKq7B,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgB1gC,KAAKq7B,QAAQkF,MAAOH,EAAMpgC,KAAKq7B,QAAQkF,MAAMD,UAAUF,KAKlHpgC,KAAKq/B,mBAAqB,GAX9B,QAaIr/B,KAAKq7B,QAAQkF,MAAMM,+CAKf1F,GACZ,IAAMiF,EAAOpgC,KAAKq7B,QAAQ0E,WAAWM,QAAQlF,EAAKc,SAElD,IAAImE,EACA,OAAO,EAGX,IAAM1+B,EAAQ1B,KAAKq7B,QAAQoG,KAAKC,SAAStB,GACnCrb,EAAkB,MAATrjB,EAAiBA,EAAMqjB,MAAQ/kB,KAAKq7B,QAAQsG,aAAavB,GACxE,MAA8D,MAAtDwB,QAAQC,SAAS9c,EAAO,SAAU,KAAK+c,6CAGlC3G,EAAY4G,GACzB,IAAM3B,EAAOpgC,KAAKq7B,QAAQ0E,WAAWM,QAAQlF,EAAKc,SAElD,GAAImE,EAAJ,CAIA,IAAM1+B,EAAQ1B,KAAKq7B,QAAQoG,KAAKC,SAAStB,GACjB,MAAT1+B,EAAiBA,EAAMqjB,MAAQ/kB,KAAKq7B,QAAQsG,aAAavB,GAExEpgC,KAAKq7B,QAAQ0E,WAAWS,cACxB,IACIxgC,KAAKq7B,QAAQ2G,cAAc,SAAUD,EAAQ,IAAM,KAAM,CAAC3B,IAD9D,QAGIpgC,KAAKq7B,QAAQ0E,WAAWc,YAGxBkB,GAEA/hC,KAAKq7B,QAAQ4G,qBAAqBjiC,KAAKq7B,QAAQ0E,WAAWmC,eAAe9B,2CAI5DjF,GACjB,IAAMiF,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQlF,EAAKc,SAE1CmE,GACCpgC,KAAKq7B,QAAQ8G,YAAY,CAAC/B,IAAO,oCAIzBv5B,GACZ,GAAI7G,KAAKq7B,QAAQ+G,YACjB,CACIpiC,KAAKq7B,QAAQkF,MAAMC,cAEnB,IAEI,IAAMJ,EAAOpgC,KAAKq7B,QAAQgH,QAAQ,IAAIC,OAAOz7B,GAAO7G,KAAKq7B,QAAQkF,MAAM1C,MACvE79B,KAAKq7B,QAAQkH,iBAAiBnC,GAHlC,QAOIpgC,KAAKq7B,QAAQkF,MAAMM,kDAKZ1F,GACf,GAAGA,EAAKuB,iBACJ,MAAMpiC,MAAM,wCAGhB,IAAM8lC,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQlF,EAAKc,SACvCuG,EAAgBxiC,KAAKwiC,cAAcrH,GAEzCn7B,KAAKq7B,QAAQkF,MAAMC,cACnB,IAEI,IAAMiC,EAAQziC,KAAKq7B,QAAQkF,MAAM1C,KAAK6E,SAAStC,GAC/CpgC,KAAKq7B,QAAQ8G,YAAY,CAAC/B,IAAO,GAE9BoC,IACKC,EAAQ,GAAKA,GAASziC,KAAKq7B,QAAQkF,MAAMoC,cAAc3iC,KAAKq7B,QAAQkF,MAAM1C,MAE1E79B,KAAKq7B,QAAQkH,iBAAiBviC,KAAKq7B,QAAQkF,MAAMqC,WAAW5iC,KAAKq7B,QAAQkF,MAAM1C,KAAM4E,EAAQ,IAI7FziC,KAAKq7B,QAAQkH,iBAAiB,OAZ1C,QAkBIviC,KAAKq7B,QAAQkF,MAAMM,mDAIN1F,GACjB,OAAOn7B,KAAKq7B,QAAQwH,mBAAmB5G,UAAYd,EAAKc,iDAGpCd,GACpB,IAAMiF,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQlF,EAAKc,SAE7C,GAAGmE,EAAM,CACLpgC,KAAKq7B,QAAQkF,MAAMC,cAEnB,IACIxgC,KAAKq7B,QAAQkH,iBAAiBnC,GADlC,QAGIpgC,KAAKq7B,QAAQkF,MAAMM,gEAM3B7gC,KAAKq7B,QAAQkH,iBAAiB,6CAGZpH,GAClB,IAAMiF,EAAOpgC,KAAKq7B,QAAQ0E,WAAWM,QAAQlF,EAAKc,SAE/CmE,GAAQpgC,KAAKq7B,QAAQkF,MAAM5B,YAAYyB,IACtCpgC,KAAKq7B,QAAQkG,oBAAoBvhC,KAAKq7B,QAAQkF,MAAM5B,YAAYyB,2CAIlDjF,EAAY5oB,GAC9B,IAAM6tB,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQlF,EAAKc,SAE1CmE,GACCpgC,KAAKq7B,QAAQyH,iBAAiB1C,EAAM7tB,wDAKxC,SAAIvS,KAAKq7B,QAAQ+G,aAAgBpiC,KAAKq7B,QAAQ0H,sBAE1C/iC,KAAKq7B,QAAQ2H,UAAUhjC,KAAKq7B,QAAQ4H,oBAAqB,EAAG,GAAG,EAAOjjC,KAAKq7B,QAAQwH,qBAC5E,+CAQX,IAAMK,EAAmD,GAEzD,GAAGljC,KAAKwhC,gCAAiC,CACrCxhC,KAAKq7B,QAAQkF,MAAMS,wCAEnB,IACI,IAAK,IAAMr8B,KAAU3E,KAAKq/B,mBACtB,GAAGr/B,KAAKq/B,mBAAmByB,eAAen8B,GAAS,CAC/C,IAAMy7B,EAAOpgC,KAAKq7B,QAAQkF,MAAMF,QAAQ17B,GAExC,GAAGy7B,EAAM,CACL,IAAM+C,EAAsBnjC,KAAKq7B,QAAQkF,MAAMD,UAAUF,GAEtD+C,IAAwBnjC,KAAKq/B,mBAAmB16B,KAC/Cu+B,EAAoBv+B,GAAUw+B,EAC9BnjC,KAAKq7B,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgB1gC,KAAKq7B,QAAQkF,MAAOH,EAAMpgC,KAAKq/B,mBAAmB16B,QAVrH,QAgBI3E,KAAKq7B,QAAQkF,MAAMW,uCAM3B,IACM/F,EADM,IAAIiI,QAAQxB,QAAQyB,qBACfC,OAAOtjC,KAAKq7B,QAAQ0E,YAEC,IAAlC//B,KAAKq7B,QAAQoG,KAAK8B,UAAU3gB,GAA6C,IAAlC5iB,KAAKq7B,QAAQoG,KAAK8B,UAAU1gB,IAEnEsY,EAAKqI,aAAa,KAAMC,KAAKC,MAAsC,IAAhC1jC,KAAKq7B,QAAQoG,KAAK8B,UAAU3gB,GAAW,KAC1EuY,EAAKqI,aAAa,KAAMC,KAAKC,MAAsC,IAAhC1jC,KAAKq7B,QAAQoG,KAAK8B,UAAU1gB,GAAW,MAG9EsY,EAAKqI,aAAa,OAASxjC,KAAKq7B,QAAQsI,gBAAmB,IAAM,KACjExI,EAAKqI,aAAa,WAAYxjC,KAAKq7B,QAAQuI,UAC3CzI,EAAKqI,aAAa,SAAWxjC,KAAKq7B,QAAQwI,aAAaC,cAAiB,IAAM,KAC9E3I,EAAKqI,aAAa,WAAaxjC,KAAKq7B,QAAQ0I,eAAe3B,YAAe,IAAM,KAChFjH,EAAKqI,aAAa,UAAYxjC,KAAKq7B,QAAQ2I,kBAAkB5B,YAAe,IAAM,KAClFjH,EAAKqI,aAAa,SAAWxjC,KAAKq7B,QAAQ4I,wBAA2B,IAAM,KAC3E9I,EAAKqI,aAAa,OAASxjC,KAAKq7B,QAAQ6I,eAAkB,IAAM,KAChE/I,EAAKqI,aAAa,OAASxjC,KAAKq7B,QAAQ8I,YAAe,IAAM,KAC7DhJ,EAAKqI,aAAa,YAAaxjC,KAAKq7B,QAAQ+I,WAC5CjJ,EAAKqI,aAAa,YAAaxjC,KAAKq7B,QAAQgJ,WAAWvhB,OACvDqY,EAAKqI,aAAa,aAAcxjC,KAAKq7B,QAAQgJ,WAAWthB,QAEzB,MAA3B/iB,KAAKq7B,QAAQiJ,YAEbnJ,EAAKqI,aAAa,aAAcxjC,KAAKq7B,QAAQiJ,YAGjD,IAAMjL,EAAMuI,QAAQ2C,OAAOpJ,GAG3Bn7B,KAAKq7B,QAAQkF,MAAMS,wCAEnB,IACI,IAAK,IAAMwD,KAAWxkC,KAAKq/B,mBACvB,GAAGr/B,KAAKq/B,mBAAmByB,eAAe0D,GAAU,CAChD,IAAMjI,EAAQv8B,KAAKq7B,QAAQkF,MAAMF,QAAQmE,GAEtCjI,GACCv8B,KAAKq7B,QAAQkF,MAAME,QAAQ,IAAIC,gBAAgB1gC,KAAKq7B,QAAQkF,MAAOhE,EAAO2G,EAAoBsB,MAN9G,QAWIxkC,KAAKq7B,QAAQkF,MAAMW,sCAGvB,OAAO7H,6CAGemG,GAAiD,IAAAxe,EAAAhhB,KACvEA,KAAKq7B,QAAQoJ,eAAeC,YAAYC,QAAQC,OAAQ,WACjD5jB,EAAKqa,QAAQ0H,mBACZvD,GAAS,GAETA,GAAS,+CAKIqF,GACrB7kC,KAAKq7B,QAAQyJ,kBAAkBD,mCAI/B7kC,KAAKq7B,QAAQ0J,UAAU5P,iBAKlB6P,GAAb,oBAAAA,IAAAllC,OAAAC,GAAA,EAAAD,CAAAE,KAAAglC,GAAA,OAAAllC,OAAAQ,GAAA,EAAAR,CAAAklC,EAAA,EAAAzkC,IAAA,QAAAC,MAAA,WAEQ,MAAO,oBAFf,CAAAD,IAAA,UAAAC,MAAA,WAMQ,MAAO,gBANf,CAAAD,IAAA,iBAAAC,MAAA,WAUQ,MAAO,KAVf,CAAAD,IAAA,UAAAC,MAAA,WAcQ,OAAOke,GAAS8f,OAdxB,CAAAj+B,IAAA,UAAAC,MAAA,WAkBQ,OAAO,OAlBf,CAAAD,IAAA,UAAAC,MAAA,WAsBQ,OAAOsQ,oBAtBf,CAAAvQ,IAAA,UAAAC,MAAA,WA0BQ,OAAO,IA1Bf,CAAAD,IAAA,iBAAAC,MAAA,WA8BQ,OAAO,IA9Bf,CAAAD,IAAA,YAAAC,MAAA,WAkCQ,OAAO,OAlCf,CAAAD,IAAA,WAAAC,MAAA,WAsCQ,OAAOsQ,oBAtCf,CAAAvQ,IAAA,aAAAC,MAAA,WA0CQ,OAAOsQ,oBA1Cf,CAAAvQ,IAAA,aAAAC,MAAA,WA8CQ,OAAOsQ,oBA9Cf,CAAAvQ,IAAA,cAAAC,MAAA,WAkDQ,OAAO,OAlDf,CAAAD,IAAA,cAAAC,MAAA,SAqDuBolB,GACf,OAAO5lB,OAtDf,CAAAO,IAAA,cAAAC,MAAA,WA0DQ,MAAO,CAACoiB,EAAG,EAAGC,EAAG,OA1DzBmiB,EAAA,GA+DMvJ,cAGF,SAAAA,EAAYlG,GAAoBz1B,OAAAC,GAAA,EAAAD,CAAAE,KAAAy7B,GAAAz7B,KAFxBu1B,cAEuB,EACvBA,IACAA,EAAW,IAGfv1B,KAAKu1B,SAAWA,iEAIhB,OAAO,gDAIP,MAAO,CAAC3S,EAAG,EAAGC,EAAG,qCAGJ2c,uCAICA,gDAIS5c,EAAWC,GAClC,MAAO,CAACD,IAAEC,oCAGA2c,oCAICA,sCAKX,OAAO,IAAIwF,8IAYX,OAAO,oCAGM7J,GACb,OAAO,yCAGWA,EAAYrH,wFAQlBqH,GACZ,OAAO,oCAGMA,EAAY4G,0CAIR5G,qCAILt0B,wCAIGs0B,0CAIEA,GACjB,OAAO,2CAGaA,8FAQFA,2CAIAA,EAAY5oB,yDAK9B,OAAO,8CAIP,OAAOvS,KAAKu1B,oDAGUiK,8CAIDqF,8CA0BvBI,GAA0C,CAC5CrqC,GAAI,GACJiM,KAAM,GACNq1B,YAAa,GACbp5B,KAAM4b,GAAS8f,KACf5M,KAAM,KACNyK,KAAMvrB,kBACNyrB,OAAO,EACPE,cAAc,EACdE,OAAQ,KACRG,aAAchsB,kBACdksB,YAAalsB,kBACbqsB,YAAarsB,kBACbusB,SAAU,CAACza,EAAE,EAAGC,EAAE,GAClBxa,SAAU,MAGR00B,GAAiB,SAAjBA,EAAkB5B,GACpB,OAAO,IAAI+J,GAAW,CAClBtqC,GAAIugC,EAAKc,QACTp1B,KAAMs0B,EAAKY,UACXG,YAAaf,EAAKgB,iBAClBr5B,KAAMq4B,EAAKS,UACXhK,KAAMuJ,EAAKiB,UACXC,KAAMlB,EAAKmB,UACXC,MAAOpB,EAAKqB,UACZC,aAActB,EAAKuB,iBACnBC,OAAQxB,EAAKyB,YAAaC,GAAqB1B,EAAKyB,YAAqBzB,GAAQ,KACjF2B,aAAc3B,EAAKvV,WAAWlX,IAAIquB,GAClCC,YAAa7B,EAAK8B,aAAavuB,IAAIwuB,IACnCC,YAAahC,EAAKiC,aAAa1uB,IAAIwuB,IACnCG,SAAU,IAAIC,GAAiBnC,EAAKoC,eACpCl1B,SAAU8yB,EAAKqC,iBAIjBN,GAA0B,SAAC/B,GAC7B,OAAO,IAAI+J,GAAW,CAClBtqC,GAAIugC,EAAKc,QACTp1B,KAAMs0B,EAAKY,UACXG,YAAaf,EAAKgB,iBAClBr5B,KAAMq4B,EAAKS,UACXhK,KAAMuJ,EAAKiB,UACXC,KAAMlB,EAAKmB,UACXC,MAAOpB,EAAKqB,UACZC,aAActB,EAAKuB,iBACnBC,OAAQxB,EAAKyB,YAAaC,GAAqB1B,EAAKyB,YAAqBzB,GAAQ,KACjF2B,aAAc3B,EAAKvV,WAAWlX,IAAIquB,IAClCC,YAAalsB,kBACbqsB,YAAarsB,kBACbusB,SAAU,IAAIC,GAAiBnC,EAAKoC,eACpCl1B,SAAU8yB,EAAKqC,iBAIjBX,GAAuB,SAAvBA,EAAwBF,EAAcwI,GACxC,OAAO,IAAID,GAAW,CAClBtqC,GAAI+hC,EAAOV,QACXp1B,KAAM81B,EAAOZ,UACbG,YAAaS,EAAOR,iBACpBr5B,KAAM65B,EAAOf,UACbhK,KAAM+K,EAAOP,UACbC,KAAMM,EAAOL,UACbC,MAAOI,EAAOH,UACdC,aAAcE,EAAOD,iBACrBC,OAAQA,EAAOC,YAAaC,EAAqBF,EAAOC,YAAqBD,GAAU,KACvFG,aAAchsB,kBACdksB,YAAalsB,kBACbqsB,YAAarsB,kBACbusB,SAAU,IAAIC,GAAiBX,EAAOY,eACtCl1B,SAAUs0B,EAAOa,iBAKnB0H,wLAEE,OAAOllC,KAAKpF,qCAIZ,OAAOoF,KAAK6G,8CAIZ,OAAO7G,KAAKk8B,8CAIZ,OAAOl8B,KAAK8C,uCAIZ,OAAO9C,KAAK4xB,uCAIZ,OAAO5xB,KAAKq8B,uCAIZ,OAAOr8B,KAAKu8B,+CAIZ,OAAOv8B,KAAKy8B,iDAIZ,OAAOz8B,KAAK28B,0CAIZ,OAAO38B,KAAK88B,kDAIZ,OAAO98B,KAAKg9B,iDAIZ,OAAOh9B,KAAKm9B,kDAIZ,OAAOn9B,KAAKq9B,+CAIZ,OAAOr9B,KAAKqI,6CAGGud,GACf,OAAO5lB,KAAKS,IAAI,eAAgBmlB,UA1DfllB,kBAAOukC,egB9iCpBnK,gGAOPC,uCAEE,ICTKqK,GDSC3G,GAAe3+B,OAAA2N,GAAA,EAAA3N,CAAA,GAAO4e,GAAaqc,IAenCsK,GAA8C,CACvD7+B,OAAQ,GACRE,SAAU,GACVyb,QAAS,GACT6N,aAAc,IAAImJ,GAAaF,IAC/Bx5B,OAAQq7B,GAAcwK,OACtBtS,SAAUyL,GAAgBD,KAC1BtG,MAAO,GACPqN,KAAM,GACN5gC,YAAQnF,GAGCgmC,GAAb,SAAA5lC,GAAA,SAAA4lC,IAAA,OAAA1lC,OAAAC,GAAA,EAAAD,CAAAE,KAAAwlC,GAAA1lC,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA0lC,GAAAn6B,MAAArL,KAAAe,YAAA,OAAAjB,OAAAO,GAAA,EAAAP,CAAA0lC,EAAA5lC,GAAA4lC,EAAA,CAAkC9kC,kBAAO2kC,KAE5BI,GAAmB,SAAC1P,EAA4B2P,GACzD,OAAO,IAAIF,GAAa,CACpB/lC,OAAQs2B,EAAat2B,OACrBuzB,SAAU+C,EAAa/C,SACvBkF,MAAOnC,EAAa4P,UACpBn/B,OAAQk/B,EAASl/B,OACjBE,SAAUg/B,EAASh/B,SACnByb,QAAS4T,EAAa3T,MACtB4N,aAAc+F,EAAa6P,iBAC3BL,KAAMxP,EAAa8P,WACnBlhC,OAAQoxB,EAAapxB,UErBhBmhC,GAA8C,CACvDvmC,IAAK,GACLsH,KAAM,eACNub,MAAO,GACP2jB,UAAWj1B,kBACXmf,QAAS,EACT4V,WAAY,GACZr/B,OAAQ,GACR/G,OAAQq7B,GAAcwK,OACtBtS,SAAUyL,GAAgBD,KAC1BmH,UAAW,GACXhhC,YAAQnF,GAGCg3B,GAAqB,SAAC32B,GAC/B,IAAMmmC,EAAKlmC,OAAA2N,GAAA,EAAA3N,CAAA,GAAOD,EAAP,CAAakmC,UAAWj1B,gBAAKjR,EAAKkmC,aAC7C,OAAO,IAAIE,GAAaD,IAGfvP,GAAoB,SAC7BrU,EACA2jB,EACA9V,EACAzpB,EACA/G,EACAuzB,EACA2S,EACAhhC,GAEA,OAAO,IAAIshC,GAAa,CACpB1mC,IAAK,GACLsH,KAAMi/B,GAAyBj/B,KAC/Bub,QACA2jB,YACA9V,UACA4V,WAAY,GACZr/B,SACA/G,SACAuzB,WACA2S,YACAhhC,YAIKuhC,GAA+B,SAACC,GACzC,OAAO3P,GAAmB,CACtBj3B,IAAK4mC,EAAYC,QACjBhkB,MAAO+jB,EAAYhkB,QACnBtb,KAAMi/B,GAAyBj/B,KAC/Bk/B,UAAWI,EAAYE,MACvBpW,QAASkW,EAAYnW,aAAaC,QAClCzpB,OAAQ2/B,EAAYnW,aAAaxpB,OACjCq/B,WAAYM,EAAYN,WACxBpmC,OAAQ0mC,EAAY1mC,OACpBkF,OAA+B,OAAvBwhC,EAAYxhC,OAAiBwhC,EAAYxhC,YAASnF,EAC1DwzB,SAAUmT,EAAYnT,SACtB2S,UAAWQ,EAAYR,aAIlBM,GAAb,SAAArmC,GACI,SAAAqmC,EAAmBpmC,GAAyB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAimC,GACzB,KAAbpmC,EAAKN,MACJM,EAAKN,IAAMU,SAGQ,KAApBJ,EAAKgmC,aACJhmC,EAAKgmC,YAAoB,IAAIjpC,MAAU28B,eANHz5B,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAmmC,GAAA7lC,KAAAJ,KASlCH,IAVd,OAAAC,OAAAO,GAAA,EAAAP,CAAAmmC,EAAArmC,GAAAE,OAAAQ,GAAA,EAAAR,CAAAmmC,EAAA,EAAA1lC,IAAA,iBAAAC,MAAA,WAcQ,OAAO,IAAI24B,GAAa,CACpB3yB,OAAQxG,KAAKwG,OACbypB,QAASjwB,KAAKiwB,cAhB1BgW,EAAA,CAAkCvlC,kBAAOolC,eDvF7BV,iCAML,IAaMkB,GAAwD,CACjE/mC,IAAK,GACL8N,cAf0B,oBAgB1BxG,KAAM,GACN0/B,SAAU,KACVzjC,KAAMsiC,GAAiB/sB,MACvBuN,cAAUpmB,EACVq/B,aAASr/B,EACT0/B,aAAS1/B,GAGAgnC,GAAwC,SAAC3mC,GAClD,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,MAAO,cACf,CAACA,GAAO,QAAS,mBAAqBjN,EAAKjF,IAC3C,CAACkS,GAAO,YAAa,uBAAyBjN,EAAKjF,IACnD,CAACkS,GAAO,QAAS,mBAAqBjN,EAAKjF,KAG/C,OAAIwP,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAIg8B,GAAkB,CACjClnC,IAAKM,EAAKjF,GACVyS,cAtCsB,oBAuCtBxG,KAAMhH,EAAKgH,KACX0/B,SAAU1mC,EAAK0mC,SACfzjC,KAAMjD,EAAKiD,KACX+7B,QAASh/B,EAAKg/B,cAAWr/B,EACzB0/B,QAASr/B,EAAKq/B,cAAW1/B,EACzBomB,SAAU/lB,EAAK+lB,eAAYpmB,MAItBinC,GAAb,SAAA7mC,GACI,SAAA6mC,EAAmB5mC,GAA8B,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAymC,GAC9B,KAAb5mC,EAAKN,MACJM,EAAKN,IAAMU,SAF8BH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA2mC,GAAArmC,KAAAJ,KAKvCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA2mC,EAAA7mC,GAAA6mC,EAAA,CAAuC/lC,kBAAO4lC,KEzCjCI,GAAoD,CAC7DnnC,IAAK,GACL8N,cAnB0B,kBAoB1B8U,QAAS,GACTpQ,iBAAkB,GAClB40B,aAAc,GACdxW,YAAa,CAACK,aAAa,EAAOD,YAAY,EAAOD,aAAa,GAClE9a,OAAQ,UACRoxB,eAAgB,GAGPC,GAAsC,SAAChnC,GAChD,IAAM0N,EAAmD7C,GAAS7K,EAC9D,CAACiN,GAAO,gBAAiB,wBACzB,CAACA,GAAO,WAAY,sBAAwBjN,EAAKinC,eACjD,CAACh6B,GAAO,oBAAqB,+BAAiCjN,EAAKinC,eACnE,CAACh6B,GAAO,gBAAiB,2BAA6BjN,EAAKinC,eAC3D,CAACh6B,GAAO,eAAgB,0BAA4BjN,EAAKinC,eACzD,CAACh6B,GAAO,UAAW,qBAAuBjN,EAAKinC,gBAGnD,OAAI18B,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAIs8B,GAAJjnC,OAAA2N,GAAA,EAAA3N,CAAA,GACR4mC,GACA7mC,EAFQ,CAGXN,IAAKM,EAAKiS,kBAILi1B,GAAb,SAAAnnC,GACI,SAAAmnC,EAAmBlnC,GAA4B,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAA+mC,GAC3B,KAAblnC,EAAKN,MACLM,EAAKN,IAAMU,SAF4BH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAinC,GAAA3mC,KAAAJ,KAKrCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAinC,EAAAnnC,GAAAE,OAAAQ,GAAA,EAAAR,CAAAinC,EAAA,EAAAxmC,IAAA,SAAAC,MAAA,WAWQ,OAAOR,KAAKS,IAAI,iBAAkBT,KAAK4mC,eAAiB,KAXhE,CAAArmC,IAAA,SAAAC,MAAA,WAgBQ,OAAOR,KAAKS,IAAI,SAAU,eAhBlCsmC,EAAA,CAAqCrmC,kBAAOgmC,KCnC/BM,GAA2D,CACpEznC,IAAK,GACL8N,cAZ0B,kBAa1B8iB,YAAa,CAACK,aAAa,EAAOD,YAAY,EAAOD,aAAa,GAClES,OAAQ,GACR5O,QAAS,IAGA8kB,GAA6C,SAACpnC,GACvD,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,iBAAkB,yBAC1B,CAACA,GAAO,eAAgB,0BAA4BjN,EAAKinC,eACzD,CAACh6B,GAAO,UAAW,qBAAuBjN,EAAKinC,eAC/C,CAACh6B,GAAO,WAAY,sBAAwBjN,EAAKinC,gBAGrD,OAAI18B,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAIy8B,GAAuB,CACtC3nC,IAAKM,EAAKinC,cACVz5B,cAhCsB,kBAiCtB8iB,YAAatwB,EAAKswB,YAClBY,OAAQlxB,EAAKkxB,OACb5O,QAAStiB,EAAKsiB,YAIT+kB,GAAb,SAAAtnC,GACI,SAAAsnC,EAAmBrnC,GAAmC,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAknC,GACnC,KAAbrnC,EAAKN,MACJM,EAAKN,IAAMU,SAFmCH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAonC,GAAA9mC,KAAAJ,KAK5CH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAonC,EAAAtnC,GAAAE,OAAAQ,GAAA,EAAAR,CAAAonC,EAAA,EAAA3mC,IAAA,oBAAAC,MAAA,SAS6B2vB,GAErB,OAAOnwB,KAAKS,IAAI,cAAe0vB,OAXvC+W,EAAA,CAA4CxmC,kBAAOsmC,KC7BtCA,GAA2D,CACpEznC,IAAK,GACL8N,cAZ0B,yBAa1B8iB,YAAa,CAACK,aAAa,EAAOD,YAAY,EAAOD,aAAa,GAClE9pB,OAAQ,GACR2b,QAAS,IAGAglB,GAA6C,SAACtnC,GACvD,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,iBAAkB,yBAC1B,CAACA,GAAO,eAAgB,0BAA4BjN,EAAKinC,eACzD,CAACh6B,GAAO,UAAW,qBAAuBjN,EAAKinC,eAC/C,CAACh6B,GAAO,WAAY,sBAAwBjN,EAAKinC,gBAGrD,OAAI18B,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAI28B,GAAuB,CACtC7nC,IAAKM,EAAKinC,cACVz5B,cAhCsB,yBAiCtB8iB,YAAatwB,EAAKswB,YAClB3pB,OAAQ3G,EAAK2G,OACb2b,QAAStiB,EAAKsiB,YAITilB,GAAb,SAAAxnC,GACI,SAAAwnC,EAAmBvnC,GAAmC,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAonC,GACnC,KAAbvnC,EAAKN,MACJM,EAAKN,IAAMU,SAFmCH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAsnC,GAAAhnC,KAAAJ,KAK5CH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAsnC,EAAAxnC,GAAAwnC,EAAA,CAA4C1mC,kBAAOsmC,KC1CtCK,GAAgD,CACzDllB,QAAS,GACTkX,IAAK,GACLrJ,aAAc,IAAImJ,GAAaF,KAGtBqO,GAAb,SAAA1nC,GACI,SAAA0nC,EAAmBznC,GAA2B,OAAAC,OAAAC,GAAA,EAAAD,CAAAE,KAAAsnC,GAAAxnC,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAwnC,GAAAlnC,KAAAJ,KACpCH,IAFd,OAAAC,OAAAO,GAAA,EAAAP,CAAAwnC,EAAA1nC,GAAA0nC,EAAA,CAAmC5mC,kBAAO2mC,KCmB3BnkC,kBAAiB6iB,qBAAiD,CAACC,KCnCpD,gBDmCED,CAPX,SAACpkB,GAAD,OAA8Be,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAAUxkB,EAAMykB,cACzF1jB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,OAAOyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,8BAA+B0kC,WAAW,KAEpH7kC,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,UAAWnB,EAAMkB,EAAE,qCEnBtC2kC,GAAmC,SAAC9lC,EAAiCC,GAAlC,OAC5CmP,gBAAKpP,EAAME,MAAM,CAAC8a,GAAQ,yBAAyBQ,eAAelF,YAAclH,mBAEvE22B,GAAuC,SAACjhC,GACjD,OAAOxE,aACH,CAACwlC,IACD,SAACE,GACG,OAAOA,EAAyBplC,OAAO,SAAAzB,GAAI,OAAIA,EAAK2F,SAAWA,OAK9DmhC,GAAyC,WAClD,OAAO3lC,aACH,CAACwlC,GAAkCI,EAAkBlqB,qBACrD,SAACmqB,EAA0BvgB,GACvB,GAAsC,OAAnCA,EAAYjY,mBAIf,OAAOw4B,EAAyBC,KAAK,SAAAC,GAAI,OAAIA,EAAKxoC,MAAQ+nB,EAAYjY,wBCjCrE24B,GAAiB,sBACjBC,GAAoB,yBACpBC,GAAmB,wBACnBC,GAAsB,wBACtBC,GAAyB,6BACzBC,GAAkB,sBAClBC,GAA2B,8BAC3BC,GAAmC,qCACnCC,GAA6B,ICC7BC,GAAgB,kBAAMhpC,kBAAOuoC,KAC7BU,GAAmB,kBAAMjpC,kBAAOwoC,KAChCU,GAAkB,kBAAMlpC,kBAAOyoC,KAC/BU,GAAqB,kBAAMnpC,kBAAO0oC,KAClCU,GAAuB,SAACC,GAAD,OAAoBrpC,kBAAO2oC,GAAwB,CAACU,YAE3EC,GAAiB,SAAUliC,EAAchH,EAASuI,EAA4BC,GAA7D,IAA+E2gC,EAA/EjoC,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAiGynC,GAAjG,OAAgI/oC,kBAAO4oC,GAAiB,CAClLxhC,OACAhH,OACAuI,qBACAC,WACA2gC,aAESC,GAAuB,SAAU7gC,EAA4BuuB,EAAyBtuB,GAA/D,OAAoF5I,kBAAO2I,EAAoB,CAC/IuuB,YACAtuB,cAES6gC,GAAgB,SAAU9gC,EAA4BuuB,EAAyBtuB,GAA/D,OAAoF5I,kBAAO2I,EAAoB,CACxIuuB,YACAtuB,cAES8gC,GAAmB,SAAU/gC,EAA4BuuB,EAAyBtuB,GAA/D,OAAoF5I,kBAAO2I,EAAoB,CAC3IuuB,YACAtuB,cAGS+gC,GAAyB,SAAUC,EAAqBC,EAAwBjhC,GAAvD,OAA4E5I,kBAAO6oC,GAA0B,CAC/Ie,cACAC,iBACAjhC,cAESkhC,GAA+B,SAACF,GAAD,OAAyB5pC,kBAAO8oC,GAAkC,CAACc,iBAClGG,GAAoB,SAAUF,EAAwBjxB,EAAUhQ,GAA5C,OAAiE5I,kBAAO6pC,EAAgB,CACrHjxB,QACAhQ,cA2BSohC,GAAkB,SAAGC,GAC9B,MAAoB,YAAbA,EAAI5mC,MAGF6mC,GAAqB,SAAGD,GACjC,MAAoB,YAAbA,EAAI5mC,MAGF8mC,GAAW,SAAGF,GACvB,MAAoB,UAAbA,EAAI5mC,MC7EF+mC,GAAmB,YACnBC,GAAoB,aACpBC,GAAsB,eACtBC,GAAuB,gBACvBC,GAAyB,iBAyBzB1gC,GAAgC,CACzCiM,OAAQu0B,IAGCh8B,GAAc,SAACyH,GAAD,OAAkC,IAAIjE,GAAO,CAACiE,YAE5D00B,GAAqB,kBAAc,IAAI34B,GAAO,CAACiE,OAAQu0B,MAEvDI,GAAqB,SAAC30B,GAC/B,OAAQA,GACJ,KAAKq0B,GACL,KAAKC,GACL,KAAKC,GACL,KAAKE,GACL,KAAKD,GACD,MACJ,QACI,MAAM,IAAI1vC,MAAM,0BAA4Bkb,EAAS,gBAIpDjE,GAAb,SAAA3R,GACI,SAAA2R,EAAmB1R,GAAmB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAuR,GACnC44B,GAAmBtqC,EAAK2V,QADU1V,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAyR,GAAAnR,KAAAJ,KAE5BH,IAHd,OAAAC,OAAAO,GAAA,EAAAP,CAAAyR,EAAA3R,GAAAE,OAAAQ,GAAA,EAAAR,CAAAyR,EAAA,EAAAhR,IAAA,cAAAC,MAAA,WAOQ,OAAOR,KAAKwV,SAAWq0B,KAP/B,CAAAtpC,IAAA,iBAAAC,MAAA,WAWQ,OAAOR,KAAKwV,SAAWu0B,KAX/B,CAAAxpC,IAAA,eAAAC,MAAA,WAeQ,OAAOR,KAAKwV,SAAWs0B,KAf/B,CAAAvpC,IAAA,kBAAAC,MAAA,WAmBQ,OAAOR,KAAKwV,SAAWw0B,KAnB/B,CAAAzpC,IAAA,oBAAAC,MAAA,WAuBQ,OAAOR,KAAKwV,SAAWy0B,KAvB/B,CAAA1pC,IAAA,SAAAC,MAAA,SA0BkB2J,GACV,OAAOnK,KAAKwV,SAAWrL,EAAMqL,WA3BrCjE,EAAA,CAA4B7Q,kBAAO6I,eCpDtB6gC,GAAe,sBACfC,GAAqB,2BCErBC,GAAe,SAACC,GAAD,OAAe9qC,kBAAO2qC,GAAc,CAACG,UCApDC,GAAoB,SAACC,GAAD,OAAmChrC,kBAAO4qC,GAAoB,CAACI,qBC6B/EC,IANJC,GAAmB,SAAUC,GAAV,OAA+D,IAAI1vC,QAAkB,SAACT,EAASU,GAAV,OACjHyvC,EACKC,QAAQ,SAACx+B,GAAD,OAAsB5R,EAAQ4R,KACtC/Q,MAAM,SAACjB,GAAD,OAAYc,EAAOd,QAG3B,SAAUqwC,KAAV,IAAAjrC,EAAAqrC,EAAAL,EAAAM,EAAAhlC,EAAAilC,EAAA,OAAAr7B,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAE4B,OAF5B2D,EAAA3D,KAAA,EAEkCiF,aAAK,CACtCpB,EAAYs6B,qBAHb,OAUC,OARE5qC,EAFHoQ,EAAAG,KAMC86B,EAAa,EACXL,EAAgChrC,EAAOrC,QAAQqtC,GAPlD56B,EAAAC,KAAA,EAAAD,EAAA3D,KAAA,EAUO++B,GAAUR,EAAGxvC,OAVpB,OAAA4U,EAAA3D,KAAA,iBAYC,OAZD2D,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,SAAAA,EAAA3D,KAAA,GAYOy+B,GAAgBF,EAAGS,SAZ1B,QAewB,OAfxBr7B,EAAA3D,KAAA,GAe8By+B,GAAiCF,EAAGU,mBAflE,QAkBQ,OAHLJ,EAfHl7B,EAAAG,KAAAH,EAAA3D,KAAA,GAkBc0M,aAAO6E,EAAaC,yBAAqBle,GAlBvD,QAoDH,OA/BAuG,GADAA,GAFIA,EAlBD8J,EAAAG,MAoBSvP,IAAI,MAAOgqC,EAAGW,YAAaC,MAC3B5qC,IAAI,OAAQsqC,EAAQrkC,UAE1BskC,EAAOD,EAAQO,WAGjBvlC,EADDilC,EAAKO,aACGxlC,EAAKtF,IAAI,cAAeuqC,EAAKO,aAAa,IAE1CxlC,EAAKtF,IAAI,cAAesqC,EAAQrkC,UAIvCX,EADDilC,EAAKQ,YAAqC,KAAvBR,EAAKQ,WAAW,GAC3BzlC,EAAKtF,IAAI,YAAauqC,EAAKQ,WAAW,IAEtCzlC,EAAKtF,IAAI,YAAasF,EAAK4H,4BAGnCq9B,EAAKS,eACJ1lC,EAAOA,EAAKtF,IAAI,cAAeuqC,EAAKS,aAAa,KAGlDT,EAAKU,YACJ3lC,EAAOA,EAAKtF,IAAI,WAAYuqC,EAAKU,UAAU,KAQ/C3lC,GADAA,GADAA,GADAA,GADAA,GADAA,EAAOA,EAAKtF,IAAI,QAASsqC,EAAQpkC,QACrBlG,IAAI,YAAasqC,EAAQY,YACzBlrC,IAAI,aAAcsqC,EAAQa,WAC1BnrC,IAAI,QAASuO,EAAaP,UAAUg8B,EAAGoB,eAAgB7nC,UAAU6F,SACjEpJ,IAAI,UAAWyO,EAAatF,cAAc6gC,EAAGoB,eAAgB7nC,UAAU6F,SACvEpJ,IAAI,YAAY,GAlDzBoP,EAAA3D,KAAA,GAoDG0E,aAAIyI,EAAW7V,QAAQsC,OAAOC,IApDjC,QAsDH,OAtDG8J,EAAA3D,KAAA,GAsDG0E,aAAIb,EAAeu6B,aAAa,CAACrvC,MAAOwvC,EAAGxvC,SAtD9C,QAyDC,OAzDD4U,EAAA3D,KAAA,GAyDO4/B,aAAM,KAzDb,QA2DuB,OA3DvBj8B,EAAAC,KAAA,GAAAD,EAAA3D,KAAA,GA2D6By+B,GAAyBF,EAAGsB,YAAY,KA3DrE,YA6DuB,IA7DvBl8B,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,gBAAA2D,EAAAwB,OAAA,uBAkES,OAlETxB,EAAAC,KAAA,GAAAD,EAAA3D,KAAA,GAkEe++B,GAAUR,EAAGxvC,OAlE5B,QAoESoB,GAAmBouC,EAAGxvC,OApE/B4U,EAAA3D,KAAA,iBAsES,OAtET2D,EAAAC,KAAA,GAAAD,EAAAm8B,GAAAn8B,EAAA,UAAAA,EAAA3D,KAAA,GAsEey+B,GAAgBF,EAAGS,SAtElC,QAyEK,OAzELr7B,EAAA3D,KAAA,GAyEW0E,aAAIb,EAAeu6B,aAAa,CAACrvC,MAAOwvC,EAAGxvC,SAzEtD,aA2ES6vC,EAAa,GA3EtB,CAAAj7B,EAAA3D,KAAA,SA4ES,OA5ET2D,EAAA3D,KAAA,GA4Ee0E,aAAIC,EAAarN,QAAQ3C,KAAK,4BAA6B,oCA5E1E,QA+EKiqC,EAAa,EA/ElBj7B,EAAA3D,KAAA,oBAAA2D,EAAAC,KAAA,GAAAD,EAAAo8B,GAAAp8B,EAAA,UAiFuB,IAAfi7B,EAjFR,CAAAj7B,EAAA3D,KAAA,SAkFS,OAlFT2D,EAAA3D,KAAA,GAkFe0E,aAAIC,EAAarN,QAAQlI,MAAM,sBAAuB,sEAlFrE,eAoFKwvC,EAEiB,GAtFtB,CAAAj7B,EAAA3D,KAAA,SAwFS,OAxFT2D,EAAA3D,KAAA,GAwFey+B,GAAgBF,EAAGS,SAxFlC,QAAAr7B,EAAA3D,KAAA,kCAAA2D,EAAAI,SAAAi8B,GAAAlsC,KAAA,0BC7BP,IAEamsC,GAAoB,kBAA4C,SAACzqC,GAAD,OAF5D,SAACA,EAA0BzG,GAA3B,OAAqDyG,EAAME,MAAM,CAAC,OAAQ,OAAQ,UAEQwqC,CAAS1qC,kBCyBnG2qC,iBAOPC,iBAsCAC,iBAiBAC,iBA2BAC,IAzFH,SAAUJ,KAAV,OAAA18B,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACgC,OADhC2D,EAAA3D,KAAA,EACsCiF,aAAK,CAC1Cu7B,EAAY1zB,KAAKqxB,qBAFlB,OAIH,OAJGx6B,EAAAG,KAAAH,EAAA3D,KAAA,EAIGkF,aAAKk7B,IAJR,wBAAAz8B,EAAAI,SAAA08B,GAAA3sC,MAOP,SAAUssC,KAAV,IAAA7sC,EAAAorC,EAAA,OAAAl7B,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAAAyE,EAAAb,KAAA,SAG0C,OAH1Ca,EAAAzE,KAAA,EAGgDiF,aAAK,CAAC6H,EAAKgvB,eAAgBhvB,EAAKivB,oBAHhF,OAGkBxoC,EAHlBkR,EAAAX,KAAAW,EAAAI,GAKoBtR,EAAOqD,KAL3B6N,EAAAzE,KAAAyE,EAAAI,KAMqBiI,EAAKgvB,eAN1B,EAAAr3B,EAAAI,KAwBqBiI,EAAKivB,kBAxB1B,mBAQoC,OADhBzsC,QAAQC,IAAI,iDAPhCkV,EAAAzE,KAAA,GAQ0C9L,aAAKqoC,IAR/C,YAWoC,KAHVoC,EAR1Bl6B,EAAAX,OAWwD,OAAZ66B,EAX5C,CAAAl6B,EAAAzE,KAAA,SAawB,OAbxByE,EAAAzE,KAAA,GAa8B0E,aAAIb,EAAO44B,mBAbzC,YAeuC,IAAZkC,EAf3B,CAAAl6B,EAAAzE,KAAA,SAiB4B,OAjB5ByE,EAAAzE,KAAA,GAiBkCkF,aAAKm7B,IAjBvC,QAAA57B,EAAAzE,KAAA,qBAmB2C,IAAZ2+B,EAnB/B,CAAAl6B,EAAAzE,KAAA,SAqBwB,OADA1Q,QAAQoxC,KAAK,8EApBrCj8B,EAAAzE,KAAA,GAqB8B9L,aAAK,CAACysC,GAAQA,GAAOC,aArBnD,eAAAn8B,EAAAU,OAAA,oBA0BoB,OADA7V,QAAQC,IAAI,oDAzBhCkV,EAAAzE,KAAA,GA0B0B9L,aAAK,CAACysC,GAAQA,GAAOC,aA1B/C,eAAAn8B,EAAAU,OAAA,oBAAAV,EAAAzE,KAAA,gBAiCQ,OAjCRyE,EAAAb,KAAA,GAAAa,EAAAzE,KAAA,GAiCc0E,aAAIb,EAAO84B,qBAAqB,0BAjC9C,eAAAl4B,EAAAK,OAAA,6BAAAL,EAAAV,SAAA88B,GAAA/sC,KAAA,cAsCA,SAAUusC,KAAV,IAAAS,EAAAC,EAAAC,EAAA,OAAAv9B,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAG2B,OAFvB1Q,QAAQC,IAAI,8FADhByV,EAAAhF,KAAA,EAGiCkF,aAAK+7B,IAHtC,OAI0B,OADhBH,EAHV97B,EAAAlB,KAAAkB,EAAAhF,KAAA,EAIgCkF,aAAKg8B,IAJrC,OAKmB,OADTH,EAJV/7B,EAAAlB,KAAAkB,EAAAhF,KAAA,EAKyBkF,aAAKq7B,IAL9B,OAQqC,OAH3BS,EALVh8B,EAAAlB,KAAAkB,EAAAhF,KAAA,GAQ2CiF,aAAK,CAAC6H,EAAKivB,oBARtD,QAYI,OAZJ/2B,EAAAlB,KAUIxU,QAAQoxC,KAAK,+EAVjB17B,EAAAhF,KAAA,GAYUmhC,aAAOL,GAZjB,QAaI,OAbJ97B,EAAAhF,KAAA,GAaUmhC,aAAOJ,GAbjB,QAcI,OAdJ/7B,EAAAhF,KAAA,GAcUmhC,aAAOH,GAdjB,yBAAAh8B,EAAAjB,SAAAq9B,GAAAttC,MAiBA,SAAUwsC,GAAW/sC,EAA0B8tC,GAA/C,OAAA59B,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,OACI1Q,QAAQC,IAAI,iCAAkCgE,GADlD0e,EAAApN,GAGYtR,EAAOqD,KAHnBqb,EAAAjS,KAAAiS,EAAApN,KAIaiI,EAAKqvB,gBAJlB,EAAAlqB,EAAApN,KAaaiI,EAAKsvB,yBAblB,GAAAnqB,EAAApN,KAmBaiI,EAAKuvB,iCAnBlB,mBAKkE,OALlEpqB,EAAAjS,KAAA,EAKwE0M,aAAO40B,GAAgBC,eAAeC,iBAL9G,WAAAvvB,EAAAnO,KAO4B29B,cAP5B,CAAAxvB,EAAAjS,KAAA,SAQgB,OARhBiS,EAAAjS,KAAA,GAQsB9L,aAAKwtC,GAASnuC,GARpC,QAAA0e,EAAAjS,KAAA,iBAUgB1Q,QAAQoxC,KAAK,6CAA8CntC,EAAOrC,QAAS,2BAV3F,eAAA+gB,EAAA9M,OAAA,oBAiBY,OAHIk8B,EAAgBzM,eAAerhC,EAAOrC,QAAQisC,cAC9CwE,GAAuBpuC,EAAOrC,QAAQisC,YAAakE,GAfnEpvB,EAAAjS,KAAA,GAiBkBkF,aAAK08B,GAAiBruC,EAAQ8tC,GAjBhD,eAAApvB,EAAA9M,OAAA,2BAoBYw8B,GAAuBpuC,EAAOrC,QAAQisC,YAAakE,GApB/DpvB,EAAA9M,OAAA,qCAAA8M,EAAAlO,SAAA89B,GAAA/tC,MA2BA,SAAUysC,KAAV,IAAAc,EAAA9tC,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAA4Q,GAAA,cAAAA,EAAA1Q,KAAA0Q,EAAAtU,MAAA,OACUqhC,EAAmC,GAD7C,OAIyC,OAJzC/sB,EAAAtU,KAAA,EAI+CiF,aAAK,CAAC6H,EAAKqvB,gBAAiBrvB,EAAKsvB,yBAA0BtvB,EAAKuvB,mCAJ/G,OAMQ,OAFM9oC,EAJd+gB,EAAAxQ,KAAAwQ,EAAAtU,KAAA,EAMckF,aAAKo7B,GAAY/sC,EAAQ8tC,GANvC,OAAA/sB,EAAAtU,KAAA,gCAAAsU,EAAAvQ,SAAA+9B,GAAAhuC,MAUA,ICpHYuR,GDoHNu8B,GAAen+B,GAAAhN,EAAAyW,KAAG,SAAlB00B,EAA6BpE,EAAsDuE,GAAjE,IAAAC,EAAA71B,EAAA,OAAA1I,GAAAhN,EAAAiN,KAAA,SAAAu+B,GAAA,cAAAA,EAAAr+B,KAAAq+B,EAAAjiC,MAAA,OACpB1Q,QAAQC,IAAI,6CAA8CiuC,EAAItsC,QAAQisC,aAEhE6E,EAAOE,aAAa,SAACC,GAkBvB,OAJAxB,GAAOyB,GAAG5E,EAAItsC,QAAQisC,YAbN,SAACxpC,GACbwuC,EAAKxuC,KAcTgtC,GAAOyB,GAAG,QAXW,SAACC,GAMlBF,EAL0B,qBAAfE,EAKN,IAAIj0C,MAAMi0C,EAAWzF,QAJjB,IAAIxuC,MAAM,8BAWhB,WACHkB,QAAQC,IAAI,yFAA0FiuC,EAAItsC,QAAQisC,aAClHwD,GAAO2B,IAAI9E,EAAItsC,QAAQisC,eAE5BoF,KAAQC,UAAU,KAErBT,EAASvE,EAAItsC,QAAQisC,aAAe6E,EA3BhB,OA+BE,OA/BFC,EAAAr+B,KAAA,EAAAq+B,EAAAjiC,KAAA,EA+BQiF,aAAK+8B,GA/Bb,OAgCZ,OADM71B,EA/BM81B,EAAAn+B,KAAAm+B,EAAAjiC,KAAA,GAgCN0E,aAAIb,EAAOy5B,iBAAiBE,EAAItsC,QAAQksC,eAAgBjxB,EAAOqxB,EAAItsC,QAAQiL,WAhCrE,QAAA8lC,EAAAjiC,KAAA,iBAmCZ,OAnCYiiC,EAAAr+B,KAAA,GAAAq+B,EAAAp9B,GAAAo9B,EAAA,SAkCZD,EAAKS,QAlCOR,EAAAjiC,KAAA,GAmCN0E,aAAIb,EAAO84B,qBAAqBsF,EAAAp9B,GAAE9R,UAnC5B,eAAAkvC,EAAA98B,OAAA,kBAAA88B,EAAAjiC,KAAA,iCAAAiiC,EAAAl+B,SAAlB69B,EAAkB9tC,KAAA,YAyClByoC,GAAgB,WAClB,OAAO,IAAIvtC,QAAsB,SAACT,GAC3BoyC,GAAO+B,UACNn0C,EAAQ,OAIZoyC,GAAOyB,GAAG,UAAW,kBAAM7zC,GAAQ,KACnCoyC,GAAOp3B,UACRlY,KACC,SAAAC,GAAQ,OAAIA,IACdC,MACE,SAAAnC,GAAK,OAAI,KAIXuzC,GAAkB,WACpB,OAAO,IAAI3zC,QAAQ,SAACT,GAChBoyC,GAAOyB,GAAG,YAAa,WACnB7zC,GAAQ,QAKdiuC,GAAmB,WACrB,OAAO,IAAIxtC,QAAQ,SAACT,GAChBoyC,GAAOyB,GAAG,aAAc,SAACxF,GACrBruC,EAAQquC,QAMdqE,GAAoBx9B,GAAAhN,EAAAyW,KAAG,SAAvB+zB,IAAuB,IAAA2B,EAAA,OAAAn/B,GAAAhN,EAAAiN,KAAA,SAAAmR,GAAA,cAAAA,EAAAjR,KAAAiR,EAAA7U,MAAA,OAEN,OAFM6U,EAAA7U,KAAA,EAEA9L,aAAKsoC,IAFL,OAIrB,OAFMI,EAFe/nB,EAAA/Q,KAGrBxU,QAAQoxC,KAAK,yCAA0C9D,GAHlC/nB,EAAA7U,KAAA,EAIf0E,aAAIb,EAAO84B,qBAAqBC,IAJjB,OAAA/nB,EAAA7U,KAAA,gCAAA6U,EAAA9Q,SAAvBk9B,EAAuBntC,QAQvBotC,GAAmBz9B,GAAAhN,EAAAyW,KAAG,SAAtBg0B,IAAsB,OAAAz9B,GAAAhN,EAAAiN,KAAA,SAAAm/B,GAAA,cAAAA,EAAAj/B,KAAAi/B,EAAA7iC,MAAA,OAEpB,OAFoB6iC,EAAA7iC,KAAA,EAEd9L,aAAKyuC,IAFS,OAQpB,OALArzC,QAAQC,IAAI,qCAHQszC,EAAA7iC,KAAA,EAQd4/B,aAAM,KARQ,OASpB,OAToBiD,EAAA7iC,KAAA,EASd0E,aAAIb,EAAO44B,mBATG,OAAAoG,EAAA7iC,KAAA,iCAAA6iC,EAAA9+B,SAAtBm9B,EAAsBptC,QActB6tC,GAAyB,SAACxE,EAAqB4E,GAC7CA,EAASnN,eAAeuI,KACxB7tC,QAAQC,IAAI,4CAA6C4tC,GACzD4E,EAAS5E,GAAasF,eACfV,EAAS5E,KAIlBuE,GAAOj+B,GAAAhN,EAAAyW,KAAG,SAAVw0B,EAAwBlE,GAAd,IAAAzuC,EAAA2I,EAAAorC,EAAAhG,EAAA,OAAAr5B,GAAAhN,EAAAiN,KAAA,SAAAyR,GAAA,cAAAA,EAAAvR,KAAAuR,EAAAnV,MAAA,OAEZ,OAFYmV,EAAAnV,KAAA,EAEN0E,aAAIb,EAAOk5B,oBAAoBS,EAAItsC,QAAQgL,mBAAoB,CACjEvB,KAAM6iC,EAAItsC,QAAQyJ,KAClB/D,KAAM,UACN1F,QAASssC,EAAItsC,QAAQyC,MACtB6pC,EAAItsC,QAAQiL,WANH,OASM,OATNgZ,EAAAvR,KAAA,EAAAuR,EAAAnV,KAAA,EASY0M,aAAO8zB,EAAcuC,aAAa9C,qBAT9C,OAWe,OAFjBlxC,EATEomB,EAAArR,KAAAqR,EAAAnV,KAAA,EAWqBgjC,aAAU,CACnCF,IAAK5uC,aAAK+uC,GAAS,CACftoC,KAAM6iC,EAAItsC,QAAQyJ,KAClB/D,KAAM,UACN1F,QAAQ0C,OAAA2N,GAAA,EAAA3N,CAAA,GACD4pC,EAAItsC,QAAQyC,KADZ,CAEH5E,YAGR+tC,QAAS8C,aAAMpC,EAAItsC,QAAQ4rC,WApBvB,UAAAplC,EAAAyd,EAAArR,KAWDg/B,EAXCprC,EAWDorC,IAAKhG,EAXJplC,EAWIolC,SAYRgG,EAvBI,CAAA3tB,EAAAnV,KAAA,SAwBJ,OAxBImV,EAAAnV,KAAA,GAwBE0E,aAAIb,EAAOm5B,aAAaQ,EAAItsC,QAAQgL,mBAAoB,CAC1DvB,KAAM6iC,EAAItsC,QAAQyJ,KAClB/D,KAAM,UACN1F,QAASssC,EAAItsC,QAAQyC,MACtB6pC,EAAItsC,QAAQiL,WA5BX,YA+BJ2gC,EA/BI,CAAA3nB,EAAAnV,KAAA,SAgCJ,OAhCImV,EAAAnV,KAAA,GAgCE0E,aAAIb,EAAOo5B,gBAAgBO,EAAItsC,QAAQgL,mBAAoB,CAC7DvB,KAAM6iC,EAAItsC,QAAQyJ,KAClB/D,KAAM,QACN1F,QAASssC,EAAItsC,QAAQyC,KACrBipC,OAAQ,mBAAqBY,EAAItsC,QAAQ4rC,QAAU,OACpDU,EAAItsC,QAAQiL,WArCX,QAAAgZ,EAAAnV,KAAA,iBAwCR,OAxCQmV,EAAAvR,KAAA,GAAAuR,EAAAtQ,GAAAsQ,EAAA,SAAAA,EAAAnV,KAAA,GAwCF0E,aAAIb,EAAOo5B,gBAAgBO,EAAItsC,QAAQgL,mBAAoB,CAC7DvB,KAAM6iC,EAAItsC,QAAQyJ,KAClB/D,KAAM,QACN1F,QAASssC,EAAItsC,QAAQyC,KACrBipC,OAAQznB,EAAAtQ,GAAE+wB,YACX4H,EAAItsC,QAAQiL,WA7CP,yBAAAgZ,EAAApR,SAAV29B,EAAU5tC,KAAA,YAmDVmvC,GAAW,SAAGzF,GAChB,OAAO,IAAIxuC,QAAQ,SAACT,EAASU,GACzB,IACI,GAAI0xC,GAAOuC,aAEP,YADAj0C,EAAO,IAAIb,MAAM,yBAGrBuyC,GAAOwB,KAAK3E,EAAI7iC,KAAM6iC,EAAItsC,QAAS,kBAAM3C,GAAQ,KACnD,MAAOJ,GACLc,EAAOd,OEhSNg1C,GAAiB,SAAC3tC,GAAD,OAAqCA,EAAME,MAAM,CAAC,SAAU,SAAU,YAEvF8rC,GAAgB,WACzB,OAAO1rC,aACH,CAACqtC,IACD,SAAC75B,GAAD,OAA0D85B,EAAYvhC,YAAYyH,MCJ7E+5B,GAAiB,SAACptB,GAAD,eAAAtd,OAA+Bsd,EAA/B,YACjBqtB,GAAkB,SAACjK,GAAD,gBAAA1gC,OAA4B0gC,EAA5B,YAGlBkK,GAAuB,SAAC/tC,EAAiCC,GAAlC,OAAiDD,EAAME,MAAM,CAAC,iBAAkB,kBAEvG8tC,GAA0B,SAACnvC,EAAaovC,GACjD,OAAO3tC,aACH,CAACytC,IACD,SAACG,GAAD,OAAmDA,EAAShhC,IAAIrO,GAAOqvC,EAASj5B,IAAIpW,GAAOovC,KAItFE,GAA2B,WACpC,OAAO7tC,aACH,CAACytC,IACD,SAACG,GAAD,OAAkEA,EAASE,cAItEC,GAAiC,WAC1C,OAAO/tC,aACH,CAACytC,IACD,SAACG,GAAD,QAAyDA,EAASj5B,IAAI,sBCjBxEq5B,GAAe,SAACtuC,EAAiCygB,GAAlC,OAAoFzgB,EAAME,MAAM,CAAC,kBAAmB,SAAUugB,KAEtI8tB,GAAgB,SAACvuC,EAAiCC,GAAlC,OAAwFquC,GAAatuC,EAAOC,EAAMqI,MAAMkmC,OAAO3wC,MAE/I4wC,GAAqB,SAACzuC,EAAiCC,GAAlC,OAAwFD,EAAME,MAAM,CAAC,kBAAmB,SAAUD,EAAMqI,MAAMkmC,OAAO3wC,OAASuR,mBAEnLs/B,GAAwB,SAACjuB,GAAD,OAAwF,SAACzgB,GAAD,OAAqCsuC,GAAatuC,EAAOygB,KAEzKkuB,GAAe,WACxB,OAAOruC,aACH,CAACiuC,IACD,SAAC7tB,GAAD,OAA6BA,KAIxBkuB,GAAe,WACxB,OAAOtuC,aACH,CAACmuC,IACD,SAACI,GAAD,OAAiCA,KAI5BC,GAA8B,WACvC,IAAMC,EAAiBhzB,EAAavD,qBAEpC,OAAO,SAACxY,EAAiCC,GAGrC,MAAO,CACHoE,KAHgB0qC,EAAe/uC,EAAOC,MAQrC+uC,GAA+B,WACxC,IAAM5uB,EAAWuuB,KAEjB,OAAO,SAAC3uC,EAAiCC,GAGrC,MAAO,CACHygB,MAHUN,EAASpgB,EAAOC,MAQxBgvC,GAAkC,WAC5C,IAAM7uB,EAAWuuB,KACXI,EAAiBhzB,EAAavD,qBAC9B02B,EAAkBC,GAAepD,eAAeC,gBAChDoD,EAAWR,KACXS,EAAqBrB,GDvDE,aCuDqC,GAElE,OAAO,SAAChuC,EAAiCC,GAOrC,MAAO,CACHygB,MAPUN,EAASpgB,EAAOC,GAQ1BoE,KAPS0qC,EAAe/uC,EAAOC,GAQ/B4uC,MAPUO,EAASpvC,EAAOC,GAQ1BqvC,aAPiBJ,EAAgBlvC,EAAOC,GAQxCsvC,SAPaF,EAAmBrvC,EAAOC,MC3D7CuvC,GAA4C,CAC9C/nB,QAASrY,kBACT+jB,SAAS,EACTsc,wBAAoB3xC,EACpB4xC,uBAAuB,GAGdC,GAAb,SAAAzxC,GAAA,SAAAyxC,IAAA,OAAAvxC,OAAAC,GAAA,EAAAD,CAAAE,KAAAqxC,GAAAvxC,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAuxC,GAAAhmC,MAAArL,KAAAe,YAAA,OAAAjB,OAAAO,GAAA,EAAAP,CAAAuxC,EAAAzxC,GAAAyxC,EAAA,CAAkC3wC,kBAAOwwC,KCV5BI,GAA+B,SAACnvB,GAAD,OAAoF,SAACzgB,GAAD,OAFpG,SAACA,EAAiCygB,GAAlC,OAAgFzgB,EAAME,MAAM,CAAC,kBAAmB,UAAWugB,KAAa,IAAIkvB,GAEHE,CAAoB7vC,EAAOygB,KCInLqvB,GAAoB,SAAC9vC,EAAiCC,GAAlC,OAAyEmP,gBAAKpP,EAAME,MAAM,CAAC,kBAAmB,WAAWsb,eAAelF,YAAclH,mBAE1K2gC,GAAuB,SAAC/vC,EAAiCC,GAAlC,QAA4DD,EAAME,MAAM,CAAC,kBAAmB,mBAEnH8vC,GAAiC,SAAChwC,EAAiCC,GAAlC,OAA0DD,EAAME,MAAM,CAAC,kBAAmB,6BAA8B,GAEzJ+vC,GAAwB,SAACjwC,EAAiCC,GAAlC,OAAsED,EAAME,MAAM,CAAC,kBAAmB,cAE9HgwC,GAAgB,WAAmH,IAAlHC,EAAkH9wC,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,IAAAA,UAAA,GACtI+wC,EAAqCnK,KAE3C,OAAO3lC,aACH,CAACwvC,GAAmBG,GAAuBlC,GAAsB/xB,GAAqBo0B,GACtF,SAAC17B,EAAQ27B,EAAmCjqC,EAAiCwf,EAAiCjY,GAiC1G,OAhCA+G,EAASA,EAAO9T,OAAO,SAAA8f,GACnB,OAAG/S,GACKA,EAAmB+H,sBAA+C,OAAvBgL,EAAM7N,cAI9C6N,EAAM7N,eAAiBlF,EAAmB/I,eAEnB,OAAvB8b,EAAM7N,eAIO,KAAzBw9B,EAAczvC,SACb8T,EAASA,EAAO9T,OAAO,SAAC8f,GACpB,OAAgF,IAAzEA,EAAMvb,KAAKmrC,cAAc1tC,OAAOytC,EAAczvC,OAAO0vC,mBAIhEH,GAAsBE,EAAcE,wBACpC77B,EAASA,EAAO9T,OAAO,SAAA8f,GAAK,OAAKA,EAAM6X,WAGvC4X,GAAsBE,EAAcG,qBACpC97B,EAASA,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAM6X,UAGtC4X,IACAz7B,EAASA,EAAO9T,OAAO,SAAA8f,GACnB,OAAuD,IAAhDta,EAAa6O,IAAI44B,GAAentB,EAAM7iB,SAI9C6W,KAKN+7B,GAAoB,SAACphB,GAC9B,OAAO/uB,aACH,CAACwvC,IACD,SAACp7B,GAAD,OAAoCA,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAMgY,cAAc7c,SAASwT,QAInFqhB,GAAsB,WAC/B,OAAQpwC,aACJ,CAACyvC,IACD,SAACY,GAAD,OAAwBA,KAInBC,GAA6B,WACtC,OAAOtwC,aACH,CAAC0vC,IACD,SAACa,GAAD,OAAyBA,KAIpBC,GAAuB,WAChC,OAAOxwC,aACH,CAAC2vC,IACD,SAACI,GAAD,OAA2DA,KAItDU,GAAmC,WAC5C,IAAM7wB,EAAYgwB,KACZc,EAAWj1B,EAAa8E,2BACxBowB,EAAkBP,KAExB,OAAO,SAAC1wC,EAAiCC,GAKrC,MAAO,CACHyU,OALWwL,EAAUlgB,EAAOC,GAAOW,OAAO,SAAA8f,GAAK,OAAKA,EAAMoY,YAM1DoY,UALcF,EAAShxC,EAAOC,GAM9BkzB,QALY8d,EAAgBjxC,EAAOC,MC1FzCG,GAAkB+wC,GAAcrC,8BASvBttC,kBAAiB4jB,aAA0B3jB,aACtDC,mBAAQtB,GARe,SAACuB,GAAD,OAAwBC,8BAC/C,CACI0e,SAAUxe,EAAQwe,UAEtB3e,KAKAK,aAAU,IAF4CP,CCgBlC,SAAExB,GAAyB,IAAAshB,EACLC,qBAAS,GADJC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACxC6vB,EADwC3vB,EAAA,GACzB4vB,EADyB5vB,EAAA,GAEzC9T,EAAqBkY,uBAAYogB,MAEvC,OAAOppC,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAO9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAAUrB,EAAMqB,QAASgwC,KAAK,QAChFz0C,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAiB1iB,EAAMkB,EAAE,mBACzBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACM3iB,EAAMsxC,WAAaH,GAAiBv0C,GAAA,cAACooB,GAAA,EAAD,CAAS0B,KAAK,SAAS6qB,SAAS,EACvBrsB,QAASxX,GAAsBA,EAAmBiI,YAC5C3V,EAAMkB,EAAE,iCACRwM,GAAsBA,EAAmB+H,qBACrCzV,EAAMkB,EAAE,2BACRlB,EAAMkB,EAAE,mCAE9DlB,EAAMsxC,UAAY10C,GAAA,cAAC40C,GAAD,CAAclqB,cAAepnB,kBAAOuxC,EAAWha,mBAAoBjT,SAAU,SAACtmB,GAAUkzC,GAAiB,GAnBnH,SAAClzC,EAAkB8B,GAClC,IAAMygB,EAAQgxB,EAAW3Y,gBAAgB94B,EAAMoE,KAAKxG,IAAKM,EAAK8W,IAAI,SAClEhV,EAAMqgB,SAASI,EAAOzgB,EAAMwnB,SAiB6GE,CAAWxpB,EAAO8B,MACtJmxC,GAAiBv0C,GAAA,kFCnCpB80C,GAAqBC,GAWZpwC,kBATQ,SAACvB,GAA+B,IAAAshB,EACnBC,qBAAS,GADUC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC5CjB,EAD4CmB,EAAA,GAClCowB,EADkCpwB,EAAA,GAGnD,OAAQ5kB,GAAA,cAAAA,GAAA,cACJA,GAAA,cAAConB,GAAA,EAAD,CAAQE,QAASlkB,EAAMkkB,QAASnnB,QAAS,SAAArE,GAAMA,EAAEm5C,iBAAkBD,GAAY,KAA/E,aACAh1C,GAAA,cAAC80C,GAAD,CAAe59B,KAAMuM,EAAUhf,QAAS,WAAOuwC,GAAY,IAASN,SAAUtxC,EAAMsxC,cCRtFI,GAAqBC,GAqBZpwC,kBAnBM,SAACvB,GAAyB,IAAAshB,EACXC,qBAAS,GADEC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACpCjB,EADoCmB,EAAA,GAC1BowB,EAD0BpwB,EAAA,GAG3C,OAAQ5kB,GAAA,cAAAA,GAAA,cACJA,GAAA,mBAAGk1C,KAAK,IAAIvtB,UAAU,0BAA0BxnB,QAAS,SAAArE,GAAMA,EAAEm5C,iBAAkBD,GAAY,KAC3Fh1C,GAAA,qBAAK2nB,UAAU,UAAUnB,MAAO,CAAC2uB,QAAS,OAAQC,cAAe,SAAUC,cAAe,SACtFtrB,UAAW,SAAUurB,eAAgB,SAAUC,WAAY,WAC3Dv1C,GAAA,yBAAKA,GAAA,wBAAQ2nB,UAAU,+BACnB3nB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,OAAOmsC,KAAK,YAE3Bz0C,GAAA,wBAAQ2nB,UAAU,gCAChBvkB,EAAMkB,EAAE,8BAIlBtE,GAAA,cAACy1C,GAAD,CAAev+B,KAAMuM,EAAUhf,QAAS,WAAOuwC,GAAY,IAASN,SAAUtxC,EAAMsxC,yBCU7E/vC,kBAtBG,SAACvB,GACf,OAAOpD,GAAA,qBAAK2nB,UAAU,iBAClB3nB,GAAA,cAACioB,GAAA,KAAD,CAAMC,GAAIviB,GAA+BvC,EAAMygB,MAAM7iB,MACjDhB,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,WACf3nB,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,sBAAMwmB,MAAO,CAAEjC,MAAO,OAAQmxB,UAAW,aAAcC,aAAc,eAChEvyC,EAAMygB,MAAMvb,SAK7BtI,GAAA,qBAAK2nB,UAAU,UACTvkB,EAAMwyC,UAAYxyC,EAAMygB,MAAM6X,SAAW17B,GAAA,cAACioB,GAAA,KAAD,CAAMC,GAAIjiB,GAA0B7C,EAAMygB,MAAM7iB,KAAM2mB,UAAU,oBACvG3nB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,eAAemsC,KAAM,QAASphB,MAAM,MAEhDjwB,EAAMwyC,SAAWxyC,EAAMygB,MAAM6X,QAAW17B,GAAA,cAAC61C,GAAA,EAAD,CAAOC,QAAS91C,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQmsC,KAAK,QAAQ9sB,UAAU,qBAAuBW,QAASllB,EAAMkB,EAAE,gCAC7ItE,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAO,qBAAsBC,SAAU,UAAY5yC,EAAMkB,EAAE,+BAAiC,MCnCnF2xC,EDmC6G7yC,EAAMygB,MAAMkX,aClC9I,IAAI18B,KAAK43C,GACVC,qBAFqB,IAACD,ICGtBE,GAAmB,WAC5B,OAAOn2C,GAAA,qBAAK2nB,UAAU,iBAClB3nB,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,WACf3nB,GAAA,qBAAK2nB,UAAU,eAAc3nB,GAAA,cAACw1C,GAAA,EAAD,CAAMlf,SAAS,EAAMhuB,KAAK,UAAUmsC,KAAK,YCmBnE9vC,kBAfQ,SAACvB,GACvB,OAAQpD,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAO9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAAUrB,EAAMqB,SAC/DzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAiB1iB,EAAMkB,EAAE,gCACzBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACM/lB,GAAA,cAACooB,GAAA,EAAD,CAAS0B,KAAK,WAAWxnB,MAAM,EAC1BgmB,QACItoB,GAAA,yBACIA,GAAA,uBAAIoD,EAAMkB,EAAE,8BACZtE,GAAA,uBAAGA,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,gBAAd,OAAmCtI,GAAA,mBAAGk1C,KAAK,4DAA4DtU,OAAO,UAAUx9B,EAAMkB,EAAE,iCCUzI8xC,GAlBoB,SAAChzC,GAChC,OAAOpD,GAAA,qBAAK2nB,UAAU,iBAClB3nB,GAAA,mBAAGk1C,KAAM9xC,EAAMygB,MAAMwP,MACjBrzB,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,WACf3nB,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,sBAAMwmB,MAAO,CAAEjC,MAAO,OAAQmxB,UAAW,aAAcC,aAAc,eAChEvyC,EAAMygB,MAAMvb,SAK7BtI,GAAA,qBAAK2nB,UAAU,SACX3nB,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAO,qBAAsBC,SAAU,UAArD,cCfNzyC,GAAkB8yC,GAAkBnC,mCAEpCoC,GAAqB,CACvBrhB,mBAAoBhwB,EAAQgwB,mBAC5BsC,oBAAqBtyB,EAAQsyB,qBAGlB3yB,gBACXC,mBAAQtB,GAAiB+yC,IACzBnxC,aAAU,IAFCP,CAKbD,eAAiB4jB,aCyBU,SAACnlB,GAC1B,IAAM0B,EAAW0jB,yBACXO,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChEylC,EAAiBvtB,uBAAYwoB,MAC7BgF,EAAWxtB,uBAAYmoB,GAAwB,uBAAuB,IALzBzsB,EAMjBC,qBAAS,GANQC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAM5C+xB,EAN4C7xB,EAAA,GAMjC8xB,EANiC9xB,EAAA,GAQnDxkB,qBAAU,WACHm2C,GAAkBC,GACjBE,GAAa,IAElB,CAACH,EAAgBC,IAEpB,IAAMZ,IAAU5/B,GAAeA,EAAa4/B,QAAQ7sB,EAAY/nB,KAOhE,OAAOhB,GAAA,cAACqpB,GAAA,EAAD,KACPrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,EAAMotB,QAAQ,IAC7BvzC,EAAMyU,OAAO+D,QAAU,GAAKxY,EAAMkzB,UAAYt2B,GAAA,cAACspB,GAAA,EAAKE,IAAN,KAC5CxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACQzpB,GAAA,cAAC42C,GAAA,EAAKC,MAAN,CAAYC,YAAa,GACrB92C,GAAA,cAAC+2C,GAAD,CAAcrC,SAA8B,IAApBtxC,EAAMixC,YAC7BjxC,EAAMkzB,SAAWt2B,GAAA,cAACg3C,GAAD,MACjB5zC,EAAMyU,OAAO9T,OAAO,SAAA8f,GAAK,OAAKA,EAAMiY,UAASmb,OAAO,SAAApzB,GAAK,OAAIA,EAAMkX,cAAc,SAAC32B,EAAGg5B,GAAJ,OAAUh5B,IAAMg5B,EAAI,EAAKh5B,EAAKg5B,GAAM,EAAI,IACrHjtB,IAAI,SAAA0T,GAAK,OACV7jB,GAAA,cAACk3C,GAAD,CAAWl1C,IAAK6hB,EAAM7iB,IAAK6iB,MAAOA,EACvB+xB,QAAS/xB,EAAM7N,aAAc4/B,GAAY/xB,EAAMszB,UAAUpuB,EAAY/nB,KAAO6iB,EAAMkY,QAAUhT,EAAY/nB,IACxGi0B,mBAAoB7xB,EAAM6xB,mBAAoBsC,oBAAqBn0B,EAAMm0B,wBACtF9d,aAIQ,IAAzBrW,EAAMyU,OAAO+D,UAAkBxY,EAAMkzB,SAAWt2B,GAAA,cAACspB,GAAA,EAAKE,IAAN,KAC7CxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAACo3C,GAAA,EAAD,CAASpvB,aAAa,GAClBhoB,GAAA,cAAC8lB,GAAA,EAAD,CAAQgE,MAAM,EAAMtD,MAAO,CAACuvB,MAAO,SAC/B/1C,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,YAAYytC,MAAM,WAC5B3yC,EAAMkB,EAAE,8BAEbtE,GAAA,cAACo3C,GAAA,EAAQC,OAAT,KACIr3C,GAAA,mBAAGk1C,KAAK,gCAAgCtU,OAAO,SAAS0W,IAAI,sBAAsB3vB,UAAU,oBAA5F,cACA3nB,GAAA,cAACu3C,GAAD,CAAgB7C,SAA8B,IAApBtxC,EAAMixC,UAAiB/sB,SAAS,QAK1EtnB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAACw3C,GAAA,EAAD,CAASC,YAAY,EAAMnvB,QAAQ,qBAG3CtoB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAAC42C,GAAA,EAAKC,MAAN,CAAYC,YAAa,GACrB92C,GAAA,cAAC03C,GAAD,CAA4B11C,IAAI,cAAc6hB,MAAO,CAACvb,KAAM,yBAA0B+qB,KAAM,gLAC5FrzB,GAAA,cAAC03C,GAAD,CAA4B11C,IAAI,gBAAgB6hB,MAAO,CAACvb,KAAM,gBAAiB+qB,KAAM,2IACrFrzB,GAAA,cAAC03C,GAAD,CAA4B11C,IAAI,iBAAiB6hB,MAAO,CAACvb,KAAM,+BAAgC+qB,KAAM,qKACrGrzB,GAAA,cAAC03C,GAAD,CAA4B11C,IAAI,iBAAiB6hB,MAAO,CAACvb,KAAM,iBAAkB+qB,KAAM,4KAK/FrzB,GAAA,cAAC23C,GAAD,CAAgBzgC,KAAMu/B,EAAWhyC,QAnDH,WAC9BiyC,GAAa,GACb5xC,EAAS+C,GAAkB,uBAAuB,kEClCpD+vC,GAAgB,SAACC,GAA8E,IACzFC,EAAiDD,EAAjDC,MAAO9vB,EAA0C6vB,EAA1C7vB,YADkF+vB,EACxCF,EAA7BhX,KAAQmX,EAD6DD,EAC7DC,QAASj7C,EADoDg7C,EACpDh7C,MAE7C,OAAOoH,GAAAC,EAAAC,cAAC4zC,GAAA,EAAKC,MAAN32C,OAAAklB,OAAA,GAAgBqxB,EAAhB,CAAuB9vB,YAAaA,EAAajrB,SAAQi7C,IAAWj7C,OAyBhEyqB,wBAAgC,CAC3CC,K7BvDuC,2B6BwDvCtb,SAAU,SAACgsC,EAAQ/0C,GACf,GAAG+0C,EAAQ,CACP,IAAMp7C,GA1BIu0B,EA0BiBluB,EAAMkuB,UA1B8C,SAAA8mB,GAAa,OAAIA,IAAkB9mB,OAAWrwB,EAAY,wBA0B7Fk3C,EAAO//B,IAAI,kBAAoB,IAC3E,GAAGrb,EACC,MAAO,CAACq7C,cAAer7C,GA5BlB,IAACu0B,EAgCd,MAAO,KAVA9J,CAdkB,SAACpkB,GAAD,OAA0Ce,GAAAC,EAAAC,cAAC+jB,GAAA,EAAD,CAASrrB,OAAO,GACvFoH,GAAAC,EAAAC,cAACmxC,GAAA,EAAD,CAAMltC,KAAK,iBACVlF,EAAMkB,EAAE,4BACTH,GAAAC,EAAAC,cAAC+yC,GAAA,EAAD,KACIjzC,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAAUxkB,EAAMykB,cACtC1jB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SACXxjB,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,gBAAgB/D,KAAK,OAAOwjB,UAAW6vB,GAAe5vB,YAAa5kB,EAAMkB,EAAE,iCAE3FH,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQ2uB,MAAM,MAAMxxC,KAAK,SAASmwC,SAAUtxC,EAAMi1C,WAAaj1C,EAAMk1C,OAAQl1C,EAAMkB,EAAE,qBACrFH,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQmxB,OAAO,EAAM5wB,UAAU,WAAWxnB,QAAS,SAACrE,GAAD,OAftC,SAACA,EAAkCsH,GACxDtH,EAAEm5C,iBAEF7xC,EAAMo1C,WAY4DC,CAAiB38C,EAAGsH,KAAUA,EAAMkB,EAAE,yBC9C/Fo0C,GAAuB,SAACv1C,EAAiCC,GAAlC,OAChCD,EAAME,MAAM,CAAC8a,GAAQ,6BCuCVxZ,kBAlCyB,SAACvB,GAErC,IAAM0B,EAAW0jB,yBAFoE9D,EAG/CC,qBAAkB,GAH6BC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAG9Ei0B,EAH8E/zB,EAAA,GAGjEg0B,EAHiEh0B,EAAA,GAiBrF,OAAQzgB,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACJ10C,GAAAC,EAAAC,cAAC+jB,GAAA,EAAD,KACIjkB,GAAAC,EAAAC,cAAA,SACKjB,EAAMkB,EAAE,mCACTH,GAAAC,EAAAC,cAAA,KAAG6wC,KAAM,IAAK/0C,QAhBW,SAAC2Z,GAClCA,EAAMm7B,iBACNn7B,EAAMwQ,kBAENsuB,GAAe,KAYP,IAAuDx1C,EAAMkB,EAAE,qCAGvEH,GAAAC,EAAAC,cAACy0C,GAAA,EAAD,CACIzwB,OAAQjlB,EAAMkB,EAAE,wCAChBgkB,QAASllB,EAAMkB,EAAE,uCACjB4S,KAAMyhC,EACNH,SAAU,kBAAMI,GAAe,IAC/BG,UAjBwB,WAC5Bj0C,EAASsvB,GAAkBhxB,EAAMwgB,UACjCg1B,GAAe,oBCwHRj0C,kBAlIU,SAACvB,GAEtB,IAAM0B,EAAW0jB,yBAFsC9D,EAGPC,qBAAkB,GAHXC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGhDs0B,EAHgDp0B,EAAA,GAG9Bq0B,EAH8Br0B,EAAA,GAAAG,EAILJ,qBAAkB,GAJbK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAIhDm0B,EAJgDl0B,EAAA,GAI7Bm0B,EAJ6Bn0B,EAAA,GAAAG,EAKfR,qBAAkB,GALHS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAKhDi0B,EALgDh0B,EAAA,GAKlCi0B,EALkCj0B,EAAA,GAAAE,EAMHX,qBAAkB,GANfY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAMhDg0B,EANgD/zB,EAAA,GAM5Bg0B,EAN4Bh0B,EAAA,GAQvDnlB,qBAAU,WACFgD,EAAM22B,QAAU32B,EAAM22B,OAAOG,cAC7Bmf,GAAgB,IAErB,CAACj2C,EAAM22B,SAEV,IAQMyf,EAAoB,kBAAMP,GAAoB,IAE9CQ,EAAqB,kBAAMN,GAAqB,IAmBtD,OAAQh1C,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACJ10C,GAAAC,EAAAC,cAACq1C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAO,QAC7Bp0C,GAAAC,EAAAC,cAACq1C,GAAA,EAAME,KAAP,KACIz1C,GAAAC,EAAAC,cAACq1C,GAAA,EAAMlwB,IAAP,KACIrlB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAEjC,MAAO,UACxBpgB,GAAAC,EAAAC,cAAA,cAASjB,EAAMkB,EAAE,8BAAjB,MAEJH,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACKz2C,EAAM22B,OAAO+f,UAElB31C,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAEjC,MAAO,YAEhCpgB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMlwB,IAAP,KACIrlB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACI11C,GAAAC,EAAAC,cAAA,cAASjB,EAAMkB,EAAE,kCAAjB,MAEJH,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACKz2C,EAAM22B,OAAOG,cACV/1B,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACKz1C,EAAM22B,OAAOG,aACd/1B,GAAAC,EAAAC,cAACmxC,GAAA,EAAD,CACIltC,KAAMgxC,EAAqB,kBAAoB,OAC/C9yB,MAAO,CAAE6D,OAAQ,UAAW0vB,WAAY,OACxCt5C,MAAO2C,EAAMkB,EAAE,qCACfnE,QA9BI,YC9CT,SAAC8B,EAAe+3C,GAC3C,IAAMC,EAAez7C,SAAS6F,cAAc,SAC5C41C,EAAa11C,KAAO,OACpB01C,EAAah4C,MAAQA,EACrBg4C,EAAazzB,MAAM5lB,SAAW,QAC9Bq5C,EAAazzB,MAAM0zB,KAAO,UAC1BD,EAAazzB,MAAM2zB,IAAM,WAExBH,GAAYx7C,SAAS47C,MAAM7uB,OAAO0uB,GACnCA,EAAa5/B,SACb7b,SAAS67C,YAAY,QAErBJ,EAAaK,WAAYC,YAAYN,GDmCjCO,CAAgBp3C,EAAM22B,OAAOG,cAC7Bqf,GAAsB,GACtB1W,WAAW,kBAAM0W,GAAsB,IAAQ,UA+B7Bn2C,EAAM22B,OAAOG,cACX/1B,GAAAC,EAAAC,cAAA,KAAG6wC,KAAM,IAAK/0C,QA1DT,SAAC2Z,GAC1BA,EAAMm7B,iBACNn7B,EAAMwQ,kBAENxlB,EAASqvB,GAAuB/wB,EAAMwgB,YAuDbxgB,EAAMkB,EAAE,sCAIrBH,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAEi0B,WAAY,OAAQC,cAAe,SACpDv2C,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI0C,MAAM,EACN6wB,cAAe,OACfl6C,MAAO2C,EAAMkB,EAAE,kBACfnE,QA7DC,kBAAM84C,GAAoB,IA8D3B3iB,QAAS8iB,EACT5yB,MAAOpjB,EAAM22B,OAAOG,aAAe,KAAO,CAAE0gB,WAAY,UACxDvzB,SAAUljB,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KAAE10C,GAAAC,EAAAC,cAACmxC,GAAA,EAAD,CAAMltC,KAAM,SAAWlF,EAAMkB,EAAE,yBAM/DH,GAAAC,EAAAC,cAAC+jB,GAAA,EAAD,KACIjkB,GAAAC,EAAAC,cAACq1C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAO,QAC7Bp0C,GAAAC,EAAAC,cAACq1C,GAAA,EAAME,KAAP,KACIz1C,GAAAC,EAAAC,cAACq1C,GAAA,EAAMlwB,IAAP,KACIrlB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACKz2C,EAAMkB,EAAE,iCAEbH,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACI11C,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI0C,MAAM,EACN6wB,cAAe,OACfE,UAAU,EACVC,QAAS,QACTr6C,MAAO2C,EAAMkB,EAAE,mBACfnE,QAlFF,kBAAMg5C,GAAqB,IAmFzB9xB,SAAUljB,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KAAE10C,GAAAC,EAAAC,cAACmxC,GAAA,EAAD,CAAMltC,KAAM,WAAalF,EAAMkB,EAAE,2BAOrEH,GAAAC,EAAAC,cAACy0C,GAAA,EAAD,CACIzwB,OAAQjlB,EAAMkB,EAAE,uCAChBgkB,QAASllB,EAAMkB,EAAE,sCACjB4S,KAAM8hC,EACNR,SAAUgB,EACVT,UA5FkB,WACtBS,IACAH,GAAgB,GAChBv0C,EAASwvB,GAAuBlxB,EAAMwgB,aA2FtCzf,GAAAC,EAAAC,cAACy0C,GAAA,EAAD,CACIzwB,OAAQjlB,EAAMkB,EAAE,wCAChBgkB,QAASllB,EAAMkB,EAAE,uCACjB4S,KAAMgiC,EACNV,SAAUiB,EACVV,UA7FmB,WACvBU,IACA30C,EAASuvB,GAAkBjxB,EAAMwgB,oBEC1Bjf,eAnCkB,SAACvB,GAE9B,IJToCwgB,EIS9B9e,EAAW0jB,yBACXuR,EAAqC/Q,wBJVPpF,EIU2CxgB,EAAMwgB,QJT9EngB,aACH,CAACi1C,IACD,SAACqC,GACG,OAAOA,EAAa1qC,IAAIuT,GAAWm3B,EAAa3iC,IAAIwL,QAAW3iB,MIYvE,OAJAb,qBAAU,WACN0E,EAASovB,GAAiB9wB,EAAMwgB,WACjC,CAACxgB,EAAMwgB,UAGNzf,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,eACXxjB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,mBACC1mB,IAAX84B,GACG51B,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,oBACXxjB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,eAIvBxjB,GAAAC,EAAAC,cAAA,MAAIsjB,UAAU,aACTvkB,EAAMkB,EAAE,8BACTH,GAAAC,EAAAC,cAAC22C,GAAA52C,EAAD,KAAkBhB,EAAMkB,EAAE,mCAE9BH,GAAAC,EAAAC,cAAA,WACgB,OAAX01B,GACG51B,GAAAC,EAAAC,cAAC42C,GAAD,CAAiCr3B,QAASxgB,EAAMwgB,UAEnDmW,GACG51B,GAAAC,EAAAC,cAAC62C,GAAD,CAAkBt3B,QAASxgB,EAAMwgB,QAASmW,OAAQA,kBClC7DohB,GAAU,SAAC3oB,EAAqB4oB,EAA0BrzC,GACnE,OAAOpJ,GAAgBgI,GAAiB,UAAW,CAAE6rB,SAAQlqB,KAAM8yC,EAAUrzC,oBAGpEszC,GAAa,SAAC7oB,EAAqBlqB,GAC5C,OAAO3J,GAAgBgI,GAAiB,aAAc,CAAC6rB,SAAQlqB,UAGtDgzC,GAAwB,SAAC9oB,EAAqB+oB,GACvD,OAAO58C,GAAgBgI,GAAiB,wBAAyB,CAAC6rB,SAAQ+oB,oBAGjEC,GAAmB,SAACjoC,EAAsBif,EAAgBipB,GACnE,OAAO98C,GAAgBgI,GAAiB,mBAAoB,CAAE4M,eAAcif,SAAQX,YAAa4pB,KAGxFC,GAAuB,SAACnoC,GACjC,OAAO5U,GAAgBgI,GAAiB,uBAAwB,CAAC4M,kBAGxDooC,GAAuB,SAACpoC,GACjC,OAAO5U,GAAgBgI,GAAiB,uBAAwB,CAAC4M,kBAGxDqoC,GAAuB,SAACppB,EAAgBla,GACjD,OAAO3Z,GAAgBgI,GAAiB,uBAAwB,CAAE6rB,SAAQla,cAGjEujC,GAAa,SAACrpB,GACvB,OAAO7zB,GAAgBgI,GAAiB,aAAc,CAAC6rB,YAG9CspB,GAA8B,SAACl4B,EAA6B4O,EAAqBZ,GAC1F,OAAOjzB,GAAgBgI,GAAiB,8BAA+B,CACnEid,UACA4O,SACAV,iBAAmBF,GAAe,CAC9BI,YAAY,EACZD,aAAa,EACbE,aAAa,MAKZ8pB,GAA+B,SAACn4B,EAA6B4O,GACtE,OAAO7zB,GAAgBgI,GAAiB,+BAAgC,CACpEid,UACA4O,YAIKwpB,GAAiB,WAC1B,OAAOr9C,GAAgBgI,GAAiB,YAAa,KAG5Cs1C,GAAoB,SAAC1oC,GAC9B,OAAO5U,GAAgBgI,GAAiB,4BAA6B,CAAC4M,kBAG7D2oC,GAAwB,SAAC3oC,GAClC,OAAO5U,GAAgBgI,GAAiB,iBAAkB,CAAC4M,kBAGlD4oC,GAA2B,SAAC3pB,GACrC,OAAO7zB,GAAgBgI,GAAiB,sBAAuB,CAAC6rB,YAGvD4pB,GAAyB,SAAC5pB,EAAgBzqB,GACnD,OAAOpJ,GAAgBgI,GAAiB,yBAA0B,CAAC6rB,SAAQzqB,oBC7ElEs0C,GAAW,2BACXC,GAAc,8BACdC,GAA0B,yCAC1BC,GAAsB,oCACtBC,GAAyB,wCACzBC,GAAyB,wCACzBC,GAA0B,wCAC1BC,GAAmB,kCACnBC,GAAe,4BACfC,GAAmC,+CACnCC,GAAoC,gDACpCC,GAAc,8BAGdC,GAAa,6BACbC,GAAe,+BACfC,GAA2B,0CAC3BC,GAAgB,gCAChBC,GAA2B,yCAC3BC,GAAe,+BACfC,GAA0B,yCAC1BC,GAAyB,wCACzBC,GAA0B,yCAG1BC,GAA+B,4CAC/BC,GAA+B,4CAE/BC,GAA4B,0CAC5BC,GAA6B,2CCd7B1C,GAAU,SAAC3oB,EAAgB4oB,EAAoBrzC,GAArC,OAA+E7G,kBAAOm7C,GAAU,CAAE7pB,SAAQ4oB,WAAUrzC,oBAC9HszC,GAAa,SAAC7oB,EAAgBxe,GAAjB,OAAuC9S,kBAAOo7C,GAAa,CAAC9pB,SAAQxe,aACjFsnC,GAAwB,SAAC9oB,EAAgB+oB,GAAjB,OAAqDr6C,kBAAOq7C,GAAyB,CAAC/pB,SAAQ+oB,oBAEtHC,GAAmB,SAACjoC,EAAgCif,EAAgBipB,GAAjD,OAAuEv6C,kBAAOs7C,GAAqB,CAAEjpC,eAAcif,SAAQipB,eAC9IC,GAAuB,SAACnoC,GAAD,OAAoCrS,kBAAOu7C,GAAwB,CAAClpC,kBAC3FooC,GAAuB,SAACpoC,GAAD,OAAoCrS,kBAAOw7C,GAAwB,CAACnpC,kBAE3FqoC,GAAuB,SAACppB,EAAgBla,GAAjB,OAAsCpX,kBAAOy7C,GAAyB,CAAEnqB,SAAQla,cAEvGwlC,GAAc,SAACC,GAAD,OAAiC78C,kBAAO27C,GAAckB,IAEpElC,GAAa,SAACrpB,GAAD,OAA8BtxB,kBAAO87C,GAAa,CAACxqB,YAEhEspB,GAA8B,SAACl4B,EAA6Bo6B,EAA6BpsB,GAA3D,OAAyF1wB,kBAAO47C,GAAkC,CAACl5B,UAASo6B,UAASpsB,iBACnLmqB,GAA+B,SAACn4B,EAA6B4O,GAA9B,OAA2DtxB,kBAAO67C,GAAmC,CAACn5B,UAAS4O,YAE9I4pB,GAAyB,SAAC5pB,EAAgBzqB,GAAjB,OAAoD7G,kBAAO08C,GAA2B,CAACprB,SAAQzqB,oBCdxHk2C,GAAY,SAACC,GAAD,OAAqBh9C,kBAAO+7C,GAAYiB,IACpDC,GAAc,SAACD,GAAD,OAAqBh9C,kBAAOg8C,GAAcgB,IACxDE,GAAyB,SAACF,GAAD,OAAqBh9C,kBAAOi8C,GAA0Be,IAC/EG,GAAwB,SAACH,GAAD,OAAqBh9C,kBAAOm8C,GAA0Ba,IAC9EI,GAAc,SAACJ,GAAD,OAAqBh9C,kBAAOo8C,GAAcY,IACxDK,GAAwB,SAACC,GAAD,OAA2Ct9C,kBAAOq8C,GAAyBiB,IACnGC,GAAuB,SAACC,GAAD,OAAoCx9C,kBAAOs8C,GAAwBkB,IAC1FC,GAAwB,SAACD,GAAD,OAAoCx9C,kBAAOu8C,GAAyBiB,IAE5FE,GAAe,SAACb,GAAD,OAA4B78C,kBAAOk8C,GAAeW,IAEjEc,GAA2B,SAACj7B,EAA6B4O,GAA9B,OAAsDtxB,kBAAOw8C,GAA8B,CAAC95B,UAAS4O,YAChIssB,GAA2B,SAACl7B,EAA6B4O,GAA9B,OAAsDtxB,kBAAOy8C,GAA8B,CAAC/5B,UAAS4O,YAEhIusB,GAA0B,SAACb,GAAD,OAAqBh9C,kBAAO28C,GAA4BK,ICHlFc,GAA8B,CACvCh+C,IAAK,GACLsH,KAAM,GACNq1B,YAAa,GACbpmB,QAAS,GACTI,QAASpF,kBACTqF,OAAQrF,kBACR0sC,SAAS,EACTnwC,cAvB0B,OAwB1BowC,OAAO,EACPn3C,eAAgB,MAGPo3C,GAA2B,SAAC79C,GACrC,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,UAAW,kBACnB,CAACA,GAAO,QAAS,mBAAmBjN,EAAKkxB,QACzC,CAACjkB,GAAO,eAAgB,0BAA0BjN,EAAKkxB,QACvD,CAACjkB,GAAO,WAAY,sBAAsBjN,EAAKkxB,QAC/C,CAACjkB,GAAO,WAAY,sBAAsBjN,EAAKkxB,QAC/C,CAACjkB,GAAO,UAAW,qBAAqBjN,EAAKkxB,QAC7C,CAACjkB,GAAO,kBAAmB,6BAA6BjN,EAAKkxB,QAC7D,CAACjkB,GAAO,WAAY,sBAAsBjN,EAAKkxB,SAGnD,OAAG3mB,GAAUmD,GACFA,EAGJ9C,GAAQ,IAAIkzC,GAAK,CACpBp+C,IAAKM,EAAKkxB,OACVlqB,KAAMhH,EAAKgH,KACXq1B,YAAar8B,EAAKq8B,YAClBpmB,QAASjW,EAAKiW,QACdI,QAASpF,gBAAKjR,EAAKqW,SACnBC,OAAQrF,gBAAKjR,EAAKsW,QAClBqnC,QAAS39C,EAAK29C,QACdnwC,cApDsB,OAqDtBowC,MAAO59C,EAAK49C,QAAS,EACrBn3C,eAAgBzG,EAAKyG,gBAAkB,SAIlCs3C,GAAgB,SAACr+C,GAC1B,OAAO,IAAIo+C,GAAJ79C,OAAA2N,GAAA,EAAA3N,CAAA,GAAay9C,GAAb,CAA+Bh+C,MAAKk+C,OAAO,MAGzCE,GAAb,SAAA/9C,GACI,SAAA+9C,EAAmB99C,GAAiB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAA29C,GACjB,KAAb99C,EAAKN,MACJM,EAAKN,IAAMU,SAFiBH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA69C,GAAAv9C,KAAAJ,KAK1BH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAA69C,EAAA/9C,GAAAE,OAAAQ,GAAA,EAAAR,CAAA69C,EAAA,EAAAp9C,IAAA,SAAAC,MAAA,SASkB+R,GACV,OAAOvS,KAAKS,IAAI,OAAQ8R,KAVhC,CAAAhS,IAAA,oBAAAC,MAAA,SAa6Bs5C,GACrB,OAAO95C,KAAKS,IAAI,cAAeq5C,KAdvC,CAAAv5C,IAAA,eAAAC,MAAA,SAiBwBgG,GAChB,IAAM9E,EAAQ1B,KAAKS,IAAI,UAAWT,KAAKkW,QAAQ5T,OAAO,SAAAu7C,GAAM,OAAIA,IAAWr3C,KAC3E,OAAO9E,EAAMjB,IAAI,SAAUiB,EAAMyU,OAAO7T,OAAO,SAAAmU,GAAK,OAAIA,IAAUjQ,OAnB1E,CAAAjG,IAAA,qBAAAC,MAAA,SAsB8B8F,GACtB,OAAOtG,KAAKS,IAAI,iBAAkB6F,KAvB1C,CAAA/F,IAAA,UAAAC,MAAA,SA0BmBgG,GACX,OAAOxG,KAAK8V,UAAYtP,GAAUxG,KAAKmW,OAAOoH,SAAS/W,OA3B/Dm3C,EAAA,CAA0Bj9C,kBAAO68C,e5BhErBhsC,iFAgBL,IAAMusC,GAAkD,CAC3Dv+C,IAAK,GACLwxB,OAAQ,GACRta,MAAO,GACP2Z,YAAa,mBACb5a,OAAQjE,GAAOkE,KACfmxB,eAAgB,EAChBv5B,cA5B0B,kBA+BjB0wC,GAAqC,SAACl+C,GAC/C,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,gBAAiB,wBACzB,CAACA,GAAO,UAAW,qBAAqBjN,EAAKiS,cAC7C,CAAChF,GAAO,SAAU,oBAAoBjN,EAAKiS,cAC3C,CAAChF,GAAO,eAAgB,0BAA0BjN,EAAKiS,cACvD,CAAChF,GAAO,UAAW,qBAAqBjN,EAAKiS,eAGjD,OAAG1H,GAAUmD,GACFA,EAGJ9C,GAAQ,IAAIuzC,GAAJl+C,OAAA2N,GAAA,EAAA3N,CAAA,GACRD,EADQ,CAEXN,IAAKM,EAAKiS,aACVzE,cA/CsB,sBAmDjB2wC,GAAb,SAAAp+C,GACI,SAAAo+C,EAAmBn+C,GAA2B,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAg+C,GAC1B,KAAbn+C,EAAKN,MACLM,EAAKN,IAAMU,SAF2BH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAk+C,GAAA59C,KAAAJ,KAKpCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAk+C,EAAAp+C,GAAAE,OAAAQ,GAAA,EAAAR,CAAAk+C,EAAA,EAAAz9C,IAAA,SAAAC,MAAA,WAWQ,OAAOR,KAAKS,IAAI,iBAAkBT,KAAK4mC,eAAiB,KAXhE,CAAArmC,IAAA,SAAAC,MAAA,WAgBQ,OAAOR,KAAKS,IAAI,SAAU8Q,GAAOwK,aAhBzCiiC,EAAA,CAAoCt9C,kBAAOo9C,K6BnC9B5lC,GAA2B3J,iBCX3B2J,GAAoC3J,iBCCpC0vC,GAAwB7lC,2BAAyD,CAC1FulC,KFWqD,WAA6E,IAA5Ej8C,EAA4EX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAxDmX,GAAcG,EAA0CtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAClI,OAAQ6Y,EAAMvV,MACV,KAAK04C,GACD,OAAO/jC,GAAa/V,EAAO2W,EAAMjb,SACrC,KAAKq+C,GACL,KAAKC,GACL,KAAKE,GACL,KAAKQ,GACD,OAAOzkC,GAAgBjW,EAAO2W,EAAMjb,SACxC,KAAKu+C,GAED,OAAO7jC,GADPpW,EAAQuW,KACuBI,EAAMjb,SACzC,KAAKy+C,GACD,OAAOjkC,GAAgBlW,EAAO2W,EAAMjb,SACxC,QACI,OAAOsE,IEzBfs8C,eDDiD,WAAkF,IAAjFt8C,EAAiFX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAApDmX,GAAcG,EAAsCtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACnI,OAAQ6Y,EAAMvV,MACV,KAAKg5C,GACD,OAAOhkC,GAAiBpW,EAAO2W,EAAMjb,SACzC,KAAK2+C,GAEL,KAAKC,GACD,OAAOrkC,GAAgBjW,EAAO2W,EAAMjb,SACxC,QACI,OAAOsE,KCPhB,kBAAMG,kBAAO,CACZ87C,UAAMn+C,EACNw+C,oBAAgBx+C,mBCLV0+C,iBAWOC,IAXjB,SAAUD,GAAsB5B,GAAhC,IAAA8B,EAAA,OAAAzuC,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAQI,OAPIkyC,EAAYttC,kBAEhBwrC,EAAM/5C,QAAQ,SAAAk6C,GAAS2B,EAAYA,EAAU32B,MAAMg1B,EAAKvmC,WAGxDkoC,EAAYA,EAAUC,QAAQx/B,SANlChP,EAAA3D,KAAA,EAQU0E,aAAIyI,EAAiBnQ,cAAck1C,EAAUpmC,YARvD,wBAAAnI,EAAAI,SAAAquC,GAAAt+C,MAWO,SAAUm+C,GAAcI,GAAxB,IAAA36C,EAAApG,EAAA6O,EAAAiwC,EAAA,OAAA3sC,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACqC,OADrCyE,EAAAzE,KAAA,EAC2C9L,aAAK2P,GAAWwqC,gBAD3D,UAAA32C,EAAA+M,EAAAX,KACIxS,EADJoG,EACIpG,UADJoG,EACctI,MADd,CAAAqV,EAAAzE,KAAA,QAIC,OAJDyE,EAAAzE,KAAA,EAIO0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,yBAJvD,WAOCkC,EAPD,CAAAmT,EAAAzE,KAAA,aAoBI9B,GAZGiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GAKT,OAJG0+C,GAAW1+C,EAAKkxB,SAAWwtB,IAC1B1+C,EAAK49C,OAAQ,GAGVC,GAAyB79C,OAhBzC,CAAA8Q,EAAAzE,KAAA,SAuBK,OADA1Q,QAAQF,MAAM,8CAA+C+Q,EAAO7L,MAAOhD,EAASqC,MAtBzF8Q,EAAAzE,KAAA,GAuBW0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,yBAvB3D,YA0BIiP,GAAU8B,GA1Bd,CAAAsE,EAAAzE,KAAA,SA4BK,OADMowC,EAAQxrC,gBAAKzE,EAAO7L,OA3B/BmQ,EAAAzE,KAAA,GA4BW0E,aAAIusC,GAAab,IA5B5B,QA6BK,OA7BL3rC,EAAAzE,KAAA,GA6BW9L,aAAK89C,GAAuB5B,GA7BvC,yBAAA3rC,EAAAV,SAAAuuC,GAAAx+C,uBCfGy+C,iBAeO/E,IAfjB,SAAU+E,GAAc/lC,GAAxB,IAAA9U,EAAApG,EAAA+gD,EAAA,OAAA5uC,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAAK2P,GAAW2pC,QAAShhC,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQu8C,SAAUjhC,EAAQtb,QAAQkJ,gBAD7I,UAAA1C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wBAJ9D,WAMQkC,EANR,CAAAqS,EAAA3D,KAAA,SAQQ,OADMqyC,EAAUX,GAAcllC,EAAQtb,QAAQ2zB,QAPtDlhB,EAAA3D,KAAA,GAQc0E,aAAIb,GAAaysC,UAAU+B,EAAQG,OAAOhmC,EAAQtb,QAAQu8C,YARxE,QAUQ,OAVR9pC,EAAA3D,KAAA,GAUc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,iBAV5D,QAWQ,OAXRgP,EAAA3D,KAAA,GAWc9L,aAAK+9C,GAAezlC,EAAQtb,QAAQ2zB,QAXlD,yBAAAlhB,EAAAI,SAAA0uC,GAAA3+C,MAeO,SAAU05C,KAAV,IAAAhhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG0B,OAH1ByE,EAAAzE,KAAA,EAGgCiF,aAAK,CAChCpB,GAAY6qC,WAJjB,OAOC,OAJMliC,EAHP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAOOkF,aAAKqtC,GAAe/lC,GAP3B,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA2uC,GAAA5+C,uBCfG6+C,iBA8BAC,iBAaOzE,IA3CjB,SAAUwE,GAA8Bp/C,GAAxC,IAAAorC,EAAAx6B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAsgB,EAAAntB,EAAApG,EAAAuhD,EAAA,OAAApvC,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACQ2+B,GAAU,EADlBx6B,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAqQ,EAAAC,KAAA,EAAAU,EAGyB/Q,EAAOrC,QAAQm/C,QAHxCvwC,OAAAC,YAAA,UAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAA0D,EAAA3D,KAAA,SAIgD,OADjC6kB,EAHftgB,EAAAjQ,MAAAqP,EAAA3D,KAAA,GAIsD9L,aAC1CuY,GAAI0hC,4BACJ56C,EAAOrC,QAAQ+kB,QACf4O,EACAtxB,EAAOrC,QAAQ+yB,aAR3B,WAAAvsB,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAYY,OAZZ2D,EAAA3D,KAAA,GAYkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAZlE,YAeWkC,EAfX,CAAAqS,EAAA3D,KAAA,SAiBY,OADA2+B,GAAU,EAhBtBh7B,EAAA3D,KAAA,GAiBkB0E,aAAIb,GAAOtM,MAAM25C,yBAAyB39C,EAAOrC,QAAQ+kB,QAAS4O,IAjBpF,QAAA1gB,GAAA,EAAAR,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,SAAAS,GAAA,EAAAC,EAAAV,EAAAkB,GAAA,QAAAlB,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAsD,EAAAC,KAAA,IAAAQ,EAAA,CAAAT,EAAA3D,KAAA,eAAAqE,EAAA,eAAAV,EAAAmB,OAAA,mBAAAnB,EAAAmB,OAAA,gBAuBO65B,EAvBP,CAAAh7B,EAAA3D,KAAA,SAyBQ,OADM6yC,EAASt/C,EAAOrC,QAAQm/C,QAAQv7C,OAAS,EAAI,IAAM,GAxBjE6O,EAAA3D,KAAA,GAyBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,aAA1B,OAAAgE,OAA+Ck6C,EAA/C,kCAzBlB,yBAAAlvC,EAAAI,SAAA+uC,GAAAh/C,KAAA,4BA8BA,SAAU8+C,GAA+Br/C,GAAzC,IAAAqE,EAAAtG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAC4C,OAD5CyE,EAAAzE,KAAA,EACkD9L,aAAKuY,GAAI2hC,6BAA8B76C,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQ2zB,QADhI,UAAAjtB,EAAA6M,EAAAX,KACWxS,EADXsG,EACWtG,UADXsG,EACqBxI,MADrB,CAAAqV,EAAAzE,KAAA,QAIQ,OAJRyE,EAAAzE,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,kCAJ9D,WAOOkC,EAPP,CAAAmT,EAAAzE,KAAA,SAQQ,OARRyE,EAAAzE,KAAA,GAQc0E,aAAIb,GAAOtM,MAAM45C,yBAAyB59C,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQ2zB,SAR/F,QASQ,OATRpgB,EAAAzE,KAAA,GASc0E,aAAIC,EAAarN,QAAQ3C,KAAK,sBAAuB,gDATnE,yBAAA8P,EAAAV,SAAAgvC,GAAAj/C,MAaO,SAAUq6C,KAAV,IAAA56C,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE4B,OAF5BgF,EAAAhF,KAAA,EAEkCiF,aAAK,CAACkqC,GAAkCC,KAF1E,OAEO77C,EAFPyR,EAAAlB,KAAAkB,EAAAH,GAIStR,EAAOqD,KAJhBoO,EAAAhF,KAAAgF,EAAAH,KAKUsqC,GALV,EAAAnqC,EAAAH,KAQUuqC,GARV,mBAMS,OANTpqC,EAAAhF,KAAA,EAMekF,aAAKytC,GAA+Bp/C,GANnD,cAAAyR,EAAAG,OAAA,oBASS,OATTH,EAAAhF,KAAA,GASekF,aAAK0tC,GAAgCr/C,GATpD,eAAAyR,EAAAG,OAAA,oBAAAH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAAivC,GAAAl/C,MC7CA,IAEMm/C,GAAmB,SAACpuB,GAAD,OAAyE,SAACrvB,GAAD,OAF9E,SAACA,EAAiCnC,GAAlC,OAAkEmC,EAAME,MAAM,CAAC8a,GAAQ,OAAQnd,IAEoB6/C,CAAY19C,EAAOqvB,KAEpJsuB,GAAmB,SAAC39C,EAAiCC,GAAlC,OAC5BmP,gBAAKpP,EAAME,MAAM,CAAC8a,GAAQ,SAASQ,eAAelF,YAAclH,mBAEvDwuC,GAAuB,SAACC,GACjC,IAAM7hC,EAAsBzD,EAAwBC,qBAC9CslC,EvEECx9C,aACH,CAAC4c,GAAqBgpB,EAAkBlqB,qBACxC,SAAC5D,EAAewN,GACZ,GAAsC,OAAnCA,EAAYjY,mBAIf,OAAOyK,EAAcguB,KAAK,SAAAC,GAAI,OAAIA,EAAKxoC,MAAQ+nB,EAAYjY,uBuEPnE,OAAOrN,aACH,CAACq9C,GAAkB3hC,EAAqB8hC,GACxC,SAAClD,EAAOv2C,EAAMsJ,GAQV,OAPAitC,EAAQA,EAAMh6C,OAAO,SAAAm6C,GAAI,OAAKA,EAAKe,UAASl7C,OAAO,SAAAm6C,GAAI,OAAIptC,EACrDotC,EAAKn2C,iBAAmB+I,EAAmB9P,MAAS8P,EAAmB0G,UAAoC,OAAxB0mC,EAAKn2C,eAChE,OAAxBm2C,EAAKn2C,iBACRi5C,IACCjD,EAAQA,EAAMh6C,OAAO,SAAAm6C,GAAI,OAAIA,EAAKtI,QAAQpuC,EAAKxG,MAAS8P,GAAsBA,EAAmB8G,OAAO3T,SAASuD,EAAKxG,QAGnH+8C,kBCnBTmD,iBAmBO5F,IAnBjB,SAAU4F,GAA4B/mC,GAAtC,IAAAgnC,EAAAC,EAAA/7C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC+B,OAD/B2D,EAAA3D,KAAA,EACqC0M,aAAOumC,GAAiBzmC,EAAQtb,QAAQ2zB,SAD7E,OAKI,OAJM2uB,EADV7vC,EAAAG,KAGU2vC,EAAcD,EAAQE,kBAAkBlnC,EAAQtb,QAAQ08C,gBAHlEjqC,EAAA3D,KAAA,EAKU0E,aAAIb,GAAOtM,MAAMk5C,uBAAuBgD,IALlD,OAO4C,OAP5C9vC,EAAA3D,KAAA,EAOkD9L,aAAK2P,GAAO4I,IAAIkhC,sBAAuBnhC,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQ08C,gBAPjI,UAAAl2C,EAAAiM,EAAAG,KAOWxS,EAPXoG,EAOWpG,UAPXoG,EAOqBtI,MAPrB,CAAAuU,EAAA3D,KAAA,SAUQ,OAVR2D,EAAA3D,KAAA,GAUc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCAV9D,QAWQ,OAXRuU,EAAA3D,KAAA,GAWc0E,aAAIb,GAAOtM,MAAMk5C,uBAAuB+C,IAXtD,YAcOliD,EAdP,CAAAqS,EAAA3D,KAAA,SAeQ,OAfR2D,EAAA3D,KAAA,GAec0E,aAAIC,EAAarN,QAAQ3C,KAAK,2BAA4B,mCAfxE,yBAAAgP,EAAAI,SAAA4vC,GAAA7/C,MAmBO,SAAU65C,KAAV,IAAAnhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAK8hC,0BAHjB,OAMC,OAJMpiC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKquC,GAA6B/mC,GANzC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA6vC,GAAA9/C,uBClBG+/C,iBAaO3F,IAbjB,SAAU2F,GAAiBrnC,GAA3B,IAAA+jC,EAAA74C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4B,OAD5B2D,EAAA3D,KAAA,EACkC0M,aAAOumC,GAAiBzmC,EAAQtb,QAAQ2zB,SAD1E,OAE4C,OADlC0rB,EADV5sC,EAAAG,KAAAH,EAAA3D,KAAA,EAEkD9L,aAAK2P,GAAO4I,IAAIyhC,WAAY1hC,EAAQtb,QAAQ2zB,QAF9F,UAAAntB,EAAAiM,EAAAG,KAEWxS,EAFXoG,EAEWpG,UAFXoG,EAEqBtI,MAFrB,CAAAuU,EAAA3D,KAAA,SAKQ,OALR2D,EAAA3D,KAAA,GAKc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,2BAL9D,YAOQkC,EAPR,CAAAqS,EAAA3D,KAAA,SAQQ,OARR2D,EAAA3D,KAAA,GAQc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,QAAU47C,EAAK51C,KAAQ,YARnF,QASQ,OATRgJ,EAAA3D,KAAA,GASc0E,aAAIb,GAAOtM,MAAMo5C,YAAYJ,IAT3C,yBAAA5sC,EAAAI,SAAA+vC,GAAAhgD,MAaO,SAAUo6C,KAAV,IAAA1hC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAKuiC,cAHjB,OAMC,OAJM7iC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK2uC,GAAkBrnC,GAN9B,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAgwC,GAAAjgD,uBCdU+5C,IAAV,SAAUA,KAAV,IAAAt6C,EAAAmE,EAAApG,EAAAlC,EAAAmhD,EAAA,OAAA9sC,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAG4B,OAH5B2D,EAAA3D,KAAA,EAGkCiF,aAAK,CAClCpB,GAAYgrC,sBAJjB,OAOyC,OAJlCt7C,EAHPoQ,EAAAG,KAAAH,EAAA3D,KAAA,EAO+C9L,aAAK2P,GAAWgqC,iBAAkBt6C,EAAOrC,QAAQ0U,aAAcrS,EAAOrC,QAAQ2zB,OAAQtxB,EAAOrC,QAAQ48C,WAPpJ,OASc,OATdp2C,EAAAiM,EAAAG,KAOQxS,EAPRoG,EAOQpG,SAAUlC,EAPlBsI,EAOkBtI,MAPlBuU,EAAA3D,KAAA,GASoB0M,aAAOumC,GAAiB1/C,EAAOrC,QAAQ2zB,SAT3D,WASO0rB,EATP5sC,EAAAG,MAWK1U,EAXL,CAAAuU,EAAA3D,KAAA,SAYK,OAZL2D,EAAA3D,KAAA,GAYW0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,gCAZ3D,YAcKkC,EAdL,CAAAqS,EAAA3D,KAAA,SAeK,OAfL2D,EAAA3D,KAAA,GAeW0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,sCAfzD,QAiBK,OAjBLgP,EAAA3D,KAAA,GAiBW9L,aAAK+9C,GAAe1B,EAAKgB,MAAOhB,EAAKl9C,SAAMC,GAjBtD,QAAAqQ,EAAA3D,KAAA,iCAAA2D,EAAAI,SAAAiwC,GAAAlgD,uBCCGmgD,iBAmBOhG,IAnBjB,SAAUgG,GAA2BznC,GAArC,IAAA+jC,EAAA74C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACsC,OADtC2D,EAAA3D,KAAA,EAC4C0M,aAAOumC,GAAiBzmC,EAAQtb,QAAQ2zB,SADpF,UACU0rB,EADV5sC,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,iBAAkB,uEAJ/D,cAAAuU,EAAAwB,OAAA,iBAQ4C,OAR5CxB,EAAA3D,KAAA,EAQkD9L,aAAK2P,GAAWoqC,qBAAsBzhC,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQyZ,UARhI,UAAAjT,EAAAiM,EAAAG,KAQWxS,EARXoG,EAQWpG,UARXoG,EAQqBtI,MARrB,CAAAuU,EAAA3D,KAAA,SAWQ,OAXR2D,EAAA3D,KAAA,GAWc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCAX9D,YAaQkC,EAbR,CAAAqS,EAAA3D,KAAA,SAcQ,OAdR2D,EAAA3D,KAAA,GAcc0E,aAAIgsC,GAAsBH,EAAK2D,aAAa1nC,EAAQtb,QAAQyZ,YAd1E,QAeQ,OAfRhH,EAAA3D,KAAA,GAec0E,aAAIC,EAAarN,QAAQ3C,KAAK,iBAAkB,0CAf9D,yBAAAgP,EAAAI,SAAAowC,GAAArgD,MAmBO,SAAUm6C,KAAV,IAAAzhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG0B,OAH1ByE,EAAAzE,KAAA,EAGgCiF,aAAK,CAChCpB,GAAYmrC,0BAJjB,OAOC,OAJMxiC,EAHP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAOOkF,aAAK+uC,GAA4BznC,GAPxC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAqwC,GAAAtgD,uBCpBGugD,iBAqBO3G,IArBjB,SAAU2G,GAAiB7nC,GAA3B,IAAA+jC,EAAA+D,EAAA58C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC0B,OAD1B2D,EAAA3D,KAAA,EACgC0M,aAAOumC,GAAiBzmC,EAAQtb,QAAQ2zB,SADxE,OAOI,OANI0rB,EADR5sC,EAAAG,KAGUwwC,EAAU/D,EAAK51C,KAErB41C,EAAOA,EAAKiC,OAAOhmC,EAAQtb,QAAQmV,SALvC1C,EAAA3D,KAAA,EAOU0E,aAAIb,GAAOtM,MAAMi5C,YAAYD,IAPvC,OAS4C,OAT5C5sC,EAAA3D,KAAA,EASkD9L,aAAK2P,GAAO4I,IAAIihC,WAAYlhC,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQmV,SATtH,UAAA3O,EAAAiM,EAAAG,KASWxS,EATXoG,EASWpG,UATXoG,EASqBtI,MATrB,CAAAuU,EAAA3D,KAAA,SAYQ,OAZR2D,EAAA3D,KAAA,GAYc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,2BAZ9D,QAcQ,OADAmhD,EAAOA,EAAKiC,OAAO8B,GAb3B3wC,EAAA3D,KAAA,GAcc0E,aAAIb,GAAOtM,MAAMi5C,YAAYD,IAd3C,YAgBQj/C,EAhBR,CAAAqS,EAAA3D,KAAA,SAiBQ,OAjBR2D,EAAA3D,KAAA,GAiBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,eAAgB,oBAAsB6X,EAAQtb,QAAQmV,UAjBlG,yBAAA1C,EAAAI,SAAAwwC,GAAAzgD,MAqBO,SAAU45C,KAAV,IAAAlhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAK6hC,cAHjB,OAMC,OAJMniC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKmvC,GAAkB7nC,GAN9B,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAywC,GAAA1gD,MCzBA,IAEM2gD,GAA6B,SAACphD,GAAD,OAA4F,SAACmC,GAAD,OAFjG,SAACA,EAAiCnC,GAAlC,OAAwFmC,EAAME,MAAM,CAAC8a,GAAQ,iBAAkBnd,IAEOqhD,CAAsBl/C,EAAOnC,kBCA9LshD,iBAsBO5G,IAtBjB,SAAU4G,GAA2BnoC,GAArC,IAAAukC,EAAAr5C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC2B,OAD3B2D,EAAA3D,KAAA,EACiC0M,aAAO+nC,GAA2BjoC,EAAQtb,QAAQ0U,eADnF,YACUmrC,EADVptC,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAIkC,OAJlC2D,EAAA3D,KAAA,EAIwC9L,aAAK2P,GAAO4I,IAAIshC,qBAAsBvhC,EAAQtb,QAAQ0U,cAJ9F,UAAAlO,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAOY,OAPZ2D,EAAA3D,KAAA,GAOkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAPlE,YAUWkC,EAVX,CAAAqS,EAAA3D,KAAA,SAWY,OAXZ2D,EAAA3D,KAAA,GAWkB0E,aAAIC,EAAarN,QAAQ3C,KAC3B,mDACA,iDACA,CAAC8F,MAAOs2C,EAAe7sB,eAdvC,QAkBQ,OAlBRvgB,EAAA3D,KAAA,GAkBc0E,aAAIb,GAAOtM,MAAMu5C,qBAAqBC,EAAe6D,WAlBnE,yBAAAjxC,EAAAI,SAAA8wC,GAAA/gD,MAsBO,SAAUi6C,KAAV,IAAAvhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAKgiC,yBAHjB,OAMC,OAJMtiC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKyvC,GAA4BnoC,GANxC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA+wC,GAAAhhD,uBCtBGihD,iBAsBO/G,IAtBjB,SAAU+G,GAA2BvoC,GAArC,IAAAukC,EAAAr5C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC2B,OAD3B2D,EAAA3D,KAAA,EACiC0M,aAAO+nC,GAA2BjoC,EAAQtb,QAAQ0U,eADnF,YACUmrC,EADVptC,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAIkC,OAJlC2D,EAAA3D,KAAA,EAIwC9L,aAAK2P,GAAO4I,IAAIuhC,qBAAsBxhC,EAAQtb,QAAQ0U,cAJ9F,UAAAlO,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAOY,OAPZ2D,EAAA3D,KAAA,GAOkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAPlE,YAUWkC,EAVX,CAAAqS,EAAA3D,KAAA,SAWY,OAXZ2D,EAAA3D,KAAA,GAWkB0E,aAAIC,EAAarN,QAAQ3C,KAC3B,mDACA,iDACA,CAAC8F,MAAOs2C,EAAe7sB,eAdvC,QAiBY,OAjBZvgB,EAAA3D,KAAA,GAiBkB0E,aAAIb,GAAOtM,MAAMy5C,sBAAsBD,EAAeiE,WAjBxE,yBAAArxC,EAAAI,SAAAkxC,GAAAnhD,MAsBO,SAAUk6C,KAAV,IAAAxhC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAKiiC,yBAHjB,OAMC,OAJMviC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK6vC,GAA4BvoC,GANxC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAmxC,GAAAphD,uBCvBGqhD,iBAIOC,IAJjB,SAAUD,GAAuBhpC,GAAjC,OAAA1I,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU9L,aAAK+9C,IADf,wBAAAtuC,EAAAI,SAAAsxC,GAAAvhD,MAIO,SAAUshD,KAAV,IAAAjpC,EAAA,OAAA1I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEsB,OAFtByE,EAAAzE,KAAA,EAE4BiF,aAAK,CAC5B8I,EAAkBjB,KAAKnT,+BAH5B,OAMC,OAJMwS,EAFP1H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKiwC,GAAwBhpC,GANpC,OAAA1H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAuxC,GAAAxhD,uBCAGyhD,iBAmBO9G,IAnBjB,SAAU8G,GAA6B/oC,GAAvC,IAAA+jC,EAAA74C,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACsC,OADtC2D,EAAA3D,KAAA,EAC4C0M,aAAOumC,GAAiBzmC,EAAQtb,QAAQ2zB,SADpF,UACU0rB,EADV5sC,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,iBAAkB,uEAJ/D,cAAAuU,EAAAwB,OAAA,iBAQ4C,OAR5CxB,EAAA3D,KAAA,EAQkD9L,aAAK2P,GAAO4I,IAAIgiC,uBAAwBjiC,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQkJ,gBARlI,UAAA1C,EAAAiM,EAAAG,KAQWxS,EARXoG,EAQWpG,UARXoG,EAQqBtI,MARrB,CAAAuU,EAAA3D,KAAA,SAWQ,OAXR2D,EAAA3D,KAAA,GAWc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wCAX9D,YAaQkC,EAbR,CAAAqS,EAAA3D,KAAA,SAcQ,OAdR2D,EAAA3D,KAAA,GAcc0E,aAAI0sC,GAAwBb,EAAKiF,mBAAmBhpC,EAAQtb,QAAQkJ,kBAdlF,QAeQ,OAfRuJ,EAAA3D,KAAA,GAec0E,aAAIC,EAAarN,QAAQ3C,KAAK,aAAc,6CAf1D,yBAAAgP,EAAAI,SAAA0xC,GAAA3hD,MAmBO,SAAU26C,KAAV,IAAAjiC,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,GAAOiJ,KAAKmjC,4BAHjB,OAMC,OAJMzjC,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKqwC,GAA8B/oC,GAN1C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA2xC,GAAA5hD,MCxBP,IAAM0c,GAAS,iBCMFmlC,GAAqC,SAAC1/B,EAAkB4O,GACjE,OAAO/uB,aACH,CAAC8/C,IACD,SAACzxB,GACG,OAAOA,EAAiByX,KAAK,SAAAia,GAAU,OAAIA,EAAWhxB,SAAWA,GAAUgxB,EAAW5/B,UAAYA,OAKjG6/B,GAAqC,SAACtgD,EAAiCC,GAAlC,OAC9CmP,gBAAKpP,EAAME,MAAM,CAAC8a,GAAQ,6BAA6BQ,eAAelF,YAAclH,mBAE3EgxC,GAAqC,SAACpgD,EAAiCC,GAAlC,OAC9CmP,gBAAKpP,EAAME,MAAM,CAAC8a,GAAQ,6BAA6BQ,eAAelF,YAAclH,mBAW3EmxC,GAAyC,SAAC9/B,GACnD,OAAOngB,aACH,CAAC8/C,IACD,SAACzxB,GACG,OAAOA,EAAiB/tB,OAAO,SAAAm1B,GAAe,OAAIA,EAAgBtV,UAAYA,OCjB7E+/B,GAAqC,SAACvgD,GAE/C,IAAM0B,EAAW0jB,yBACX01B,EAAOl1B,uBAAY43B,GAAiBx9C,EAAM81B,gBAAgB1G,SAE1DoxB,EAAgBxgD,EAAM81B,gBAAgBtH,YAAYI,WAClD6xB,EAAiBzgD,EAAM81B,gBAAgBtH,YAAYG,YAEzD,IAAK6xB,IAAkBC,EACnB,OAAO,KAGX,IAAK3F,EACD,OAAO,KA2BX,OACIl+C,GAAA,cAAC05C,GAAA,EAAMlwB,IAAP,KACIxpB,GAAA,cAAC05C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAACjC,MAAO,UACvBvkB,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAK7D,OAAO,GACnBhmB,GAAA,qBAAK2nB,UAAU,kBAAkBnC,IAAG,gBAAAlf,OAAkB43C,EAAKl9C,IAAvB,iBAAAsF,OAA0C43C,EAAK51C,QACnFtI,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,KACKm4B,EAAK51C,KACNtI,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,KAAmB0zB,EAAKvgB,gBAIpC39B,GAAA,cAAC05C,GAAA,EAAMG,KAAP,KACI75C,GAAA,cAAConB,GAAA,EAAOyvB,MAAR,KACI72C,GAAA,cAAConB,GAAA,EAAD,CACIO,UAAW,WACXN,SAAU,OACVlnB,QApCqB,WACjCiD,EAAM81B,gBAAgBtH,YAAYG,aAItCjtB,EAAS0M,EAAe+gB,gCACpBnvB,EAAMygB,MAAM7iB,IACZk9C,EAAKl9C,IAFAO,OAAA2N,GAAA,EAAA3N,CAAA,GAGA6B,EAAM81B,gBAAgBtH,YAHtB,CAGmCG,aAAa,SA8B7C/xB,GAAA,cAAConB,GAAA,EAAO08B,GAAR,CAAW35B,KAAK,MAChBnqB,GAAA,cAAConB,GAAA,EAAD,CACIO,UAAWk8B,EAAiB,WAAa,GACzCx8B,SAAU,QACVlnB,QA9BsB,WACtC2E,EAAS0M,EAAe+gB,gCACpBnvB,EAAMygB,MAAM7iB,IACZk9C,EAAKl9C,IAFAO,OAAA2N,GAAA,EAAA3N,CAAA,GAGA6B,EAAM81B,gBAAgBtH,YAHtB,CAGmCG,aAAc3uB,EAAM81B,gBAAgBtH,YAAYG,oBA6BpF/xB,GAAA,cAAConB,GAAA,EAAD,CACI0C,MAAM,EACNnC,UAAU,wCACVN,SAAUrnB,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAU,mBAC1BxnB,QArDkB,WAC9B2E,EAASi/C,GAAW9+C,QAAQ82C,6BAA6B34C,EAAMygB,MAAM7iB,IAAKk9C,EAAKl9C,YCpB1EgjD,GAAgC,SAAC5gD,GAE1C,IAAM0uB,EAAmB9I,uBAAY06B,GAAuCtgD,EAAMygB,MAAM7iB,MAExF,OACIhB,GAAA,cAAC05C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAM,QAC5Bv4C,GAAA,cAAC05C,GAAA,EAAME,KAAP,KACK9nB,EAAiB3hB,IAAI,SAAA+oB,GAAe,OACjCl5B,GAAA,cAACikD,GAAD,CACIpgC,MAAOzgB,EAAMygB,MACbqV,gBAAiBA,EACjBl3B,IAAKk3B,EAAgBl4B,qBCRhCkjD,GAA4B,SAAC9gD,GAEtC,IAAM0B,EAAW0jB,yBACX2e,EAAkCne,uBAAYvK,GAA+Brb,EAAM81B,gBAAgBjxB,SAEnGk8C,EAAU/gD,EAAMygB,MAAMkY,QAAU34B,EAAM81B,gBAAgBjxB,QAAU7E,EAAMygB,MAAMmY,UAAY54B,EAAM81B,gBAAgBjxB,OAC9G27C,EAAgBxgD,EAAM81B,gBAAgBtH,YAAYI,WAClD6xB,EAAiBzgD,EAAM81B,gBAAgBtH,YAAYG,YAEzD,IAAK6xB,IAAkBC,EACnB,OAAO,KAGX,IAAK1c,EACD,OAAO,KA2BX,OACInnC,GAAA,cAAC05C,GAAA,EAAMlwB,IAAP,KACIxpB,GAAA,cAAC05C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAACjC,MAAO,UACvBvkB,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAK7D,OAAO,GACnBhmB,GAAA,qBAAK2nB,UAAU,kBAAkBnC,IAAK2hB,EAASid,SAAUC,IAAKld,EAASh/B,WACvEnI,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,KACKohB,EAASh/B,SACTg8C,GACGnkD,GAAA,cAACskD,GAAA,EAAD,CAAOvO,MAAM,OAAOvvB,MAAO,CAAC+9B,aAAa,SAAUxK,WAAW,KAAMxB,OAAO,GAA3E,SAEJv4C,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,KAAmB2c,EAASvmC,aAIxCZ,GAAA,cAAC05C,GAAA,EAAMG,KAAP,KACI75C,GAAA,cAAConB,GAAA,EAAOyvB,MAAR,KACI72C,GAAA,cAAConB,GAAA,EAAD,CACIO,UAAW,WACXN,SAAU,OACVqtB,SAAUyP,EACVhkD,QAxCqB,WACjCiD,EAAM81B,gBAAgBtH,YAAYG,aAItCjtB,EAAS0M,EAAe8gB,uBACpBlvB,EAAMygB,MAAM7iB,IACZmmC,EAASl/B,OAFJ1G,OAAA2N,GAAA,EAAA3N,CAAA,GAGA6B,EAAM81B,gBAAgBtH,YAHtB,CAGmCG,aAAa,SAkC7C/xB,GAAA,cAAConB,GAAA,EAAO08B,GAAR,CAAW35B,KAAK,MAChBnqB,GAAA,cAAConB,GAAA,EAAD,CACIO,UAAWk8B,EAAiB,WAAa,GACzCx8B,SAAU,QACVqtB,SAAUyP,EACVhkD,QAnCsB,WACtC2E,EAAS0M,EAAe8gB,uBACpBlvB,EAAMygB,MAAM7iB,IACZmmC,EAASl/B,OAFJ1G,OAAA2N,GAAA,EAAA3N,CAAA,GAGA6B,EAAM81B,gBAAgBtH,YAHtB,CAGmCG,aAAc3uB,EAAM81B,gBAAgBtH,YAAYG,qBAkClFoyB,GACEnkD,GAAA,cAAConB,GAAA,EAAD,CACI0C,MAAM,EACNnC,UAAU,+CACVN,SAAUrnB,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAU,mBAC1BxnB,QA3Dc,WAC9B2E,EAAS0M,EAAe6gB,oBAAoBjvB,EAAMygB,MAAM7iB,IAAKmmC,EAASl/B,eCnBjEu8C,GAAuB,SAACphD,GAEb4lB,uBAAYrN,MAAhC,IJGmDiI,EIF7CkO,EAAmB9I,wBJE0BpF,EIFyBxgB,EAAMygB,MAAM7iB,IJGjFyC,aACH,CAACggD,IACD,SAAC3xB,GACG,OAAOA,EAAiB/tB,OAAO,SAAAm1B,GAAe,OAAIA,EAAgBtV,UAAYA,QIJhF6gC,EAAUrhD,EAAMygB,MAAMkY,OAAS34B,EAAMygB,MAAMmY,QAEjD,OACIh8B,GAAA,cAAC05C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAM,QAC5Bv4C,GAAA,cAAC05C,GAAA,EAAME,KAAP,KACI55C,GAAA,cAAC0kD,GAAD,CACI7gC,MAAOzgB,EAAMygB,MACbqV,gBAAiB,IAAI2P,GAAuB,CACxC7nC,IAAK,GACL8N,cjEvBM,yBiEwBN8iB,YAAa,CAAEI,YAAY,EAAMD,aAAa,EAAME,aAAa,GACjEhqB,OAAQw8C,EACR7gC,QAASxgB,EAAMygB,MAAM7iB,QAG5B8wB,EAAiB3hB,IAAI,SAAA+oB,GAAe,OACjCl5B,GAAA,cAAC0kD,GAAD,CACI1iD,IAAKk3B,EAAgBl4B,IACrB6iB,MAAOzgB,EAAMygB,MACbqV,gBAAiBA,mBCtC1ByrB,GALS,SAACvhD,GACrB,IAAMwhD,EAAQrjD,OAAA2N,GAAA,EAAA3N,CAAA,GAAO6B,EAAP,CAAcm1C,OAAO,IACnC,OAAOp0C,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD7lB,OAAAklB,OAAA,GAAam+B,EAAb,CAAuBj9B,UAAU,0BCyB7Bk9B,GAlBI,SAACzhD,GAChB,GAAGA,EAAMoE,KAAKqH,UAEV,OAAO7O,GAAA,cAAConB,GAAA,EAAD,CAAQ09B,UAAU,EAAMrQ,KAAMrxC,EAAMqxC,MAAQ,QAAS9sB,UAAU,OAAOmC,KAAK,OAAO4qB,UAAU,EAAMluB,MAAO,CAAC6D,OAAQ,aAEzH,IAAM+5B,EAASpkD,GAAA,cAAC+kD,GAAA,EAAD,CAAOtQ,KAAMrxC,EAAMqxC,MAAQ,QAASjvB,IAAKpiB,EAAMoE,KAAK48C,SAAUA,QAAQ,EAAM/O,cAAc,WAEzG,OAAGjyC,EAAM4hD,UACEhlD,GAAA,cAAC61C,GAAA,EAAD,CAASC,QAASsO,EACT97B,QAASllB,EAAMoE,KAAKW,SACpBvH,SAAS,kBAGtBwjD,GChBFa,GAA8B,SAACjkD,GAAD,OACvC,SAACmC,GAAD,OAJkC,SAACA,EAAiCnC,GAAlC,OAClCmC,EAAME,MAAM,CAAC8a,GAAQ,mBAAoBnd,IAGJkkD,CAAuB/hD,EAAOnC,KAE1DmkD,GAA8B,SAAChiD,EAAiCC,GAAlC,OACvCmP,gBAAKpP,EAAME,MAAM,CAAC8a,GAAQ,qBAAqBQ,eAAelF,YAAclH,mBCwFjE5N,kBAxEwB,SAACvB,GAEpC,IAAM0B,EAAW0jB,yBAFiE9D,EAGlDC,oBAASxV,MAHyCyV,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAG3EyiB,EAH2EviB,EAAA,GAGjEwgC,EAHiExgC,EAAA,GAAAG,EAI5CJ,qBAAkB,GAJ0BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAI3EsgC,EAJ2ErgC,EAAA,GAI9DsgC,EAJ8DtgC,EAAA,GAAAG,EAK9CR,qBAAkB,GAL4BS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAK3EogC,EAL2EngC,EAAA,GAK/DogC,EAL+DpgC,EAAA,GAM5E7O,EAAayS,uBAAYi8B,GAA4B7hD,EAAMw1B,gBAAgB53B,MAEjFZ,qBAAU,WACNsb,EAAkBtB,IAAI3R,4BAA4BrF,EAAMw1B,gBAAgBplB,kBAAkBxU,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SAC7F,GADkHoG,EAAXtI,MACpGkC,EAAU,CACT,IAAM6O,EAAS4N,EAAuB3M,gCAAgC9P,EAASqC,MAE5E0K,GAAU8B,IACTs3C,EAAYt3C,EAAO7L,WAIhC,CAACmB,EAAMw1B,gBAAgBplB,mBAE1BpT,qBACI,WACIklD,GAAe,GACfE,GAAc,IAElB,CAACjvC,IAqBL,OACIvW,GAAA,cAAC05C,GAAA,EAAMlwB,IAAP,KACIxpB,GAAA,cAAC05C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAEjC,MAAO,UACxBvkB,GAAA,cAACylD,GAAD,CAAYj+C,KAAM2/B,EAAUsN,KAAK,SACjCz0C,GAAA,sBAAMwmB,MAAO,CAACk/B,YAAa,SAAUtiD,EAAMw1B,gBAAgBplB,mBAE/DxT,GAAA,cAAC05C,GAAA,EAAMG,KAAP,KACI75C,GAAA,cAAC2lD,GAAA,EAAD,CAAa7K,QAAQ,SACjB96C,GAAA,cAAC4lD,GAAD,CACIt9B,QAASllB,EAAMkB,EAAE,mBACjBwlB,KAAK,cACLwM,QAAS+uB,EACTllD,QA9BW,WACvBklD,GAAeE,IAInBD,GAAe,GACfxgD,EAAS0M,EAAe0gB,sBAAsB9uB,EAAMw1B,gBAAgB53B,UA0BxDhB,GAAA,cAAC4lD,GAAD,CACIt9B,QAASllB,EAAMkB,EAAE,mBACjBwlB,KAAK,SACLwM,QAASivB,EACTplD,QA3BW,WACvBklD,GAAeE,IAInBC,GAAc,GACd1gD,EAAS0M,EAAe2gB,sBAAsB/uB,EAAMw1B,gBAAgB53B,eCjD/D6kD,GAA4B,SAACziD,GAEtC,OACIpD,GAAA,cAAC05C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAM,QAC5Bv4C,GAAA,cAAC05C,GAAA,EAAME,KAAP,KACKx2C,EAAM0iD,gBAAgB31C,IAAI,SAAAyoB,GAAe,OACtC54B,GAAA,cAAC+lD,GAAD,CACI/jD,IAAK42B,EAAgB53B,IACrB6iB,MAAOzgB,EAAMygB,MACb+U,gBAAiBA,oBCqG1Bj0B,kBAnGQ,SAACvB,GAEpB,IAAM0B,EAAW0jB,yBAFkC9D,EAGzBC,oBAAiBvhB,EAAMgF,OAHEwc,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAG5Ctc,EAH4Cwc,EAAA,GAGrCohC,EAHqCphC,EAAA,GAAAG,EAIbJ,oBAAkBvhB,EAAMwuB,YAAYG,aAJvB/M,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAI5CgN,EAJ4C/M,EAAA,GAI/BihC,EAJ+BjhC,EAAA,GAM7CkhC,EAAgB9iD,EAAMyb,MACvB9a,OAAO,SAAAyD,GAAI,OAAIA,EAAKc,KAAK69C,oBAAoBliD,SAASmE,EAAM+9C,sBAAwB3+C,EAAKY,MAAM+9C,oBAAoBliD,SAASmE,EAAM+9C,uBAClIlP,OAAO,SAAAzvC,GAAI,OAAIA,EAAKc,OACpB6H,IAAI,SAAA3I,GACL,MAAO,CACHnL,GAAImL,EAAKS,OACTxH,MAAO+G,EAAKc,KACZq1B,YAAan2B,EAAKY,MAClB4d,MAAOxe,EAAK48C,UAyBpB,OACIjgD,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAjBT,SAAC9N,GAClBA,EAAMm7B,iBAED,4CAA4CmR,KAAKh+C,IAKtDhF,EAAMykB,aAAa,CACfjE,QAASxgB,EAAMwgB,QACfxb,QACAwpB,YAAYrwB,OAAA2N,GAAA,EAAA3N,CAAA,GAAM6B,EAAMwuB,YAAb,CAA0BG,kBAfzCk0B,GAAe,GACfD,EAAS,KAOLlhD,EAASuhD,EAAOphD,QAAQlI,MAAM,wBAAyB,4BAcvDoH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SAASnB,MAAO,CAAC8/B,OAAO,MACnCniD,GAAAC,EAAAC,cAACq1C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAM,QAC5Bp0C,GAAAC,EAAAC,cAACq1C,GAAA,EAAME,KAAP,KACIz1C,GAAAC,EAAAC,cAACq1C,GAAA,EAAMlwB,IAAP,KACIrlB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAACjC,MAAO,UACvBpgB,GAAAC,EAAAC,cAACkiD,GAAA,EAAD,CACIC,OAAO,EACPvkD,MAAOmG,EACPq+C,QAASP,EAAczsC,UACvBuO,YAAa5kB,EAAMkB,EAAE,yBACrBoiD,eAAe,EACfC,eAAgB,SAAArlD,GACZ,OAAO6C,GAAAC,EAAAC,cAAA,OAAKrC,IAAKV,EAAKjF,IAClB8H,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,mBACXxjB,GAAAC,EAAAC,cAAA,OAAKmhB,IAAKlkB,EAAK0kB,MAAOq+B,IAAK/iD,EAAKb,SAEpC0D,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,WACXxjB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SAASrmB,EAAKb,OAC7B0D,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,eAAermB,EAAKq8B,gBAI/CipB,eAAgB,SAAC9qD,EAAGwF,GAAJ,OAAa0kD,EAAS1kD,EAAKW,OAAS,KACpD4kD,eAAgB,SAAC/qD,EAAGwF,GAChB0kD,EAAS1kD,EAAKwM,OAAO6vB,iBAIjCx5B,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACI11C,GAAAC,EAAAC,cAAC+iB,GAAA,EAAOyvB,MAAR,KACI1yC,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAW,WACXN,SAAU,OACVlnB,QAAS,kBAAM8lD,GAAe,MAElC9hD,GAAAC,EAAAC,cAAC+iB,GAAA,EAAO08B,GAAR,CAAW35B,KAAK,MAChBhmB,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAWoK,EAAc,WAAa,GACtC1K,SAAU,QACVlnB,QAAS,kBAAM8lD,GAAgBl0B,QAI3C5tB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,KACI11C,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASu2C,QAAQ,SACxC13C,EAAMkB,EAAE,sCCP9BK,kBAtFgB,SAACvB,GAE5B,IAAM26C,EAAQ/0B,uBAAY+3B,MAFyCr8B,EAG3CC,oBANC,GAG0CC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAAAK,GAAAH,EAAA,GAAAA,EAAA,GAIzBD,oBAAmB,KAJMK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAI5D+hC,EAJ4D9hC,EAAA,GAI7C+hC,EAJ6C/hC,EAAA,GAAAG,EAK7BR,oBAAkBvhB,EAAMwuB,YAAYG,aALP3M,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAK5D4M,EAL4D3M,EAAA,GAK/C6gC,EAL+C7gC,EAAA,GAQ7D4hC,EADmBh+B,uBAAY06B,GAAuCtgD,EAAMwgB,UAC3CzT,IAAI,SAAA+oB,GAAe,OAAIA,EAAgB1G,SAIxEy0B,GAFgBlJ,EAAMh6C,OAAO,SAAAm6C,GAAI,OAAK8I,EAAchoC,SAASk/B,EAAKl9C,OAEhD+8C,EAAM5tC,IAAI,SAAA+tC,GAAI,MAAK,CACvCl8C,IAAKk8C,EAAKl9C,IACViB,MAAOi8C,EAAKl9C,IACZmpB,KAAM+zB,EAAK51C,QACXmR,WAoBJ,OACItV,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAZT,SAAC9rB,GAClBA,EAAEm5C,iBAEF7xC,EAAMykB,aAAa,CACfjE,QAASxgB,EAAMwgB,QACfo6B,QAAS8I,EACTl1B,YAAYrwB,OAAA2N,GAAA,EAAA3N,CAAA,GAAM6B,EAAMwuB,YAAb,CAA0BG,kBAZzCk0B,EAAe7iD,EAAMwuB,YAAYG,aACjCg1B,EAAiB,MAkBb5iD,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SAASnB,MAAO,CAAC8/B,OAAQ,MACpCniD,GAAAC,EAAAC,cAACq1C,GAAA,EAAD,CAAOC,aAAa,EAAMpB,MAAM,QAC5Bp0C,GAAAC,EAAAC,cAACq1C,GAAA,EAAME,KAAP,KACIz1C,GAAAC,EAAAC,cAACq1C,GAAA,EAAMlwB,IAAP,KACIrlB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAACjC,MAAO,QAAS8wB,cAAe,QAC/ClxC,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,eAAenB,MAAO,CAACjC,MAAO,SACzCpgB,GAAAC,EAAAC,cAAC2lB,GAAA,EAAD,CACIhC,YAAa5kB,EAAMkB,EAAE,6BACrByB,QAAQ,EACRmhD,WAAW,EACX/mB,UAAU,EACVgnB,QAASF,EACThlD,MAAO6kD,EACP//B,SA5Bf,SAACjrB,EAAyBsrD,GAA1B,OAAoDL,EAAiBK,EAAOnlD,QA6B7DukB,MAAO,CAACjC,MAAO,YAI3BpgB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAC6uB,cAAe,QAC/BlxC,GAAAC,EAAAC,cAAC+iB,GAAA,EAAOyvB,MAAR,KACI1yC,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAW,WACXN,SAAU,OACVlnB,QAAS,kBAAM8lD,GAAe,MAElC9hD,GAAAC,EAAAC,cAAC+iB,GAAA,EAAO08B,GAAR,CAAW35B,KAAK,MAChBhmB,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAWoK,EAAc,WAAa,GACtC1K,SAAU,QACVlnB,QAAS,kBAAM8lD,GAAgBl0B,QAI3C5tB,GAAAC,EAAAC,cAACq1C,GAAA,EAAMG,KAAP,CAAYrzB,MAAO,CAAC6uB,cAAe,QAC/BlxC,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASmwC,SAAmC,IAAzBoS,EAAcrkD,QACxDW,EAAMkB,EAAE,sCCvGhC+iD,IC0FE1iD,eAlEc,SAACvB,GAC1B,INXgDwgB,EMW1C9e,EAAW0jB,yBACXO,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChEw2C,EAAsB/0C,gBAAayD,EAAY,CAAIA,EAAauB,SAAjBjR,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAA6ByU,EAAa2B,QAAQsD,SAAU,IAC3GssC,EAAoBv+B,uBAAYlK,GAAgCwoC,IAChEE,EAAuBx+B,wBNhBmBpF,EMgB6BxgB,EAAMygB,MAAQzgB,EAAMygB,MAAM7iB,IAAM,GNftGyC,aACH,CAAC0hD,IACD,SAAC7rB,GACG,OAAOA,EAAiBv1B,OAAO,SAAA60B,GAAe,OAC1CA,EAAgBhV,UAAYA,GAAsC,YAA3BgV,EAAgB3hB,aMqBnE,IAAK7T,EAAMygB,QAAU7N,EACjB,OAAOhW,GAAA,cAAAA,GAAA,eAGX,IAAMynD,EAAYznD,GAAA,cAAAA,GAAA,cACdA,GAAA,cAAC0nD,GAAD,CACI9jC,QAASxgB,EAAMygB,MAAM7iB,IACrBoH,MAAO,GACPwpB,YAAa,CAAEI,YAAY,EAAMD,aAAa,EAAME,aAAa,GACjEpK,aAjBW,SAACvmB,GAChBwD,EAAS0M,EAAemgB,WAAWrwB,EAAKsiB,QAAStiB,EAAK8G,MAAO9G,EAAKswB,eAiB9D/S,MAAO0oC,EAAkBp3C,IAAI,SAAA3I,GAAI,MAAK,CAClCS,OAAQT,EAAKS,OACbK,KAAMd,EAAKW,SACXi8C,OAAQ58C,EAAKa,UACbD,MAAOZ,EAAKY,WAGpBpI,GAAA,cAACw3C,GAAA,EAAD,MACAx3C,GAAA,cAAC2nD,GAAD,CAAsB9jC,MAAOzgB,EAAMygB,QAClC2jC,EAAqB5rC,QAAU,GAAK5b,GAAA,cAAAA,GAAA,cACjCA,GAAA,cAACw3C,GAAA,EAAD,CAASC,YAAY,GAArB,oBACAz3C,GAAA,cAAC4nD,GAAD,CAA2B9B,gBAAiB0B,EAAsB3jC,MAAOzgB,EAAMygB,UAIjFgkC,EAAY7nD,GAAA,cAAAA,GAAA,cACdA,GAAA,cAAC8nD,GAAD,CACIlkC,QAASxgB,EAAMygB,MAAM7iB,IACrBwG,KAAMuhB,EACN6I,YAAa,CAAEI,YAAY,EAAMD,aAAa,EAAME,aAAa,GACjEpK,aAlCoB,SAACvmB,GACzBwD,EAASi/C,GAAW9+C,QAAQ62C,4BAA4Bx6C,EAAKsiB,QAAStiB,EAAK08C,QAAS18C,EAAKswB,iBAmCzF5xB,GAAA,cAACw3C,GAAA,EAAD,MACAx3C,GAAA,cAAC+nD,GAAD,CAA+BlkC,MAAOzgB,EAAMygB,SAG1CmkC,EAAQ,CACV,CACIC,SAAY,OACZC,OAAQ,kBAAMT,IAElB,CACIQ,SAAY,QACZC,OAAQ,kBAAML,KAItB,OAAO7nD,GAAA,cAACmoD,GAAA,EAAD,CAAKC,KAAM,CAAEC,WAAW,EAAMC,UAAU,EAAMvS,MAAO,UAAYiS,MAAOA,MDvF3D,SAAC/+C,GACrB,OAAO,IAAItM,QAAgB,SAACT,EAASU,GACjC,IAAM2rD,EAAS,IAAIC,WACnBD,EAAOE,OAAS,kBAAMvsD,EAAQqsD,EAAOz6C,SACrCy6C,EAAOtnC,QAAU,kBAAMrkB,KACvB2rD,EAAOG,WAAWz/C,EAAM,aAInB0/C,GAAsB,SAAC1/C,GAChC,OAAO,IAAItM,QAAqB,SAACT,EAASU,GACtC,IAAM2rD,EAAS,IAAIC,WACnBD,EAAOE,OAAS,kBAAMvsD,EAAQqsD,EAAOz6C,SACrCy6C,EAAOtnC,QAAU,kBAAMrkB,KACvB2rD,EAAOK,kBAAkB3/C,MAIpB4/C,GAAiB,SAAC5/C,GAC3B,OAAO,IAAItM,QAAgB,SAACT,EAASU,GACjC,IAAM2rD,EAAS,IAAIC,WACnBD,EAAOE,OAAS,kBAAMvsD,EAAQqsD,EAAOz6C,SACrCy6C,EAAOtnC,QAAU,kBAAMrkB,KACvB2rD,EAAOO,cAAc7/C,MEEhB8/C,GAAkD,CAC3D/nD,IAAK,GACL8N,cApB0B,iBAqB1B2lB,SAAUtU,GAAS8f,KACnBvL,SAAU,GACVE,aAAc,OACdC,oBAAgB5zB,EAChB2iB,QAAS,IAGAolC,GAAwB,SAACplC,EAAkB6Q,GACpD,SAAAnuB,OAAUsd,EAAV,MAAAtd,OAAsBmuB,IAGbw0B,GAAqC,SAAC3nD,GAC/C,IAAM0N,EAAkD7C,GAAS7K,EAC7D,CAACiN,GAAO,WAAY,mBACpB,CAACA,GAAO,YAAa,oBACrB,CAACA,GAAO,YAAa,oBACrB,CAACA,GAAO,gBAAiB,4BAG7B,OAAI1C,GAAUmD,GACHA,EAGJ9C,GAAQ,IAAIg9C,GAAJ3nD,OAAA2N,GAAA,EAAA3N,CAAA,GACRwnD,GACAznD,EAFQ,CAGXN,IAAKgoD,GAAsB1nD,EAAKsiB,QAAStiB,EAAKmzB,eAIzC00B,GAAkC,SAACvlC,EAAkB6Q,EAAoBC,GAClF,OAAO,IAAIw0B,GAAe,CACtBloD,IAAKgoD,GAAsBplC,EAAS6Q,GACpC3lB,cAtDsB,iBAuDtB2lB,WACA7Q,UACA8Q,WACAE,aAAc,UAITs0B,GAAb,SAAA7nD,GACI,SAAA6nD,EAAmB5nD,GAA2B,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAynD,GAC1B,KAAb5nD,EAAKN,MACLM,EAAKN,IAAMU,SAGVJ,EAAKuzB,iBACNvzB,EAAKuzB,oBAAiB5zB,GANgBM,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA2nD,GAAArnD,KAAAJ,KASpCH,IAVd,OAAAC,OAAAO,GAAA,EAAAP,CAAA2nD,EAAA7nD,GAAAE,OAAAQ,GAAA,EAAAR,CAAA2nD,EAAA,EAAAlnD,IAAA,cAAAC,MAAA,SAauByyB,GACf,OAAOjzB,KAAKS,IAAI,WAAYwyB,KAdpC,CAAA1yB,IAAA,kBAAAC,MAAA,SAiB2B2yB,GACnB,OAAOnzB,KAAKS,IAAI,eAAgB0yB,KAlBxC,CAAA5yB,IAAA,oBAAAC,MAAA,SAqB6B4yB,GACrB,OAAOpzB,KAAKS,IAAI,iBAAkB2yB,OAtB1Cq0B,EAAA,CAAoC/mD,kBAAO4mD,KCtErCK,GAAU,6HASHC,GAA8C,CACvDlvC,QAAO,4CAAA7T,OAGG8iD,GAHH,UAMPtvC,MAAK,sCAAAxT,OAGK8iD,GAHL,SAMLE,UAAS,kBAAAhjD,OAEC8iD,GAFD,WAKT5qD,SAAQ,kBAAA8H,OAEE8iD,GAFF,WAKRG,OAAM,0BAKN95C,KAAI,aAKJ+5C,QAAO,aAKPC,eAAc,aAKdC,GAAE,aAKFnsB,QAAO,aAKPD,eAAc,aAKdxT,KAAI,aAKJ9D,MAAK,aAKL2jC,SAAQ,cClECC,GAA6B,SAAC5oD,GAAD,OAA4F,SAACmC,GAAD,OAFjG,SAACA,EAAiCnC,GAAlC,OAAwFmC,EAAME,MAAM,CAAC8a,GAAQ,iBAAkBnd,IAEO6oD,CAAsB1mD,EAAOnC,KA2BpMuR,kBAEG,IC0JHu3C,GClMQ7kD,GCAAC,GHwCC6kD,GAAqC,SAACnmC,GAC/C,OAAO,SAACzgB,GACJ,IAAI6mD,EAjBkC,SAAC7mD,EAAiCC,GAC5E,IAAI6mD,EAAYj6C,iBAUhB,OARC7M,EAAME,MAAM,CAAC8a,GAAQ,oBAAsB5L,mBAAQoM,eAC/C5a,OAAO,SAACs2B,GACL,OAAOA,EAAezW,UAAYxgB,EAAMwgB,UAE3C5f,QAAQ,SAACq2B,GACN4vB,EAAYA,EAAU/nD,IAAIm4B,EAAe5F,SAAU4F,KAGpD4vB,EAMqBC,CAA+B/mD,EAAO,CAACygB,YAE/D,IAAK,IAAM6Q,KAAY40B,GACfW,EAAkB35C,IAAIokB,KACtBu1B,EAAoBA,EAAkB9nD,IAClCuyB,EACA00B,GAAgCvlC,EAAS6Q,EAAsB40B,GAAiB50B,MAI5F,OAAOu1B,eIQTG,GAAa,SAACC,EAAaC,EAAoBC,GAIjD,OAHAF,EAAMA,EAAI1+C,QAAQ,iBAAkB,IAGjC4+C,EAAY/nB,eAAe6nB,GACnBE,EAAYF,GAIhB,CAAE7lD,KAAM,8BCnENgmD,GAAS,kBAAOhkD,OAAegkD,QA0I7BC,eAjHX,SAAAA,EAAYpnD,GAAwB,IAAAqd,EAAA,OAAAlf,OAAAC,GAAA,EAAAD,CAAAE,KAAA+oD,IAChC/pC,EAAAlf,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAipD,GAAA3oD,KAAAJ,KAAM2B,KAHFqnD,YAE4B,EAGhChqC,EAAKiqC,uBAAyBjqC,EAAKiqC,uBAAuBpnC,KAA5B/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAE9BA,EAAKtd,MAAQ,CACTynD,aAAc,IANcnqC,qFAWhChf,KAAKgpD,OAASF,KAASE,OAAOptD,OAAOmB,SAASqsD,eAAe,aAAcppD,KAAK2B,MAAM+jD,SAAW,mDAIjG5lD,OAAOtF,KAAKwF,KAAK0B,MAAMynD,cAAc5mD,QAAQvC,KAAKipD,wBAClDjpD,KAAKgpD,YAASxpD,mCAId,OACIjB,GAAA,qBACI3D,GAAI,YACJmqB,MAAO/kB,KAAK2B,MAAMojB,kDAM1B,OAAO/kB,KAAKgpD,OAAOnnB,mDAGAwnB,GACnB,IAAMC,EAAWR,KAASS,IAAIC,MAAMH,EAAUI,QAC1ClpB,EAAQuoB,KAASE,OAAOjpB,SAASupB,GAErCtpD,KAAKipD,uBAAuBI,EAAUI,QAElC,OAASlpB,GACTA,EAAQuoB,KAASE,OAAOU,YAAYL,EAAU7oD,MAAO6oD,EAAUM,SAAUL,IACnEM,cAAc,CAAEC,QAAS,KAE/Bf,KAASE,OAAOc,iBAAiBvpB,EAAO8oB,EAAUM,UAE9CN,EAAU7oD,QAAU+/B,EAAMsB,YAC1BtB,EAAMwpB,SAASV,EAAU7oD,QAI7B6oD,EAAU/jC,UACVtlB,KAAKgqD,0BAA0BX,EAAUI,OAAQlpB,EAAO8oB,EAAU/jC,UAG3C,SAAvB+jC,EAAUM,UAAuBN,EAAUT,QAC3C5oD,KAAKiqD,0BAA0BX,EAAUD,EAAUT,QAGvD5oD,KAAKgpD,OAAOkB,SAAS3pB,sCAGP4pB,EAAoBC,GAClCpqD,KAAKgpD,OAAOqB,WAAWF,EAAYC,6CAGdA,GACrBpqD,KAAKgpD,OAAOsB,UAAUF,mCAItBpqD,KAAKgpD,OAAO7zB,uDAGes0B,GACvBzpD,KAAK0B,MAAMynD,aAAaM,IAAWzpD,KAAK0B,MAAMynD,aAAaM,GAAQc,qBACnEvqD,KAAK0B,MAAMynD,aAAaM,GAAQc,mBAAmBC,UACnDxqD,KAAKyqD,mBAAmBhB,EAAQ,CAAEc,wBAAoB/qD,uDAI5BiqD,EAAgBlpB,EAAYjb,GAE1DtlB,KAAKipD,uBAAuBQ,GAE5B,IAAMiB,EAAgBnqB,EAAMoqB,mBAAmB,SAACtwD,GAC5CirB,EAASjrB,KAGb2F,KAAKyqD,mBAAmBhB,EAAQ,CAAEc,mBAAoBG,sDAGxBpB,EAAeV,GAC7CE,KAAS8B,UAAUC,KAAKC,aAAaC,sBAAsB,CACvDrgD,UAAU,EACVsgD,qBAAqB,EACrBC,eAAe,EACfC,QAAS,CAAC,CACNC,IAAK,kCACLC,UAAW,CAAC9B,EAASxnB,YACrB8mB,OAAQ//C,KAAK2gD,MAAMZ,kDAKJa,EAAgB5pD,GACvCG,KAAKqrD,SAAS,CACVlC,aAAarpD,OAAA2N,GAAA,EAAA3N,CAAA,GACNE,KAAK0B,MAAMynD,aADNrpD,OAAAwrD,GAAA,EAAAxrD,CAAA,GAEP2pD,EAAS5pD,aA/GD0rD,yBCgCVA,QAAMC,WAxCW,SAAC7pD,EAAqCgnD,GAClE,IAAM8C,EAAgBC,kBAAwB,MAmB9C,OAjBA/sD,qBAAU,WACD8sD,EAAcE,SAInBF,EAAcE,QAAQC,gBAAgB,CAClCnC,OAAM,SAAA5kD,OAAWlD,EAAMkqD,oBAAoB1pC,QAArC,YAAAtd,OAAuDlD,EAAMkqD,oBAAoB74B,SAAjF,gBACN22B,SAAU,OACVnpD,MAAOmB,EAAMkqD,oBAAoBz4B,gBAAkB,gDACnDw1B,OAAQ//C,KAAKC,UAAUgjD,OAE5B,CAACnqD,EAAMkqD,oBAAoB1pC,QAASxgB,EAAMkqD,oBAAoB74B,SAAUrxB,EAAMkqD,oBAAoBz4B,iBAErG24B,+BAA4EpD,EAAK,iBAAO,CACpFqD,gBAAiB,kBAAcP,EAAcE,QAASK,sBAItDtpD,GAAAC,EAAAC,cAACqpD,GAAD,CACItD,IAAK8C,EACL1mC,MAAO,CAAEhC,OAAQ,QAASD,MAAO,OAAQopC,UAAW,QACpDxG,QAAS,CACLnR,SAAU,GACV4X,SAAS,EACTC,aAAa,EACbC,YAAa,MACbC,qBAAsB,EACtBC,QAAS,CACLC,SAAS,GAEbC,eAAe,EACfC,sBAAsB,OCyDvBxpD,kBArFmB,SAACvB,GAE/B,IAAM0B,EAAW0jB,yBAFwD9D,EAGjCC,oBAAuBvhB,EAAMkqD,oBAAoB14B,cAHhBhQ,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGlEkQ,EAHkEhQ,EAAA,GAGpDwpC,EAHoDxpC,EAAA,GAInEypC,EAA6BlB,kBAA0C,MAE7E/sD,qBACI,WACIguD,EAAgBhrD,EAAMkqD,oBAAoB14B,eAE9C,CAACxxB,EAAMkqD,sBAGX,IAAMgB,EAAgC,eAAAjpD,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAG,SAAAyG,IAAA,OAAAlQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACrC7I,EAAS0M,EAAemjB,2BACpBvxB,EAAMwgB,QACNxgB,EAAMkqD,oBAAoB74B,SAC1BG,EACiB,SAAjBA,GAA2By5B,EAA2BjB,QAChDiB,EAA2BjB,QAASK,uBACpCxsD,IAP2B,wBAAAqQ,EAAAI,SAAA4P,EAAA7f,SAAH,yBAAA4D,EAAAyH,MAAArL,KAAAe,YAAA,GA2CtC,OAAQxC,GAAA,cAAAA,GAAA,cACJA,GAAA,cAACqpB,GAAA,EAAD,CAAW7C,MAAO,CAAEhC,OAAQ,UACxBxkB,GAAA,cAACuuD,GAAA,EAAD,CACIpH,QAAS,CACL,CAAEnlD,IAAK,OAAQC,MAAO,OAAQkoB,KAAM,QACpC,CAAEnoB,IAAK,MAAOC,MAAO,MAAOkoB,KAAM,OAClC,CAAEnoB,IAAK,OAAQC,MAAO,OAAQkoB,KAAM,SAExCloB,MAAO2yB,EACP7N,SAAU,SAACjN,EAAOxY,GAAR,OAAiB8sD,EAAgB9sD,EAAKW,UAElC,SAAjB2yB,GACG50B,GAAA,cAACwuD,GAAD,CACIpE,IAAKiE,EACLf,oBAAqBlqD,EAAMkqD,uBAItClqD,EAAMkqD,oBAAoBz4B,gBACvB70B,GAAA,mBAAGk1C,KAAM,IAAK/0C,QAnDa,SAACrE,GAChCA,EAAEm5C,iBACF,IACI,IAAMwZ,EAA6B,SAAjB75B,GAA2By5B,EAA2BjB,QAClEiB,EAA2BjB,QAASK,uBACpCxsD,EAEN,IAAIwtD,EACA,OAGJ,IAAMC,EAAepkD,KAAK2gD,MAAMwD,GAC1BE,EAAcrkD,KAAKC,UHrDS,SAAjCqkD,EAAkCvE,EAAoBC,GAC/D,IAAIuE,EAAmB,GAOvB,KANAxE,EAAS57C,SAAQ47C,IAEL9lD,MAAQ8lD,EAAOyE,MAAQxE,IAC/BD,EAAM9oD,OAAA2N,GAAA,EAAA3N,CAAA,GAAO4oD,GAAWE,EAAOyE,KAAMzE,EAAQC,MAG5CD,EAAO9lD,OAAS8lD,EAAO0E,KAExB,MAAO,CAAExqD,KAAM,UAGnB,GAAI8lD,EAAO0E,MAAQziD,MAAMoC,QAAQ27C,EAAO0E,MACpC,OAAO1E,EAAO0E,KAAKC,KAAK,KAG5B,GAAI1iD,MAAMoC,QAAQ27C,EAAO9lD,MAAO,KAAAuN,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IAC5B,QAAAiR,EAAAD,EAAmBo4C,EAAO9lD,KAA1BkJ,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAAgC,KAArBvN,EAAqB2N,EAAAjQ,MAE5B,GAA2B,SAAvBsC,EAAKkvC,cAA0B,CAC/B4W,EAAO9lD,KAAOA,EACd,QALoB,MAAAwJ,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,IAUhC,OAAQq4C,EAAO9lD,KAAKkvC,eAChB,IAAK,SACD,MAAO,SACX,IAAK,SAEL,IAAK,UACD,OAAO,EACX,IAAK,UACD,OAAO,EACX,IAAK,QACD,MAAO,CACHmb,EAA+BvE,EAAO4E,OAAS,GAAI3E,IAE3D,IAAK,SAUD,OATAuE,EAAc,GACVxE,EAAO6E,aACP7E,EAAO6E,WAAa,IAGxB3tD,OAAOtF,KAAKouD,EAAO6E,YAAYlrD,QAAQ,SAAAmrD,GACnCN,EAAYM,GAAQP,EAA+BvE,EAAO6E,WAAWC,GAAO7E,KAGzEuE,EACX,QACI,MAAO,WGC4BD,CAA+BF,GAAe,KAAM,GAEvFtrD,EAAMgsD,oBAAoBT,GAE1BpoD,OAAOs8B,WAAW,WACd/9B,EAAS0M,EAAemjB,2BACpBvxB,EAAMwgB,QACNxgB,EAAMkqD,oBAAoB74B,SAC1BG,EACA65B,GACA,KAEL,KACL,MAAO3yD,GAGL,YADAmB,QAAQF,MAAMjB,MAyBTsH,EAAMkB,EAAE,8BAIjBtE,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAMnnB,QAASmuD,EAAkChmC,QAASllB,EAAMkB,EAAE,iBAAkBw2C,QAAQ,UAC7G96C,GAAA,cAAConB,GAAA,EAAD,CAAQjnB,QAASiD,EAAMqB,QAAS6jB,QAASllB,EAAMkB,EAAE,iBAAkBw2C,QAAQ,wBCtGtEuU,GAAsD,CAC/DC,aAAc,CACVx1C,MAAO,UACPK,QAAS,UACT1K,KAAM,UACN8/C,WAAY,UACZjG,UAAW,UACX9qD,SAAU,UACV+qD,OAAQ,UACRC,QAAS,UACTC,eAAgB,UAChBC,GAAI,UACJnsB,QAAS,UACTD,eAAgB,UAChBmD,KAAM,UACN+uB,SAAU,YCwEHC,GAxEE,SAACrsD,GACd,IAAIqxC,EAMJ,OAJkB,WAAfrxC,EAAMqxC,OACLA,EAAOrxC,EAAMqxC,MAAQ,SAGjBrxC,EAAMqxB,UACV,KAAKyL,GAAgBpmB,MACrB,KAAKomB,GAAgB/lB,QACrB,KAAK+lB,GAAgBzwB,KACrB,KAAKywB,GAAgBqvB,WACrB,KAAKrvB,GAAgBopB,UACrB,KAAKppB,GAAgB1hC,SACrB,KAAK0hC,GAAgBqpB,OACrB,KAAKrpB,GAAgBspB,QACrB,KAAKtpB,GAAgBupB,eACrB,KAAKvpB,GAAgBwpB,GACjB,OAAO1pD,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,cAAcmsC,KAAMA,EAAMjuB,MAAO,CAACuvB,MAAOsZ,GAAQC,aAAalsD,EAAMqxB,WAAYh0B,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,YAC3I,KAAKuY,GAAgBpW,KACjB,OAAO9pB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQmsC,KAAMA,EAAMh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,YAC/E,KAAKuY,GAAgBla,MACjB,OAAOhmB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQmsC,KAAMA,EAAMh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,YAC/E,KAAKuY,GAAgB3C,QACjB,OAAOv9B,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAASmsC,KAAMA,EAAMjuB,MAAO,CAACkpC,MAAOL,GAAQC,aAAa/xB,SAAU98B,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,WACtH3nB,GAAA,sBAAMwmB,MAAO,CACT5lB,SAAU,WACV+sD,UAAWlZ,EAAM,SAAW,SAC5BsF,WAAY,UACZ4V,WAAY,aACZ3Z,SAAU,QACVD,MAAO,UANX,MASR,KAAK7V,GAAgB5C,eACjB,OAAOt9B,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAASmsC,KAAMA,EAAMjuB,MAAO,CAACkpC,MAAOL,GAAQC,aAAa/xB,SAAU98B,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,WACtH3nB,GAAA,sBAAMwmB,MAAO,CACT5lB,SAAU,WACV+sD,UAAWlZ,EAAM,SAAW,SAC5BsF,WAAY,UACZ4V,WAAY,aACZ3Z,SAAU,QACVD,MAAO,UANX,MASR,KAAK7V,GAAgBC,SACjB,OAAOngC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,UAAUmsC,KAAMA,EAAMjuB,MAAO,CAACwvB,SAAU,UAAWv1C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,YAC9G,KAAKuY,GAAgBO,KACjB,OAAOzgC,GAAA,cAACw1C,GAAA,EAAD,CAAMf,KAAMA,EAAMh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,WAAW3nB,GAAA,qBACrEwmB,MAAO,CAACjC,MAAO,MAAOC,OAAQ,OAC9BgB,IAAG,qJAAAlf,OAAuJspD,mBAAmBP,GAAQC,aAAa7uB,MAA/L,mRAEX,KAAKP,GAAgBsvB,SACjB,OAAOxvD,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAASmsC,KAAMA,EAAMjuB,MAAO,CAACuvB,MAAOsZ,GAAQC,aAAaE,UAAW/uD,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,WACvH3nB,GAAA,sBAAMwmB,MAAO,CACT5lB,SAAU,WACV+sD,UAAW,SACX5T,WAAY,UACZ4V,WAAY,aACZ5Z,MAAO,UACPC,SAAU,UANd,MAWR,KAAK9V,GAAgBypB,SACjB,OAAO3pD,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,eAAemsC,KAAMA,EAAMh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,YACtF,QACI,OAAO3nB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAASmsC,KAAMA,EAAMh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,cClElFkoC,GAAU,SAACp7B,GACb,OAAOA,IAAatU,GAASmd,gBAAkB7I,IAAatU,GAASod,SAOnEuyB,GAAS,SAACr7B,GACZ,OAAQo7B,GAAQp7B,KALG,SAACA,GACpB,OAAOA,IAAatU,GAASwpC,UAAYl1B,IAAatU,GAAS6F,OAASyO,IAAatU,GAAS2J,KAIhEimC,CAAet7B,IA2ElC9vB,kBAxEc,SAACvB,GAC1B,IAAI4sD,GAAU,EAERC,EAAW7sD,EAAM8sD,qBAClBC,KAAK,SAAC/rD,EAAGg5B,GACN,OAAG0yB,GAAO1rD,EAAEqwB,YAAcq7B,GAAO1yB,EAAE3I,UAC5BrwB,EAAEqwB,SAAW2I,EAAE3I,UACN,EAGTrwB,EAAEqwB,SAAW2I,EAAE3I,SACP,EAGJ,EAGRq7B,GAAO1rD,EAAEqwB,WACA,EAGTq7B,GAAO1yB,EAAE3I,UACD,EAGRo7B,GAAQzrD,EAAEqwB,WACD,EAGTo7B,GAAQzyB,EAAE3I,UACF,EAGRrwB,EAAEqwB,WAAatU,GAASwpC,UACf,EAGTvsB,EAAE3I,WAAatU,GAASwpC,SAChB,EAGJ,IAEVx5C,IAAI,SAACkqB,GACF,IAAMxE,EAASzyB,EAAMgtD,eAAiBhtD,EAAMgtD,iBAAmB/1B,EAAe5F,SAAWu7B,EAOzF,OALI5sD,EAAMgtD,gBAAkBJ,GACxB5sD,EAAMitD,oBAAoBh2B,EAAe5F,UAG7Cu7B,GAAU,EAENhwD,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CACIloB,IAAKq4B,EAAe5F,SACpB5K,GAAG,IAAIgM,OAAQA,EACf11B,QAAS,WAAOiD,EAAMitD,oBAAoBh2B,EAAe5F,YAEzDz0B,GAAA,cAACswD,GAAD,CAAU77B,SAAU4F,EAAe5F,SAA6BggB,KAAK,UACrEz0C,GAAA,cAACuS,GAAA,EAAKwT,QAAN,KAAe3iB,EAAMkB,EAAE,mBAAqB+1B,EAAe5F,cAItE9V,eACAlF,UAEL,OACIzZ,GAAA,cAACuS,GAAA,EAAD,CAAM8gB,MAAM,GACP48B,KCvBEjD,iBAxDmB,SAAC5pD,EAAuCgnD,GACtE,IAAM8C,EAAgBC,kBAAwB,MAExCoD,EAA2B,SAACtuD,GAC9BirD,EAAcE,QAASC,gBAAgB,CACnCnC,OAAM,SAAA5kD,OAAWlD,EAAMkqD,oBAAoB1pC,QAArC,YAAAtd,OAAuDlD,EAAMkqD,oBAAoB74B,SAAjF,SACN22B,SAAUhoD,EAAMkqD,oBAAoB14B,aACpC3yB,QACAooD,OAAQjnD,EAAMkqD,oBAAoBz4B,qBAAkB5zB,KA4B5D,OAxBAb,qBACI,WACImwD,EAAyBntD,EAAMkqD,oBAAoB54B,UAEnDw4B,EAAcE,QAAStB,WAEnBvB,KAASiG,OAAOC,QAAUlG,KAASmG,QAAQC,MAC3CvtD,EAAMwtD,SAGd,CACIxtD,EAAMkqD,oBAAoB1pC,QAC1BxgB,EAAMkqD,oBAAoB74B,SAC1BrxB,EAAMkqD,oBAAoB14B,aAC1BxxB,EAAMkqD,oBAAoB54B,SAC1BtxB,EAAMkqD,oBAAoBz4B,iBAIlC24B,+BAAgFpD,EAAK,iBAAO,CACxFqD,gBAAiB,kBAAcP,EAAcE,QAASK,mBACtDoD,iBAAkB,SAAC5uD,GAAD,OAAyBsuD,EAAyBtuD,OAIpEjC,GAAA,cAAC0tD,GAAD,CACItD,IAAK8C,EACL1mC,MAAO,CAAEhC,OAAQ,QAASD,MAAO,QACjC4iC,QAAS,CACLnR,SAAU,GACV4X,SAAS,EACTC,aAAa,EACbC,YAAa,MACbC,qBAAsB,EACtBC,QAAS,CACLC,SAAS,GAEbC,eAAe,EACfC,sBAAsB,OC+JvBxpD,kBAzMc,SAACvB,GAC1B,IAAM0B,EAAW0jB,yBAD8C9D,EAEnBC,sBAFmBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAExD0rC,EAFwDxrC,EAAA,GAExCksC,EAFwClsC,EAAA,GAAAG,EAGPJ,qBAAkB,GAHXK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGxDgsC,EAHwD/rC,EAAA,GAGlCgsC,EAHkChsC,EAAA,GAIzDkrC,EAAuBlnC,uBAAY+gC,GAAmC3mD,EAAMwgB,UAC5EC,EAAQmF,uBAAY6oB,GAAsBzuC,EAAMwgB,UAChDqtC,EAA0B9D,kBAA0C,MACpE+D,EAAW/D,kBAAyB,MAPqBhoC,EAQzBR,qBAAS,GARgBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAQxDgsC,EARwD/rC,EAAA,GAQ3CgsC,EAR2ChsC,EAAA,GAU/DhlB,qBAAU,WACN0E,EAAS0M,EAAa+iB,0BAA0BnxB,EAAMwgB,WACvD,IAEH,IAAMytC,EAAuB,WACzB,GAAKjB,GAIDa,GAA2BA,EAAwB7D,QAAS,CAC5D,IAAMyB,EAAcoC,EAAwB7D,QAAQK,kBAEpD,GAA+D,SAA3DyC,EAAqB93C,IAAIg4C,GAAiBx7B,aAC1C,IACItqB,KAAK2gD,MAAM4D,GACb,MAAAyC,GAKE,YAJAxsD,EAAS1C,EAAerF,MACpBqG,EAAMkB,EAAE,mDACRlB,EAAMkB,EAAE,oDAMpBQ,EAAS0M,EAAegjB,kBAAkBpxB,EAAMwgB,QAASwsC,EAAgBvB,MA0GjF,OACI7uD,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,qBAAK2nB,UAAU,cACX3nB,GAAA,cAACgqB,GAAA,EAAD,CAAUnc,MAAM,EAAMic,KAAK,oBAAoBtD,MAAO,CAAC+qC,MAAO,QAAS5D,UAAW,OAAQ3X,SAAU,WAChGh2C,GAAA,cAACgqB,GAAA,EAASC,KAAV,CAAeunC,UAAU,QACrBxxD,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,WAAWK,KAAK,mBAAmBhqB,QAjEnD,WACjB+wD,EAAS9D,SACR8D,EAAS9D,QAAQqE,WAgELzxD,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,SAASK,KAAK,mBAAmBhqB,QAxF/C,WACtB,IAAMuxD,EAAepnD,KAAKC,UAAU2lD,EAAqB//C,IAAI,SAAAwhD,GAAG,MAAK,CACjE/8B,aAAc+8B,EAAI/8B,aAClBF,SAAUi9B,EAAIj9B,SACdG,eAAgB88B,EAAI98B,kBACnB,KAAM,GAEL+8B,EAAW,IAAIC,KAAK,CAACH,GAAe,CAACntD,KAAM,qBAC3C4F,EAAMic,IAAIC,gBAAgBurC,GAE1BxtD,EAAI5F,SAAS6F,cAAc,KACjCD,EAAE0tD,SAAWjuC,EAAMvb,KAAO,uBAC1BlE,EAAE8wC,KAAO/qC,EACT3L,SAAS47C,KAAK7uB,OAAOnnB,GACrBA,EAAEqtD,QAEFlrD,OAAOs8B,WAAW,WACdz+B,EAAEkV,SACF8M,IAAI2rC,gBAAgB5nD,IACrB,UAwEKnK,GAAA,oBAAI2nB,UAAU,aACTvkB,EAAMkB,EAAE,wCACTtE,GAAA,cAACg7C,GAAA52C,EAAD,KAAkBhB,EAAMkB,EAAE,6CAE9BtE,GAAA,+BACAA,GAAA,cAACspB,GAAA,EAAD,CAAM0oC,QAAS,GACXhyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,IAAIC,OAAO,IAAIC,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,KACvElyD,GAAA,cAACmyD,GAAD,CACIjC,qBAAsBA,EACtBE,eAAgBA,EAChBC,oBAAqBS,KAG5BV,GACGpwD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,KAAK1rC,MAAO,CAAC4rC,WAAY,uBAClGrB,GAAyB/wD,GAAA,cAAAA,GAAA,cACvBA,GAAA,cAACqyD,GAAD,CACIjI,IAAK6G,EACL3D,oBAAqB4C,EAAqB93C,IAAIg4C,GAC9CQ,OAAQS,IAEZrxD,GAAA,+BACAA,GAAA,mBAAGk1C,KAAM,IAAK/0C,QArIL,SAACrE,GAClCA,EAAEm5C,iBACF+b,GAAwB,KAoIK5tD,EAAMkB,EAAE,gDAEbtE,GAAA,cAAConB,GAAA,EAAD,CACIE,SAAS,EACTnnB,QAASkxD,EACT/oC,QAASllB,EAAMkB,EAAE,iBACjBw2C,QAAQ,WAGfiW,GACG/wD,GAAA,cAACsyD,GAAD,CACI1uC,QAASxgB,EAAMwgB,QACf0pC,oBAAqB4C,EAAqB93C,IAAIg4C,GAC9C3rD,QAAS,kBAAMusD,GAAwB,IACvC5B,oBA/IA,SAACT,GACxByB,IAILY,GAAwB,GACxBlsD,EAAS0M,EAAegjB,kBAAkBpxB,EAAMwgB,QAASwsC,EAAgBzB,IAEzEpoD,OAAOs8B,WAAW,WACXouB,EAAwB7D,SACvB6D,EAAwB7D,QAAQyD,iBAAiBlC,IAEtD,QAsIiB3uD,GAAA,cAACuyD,GAAA,EAAD,CAAQC,UAAU,EAAM38B,OAAQs7B,GAC5BnxD,GAAA,cAACyyD,GAAA,EAAD,CAAQD,UAAU,GAAlB,gBAKhBxyD,GAAA,uBAAOuE,KAAK,OAAO6lD,IAAK8G,EAAU1qC,MAAO,CAAC2uB,QAAS,QAASpuB,SA7G7C,SAACjrB,GACxB,IAAMmN,EAAOnN,EAAE8kC,OAAO8xB,MAAO,IAAM,KAEnCrL,GAASp+C,GAAMjK,KAAK,SAAA0yD,GAChB,IAAIiB,EACJ,IACIA,EAAYroD,KAAK2gD,MAAMyG,GACzB,MAAAkB,GAKE,YAJA9tD,EAAS1C,EAAerF,MACpBqG,EAAMkB,EAAE,mDACRlB,EAAMkB,EAAE,oDAKhB,GAAwB,kBAAdquD,EAAV,CAYA,IAJA,IAAME,EAAYtxD,OAAOtF,KAAKi0D,EAAqBr9B,UAC7CigC,EAAevxD,OAAOtF,KAAK02D,GAC3BI,EAA4B,GAElCvmD,EAAA,EAAAA,EAA0BsmD,EAA1BrwD,OAAA+J,IAAwC,CAAnC,IAAMwmD,EAAeF,EAAJtmD,GAClB,IAAIqmD,EAAU5uD,SAAS+uD,GAKnB,YAJAluD,EAAS1C,EAAerF,MACpB,8BACAqG,EAAMkB,EAAE,oCAAsC0uD,KAKtD,IAAI34B,EAAiB8uB,GAAgC/lD,EAAMwgB,QAASovC,EAAyBL,EAAUK,GAAat+B,UAAY,IAChI2F,EAAiBA,EAAe+zB,gBAAgBuE,EAAUK,GAAap+B,cAAgB,QACpF+9B,EAAUK,GAAan+B,iBACtBwF,EAAiBA,EAAe44B,kBAAkBN,EAAUK,GAAan+B,iBAG7Ek+B,EAA0B7uD,KAAKm2B,GAGnC+2B,GAAe,GACftsD,EAAS0M,EAAesmB,sBAAsB10B,EAAMwgB,QAASrR,gBAAKwgD,GAA4B,WAC1F3B,GAAe,WA/BftsD,EAAS1C,EAAerF,MACpB,8BACAqG,EAAMkB,EAAE,6ECzFbK,ICKAA,eA3BO,SAACvB,GACnB,IAAM0B,EAAW0jB,yBADgC9D,EAEOC,sBAFPC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE1CwuC,EAF0CtuC,EAAA,GAEpBuuC,EAFoBvuC,EAAA,GAI3CuiC,EAAU/jD,EAAMmY,cAAcpL,IAAI,SAAAq5B,GAAI,MAAK,CAC7CxnC,IAAKwnC,EAAKxoC,IACViB,MAAOunC,EAAKxoC,IACZmpB,KAAMqf,EAAK7wB,oBAUf,OAAO3Y,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACuuD,GAAA,EAAD,CAAQpH,QAASA,EAAQlsC,OACjB+M,YAAa5kB,EAAMkB,EAAE,0CACrByiB,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa6xD,EAAwB7xD,EAAKW,UAE5DjC,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAMwzB,QAAQ,QAAQ36C,QAAS,WAX7C+yD,IACCpuD,EAAS0M,EAAesjB,4BAA4Bo+B,EAAsB9vD,EAAMwgB,UAChFuvC,OAAwBlyD,MAS8CmC,EAAMkB,EAAE,2CAClFtE,GAAA,cAACooB,GAAA,EAAD,CAASqsB,KAAK,QAAQnyC,MAAM,GAAOc,EAAMkB,EAAE,4CDDpCK,eAAiB6iB,qBAAiD,CAACC,KvFvCnD,iBuFuCCD,CAVV,SAACpkB,GAAD,OAA+Be,GAAAC,EAAAC,cAAA,QAAMsjB,UAAU,UAAUC,SAAUxkB,EAAMykB,cAC3F1jB,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,SAASnB,MAAO,CAAC8/B,OAAO,MACnCniD,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,gBACfxjB,GAAAC,EAAAC,cAACyjB,GAAA,MAAD,CAAOxf,KAAK,OAAOyf,UAAU,QAAQxjB,KAAK,OAAOyjB,YAAa5kB,EAAMkB,EAAE,iCAEtEH,GAAAC,EAAAC,cAAC+iB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASojB,UAAU,kBAAkBvkB,EAAMkB,EAAE,oBACzEH,GAAAC,EAAAC,cAAC4jB,GAAA,KAAD,CAAMC,GAAIziB,GAAWkiB,UAAU,4BAA4BvkB,EAAMkB,EAAE,0BE3BrEf,GAAkB+wC,GAAcnC,+BAavBxtC,kBAAiB4jB,aAA2B3jB,aACvDC,mBAAQtB,GAZe,SAACuB,GAAD,OAAwBC,8BAC/C,CACIwsB,YAAatsB,EAAQssB,YACrB4F,mBAAoBlyB,EAAQkyB,mBAC5BzT,YAAaze,EAAQye,YACrB0vC,cAAenuD,EAAQmyB,mBACvBzF,WAAY1sB,EAAQ0sB,YAExB7sB,KAKAK,aAAU,IAF6CP,CCwClC,SAACxB,GAEtB,IAAM0B,EAAW0jB,yBACX5E,EAAUxgB,EAAMygB,MAAQzgB,EAAMygB,MAAM7iB,SAAMC,EAC1C6P,EAAqBkY,uBAAYogB,MACjCrgB,EAAcC,uBAAYrN,MAC1BJ,EAAgByN,uBAAYkgB,GAAqCngB,EAAY/nB,MAanF,GAXAZ,qBACI,WACQgD,EAAMygB,QACN/e,EAASkuB,GAA8B5vB,EAAMygB,MAAM7iB,MACnD8D,EAASmuB,GAA8B7vB,EAAMygB,MAAM7iB,MACnD8D,EAASouB,GAA0B9vB,EAAMygB,MAAM7iB,QAGvD,CAAC4iB,KAGDxgB,EAAMygB,MAEN,OADA/e,EAAS2tB,GAAervB,EAAMqI,MAAMkmC,OAAO3wC,MACpChB,GAAA,cAACuyD,GAAA,EAAD,CAAQ5qC,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,kBAGpC,IAAM4e,GAAsBviD,IAAuBA,EAAmB+H,qBAChEy6C,EAA2BD,EAAoB93C,EAAcxX,OAAO,SAAAylC,GAAI,OAAIA,EAAK3wB,uBAAyB2wB,EAAKzwB,cAAexG,kBAC7G8gD,IACfjwD,EAAMygB,MAAM7N,cACbs9C,EAAyB13C,QAEhC,OAAO5b,GAAA,cAACqpB,GAAA,EAAD,KACPrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,EAAMotB,QAAQ,GAC/B32C,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAKC,MAAM,EAAMC,UAAU,UACtC/pB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,aACXtI,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,KACM3iB,EAAMkB,EAAE,mBAAmBoH,QAAQ,SAAUtI,EAAMygB,MAAMvb,MAC3DtI,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,KAAoBpnB,EAAMkB,EAAE,+BAKxCtE,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC/ElyD,GAAA,qBAAK2nB,UAAU,eACX3nB,GAAA,qBAAK2nB,UAAU,cACf3nB,GAAA,cAACuzD,GAAD,CAAe7oC,cAAepnB,kBAAO,CAACgF,KAAMlF,EAAMygB,MAAMvb,OAAQsf,SAAU,SAACtmB,IA7DpE,SAACA,EAAkB8B,GAClC,IAAMygB,EAAQzgB,EAAMygB,MAAOqF,MAAM5nB,EAAK2Z,QACtC7X,EAAMmuB,YAAY1N,GAClBzgB,EAAMwnB,QAAQlf,QAAQmf,IA0DuEC,CAAWxpB,EAAM8B,OAEtGpD,GAAA,qBAAK2nB,UAAU,eACTvkB,EAAMygB,MAAMoX,YACdj7B,GAAA,cAACooB,GAAA,EAAD,KACKhlB,EAAMkB,EAAE,0BAA0BtE,GAAA,mBAAGk1C,KAAK,IAAI/0C,QAAS,SAAArE,GAAMA,EAAEm5C,iBAAkBn5C,EAAEwuB,kBAAmBlnB,EAAM+zB,mBAAmB/zB,EAAMygB,MAAO7iB,OAAQoC,EAAMkB,EAAE,2BAA+BlB,EAAMkB,EAAE,2BAGvMlB,EAAMygB,MAAMoX,YACbj7B,GAAA,cAACwzD,GAAD,CACIliC,UAAWluB,EAAMygB,MAAMvb,KACvBoiB,cAAepnB,kBAAO,CAAC80C,cAAe,GAAIp3C,IAAKoC,EAAMygB,MAAM7iB,MAC3DsD,EAAGlB,EAAMkB,EACTsjB,SAAU,SAACtmB,IApED,SAACA,EAA0B8B,GACrDA,EAAMsgB,YAAYpiB,EAAK8W,IAAI,QAC3BhV,EAAMwnB,QAAQlf,QAAQmf,IAkEe4oC,CAAsBnyD,EAAM8B,IACjDo1C,SAAU,kBAAMp1C,EAAMgwD,cAAchwD,EAAMygB,MAAO7iB,aAMhE,EAgBDhB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC1E9uD,EAAMygB,OAAS7jB,GAAA,cAAC0zD,GAAD,CAAsB9vC,QAASxgB,EAAMygB,MAAM7iB,SAGlE,GAgBA,+DfrKC2yD,qDACMC,qBACAC,mBAA0C,yDAElC/8B,GACZr1B,KAAKmyD,SAAW98B,EAEbA,GACCr1B,KAAKoyD,mBAAmB7vD,QAAQ,SAAAi9B,GAAQ,OAAInK,EAAMg9B,mBAAmB7yB,KAGzEx/B,KAAKoyD,mBAAqB,6CAI1B,OAAGpyD,KAAKmyD,SACGnyD,KAAKmyD,SAAS7yB,kBAGlB,gDAIP,OAAGt/B,KAAKmyD,SACGnyD,KAAKmyD,SAAS5yB,sBAGlB,CAAC3c,EAAG,EAAGC,EAAG,qCAGJ2c,GACVx/B,KAAKmyD,UACJnyD,KAAKmyD,SAAS1yB,UAAUD,sCAIdA,GACXx/B,KAAKmyD,UACJnyD,KAAKmyD,SAASzyB,WAAWF,+CAIN5c,EAAWC,GAClC,OAAG7iB,KAAKmyD,SACGnyD,KAAKmyD,SAASxyB,oBAAoB/c,EAAGC,GAGzC,CAACD,IAAGC,oCAGD2c,GACPx/B,KAAKmyD,UACJnyD,KAAKmyD,SAASvyB,OAAOJ,mCAIdA,GACRx/B,KAAKmyD,UACJnyD,KAAKmyD,SAAStyB,QAAQL,qCAK1B,OAAOx/B,KAAKmyD,SAAUnyD,KAAKmyD,SAASnyB,UAAY,IAAIgF,8CAIjDhlC,KAAKmyD,UACJnyD,KAAKmyD,SAASG,yDAKftyD,KAAKmyD,UACJnyD,KAAKmyD,SAAShyB,sEAKlB,QAAOngC,KAAKmyD,UAAUnyD,KAAKmyD,SAAS3wB,kEAGvBrG,GACb,QAAOn7B,KAAKmyD,UAAUnyD,KAAKmyD,SAAS7xB,UAAUnF,0CAG5BA,EAAYrH,GAC3B9zB,KAAKmyD,UACJnyD,KAAKmyD,SAASI,eAAep3B,EAAMrH,qDAKpC9zB,KAAKmyD,UACJnyD,KAAKmyD,SAASK,2DAINr3B,GACZ,QAAOn7B,KAAKmyD,UAAUnyD,KAAKmyD,SAASM,SAASt3B,qCAGhCA,EAAY4G,GACtB/hC,KAAKmyD,UACJnyD,KAAKmyD,SAASO,UAAUv3B,EAAM4G,yCAIjB5G,GACdn7B,KAAKmyD,UACJnyD,KAAKmyD,SAASQ,cAAcx3B,oCAIpBt0B,GACT7G,KAAKmyD,UACJnyD,KAAKmyD,SAASS,SAAS/rD,uCAIZs0B,GACZn7B,KAAKmyD,UACJnyD,KAAKmyD,SAASU,YAAY13B,yCAIbA,GACjB,QAAOn7B,KAAKmyD,UAAUnyD,KAAKmyD,SAAS3vB,cAAcrH,4CAG9BA,GACpB,GAAGn7B,KAAKmyD,SACJ,OAAOnyD,KAAKmyD,SAASW,iBAAiB33B,qDAKvCn7B,KAAKmyD,UACJnyD,KAAKmyD,SAASY,iEAIA53B,GACfn7B,KAAKmyD,UACJnyD,KAAKmyD,SAASa,eAAe73B,0CAIfA,EAAY5oB,GAC3BvS,KAAKmyD,UACJnyD,KAAKmyD,SAASc,eAAe93B,EAAM5oB,wDAKvC,QAAGvS,KAAKmyD,UACGnyD,KAAKmyD,SAASe,yEAOzB,OAAGlzD,KAAKmyD,SACGnyD,KAAKmyD,SAASgB,oBAGlB,8CAGe3zB,GACtBx/B,KAAKoyD,mBAAmB3vD,KAAK+8B,GAC1Bx/B,KAAKmyD,UACJnyD,KAAKmyD,SAASE,mBAAmB7yB,6CAIhBqF,GAClB7kC,KAAKmyD,UACJnyD,KAAKmyD,SAASrtB,kBAAkBD,mCAKjC7kC,KAAKmyD,UACJnyD,KAAKmyD,SAASh9B,iBAOnB,SAASi+B,KAKZ,OAJI/K,KACAA,GAAe,IAAI6J,IAGhB,CAAC7J,GAAc,SAAChzB,GAA+BgzB,GAAcgL,SAASh+B,eCzMrE7xB,oECAAC,uIcOL,IA2HH6vD,GAIAC,GACAC,GAohBQC,GAppBCC,GAAqB,wDAgB5BC,GAAoB,SAACC,EAAmBC,GAAqB,IAAAC,EAAAC,EAAAC,EAAAC,EACzDC,EAA4B,kBAAbN,EAAIM,KAAoB,CAACN,EAAIM,MAAQN,EAAIM,KACxDC,EAAkC,kBAAhBP,EAAIO,QAAuB,CAACP,EAAIO,SAAWP,EAAIO,QAGvE,OAFaP,EAAI9wD,KAAM8wD,EAAI9wD,KAAO2wD,GAAiBW,MAG/C,KAAKX,GAAiBW,KAMF,IAAAC,EAAhB,GALmB,IAAhBH,EAAKlzD,SACJkzD,EAAK,GAAK,KAAKA,EAAK,GACpBA,EAAKzxD,KAAK,sCAEdqxD,EAAAt4D,SAAQqF,KAARwK,MAAAyoD,EAAA,CAAa,mBAASD,EAAS,MAAMK,EAAK,GAAI,kBAA9CrvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAmEo0D,EAAKI,MAAM,MAC3EV,EAAIO,SACHE,EAAA74D,SAAQC,IAAR4P,MAAAgpD,EAAA,CAAY,mBAASR,EAAS,MAAMM,EAAQ,GAAI,kBAAhDtvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAqEq0D,EAAQG,MAAM,MAEvF,MACJ,KAAKb,GAAiBn5D,MAMF,IAAAi6D,EAAhB,GALmB,IAAhBL,EAAKlzD,SACJkzD,EAAK,GAAK,KAAKA,EAAK,GACpBA,EAAKzxD,KAAK,6CAEdsxD,EAAAv4D,SAAQF,MAAR+P,MAAA0oD,EAAA,CAAc,mBAASF,EAAS,MAAMK,EAAK,GAAI,kBAA/CrvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAoEo0D,EAAKI,MAAM,MAC5EV,EAAIO,SACHI,EAAA/4D,SAAQF,MAAR+P,MAAAkpD,EAAA,CAAc,mBAASV,EAAS,MAAMM,EAAQ,GAAI,kBAAlDtvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAuEq0D,EAAQG,MAAM,MAEzF,MACJ,KAAKb,GAAiBe,QACtB,KAAKf,GAAiBgB,SAMF,IAAAC,EAAhB,GALmB,IAAhBR,EAAKlzD,SACJkzD,EAAK,GAAK,KAAKA,EAAK,GACpBA,EAAKzxD,KAAK,uBAEduxD,EAAAx4D,SAAQoxC,KAARvhC,MAAA2oD,EAAA,CAAa,mBAASH,EAAS,MAAMK,EAAK,GAAI,kBAA9CrvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAmEo0D,EAAKI,MAAM,MAC3EV,EAAIO,SACHO,EAAAl5D,SAAQoxC,KAARvhC,MAAAqpD,EAAA,CAAa,mBAASb,EAAS,MAAMM,EAAQ,GAAI,kBAAjDtvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAsEq0D,EAAQG,MAAM,MAExF,MACJ,KAAKb,GAAiBkB,aAClBn5D,QAAQoxC,KAAK,mBAASinB,EAAS,6FAC/B,MACJ,QAEoB,IAAAe,EAAhB,IADAX,EAAAz4D,SAAQC,IAAR4P,MAAA4oD,EAAA,CAAY,mBAASJ,EAAS,MAAMK,EAAK,GAAI,kBAA7CrvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAkEo0D,EAAKI,MAAM,MAC1EV,EAAIO,SACHS,EAAAp5D,SAAQC,IAAR4P,MAAAupD,EAAA,CAAY,mBAASf,EAAS,MAAMM,EAAQ,GAAI,kBAAhDtvD,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAAqEq0D,EAAQG,MAAM,QAK7FO,GAAa,SAACv5D,GAChBE,QAAQF,MAAMA,IAGZw5D,GAAe,SAACloB,GAClBpxC,QAAQoxC,KAAKA,IA+BXmoB,GAA8B,SAA9BA,EAA+B71B,EAAqB81B,EAAuBC,GAAgD,IAA3BC,EAA2Bn0D,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAZ,EACjHm+B,EAAQ38B,QAAQ,SAAA48B,GACZ,GAAG61B,EAAcltB,KAAK,SAAAqtB,GAAI,OAAIA,EAAKl5B,UAAYkD,EAAOlD,UAAU,CAC5D,IAAMm5B,EAAsBH,EAAYntB,KAAK,SAAAutB,GAAE,OAAIA,EAAGp5B,UAAYkD,EAAOlD,UAErEm5B,GAIAH,EAAYK,OAAOL,EAAYM,QAAQH,GAAsB,GAC7DH,EAAYxyD,KAAK08B,IAJjB81B,EAAYxyD,KAAK08B,KASzB+1B,EAEkB,KACdH,EAA4B51B,EAAO/B,aAAc43B,EAAeC,EAAaC,MAMrFM,GAAsB7B,GACtB8B,GAAeZ,GACfa,GAAiBZ,GAIf30B,GAA2B,SAA3BA,EAA4Bhe,EAAkB8Y,EAAO06B,EAA2BC,GAClF,GAAoB,IAAjB36B,EAAMj6B,OAEL,OADA00D,GAAe,gDACR,EAGX,GAA+B,qBAArBC,GAAoCrC,GAiB1C,OAhBGuC,GAAIC,YACHD,GAAIC,YAAYvzD,QAAQ,SAAA2xD,GACpBsB,GAAoB,CAChBtB,KAAM,uDACNC,QAAS,CAAC,oCAAqC,6CAC/CrxD,KAAM2wD,GAAiBe,SACxBN,EAAKrtD,QAGZ2uD,GAAoB,CAChBtB,KAAM,uDACNC,QAAS,CAAC,oCAAqC,6CAC/CrxD,KAAM2wD,GAAiBe,SACxB,SAGA,EAGX,GAAGqB,GAAIC,YAAa,CAChB,GAA+B,qBAArBH,EACNrC,GAAiB,CAACr4B,QAAO06B,iBAAkB,EAAGxzC,UAASyzC,mBAAoB,EAAGG,eAAe,GAE7F96B,EAxFM,SAACA,GACf,IAAMg6B,EAAsB,GAEtBe,EAA+B/6B,EAAM34B,OAAO,SAAA2zD,GAC9C,GAA8B,IAA3BA,EAAEh5B,aAAa9iB,QACd,OAAO,EAGX,IAAI+7C,GAA0B,EAQ9B,OANAD,EAAEh5B,aAAa16B,QAAQ,SAAA08B,GAChBhE,EAAM6M,KAAK,SAAAqtB,GAAI,OAAIA,EAAKl5B,UAAYgD,EAAOhD,YAC1Ci6B,GAA0B,KAI3BA,IASX,OANAjB,EAAYxyD,KAAZ4I,MAAA4pD,EAAWn1D,OAAAyZ,GAAA,EAAAzZ,CAASk2D,IAEpBA,EAA6BzzD,QAAQ,SAAA4zD,GACjCpB,GAA4BoB,EAAa/4B,aAAcnC,EAAOg6B,KAG3DA,EA+DSmB,CAAUn7B,GAElBkF,EAAYhe,EAAS8Y,EAAO,OACzB,CAC8B,qBAAvB26B,IACNA,EAAqB,GAGzB,IAAM1B,EAAO2B,GAAIC,YAAaF,GAE9B1B,EAAKv4D,MAAM2B,KAAKmG,GAAM4yD,cAAe,CAACl7B,KAAMa,GAAgBf,EAAM06B,MAAqBp4D,KACnF,SAAAq2D,GACI,GAAkB,MAAfA,EAAIp+C,OAAP,CAIA,IAAM8gD,EAAU1C,EAAI/zD,KACpB21D,GAAoBc,EAASpC,EAAKrtD,MAE/ByvD,EAAQxzD,OAAS2wD,GAAiBgB,UAC9B6B,EAAQxzD,OAAS2wD,GAAiB8C,aAClCD,EAAQxzD,OAAS2wD,GAAiBkB,cAClC2B,EAAQxzD,OAAS2wD,GAAiBn5D,UACrCs7D,EACyBC,GAAIC,YAAa90D,QACtCsyD,GAAgBsC,mBAAqBA,EACrCz1B,EAAYhe,EAAS8Y,EAAO06B,EAAkBC,KAE9CD,GAAuC,EACvCrC,GAAgBqC,iBAAmBA,EACnCrC,GAAgBsC,mBAAqB,EAElCD,EAAmB16B,EAAMj6B,QACxBm/B,EAAYhe,EAAS8Y,EAAO06B,EAAkB,KAKvDW,EAAQxzD,OAAS2wD,GAAiBkB,cAC9BpB,IACCA,MAIL+C,EAAQxzD,OAAS2wD,GAAiB8C,aAC9BD,EAAQxzD,OAAS2wD,GAAiBn5D,OACjCq7D,IAAsB16B,EAAMj6B,QAAU40D,IAAuBC,GAAIC,YAAa90D,QAAUs1D,EAAQxzD,OAAS2wD,GAAiBgB,YAC9HnB,QAAiB9zD,QAlCjBi2D,GAAa,yCAAA5wD,OAAyCqvD,EAAKrtD,KAA9C,MAAyDgC,KAAKC,UAAU8qD,KAqC7F,SAAA9qB,GACyB,kBAAXA,IAEFA,EAD0B,oBAApBA,EAAOhH,SACJgH,EAAOhH,WAEP,iBAIjB2zB,GAAa3sB,KAIzB,OAAO,EAIX,OADA2sB,GAAa/B,KACN,GAGEmC,GAAW,CACpBW,aAAc,WACV,QAAIX,GAAIC,aAIDD,GAAIC,YAAYxzD,OAAO,SAAAm0D,GAAM,OAAIA,EAAOC,OAAM11D,OAAS,GAElEoC,QAAS,CACLuzD,KAAM,SAACxL,EAAaplD,EAAc8tD,GAC1BA,IACAA,EAAW,QAGXgC,GAAIC,cACJD,GAAIC,YAAc,IAGtB,IAAMc,EAAmBf,GAAIC,YAAYxzD,OAAO,SAAA4xD,GAAI,OAAIA,EAAKrtD,OAASgtD,IAEhEgD,EAAa,CACfhwD,KAAMgtD,EACNl4D,MAAOA,KAAMC,OAAO,CAChBC,QAAUsvD,EAAM,eAEpBuL,MAAM,GA6BV,OA1BAE,EAAiBn0D,KAAKo0D,GAEtBhB,GAAIC,YAAcc,EAElBC,EAAWl7D,MAAM2B,KAAmBmG,GAAMqzD,aAAc,CAAC/wD,SAAOxI,KAC5D,SAAAq2D,GACsB,MAAfA,EAAIp+C,QAKPggD,GAAoB5B,EAAI/zD,KAAMg3D,EAAWhwD,MAEtC+sD,EAAI/zD,KAAKiD,OAAS2wD,GAAiBkB,cAC/BpB,KACCC,GAA8BoD,EAAiBrB,QAAQsB,GACvDtD,OATJkC,GAAa,yCAAA5wD,OAAyCgyD,EAAWhwD,KAApD,MAA+DgC,KAAKC,UAAU8qD,KAanG,SAAA9qB,GAAM,OAAI0sB,GAAoB,CAC1BtB,KAAM,gCACNC,QAAS,CAACrrB,GACVhmC,KAAM2wD,GAAiBn5D,OACxBu8D,EAAWhwD,SAEX,IAGfimC,WAAY,SAAC+mB,GACT,GAAGgC,GAAIC,YAAa,CAChB,GAAGjC,EAOC,OANAgC,GAAIC,YAAcD,GAAIC,YAAYxzD,OAAO,SAAA4xD,GAAI,OAAIA,EAAKrtD,OAASgtD,SAE/D2B,GAAoB,CAChBtB,KAAM,UACNpxD,KAAM2wD,GAAiBe,SACxBX,GAGPgC,GAAIC,iBAAct2D,EAClB8zD,QAAiB9zD,EACjBg2D,GAAsB7B,GACtB8B,GAAeZ,GACfa,GAAiBZ,KAGzBiC,MAAK,SAAAC,GAAA,SAAAD,EAAAE,GAAA,OAAAD,EAAA3rD,MAAArL,KAAAe,WAAA,OAAAg2D,EAAAj1B,SAAA,kBAAAk1B,EAAAl1B,YAAAi1B,EAAA,CAAE,SAACA,GACJ,GAAGzD,IAAkBuC,GAAIC,aAAeD,GAAIC,YAAYxC,GAAesC,oBAAqB,CACxF,IAAM1B,EAAO2B,GAAIC,YAAYxC,GAAesC,oBA6D5C,OA3DA1B,EAAKv4D,MAAM2B,KAAKmG,GAAMyzD,YAAa,CAACH,UAAQx5D,KACxC,SAAAq2D,GACI,GAAmB,MAAfA,EAAIp+C,OAAR,CAKA,IAAM8gD,EAAU1C,EAAI/zD,KAIpB,GAFA21D,GAAoBc,EAASpC,EAAKrtD,MAE9ByvD,EAAQxzD,OAAS2wD,GAAiBgB,UAClC6B,EAAQxzD,OAAS2wD,GAAiB8C,aAClCD,EAAQxzD,OAAS2wD,GAAiBn5D,OAASg5D,GAAgB,KAEpDr4B,EAASq4B,GAATr4B,MACF06B,EAAoBrC,GAApBqC,iBAECC,EAAqBtC,GAAesC,mBAAqB,EAC5DA,EAAsBC,GAAIC,YAAa90D,QACtCsyD,GAAgBsC,mBAAqBA,EACrCz1B,GAAYmzB,GAAenxC,QAAS8Y,EAAO06B,EAAkBC,KAE7DD,GAAuC,EACvCrC,GAAgBqC,iBAAmBA,EACnCrC,GAAgBsC,mBAAqB,EAElCD,EAAmB16B,EAAMj6B,OACxBm/B,GAAYmzB,GAAenxC,QAAS8Y,EAAO06B,EAAkB,GAG7DrC,GAAgBsC,mBAAqBA,IAM7CU,EAAQxzD,OAAS2wD,GAAiB8C,aAC/BD,EAAQxzD,OAAS2wD,GAAiBn5D,OACjCg5D,KACIA,GAAeqC,mBAAqBrC,GAAer4B,MAAMj6B,QAA0C,IAAhCsyD,GAAer4B,MAAMj6B,SACzFsyD,GAAesC,qBAAuBC,GAAIC,YAAa90D,UAE9DsyD,QAAiB9zD,QAxCjBi2D,GAAa,yCAAA5wD,OAAyCqvD,EAAKrtD,KAA9C,MAAyDgC,KAAKC,UAAU8qD,KA2C7F,SAAA9qB,GAC0B,kBAAXA,IAEHA,EAD2B,oBAApBA,EAAOhH,SACLgH,EAAOhH,WAEP,iBAIjB2zB,GAAa3sB,MAId,EAGX2sB,GAAa/B,MAEjByD,KAAM,CACF1wC,GAAI,CACAkwC,KAAM,WACF,GAAGd,GAAIC,YAAa,CAEhB,IAAMsB,EAAavB,GAAIC,YAAYD,GAAIC,YAAY90D,OAAS,GAyB5D,OAxBAsyD,GAAiB,CAACr4B,MAAO,GAAI06B,iBAAkB,EAAGxzC,QAAS,GAAIyzC,mBAAoBC,GAAIC,YAAY90D,OAAS,EAAG+0D,eAAe,GAE9HqB,EAAWz7D,MAAM2B,KAAKmG,GAAM4zD,YAAa,IAAI95D,KACzC,SAAAq2D,GACsB,MAAfA,EAAIp+C,OAKPggD,GAAoB5B,EAAI/zD,KAAMu3D,EAAWvwD,MAJrC4uD,GAAa,yCAAA5wD,OAAyCuyD,EAAWvwD,KAApD,MAA+DgC,KAAKC,UAAU8qD,KAMnG,SAAA9qB,GACyB,kBAAXA,IAEFA,EAD0B,oBAApBA,EAAOhH,SACJgH,EAAOhH,WAEP,iBAIjB2zB,GAAa3sB,MAId,EAGX2sB,GAAa/B,OAIzBrf,QAAS,CACLsiB,KAAMx2B,IAEVm3B,eAAgB,SAACC,GACbhE,GAAuBgE,GAE3BC,UAAS,eAAAC,EAAA33D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAE,SAAAyG,EAAOsC,EAAkB8Y,GAAzB,IAAAy8B,EAAA9D,EAAA0C,EAAA,OAAA3mD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,WACJ2pD,GAAIC,cAAgBxC,IAAyD,qBAAhCE,GADzC,CAAA3jD,EAAA3D,KAAA,YAEGgoD,EAAOZ,GAAgBuC,GAAIC,YAAYxC,GAAesC,oBAAsBC,GAAIC,YAAYtC,KAE/FF,KAAkBA,GAAeyC,cAJjC,CAAAlmD,EAAA3D,KAAA,eAKCspD,GAAoB,CAChBtB,KAAM,mFACNC,QAAS,mHACTrxD,KAAM2wD,GAAiBn5D,OACxB45D,EAAKrtD,MATTgJ,EAAAwB,OAAA,UAWQ,GAXR,cAAAxB,EAAA3D,KAAA,EAcegoD,EAAKv4D,MAAM2B,KAAKkG,GAAQm0D,KAAM,CAACx1C,UAAS8Y,MAAOA,EAAMvsB,IAAIstB,MAdxE,UAgBgB,OAFb43B,EAdH/jD,EAAAG,MAgBKwF,OAhBL,CAAA3F,EAAA3D,KAAA,gBAiBCupD,GAAa,yCAAA5wD,OAAyCqvD,EAAKrtD,KAA9C,MAAyDgC,KAAKC,UAAU8qD,IAjBtF/jD,EAAAwB,OAAA,UAkBQ,GAlBR,SAoBGilD,EAAwB1C,EAAI/zD,MAEvBiD,OAAS2wD,GAAiBmE,OACjCpC,GAAoBc,EAASpC,EAAKrtD,MAGtCqtD,EAAKwC,MAAO,EA1BT,eAAA7mD,EAAAwB,OAAA,UA6BA,GA7BA,yBAAAxB,EAAAI,SAAA4P,EAAA7f,SAAF,gBAAA63D,EAAA73C,GAAA,OAAAy3C,EAAApsD,MAAArL,KAAAe,YAAA,GA+BT+2D,iBAAgB,eAAAC,EAAAj4D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAE,SAAA8G,EAAOiC,EAAkB8Y,GAAzB,IAAA5qB,EAAAC,EAAAC,EAAAynD,EAAAxnD,EAAAC,EAAA,OAAAd,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,WACX2pD,GAAIC,YADO,CAAA33C,EAAAjS,KAAA,SAAAmE,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA2e,EAAArO,KAAA,EAAAkoD,EAAAroD,GAAAhN,EAAAyW,KAAA,SAAA4+C,IAAA,IAAA9D,EAAA+D,EAAAC,EAAAvsD,EAAAC,EAAAC,EAAAE,EAAAD,EAAAqvB,EAAA,OAAAxrB,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,WAEAgoD,EAFAzjD,EAAAjQ,OAGGk2D,KAHH,CAAAxlD,EAAAhF,KAAA,eAAAgF,EAAAG,OAAA,4BAOA4mD,EAPA,eAAAr0D,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAOc,SAAA++C,EAAOC,GAAP,IAAAxE,EAAA0C,EAAA,OAAA3mD,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,cAAAyE,EAAAzE,KAAA,EACEgoD,EAAKv4D,MAAMiV,IAAIpN,GAAQm0D,KAAM,CAACx1C,UAAS8Y,MAAOm9B,EAAa1pD,IAAIstB,MADjE,UAGG,OAFb43B,EADUjjD,EAAAX,MAGRwF,OAHQ,CAAA7E,EAAAzE,KAAA,eAIZupD,GAAa,yCAAA5wD,OAAyCqvD,EAAKrtD,KAA9C,MAAyDgC,KAAKC,UAAU8qD,IAJzEjjD,EAAAU,OAAA,UAKL,GALK,QAOVilD,EAAwB1C,EAAI/zD,MAEvBiD,OAAS2wD,GAAiBmE,OACjCpC,GAAoBc,EAASpC,EAAKrtD,MAVtB,wBAAA8J,EAAAV,SAAAkoD,EAAAn4D,SAPd,gBAAAqgB,GAAA,OAAAzc,EAAAyH,MAAArL,KAAAe,YAAA,GAqBFm3D,EAAgB,GArBdvsD,GAAA,EAAAC,GAAA,EAAAC,OAAArM,EAAA0R,EAAApB,KAAA,EAAA/D,EAuBYkvB,EAvBZjvB,OAAAC,YAAA,WAAAN,GAAAG,EAAAC,EAAAG,QAAAC,KAAA,CAAA+E,EAAAhF,KAAA,YAuBIivB,EAvBJrvB,EAAAtL,MAwBF03D,EAAMz1D,KAAK04B,KAER+8B,EAAMl3D,QAAU,IA1BjB,CAAAkQ,EAAAhF,KAAA,gBAAAgF,EAAAhF,KAAA,GA2BQ+rD,EAAYC,GA3BpB,QA6BEA,EAAQ,GA7BV,QAAAvsD,GAAA,EAAAuF,EAAAhF,KAAA,iBAAAgF,EAAAhF,KAAA,iBAAAgF,EAAApB,KAAA,GAAAoB,EAAAH,GAAAG,EAAA,SAAAtF,GAAA,EAAAC,EAAAqF,EAAAH,GAAA,QAAAG,EAAApB,KAAA,GAAAoB,EAAApB,KAAA,GAAAnE,GAAA,MAAAI,EAAAQ,QAAAR,EAAAQ,SAAA,WAAA2E,EAAApB,KAAA,IAAAlE,EAAA,CAAAsF,EAAAhF,KAAA,eAAAL,EAAA,eAAAqF,EAAAF,OAAA,mBAAAE,EAAAF,OAAA,iBAiCHknD,EAAMl3D,OAAS,GAjCZ,CAAAkQ,EAAAhF,KAAA,gBAAAgF,EAAAhF,KAAA,GAkCI+rD,EAAYC,GAlChB,yBAAAhnD,EAAAjB,SAAA+nD,EAAAh4D,KAAA,8BAAAwQ,EAEQqlD,GAAIC,YAFZ9pD,OAAAC,YAAA,UAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAAgS,EAAAjS,KAAA,gBAAAiS,EAAAk6C,cAAAL,IAAA,+BAAA75C,EAAApN,GAAA,CAAAoN,EAAAjS,KAAA,gBAAAiS,EAAA9M,OAAA,uBAAAhB,GAAA,EAAA8N,EAAAjS,KAAA,gBAAAiS,EAAAjS,KAAA,iBAAAiS,EAAArO,KAAA,GAAAqO,EAAA6tB,GAAA7tB,EAAA,SAAA7N,GAAA,EAAAC,EAAA4N,EAAA6tB,GAAA,QAAA7tB,EAAArO,KAAA,GAAAqO,EAAArO,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA4R,EAAArO,KAAA,IAAAQ,EAAA,CAAA6N,EAAAjS,KAAA,eAAAqE,EAAA,eAAA4N,EAAAnN,OAAA,mBAAAmN,EAAAnN,OAAA,mBAAAmN,EAAA9M,OAAA,UAuCP,GAvCO,yBAAA8M,EAAAlO,SAAAiQ,EAAAlgB,KAAA,+BAAF,gBAAAigB,EAAAq4C,GAAA,OAAAP,EAAA1sD,MAAArL,KAAAe,YAAA,GAyChBw3D,iBAAgB,eAAAC,EAAA14D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAE,SAAAmH,EAAO4B,EAAkB8Y,GAAzB,IAAAw9B,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAnpD,GAAAhN,EAAAiN,KAAA,SAAAmR,GAAA,cAAAA,EAAAjR,KAAAiR,EAAA7U,MAAA,WACX2pD,GAAIC,YADO,CAAA/0C,EAAA7U,KAAA,SAAAusD,GAAA,EAAAC,GAAA,EAAAC,OAAAn5D,EAAAuhB,EAAAjR,KAAA,EAAA8oD,EAAAjpD,GAAAhN,EAAAyW,KAAA,SAAAw/C,IAAA,IAAA1E,EAAA+D,EAAAC,EAAAa,EAAAC,EAAAC,EAAAC,EAAAC,EAAAh+B,EAAA,OAAAxrB,GAAAhN,EAAAiN,KAAA,SAAAu+B,GAAA,cAAAA,EAAAr+B,KAAAq+B,EAAAjiC,MAAA,WAEAgoD,EAFA4E,EAAAt4D,OAGGk2D,KAHH,CAAAvoB,EAAAjiC,KAAA,eAAAiiC,EAAA98B,OAAA,4BAOA4mD,EAPA,eAAAn0D,EAAAhE,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAOc,SAAAggD,EAAOhB,GAAP,IAAAxE,EAAA0C,EAAA,OAAA3mD,GAAAhN,EAAAiN,KAAA,SAAA4Q,GAAA,cAAAA,EAAA1Q,KAAA0Q,EAAAtU,MAAA,cAAAsU,EAAAtU,KAAA,EACEgoD,EAAKv4D,MAAM2B,KAAKkG,GAAQ61D,YAAa,CAACl3C,UAAS8Y,MAAOm9B,EAAa1pD,IAAIstB,MADzE,UAGG,OAFb43B,EADUpzC,EAAAxQ,MAGRwF,OAHQ,CAAAgL,EAAAtU,KAAA,eAIZupD,GAAa,yCAAA5wD,OAAyCqvD,EAAKrtD,KAA9C,MAAyDgC,KAAKC,UAAU8qD,IAJzEpzC,EAAAnP,OAAA,UAKL,GALK,QAOVilD,EAAwB1C,EAAI/zD,MAEvBiD,OAAS2wD,GAAiBmE,OACjCpC,GAAoBc,EAASpC,EAAKrtD,MAVtB,wBAAA2Z,EAAAvQ,SAAAmpD,EAAAp5D,SAPd,gBAAAs5D,GAAA,OAAAx1D,EAAAuH,MAAArL,KAAAe,YAAA,GAqBFm3D,EAAgB,GArBda,GAAA,EAAAC,GAAA,EAAAC,OAAAz5D,EAAA2uC,EAAAr+B,KAAA,EAAAopD,EAuBYj+B,EAvBZjvB,OAAAC,YAAA,WAAA8sD,GAAAI,EAAAD,EAAAhtD,QAAAC,KAAA,CAAAgiC,EAAAjiC,KAAA,YAuBIivB,EAvBJg+B,EAAA34D,MAwBF03D,EAAMz1D,KAAK04B,KAER+8B,EAAMl3D,QAAU,IA1BjB,CAAAmtC,EAAAjiC,KAAA,gBAAAiiC,EAAAjiC,KAAA,GA2BQ+rD,EAAYC,GA3BpB,QA6BEA,EAAQ,GA7BV,QAAAa,GAAA,EAAA5qB,EAAAjiC,KAAA,iBAAAiiC,EAAAjiC,KAAA,iBAAAiiC,EAAAr+B,KAAA,GAAAq+B,EAAAp9B,GAAAo9B,EAAA,SAAA6qB,GAAA,EAAAC,EAAA9qB,EAAAp9B,GAAA,QAAAo9B,EAAAr+B,KAAA,GAAAq+B,EAAAr+B,KAAA,GAAAipD,GAAA,MAAAG,EAAA3sD,QAAA2sD,EAAA3sD,SAAA,WAAA4hC,EAAAr+B,KAAA,IAAAkpD,EAAA,CAAA7qB,EAAAjiC,KAAA,eAAA+sD,EAAA,eAAA9qB,EAAAn9B,OAAA,mBAAAm9B,EAAAn9B,OAAA,iBAiCHknD,EAAMl3D,OAAS,GAjCZ,CAAAmtC,EAAAjiC,KAAA,gBAAAiiC,EAAAjiC,KAAA,GAkCI+rD,EAAYC,GAlChB,yBAAA/pB,EAAAl+B,SAAA2oD,EAAA54D,KAAA,8BAAA64D,EAEQhD,GAAIC,YAFZ9pD,OAAAC,YAAA,UAAAwsD,GAAAK,EAAAD,EAAA3sD,QAAAC,KAAA,CAAA4U,EAAA7U,KAAA,gBAAA6U,EAAAs3C,cAAAO,IAAA,+BAAA73C,EAAAhQ,GAAA,CAAAgQ,EAAA7U,KAAA,gBAAA6U,EAAA1P,OAAA,uBAAAonD,GAAA,EAAA13C,EAAA7U,KAAA,gBAAA6U,EAAA7U,KAAA,iBAAA6U,EAAAjR,KAAA,GAAAiR,EAAAirB,GAAAjrB,EAAA,SAAA23C,GAAA,EAAAC,EAAA53C,EAAAirB,GAAA,QAAAjrB,EAAAjR,KAAA,GAAAiR,EAAAjR,KAAA,GAAA2oD,GAAA,MAAAI,EAAAtsD,QAAAssD,EAAAtsD,SAAA,WAAAwU,EAAAjR,KAAA,IAAA4oD,EAAA,CAAA33C,EAAA7U,KAAA,eAAAysD,EAAA,eAAA53C,EAAA/P,OAAA,mBAAA+P,EAAA/P,OAAA,mBAAA+P,EAAA1P,OAAA,UAuCP,GAvCO,yBAAA0P,EAAA9Q,SAAAsQ,EAAAvgB,KAAA,+BAAF,gBAAAsgB,EAAAi5C,GAAA,OAAAf,EAAAntD,MAAArL,KAAAe,YAAA,GAyChBy4D,aAAc,WACV,GAA0C,qBAAhChG,IAA+CqC,GAAIC,YAAa,CACtE,IAAM5B,EAAO2B,GAAIC,YAAYtC,IAQ7B,OANAgC,GAAoB,CAChBtB,KAAM,kCACNpxD,KAAM2wD,GAAiBW,MACxBF,EAAKrtD,WAER2sD,QAA8Bh0D,GAIjC,GAAG8zD,IAAkBuC,GAAIC,YAAa,CAClC,IAAM5B,EAAO2B,GAAIC,YAAYxC,GAAesC,oBAE5CJ,GAAoB,CAChBtB,KAAM,kCACNpxD,KAAM2wD,GAAiBW,MACxBF,EAAKrtD,MAERysD,GAAeyC,eAAgB,EAE/B51B,GAAYmzB,GAAenxC,QAASmxC,GAAer4B,MAAOq4B,GAAeqC,iBAAkBrC,GAAesC,sBAGnH6D,aAAc,WAeV,OAdAnG,QAAiB9zD,EAEdq2D,GAAIC,YACHD,GAAIC,YAAYvzD,QAAQ,SAAA2xD,GACpBsB,GAAoB,CAChBtB,KAAM,wCACPA,EAAKrtD,QAGZ2uD,GAAoB,CAChBtB,KAAM,wCACP,SAGA,GAEXwF,IAAK,CACD/C,KAAM,CACFgD,QAAS,WACLnE,GAAoB,CAChBtB,KAAM,+DACNC,QAAS,CACL,6RACA,iBACA,4CACA,iBACA,4CACA,iBACA,4CACA,iBACA,8CAEL,WAIf2B,iBAAat2D,EACbo6D,uBAAwB,SAACC,GACrBrE,GAAsBqE,GAE1BC,gBAAiB,SAACD,GACdpE,GAAeoE,GAEnBE,kBAAmB,SAACF,GAChBnE,GAAiBmE,IAKzB/0D,OAAO+wD,IAAMA,YAuDDpC,mKCnpBL,ICgBKuG,GDDCC,GAA0C,CACnD16D,IAAK,GACL6iB,MAAO,GACP/U,cAlB0B,aAmB1B6sD,SAAU,EACVC,SAAU,EACVC,UAAW,GACXC,gBAAY76D,GAGH86D,GAAmB,SAACl4C,EAAgB83C,EAAkBC,EAAkBC,EAAmBC,GACpG,OAAO,IAAIE,GAAW,CAClBh7D,IAAK,GACL8N,cA5BsB,aA6BtB+U,QACA83C,WACAC,WACAC,YACAC,gBAoBKE,GAAb,SAAA36D,GACI,SAAA26D,EAAmB16D,GAAuB,OAACC,OAAAC,GAAA,EAAAD,CAAAE,KAAAu6D,GACtB,KAAb16D,EAAKN,MACLM,EAAKN,IAAMU,SAFuBH,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAy6D,GAAAn6D,KAAAJ,KAKhCH,IANd,OAAAC,OAAAO,GAAA,EAAAP,CAAAy6D,EAAA36D,GAAA26D,EAAA,CAAgC75D,kBAAOu5D,eCrC3BD,yEAoEZ,ICpFKQ,GDsFCC,GAAS,CACX,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAGAC,GAAmB,EAgCjBC,GAA4B,SAACC,GAC/B,OAAQA,GACJ,KAAKZ,GAAQa,OACT,MAAO,YACX,KAAKb,GAAQc,OACT,MAAO,WACX,QACI,MAAO,SAINC,GAAb,WAkBI,SAAAA,EACIluB,EACA9H,EACA1P,EACA2lC,GACDl7D,OAAAC,GAAA,EAAAD,CAAAE,KAAA+6D,GAAA/6D,KAtBK6sC,YAsBN,EAAA7sC,KArBM+kC,eAqBN,EAAA/kC,KApBMiuC,SAAsM,GAoB5MjuC,KAnBMg7D,yBAmBN,EAAAh7D,KAlBMq1B,WAkBN,EAAAr1B,KAjBMi7D,yBAiBN,EAAAj7D,KAhBMk7D,uBAgBN,EAAAl7D,KAfMm7D,kBAeN,EAAAn7D,KAdMo7D,oBAcN,EAAAp7D,KAbMq7D,wBAaN,EAAAr7D,KAXMs7D,gCAWN,EAAAt7D,KAVMu7D,+BAUN,EAAAv7D,KATMw7D,gCASN,EAAAx7D,KARMy7D,sBAQN,EAAAz7D,KAPM07D,oBAA8B,EAQlC17D,KAAK6sC,OAASA,EACd7sC,KAAK+kC,UAAYA,EACjB/kC,KAAKg7D,oBAAsBA,EAC3Bh7D,KAAKq1B,MAAQA,EACbr1B,KAAKi7D,oBAAsB,GAC3Bj7D,KAAKk7D,kBAAoB,GACzBl7D,KAAKs7D,2BAA6B,GAClCt7D,KAAKu7D,0BAA4B,GACjCv7D,KAAKw7D,2BAA6B,GAClCx7D,KAAKm7D,aAAe,KACpBn7D,KAAKo7D,eAAiB,KACtBp7D,KAAKq7D,oBAAqB,EAnClC,OAAAv7D,OAAAQ,GAAA,EAAAR,CAAAi7D,EAAA,EAAAx6D,IAAA,YAAAC,MAAA,SAsCqBm7D,GAAyB,IAAA38C,EAAAhf,KACtCA,KAAK6sC,OAAOyB,GA3La,cA2LS,SAACstB,GAC/B58C,EAAK68C,uBAAuBD,EAAIp1D,OAAQo1D,EAAI/0D,KAAM+0D,EAAIjZ,UAG1D3iD,KAAK6sC,OAAOyB,GA9LW,YA8LS,SAACstB,GAC7B58C,EAAK88C,wBAAwBF,EAAIp1D,QAGjCwY,EAAK6tB,OAAOwB,KAjMU,mBAmMlBstB,EACA,SAACI,GAAD,OAA6BA,EAAKx5D,QAAQ,SAAAy5D,GAClCh9C,EAAKivB,SAASnN,eAAek7B,EAAUx1D,SACvCwY,EAAK68C,uBAAuBG,EAAUx1D,OAAQw1D,EAAUn1D,KAAMm1D,EAAUrZ,cAKxF3iD,KAAK6sC,OAAOyB,GA/MW,YA+MS,SAAC2tB,GAAwB,IAC9Cz1D,EAA4By1D,EAA5Bz1D,OAAQ01D,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,GAAIC,EAASH,EAATG,MAE1B,GAAGp9C,EAAKivB,SAASnN,eAAet6B,GAAS,KAC9B61D,EAAar9C,EAAKivB,SAASznC,GAA3B61D,UAUP,GARAA,EAAUt3C,MAAM2uB,QAAU,QAEvB10B,EAAKm8C,eAAiB30D,IACrBwY,EAAKqW,MAAMoM,KAAK66B,SAASF,GACzBp9C,EAAKqW,MAAMknC,SAASN,EAAKE,GAAGv5C,EAAGq5C,EAAKE,GAAGt5C,GACvC7D,EAAKqW,MAAMmnC,iBAAiBj6D,QAAQ,SAACk6D,GAAD,OAA4CA,EAAER,EAAKE,OAGxFF,EAAKS,WAAa19C,EAAKm8C,eAAiB30D,EAAQ,CAC/C,IAAMm2D,EAAgB39C,EAAKg8C,oBAAoBkB,GAC/CG,EAAUt3C,MAAM0zB,KAAOkkB,EAAc/5C,EAAI,KACzCy5C,EAAUt3C,MAAM2zB,IAAMikB,EAAc95C,EAAI,KACxC7D,EAAKivB,SAASznC,GAAQo2D,uBAAyBD,EAGnD,IAAIV,EAAKS,UAAW,CAChB,IAAMC,EAAgB39C,EAAKg8C,oBAAoBkB,GAC/CG,EAAUt3C,MAAM0zB,KAAOkkB,EAAc/5C,EAAI,KACzCy5C,EAAUt3C,MAAM2zB,IAAMikB,EAAc95C,EAAI,KACxC7D,EAAKivB,SAASznC,GAAQo2D,uBAAyBD,EAGnD39C,EAAKivB,SAASznC,GAAQ+8B,UAAY44B,EAClCn9C,EAAKivB,SAASznC,GAAQ41D,MAAQA,KAItCp8D,KAAK6sC,OAAOyB,GA/Oa,cA+OS,SAACuuB,GAA4B,IACpDr2D,EAAqBq2D,EAArBr2D,OAAQ41D,EAAaS,EAAbT,MAAOD,EAAMU,EAANV,GAEnBn9C,EAAKivB,SAASnN,eAAet6B,KACzBwY,EAAKm8C,eAAiB30D,IACrBwY,EAAKqW,MAAMoM,KAAK66B,SAASF,GACzBp9C,EAAKqW,MAAMknC,SAASJ,EAAGv5C,EAAGu5C,EAAGt5C,IAGjC7D,EAAKivB,SAASznC,GAAQ+8B,UAAY44B,EAClCn9C,EAAKivB,SAASznC,GAAQ41D,MAAQA,KAItCp8D,KAAK6sC,OAAOyB,GAzPgB,iBAyPS,SAACwuB,GAAmC,IAC9Dt2D,EAAmBs2D,EAAnBt2D,OAAmBs2D,EAAXlC,QAEZ57C,EAAKivB,SAASnN,eAAet6B,KACNwY,EAAKivB,SAASznC,GAA7Bu2D,YACK72C,UAAYy0C,GAA0BmC,EAAelC,SAAW,WAIpF56D,KAAK6sC,OAAOyB,GAjQY,gBAiQS,SAAC0uB,GAAqC,IAC5Dx2D,EAAuCw2D,EAAvCx2D,OAAQ+8B,EAA+By5B,EAA/Bz5B,UAAW64B,EAAoBY,EAApBZ,MAAoBY,EAAbN,UAE9B19C,EAAKivB,SAASnN,eAAet6B,KACzBwY,EAAKm8C,eAAiB30D,IACrBwY,EAAKqW,MAAMoM,KAAK66B,SAASF,GACzBp9C,EAAKqW,MAAMknC,SAASh5B,EAAU3gB,EAAG2gB,EAAU1gB,IAG/C7D,EAAKivB,SAASznC,GAAQ+8B,UAAYA,EAClCvkB,EAAKivB,SAASznC,GAAQ41D,MAAQA,KAItCp8D,KAAK6sC,OAAOyB,GA7QoB,oBA6QS,SAAC2uB,GACtC,IAAMC,EAAa,IAAI3C,GAAW0C,GAClCzhE,QAAQC,IAAI,6CAA8CwhE,GAC1Dj+C,EAAKs8C,2BAA2B/4D,QAAQ,SAAAk6D,GAAC,OAAIA,EAAES,KAC/Cl+C,EAAKy8C,iBAAmByB,EACxBl+C,EAAK08C,oBAAqB,IAG9B17D,KAAK6sC,OAAOyB,GApRmB,mBAoRS,SAAC2uB,GACrC,IAAMC,EAAa,IAAI3C,GAAW0C,GAClCzhE,QAAQC,IAAI,4CAA6CwhE,GACzDj+C,EAAKu8C,0BAA0Bh5D,QAAQ,SAAAk6D,GAAC,OAAIA,EAAES,KAC9Cl+C,EAAKy8C,iBAAmByB,EACxBl+C,EAAK08C,oBAAqB,IAG9B17D,KAAK6sC,OAAOyB,GA3RoB,oBA2RS,SAAC2uB,GACtC,IAAMC,EAAa,IAAI3C,GAAW0C,GAClCzhE,QAAQC,IAAI,6CAA8CwhE,GAC1Dj+C,EAAKy8C,sBAAmBj8D,EACxBwf,EAAK08C,oBAAqB,EAC1B18C,EAAKw8C,2BAA2Bj5D,QAAQ,SAAAk6D,GAAC,OAAIA,EAAES,OAGnDl9D,KAAK6sC,OAAOyB,GAAG,aAAc,WAEzB,IAAI,IAAM/uC,KADV/D,QAAQC,IAAI,6CACKujB,EAAKivB,SACfjvB,EAAKivB,SAASnN,eAAevhC,IAC5Byf,EAAK88C,wBAAwBv8D,KAKzC,IAAMvB,EAAO,SAACm/D,GACPA,GACCn+C,EAAKi8C,oBAAoB14D,QAAQ,SAAA66D,GAAE,OAAIA,EAAGzB,EAAOn1D,OAAQm1D,EAAO90D,KAAM80D,EAAOhZ,OAlO5E,aAsOL3jC,EAAK6tB,OAAOwB,KA1TS,cA0TestB,GAEpC38C,EAAK6tB,OAAOwB,KA1TU,mBA4TlBstB,EACA,SAACI,GAAD,OAA6BA,EAAKx5D,QAAQ,SAAAy5D,GAAS,OAAIh9C,EAAK68C,uBAAuBG,EAAUx1D,OAAQw1D,EAAUn1D,KAAMm1D,EAAUrZ,YAEnI3jC,EAAK6tB,OAAOwB,KAxTc,sBA0TtB,CAACjsB,MAAOu5C,EAAOx5C,SACf,SAACyxC,GACG50C,EAAKy8C,iBAAmB7H,EAAIqJ,MAAO,IAAI1C,GAAW3G,EAAIqJ,YAASz9D,EAC/Dwf,EAAK08C,mBAAqB9H,EAAIyJ,SAE3BF,GAA0Bn+C,EAAKs8C,2BAA2Bt6D,QAAUge,EAAKy8C,mBACxEjgE,QAAQC,IAAI,2DAA4Dm4D,GACxE50C,EAAKs8C,2BAA2B/4D,QAAQ,SAAAk6D,GAAC,OAAIA,EAAEz9C,EAAKy8C,qBAGrDz8C,EAAK08C,oBAAsByB,GAA0Bn+C,EAAKu8C,0BAA0Bv6D,QAAUge,EAAKy8C,kBAClGz8C,EAAKu8C,0BAA0Bh5D,QAAQ,SAAAk6D,GAAC,OAAIA,EAAEz9C,EAAKy8C,uBAMnEz7D,KAAK6sC,OAAOyB,GAAG,YAAa,WACxB9yC,QAAQC,IAAI,4CAETujB,EAAKy8C,kBAAoBz8C,EAAKy8C,iBAAiBrB,YAAcuB,EAAOn1D,SACnEwY,EAAKs+C,gBAAgBt+C,EAAKy8C,kBACvBz8C,EAAK08C,oBACJ18C,EAAKu+C,gBAAgBv+C,EAAKy8C,mBAIlCz9D,GAAK,KAGTA,GAAK,KA7Mb,CAAAuC,IAAA,WAAAC,MAAA,SAgNoBi4C,GACZj9C,QAAQC,IAAI,yBACZuE,KAAK6sC,OAAOwB,KArWW,YAqWWoK,GAClCz4C,KAAK6sC,OAAO2B,IAvWa,eAwWzBxuC,KAAK6sC,OAAO2B,IA1WW,aA2WvBxuC,KAAK6sC,OAAO2B,IA1Wa,eA2WzBxuC,KAAK6sC,OAAO2B,IAzWW,aA0WvBxuC,KAAKiuC,SAAW,GAChBjuC,KAAKm7D,aAAe,KACpBn7D,KAAKq7D,oBAAqB,EAC1Br7D,KAAKy7D,sBAAmBj8D,EACxBQ,KAAK07D,oBAAqB,EAC1B3+D,SAASqsD,eAAe,WAAYrkC,MAAMy4C,YAAc,OA5NhE,CAAAj9D,IAAA,qCAAAC,MAAA,SA+N8Cy7D,EAAqBwB,GAE3D,IAAI,IAAMj3D,KAAUxG,KAAKiuC,SACrB,GAAGjuC,KAAKiuC,SAASnN,eAAet6B,GAAS,KAAAk3D,EACO19D,KAAKiuC,SAASznC,GAAnD61D,EAD8BqB,EAC9BrB,UAAWO,EADmBc,EACnBd,uBAClBP,EAAUt3C,MAAM0zB,KAAOmkB,EAAuBh6C,EAAI6gB,KAAKC,MAAM+5B,EAAWE,IAAM,KAC9EtB,EAAUt3C,MAAM2zB,IAAMkkB,EAAuB/5C,EAAI4gB,KAAKC,MAAM+5B,EAAWG,IAAM,QArO7F,CAAAr9D,IAAA,0CAAAC,MAAA,WA4OQ,IAAI,IAAMgG,KAAUxG,KAAKiuC,SACrB,GAAGjuC,KAAKiuC,SAASnN,eAAet6B,GAAS,KAC9B61D,EAAar8D,KAAKiuC,SAASznC,GAA3B61D,UAEPr8D,KAAKiuC,SAASznC,GAAQo2D,uBAAyB,CAC3Ch6C,EAAGi7C,SAASxB,EAAUt3C,MAAM0zB,UAAgBj5C,GAC5CqjB,EAAGg7C,SAASxB,EAAUt3C,MAAM2zB,SAAel5C,OAlP/D,CAAAe,IAAA,oBAAAC,MAAA,SAwP6By7D,EAAqBwB,GAEvCxB,EAAKS,WAAae,GACjBz9D,KAAK89D,mCAAmC7B,EAAMwB,GAC9Cz9D,KAAKq7D,oBAAqB,GAEvBr7D,KAAKq7D,oBACJr7D,KAAK+9D,0CAGb/9D,KAAK6sC,OAAOwB,KAxZW,YAwZW4tB,KAlQ1C,CAAA17D,IAAA,sBAAAC,MAAA,SAqQ+Bq8D,GAEvB78D,KAAK6sC,OAAOwB,KA5Za,cA4ZWwuB,KAvQ5C,CAAAt8D,IAAA,yBAAAC,MAAA,SA0QkCs8D,GAE1B98D,KAAK6sC,OAAOwB,KA7ZgB,iBA6ZWyuB,KA5Q/C,CAAAv8D,IAAA,0BAAAC,MAAA,SA+QmCw8D,GAE3Bh9D,KAAK6sC,OAAOwB,KAjaY,gBAiaW2uB,KAjR3C,CAAAz8D,IAAA,yBAAAC,MAAA,SAoRkCgG,EAA0Bw3D,EAA8Brb,GAGlF,GAFAnnD,QAAQC,IAAI,2CAA4C+K,EAAQ,gBAAiBxG,KAAKiuC,SAASnN,eAAet6B,IAE3GxG,KAAKiuC,SAASnN,eAAet6B,GACzBxG,KAAKm7D,eAAiB30D,GACrBxG,KAAKi+D,YAAYz3D,OAFzB,CAHqH,IAAA03D,EA7TtG,SAACF,GAEpB,IAAM1pB,EAAQmmB,GAAOC,MACrBA,KAEwBD,GAAOz5D,SAC3B05D,GAAmB,GAGvB,IAAMyD,EAAaphE,SAAS6F,cAAc,OAC1Cu7D,EAAWj4C,UAAY,gBACvBi4C,EAAWp5C,MAAM5lB,SAAW,WAC5Bg/D,EAAWp5C,MAAM2uB,QAAU,OAE3B,IAAM0qB,EAAWrhE,SAAS6F,cAAc,KAElCy7D,EAAUthE,SAAS6F,cAAc,KACvCy7D,EAAQn4C,UAAYy0C,GAA0BX,GAAQsE,SAAW,QACjED,EAAQt5C,MAAMuvB,MAAQA,EACtB8pB,EAASG,YAAYF,GACrBF,EAAWI,YAAYH,GAEvB,IAAMI,EAASzhE,SAAS6F,cAAc,KAKtC,OAJA47D,EAAOt4C,UAAY,eACnBs4C,EAAOC,UAAYT,EACnBQ,EAAOz5C,MAAMuvB,MAAQA,EACrB6pB,EAAWI,YAAYC,GAChB,CAACL,EAAYE,EAAS/pB,GA4SaoqB,CAAeV,GAVgEW,EAAA7+D,OAAAmL,GAAA,EAAAnL,CAAAo+D,EAAA,GAU9GC,EAV8GQ,EAAA,GAUlGC,EAVkGD,EAAA,GAUxFrqB,EAVwFqqB,EAAA,GAWrH3+D,KAAKiuC,SAASznC,GAAU,CACpBw3D,WACA3B,UAAW8B,EACXpB,YAAa6B,EACbtqB,QACA8nB,MAAO,GACP74B,UAAW,CAAC3gB,EAAG,EAAGC,EAAG,GACrB+5C,uBAAwB,CAACh6C,EAAG,EAAGC,EAAG,IAEtC7iB,KAAK+kC,UAAUw5B,YAAYJ,GAExBn+D,KAAKm7D,eAAiB30D,GACrBxG,KAAKi+D,YAAYz3D,GAGrBxG,KAAKi7D,oBAAoB14D,QAAQ,SAAA66D,GAAE,OAAIA,EAAG52D,EAAQw3D,EAAUrb,EAAQrO,QA9S5E,CAAA/zC,IAAA,0BAAAC,MAAA,SAiTmCgG,GAE3B,GADAhL,QAAQC,IAAI,0CAA2C+K,EAAQ,eAAgBxG,KAAKiuC,SAASnN,eAAet6B,IACzGxG,KAAKiuC,SAASnN,eAAet6B,GAAS,KAC9B61D,EAAar8D,KAAKiuC,SAASznC,GAA3B61D,UACPr8D,KAAK+kC,UAAU+T,YAAYujB,UACpBr8D,KAAKiuC,SAASznC,GAClBxG,KAAKm7D,eAAiB30D,GACrBxG,KAAK6+D,qBAET7+D,KAAKk7D,kBAAkB34D,QAAQ,SAAA66D,GAAE,OAAIA,EAAG52D,QA1TpD,CAAAjG,IAAA,cAAAC,MAAA,SA8TuBgG,GAEf,GADAhL,QAAQC,IAAI,2BAA4B+K,EAAQ,cAAexG,KAAKiuC,SAASnN,eAAet6B,IACzFxG,KAAKiuC,SAASnN,eAAet6B,GAAS,CACrCxG,KAAKm7D,aAAe30D,EADiB,IAAAs4D,EAEO9+D,KAAKiuC,SAASznC,GAAnDw3D,EAF8Bc,EAE9Bd,SAAU1pB,EAFoBwqB,EAEpBxqB,MAAO/Q,EAFau7B,EAEbv7B,UAAW64B,EAFE0C,EAEF1C,MAEnCr/D,SAASqsD,eAAe,WAAYrkC,MAAMy4C,YAAclpB,EACxD,IAAMyqB,EAAQhiE,SAAS6F,cAAc,OACrCm8D,EAAMC,UAAUt+C,IAAI,YAAa,SACjCq+C,EAAMh6C,MAAMy4C,YAAclpB,EAE1B,IAAMpc,EAAQn7B,SAAS6F,cAAc,OACrCs1B,EAAM8mC,UAAUt+C,IAAI,SACpBwX,EAAM+mC,UAAY,aAAejB,EACjC9lC,EAAMnT,MAAMm6C,gBAAkB5qB,EAC9Bpc,EAAMnT,MAAMuvB,MAAQ,OACpByqB,EAAMj1C,OAAOoO,GACbl4B,KAAKq1B,MAAM0P,UAAUjb,OAAOi1C,GAC5B/+D,KAAKo7D,eAAiB2D,EAEH,IAAhBx7B,EAAU3gB,GAA2B,IAAhB2gB,EAAU1gB,IAC9B7iB,KAAKq1B,MAAMoM,KAAK66B,SAASF,GACzBp8D,KAAKq1B,MAAMknC,SAASh5B,EAAU3gB,EAAG2gB,EAAU1gB,OApV3D,CAAAtiB,IAAA,qBAAAC,MAAA,WA0VWR,KAAKo7D,iBACJp7D,KAAKo7D,eAAevjD,SACpB7X,KAAKo7D,eAAiB,KACtBr+D,SAASqsD,eAAe,WAAYrkC,MAAMy4C,YAAc,QA7VpE,CAAAj9D,IAAA,oBAAAC,MAAA,WAkWQhF,QAAQC,IAAI,kCACZuE,KAAKm7D,aAAe,KACpBn7D,KAAK6+D,uBApWb,CAAAt+D,IAAA,eAAAC,MAAA,SAuWwBg/B,GAChBhkC,QAAQC,IAAI,2CACZuE,KAAKi7D,oBAAoBx4D,KAAK+8B,KAzWtC,CAAAj/B,IAAA,gBAAAC,MAAA,SA4WyBg/B,GACjBx/B,KAAKi7D,oBAAsBj7D,KAAKi7D,oBAAoB34D,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,MA7W9E,CAAAj/B,IAAA,aAAAC,MAAA,SAgXsBg/B,GACdhkC,QAAQC,IAAI,yCACZuE,KAAKk7D,kBAAkBz4D,KAAK+8B,KAlXpC,CAAAj/B,IAAA,cAAAC,MAAA,SAqXuBg/B,GACfx/B,KAAKk7D,kBAAoBl7D,KAAKk7D,kBAAkB54D,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,MAtX1E,CAAAj/B,IAAA,qBAAAC,MAAA,SAyX8Bg/B,GACtBx/B,KAAKu7D,0BAA0B94D,KAAK+8B,GAEjCx/B,KAAKy7D,kBAAoBz7D,KAAK07D,oBAC7Bl8B,EAASx/B,KAAKy7D,oBA7X1B,CAAAl7D,IAAA,sBAAAC,MAAA,SAiY+Bg/B,GACvBx/B,KAAKu7D,0BAA4Bv7D,KAAKu7D,0BAA0Bj5D,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,MAlY1F,CAAAj/B,IAAA,sBAAAC,MAAA,SAqY+Bg/B,GACvBx/B,KAAKs7D,2BAA2B74D,KAAK+8B,GAClCx/B,KAAKy7D,mBACJjgE,QAAQC,IAAI,uEAAwEuE,KAAKy7D,iBAAiBjiD,QAC1GgmB,EAASx/B,KAAKy7D,qBAzY1B,CAAAl7D,IAAA,uBAAAC,MAAA,SA6YgCg/B,GACxBx/B,KAAKs7D,2BAA6Bt7D,KAAKs7D,2BAA2Bh5D,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,MA9Y5F,CAAAj/B,IAAA,sBAAAC,MAAA,SAiZ+Bg/B,GACvBx/B,KAAKw7D,2BAA2B/4D,KAAK+8B,KAlZ7C,CAAAj/B,IAAA,uBAAAC,MAAA,SAqZgCg/B,GACxBx/B,KAAKw7D,2BAA6Bx7D,KAAKw7D,2BAA2Bl5D,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,MAtZ5F,CAAAj/B,IAAA,kBAAAC,MAAA,SAyZ2By8D,GACnBj9D,KAAK6sC,OAAOwB,KAviBmB,mBAuiBW4uB,EAAMzjD,QAChDxZ,KAAKy7D,iBAAmBwB,EACxBj9D,KAAK07D,oBAAqB,IA5ZlC,CAAAn7D,IAAA,kBAAAC,MAAA,SA+Z2By8D,GACnBj9D,KAAK6sC,OAAOwB,KA9iBoB,oBA8iBW4uB,EAAMzjD,QACjDxZ,KAAKy7D,iBAAmBwB,EACxBj9D,KAAK07D,oBAAqB,IAlalC,CAAAn7D,IAAA,iBAAAC,MAAA,SAqa0By8D,GAClBj9D,KAAK6sC,OAAOwB,KAljBoB,oBAkjBW4uB,EAAMzjD,QACjDxZ,KAAKy7D,sBAAmBj8D,EACxBQ,KAAK07D,oBAAqB,MAxalCX,EAAA,GEpJaoE,GAA6B,SAACz9D,EAAiCC,GAAlC,OACtCD,EAAME,MAAM,CAAC8a,GAAQ,wBC2HVxZ,kBA7GU,SAACvB,GACLolB,yBAAjB,IDb2C5E,EAAkBrf,ECYNmgB,EAEbC,oBAAS,IAFIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEhDm8C,EAFgDj8C,EAAA,GAEjCk8C,EAFiCl8C,EAAA,GAAAG,EAGbJ,yBAA2B1jB,GAHd+jB,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGjCg8C,GAHiC/7C,EAAA,GAAAA,EAAA,IAAAG,EAI/BR,qBAAS,GAJsBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAIhDjO,EAJgDkO,EAAA,GAI1C47C,EAJ0C57C,EAAA,GAKjDvN,EAASmR,uBAAYqqB,IAAc,IACnC4tB,EAAqBj4C,wBDlBgBpF,ECkB2Bi9C,EDlBTt8D,ECkBwBsiC,GAAiB/sB,MDjB/FrW,aACH,CAACm9D,IACD,SAACK,GACG,IAAKA,EAAmB5wD,IAAIuT,GACxB,OAAO,KAGX,IAAMgU,EAAWrlB,gBAAK0uD,EAAmB7oD,IAAIwL,GAAUjF,eAAelF,WACtE,OAAOlV,EAAOqzB,EAAS7zB,OAAO,SAAAy1B,GAAO,OAAIA,EAAQj1B,OAASA,IAAQqzB,MCYpEspC,EAAerpD,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAM7iB,MAAQoC,EAAMwgB,UAASzT,IAAI,SAAA0T,GAAK,MAAK,CACnF7hB,IAAK6hB,EAAM7iB,IACXiB,MAAO4hB,EAAM7iB,IACbmpB,KAAMtG,EAAMvb,QACZmR,UACiBwnD,GAAqBA,EAAmBxnD,UAAUtJ,IAAI,SAAAqpB,GAAO,MAAK,CACnFrP,KAAMqP,EAAQlxB,KACdrG,MAAOu3B,EAAQx4B,IACf8oB,KAAM9pB,GAAA,cAACswD,GAAD,CAAU77B,SAAU+E,EAAQj1B,UAGtCnB,EAAM+9D,WAAW,SAACC,EAAgBC,GAC3BA,GACCC,EAA+CD,EzKrCa31D,QAAQrF,KAAmBZ,GAAY,UAAW,KyKuClHu7D,EAAQI,KAGZ,IAAME,EAAc,SAACr/D,GACjB6+D,EAAiB7+D,GACjB8+D,OAAiB9/D,GAEbgB,EAAMQ,QAaRqsC,EAAS,WACX1rC,EAAMo1C,WACN7yB,KAGEA,EAAa,WACfm7C,EAAiB,IACjBC,OAAiB9/D,IAerB,OACIjB,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMA,EAAMzS,QAASqqC,EAAQjpB,WAAW,GAC3C7lB,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,6BACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,CAAeC,OAAO,GAClBhmB,GAAA,cAACgqB,GAAA,EAAD,CACIhC,YAAa5kB,EAAMkB,EAAE,gCACrBkiD,OAAO,EACPzgD,QAAQ,EACRmhD,WAAW,EACXC,QAAS+Z,EACTn6C,SAxCU,SAACjrB,EAAyBsrD,GAChDka,EAAYla,EAAOnlD,QAwCPA,MAAO4+D,EACPU,WAAW,EACX/6C,MAAO,CAAEg7C,YAAa,WAxEhB,GAuFdxhE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAAS2uC,IAEb9uC,GAAA,cAAConB,GAAA,EAAD,CACIE,SAAS,EACTD,SAAUjkB,EAAMkB,EAAE,iBAClBnE,QAhDG,WACM,KAAlB0gE,EACCz9D,EAAMq+D,aAAa52C,GAAsCg2C,IAEzDz9D,EAAMq+D,aAAa,IAGvB97C,WCpEF+7C,GAAmB,SAAC17C,EAAyBnB,GAC/C,IAAM88C,EAAaz8B,KAAKC,MAAe,IAATtgB,EAAKR,EAAW2B,EAAMkB,cAC9C06C,EAAa18B,KAAKC,MAAe,IAATtgB,EAAKP,EAAW0B,EAAM67C,eAC9CC,EAAW58B,KAAKC,MAAmB,IAAbtgB,EAAKN,MAAeyB,EAAMkB,cAChD66C,EAAY78B,KAAKC,MAAoB,IAAdtgB,EAAKL,OAAgBwB,EAAM67C,eAElDG,EAASxjE,SAAS6F,cAAc,UAOtC,OANA29D,EAAOz9C,MAAQu9C,EACfE,EAAOx9C,OAASu9C,EAEJC,EAAOC,WAAW,MAC1BC,UAAUl8C,EAAO27C,EAAYC,EAAYE,EAAUC,EAAW,EAAG,EAAGD,EAAUC,GAE3EC,GAGEG,GAAwB,SAACn8C,EAAyBnB,EAAY4O,GACvE,OAAOiuC,GAAiB17C,EAAOnB,GAAMu9C,UAAU3uC,IAGtC4uC,GAA6B,SAACr8C,EAAyBnB,EAAY4O,GAC5E,OAAO,IAAI92B,QAAJ,eAAA0I,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAY,SAAAyG,EAAOplB,EAASU,GAAhB,OAAAwU,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACf+zD,GAAiB17C,EAAOnB,GAAMy9C,OAC1B,SAAAC,GACSA,GACD3lE,IAGJV,EAAQysD,GAAoB4Z,KAEhC9uC,GATW,wBAAAniB,EAAAI,SAAA4P,EAAA7f,SAAZ,gBAAAi3D,EAAAY,GAAA,OAAAj0D,EAAAyH,MAAArL,KAAAe,YAAA,KCvBL0hB,GAAe,CAAEC,OAAQ,EAAGC,KAAM,IAAYC,EAAG,EAAGC,EAAG,EAAGC,MAAO,IAAKC,OAAQ,KAC9Eg+C,GAAuB,CAAC,aAAc,YAAa,YAAa,aAAc,iBAC9EC,GAAmB,CAAC,aAAc,YAAa,cAyMtC99D,kBAtLY,SAACvB,GAAmC,IAAAshB,EAC7BC,oBAAsB,MADOC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACpDkP,EADoDhP,EAAA,GAC3C89C,EAD2C99C,EAAA,GAAAG,EAEnCJ,oBAAgCT,IAFGc,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEpDF,EAFoDG,EAAA,GAE9CF,EAF8CE,EAAA,GAAAG,EAGnCR,yBAAgD1jB,GAHbmkB,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGpDlc,EAHoDmc,EAAA,GAG9CC,EAH8CD,EAAA,GAAAE,EAIjCX,yBAAqC1jB,GAJJskB,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAIpDU,EAJoDT,EAAA,GAI7Co9C,EAJ6Cp9C,EAAA,GAAAq9C,EAKnCj+C,qBAAS,GAL0Bk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAKpD1rD,EALoD2rD,EAAA,GAK9C7B,EAL8C6B,EAAA,GAAAC,EAMzBn+C,qBAAS,GANgBo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAMpDE,EANoDD,EAAA,GAMzCE,EANyCF,EAAA,GAOrDj+D,EAAW0jB,yBAEjBpoB,qBAAU,WACN8iE,IAGArgC,WAAWqgC,EAAiB,OAGhC9/D,EAAM+9D,WAAW,SAACC,EAAgB+B,GAC9BT,EAAqC,kBAAnBS,EAA8BA,EAAiB,MACjEnC,EAAQI,KAGZ,IAAMgC,EAAiB,SAACj9C,GAChBA,EAAc1jB,OAAS,EACvBqC,EAASwN,EAAarN,QAAQlI,MAC1BqG,EAAMkB,EAAE,yCACRlB,EAAMkB,EAAE,0CAKhB+gB,EAAQ,CAAEpc,KAAMkd,EAAc,GAAIX,IAAKY,IAAIC,gBAAgBF,EAAc,OAGvE2oB,EAAS,WACX1rC,EAAMo1C,WACN7yB,KAGEA,EAAa,WACfN,OAAQpkB,GACR0hE,OAAS1hE,GACT6jB,EAAQZ,IACR++C,GAAa,IAGXI,EAAM,eAAAh+D,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAG,SAAAyG,IAAA,IAAAgiD,EAAAC,EAAAC,EAAAC,EAAA,OAAAryD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,UACN1E,EADM,CAAAqI,EAAA3D,KAAA,eAAA2D,EAAAwB,OAAA,oBAKXmwD,GAAa,GACPK,EAAiBb,GAAiBx+D,SAASgF,EAAKA,KAAK1E,MACrDg/D,EAAqC,kBAAnBt6D,EAAKA,KAAK1E,MAIT++D,EAXd,CAAAhyD,EAAA3D,KAAA,SAAA2D,EAAAkB,GAYD2vD,GAAsBn8C,EAAQnB,EAAc5b,EAAKA,KAAK1E,MAAMmH,QAAQ,UAAW,IAZ9E4F,EAAA3D,KAAA,qBAaD41D,EAbC,CAAAjyD,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,GAciC05C,GAASp+C,EAAKA,MAd/C,QAAAqI,EAAAo8B,GAAAp8B,EAAAG,KAAAH,EAAAm8B,GAcG,sBAdHn8B,EAAAo8B,GAAAp8B,EAAA3D,KAAA,wBAAA2D,EAAA3D,KAAA,GAeUk7C,GAAe5/C,EAAKA,MAf9B,QAAAqI,EAAAm8B,GAAAn8B,EAAAG,KAeqC/F,QAAQ,UAAW,IAfxD,QAAA4F,EAAAkB,GAAAlB,EAAAm8B,GAAA,eAWD+1B,EAXClyD,EAAAkB,GAiBPpP,EAAMsgE,eAAez6D,EAAMA,KAAKX,KAAMk7D,GACtC79C,IAlBOrU,EAAAwB,OAAA,sBAsBOwwD,EAtBP,CAAAhyD,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,GAuBC00D,GAA2Br8C,EAAQnB,EAAc5b,EAAKA,KAAK1E,MAvB5D,QAAA+M,EAAAqyD,GAAAryD,EAAAG,KAAAH,EAAA3D,KAAA,qBAwBL41D,EAxBK,CAAAjyD,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,GAwBmB05C,GAASp+C,EAAKA,MAxBjC,QAAAqI,EAAAsyD,GAAAtyD,EAAAG,KAAAH,EAAA3D,KAAA,wBAAA2D,EAAA3D,KAAA,GAwB+Cg7C,GAAoB1/C,EAAKA,MAxBxE,QAAAqI,EAAAsyD,GAAAtyD,EAAAG,KAAA,QAAAH,EAAAqyD,GAAAryD,EAAAsyD,GAAA,QAsBLH,EAtBKnyD,EAAAqyD,IA0BV/vC,EAAUiwC,EAAeC,GAAgBL,EAAWx6D,EAAKA,KAAK1E,MA1BpD,yBAAA+M,EAAAI,SAAA4P,EAAA7f,SAAH,yBAAA4D,EAAAyH,MAAArL,KAAAe,YAAA,GA6BNshE,EAAiB,SAACxiE,EAA0BmyB,GAC9CrZ,EAAImZ,iBAAiBnwB,EAAMwgB,QAAStiB,EAAMmyB,GACrCz0B,KAAK,SAACC,GACHmE,EAAMsgE,eAAez6D,EAAMA,KAAKX,KAAhC,mBAAAhC,OAAyDlD,EAAMwgB,QAA/D,KAAAtd,OAA0ErH,EAASqC,KAAKsyB,YAE3F10B,MAAM6kE,GACN35C,QAAQzE,IAGXk+C,EAAe,SAACviE,EAA0BmyB,GAC5CrZ,EAAIuZ,kBAAkBvwB,EAAMwgB,QAASgQ,EAAUtyB,EAAMmyB,GAChDz0B,KAAK,SAACC,GACHmE,EAAMsgE,eAAez6D,EAAMA,KAAKX,KAAhC,mBAAAhC,OAAyDlD,EAAMwgB,QAA/D,KAAAtd,OAA0EstB,MAE7E10B,MAAM6kE,GACN35C,QAAQzE,IAGXo+C,EAA0B,WAC5Bj/D,EAASwN,EAAarN,QAAQlI,MAC1BqG,EAAMkB,EAAE,yCACRlB,EAAMkB,EAAE,0CAEZwqC,KA6BEo0B,EAAkB,WACpB,IAAM1pC,EAAUh7B,SAASqsD,eAAe,yBACpCrxB,GACAA,EAAQ5C,SAIhB,OACI52B,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMA,EAAMzS,QAASqqC,EAAQjpB,WAAW,EAAM1lB,QAAS+iE,GAC1DljE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,mCACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,CAAeC,OAAO,EAAMg+C,QApChB,SAAClqD,GACjBA,EAAMm7B,iBAKN,IAJA,IAAMga,EAA8Bn1C,EAAMmqD,cAAchV,MACpDsT,EAAO,KAGF2B,EAAI,EAAGA,EAAIjV,EAAMxsD,OAAQyhE,IAAK,CACnC,IAAMr2D,EAAyBohD,EAAMiV,GAErC,GAAkB,eAAdr2D,EAAKtJ,MAAuC,cAAdsJ,EAAKtJ,KAAsB,CACzDg+D,EAAO10D,EAAKs2D,YACZ,OAIJ,OAAS5B,EAQba,EAAe,CAACb,IAPZz9D,EAASwN,EAAarN,QAAQlI,MAC1BqG,EAAMkB,EAAE,kCACRlB,EAAMkB,EAAE,6CAmBRtE,GAAA,cAACimB,GAAA,EAAD,CAAUC,OAAQk9C,EAAgB1uB,WAAYzrC,EAAMm7D,OAAQ5B,GAAsB6B,SAAU,EAAGC,QA3JvF,QA2JiHnkC,UAAU,GAC9H,SAAA56B,GAAA,IAAE+gB,EAAF/gB,EAAE+gB,aAAcC,EAAhBhhB,EAAgBghB,cAAhB,OACGvmB,GAAA,yBAASwmB,MAAO,CAAEhC,OAAQ,QAASD,MAAO,SACtCvkB,GAAA,oBAAAuB,OAAAklB,OAAA,GAASH,IAAT,CAAyBE,MAAO,CAAEjC,MAAO,OAAQC,OAAQ,OAAQkC,QAAS,SACpEzd,GAAQw5D,GAAiBx+D,SAASgF,EAAKA,KAAK1E,OAC1CvE,GAAA,cAAC2mB,GAAAviB,EAAD,CACIoiB,MAAO,CAAEI,SAAU,OAAQC,UAAW,SACtCC,WAAY,CAAEF,SAAU,OAAQC,UAAW,SAC3CrB,IAAKvc,EAAKuc,IACVX,KAAMA,EACNkC,SAAU,SAACC,EAAcu9C,GAAf,OAAuCz/C,EAAQy/C,IACzDt9C,cAAe07C,IAGrB15D,IAASw5D,GAAiBx+D,SAASgF,EAAKA,KAAK1E,OAC3CvE,GAAA,qBAAKwlB,IAAKY,IAAIC,gBAAgBpd,EAAKA,SAErCA,GACEjJ,GAAA,yBACIA,GAAA,uBAAO3D,GAAI,wBAAyBkI,KAAM,OAAQiiB,MAAO,CAAE5lB,SAAU,QAASs5C,KAAM,cACpFl6C,GAAA,sBAAWumB,KACXvmB,GAAA,uBAAIoD,EAAMkB,EAAE,+CAQxCtE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAAS2uC,IAEb9uC,GAAA,cAAConB,GAAA,EAAD,CACIE,SAAS,EACTD,SAAUjkB,EAAMkB,EAAE,iBAClBnE,QAASkjE,EACT/sC,QAAS0sC,mBCrHdr+D,kBAxES,SAACvB,GAAgC,IAAAshB,EAC7BC,qBAAS,GADoBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC9CxN,EAD8C0N,EAAA,GACxCo8C,EADwCp8C,EAAA,GAAAG,EAE7BJ,oBAAS,IAFoBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAE9CsO,EAF8CrO,EAAA,GAExCw/C,EAFwCx/C,EAAA,GAAAG,EAG3BR,qBAAS,GAHkBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG9CpoB,EAH8CqoB,EAAA,GAGvCq/C,EAHuCr/C,EAAA,GAKrDhiB,EAAM+9D,WAAW,SAACC,EAAgBC,GAC3BA,EACCmD,EAAQnD,IAERmD,EAAQ,IACRC,GAAS,IAEbzD,EAAQI,KAGZ,IAWMtyB,EAAS,WACX1rC,EAAMo1C,WACN7yB,KAGEA,EAAa,WACf6+C,EAAQ,IACRC,GAAS,IAGPC,EAAa,WACfthE,EAAMq+D,aAAapuC,GACnB1N,KAGJ,OACI3lB,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMA,EAAMzS,QAASqqC,EAAQjpB,WAAW,GAC3C7lB,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,iCACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,cAACk4C,GAAA,EAAD,CAAO3zC,KAAK,MACLwiB,SA/BE,SAACjrB,EAAyBsrD,GAtB/B,IAACj9C,EAuBbq6D,EAAQpd,EAAOnlD,OACfwiE,IAvBO,MADMt6D,EAwBSi9C,EAAOnlD,QApBO,OAAjCkI,EAAIsB,MAAM,sBAkDExJ,MAAOoxB,EACPmzB,OAAO,EACPx+B,YAAY,uCACZ28C,UAAU,EACV5nE,MAAOA,EACPisC,WAAW,EACX+iB,UAjCG,SAACjwD,GACF,KAAdA,EAAE8oE,SACDF,KAgCW56C,KAAM9pB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQ+qB,MAAM,EAAMlzB,QAASwlB,OAGzD3lB,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAAS2uC,IAEb9uC,GAAA,cAAConB,GAAA,EAAD,CACIE,SAAS,EACTD,SAAUjkB,EAAMkB,EAAE,iBAClBnE,QAASukE,EACThwB,SAAU33C,QCyGf4H,kBA/KW,SAACvB,GAKvB,IAAMyhE,EAAW1X,kBAA8B,MALUzoC,EAMjBC,oBAAmB,IANFC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAMlDogD,EANkDlgD,EAAA,GAMpCmgD,EANoCngD,EAAA,GAAAG,EAOjBJ,oBAAmB,IAPFK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAOlDigD,EAPkDhgD,EAAA,GAOpCigD,EAPoCjgD,EAAA,GAAAG,EAQHR,oBAAiB,IARdS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAQlD+/C,EARkD9/C,EAAA,GAQ7B+/C,EAR6B//C,EAAA,GAAAE,EASHX,oBAAiB,IATdY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GASlD8/C,EATkD7/C,EAAA,GAS7B8/C,EAT6B9/C,EAAA,GAYnD+/C,EAAe/+D,OAAe++D,YACpCA,EAAY7lE,OAEZ,IAAM8lE,EAAWpY,kBAA8B,MACzCqY,EAAgBrY,kBAAiB,IAhBkByV,EAiBvBj+C,oBAAkB,IAjBKk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAiBvC6C,GAjBuC5C,EAAA,GAAAA,EAAA,IAAAC,EAkBrBn+C,qBAA4B,GAlBPo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAkBlD4C,EAlBkD3C,EAAA,GAkBjC4C,EAlBiC5C,EAAA,GAmBnD6C,EAAkBzY,oBAClB0Y,EAAkB1Y,oBAExB/sD,qBAAU,WACN,IAAI0lE,EAAgC,GAChCC,EAAgC,GACpCT,EAAYU,aAAaC,iBAAiB,SAACC,GAAiB,IAAAp0D,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IACxD,QAAAiR,EAAAD,EAAmBi0D,EAAnBz4D,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAA4B,KAAnBq0D,EAAmBj0D,EAAAjQ,MACxBujE,EAAcpY,QAASlpD,KAAK,CAAEy1B,MAAOwsC,EAAOxsC,MAAOysC,SAAUD,EAAOC,SAAUC,KAAMF,EAAOE,QAFvC,MAAAt4D,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,GAIxD/U,QAAQC,IAAIsoE,EAAcpY,SAE1B,IAAMkZ,EAAqBd,EAAcpY,QAAQrpD,OAAO,SAAAoiE,GAAM,MAAoB,eAAhBA,EAAOE,OACnEE,EAAqBf,EAAcpY,QAAQrpD,OAAO,SAAAoiE,GAAM,MAAoB,eAAhBA,EAAOE,OACzEtB,EAAgBuB,GAChBrB,EAAgBsB,GAEhBT,EAAyBN,EAAcpY,QAAS7jB,KAAM,SAAAi9B,GAAC,MAAe,eAAXA,EAAEH,OAAwBD,SACrFjB,EAAuBW,GACvBC,EAAyBP,EAAcpY,QAAS7jB,KAAM,SAAAi9B,GAAC,MAAe,eAAXA,EAAEH,OAAyBD,SACtFf,EAAuBU,KAG3BT,EAAYmB,kBAAkB,CAACP,QAAQ,CAAC,QAAS,SAAUQ,OAAO,GAAIC,WAAW,SAChF3nE,KAAK,SAAC4nE,GACH3pE,QAAQC,IAAI0pE,GACZ,IAAIC,EAAYrB,EAAcpY,QAASj9C,IAAI,SAAA22D,GAAE,OAAIA,EAAGV,WACpDnpE,QAAQC,IAAI2pE,GACZ,IAAIE,EAAe,GAJI35D,GAAA,EAAAC,GAAA,EAAAC,OAAArM,EAAA,IAKvB,QAAAsM,EAAAC,EAAkBo5D,EAAlBn5D,OAAAC,cAAAN,GAAAG,EAAAC,EAAAG,QAAAC,MAAAR,GAAA,EAA0B,KAAjB45D,EAAiBz5D,EAAAtL,OACqB,IAAvC4kE,EAAU7P,QAAQgQ,EAAMZ,YACxBnpE,QAAQC,IAAI,qBACZ6pE,EAAa7iE,KAAK8iE,KARH,MAAAj5D,GAAAV,GAAA,EAAAC,EAAAS,EAAA,YAAAX,GAAA,MAAAI,EAAAQ,QAAAR,EAAAQ,SAAA,WAAAX,EAAA,MAAAC,GAWvBm4D,EAAasB,GAEblB,EAAgBzY,QAAU2Z,EAAax9B,KAAK,SAAAjlC,GAAC,OAAIA,EAAE8hE,WAAaN,IAChEF,EAAgBxY,QAAU2Z,EAAax9B,KAAK,SAAAjlC,GAAC,OAAIA,EAAE8hE,WAAaL,IAE3DF,EAAgBzY,QAIhBwY,EAAgBxY,SAIrBnwD,QAAQC,IAAI2oE,EAAgBzY,SAC5ByY,EAAgBzY,QAAS6Z,OAAOpC,EAASzX,SACzCwY,EAAgBxY,QAAS6Z,OAAO1B,EAASnY,UALrCnwD,QAAQC,IAAI,+BAJZD,QAAQC,IAAI,kCAWrB,IAEHkD,qBAAU,WACFylE,EAAgBzY,SAAYwY,GAAwC,IAArBV,GAAgD,IAArBE,IAG3EF,GAAuBW,EAAgBzY,QAASgZ,UAC/Cd,EAAYmB,kBAAkB,CAACP,QAAQ,CAAC,SAAUgB,eAAehC,EAAqBwB,OAAO,GAAIC,WAAW,SAC3G3nE,KAAK,SAAC4nE,GACHf,EAAgBzY,QAAS+Z,OAAOtC,EAASzX,SACzCyY,EAAgBzY,QAAUwZ,EAAO,GACjCA,EAAO,GAAGK,OAAOpC,EAASzX,WAG/BgY,GAAuBQ,EAAgBxY,QAASgZ,UAC/Cd,EAAYmB,kBAAkB,CAACP,QAAQ,CAAC,SAAUkB,YAAYhC,IAC7DpmE,KAAK,SAAC4nE,GACHhB,EAAgBxY,QAAS+Z,OAAO5B,EAASnY,SACzCwY,EAAgBxY,QAAUwZ,EAAO,GACjCA,EAAO,GAAGK,OAAO1B,EAASnY,aAGnC,CAAC8X,EAAqBE,IAEzB,IAAMiC,EAAqBvC,EAAa30D,IAAI,SAAAg2D,GACxC,MAAO,CAACnkE,IAAKmkE,EAAOC,SAAUnkE,MAAOkkE,EAAOC,SAAUj8C,KAAMg8C,EAAOxsC,SAGjE2tC,EAAoBtC,EAAa70D,IAAI,SAAAg2D,GACvC,MAAO,CAACnkE,IAAKmkE,EAAOC,SAAUnkE,MAAOkkE,EAAOC,SAAUj8C,KAAMg8C,EAAOxsC,SAevE,OACI35B,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAMzS,QAASrB,EAAMo1C,SAAU3yB,WAAW,GACzD7lB,GAAA,cAAC4lB,GAAA,EAAME,OAAP,qBACA9lB,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,qBAAKwmB,MAAO,CAAE2uB,QAAS,OAAQC,cAAe,MAAOE,eAAgB,kBACjEt1C,GAAA,cAACi4C,GAAA,EAAD,KACIj4C,GAAA,cAACi4C,GAAA,EAAKsvB,MAAN,KACIvnE,GAAA,qCACAA,GAAA,cAACuuD,GAAA,EAAD,CACIoW,UAAU,EACV1iE,MAAOijE,EACP/d,QAASkgB,EACTtgD,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa6jE,EAAuB7jE,EAAKW,WAG3DjC,GAAA,cAACi4C,GAAA,EAAKsvB,MAAN,KACIvnE,GAAA,yCACAA,GAAA,cAACuuD,GAAA,EAAD,CACIoW,UAAU,EACV1iE,MAAOmjE,EACPje,QAASmgB,EACTvgD,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa+jE,EAAuB/jE,EAAKW,WAG3DjC,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUq+C,EAAkB,kBAAoB,eAChDvlE,QA9BM,WAC1BwlE,GAAUD,IA8BU3vB,MAAO2vB,EAAkB,WAAa,aAG9C1lE,GAAA,yBACIA,GAAA,uBACIwnE,UAAU,EACVjjD,MAAO,IACPkjD,OAAO,EACPrd,IAAKya,IAET7kE,GAAA,uBACIwnE,UAAU,EACVC,MAAO/B,EACPtb,IAAKmb,OAKrBvlE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAASiD,EAAMo1C,WAEnBx4C,GAAA,cAAConB,GAAA,EAAD,CACIkP,QAASlzB,EAAMskE,mBACfpgD,SAAS,EACTD,SAAU,OACVlnB,QAlEI,WACZiD,EAAMskE,oBAIVtkE,EAAMukE,kBAAkB,CAACC,MAAOxC,EAAqByC,MAAO3C,WN7HhEnrC,GAAyB,KACzB+tC,GAAgB,EAChBC,GAA8C,aAC9CC,GAA+B,KAC/BC,GAAkC,KAClCC,GAA2B,KAC3BC,GAAgC,eAE/BlM,iMAyCL,IAAM7sB,GAAc,WAChB,OAAOrV,IAAUA,GAAOquC,aAAeruC,GAAOsuC,MAsB5CC,GAAY,WACXH,IACC5hE,OAAOgiE,aAAaJ,IAGxBA,GAAmB5hE,OAAOs8B,WAAW,WAC9B9I,IAAUqV,OACTnyC,QAAQC,IAAI,sDACZ68B,GAAOqW,UAGZ,OAKDvrC,GAAU,YACZk1B,GAAS,IAAIyuC,UAAU,+CAGhBC,OAAS,SAACpL,GACbpgE,QAAQC,IAAI,sCACZorE,KACAR,GAAgB,GAEpB/tC,GAAO2uC,QAAU,SAACrL,GACX8K,KACClrE,QAAQC,IAAI,6CACZqJ,OAAOgiE,aAAaJ,MAI5BpuC,GAAO4uC,UAAYZ,IAGvBljE,KAGA,IOtGKo3D,GPgKU2M,GA1Da,CACxBC,mBAAoB,SAACxsE,EAAYysE,EAAmB5uB,EAAcC,GAC3DpgB,IAAUqV,MACTrV,GAAOgvC,KAAKz+D,KAAKC,UAAU,CAAEhG,KAAM,sBAAuBlI,KAAIysE,YAAW5uB,OAAMC,UAGvF6uB,iBAAkB,SAAC3sE,EAAYysE,EAAmB7xD,GAC3C8iB,IAAUqV,MACTrV,GAAOgvC,KAAKz+D,KAAKC,UAAU,CAAEhG,KAAM,oBAAqBlI,KAAIysE,YAAW7xD,aAG/EgyD,iBAAkB,SAAC5sE,EAAYysE,EAAmB/hD,GAC9CihD,GAAgB3rE,EAChB4rE,GAAmBa,EAEnBf,GAAmB,SAACjsE,GAChB,IAAMwF,EAAgBgJ,KAAK2gD,MAAMnvD,EAAEwF,MAEnC,OAAQA,EAAKiD,MACT,KAAK03D,GAAYiN,yBACbjsE,QAAQC,IAAI,iDAAkDoE,GAC9DgnE,KAEA/mE,OAAOtF,KAAKqF,EAAKud,OAAO7a,QAAQ,SAAAiE,GAC5B,GAAG5L,IAAO4L,EAAV,CADsC,IAK/BrH,EAAYU,EAAKud,MAAM5W,GAAvBrH,SAEPmmB,EAAS9e,EAAQrH,MAErB,MACJ,KAAKq7D,GAAYkN,oBACbpiD,EAASzlB,EAAKjF,GAAI,CAAE69C,KAAM54C,EAAK44C,KAAMC,IAAK74C,EAAK64C,MAC/C,MACJ,KAAK8hB,GAAYmN,kBACbriD,EAASzlB,EAAKjF,GAAIiF,EAAK2V,UAMhC8iB,KACCA,GAAO4uC,UAAYZ,GArGlB,SAAPsB,IACCtvC,IAAUqV,MAAiB44B,IAAiBC,GAC3CluC,GAAOgvC,KAAKz+D,KAAKC,UAAU,CAAChG,KAAM03D,GAAYqN,iBAAkBjtE,GAAI2rE,GAAec,UAAWb,OAE9FH,KAEG/tC,IACCA,GAAOqW,QAGXnzC,QAAQC,IAAI,kDAAoD4qE,IAChEjjE,MAGJqjE,GAAc3hE,OAAOs8B,WAAW,WAC5BwmC,KACD,KAsFKA,KAGRE,gCAAiC,WAC1BrB,IACC3hE,OAAOgiE,aAAaL,IAGxBF,GAAgB,KAChBC,GAAmB,OQlIrBuB,YAAwC,CAC1CC,oBAAqB,CAACvvB,KAAM,EAAGC,IAAK,GACpCuvB,mBAAoB,CAACrlD,EAAG,EAAGC,EAAG,GAC9BqlD,qBAAsB,CAACtlD,EAAG,EAAGC,EAAG,KAG9BslD,GAA0B,CAC5BC,YAAa,oCACbC,cAAe,sCACfC,KAAQ,8BAiMGC,GA9LI,SAAC5mE,GAChB,IAAMyhE,EAAW1X,kBAAY,MACvBoY,EAAWpY,kBAAY,MAFczoC,EAGPC,sBAHOC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGpCulD,EAHoCrlD,EAAA,GAGxBslD,EAHwBtlD,EAAA,GAIrCulD,EAAiBhd,kBAAuBqc,IAJHzkD,EAKTJ,qBAAkB,GALTK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAKpCqlD,EALoCplD,EAAA,GAKzBqlD,EALyBrlD,EAAA,GAOrCslD,EAAiB,SAACjmD,EAAWC,GAI/B,GAHA6lD,EAAe/c,QAAQuc,qBAAqBtlD,EAAIA,EAChD8lD,EAAe/c,QAAQuc,qBAAqBrlD,EAAIA,EAE7ClhB,EAAMmnE,iBAAkB,CACvB,IAAMC,EAAcpnE,EAAMmnE,iBAAiBJ,EAAe/c,SAC1DnwD,QAAQC,IAAI,wCAAyCitE,EAAgBK,EAAapnE,EAAMqnE,aACxF7B,GAAoBC,mBAAmBzlE,EAAMoE,KAAKkjE,WAAYC,mBAAoBvnE,EAAM0lE,UAAW0B,EAAYtwB,KAAMswB,EAAYrwB,OAIzI/5C,qBAAU,WACsB,MAAzBgD,EAAMoE,KAAKojE,YAA+C,MAAzBxnE,EAAMoE,KAAKkjE,aAC/CtnE,EAAMoE,KAAKojE,WAAY3D,OAAOpC,EAASzX,SACnChqD,EAAMqnE,aACNrnE,EAAMoE,KAAKkjE,WAAYzD,OAAO1B,EAASnY,WAE5C,CAAChqD,EAAMoE,KAAKkjE,WAAYtnE,EAAMoE,KAAKojE,aAEtCxqE,qBAAU,WAEN,GADAnD,QAAQC,IAAI,2CAA4CkG,EAAMynE,QACzDhG,EAASzX,UAIXhqD,EAAMqnE,YAAT,CAIA,IAAII,EAASznE,EAAMynE,QAAUznE,EAAM0nE,qBAAuB,GAAM,GAC5D1nE,EAAMoE,KAAKujE,cACX9tE,QAAQC,IAAI,0DACZ2tE,EAAS,GAGb5tE,QAAQC,IAAI,6BAA8B2tE,GACzCtF,EAASnY,QAAgByd,OAASA,EAErB,IAAXA,GAAkBhG,EAASzX,QAAgB4d,SAC1C/tE,QAAQC,IAAI,0BAA2B2nE,EAASzX,QAAgB4d,OAAQH,EAAQhG,EAASzX,SACxFyX,EAASzX,QAAgB6d,QACzB1F,EAASnY,QAAgB6d,SAG3BJ,EAAS,GAAMhG,EAASzX,QAAgB4d,SACvC/tE,QAAQC,IAAI,wBAAyB2nE,EAASzX,QAAgB4d,OAAQH,EAAQhG,EAASzX,SACtFyX,EAASzX,QAAgB8d,OACzB3F,EAASnY,QAAgB8d,UAE/B,CAAC9nE,EAAMynE,OAAQznE,EAAMoE,KAAKujE,YAAa3nE,EAAM0nE,uBAEhD1qE,qBAAU,WACN,IAAM+qE,EAAkB,WACpBjB,GAAc,IAGZkB,EAAoB,SAACtvE,GACnBsH,EAAMqnE,aAAeR,GACrBK,EAAexuE,EAAEuvE,QAASvvE,EAAEwvE,UAI9BC,EAAoB,SAACzvE,GACnBsH,EAAMqnE,aAAeR,GACrBK,EAAexuE,EAAE0vE,QAAQ,GAAGH,QAASvvE,EAAE0vE,QAAQ,GAAGF,UAS1D,OALA9sE,SAAS8B,iBAAiB,UAAW6qE,GACrC3sE,SAAS8B,iBAAiB,WAAY6qE,GACtC3sE,SAAS8B,iBAAiB,YAAa8qE,GACvC5sE,SAAS8B,iBAAiB,YAAairE,GAEhC,WACH/sE,SAAS+B,oBAAoB,UAAW4qE,GACxC3sE,SAAS+B,oBAAoB,WAAY4qE,GACzC3sE,SAAS+B,oBAAoB,YAAa6qE,GAC1C5sE,SAAS+B,oBAAoB,YAAagrE,MAMlD,IAA0B92B,EAIpBg3B,GAJoBh3B,EAIWrxC,EAAMqnE,YAD1B,IACkD,IAAMrnE,EAAMoE,KAAKujE,YAAa,IAAsB,IAAf3nE,EAAMynE,QAHnGT,EAAkB,EAAP31B,EAAWA,GAI3Bi3B,EAAexmC,KAAKC,MAAMsmC,EAAc,GACxCE,EAAYvoE,EAAMoE,KAAKokE,WAAaxoE,EAAMqnE,aAAernE,EAAMynE,OAAS,GAAKznE,EAAMoE,KAAKujE,aACxFc,GAAgBzoE,EAAMqnE,aAAgC,IAAjBrnE,EAAMynE,SAAiBznE,EAAMoE,KAAKujE,YAM7E,OACI5mE,GAAAC,EAAAC,cAAA,OACImiB,MAAO,CACHjC,MAAOknD,EACPjnD,OAAQinD,EACRC,eACA9qE,SAAU,WACVs5C,KAAM92C,EAAMoE,KAAK5G,SAASs5C,KAAOuxB,EAAc,EAC/CtxB,IAAK/2C,EAAMoE,KAAK5G,SAASu5C,IAAMsxB,EAAc,EAC7CK,cAAe,OACfzhD,OAAQjnB,EAAMqnE,YAAa,OAAS,UACpCsB,OAAQ3oE,EAAMqnE,YAAa,GAAK,EAChCuB,gBAAiB,iBAGrBC,YAAa,SAACnwE,GACNquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMoE,KAAK5G,SACxDupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAEuvE,QACL/mD,EAAGxoB,EAAEwvE,SAETpB,GAAc,IAItBgC,aAAc,SAACpwE,GACXquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMoE,KAAK5G,SACxDupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAE0vE,QAAQ,GAAGH,QAChB/mD,EAAGxoB,EAAE0vE,QAAQ,GAAGF,SAEpBpB,GAAc,IAGlBiC,cAvCgB,WACpB9B,GAAcD,GACdntE,QAAQC,IAAI,mBAuCRiH,GAAAC,EAAAC,cAAA,OAAKmiB,MAAKjlB,OAAA2N,GAAA,EAAA3N,CAAA,CACNgjB,MAAOknD,EACPjnD,OAAQinD,EACRC,eACAU,SAAU,SACVzL,gBAAiB,UACjBmL,cAAe,QACXL,EAAY,GAAKroE,EAAMoE,KAAK6kE,MAAQ,CAACC,OAAQ,qBAAuB,CAACA,OAAQ,qBAAwB,CAAEA,OAAQ,qBAP7G,CAQNN,gBAAiB,gBACjBD,OAAQ3oE,EAAMqnE,YAAa,GAAK,KAIhCtmE,GAAAC,EAAAC,cAAA,SACImjE,UAAU,EACV+E,yBAAyB,EACzBniB,IAAKya,EACL4C,MAAOrkE,EAAMqnE,YACbjkD,MAAO,CAAEjC,MAAOknD,EAAajnD,OAAQinD,EAAae,UAAW,QAASC,eAAgB,SAAUX,cAAe,OAAQ32B,QAASw2B,EAAW,QAAU,OAAQI,OAAQ3oE,EAAMqnE,YAAa,EAAI,KAEhMtmE,GAAAC,EAAAC,cAAA,SACImjE,UAAU,EACVC,MAAOrkE,EAAMqnE,YACbrgB,IAAKmb,KAEPoG,GAAaxnE,GAAAC,EAAAC,cAAC0gD,GAAA,EAAD,CACXv/B,IAAKpiB,EAAMoE,KAAK48C,OAChBA,QAAQ,EACR/O,cAAc,SACd7uB,MAAO,CACHjC,MAAOknD,EACPjnD,OAAQinD,EACRe,UAAW,QACXC,eAAgB,SAChBX,cAAe,OACf/nE,OAAQ8nE,EAAc,kBAAoB,WAItD1nE,GAAAC,EAAAC,cAAA,OAAKmiB,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,QAASxyB,KAAM,EAAG31B,MAAO,OAAQwF,UAAW,SAAUisB,SAAU,OAAQ81B,cAAe,SAAW1oE,EAAMoE,KAAKc,MAEzJnE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,qCAAuCvkB,EAAMoE,KAAKujE,YAAc,UAAY,MAE1F5mE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,0CAA4CvkB,EAAMoE,KAAKmlE,SAAW,UAAY,MAE5FxoE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,QAAWiiD,GAAkBxmE,EAAMoE,KAAKolE,cAAiB,KAAOxpE,EAAMoE,KAAKqlE,QAAU,UAAY,QChMrHvH,GAAe/+D,OAAe++D,YAiuBrBwH,eAtsBX,SAAAA,EAAa1pE,GAAyB,IAAAqd,EAAA,OAAAlf,OAAAC,GAAA,EAAAD,CAAAE,KAAAqrE,IAClCrsD,EAAAlf,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAurE,GAAAjrE,KAAAJ,KAAM2B,KAxBF2pE,gBAuB8B,EAAAtsD,EAtB9BusD,UAsB8B,EAAAvsD,EArB9BwsD,iBAqB8B,EAAAxsD,EAnB/Btd,MAA0B,CAC7B+pE,UAAU,CACN7wE,GAAIokB,EAAKrd,MAAM/G,GACfiM,KAAMmY,EAAKrd,MAAMkF,KACjB87C,OAAQ3jC,EAAKrd,MAAMghD,OACnBxjD,SAAU6f,EAAKrd,MAAM+pE,gBAErBP,aAAc,GACdhB,UAAU,EACVS,OAAO,EACPtB,aAAa,EACb4B,UAAU,EACVE,SAAS,GAEbO,YAAY,GACZC,eAAe,CAAChpD,EAAE,EAAEC,EAAE,GACtBgpD,WAAW,GAMX7sD,EAAKrb,kBAAoBqb,EAAKrb,kBAAkBke,KAAvB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACzBA,EAAKnb,mBAAqBmb,EAAKnb,mBAAmBge,KAAxB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC1BA,EAAK8sD,qBAAuB9sD,EAAK8sD,qBAAqBjqD,KAA1B/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC5BA,EAAK+sD,oBAAsB/sD,EAAK+sD,oBAAoBlqD,KAAzB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC3BA,EAAKgtD,mBAAqBhtD,EAAKgtD,mBAAmBnqD,KAAxB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC1BA,EAAKitD,uBAAyBjtD,EAAKitD,uBAAuBpqD,KAA5B/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC9BA,EAAKktD,oBAAsBltD,EAAKktD,oBAAoBrqD,KAAzB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC3BA,EAAKmtD,mBAAqBntD,EAAKmtD,mBAAmBtqD,KAAxB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC1BA,EAAKotD,aAAeptD,EAAKotD,aAAavqD,KAAlB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACpBA,EAAKqtD,iBAAmBrtD,EAAKqtD,iBAAiBxqD,KAAtB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACxBA,EAAKstD,mBAAqBttD,EAAKstD,mBAAmBzqD,KAAxB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC1BA,EAAKqqD,qBAAuBrqD,EAAKqqD,qBAAqBxnD,KAA1B/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC5BA,EAAKutD,iBAAmBvtD,EAAKutD,iBAAiB1qD,KAAtB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACxBA,EAAKwtD,+BAAiCxtD,EAAKwtD,+BAA+B3qD,KAApC/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACtCA,EAAKytD,mBAAqBztD,EAAKytD,mBAAmB5qD,KAAxB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAC1BA,EAAK0tD,aAAe1tD,EAAK0tD,aAAa7qD,KAAlB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACpBA,EAAK2tD,UAAY3tD,EAAK2tD,UAAU9qD,KAAf/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACjBA,EAAK4tD,gBAAkB5tD,EAAK4tD,gBAAgB/qD,KAArB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACvBA,EAAK6tD,aAAe7tD,EAAK6tD,aAAahrD,KAAlB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACpBA,EAAK8tD,YAAc9tD,EAAK8tD,YAAYjrD,KAAjB/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KACnBA,EAAKynC,OAASznC,EAAKynC,OAAO5kC,KAAZ/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAvBoBA,8NA2BlC6kD,GAAY7lE,OAEZxC,QAAQC,IAAI,uBACZD,QAAQC,IAAI,0BAA2BuE,KAAK0B,MAAM+pE,UAAU7wE,GAAIoF,KAAK2B,MAAM/G,GAAIoF,KAAK2B,MAAM0lE,WAC1F7rE,QAAQC,IAAI,gCAEaooE,GAAYmB,kBACjC,CAAEP,QAAS,CAAE,QAAS,SACpBgB,eAAgBzlE,KAAK2B,MAAMorE,YAC3BpH,YAAa3lE,KAAK2B,MAAMqrE,4BAH9BhtE,KAAKwrE,mBAMC9lB,EAAU,CACZunB,MAAO,CACHC,OAAQ,+BACRC,IAAK,oCAETC,KAAM,4DAEVptE,KAAKsrE,WAAa,IAAIzH,GAAYwJ,gBAAgB,KAAM,KAAM3nB,GAE9DlqD,QAAQC,IAAI,+BAAgCuE,KAAKsrE,YAEjDtrE,KAAKsrE,WAAYzsE,iBACbglE,GAAY5tC,OAAOq1C,WAAWgC,uBAC9BttE,KAAK+rE,qBACT/rE,KAAKsrE,WAAYzsE,iBACbglE,GAAY5tC,OAAOq1C,WAAWiC,kBAC9BvtE,KAAKgsE,oBACThsE,KAAKsrE,WAAYzsE,iBACbglE,GAAY5tC,OAAOq1C,WAAWkC,wBAC9BxtE,KAAKisE,wBAETpI,GAAYU,aAAa1lE,iBACrBglE,GAAY5tC,OAAOsuC,aAAakJ,oBAChCztE,KAAKksE,qBAETlsE,KAAKsrE,WAAYloE,UAEjBpD,KAAKosE,eACL5wE,QAAQC,IAAI,iDACZ0rE,GAAoBK,iBAChBxnE,KAAK2B,MAAM/G,GAAIoF,KAAK2B,MAAM0lE,UAAWrnE,KAAKusE,kBAE9C/wE,QAAQC,IAAI,+BAGN2gE,EAAQp8D,KAAK2B,MAAM0zB,MAAMiK,kBACzBouC,EAAkB,CACpBj1B,MAAQ,EAAIz4C,KAAK2B,MAAM0zB,MAAMkK,sBAAsB3c,EAC1C5iB,KAAK2B,MAAM+pE,gBAAgBjzB,KAAO2jB,EAC3C1jB,KAAO,EAAI14C,KAAK2B,MAAM0zB,MAAMkK,sBAAsB1c,EACzC7iB,KAAK2B,MAAM+pE,gBAAgBhzB,IAAM0jB,GAE9C5gE,QAAQC,IAAI,wBAAyBiyE,EAAiBtR,GACtDp8D,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtsE,SAAUuuE,MAGlBlyE,QAAQC,IAAI,wBAAyBuE,KAAK2B,MAAM0zB,MAAMiK,kBAAmBt/B,KAAK2B,MAAM0zB,MAAMkK,uBACpFouC,EAAkB,SAACpqC,GACrBxjB,EAAKsrC,SAAS,CACVugB,eAAe,CAAChpD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,MAI/C+qD,EAAe,SAACxR,EAAe74B,GACjCxjB,EAAKsrC,SAAS,CACVwgB,WAAWzP,EACXwP,eAAeroC,KAIpBvjC,KAAK2B,MAAM0zB,QACJkO,EAAYvjC,KAAK2B,MAAM0zB,MAAMkK,sBACnCv/B,KAAKqrD,SAAS,CACVugB,eAAgB,CAAChpD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,GAC9CgpD,WAAY7rE,KAAK2B,MAAM0zB,MAAMiK,oBAEjCt/B,KAAK2B,MAAM0zB,MAAMoK,UAAUkuC,GAC3B3tE,KAAK2B,MAAM0zB,MAAMuK,OAAOguC,sBAGrB,WACA7tD,EAAKpe,MAAM0zB,QACVtV,EAAKpe,MAAM0zB,MAAMqK,WAAWiuC,GAC5B5tD,EAAKpe,MAAM0zB,MAAMwK,QAAQ+tC,oJAKjBC,GAA6B,IAAA1tD,EAAAngB,KAG7C,GAFAxE,QAAQC,IAAI,+BAAgCuE,KAAK2B,MAAM0zB,QAAUw4C,EAAUx4C,OAExEr1B,KAAK2B,MAAM0zB,QAAUw4C,EAAUx4C,MAAO,CACrC,IAAM+mC,EAAQp8D,KAAK2B,MAAM0zB,MAAMiK,kBACzBouC,EAAkB,CACpBj1B,MAAQ,EAAIz4C,KAAK2B,MAAM0zB,MAAMkK,sBAAsB3c,EAC5C5iB,KAAK2B,MAAM+pE,gBAAgBjzB,KAAO2jB,EACzC1jB,KAAO,EAAI14C,KAAK2B,MAAM0zB,MAAMkK,sBAAsB1c,EAC5C7iB,KAAK2B,MAAM+pE,gBAAgBhzB,IAAM0jB,GAE3C5gE,QAAQC,IAAI,wBAAyBiyE,EAAiBtR,GACtDp8D,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtsE,SAAUuuE,MAItB,GAAI1tE,KAAK2B,MAAM0zB,QAAUw4C,EAAUx4C,MAAO,CACtC75B,QAAQC,IAAI,wBAAyBuE,KAAK2B,MAAM0zB,MAAMiK,kBAAmBt/B,KAAK2B,MAAM0zB,MAAMkK,uBAC1F,IAAMouC,EAAkB,SAACpqC,GACrBpjB,EAAKkrC,SAAS,CACVugB,eAAe,CAAChpD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,MAI/C+qD,EAAe,SAACxR,EAAe74B,GACjCpjB,EAAKkrC,SAAS,CACVwgB,WAAWzP,EACXwP,eAAeroC,KAIvB,GAAGvjC,KAAK2B,MAAM0zB,MAAO,CACjB,IAAMkO,EAAYvjC,KAAK2B,MAAM0zB,MAAMkK,sBACnCv/B,KAAKqrD,SAAS,CACVugB,eAAgB,CAAChpD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,GAC9CgpD,WAAY7rE,KAAK2B,MAAM0zB,MAAMiK,oBAEjCt/B,KAAK2B,MAAM0zB,MAAMoK,UAAUkuC,GAC3B3tE,KAAK2B,MAAM0zB,MAAMuK,OAAOguC,GAG5B,OAAO,WACAztD,EAAKxe,MAAM0zB,QACVlV,EAAKxe,MAAM0zB,MAAMqK,WAAWiuC,GAC5BxtD,EAAKxe,MAAM0zB,MAAMwK,QAAQ+tC,qDASrCzG,GAAoBW,gFAIpBtsE,QAAQC,IAAI,+BAAgCuE,KAAKsrE,YAIjD9vE,QAAQC,IAAIuE,KAAKsrE,YAEjBtrE,KAAKurE,KAAOvrE,KAAKsrE,WAAYwC,oBAAoB,WAAa9tE,KAAK2B,MAAM0lE,UALrD,CAChB0G,mBAAmB,IAKvB/tE,KAAKurE,KAAKj9B,GAAGu1B,GAAY5tC,OAAO+3C,WAAWC,kBAAmBjuE,KAAKmsE,oBAEnEnsE,KAAKurE,KAAKj9B,GAAGu1B,GAAY5tC,OAAO+3C,WAAWE,YAAaluE,KAAKqsE,kBAC7DrsE,KAAKurE,KAAKj9B,GAAGu1B,GAAY5tC,OAAO+3C,WAAWG,cAAenuE,KAAKssE,oBAK/DtsE,KAAKurE,KAAKhe,oDAIV/xD,QAAQC,IAAI,iFAGZD,QAAQC,IAAI,kFAGZD,QAAQC,IAAI,8EAKK,IAAAglB,EAAAzgB,KACjBxE,QAAQC,IAAI,+BAEZuE,KAAKwrE,YAAajpE,QAAQ,SAAAgjE,GACtB9kD,EAAK8qD,KAAM6C,SAAS7I,4CAKxB/pE,QAAQC,IAAI,0BAA2BuE,KAAKwrE,aACxCxrE,KAAKwrE,cACwB,UAA9BxrE,KAAKwrE,YAAa,GAAG1oE,KACpB9C,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtC,WAAYnpE,KAAKwrE,YAAY,GAC7BvC,WAAYjpE,KAAKwrE,YAAY,OAIrCxrE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtC,WAAYnpE,KAAKwrE,YAAY,GAC7BvC,WAAYjpE,KAAKwrE,YAAY,iDAM5BjG,GACb,IAAwB,IAApBA,EAAM8I,UAAV,CACA7yE,QAAQC,IAAI,iCAAkC8pE,EAAM3pC,UAAW2pC,GAE/D,IAAI+I,EAAUtuE,KAAK0B,MAAMiqE,YAAY7jC,KAAK,SAAA/hC,GAAI,OAAIA,EAAKnL,KAAO2qE,EAAM2D,qBACpE,GAAGoF,EAAQ,CACP,IAAIC,EAAYvuE,KAAK0B,MAAMiqE,YAAYpW,QAAQ+Y,GAC3C9gB,EAAK1tD,OAAAyZ,GAAA,EAAAzZ,CAAOE,KAAK0B,MAAMiqE,aAC3B,GAAuB,UAApBpG,EAAM3pC,UAAsB,CAC3B,IAAIxvB,EAAItM,OAAA2N,GAAA,EAAA3N,CAAA,GACD0tD,EAAM+gB,GADL,CAEJtF,WAAY1D,IAEhB/X,EAAM+gB,GAAaniE,EACnBpM,KAAKqrD,SAAS,CAACsgB,YAAane,IAC5BhyD,QAAQC,IAAI,eAAe+xD,QACxB,GAAuB,UAApB+X,EAAM3pC,UAAsB,CAClC,IAAIxvB,EAAItM,OAAA2N,GAAA,EAAA3N,CAAA,GACD0tD,EAAM+gB,GADL,CAEJpF,WAAY5D,IAEhB/X,EAAM+gB,GAAaniE,EACnBpM,KAAKqrD,SAAS,CAACsgB,YAAane,IAC5BhyD,QAAQC,IAAI,eAAe+xD,QAE3BhyD,QAAQC,IAAI,6CAEb,CAEH,IAAIg9C,EAAO,IAAuB,IAAhBhV,KAAK+qC,SACnB91B,EAAM,IAAuB,IAAhBjV,KAAK+qC,SAEC,UAApBjJ,EAAM3pC,UACL57B,KAAKqrD,SAAS,CACVsgB,YAAW,GAAA9mE,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CACJE,KAAK0B,MAAMiqE,aADP,CAEP,CACI/wE,GAAI2qE,EAAM2D,mBACVriE,KAAM7G,KAAK2B,MAAMkF,KACjB87C,OAAQ3iD,KAAK2B,MAAMghD,OACnBxjD,SAAU,CAACs5C,KAAKA,EAAKC,IAAIA,GACzByyB,aAAc,GACdlC,WAAY1D,EACZ4E,UAAU,EACVS,OAAO,EACPtB,aAAa,EACb4B,UAAU,EACVE,SAAS,OAIK,UAApB7F,EAAM3pC,UACZ57B,KAAKqrD,SAAS,CACVsgB,YAAW,GAAA9mE,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CACJE,KAAK0B,MAAMiqE,aADP,CAEP,CACI/wE,GAAI2qE,EAAM2D,mBACVriE,KAAM7G,KAAK2B,MAAMkF,KACjB87C,OAAQ3iD,KAAK2B,MAAMghD,OACnBxjD,SAAU,CAACs5C,KAAKA,EAAKC,IAAIA,GACzByyB,aAAc,GACdhC,WAAY5D,EACZ4E,UAAU,EACVS,OAAO,EACPtB,aAAa,EACb4B,UAAU,EACVE,SAAS,OAKrB5vE,QAAQC,IAAI,sCAGpBD,QAAQC,IAAI,2BAA4BuE,KAAK0B,MAAMiqE,aAEnDxE,GAAoBC,mBAAmBpnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UAAWrnE,KAAK0B,MAAM+pE,UAAUtsE,SAASs5C,KAAMz4C,KAAK0B,MAAM+pE,UAAUtsE,SAASu5C,iDAGrK6sB,IACS,IAApBA,EAAM8I,YAEIruE,KAAK0B,MAAMiqE,YAAY7jC,KAAK,SAAA/hC,GAAI,OAAIA,EAAKnL,KAAO2qE,EAAM2D,sBAEhElpE,KAAKqrD,SAAS,CACVsgB,YAAa3rE,KAAK0B,MAAMiqE,YAAYrpE,OAAO,SAAAyD,GAAI,OAAIA,EAAKnL,IAAM2qE,EAAM2D,uBAG5E1tE,QAAQC,IAAI,2BAA4BuE,KAAK0B,MAAMiqE,6DAInD,OACI3rE,KAAK0B,MAAM+pE,WAAazrE,KAAK0B,MAAM+pE,UAAUnC,kBACwB9pE,GAArEQ,KAAK0B,MAAMiqE,YAAY7jC,KAAK,SAAA2mC,GAAU,OAAIA,EAAWnF,uDAM5C1uE,EAAYiF,GAItBA,EAAKihC,eAAe,SACnBtlC,QAAQC,IAAI,4CACZuE,KAAK0uE,yBAAyB9zE,EAAIiF,IAC5BA,EAAKihC,eAAe,WAC1BtlC,QAAQC,IAAI,6CACZuE,KAAK2uE,uBAAuB/zE,EAAIiF,qDASfjF,EAAYuE,GACjC3D,QAAQC,IAAI,uBAAwB0D,EAAUvE,EAAIoF,KAAK0B,MAAMiqE,aAC7D,IAAI2C,EAAUtuE,KAAK0B,MAAMiqE,YAAY7jC,KAAK,SAAA/hC,GAAI,OAAIA,EAAKnL,KAAOA,IAE9D,GADAY,QAAQC,IAAI,8CAA+C6yE,GACxDA,EAAQ,CACP,IAAIC,EAAYvuE,KAAK0B,MAAMiqE,YAAYpW,QAAQ+Y,GAC3C9gB,EAAK1tD,OAAAyZ,GAAA,EAAAzZ,CAAOE,KAAK0B,MAAMiqE,aACvBv/D,EAAItM,OAAA2N,GAAA,EAAA3N,CAAA,GACD0tD,EAAM+gB,GADL,CAEJpvE,SAAUA,IAEdquD,EAAM+gB,GAAaniE,EACnB5Q,QAAQC,IAAI,6BAA8B+xD,EAAOxtD,KAAK0B,MAAMiqE,aAC5D3rE,KAAKqrD,SAAS,CAACsgB,YAAane,IAC5BhyD,QAAQC,IAAI,6BAA8BuE,KAAK0B,MAAMiqE,6DAGtC/wE,EAAYiF,GAC/BrE,QAAQC,IAAI,wBACZD,QAAQC,IAAI,uBAAwBb,EAAIiF,GACxCrE,QAAQC,IAAI,4BAA6BuE,KAAK0B,MAAMiqE,aACpD,IAAI2C,EAAUtuE,KAAK0B,MAAMiqE,YAAY7jC,KAAK,SAAA/hC,GAAI,OAAIA,EAAKnL,KAAOA,IAC9D,GAAG0zE,EAAQ,CACP,IAAIC,EAAYvuE,KAAK0B,MAAMiqE,YAAYpW,QAAQ+Y,GAC3C9gB,EAAK1tD,OAAAyZ,GAAA,EAAAzZ,CAAOE,KAAK0B,MAAMiqE,aACvBv/D,EAAItM,OAAA2N,GAAA,EAAA3N,CAAA,GACD0tD,EAAM+gB,GADL,CAEJ3D,MAAO/qE,EAAK+qE,MACZtB,YAAazpE,EAAKypE,YAClBa,SAAUtqE,EAAKsqE,SACfe,SAAUrrE,EAAKqrE,SACfE,QAASvrE,EAAKurE,QACdD,aAActrE,EAAKsrE,eAEvB3d,EAAM+gB,GAAaniE,EACnBpM,KAAKqrD,SAAS,CAACsgB,YAAane,IAC5BhyD,QAAQC,IAAI,+BAA+BuE,KAAK0B,MAAMiqE,qEAI/BjD,GAE3BltE,QAAQC,IAAI,+CAAgDitE,GAC5D,IAAMtM,EAAQp8D,KAAK2B,MAAM0zB,MAAMiK,kBAEzBsvC,EAAclG,EAAeR,qBAAqBtlD,EAAI8lD,EAAeT,mBAAmBrlD,EACxFisD,EAAcnG,EAAeR,qBAAqBrlD,EAAI6lD,EAAeT,mBAAmBplD,EAExFkmD,EAA2B,CAC7BtwB,KAAMiwB,EAAeV,oBAAoBvvB,KAAQm2B,EAAcxS,EAC/D1jB,IAAKgwB,EAAeV,oBAAoBtvB,IAAOm2B,EAAczS,GAWjE,OARGp8D,KAAK0B,MAAM+pE,WACVzrE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtsE,SAAU4pE,MAIfA,yCAMP,GAAK/oE,KAAK0B,MAAM+pE,WAAazrE,KAAK0B,MAAM+pE,UAAUtC,WAAlD,CAIA,IAAM2F,GAAqB9uE,KAAK0B,MAAM+pE,UAAUtB,SAC7C2E,EACC9uE,KAAK0B,MAAM+pE,UAAUtC,WAAW4F,SAEhC/uE,KAAK0B,MAAM+pE,UAAUtC,WAAW6F,OAEpChvE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELtB,SAAU2E,MAGlB3H,GAAoBI,iBAAiBvnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UACjG,CACI8C,SAAS2E,EACTlE,MAAM5qE,KAAK0B,MAAM+pE,UAAUb,MAC3BtB,YAAYtpE,KAAK0B,MAAM+pE,UAAUnC,YACjC4B,SAASlrE,KAAK0B,MAAM+pE,UAAUP,SAC9BE,QAAQprE,KAAK0B,MAAM+pE,UAAUL,QAC7BD,aAAanrE,KAAK0B,MAAM+pE,UAAUN,oDAM1C,GAAKnrE,KAAK0B,MAAM+pE,WAAczrE,KAAK0B,MAAM+pE,UAAUxC,WAAnD,CAGA,IAAMgG,EAAiBjvE,KAAK0B,MAAM+pE,UAAUxC,WAAWiG,UACpDD,EACCjvE,KAAK0B,MAAM+pE,UAAUxC,WAAW8F,SAEhC/uE,KAAK0B,MAAM+pE,UAAUxC,WAAW+F,OAEpChvE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELb,MAAOqE,MAGf9H,GAAoBI,iBAAiBvnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UACrG,CACI8C,SAASnqE,KAAK0B,MAAM+pE,UAAUtB,SAC9BS,MAAMqE,EACN3F,YAAYtpE,KAAK0B,MAAM+pE,UAAUnC,YACjC4B,SAASlrE,KAAK0B,MAAM+pE,UAAUP,SAC9BE,QAAQprE,KAAK0B,MAAM+pE,UAAUL,QAC7BD,aAAanrE,KAAK0B,MAAM+pE,UAAUN,0DAMtC,GAAKnrE,KAAK0B,MAAM+pE,UAAhB,CAIA,IAAM0D,GAAwBnvE,KAAK0B,MAAM+pE,UAAUnC,YACnDtpE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELnC,YAAa6F,MAGrBhI,GAAoBI,iBAAiBvnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UACrG,CACI8C,SAASnqE,KAAK0B,MAAM+pE,UAAUtB,SAC9BS,MAAM5qE,KAAK0B,MAAM+pE,UAAUb,MAC3BtB,YAAY6F,EACZjE,SAASlrE,KAAK0B,MAAM+pE,UAAUP,SAC9BE,QAAQprE,KAAK0B,MAAM+pE,UAAUL,QAC7BD,aAAanrE,KAAK0B,MAAM+pE,UAAUN,uDAMtC,GAAKnrE,KAAK0B,MAAM+pE,UAAhB,CAIA,IAAM2D,GAAqBpvE,KAAK0B,MAAM+pE,UAAUP,SAChDlrE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELP,SAAUkE,MAGlBjI,GAAoBI,iBAAiBvnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UACrG,CACI8C,SAASnqE,KAAK0B,MAAM+pE,UAAUtB,SAC9BS,MAAM5qE,KAAK0B,MAAM+pE,UAAUb,MAC3BtB,YAAYtpE,KAAK0B,MAAM+pE,UAAUnC,YACjC4B,SAASkE,EACThE,QAAQprE,KAAK0B,MAAM+pE,UAAUL,QAC7BD,aAAanrE,KAAK0B,MAAM+pE,UAAUN,oDAK9BkE,GAAkB,IAAAruD,EAAAhhB,KAC1B,GAAKA,KAAK0B,MAAM+pE,UAAhB,CAGA,IAAM6D,EAAkD,KAAtCtvE,KAAK0B,MAAM+pE,UAAUN,aAAuBkE,EAAW,GACnEE,GAAoBvvE,KAAK0B,MAAM+pE,UAAUL,QAE/CprE,KAAKqrD,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHE,KAAK0B,MAAM+pE,UADT,CAELL,QAASmE,EACTpE,aAAcmE,MAGtBnI,GAAoBI,iBAAiBvnE,KAAK0B,MAAM+pE,UAAUxC,WAAYC,mBAAoBlpE,KAAK2B,MAAM0lE,UACrG,CACI8C,SAASnqE,KAAK0B,MAAM+pE,UAAUtB,SAC9BS,MAAM5qE,KAAK0B,MAAM+pE,UAAUb,MAC3BtB,YAAYtpE,KAAK0B,MAAM+pE,UAAUnC,YACjC4B,SAASlrE,KAAK0B,MAAM+pE,UAAUP,SAC9BE,QAAQmE,EACRpE,aAAakE,IAIjBvI,aAAa9mE,KAAK2B,MAAM6tE,WAAW7jB,SACnC3rD,KAAK2B,MAAM6tE,WAAW7jB,QAAU7mD,OAAOs8B,WAAW,WAC9CpgB,EAAKqqC,SAAS,CACVogB,UAAU3rE,OAAA2N,GAAA,EAAA3N,CAAA,GACHkhB,EAAKtf,MAAM+pE,UADT,CAELL,SAAS,EACTD,aAAc,OAGtBhE,GAAoBI,iBAAiBvmD,EAAKtf,MAAM+pE,UAAUxC,WAAYC,mBAAoBloD,EAAKrf,MAAM0lE,UACrG,CACI8C,SAASnpD,EAAKtf,MAAM+pE,UAAUtB,SAC9BS,MAAM5pD,EAAKtf,MAAM+pE,UAAUb,MAC3BtB,YAAYtoD,EAAKtf,MAAM+pE,UAAUnC,YACjC4B,SAASlqD,EAAKtf,MAAM+pE,UAAUP,SAC9BE,SAAQ,EACRD,aAAa,MAGlB,mDAMc,IAAA7pD,EAAAthB,KAGjB,OADAxE,QAAQC,IAAI,wBAAyBuE,KAAK0B,MAAM+pE,UAAWzrE,KAAK2B,MAAM/G,GAAIoF,KAAK2B,MAAM0lE,UAAWrnE,KAAK0B,MAAMiqE,aACpG3rE,KAAK0B,MAAMiqE,YAAYj9D,IAAI,SAAC3I,GAAD,OAC9BrD,GAAAC,EAAAC,cAAA,OAAKhI,GAAI,eAAemL,EAAKnL,IACxB8H,GAAAC,EAAAC,cAAC6sE,GAAD,CACGlvE,IAAKwF,EAAKnL,GACVmL,KAAMA,EACNijE,aAAa,EACbI,OACK9nD,EAAK5f,MAAM+pE,UAAgBhoC,KAAKisC,IAC7BjsC,KAAKksC,KACA,IAAMlsC,KAAKmsC,KACZnsC,KAAKosC,IAAK9pE,EAAK5G,SAASu5C,IAAMp3B,EAAK5f,MAAM+pE,UAAUtsE,SAASu5C,IAAM,GAClEjV,KAAKosC,IAAK9pE,EAAK5G,SAASs5C,KAAOn3B,EAAK5f,MAAM+pE,UAAUtsE,SAASs5C,KAAO,KAC/D,IACL,GAEF,GARkB,EAW5B4uB,UAAW/lD,EAAK3f,MAAM0lE,UACtBgC,qBAAsB/nD,EAAK+nD,6DAMlC,IAAAyG,EAAA9vE,KAEL,OADAxE,QAAQC,IAAI,uBAERiH,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,kBAAkBnB,MAAO,CACpC5lB,SAAU,WACVu5C,IAAK,EACLD,KAAM,EACN31B,MAAO,OACPC,OAAQ,OACRsnD,cAAe,SAEf3nE,GAAAC,EAAAC,cAAA,OAAKmiB,MAAO,CACRgrD,UAAS,SAAAlrE,OAAW7E,KAAK0B,MAAMmqE,WAAtB,gBAAAhnE,OAA+C7E,KAAK0B,MAAMkqE,eAAehpD,EAAzE,QAAA/d,OAAiF7E,KAAK0B,MAAMkqE,eAAe/oD,EAA3G,OACTmtD,gBAAiB,QAEjBttE,GAAAC,EAAAC,cAAA,WACKF,GAAAC,EAAAC,cAAC6sE,GAAD,CACGlvE,IAAKP,KAAK0B,MAAM+pE,UAAU7wE,GAC1BmL,KAAM/F,KAAK0B,MAAM+pE,UACjBzC,aAAa,EACbI,OAAQ,EACR/B,UAAWrnE,KAAK2B,MAAM0lE,UACtByB,iBAAkB9oE,KAAKwsE,+BACvBnD,qBAAsBrpE,KAAKqpE,yBAE9BrpE,KAAKysE,uBAId/pE,GAAAC,EAAAC,cAAA,UACIlE,QAASsB,KAAK0sE,aACd3nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,GAAK,KAAMunD,cAAe,OACtGnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAWlmB,KAAK0B,MAAM+pE,UAAUtB,SAAU,aAAe,6BACzDplD,MAAO/kB,KAAK0B,MAAM+pE,UAAUtB,SAAW,CAAE71B,MAAO,WAAc,CAAEA,MAAO,eAG/E5xC,GAAAC,EAAAC,cAAA,UACIlE,QAASsB,KAAK2sE,UACd5nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,GAAK,KAAMunD,cAAe,OACtGnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAWlmB,KAAK0B,MAAM+pE,UAAUb,MAAQ,kBAAoB,wBAC5D7lD,MAAO/kB,KAAK0B,MAAM+pE,UAAUb,MAAQ,CAAEt2B,MAAO,WAAc,CAAEA,MAAO,eAG5E5xC,GAAAC,EAAAC,cAAA,UACIlE,QAASsB,KAAK4sE,gBACd7nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OACvGnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,gBACXnB,MAAO/kB,KAAK0B,MAAM+pE,UAAUnC,YAAc,CAAEh1B,MAAO,WAAc,CAAEA,MAAO,eAGlF5xC,GAAAC,EAAAC,cAAA,UACIlE,QAASsB,KAAK6sE,aACd9nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OACvGnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,kBACXnB,MAAO/kB,KAAK0B,MAAM+pE,UAAUP,SAAW,CAAE52B,MAAO,WAAc,CAAEA,MAAO,eAI/E5xC,GAAAC,EAAAC,cAAA,OAAKsjB,UAAW,gBACZxjB,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMoxE,EAAKhD,YAAY,cAChC/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OACvGnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,iBACXnB,MAA4C,aAArC/kB,KAAK0B,MAAM+pE,UAAUN,aAA8B,CAAE72B,MAAO,WAAc,CAAEA,MAAO,eAIlG5xC,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMoxE,EAAKhD,YAAY,gBAChC/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OACvGnkD,UAAW,8DACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,qCACXnB,MAA4C,eAArC/kB,KAAK0B,MAAM+pE,UAAUN,aAAgC,CAAE72B,MAAO,WAAc,CAAEA,MAAO,eAIpG5xC,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMoxE,EAAKhD,YAAY,SAChC/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,IAAKxyB,KAAMz4C,KAAK2B,MAAMsuE,QAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OACxGnkD,UAAW,8DACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,8BACXnB,MAA4C,QAArC/kB,KAAK0B,MAAM+pE,UAAUN,aAAyB,CAAE72B,MAAO,WAAc,CAAEA,MAAO,wBAptBtFiX,KAAM2kB,WCzCpBC,GAA2B,2CAC3BC,GAAoB,oCACpBC,GAA0B,yCAC1BC,GAA0B,yCCsB1BC,GAAb,SAAA3wE,GAAA,SAAA2wE,IAAA,OAAAzwE,OAAAC,GAAA,EAAAD,CAAAE,KAAAuwE,GAAAzwE,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAywE,GAAAllE,MAAArL,KAAAe,YAAA,OAAAjB,OAAAO,GAAA,EAAAP,CAAAywE,EAAA3wE,GAAA2wE,EAAA,CAAkC7vE,kBAPyB,CACvD8vE,WAAW,EACX1tD,MAAO,IACP2tD,kBAAmB,IACnBC,kBAAmB,OAOVx4D,GAA6B,IAAIq4D,GCxBjCI,GAAkB,SAACjvE,EAAiCC,GAAlC,OAC3BD,EAAME,MAAM,CAAC,mBAAoB,aAAe,IAAI2uE,IAE3CK,GAAyB,WAClC,OAAO5uE,aACH,CAAC2uE,IACD,SAACV,GAAD,OAA2BA,KC4CpBY,GAnCM,SAAClvE,GAA6B,IAAAshB,EACbC,qBAAS,GADIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACxC6tD,EADwC3tD,EAAA,GAC7B4tD,EAD6B5tD,EAAA,GAAAG,EAEOJ,oBAAiB,IAFxBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAExCmgD,EAFwClgD,EAAA,GAEnBmgD,EAFmBngD,EAAA,GAAAG,EAGOR,oBAAiB,IAHxBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGxCigD,EAHwChgD,EAAA,GAGnBigD,EAHmBjgD,EAAA,GAAAqtD,EAK/B5d,KAAT/9B,EALwCv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAMzCf,EAAU1oD,uBAAYqpD,MACtBpB,EAAa9jB,oBAgBnB,OACIntD,GAAA,cAAAA,GAAA,cAd+B,KAAxBklE,GAAsD,KAAxBE,GAenBplE,GAAA,cAAC0yE,GAAD,CAAS5J,UAAW1lE,EAAM0lE,UAAWzsE,GAAI+G,EAAM/G,GAAIiM,KAAMlF,EAAMkF,KAAM87C,OAAQhhD,EAAMghD,OAAQ+oB,gBAAiB/pE,EAAM+pE,gBAAiBr2C,MAAOA,EAAO46C,QAASA,EAAST,WAAYA,IAC7LjxE,GAAA,cAAC2yE,GAAD,CAAmBz7D,KAAMq7D,EACrB5K,kBAdkB,SAACzB,GAC3Bb,EAAuBa,EAAQ0B,OAC/BzC,EAAuBe,EAAQ2B,OAC/B2K,GAAa,IAYLh6B,SATS,WACjBg6B,GAAa,IASL9K,mBAAoBtkE,EAAMskE,iCC8F3B/iE,kBAhIW,SAACvB,GACvB,IAAMwvE,EAAczlB,oBACd0lB,EAAe1lB,oBACf0X,EAAW1X,kBAAO,MAHiCzoC,EAIjBC,oBAAmB,IAJFC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAIlDogD,EAJkDlgD,EAAA,GAIpCmgD,EAJoCngD,EAAA,GAAAG,EAKjBJ,oBAAmB,IALFK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAKlDigD,EALkDhgD,EAAA,GAKpCigD,EALoCjgD,EAAA,GAAAG,EAMHR,oBAAiB,IANdS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAMlD+/C,EANkD9/C,EAAA,GAM7B+/C,EAN6B//C,EAAA,GAAAE,EAOHX,oBAAiB,IAPdY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAOlD8/C,EAPkD7/C,EAAA,GAO7B8/C,EAP6B9/C,EAAA,GASzDnlB,qBAAU,WACNwyE,EAAYxlB,QAAU,IAAI0lB,YAE1BD,EAAazlB,QAAUwlB,EAAYxlB,QAAQ2lB,mBAAc9xE,EAAkB,CACvE+xE,iBAAa/xE,EACbgyE,cAAc,EACdC,cAAc,EACdC,WAAY,UACZC,UAAW,GACXC,WAAY,SACZC,QAAQ,IAGZT,EAAazlB,QAAQmmB,gBAAgB1O,EAASzX,SAE9CylB,EAAazlB,QAAQrd,GAAG,gBAAiB,WACrC6iC,EAAYxlB,QAASomB,aAAax0E,KAAK,SAAAknE,GACnC,IAAMuN,EAAkBvN,EAAQniE,OAAO,SAAAoiE,GAAM,MAAoB,eAAhBA,EAAOE,OAClDqN,EAAkBxN,EAAQniE,OAAO,SAAAoiE,GAAM,MAAoB,eAAhBA,EAAOE,OAExDtB,EAAgB0O,GAChBxO,EAAgByO,GAEZD,EAAgBhxE,OAAS,GACzB0iE,EAAuBsO,EAAgB,GAAGrN,UAG1CsN,EAAgBjxE,OAAS,GACzB4iE,EAAuBqO,EAAgB,GAAGtN,eAIvD,IAEHhmE,qBAAU,WACDwyE,EAAYxlB,SAAYylB,EAAazlB,SAAY8X,GAItD0N,EAAYxlB,QAASumB,aAAa,CAC9BC,YAAa1O,EACb8N,iBAAa/xE,EACbgyE,cAAc,EACdC,cAAc,EACdC,WAAY,UACZC,UAAW,GACXC,WAAY,SACZC,QAAQ,IACTt0E,KAAK,SAAA60E,GACJ,IAAMjJ,EAAaiJ,EAAYC,iBAAiB,GAChDjB,EAAazlB,QAAS2mB,aAAanJ,MAExC,CAAC1F,IAEJ,IAQMmC,EAAqBvC,EAAa30D,IAAI,SAAAg2D,GACxC,MAAO,CAACnkE,IAAKmkE,EAAOC,SAAUnkE,MAAOkkE,EAAOC,SAAUj8C,KAAMg8C,EAAOxsC,SAGjE2tC,EAAoBtC,EAAa70D,IAAI,SAAAg2D,GACvC,MAAO,CAACnkE,IAAKmkE,EAAOC,SAAUnkE,MAAOkkE,EAAOC,SAAUj8C,KAAMg8C,EAAOxsC,SAGvE,OACI35B,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAMzS,QAASrB,EAAMo1C,SAAU3yB,WAAW,GACzD7lB,GAAA,cAAC4lB,GAAA,EAAME,OAAP,qBACA9lB,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,qBAAKwmB,MAAO,CAAE2uB,QAAS,OAAQC,cAAe,MAAOE,eAAgB,kBACjEt1C,GAAA,cAACi4C,GAAA,EAAD,KACIj4C,GAAA,cAACi4C,GAAA,EAAKsvB,MAAN,KACIvnE,GAAA,qCACAA,GAAA,cAACuuD,GAAA,EAAD,CACIoW,UAAU,EACV1iE,MAAOijE,EACP/d,QAASkgB,EACTtgD,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa6jE,EAAuB7jE,EAAKW,WAG3DjC,GAAA,cAACi4C,GAAA,EAAKsvB,MAAN,KACIvnE,GAAA,yCACAA,GAAA,cAACuuD,GAAA,EAAD,CACIoW,UAAU,EACV1iE,MAAOmjE,EACPje,QAASmgB,EACTvgD,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa+jE,EAAuB/jE,EAAKW,YAI/DjC,GAAA,yBACIA,GAAA,uBACIwnE,UAAU,EACVC,OAAO,EACPrd,IAAKya,OAKrB7kE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CACIC,SAAUjkB,EAAMkB,EAAE,mBAClBnE,QAASiD,EAAMo1C,WAEnBx4C,GAAA,cAAConB,GAAA,EAAD,CACIkP,QAASlzB,EAAMskE,mBACfpgD,SAAS,EACTD,SAAU,OACVlnB,QA3DI,WACZiD,EAAMskE,oBAIVtkE,EAAMukE,kBAAkB,CAACC,MAAOxC,EAAqByC,MAAO3C,WCjF9D8O,GAAgB52E,KAAMC,OAAO,CAC/BC,QAAS,iDAGP22E,GAAc,eAAA5uE,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAG,SAAAyG,EAAO1X,GAAP,OAAAwH,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,cAAA2D,EAAAC,KAAA,EAAAD,EAAA3D,KAAA,EAEFqmE,GAAcpqE,GAFZ,cAAA0H,EAAAwB,OAAA,SAAAxB,EAAAG,MAAA,aAAAH,EAAAC,KAAA,EAAAD,EAAAkB,GAAAlB,EAAA,SAIfrU,QAAQF,MAAM6M,EAAQO,KAJPmH,EAAAkB,GAAA,yBAAAlB,EAAAI,SAAA4P,EAAA7f,KAAA,YAAH,gBAAAi3D,GAAA,OAAArzD,EAAAyH,MAAArL,KAAAe,YAAA,GA6BL4X,GAnBH,CACR85D,cAAa,eAAAC,EAAA5yE,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAE,SAAA++C,EAAOkP,GAAP,IAAA7pE,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,cAAAyE,EAAAzE,KAAA,EACYsmE,GAAe,CAClC7pE,OAAQ,OACRD,IAAG,YAAA7D,OAAcwiE,KAHV,cACL7pE,EADKmT,EAAAX,KAAAW,EAAAU,OAAA,SAMJ7T,EAASqC,MANL,wBAAA8Q,EAAAV,SAAAkoD,EAAAn4D,SAAF,gBAAA63D,GAAA,OAAA6a,EAAArnE,MAAArL,KAAAe,YAAA,GAQbqrC,SAAQ,eAAAumC,EAAA7yE,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAE,SAAA8G,EAAOmnD,GAAP,IAAA7pE,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,cAAAgF,EAAAhF,KAAA,EACiBsmE,GAAe,CAClC7pE,OAAQ,MACRD,IAAG,YAAA7D,OAAcwiE,EAAd,YAHD,cACA7pE,EADA0T,EAAAlB,KAAAkB,EAAAG,OAAA,SAMC7T,EAASqC,MANV,wBAAAqR,EAAAjB,SAAAiQ,EAAAlgB,SAAF,gBAAAggB,GAAA,OAAA2yD,EAAAtnE,MAAArL,KAAAe,YAAA,IRzBRu3B,GAAyB,KACzB+tC,GAAgB,EAChBC,GAA8C,aAC9CC,GAA+B,KAC/BC,GAAkC,KAClCC,GAA2B,KAC3BC,GAAgC,eAE/BlM,yJAiCL,IAAM7sB,GAAc,WAChB,OAAOrV,IAAUA,GAAOquC,aAAeruC,GAAOsuC,MAsB5CC,GAAY,WACXH,IACC5hE,OAAOgiE,aAAaJ,IAGxBA,GAAmB5hE,OAAOs8B,WAAW,WAC9B9I,IAAUqV,OACTnyC,QAAQC,IAAI,sDACZ68B,GAAOqW,UAGZ,OAKDvrC,GAAU,YACZk1B,GAAS,IAAIyuC,UAAU,+CAGhBC,OAAS,SAACpL,GACbpgE,QAAQC,IAAI,sCACZorE,KACAR,GAAgB,GAEpB/tC,GAAO2uC,QAAU,SAACrL,GACX8K,KACClrE,QAAQC,IAAI,6CACZqJ,OAAOgiE,aAAaJ,MAI5BpuC,GAAO4uC,UAAYZ,IAGvBljE,KAGA,ISqJIwvE,GTnGWzL,GAlDa,CACxBC,mBAAoB,SAACxsE,EAAYysE,EAAmB5uB,EAAcC,GAC3DpgB,IAAUqV,MACTrV,GAAOgvC,KAAKz+D,KAAKC,UAAU,CAAEhG,KAAM,sBAAuBlI,KAAIysE,YAAW5uB,OAAMC,UAGvFm6B,yBAA0B,SAACj4E,EAAYysE,EAAmB/hD,GACtDihD,GAAgB3rE,EAChB4rE,GAAmBa,EAEnBf,GAAmB,SAACjsE,GAChB,IAAMwF,EAAgBgJ,KAAK2gD,MAAMnvD,EAAEwF,MAEnC,OAAQA,EAAKiD,MACT,KAAK03D,GAAYiN,yBACbjsE,QAAQC,IAAI,iDAAkDoE,GAC9DgnE,KAEA/mE,OAAOtF,KAAKqF,EAAKud,OAAO7a,QAAQ,SAAAiE,GAC5B,GAAG5L,IAAO4L,EAAV,CADsC,IAK/BrH,EAAYU,EAAKud,MAAM5W,GAAvBrH,SAEPmmB,EAAS9e,EAAQrH,MAErB,MACJ,KAAKq7D,GAAYkN,oBACbpiD,EAASzlB,EAAKjF,GAAI,CAAE69C,KAAM54C,EAAK44C,KAAMC,IAAK74C,EAAK64C,QAMxDpgB,KACCA,GAAO4uC,UAAYZ,GA7FlB,SAAPsB,IACCtvC,IAAUqV,MAAiB44B,IAAiBC,GAC3CluC,GAAOgvC,KAAKz+D,KAAKC,UAAU,CAAChG,KAAM03D,GAAYqN,iBAAkBjtE,GAAI2rE,GAAec,UAAWb,OAE9FH,KAEG/tC,IACCA,GAAOqW,QAGXnzC,QAAQC,IAAI,kDAAoD4qE,IAChEjjE,MAGJqjE,GAAc3hE,OAAOs8B,WAAW,WAC5BwmC,KACD,KA8EKA,KAGRE,gCAAiC,WAC1BrB,IACC3hE,OAAOgiE,aAAaL,IAGxBF,GAAgB,KAChBC,GAAmB,OUlHrBuB,WAAwC,CAC1CC,oBAAqB,CAACvvB,KAAM,EAAGC,IAAK,GACpCuvB,mBAAoB,CAACrlD,EAAG,EAAGC,EAAG,GAC9BqlD,qBAAsB,CAACtlD,EAAG,EAAGC,EAAG,KAG9BslD,GAA0B,CAC5BC,YAAa,oCACbC,cAAe,sCACfC,KAAQ,8BA0KGwK,GAvKO,SAACnxE,GACnB,IAAMyhE,EAAW1X,kBAAO,MADyBzoC,EAEbC,sBAFaC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE1CulD,EAF0CrlD,EAAA,GAE9BslD,EAF8BtlD,EAAA,GAAAG,EAGfJ,qBAAkB,GAHHK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAG1CqlD,EAH0CplD,EAAA,GAG/BqlD,EAH+BrlD,EAAA,GAI3CmlD,EAAiBhd,kBAAuBqc,IAExCc,EAAiB,SAACjmD,EAAWC,GAI/B,GAHA6lD,EAAe/c,QAAQuc,qBAAqBtlD,EAAIA,EAChD8lD,EAAe/c,QAAQuc,qBAAqBrlD,EAAIA,EAE7ClhB,EAAMmnE,iBAAkB,CACvB,IAAMC,EAAcpnE,EAAMmnE,iBAAiBJ,EAAe/c,SAC1Dwb,GAAoBC,mBAAmBzlE,EAAMoE,KAAKnL,GAAI+G,EAAM0lE,UAAW0B,EAAYtwB,KAAMswB,EAAYrwB,OAI7G/5C,qBAAU,WACNgD,EAAMoE,KAAKgtE,cAAcjB,gBAAgB1O,EAASzX,UACnD,IAEHhtD,qBAAU,WACN,GAAKykE,EAASzX,UAIXhqD,EAAMqnE,YAAT,CAIA,IAAII,EAASznE,EAAMynE,QAAUznE,EAAM0nE,qBAAuB,GAAM,GAC5D1nE,EAAMoE,KAAKujE,cACXF,EAAS,GAGZhG,EAASzX,QAAgByd,OAASA,EAErB,IAAXA,GAAkBhG,EAASzX,QAAgB4d,QACzCnG,EAASzX,QAAgB6d,QAG3BJ,EAAS,GAAMhG,EAASzX,QAAgB4d,QACtCnG,EAASzX,QAAgB8d,SAE/B,CAAC9nE,EAAMynE,OAAQznE,EAAMoE,KAAKujE,YAAa3nE,EAAM0nE,uBAEhD1qE,qBAAU,WACN,IAAM+qE,EAAkB,WACpBjB,GAAc,IAGZkB,EAAoB,SAACtvE,GACnBsH,EAAMqnE,aAAeR,GACrBK,EAAexuE,EAAEuvE,QAASvvE,EAAEwvE,UAI9BC,EAAoB,SAACzvE,GACnBsH,EAAMqnE,aAAeR,GACrBK,EAAexuE,EAAE0vE,QAAQ,GAAGH,QAASvvE,EAAE0vE,QAAQ,GAAGF,UAS1D,OALA9sE,SAAS8B,iBAAiB,UAAW6qE,GACrC3sE,SAAS8B,iBAAiB,WAAY6qE,GACtC3sE,SAAS8B,iBAAiB,YAAa8qE,GACvC5sE,SAAS8B,iBAAiB,YAAairE,GAEhC,WACH/sE,SAAS+B,oBAAoB,UAAW4qE,GACxC3sE,SAAS+B,oBAAoB,WAAY4qE,GACzC3sE,SAAS+B,oBAAoB,YAAa6qE,GAC1C5sE,SAAS+B,oBAAoB,YAAagrE,MAIlD,IAA0B92B,EAKpBg3B,GALoBh3B,EAKWrxC,EAAMqnE,YAD1B,IACkD,GAAqB,IAAfrnE,EAAMynE,OAJpET,EAAkB,EAAP31B,EAAWA,GAK3Bi3B,EAAexmC,KAAKC,MAAMsmC,EAAc,GACxCE,EAAYvoE,EAAMoE,KAAKokE,WAAaxoE,EAAMqnE,aAAernE,EAAMynE,OAAS,GAAKznE,EAAMoE,KAAKujE,aACxFc,GAAgBzoE,EAAMqnE,aAAgC,IAAjBrnE,EAAMynE,SAAiBznE,EAAMoE,KAAKujE,YAK7E,OACI5mE,GAAAC,EAAAC,cAAA,OACImiB,MAAO,CACHjC,MAAOknD,EACPjnD,OAAQinD,EACRC,eACA9qE,SAAU,WACVs5C,KAAM92C,EAAMoE,KAAK5G,SAASs5C,KAAOuxB,EAAc,EAC/CtxB,IAAK/2C,EAAMoE,KAAK5G,SAASu5C,IAAMsxB,EAAc,EAC7CK,cAAe,OACfzhD,OAAQjnB,EAAMqnE,YAAa,OAAS,UACpCsB,OAAQ3oE,EAAMqnE,YAAa,GAAK,EAChCuB,gBAAiB,iBAErBC,YAAa,SAACnwE,GACNquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMoE,KAAK5G,SACxDupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAEuvE,QACL/mD,EAAGxoB,EAAEwvE,SAETpB,GAAc,IAGtBgC,aAAc,SAACpwE,GACXquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMoE,KAAK5G,SACxDupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAE0vE,QAAQ,GAAGH,QAChB/mD,EAAGxoB,EAAE0vE,QAAQ,GAAGF,SAEpBpB,GAAc,IAElBiC,cAnCgB,WACpB9B,GAAcD,KAoCVjmE,GAAAC,EAAAC,cAAA,OAAKmiB,MAAKjlB,OAAA2N,GAAA,EAAA3N,CAAA,CACNgjB,MAAOknD,EACPjnD,OAAQinD,EACRC,eACAU,SAAU,SACVzL,gBAAiB,UACjBmL,cAAe,QACX1oE,EAAMqxE,WAAa,CAAEnI,OAAQ,qBAAuB,CAACA,OAAQ,qBAP3D,CAQNN,gBAAiB,gBACjBD,OAAQ3oE,EAAMqnE,YAAa,GAAK,KAIhCtmE,GAAAC,EAAAC,cAAA,SACImjE,UAAU,EACV+E,yBAAyB,EACzBniB,IAAKya,EACL4C,MAAOrkE,EAAMqnE,YACbjkD,MAAO,CAAEjC,MAAOknD,EAAajnD,OAAQinD,EAAae,UAAW,QAASC,eAAgB,SAAUX,cAAe,OAAQ32B,QAASw2B,EAAW,QAAU,OAAQI,OAAQ3oE,EAAMqnE,YAAa,EAAI,MAE9LkB,GAAaxnE,GAAAC,EAAAC,cAAC0gD,GAAA,EAAD,CACXv/B,IAAKpiB,EAAMoE,KAAK48C,OAChBA,QAAQ,EACR/O,cAAc,SACd7uB,MAAO,CACHjC,MAAOknD,EACPjnD,OAAQinD,EACRe,UAAW,QACXC,eAAgB,SAChBX,cAAe,OACf/nE,OAAQ8nE,EAAc,kBAAoB,WAItD1nE,GAAAC,EAAAC,cAAA,OAAKmiB,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,QAASxyB,KAAM,EAAG31B,MAAO,OAAQwF,UAAW,SAAUisB,SAAU,OAAQ81B,cAAe,SAAW1oE,EAAMoE,KAAKc,MAEzJnE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,qCAAuCvkB,EAAMoE,KAAKujE,YAAc,UAAY,MAE1F5mE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,0CAA4CvkB,EAAMoE,KAAKmlE,SAAW,UAAY,MAE5FxoE,GAAAC,EAAAC,cAAA,KAAGsjB,UAAW,QAAWiiD,GAAkBxmE,EAAMoE,KAAKolE,cAAiB,KAAOxpE,EAAMoE,KAAKktE,UAAY,UAAY,QClLvHlL,GAAwC,CAC1CC,oBAAqB,CAACvvB,KAAM,EAAGC,IAAK,GACpCuvB,mBAAoB,CAACrlD,EAAG,EAAGC,EAAG,GAC9BqlD,qBAAsB,CAACtlD,EAAG,EAAGC,EAAG,IAmHrBqwD,GAhHa,SAACvxE,GACzB,IAAMyhE,EAAW1X,kBAAO,MADqCzoC,EAEzBC,sBAFyBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEtDulD,EAFsDrlD,EAAA,GAE1CslD,EAF0CtlD,EAAA,GAAAG,EAG3BJ,qBAAkB,GAHSK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGtDqlD,EAHsDplD,EAAA,GAG3CqlD,EAH2CrlD,EAAA,GAIvDmlD,EAAiBhd,kBAAuBqc,IAExCc,EAAiB,SAACjmD,EAAWC,GAI/B,GAHA6lD,EAAe/c,QAAQuc,qBAAqBtlD,EAAIA,EAChD8lD,EAAe/c,QAAQuc,qBAAqBrlD,EAAIA,EAE5ClhB,EAAMmnE,iBAAkB,CAExB,IAAMC,EAAcpnE,EAAMmnE,iBAAiBJ,EAAe/c,SAEtDod,GACA5B,GAAoBC,mBAAmB,UAAYzlE,EAAMwxE,YAAY3sE,OAAQ7E,EAAM0lE,UAAW0B,EAAYtwB,KAAMswB,EAAYrwB,OAKxI/5C,qBAAU,WACNgD,EAAMwxE,YAAYJ,cAAcjB,gBAAgB1O,EAASzX,UAC1D,IAEHhtD,qBAAU,WACN,IAAM+qE,EAAkB,WACpBjB,GAAc,IAGZkB,EAAoB,SAACtvE,GACnBmuE,GACAK,EAAexuE,EAAEuvE,QAASvvE,EAAEwvE,UAI9BC,EAAoB,SAACzvE,GACpBmuE,GACCK,EAAexuE,EAAE0vE,QAAQ,GAAGH,QAASvvE,EAAE0vE,QAAQ,GAAGF,UAS1D,OALA9sE,SAAS8B,iBAAiB,UAAW6qE,GACrC3sE,SAAS8B,iBAAiB,WAAY6qE,GACtC3sE,SAAS8B,iBAAiB,YAAa8qE,GACvC5sE,SAAS8B,iBAAiB,YAAairE,GAEhC,WACH/sE,SAAS+B,oBAAoB,UAAW4qE,GACxC3sE,SAAS+B,oBAAoB,WAAY4qE,GACzC3sE,SAAS+B,oBAAoB,YAAa6qE,GAC1C5sE,SAAS+B,oBAAoB,YAAagrE,MAQlD,OACIpnE,GAAAC,EAAAC,cAAA,OACImiB,MAAO,CACHhC,OAAQ4lD,EAAW,IAAM,IACzB1jD,QAAS,EACTmuD,UAAW,aACXj0E,SAAU,WACVs5C,KAAM92C,EAAMwxE,YAAYh0E,SAASs5C,KAAO,IACxCC,IAAK/2C,EAAMwxE,YAAYh0E,SAASu5C,IAAM,IACtC2xB,cAAe,OACfzhD,OAAQ,OACR0hD,OAAQ,EACRpL,gBAAiB,QACjB+K,aAAc,GAElBO,YAAa,SAACnwE,GACNquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMwxE,YAAYh0E,SAC/DupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAEuvE,QACL/mD,EAAGxoB,EAAEwvE,SAETpB,GAAc,GACdpuE,EAAEwuB,kBACFxuB,EAAEm5C,kBAGVi3B,aAAc,SAACpwE,GACXquE,EAAe/c,QAAQqc,oBAAsBrmE,EAAMwxE,YAAYh0E,SAC/DupE,EAAe/c,QAAQsc,mBAAqB,CACxCrlD,EAAGvoB,EAAE0vE,QAAQ,GAAGH,QAChB/mD,EAAGxoB,EAAE0vE,QAAQ,GAAGF,SAEpBpB,GAAc,GACdpuE,EAAEwuB,kBACFxuB,EAAEm5C,kBAEN90C,QAAS,SAACrE,GACNA,EAAEm5C,kBAENk3B,cA3CgB,WACpB9B,GAAcD,KA8CVjmE,GAAAC,EAAAC,cAAA,SACImjE,UAAU,EACV+E,yBAAyB,EACzBniB,IAAKya,EACL4C,OAAO,EACPjhD,MAAO,CAAEhC,OAAQ,OAAQsnD,cAAe,OAAQ32B,QAAS,QAASu2B,aAAc,WCnH5FoJ,GAAuB,EAusBZC,GArsBC,SAAC3xE,GACb,IAAM4xE,EAAW7nB,oBACX8nB,EAAU9nB,oBACV+nB,EAAqB/nB,oBACrBgoB,EAAoBhoB,kBAAmB,CAAC9oC,EAAG,EAAGC,EAAG,IACjD8wD,EAAgBjoB,kBAAe,GAC/BkoB,EAAyBloB,mBAAgB,GACzCmoB,EAAkBnoB,kBAAwB,IAPXzoC,EAQWC,oBAAS,GARpBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAQ9B6wD,EAR8B3wD,EAAA,GAQZ4wD,EARY5wD,EAAA,GAAAG,EASSJ,oBAASmwD,IATlB9vD,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GASb0wD,GATazwD,EAAA,GAAAA,EAAA,IAAAytD,EAUrB5d,KAAT/9B,EAV8Bv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAAAttD,EAWOR,oBAAqB,CAACN,EAAG,EAAGC,EAAG,IAXtCc,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAW9BkoD,EAX8BjoD,EAAA,GAWdswD,EAXctwD,EAAA,GAAAE,EAYDX,oBAAS,GAZRY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAY9BgoD,EAZ8B/nD,EAAA,GAYlBowD,EAZkBpwD,EAAA,GAAAq9C,EAaHj+C,sBAbGk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAa9BsK,EAb8BrK,EAAA,GAanB+S,EAbmB/S,EAAA,GAAAC,EAcWn+C,sBAdXo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAc9B+S,EAd8B9S,EAAA,GAcZ+S,EAdY/S,EAAA,GAe/B2O,EAAU1oD,uBAAYqpD,MAEtB0D,EAAiB5oB,kBAAe,IAChC6oB,EAAqB7oB,kBAAiB,IACtC8oB,EAAwB9oB,kBAAsB,IAI9C+oB,EAAW/oB,kBAAO,CAAE+f,cAC1BgJ,EAAS9oB,QAAU,CAAE8f,aAErB,IAAM+D,EAAa9jB,oBAEnBgoB,EAAkB/nB,QAAUigB,EAC5B+H,EAAchoB,QAAUkgB,EAExB,IAAM6I,EAAwB,SAAC70E,GAC3B2zE,EAAQ7nB,QAASgpB,OAAO,CACpB90E,KAAMgJ,KAAKC,UAAUjJ,GACrBiD,KAAM,iBAIR8xE,EAAoB,SAACC,GACvB,IAAMh1E,EAAOgJ,KAAK2gD,MAAMqrB,EAAOvJ,WAAWzrE,MAG1C,GAAkB,gBAAdA,EAAKiD,MAA0B2xE,EAAS9oB,QAAQ8f,WAAa5rE,EAAK2G,SAAWiuE,EAAS9oB,QAAQ8f,UAAU7wE,GACxGY,QAAQC,IAAI,wDADhB,CAKA,IAAMq5E,EAAatB,EAAQ7nB,QAAQopB,UAAUF,OAAQr1E,GASrD,GARAs1E,EAAWxmC,GAAG,gBAAiB,SAACj0C,GAC5BmB,QAAQC,IAAI,wBAAyBpB,EAAGy6E,KAK5Ct5E,QAAQC,IAAI,4BAA6Bo4E,EAAgBloB,SAEvC,gBAAd9rD,EAAKiD,KAAwB,CAC7B,IAAMkyE,EAAwB,UAAYn1E,EAAK2G,OAC/CguE,EAAsB7oB,QAAQlpD,KAAK,CAC/B+D,OAAQ3G,EAAK2G,OACbusE,cAAe+B,EACf31E,SAAU00E,EAAgBloB,QAAQqpB,GAC5BnB,EAAgBloB,QAAQqpB,GAAuB71E,SAC/C00E,EAAgBloB,QAAQ9rD,EAAK2G,QACzBqtE,EAAgBloB,QAAQ9rD,EAAK2G,QAAQrH,SACrC,CACEs5C,KAAM,IACNC,IAAK,OAIrBl9C,QAAQC,IAAI,oCAAqC+4E,EAAsB7oB,cAEvE2oB,EAAe3oB,QAAQlpD,KAAK,CACxB7H,GAAIiF,EAAKjF,GACTiM,KAAMhH,EAAKgH,KACX87C,OAAQ9iD,EAAK8iD,OACbowB,cAAe+B,EACfG,aAAcJ,EAAOvJ,WAAW2J,aAChC91E,SAAU00E,EAAgBloB,QAAQ9rD,EAAKjF,IAAMi5E,EAAgBloB,QAAQ9rD,EAAKjF,IAAIuE,SAAW,CACrFs5C,KAAM,IACNC,IAAK,KAETyxB,SAAUtqE,EAAKq1E,cACftK,MAAO/qE,EAAKs1E,cACZ7L,YAAazpE,EAAKu1E,kBAClBlK,SAAUrrE,EAAKw1E,eACfpC,UAAWpzE,EAAKy1E,gBAChBnK,aAActrE,EAAK01E,mBAGvB/5E,QAAQC,IAAI,4BAA6B64E,EAAe3oB,SACxDooB,EAAoBD,EAAmB,GAG3CE,IAAqBX,MAqDnBmC,EAA6B,WAC/BhC,EAAQ7nB,QAAQrd,GAAG,eAAgB,kBAAM9yC,QAAQoxC,KAAK,qDACtD4mC,EAAQ7nB,QAAQrd,GAAG,cAAe,kBAAM9yC,QAAQC,IAAI,gEACpD+3E,EAAQ7nB,QAAQrd,GAAG,sBAAuB,SAACj2B,GAClB,sBAAjBA,EAAMywB,QACNttC,QAAQoxC,KAAK,4DAA6Dv0B,GAC1Em7D,EAAQ7nB,QAAU,KAClB8nB,EAAmB9nB,QAAU,KAC7B8pB,KAGAj6E,QAAQoxC,KAAK,2CAA4Cv0B,EAAMywB,OAAQzwB,KAI/Em7D,EAAQ7nB,QAAQrd,GAAG,YAAa,SAACj2B,GAC7B,GAAmB,0BAAfA,EAAMxR,KAAkC,CACxC,IAAMguE,EAASx8D,EAAMq9D,OAGrB,OAFAl6E,QAAQoxC,KAAK,iBAAmBioC,EAAOc,SAAW,gBAClDn6E,QAAQoxC,KAAK,qDAGjB,GAAmB,gCAAfv0B,EAAMxR,KAAwC,CAC9C,IAAMguE,EAASx8D,EAAMq9D,OAGrB,OAFAl6E,QAAQoxC,KAAK,iBAAmBioC,EAAOc,SAAW,uBAClDn6E,QAAQoxC,KAAK,+FAGjB,GAAkB,4BAAfv0B,EAAMxR,KAAoC,CACzC,IAAMguE,EAASx8D,EAAMq9D,OAAOb,OAC5Br5E,QAAQoxC,KAAR,gEAAA/nC,OAA6EgwE,EAAOc,WACpFC,EAAiBf,GACjBD,EAAkBC,GAItBr5E,QAAQF,MAAM,+CAAgD+c,MAIhEu9D,EAAmB,SAACf,GACtBP,EAAe3oB,QAAU2oB,EAAe3oB,QAAQrpD,OAAO,SAAAyD,GAAI,OAAIA,EAAKgtE,cAAc8B,SAAWA,IAC7Fd,EAAoBD,EAAmB,GAGvCU,EAAsB7oB,QAAU6oB,EAAsB7oB,QAAQrpD,OAC1D,SAAA6wE,GAAW,OAAIA,EAAYJ,cAAc8B,SAAWA,IAGxDb,IAAqBX,KAenBwC,EAAgB,WAClB,IAAMC,EAAYvC,EAAS5nB,QAAS2lB,mBAAc9xE,EAAkB,CAChE+xE,YAAa5vE,EAAMqrE,YACnBmF,YAAaxwE,EAAMorE,YACnByE,cAAc,EACdC,cAAc,EACdC,WAAY,UACZC,UAAW,GACXC,WAAY,SACZC,QAAQ,IAGR2B,EAAQ7nB,QAASoqB,aAAaC,SAC9BF,EAAUxnC,GAAG,gBAAkB,WAC3BklC,EAAQ7nB,QAAQqqB,QAAQF,GAAWv4E,KAAK,WACpCq2E,EAAuBjoB,SAAU,MAxH7C6nB,EAAQ7nB,QAAQrd,GAAG,qBAAsB,SAACj2B,GACtCi8D,EAAe3oB,QAAQppD,QAAQ,SAAAwD,GAC3B,GAAIA,EAAKkvE,eAAiB58D,EAAM49D,KAAKhB,aAAc,CAC/C,IAAMp1E,EAAOgJ,KAAK2gD,MAAMnxC,EAAMxY,MAC9BrE,QAAQC,IAAI,8BAA+BoE,GAExCA,EAAKihC,eAAe,mBACnB/6B,EAAKokE,SAAWtqE,EAAKq1E,cACrBlB,IAAqBX,KAGtBxzE,EAAKihC,eAAe,mBACnB/6B,EAAK6kE,MAAQ/qE,EAAKs1E,cAClBnB,IAAqBX,KAGrBxzE,EAAKihC,eAAe,uBACpB/6B,EAAKujE,YAAczpE,EAAKu1E,kBACxBpB,IAAqBX,KAGrBxzE,EAAKihC,eAAe,oBACpB/6B,EAAKmlE,SAAWrrE,EAAKw1E,eACrBrB,IAAqBX,KAGrBxzE,EAAKihC,eAAe,qBACpB/6B,EAAKktE,UAAYpzE,EAAKy1E,gBACtBtB,IAAqBX,KAGrBxzE,EAAKihC,eAAe,sBACpB/6B,EAAKolE,aAAetrE,EAAK01E,iBACzBvB,IAAqBX,UA8DrCG,EAAQ7nB,QAAQrd,GAAG,kBAAmB,SAACj2B,GACnC7c,QAAQC,IAAI,2BAGZm6E,EAAiBv9D,EAAMw8D,QACvBx8D,EAAMm7B,mBA2BVkhC,EAAsB,CAAEwB,qBAAqB,IAE7C/B,EAAa,CACTv5E,GAAI+G,EAAM/G,GACViM,KAAMlF,EAAMkF,KACZ87C,OAAQhhD,EAAMghD,OACdowB,cAAe+C,EACfb,aAAczB,EAAQ7nB,QAAQ2f,WAAW2J,aACzC91E,SAAUwC,EAAM+pE,gBAChBvB,UAAU,EACVS,OAAO,EACPtB,aAAa,EACb4B,UAAU,EACV+H,WAAW,EACX9H,aAAc,KAGlB2K,EAAUxnC,GAAG,gBAAiB,SAACj0C,GAC3BmB,QAAQC,IAAI,kCAAmCpB,MAOjD87E,EAAgB,eAAAvyE,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAG,SAAAyG,IAAA,IAAAu2D,EAAAn7E,EAAA,OAAA0U,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,cAAA2D,EAAAC,KAAA,EAAAD,EAAA3D,KAAA,EAEMmqE,GAAY5D,cAAc9wE,EAAM0lE,WAFtC,cAEX+O,EAFWvmE,EAAAG,KAAAH,EAAA3D,KAAA,EAGGmqE,GAAYjqC,SAASgqC,GAHxB,cAGXn7E,EAHW4U,EAAAG,KAAAH,EAAA3D,KAAA,EAKXsnE,EAAQ7nB,QAAQvoD,QAAQnI,EAAO,CACjC6H,KAAM,OACNlI,GAAI+G,EAAM/G,GACViM,KAAMlF,EAAMkF,KACZ87C,OAAQhhD,EAAMghD,OACdxjD,SAAUwC,EAAM+pE,gBAChBwJ,eAAe,EACfC,eAAe,IAZF,OAcjBU,IAdiBhmE,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,SAgBjBymE,MAAM,iDAAmDzmE,EAAAkB,GAAM9R,SAC/DzD,QAAQC,IAAI,uDAAwDoU,EAAAkB,GAAMxW,KAAMsV,EAAAkB,GAAM9R,SAjBrE,yBAAA4Q,EAAAI,SAAA4P,EAAA7f,KAAA,aAAH,yBAAA4D,EAAAyH,MAAArL,KAAAe,YAAA,GAqBhB2tE,EAA2B,SAAC9zE,EAAYuE,GAC1C00E,EAAgBloB,QAAQ/wD,GAAM,CAACuE,YAE3BvE,EAAG4H,SAAS,YAGZ8xE,EAAe3oB,QAAQppD,QAAQ,SAAAksE,GACvBA,EAAW7zE,KAAOA,IAClB6zE,EAAWtvE,SAAWA,KAKlC60E,IAAqBX,KAqBnBkD,EAAmC,SAAC7N,EAAgCliE,GACtE,IAAM41D,EAAQ/mC,EAAMiK,kBAEdsvC,EAAclG,EAAeR,qBAAqBtlD,EAAI8lD,EAAeT,mBAAmBrlD,EACxFisD,EAAcnG,EAAeR,qBAAqBrlD,EAAI6lD,EAAeT,mBAAmBplD,EAExFkmD,EAA2B,CAC7BtwB,KAAMiwB,EAAeV,oBAAoBvvB,KAAQm2B,EAAcxS,EAC/D1jB,IAAKgwB,EAAeV,oBAAoBtvB,IAAOm2B,EAAczS,GAGjE,IAAK51D,GAAU4tE,EAEX,OADAC,EAAoBv0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAIs0E,EAAL,CAAuBj1E,SAAU4pE,KAC7CA,EAEP,IAAMyN,EAAoBhC,EAAsB7oB,QAAQ7jB,KAAK,SAAAqrC,GAAW,OAAIA,EAAY3sE,SAAWA,IAC/FgwE,IACAA,EAAkBr3E,SAAW4pE,EAC7BiL,IAAqBX,MA+C3BvG,EAAc,SAACuC,GACjB,GAAK5D,EAAL,CAGA,IAAM6D,EAAuC,KAA3B7D,EAAUN,aAAuBkE,EAAW,GACxDoH,GAAsBhL,EAAUwH,UAEtCkB,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBwH,UAAWwD,EAAoBtL,aAAcmE,KACzEoF,EAAsB,CAAEY,gBAAiBmB,EAAoBlB,iBAAkBjG,IAE/ExI,aAAa0I,EAAW7jB,SACxB6jB,EAAW7jB,QAAU7mD,OAAOs8B,WAAW,WACnC+yC,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI20E,EAAS9oB,QAAQ8f,UAAtB,CAAkCwH,WAAW,EAAO9H,aAAc,MAC9EuJ,EAAsB,CAAEY,iBAAiB,EAAOC,iBAAkB,MACnE,OAGDmB,EAAW,eAAA5yE,EAAAhE,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAAG,SAAA++C,IAAA,IAAAie,EAAAn7E,EAAA07E,EAAA,OAAAhnE,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,UACXu/D,EADW,CAAA96D,EAAAzE,KAAA,eAAAyE,EAAAU,OAAA,wBAKhBoiE,EAAmB9nB,QAAU4nB,EAAS5nB,QAASirB,cAL/BjmE,EAAAzE,KAAA,EAOOmqE,GAAY5D,cAAc9wE,EAAM0lE,WAPvC,cAOV+O,EAPUzlE,EAAAX,KAAAW,EAAAzE,KAAA,EAQImqE,GAAYjqC,SAASgqC,GARzB,cAQVn7E,EARU0V,EAAAX,KAAAW,EAAAzE,KAAA,GAUVunE,EAAmB9nB,QAAQvoD,QAAQnI,EAAO,CAC5C6H,KAAM,cACN0D,OAAQ7E,EAAM/G,KAZF,SAeV+7E,EAAsBpD,EAAS5nB,QAAS2lB,mBAAc9xE,EAAkB,CAC1E2yE,YAAa,SACbV,cAAc,EACdD,cAAc,EACdK,QAAQ,GACTr2E,QAAQC,MAESo7E,KAAK,gBAAiB,SAACx+D,GACvCs+D,EAAoB9B,OAAOiC,iBAAiBzE,iBAAiB,GAAGxzE,iBAAiB,QAAS,WAEtFw1E,OAAoB70E,KAGxB60E,EAAoB,CAChB7tE,OAAQilE,EAAU7wE,GAClBm4E,cAAe4D,EACfx3E,SAASW,OAAA2N,GAAA,EAAA3N,CAAA,GAAM2rE,EAAUtsE,YAG7Bs0E,EAAmB9nB,QAAQqqB,QAAQW,KAlCvB,yBAAAhmE,EAAAV,SAAAkoD,EAAAn4D,SAAH,yBAAA8D,EAAAuH,MAAArL,KAAAe,YAAA,GA2DX00E,EAAkB,WACpBlC,EAAS5nB,QAAU,IAAI0lB,YACvBkC,EAAS5nB,QAASorB,yBAAyB,CAEvCC,wCAAwC,EAExCC,qCAAsC,OAE1CzD,EAAQ7nB,QAAU4nB,EAAS5nB,QAAQirB,cAEnCpD,EAAQ7nB,QAAQrd,GAAG,yBAA0B,SAACj0C,GACrCk6E,EAAmB5oB,QAAQnpD,SAASnI,EAAEs7E,YACvCpB,EAAmB5oB,QAAQlpD,KAAKpI,EAAEs7E,UAClC3B,IAAqBX,OAI7BG,EAAQ7nB,QAAQrd,GAAG,wBAAyB,SAACj0C,GACzC,IAAMooC,EAAQ8xC,EAAmB5oB,QAAQ4J,QAAQl7D,EAAEs7E,WACpC,IAAXlzC,IACA8xC,EAAmB5oB,QAAQ2J,OAAO7yB,EAAO,GACzCuxC,IAAqBX,OAzX7BG,EAAQ7nB,QAAQrd,GAAG,gBAAiB,SAACj2B,GACjC7c,QAAQC,IAAI,yBAEZm5E,EAAkBv8D,EAAMw8D,UA2X5BW,IACAW,IAEAhP,GAAoB0L,yBAAyBlxE,EAAM/G,GAAI+G,EAAM0lE,UAAWqH,IAGtEwI,EAAiBC,uBAAY,WAC3B3D,EAAQ7nB,SACR6nB,EAAQ7nB,QAAQ7e,aAGhB2mC,EAAmB9nB,SACnB8nB,EAAmB9nB,QAAQ7e,aAG/B0mC,EAAQ7nB,aAAUnsD,EAClBi0E,EAAmB9nB,aAAUnsD,EAC7B+zE,EAAS5nB,aAAUnsD,EACnB2nE,GAAoBW,mCACrB,IAEHnpE,qBAAU,WAIN,OAHAmG,OAAOjG,iBAAiB,eAAgBq4E,GAExCzB,IACO,WACH3wE,OAAOhG,oBAAoB,eAAgBo4E,GAC3CA,MAEL,IAEHv4E,qBAAU,WACN,IAAMgvE,EAAkB,SAACpqC,GACrB0wC,EAAkB,CAACrxD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,KAG9C+qD,EAAe,SAACxR,EAAe74B,GACjC2wC,EAAc9X,GACd6X,EAAkB1wC,IAGtB,GAAGlO,EAAO,CACN,IAAMkO,EAAYlO,EAAMkK,sBACxB00C,EAAkB,CAACrxD,EAAG2gB,EAAU3gB,EAAGC,EAAG0gB,EAAU1gB,IAChDqxD,EAAc7+C,EAAMiK,mBAEpBjK,EAAMoK,UAAUkuC,GAChBt4C,EAAMuK,OAAOguC,GAGjB,OAAO,WACAv4C,IACCA,EAAMqK,WAAWiuC,GACjBt4C,EAAMwK,QAAQ+tC,MAGvB,CAACv4C,IAEJ,IAAM+hD,IAAqB3L,EAE3B9sE,qBAAU,WACN,GAAG02B,GAASo2C,EAAW,CACnB,IAAMrP,EAAQ/mC,EAAMiK,kBACdouC,EAAkB,CACpBj1B,MAAQ,EAAIpjB,EAAMkK,sBAAsB3c,EAAMjhB,EAAM+pE,gBAAgBjzB,KAAO2jB,EAC3E1jB,KAAO,EAAIrjB,EAAMkK,sBAAsB1c,EAAMlhB,EAAM+pE,gBAAgBhzB,IAAM0jB,GAE7E5gE,QAAQC,IAAI,oBAAqBiyE,EAAiBtR,GAClD+X,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBtsE,SAAUuuE,OAE3C,CAACr4C,EAAO+hD,IAEX,IAAM/N,EAAuBgO,QACzB5L,GAAaA,EAAUnC,aACvBgL,EAAe3oB,QAAQ7jB,KAAK,SAAA2mC,GAAU,OAAIA,EAAWnF,eAGnDgO,EAAehD,EAAe3oB,QAAQj9C,IAAI,SAAA+/D,GAAU,OACtD/rE,GAAAC,EAAAC,cAAA,WACIF,GAAAC,EAAAC,cAAC20E,GAAD,CACIh3E,IAAKkuE,EAAW7zE,GAChBmL,KAAM0oE,EACNzF,aAAa,EACb3B,UAAW1lE,EAAM0lE,UACjB+B,OACKqC,EAAgBhoC,KAAKisC,IAAIjsC,KAAKksC,KAAK,IAAMlsC,KAAKmsC,KAC3CnsC,KAAKosC,IAAKpB,EAAWtvE,SAASu5C,IAAM+yB,EAAUtsE,SAASu5C,IAAM,GAC7DjV,KAAKosC,IAAKpB,EAAWtvE,SAASs5C,KAAOgzB,EAAUtsE,SAASs5C,KAAO,KAC9D,IAAK,GAAI,GAHD,EAKjBu6B,WAAYuB,EAAmB5oB,QAAQnpD,SAASisE,EAAWsE,cAAc8B,OAAOc,UAChFtM,qBAAsBA,OAK5BmO,GAAqBhD,EAAsB7oB,QAAQj9C,IAAI,SAAA8nE,GAAiB,OAC1E9zE,GAAAC,EAAAC,cAAA,WACIF,GAAAC,EAAAC,cAAC60E,GAAD,CACItE,YAAaqD,EACbnP,UAAW1lE,EAAM0lE,UACjByB,iBAAkB,SAAAJ,GAAc,OAAI6N,EAAiC7N,EAAgB8N,EAAkBhwE,cAKnH,OACI9D,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,kBAAkBnB,MAAO,CACpC5lB,SAAU,WACVu5C,IAAK,EACLD,KAAM,EACN31B,MAAO,OACPC,OAAQ,OACRsnD,cAAe,SAEf3nE,GAAAC,EAAAC,cAAA,OAAKmiB,MAAO,CACRgrD,UAAS,SAAAlrE,OAAWgnE,EAAX,gBAAAhnE,OAAoC+mE,EAAehpD,EAAnD,QAAA/d,OAA2D+mE,EAAe/oD,EAA1E,OACTmtD,gBAAiB,QAEhBvE,GACG/oE,GAAAC,EAAAC,cAAA,WACIF,GAAAC,EAAAC,cAAC20E,GAAD,CACIxxE,KAAM0lE,EACNzC,aAAa,EACb3B,UAAW1lE,EAAM0lE,UACjByB,iBAtTe,SAACJ,GACpC,IAAMtM,EAAQ/mC,EAAMiK,kBAEdsvC,EAAclG,EAAeR,qBAAqBtlD,EAAI8lD,EAAeT,mBAAmBrlD,EACxFisD,EAAcnG,EAAeR,qBAAqBrlD,EAAI6lD,EAAeT,mBAAmBplD,EAExFkmD,EAA2B,CAC7BtwB,KAAMiwB,EAAeV,oBAAoBvvB,KAAQm2B,EAAcxS,EAC/D1jB,IAAKgwB,EAAeV,oBAAoBtvB,IAAOm2B,EAAczS,GAOjE,OAHGqP,GACC0I,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBtsE,SAAU4pE,KAEnCA,GAwSaK,OAAQ,EACR4J,WAAYuB,EAAmB5oB,QAAQnpD,SAASipE,EAAUsH,cAAc8B,OAAOc,UAC/EtM,qBAAsBA,KAIjCiO,EACAlD,GACG1xE,GAAAC,EAAAC,cAAA,WACIF,GAAAC,EAAAC,cAAC60E,GAAD,CACItE,YAAaiB,EACb/M,UAAW1lE,EAAM0lE,UACjByB,iBAAkByN,KAI7BiB,IAGJ/L,GAAc/oE,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACX10C,GAAAC,EAAAC,cAAA,UACIlE,QAnSK,WACjB,GAAK+sE,EAAL,CAIA,IAAMqD,GAAqBrD,EAAUtB,SACrCsB,EAAUsH,cAActB,aAAa3C,GACrCqF,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBtB,SAAU2E,KACtC4F,EAAsB,CAAEQ,cAAepG,MA4R3B/pD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,GAAK,KAAMunD,cAAe,OAC3FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAWulD,EAAUtB,SAAU,aAAe,6BAC9CplD,MAAO0mD,EAAUtB,SAAW,CAAE71B,MAAO,WAAc,CAAEA,MAAO,eAGpE5xC,GAAAC,EAAAC,cAAA,UACIlE,QAjSE,WACd,GAAK+sE,EAAL,CAIA,IAAMwD,GAAkBxD,EAAUb,MAClCa,EAAUsH,cAAcvB,aAAavC,GACrCkF,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBb,MAAOqE,KACnCyF,EAAsB,CAAES,cAAelG,MA0R3BlqD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,GAAK,KAAMunD,cAAe,OAC3FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAWulD,EAAUb,MAAQ,kBAAoB,wBACjD7lD,MAAO0mD,EAAUb,MAAQ,CAAEt2B,MAAO,WAAc,CAAEA,MAAO,eAGjE5xC,GAAAC,EAAAC,cAAA,UACIlE,QA/RQ,WACpB,GAAK+sE,EAAL,CAIA,IAAM0D,GAAwB1D,EAAUnC,YACxC6K,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBnC,YAAa6F,KACzCuF,EAAsB,CAAEU,kBAAmBjG,MAyR/BpqD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC5FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,gBACXnB,MAAO0mD,EAAUnC,YAAc,CAAEh1B,MAAO,WAAc,CAAEA,MAAO,eAGvE5xC,GAAAC,EAAAC,cAAA,UACIlE,QAhNU,WACjB01E,GAbDX,EAAmB9nB,UACfyoB,GACAX,EAAmB9nB,QAAQ+rB,UAAUtD,EAAiBrB,eAG1DsB,OAAoB70E,GACpBi0E,EAAmB9nB,QAAQ7e,cAG/B2mC,EAAmB9nB,aAAUnsD,GAKzBk3E,KA+MQ3xD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC5FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,eACXnB,MAAOqvD,EAAmB,CAAE9/B,MAAO,WAAc,CAAEA,MAAO,eAGlE5xC,GAAAC,EAAAC,cAAA,UACIlE,QAvSK,WACjB,GAAK+sE,EAAL,CAIA,IAAM2D,GAAqB3D,EAAUP,SACrCiJ,EAAar0E,OAAA2N,GAAA,EAAA3N,CAAA,GAAI2rE,EAAL,CAAgBP,SAAUkE,KACtCsF,EAAsB,CAAEW,eAAgBjG,MAiS5BrqD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC5FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,kBACXnB,MAAO0mD,EAAUP,SAAW,CAAE52B,MAAO,WAAc,CAAEA,MAAO,eAIpE5xC,GAAAC,EAAAC,cAAA,OAAKsjB,UAAW,gBACZxjB,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMouE,EAAY,cAC3B/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC5FnkD,UAAW,4CACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,iBACXnB,MAAiC,aAA1B0mD,EAAUN,aAA8B,CAAE72B,MAAO,WAAc,CAAEA,MAAO,eAIvF5xC,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMouE,EAAY,gBAC3B/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,GAAIxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC5FnkD,UAAW,8DACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,qCACXnB,MAAiC,eAA1B0mD,EAAUN,aAAgC,CAAE72B,MAAO,WAAc,CAAEA,MAAO,eAIzF5xC,GAAAC,EAAAC,cAAA,UACIlE,QAAS,kBAAMouE,EAAY,SAC3B/nD,MAAO,CAAE5lB,SAAU,WAAY8rE,OAAQ,IAAKxyB,KAAMw3B,EAAQntD,MAAQ,IAAM,KAAMunD,cAAe,OAC7FnkD,UAAW,8DACXN,SAAUljB,GAAAC,EAAAC,cAAA,KACNsjB,UAAW,8BACXnB,MAAiC,QAA1B0mD,EAAUN,aAAyB,CAAE72B,MAAO,WAAc,CAAEA,MAAO,mBCjqBvFu8B,GAvCM,SAAClvE,GAA6B,IAAAshB,EACbC,qBAAS,GADIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACxC6tD,EADwC3tD,EAAA,GAC7B4tD,EAD6B5tD,EAAA,GAAAG,EAEOJ,oBAAiB,IAFxBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAExCmgD,EAFwClgD,EAAA,GAEnBmgD,EAFmBngD,EAAA,GAAAG,EAGOR,oBAAiB,IAHxBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGxCigD,EAHwChgD,EAAA,GAGnBigD,EAHmBjgD,EAAA,GAmB/C,OACIplB,GAAA,cAAAA,GAAA,cAd+B,KAAxBklE,GAAsD,KAAxBE,GAenBplE,GAAA,cAACo5E,GAAD,CACVtQ,UAAW1lE,EAAM0lE,UACjBzsE,GAAI+G,EAAM/G,GACViM,KAAMlF,EAAMkF,KACZ87C,OAAQhhD,EAAMghD,OACd+oB,gBAAiB/pE,EAAM+pE,gBACvBsB,YAAarJ,EACboJ,YAAatJ,IAEjBllE,GAAA,cAACq5E,GAAD,CAAmBniE,KAAMq7D,EACrB5K,kBAtBkB,SAACzB,GAC3Bb,EAAuBa,EAAQ0B,OAC/BzC,EAAuBe,EAAQ2B,OAC/B2K,GAAa,IAoBLh6B,SAjBS,WACjBg6B,GAAa,IAiBL9K,mBAAoBtkE,EAAMskE,uBJJpC4R,qDAEMC,yBAEAC,0BAAkD,QAClDC,wBAA8C,QAC9CC,iCAAyD,QACzDC,gCAAwD,QACxDC,iCAAyD,6DAE7CC,GAAwC,IAAAp5D,EAAAhf,KACxDA,KAAK83E,aAAeM,EAEjBp4E,KAAK83E,eACJ93E,KAAK+3E,0BAA0Bx1E,QAAQ,SAAAk6D,GAAC,OAAIz9C,EAAK84D,aAAcO,aAAa5b,KAC5Ez8D,KAAKg4E,wBAAwBz1E,QAAQ,SAAAk6D,GAAC,OAAIz9C,EAAK84D,aAAcQ,WAAW7b,KACxEz8D,KAAKi4E,iCAAiC11E,QAAQ,SAAAk6D,GAAC,OAAIz9C,EAAK84D,aAAcS,oBAAoB9b,KAC1Fz8D,KAAKk4E,gCAAgC31E,QAAQ,SAAAk6D,GAAC,OAAIz9C,EAAK84D,aAAcU,mBAAmB/b,KACxFz8D,KAAKm4E,iCAAiC51E,QAAQ,SAAAk6D,GAAC,OAAIz9C,EAAK84D,aAAcW,oBAAoBhc,MAG9Fz8D,KAAK+3E,0BAA4B,GACjC/3E,KAAKg4E,wBAA0B,GAC/Bh4E,KAAKi4E,iCAAmC,GACxCj4E,KAAKk4E,gCAAkC,GACvCl4E,KAAKm4E,iCAAmC,kDAGdrb,GACvB98D,KAAK83E,cACJ93E,KAAK83E,aAAaY,uBAAuB5b,mDAKlBE,GACxBh9D,KAAK83E,cACJ93E,KAAK83E,aAAaa,wBAAwB3b,6CAIzBf,EAAqBwB,GACvCz9D,KAAK83E,cACJ93E,KAAK83E,aAAac,kBAAkB3c,EAAMwB,+CAIvBZ,GACpB78D,KAAK83E,cACJ93E,KAAK83E,aAAae,oBAAoBhc,gDAKvC78D,KAAK83E,cACJ93E,KAAK83E,aAAajZ,gFAIgB5C,EAAqBwB,GACxDz9D,KAAK83E,cACJ93E,KAAK83E,aAAaha,mCAAmC7B,EAAMwB,uCAIhDj3D,GACZxG,KAAK83E,cACJ93E,KAAK83E,aAAa7Z,YAAYz3D,wCAIlBg5B,GACbx/B,KAAK83E,aACJ93E,KAAK83E,aAAaO,aAAa74C,GAE/Bx/B,KAAK+3E,0BAA0Bt1E,KAAK+8B,yCAIvBA,GACdx/B,KAAK83E,aACJ93E,KAAK83E,aAAagB,cAAct5C,GAEhCx/B,KAAK+3E,0BAA4B/3E,KAAK+3E,0BAA0Bz1E,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,uCAIxEA,GACXx/B,KAAK83E,aACJ93E,KAAK83E,aAAaQ,WAAW94C,GAE7Bx/B,KAAKg4E,wBAAwBv1E,KAAK+8B,uCAIvBA,GACZx/B,KAAK83E,aACJ93E,KAAK83E,aAAaiB,YAAYv5C,GAE9Bx/B,KAAKg4E,wBAA0Bh4E,KAAKg4E,wBAAwB11E,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,sCAIrEm8B,GACV37D,KAAK83E,cACJ93E,KAAK83E,aAAakB,UAAUrd,mDAILn1D,GACxBxG,KAAK83E,cACJ93E,KAAK83E,aAAahc,wBAAwBt1D,+CAK3CxG,KAAK83E,cACJ93E,KAAK83E,aAAamB,qDAIVxgC,GACTz4C,KAAK83E,cACJ93E,KAAK83E,aAAaoB,SAASzgC,qEAK5Bz4C,KAAK83E,cACJ93E,KAAK83E,aAAa/Z,yFAIIv3D,EAA0Bw3D,EAA8Brb,GAC/E3iD,KAAK83E,cACJ93E,KAAK83E,aAAajc,uBAAuBr1D,EAAQw3D,EAAUrb,2CAI5Csa,GAChBj9D,KAAK83E,cACJ93E,KAAK83E,aAAaxa,gBAAgBL,8CAIhBz9B,GACnBx/B,KAAK83E,aACJ93E,KAAK83E,aAAaU,mBAAmBh5C,GAErCx/B,KAAKk4E,gCAAgCz1E,KAAK+8B,+CAIvBA,GACpBx/B,KAAK83E,aACJ93E,KAAK83E,aAAaqB,oBAAoB35C,GAEtCx/B,KAAKk4E,gCAAkCl4E,KAAKk4E,gCAAgC51E,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,gDAI3EA,GACpBx/B,KAAK83E,aACJ93E,KAAK83E,aAAaS,oBAAoB/4C,GAEtCx/B,KAAKi4E,iCAAiCx1E,KAAK+8B,gDAIvBA,GACrBx/B,KAAK83E,aACJ93E,KAAK83E,aAAasB,qBAAqB55C,GAEvCx/B,KAAKi4E,iCAAmCj4E,KAAKi4E,iCAAiC31E,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,gDAI7EA,GACpBx/B,KAAK83E,aACJ93E,KAAK83E,aAAaW,oBAAoBj5C,GAEtCx/B,KAAKm4E,iCAAiC11E,KAAK+8B,gDAIvBA,GACrBx/B,KAAK83E,aACJ93E,KAAK83E,aAAauB,qBAAqB75C,GAEvCx/B,KAAKm4E,iCAAmCn4E,KAAKm4E,iCAAiC71E,OAAO,SAAAm6D,GAAC,OAAIA,IAAMj9B,4CAIjFy9B,GAChBj9D,KAAK83E,cACJ93E,KAAK83E,aAAava,gBAAgBN,0CAIpBA,GACfj9D,KAAK83E,cACJ93E,KAAK83E,aAAawB,eAAerc,YAOtC,SAASsc,KAKZ,OAJI3G,KACAA,GAAmB,IAAIiF,IAGpB,CAACjF,GAAmB,SAAAwF,GAAS,OAAIxF,GAAkB4G,aAAapB,SKknC5DqB,eA/uCX,SAAAA,EAAY93E,GAA0B,IAAAqd,EAAAlf,OAAAC,GAAA,EAAAD,CAAAE,KAAAy5E,IAClCz6D,EAAAlf,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA25E,GAAAr5E,KAAAJ,KAAM2B,KA3BF+3E,aA0B8B,EAAA16D,EAzB9B26D,cAyB8B,EAAA36D,EAxB9B46D,eAwB8B,EAAA56D,EAvB9Bsc,cAuB8B,EAAAtc,EAtB9B66D,WAsB8B,EAAA76D,EArB9B86D,aAAuB,EAqBO96D,EApB9Bo5D,eAoB8B,EAAAp5D,EAnB9B+6D,aAmB8B,EAAA/6D,EAlB9Bg7D,iBAA2B,GAkBGh7D,EAjB9Bi7D,WAA0B,KAiBIj7D,EAhB9Bk7D,sBAgB8B,EAAAl7D,EAf9Bm7D,qBAe8B,EAAAn7D,EAd9Bo7D,oBAc8B,EAAAp7D,EAb9Bq7D,sBAAsD,KAaxBr7D,EAZ9Bs7D,kBAA8C,KAYhBt7D,EAX9Bu7D,iBAA4C,KAWdv7D,EAV9Bw7D,kBAU8B,EAAAx7D,EAT9By7D,sBAS8B,EAAAz7D,EAR9B07D,wBAQ8B,EAAA17D,EAP9B27D,aAAc,EAOgB37D,EAN9B47D,cAAe,EAMe57D,EAL9B67D,SAA0B,KAKI77D,EAF9BoD,WAE8B,EAAApD,EAg6B9B87D,oBAh6B8B,eAAAl3E,EAAA9D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAg6BR,SAAAyG,EAAOC,EAA2Bi7D,GAAlC,IAAA1lD,EAAAlT,EAAAyb,EAAAo9C,EAAAC,EAAA5qE,EAAAC,EAAAC,EAAAC,EAAAC,EAAAyqE,EAAAC,EAAAC,EAAArwE,EAAAswE,EAAAC,EAAAC,EAAAC,EAAAC,EAAA9vE,EAAAC,EAAAC,EAAAE,EAAAD,EAAA4vE,EAAAt7C,EAAAu7C,EAAAljB,EAAAC,EAAAC,EAAAE,EAAAC,EAAA8iB,EAAA,OAAAjsE,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,UACtB8S,EAAK+6D,SAAY/6D,EAAK+6D,QAAQvjB,eADR,CAAA3mD,EAAA3D,KAAA,eAEtB1Q,QAAQC,IAAI,mFAFUoU,EAAAwB,OAAA,oBAM1B7V,QAAQC,IAAI,4BAA6BqkB,EAAYtG,QAE/C6b,EAAQrW,EAAKsc,SAAS0tB,OAAO3zB,MAC7BlT,EAAUnD,EAAKrd,MAAMygB,MAAM7iB,IAC3Bq+B,EAAkBxU,GAAmCjH,GAExDrC,EAAYrgB,SAAWq7B,GAAc0iB,QAZd,CAAA3tC,EAAA3D,KAAA,SAahB8uE,EAA2B,GAC3BC,EAAsB,GAdN5qE,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAqQ,EAAAC,KAAA,GAAAU,EAeFuqE,EAfE/uE,OAAAC,YAAA,WAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAA0D,EAAA3D,KAAA,YAeZgvE,EAfYzqE,EAAAjQ,QAgBZ26E,EAAcD,EAAOt8C,OAhBT,CAAA/uB,EAAA3D,KAAA,YAmBXkyB,eAAeG,gBAAgB48C,KAAiB18C,GAAgBO,KAnBrD,CAAAnvB,EAAA3D,KAAA,gBAoBV+uE,EAAax4E,KAAK04E,GApBRtrE,EAAAwB,OAAA,0BAwBR+pE,EAAe/lD,EAAMwmD,gBAAgBV,GAE3CH,EAAev4E,KAAf4I,MAAA2vE,EAAcl7E,OAAAyZ,GAAA,EAAAzZ,CAASs7E,EAAa1sE,IAAI,SAAC0xB,GAAD,OAAeA,EAAKnE,aAEzDm/C,EAAap6E,OA5BF,CAAA6O,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,GA6BJ8S,EAAK+6D,QAASxhB,iBAAiBp2C,EAASi5D,EAAa1sE,IACvD,SAAC0xB,GAAD,OAAe,IAAI3C,GAAe2C,EAAM/K,EAAM0K,YAAY,EAAOnC,MA9B3D,QAAAvtB,GAAA,EAAAR,EAAA3D,KAAA,iBAAA2D,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,UAAAS,GAAA,EAAAC,EAAAV,EAAAkB,GAAA,QAAAlB,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAsD,EAAAC,KAAA,IAAAQ,EAAA,CAAAT,EAAA3D,KAAA,eAAAqE,EAAA,eAAAV,EAAAmB,OAAA,mBAAAnB,EAAAmB,OAAA,YAAAjG,EAAA,eAAAA,EAqCGkwE,EArCHj6E,QAAA,CAAA6O,EAAA3D,KAAA,YAqCZmvE,EAAeJ,EArCHlwE,GAsCZuwE,EAAY,GACfD,EAAYp8C,SAAW+7C,EAAex4E,SAAS64E,EAAYp8C,OAAOhD,UACjEq/C,EAAU74E,KAAK,IAAIg7B,GAAe49C,EAAYp8C,OAAQ5J,EAAM0K,YAAY,EAAOnC,IAEhFy9C,EAAYl8C,SAAW67C,EAAex4E,SAAS64E,EAAYl8C,OAAOlD,UACjEq/C,EAAU74E,KAAK,IAAIg7B,GAAe49C,EAAYl8C,OAAQ9J,EAAM0K,YAAY,EAAOnC,KAEhF09C,EAAUt6E,OA7CK,CAAA6O,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,GA8CR8S,EAAK+6D,QAASjiB,iBAAiB31C,EAASm5D,GA9ChC,QAAAvwE,IAAA8E,EAAA3D,KAAA,wBAAA2D,EAAAwB,OAAA,qBAqDtByO,EAAYnb,OArDU,CAAAkL,EAAA3D,KAAA,gBAsDtB1Q,QAAQC,IAAI,mCAtDUoU,EAAAwB,OAAA,kBA0DpBkqE,EAAqBz7D,EAAYnb,OAAOm3E,MAAM,KAC9CN,EAAwB,GACxBC,EAA4B,GA5DR9vE,GAAA,EAAAC,GAAA,EAAAC,OAAArM,EAAAqQ,EAAAC,KAAA,GAAA/D,EA8DNwvE,EA9DMvvE,OAAAC,YAAA,WAAAN,GAAAG,EAAAC,EAAAG,QAAAC,KAAA,CAAA0D,EAAA3D,KAAA,aA8DhBvH,EA9DgBmH,EAAAtL,MA+DhB4/B,EAAO/K,EAAMkL,MAAMF,QAAQ17B,GA/DX,CAAAkL,EAAA3D,KAAA,gBAkElB1Q,QAAQC,IAAI,kDAAmDkJ,GAlE7CkL,EAAAwB,OAAA,2BAsEnB+sB,eAAeG,gBAAgB6B,KAAU3B,GAAgBO,KAtEtC,CAAAnvB,EAAA3D,KAAA,gBAuElB1Q,QAAQC,IAAI,uBAAwB2kC,GACjCA,EAAKnB,SAAWw8C,EAAgBj5E,SAAS49B,EAAKnB,OAAOhD,WACpDzgC,QAAQC,IAAI,wCACZggF,EAAgBh5E,KAAK29B,EAAKnB,OAAOhD,SACjCu/C,EAAc/4E,KAAK,IAAIg7B,GAAe2C,EAAKnB,OAAQ5J,EAAM0K,YAAY,EAAOnC,KAG7EwC,EAAKjB,SAAWs8C,EAAgBj5E,SAAS49B,EAAKjB,OAAOlD,WACpDzgC,QAAQC,IAAI,wCACZggF,EAAgBh5E,KAAK29B,EAAKjB,OAAOlD,SACjCu/C,EAAc/4E,KAAK,IAAIg7B,GAAe2C,EAAKjB,OAAQ9J,EAAM0K,YAAY,EAAOnC,KAjF9D/tB,EAAAwB,OAAA,2BAuFlBgkB,EAAMyJ,SAASsB,GAvFG,CAAAvwB,EAAA3D,KAAA,UA0FlB,IAFMyvE,EAAiBtmD,EAAMwmD,gBAAgBz7C,GAxF3Bq4B,GAAA,EAAAC,GAAA,EAAAC,OAAAn5D,EAAAqQ,EAAAC,KAAA,GA0FlB+oD,EAAyB8iB,EAAzB3vE,OAAAC,cAAAwsD,GAAAK,EAAAD,EAAA3sD,QAAAC,MAAAssD,GAAA,EAAUmjB,EAA+B9iB,EAAAt4D,MACjCi7E,EAAgBj5E,SAASo5E,EAAY3/C,WACrCw/C,EAAgBh5E,KAAKm5E,EAAY3/C,SACjCu/C,EAAc/4E,KAAK,IAAIg7B,GAAem+C,EAAavmD,EAAM0K,YAAY,EAAOnC,KA7FlE/tB,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAm8B,GAAAn8B,EAAA,UAAA6oD,GAAA,EAAAC,EAAA9oD,EAAAm8B,GAAA,QAAAn8B,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAA2oD,GAAA,MAAAI,EAAAtsD,QAAAssD,EAAAtsD,SAAA,WAAAsD,EAAAC,KAAA,IAAA4oD,EAAA,CAAA7oD,EAAA3D,KAAA,eAAAysD,EAAA,eAAA9oD,EAAAmB,OAAA,mBAAAnB,EAAAmB,OAAA,oBAAAnB,EAAAwB,OAAA,yBAoGlBoqE,EAAgBj5E,SAAS49B,EAAKnE,WAC9Bw/C,EAAgBh5E,KAAK29B,EAAKnE,SAC1Bu/C,EAAc/4E,KAAK,IAAIg7B,GAAe2C,EAAM/K,EAAM0K,YAAY,EAAOnC,KAtGnD,SAAAjyB,GAAA,EAAAkE,EAAA3D,KAAA,kBAAA2D,EAAA3D,KAAA,mBAAA2D,EAAAC,KAAA,IAAAD,EAAAo8B,GAAAp8B,EAAA,UAAAjE,GAAA,EAAAC,EAAAgE,EAAAo8B,GAAA,SAAAp8B,EAAAC,KAAA,IAAAD,EAAAC,KAAA,IAAAnE,GAAA,MAAAI,EAAAQ,QAAAR,EAAAQ,SAAA,YAAAsD,EAAAC,KAAA,KAAAlE,EAAA,CAAAiE,EAAA3D,KAAA,gBAAAL,EAAA,gBAAAgE,EAAAmB,OAAA,qBAAAnB,EAAAmB,OAAA,qBAAAnB,EAAA3D,KAAA,IA0GpB8S,EAAK+6D,QAASjiB,iBAAiB31C,EAASq5D,GA1GpB,0BAAA3rE,EAAAI,SAAA4P,EAAA7f,KAAA,2FAh6BQ,gBAAAi3D,EAAAY,GAAA,OAAAj0D,EAAAyH,MAAArL,KAAAe,YAAA,GAElCie,EAAKtd,MAAQ,CACTq6E,iBAAiB,GAErB/8D,EAAKg9D,UAAYh9D,EACZg9D,UACAn6D,KAFY/hB,OAAAopD,GAAA,EAAAppD,QAAAopD,GAAA,EAAAppD,CAAAkf,KAIjBA,EAAK26D,SAAWpuB,KAAM0wB,YACtBj9D,EAAK46D,UAAYruB,KAAM0wB,YACvBj9D,EAAK66D,MAAQ,IAAIz2C,QACjBpkB,EAAK66D,MAAMqC,OAAS,SAACthF,GACjB,IAAMwlC,EAAOphB,EAAKsc,SAAS0tB,OAAO3zB,MAAMkL,MAAMF,QAAQzlC,GAEtD,OAAIwlC,GACO,MAhBmB,IAAA4wC,EAsBb5d,KAAZC,EAtByBvzD,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAwBlChyD,EAAKw7D,aAAennB,EAxBc,IAAA8oB,EA0BT5C,KAAhBC,EA1ByB15E,OAAAmL,GAAA,EAAAnL,CAAAq8E,EAAA,MA8BlC,GAFAn9D,EAAKy7D,iBAAmBjB,EAErB73E,EAAMoD,SAAST,OAAQ,CACtB,IAAM4rC,EAAS,IAAIksC,gBAAgBz6E,EAAMoD,SAAST,QAC/C4rC,EAAOv5B,IAAI,UACVqI,EAAK27D,aAAc,EACnB37D,EAAK47D,cAAe,GAErB1qC,EAAOv5B,IAAI,WACVqI,EAAK47D,cAAe,EACpB57D,EAAK27D,aAAc,GAGpBzqC,EAAOv5B,IAAI,UACVqI,EAAK67D,SAAW3qC,EAAOv5B,IAAI,SA1CD,OAAAqI,qFAgDlChf,KAAK2B,MAAMqvB,eAAehxB,KAAK2B,MAAMqI,MAAMkmC,OAAO3wC,mDAGzB88E,EAA8BC,GAAyB,IAAAv8D,EAAA/f,KAChF,IAAIA,KAAKoiB,OAASi6D,EAAUj6D,OAAiC,KAAxBi6D,EAAUt2E,KAAKc,KAChD,QAAIw1E,EAAUj6D,MAAM8X,iBAIpBl6B,KAAKu8E,eAAeF,IACb,GAiBX,GAdGr8E,KAAKoiB,OAASpiB,KAAKoiB,MAAM7iB,MAAQ88E,EAAUj6D,MAAM7iB,KAEhD88E,EAAUlzD,QAAQlf,QAAQmf,GAAsB,CAACqqB,KAAMrqB,GAAsCizD,EAAUj6D,MAAM7iB,OAG9GS,KAAKs7B,WAAat7B,KAAKoiB,MAAOkO,aAAe+rD,EAAUj6D,MAAMkO,aAE5DtwB,KAAKs7B,SAAS0tB,OAAO3zB,MAAMmnD,YAAW,GAGvCx8E,KAAKs7B,UAAYt7B,KAAK2B,MAAMsvC,WAAaorC,EAAUprC,UAClDjxC,KAAKy8E,YAAYJ,GAGlBr8E,KAAKoiB,OAASpiB,KAAKoiB,MAAM4X,qBAAuBqiD,EAAUj6D,MAAM4X,mBAK/D,OAJAh6B,KAAK46E,eAAiByB,EAAUj6D,MAAM4X,mBACnCh6B,KAAK85E,cAAgB95E,KAAK0B,MAAMq6E,iBAC/B/7E,KAAKqrD,SAAS,CAAC0wB,iBAAiB,KAE7B,EAGX,GAAG/7E,KAAKs7B,WAAa+gD,EAAU9rC,MAAM5hC,UAAW,CAC5C,IAAI+tE,EAAiB,EA8CrB,OA7CAL,EAAU9rC,MAAMhuC,QAAQ,SAAAwzB,GACpB,IAAMglD,EAAiB,GAEvB,IAAGh7D,EAAKqC,OAAU2T,EAAa6P,iBAAiB+2C,YAAY58D,EAAKqC,MAAM6N,SAAvE,CAKAysD,IAEA3mD,EAAagQ,UAAUxjC,QAAQ,SAAA8jC,GAC3B,IAAMlL,EAAOyG,QAAQg7C,SAASv2C,GACxB60C,EAASn7D,EAAK85D,MAAMgD,OAAO1hD,EAAK2hD,iBACtC5B,EAAO36C,MAAQxgB,EAAKub,SAAS0tB,OAAO3zB,MAAMkL,MAC1C26C,EAAOz6C,UACPs6C,EAAQt4E,KAAKy4E,GACbn7D,EAAKg9D,uCAAuC7B,KAGhD,IAAM8B,EAAO,IAAIC,eAAel9D,EAAKub,SAAS0tB,OAAO3zB,MAAMkL,OAAO,GAClEy8C,EAAKjC,QAAUA,EAEfiC,EAAKp8E,OAAS,WAEVo8E,EAAK/9C,OAAOi+C,UAAU,IAAIC,cAAcx4C,QAAQC,OAC5C,OAAQo4C,EAAM,UAAWA,EAAKjC,WAItCh7D,EAAKub,SAAS0tB,OAAO3zB,MAAMkL,MAAM28C,UAAU,IAAIC,cAAcx4C,QAAQC,OACjE,OAAQo4C,EAAM,UAAWjC,IAE7Bh7D,EAAK+6D,oBAAoB/kD,EAAcglD,GAASt9E,MAAM,SAAA6O,GAAG,OAAI9Q,QAAQF,MAAMgR,UA5BvE9Q,QAAQC,IAAI,yCAA0Cs6B,EAAa3E,YA+BxEsrD,EAAiB,GAChB18E,KAAKo1B,UAAUinD,EAAU9rC,MAAM6sC,KAAK,IAAIC,EAAUp3C,aAAao3C,EAAUv3C,2BAA2BF,iBAAiB03C,UAGzHjB,EAAUkB,oBAAoBlB,EAAU9rC,OAErCvwC,KAAKs7B,UACJt7B,KAAKw9E,mBAAmBnB,IAGrB,EAsBX,OAnBGr8E,KAAKs7B,UAAY+gD,EAAUj6D,MAAMqX,eAChCz5B,KAAKs7B,SAAS2E,QAAQtpB,IAAI,UAAUupB,MAAM,SAAC7K,GACvC,IAAMgE,EAAMuI,QAAQ2C,OAAOxkB,EAAKub,SAAS0tB,OAAOy0B,eAChD19D,EAAKqC,MAAQrC,EAAKqC,MAAOs7D,UAAUrkD,EAAKgjD,EAAUt2E,KAAKxG,KAEvD88E,EAAUsB,gBAAgBtB,EAAUj6D,MAAM7iB,IAAKwgB,EAAKqC,MAAOgZ,GAAuBrb,EAAKub,SAAS0tB,OAAO3zB,MAAOtV,EAAKub,aAEvH+gD,EAAUuB,qBAAqB59E,KAAKoiB,MAAO7iB,MAG5CS,KAAKs7B,UAAY+gD,EAAUj6D,MAAMsX,eAChC15B,KAAKs7B,SAAS2E,QAAQtpB,IAAI,UAAUupB,QACpCm8C,EAAUwB,gBAAgBxB,EAAUj6D,MAAM7iB,MAG3CS,KAAKs7B,UACJt7B,KAAKw9E,mBAAmBnB,KAGxBr8E,KAAK0B,MAAMq6E,kBAAmBO,EAAUP,mBACxCvgF,QAAQC,IAAI,yDACL,kDAORuE,KAAKs7B,UACJt7B,KAAKs7B,SAASwiD,UAElB99E,KAAKw6E,kBAAah7E,GAClBQ,KAAKy6E,sBAAiBj7E,GACtBzC,SAAS47C,KAAK5zB,MAAM4lD,SAAW,OAC/B5tE,SAASiC,MAAQ,eAEjB,IAAM++E,EAAchhF,SAASqsD,eAAe,gBACxC20B,IACAA,EAAYtf,UAAY,IAGzBz+D,KAAK2B,MAAMygB,QACVpiB,KAAK2B,MAAMq8E,cAAch+E,KAAK2B,MAAMygB,MAAM7iB,KAC1CS,KAAK2B,MAAM6yB,kBAAkBx0B,KAAK2B,MAAMygB,MAAM7iB,MAI/CS,KAAKo4E,WACJp4E,KAAKo4E,UAAUc,SAAS,CACpB1yE,OAAQxG,KAAK2B,MAAMoE,KAAKxG,IACxB4iB,QAASniB,KAAK2B,MAAMygB,MAAM7iB,MAI/BS,KAAK+5E,UACJ/5E,KAAK+5E,QAAQziB,oBAAe93D,GAC5BQ,KAAK+5E,QAAQjtC,+CAML,IAAA3sB,EAAAngB,KACZ,OACI0C,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACI10C,GAAAC,EAAAC,cAAA,OAAKsjB,UAAU,sCAAsCyiC,IAAK3oD,KAAK25E,SAAU/+E,GAAG,aAC5E8H,GAAAC,EAAAC,cAAA,OAAK+lD,IAAK3oD,KAAK45E,WACXl3E,GAAAC,EAAAC,cAACkuD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAOxjB,GAAAC,EAAAC,cAACouD,GAAA,EAAD,CAAQhe,KAAK,SAAb,mBAE1ChzC,KAAK2B,MAAMygB,OAAS1f,GAAAC,EAAAC,cAACq7E,GAAD,CAAoB97D,QAASniB,KAAK2B,MAAMygB,MAAM7iB,IAC/CmgE,WAAY,SAAAA,GAAU,OAAIv/C,EAAK+5D,iBAAmBxa,GAClD3oB,SAAU,WACN52B,EAAK+5D,kBAAiB,IAE1BjY,eAAgB,SAACic,EAAW5rD,GACrBnS,EAAKk6D,uBACJl6D,EAAKk6D,sBAAsB6D,EAAW5rD,MAIjEtyB,KAAK2B,MAAMygB,OAAS1f,GAAAC,EAAAC,cAACu7E,GAAD,CAAkBh8D,QAASniB,KAAK2B,MAAMygB,MAAM7iB,IAC7CmgE,WAAY,SAAAA,GAAU,OAAIv/C,EAAKg6D,gBAAkBza,GACjD3oB,SAAU,WACN52B,EAAKg6D,iBAAgB,IAEzBna,aAAc,SAACpuC,GACRzR,EAAKm6D,mBACJn6D,EAAKm6D,kBAAkB1oD,MAIlD5xB,KAAK2B,MAAMygB,OAAS1f,GAAAC,EAAAC,cAACw7E,GAAD,CACF1e,WAAY,SAAAA,GAAU,OAAIv/C,EAAKi6D,eAAiB1a,GAChD3oB,SAAU,WACN52B,EAAKi6D,gBAAe,IAExBpa,aAAc,SAACpuC,GACRzR,EAAKo6D,kBACJp6D,EAAKo6D,iBAAiB3oD,MAIhD5xB,KAAK2B,MAAMygB,OAASpiB,KAAK26E,aAAej4E,GAAAC,EAAAC,cAACy7E,GAAD,CACrChX,UAAWrnE,KAAK2B,MAAMygB,MAAM7iB,IAC5B3E,GAAIoF,KAAK66E,UAAY76E,KAAK2B,MAAMoE,KAAKxG,IACrCsH,KAAM7G,KAAK2B,MAAMoE,KAAKc,KACtB87C,OAAQ3iD,KAAK2B,MAAMoE,KAAKa,UACxB8kE,gBAAiB,CAACjzB,KAAMhV,KAAK66C,MAAMx5E,OAAOy5E,WAAa,GAAI7lC,IAAKjV,KAAK66C,MAAMx5E,OAAO05E,YAAc,IAChGvY,oBAAqBjmE,KAAK0B,MAAMq6E,kBAEnC/7E,KAAK2B,MAAMygB,OAASpiB,KAAK46E,cAAgBl4E,GAAAC,EAAAC,cAAC67E,GAAD,CACtCpX,UAAWrnE,KAAK2B,MAAMygB,MAAM7iB,IAC5B3E,GAAIoF,KAAK66E,UAAY76E,KAAK2B,MAAMoE,KAAKxG,IACrCsH,KAAM7G,KAAK2B,MAAMoE,KAAKc,KACtB87C,OAAQ3iD,KAAK2B,MAAMoE,KAAKa,UACxB8kE,gBAAiB,CAACjzB,KAAMhV,KAAK66C,MAAMx5E,OAAOy5E,WAAa,GAAI7lC,IAAKjV,KAAK66C,MAAMx5E,OAAO05E,YAAc,IAChGvY,oBAAqBjmE,KAAK0B,MAAMq6E,0DAMzBp6E,GACnB3B,KAAK05E,QAAUgF,KACf1+E,KAAKg8E,UAAUr6E,EAAM,GAAI3B,KAAK05E,SAE9B38E,SAAS47C,KAAK5zB,MAAM4lD,SAAW,SAC/B5tE,SAASiC,MAAQ2C,EAAMygB,MAAMvb,KAAO,kBACpC7G,KAAKoiB,MAAQzgB,EAAMygB,wCAGLu8D,EAA8CC,GAC5D,IAAMvlD,EAAMuI,QAAQ2C,OAAOvkC,KAAKs7B,SAAS0tB,OAAOy0B,eAE5CkB,GAKA3+E,KAAKoiB,MAAQpiB,KAAKoiB,MAAOy8D,2BAA2BxlD,EAAKslD,GACzDnjF,QAAQC,IAAI,wCAAyCuE,KAAKoiB,MAAM6N,QAAQA,SACxEjwB,KAAK2B,MAAMm9E,oCACP9+E,KAAKoiB,MAAM7iB,IAAKS,KAAKoiB,MACrBgZ,GACIp7B,KAAKs7B,SAAS0tB,OAAO3zB,MACrBr1B,KAAKs7B,aAVbt7B,KAAKoiB,MAAQpiB,KAAKoiB,MAAOs7D,UAAUrkD,EAAKr5B,KAAK2B,MAAMoE,KAAKxG,KAExD/D,QAAQC,IAAI,uCAAwCuE,KAAKoiB,MAAM6N,QAAQA,UAYxE2uD,GACC5+E,KAAK2B,MAAMyzB,UAAUp1B,KAAKoiB,MAAOgZ,GAC7Bp7B,KAAKs7B,SAAS0tB,OAAO3zB,MACrBr1B,KAAKs7B,6CAKC35B,EAA0B9B,EAAW65E,GAAc,IAAAj5D,EAAAzgB,KAC3D+kC,EAAY/kC,KAAK25E,SAAShuB,QAEhC5mB,EAAU05B,UAAY,GAEtB78B,QAAQ00C,MAAQ,SAACj8E,GACbomB,EAAK9e,MAAMo9E,QAAQ,cAAe1kF,IAKtC,IAAI2kF,EAAWhyE,SAAQmxB,oBACjB8gD,EAAQC,OAEdC,aAAaC,UAAUC,SAAW,SAACj/C,GAC/B,IAAMxlC,EAAKokF,EAASM,MAEpB,OAAG1kF,GAIIqkF,EAAMM,SAASt/E,KAAK+Z,OAG/B,IAAMwlE,EAAeC,SAASL,UAAUphF,KAExCyhF,SAASL,UAAUphF,KAAO,WAEtBwhF,EAAan0E,MAAMrL,KAAMe,WACzBf,KAAKigC,QAAQtpB,IAAI,UAAU6lE,YAAW,IAK1CkD,YAAYC,mBAAoB,EAEhC,IAAMC,EAASF,YAAYG,iBAAiBC,cAAeC,aACvDL,YAAYM,iBAAiBF,cAAeC,YAGhDrG,EAAQ93C,QAAQxhB,OAAO,CAACw/D,EAAQK,WAAa,IAAIC,SAASC,MAAM,cAAe,SAACC,GAG5EV,YAAYl2B,MAAM42B,EAAI,GAAGC,WAGzB,IAAMC,EAAc,GAkCpB,GAhCAA,EAAOC,MAAMnB,UAAUoB,kBAAoBJ,EAAI,GAAGK,qBAGlDhgE,EAAK6a,SAAW,IAAImkD,SAAS,IAAIiB,OAA4B,MAArBC,UAAUC,OAAgBN,GAASv7C,GAAW,EAAOpjC,EAAMygB,MAAMvb,KAAM,yBClctF,SACjCy0B,EACAnS,EACA03D,EACAC,EACAC,GAEA,IAAM1rD,EAAQiG,EAAS0tB,OAAO3zB,MAE9BA,EAAM2rD,WAAW73D,GACjBkM,EAAM4rD,sBAAsBJ,GAC5BxrD,EAAM6rD,mBAAmBJ,GACzBzrD,EAAM8rD,oBAAoBJ,GDwblBK,CACI3gE,EAAK6a,SACL35B,EAAMwnB,QACNk4D,KACAj4D,GAAmCznB,EAAMygB,MAAM7iB,KAC/C,SAACP,EAAOiC,EAAK6B,GACG,SAATA,EACCnB,EAAM2/E,OAAOtiF,EAAOiC,GAEpBU,EAAMo9E,QAAQ//E,EAAOiC,KAKjCwf,EAAK8gE,4BACL9gE,EAAK+gE,0BACL/gE,EAAKghE,yBACLhhE,EAAKihE,6BACLjhE,EAAKkhE,yCACLlhE,EAAKmhE,iCACLnhE,EAAKohE,4BAA4BlgF,GACjC8e,EAAKqhE,mCACLrhE,EAAKshE,8BACLthE,EAAKuhE,qBACLvhE,EAAKwhE,0BAA0BtgF,GAC/B8e,EAAKg8D,YAAY96E,GAEdA,EAAMygB,MAAMiX,IAAK,CAChB,IAAM6oD,EAAWtgD,QAAQg7C,SAASj7E,EAAMygB,MAAMiX,KAC9C5Y,EAAK6a,SAAS0tB,OAAO3zB,MAAMkL,MAAMS,wCACjC,IACIvgB,EAAK6a,SAAS0tB,OAAO3zB,MAAM0L,sBAC3BtgB,EAAK6a,SAAS0tB,OAAO3zB,MAAM8sD,iBAAiBD,EAASpF,qBAAiBt9E,OAAWA,OAAWA,GAAW,GAF3G,QAKIihB,EAAK6a,SAAS0tB,OAAO3zB,MAAMkL,MAAMW,sCACjCzgB,EAAK6a,SAAS0tB,OAAO3zB,MAAM8L,uBAc/B,GAVA1gB,EAAK6a,SAAS0tB,OAAO3zB,MAAMmnD,WAAW76E,EAAMygB,MAAMkO,aAClD7P,EAAK6a,SAAS0tB,OAAO3zB,MAAM+sD,sBAExB3hE,EAAKk6D,aAAel6D,EAAKm6D,aACxBn6D,EAAK6a,SAAS0tB,OAAO3zB,MAAMgM,KAAK,GAAG,GAAM,GAAO,IAEhD5gB,EAAK6a,SAAS0tB,OAAO3zB,MAAMgM,KAAK,KAAM,GAAM,GAAO,GACnD5gB,EAAK6a,SAAS0tB,OAAO3zB,MAAMiM,WAG5B3/B,EAAMoD,SAAST,OAAQ,CACtB,IAAM4rC,EAAS,IAAIksC,gBAAgBz6E,EAAMoD,SAAST,QAC/C4rC,EAAOv5B,IAAI,UACV8J,EAAKw5D,WAAa/pC,EAAOv5B,IAAI,UAE7B8J,EAAKw5D,WAAa,IAI1Bn1E,OAAOs8B,WAAW,WACd3gB,EAAKq5D,aAAc,EAEnBr5D,EAAKg8D,YAAYh8D,EAAK9e,OACD8e,EAAK+8D,mBAAmB77E,IAExB8e,EAAKk6D,aAAgBl6D,EAAKm6D,cAC3Cn6D,EAAK6a,SAAS0tB,OAAO3zB,MAAMgtD,SAG/B5hE,EAAKm5D,UAAUjuB,QAAQ8S,UAAY,IACpC98D,EAAMoD,SAAST,OAAQ,IAAO,UAEjCmc,EAAKq5D,aAAc,GACfr5D,EAAKk6D,cAAel6D,EAAKm6D,cAAkBn6D,EAAK/e,MAAMq6E,kBACtDvgF,QAAQC,IAAI,8CACZglB,EAAK4qC,SAAS,CAAC0wB,iBAAiB,KAEpCt7D,EAAKm5D,UAAUjuB,QAAQ8S,UAAY,GAGvCh+C,EAAK6a,SAAS0tB,OAAO3zB,MAAMkN,iBAAiB9hB,EAAK6a,SAAS0tB,OAAO3zB,MAAMkL,MAAMF,QAAQlC,mBAAmB,KACxG1d,EAAK+5D,aAAap/C,GAAuB3a,EAAK6a,SAAS0tB,OAAO3zB,MAAO5U,EAAK6a,WAE1E0jD,EAAW,GACXr9E,EAAMi0B,UAAUj0B,EAAMygB,MAAM7iB,IAAKoC,EAAMoE,KAAKxG,IAAKoC,EAAMoE,KAAKc,MAC5DlF,EAAM2gF,mBAAmB3gF,EAAMygB,MAAOgZ,GAClC3a,EAAK6a,SAAS0tB,OAAO3zB,MACrB5U,EAAK6a,WAET7a,EAAK8hE,cAAc5gF,yDAIgB,IAAAqf,EAAAhhB,KACvCA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMmtD,cAAc,SAACC,GACtCzhE,EAAKq5D,sBAAwB,SAACqI,EAAiBC,GAC3CF,EAAgBC,EAASC,GACzB3hE,EAAKk5D,kBAAiB,GACtBl5D,EAAKq5D,sBAAwB,MAEjCr5D,EAAKk5D,kBAAiB,uDAIW,IAAA54D,EAAAthB,KACrCA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMutD,YAAY,SAAChjB,EAA0BijB,GAC9DvhE,EAAKg5D,kBAAoB,SAACwI,GACtBD,EAAiBC,GACjBxhE,EAAK64D,iBAAgB,GACrB74D,EAAKg5D,kBAAoB,MAE7Bh5D,EAAK64D,iBAAgB,EAAMva,sDAIK,IAAAkQ,EAAA9vE,KACpCA,KAAKs7B,SAAS0tB,OAAO3zB,MAAM0tD,WAAW,SAACnjB,EAA0BojB,GAC7DlT,EAAKyK,iBAAmB,SAAC0I,GACrBD,EAAgBC,GAChBnT,EAAKsK,gBAAe,GACpBtK,EAAKyK,iBAAmB,MAE5BzK,EAAKsK,gBAAe,EAAMxa,0DAIU,IAAAsjB,EAAAljF,KACxCA,KAAKs7B,SAAS0tB,OAAO3zB,MAAM8tD,eAAe,SAAChxD,EAAsBswD,GAC7DS,EAAK7I,sBAAwB,SAACqI,EAASC,GACnCF,EAAgBC,EAASC,GACzBO,EAAKhJ,kBAAiB,GACtBgJ,EAAK7I,sBAAwB,MAEjC6I,EAAKhJ,kBAAiB,EAAM/nD,sEAIoB,IAAAixD,EAAApjF,KACpDA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMguD,2BAA2B,SAClDjjD,EACAkjD,EACAC,GAEA,IAAInjD,EAGA,OAFAgjD,EAAK1I,wBAAqBl7E,OAC1B4jF,EAAKzhF,MAAM6hF,4BAA4BJ,EAAKzhF,MAAMygB,MAAM7iB,SAAKC,GAIjE,GAAG4gC,EAAKqjD,SAAU,CACd,IACIC,EADAC,EAAY,OAoBhB,OAjBGvjD,EAAKnB,QAAUmB,EAAKjB,SACnBwkD,EAAYvlD,eAAeC,aAAa+B,EAAKnB,QAAU,OAASb,eAAeC,aAAa+B,EAAKjB,QACjGukD,EAAW,CACPzkD,OAAQmB,EAAKnB,OAAOhD,QACpBkD,OAAQiB,EAAKjB,OAAOlD,eAI5BmnD,EAAKzhF,MAAM6hF,4BAA4BJ,EAAKzhF,MAAMygB,MAAM7iB,IAAK,CACzD3E,GAAIwlC,EAAKnE,QACTn5B,KAAM4b,GAASsgB,KACf9G,MAAOyrD,EACPt7E,SAAU+1B,eAAeZ,YAAY4C,GACrCsjD,WACAJ,iBACAC,0BAKLnjD,EAAKtB,YACJskD,EAAKzhF,MAAM6hF,4BAA4BJ,EAAKzhF,MAAMygB,MAAM7iB,IAAK,CACzD3E,GAAIwlC,EAAKnE,QACTn5B,KAAMs7B,eAAeG,gBAAgB6B,GACrClI,MAAOkG,eAAeC,aAAa+B,GACnC/3B,SAAU+1B,eAAeZ,YAAY4C,GACrCkjD,iBACAC,0BAIRH,EAAK1I,mBAAqBt6C,6DAIc,IAAAwjD,EAAA5jF,KAC5CA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMqP,YAAYC,QAAQk/C,cAAe,SAACC,EAAaloB,GACxE,IAAMx7B,EAAOw7B,EAAImoB,YAAY,QAC1B3jD,EAAKtB,YAAc8kD,EAAKlJ,oBAAsBkJ,EAAKlJ,mBAAmBz+C,UAAYmE,EAAKnE,SACtF2nD,EAAKjiF,MAAMqiF,iCAAiCJ,EAAKjiF,MAAMygB,MAAM7iB,IAAK6gC,EAAKnE,QAASmC,eAAeC,aAAa+B,qEAKxE86C,GAC5C,GAAGA,aAAkB+I,cAAe,CAChC,IAAM7jD,EAAO86C,EAAO96C,KACjBA,GAAQA,EAAKtB,YAAc9+B,KAAK06E,oBAAsB16E,KAAK06E,mBAAmBz+C,UAAYmE,EAAKnE,UAC9Fj8B,KAAK2B,MAAMqiF,iCAAiChkF,KAAK2B,MAAMygB,MAAM7iB,IAAK6gC,EAAKnE,QAASmC,eAAeC,aAAa+B,IAC5GpgC,KAAK2B,MAAMuiF,oCAAoClkF,KAAK2B,MAAMygB,MAAM7iB,IAAK6gC,EAAKnE,QAASmC,eAAeZ,YAAY4C,0DAKrFz+B,GACjC3B,KAAKs7B,SAAS0tB,OAAO3zB,MAAM8uD,gBAAgB,SAACC,EAAsBC,GAC3DA,IACCD,EAAY,QAAAv/E,OAAWw/E,EAAYryC,cAAvB,KAAAntC,OAAwCu/E,IAExDziF,EAAMuzB,mBAAmBvzB,EAAMygB,MAAM7iB,IAAK6kF,GAAc,uDAI7BziF,GAAgC,IAAA2iF,EAAAtkF,KACzDukF,EAA8BC,kBAAkBpF,UAAUqF,kBAE1DC,EAAgB,IAAIF,kBAAkBxkF,KAAKs7B,SAAS0tB,OAAO3zB,OAEjEqvD,EAAcC,cAAgB,EAC9BD,EAAcE,iBAAmB,EACjCF,EAAcG,kBAAoB,EAClCH,EAAcD,kBAAoB,SAAC1J,GAC/B,IAAM9/C,EAAe,GAGCqpD,EAAKQ,YAAY/J,GAEzBx4E,QAAQ,SAAC24E,GAAD,OAAiBjgD,EAAMx4B,KAAKm/B,QAAQ2C,OAAO+/C,EAAKzK,MAAMv2C,OAAO43C,OAEnFoJ,EAAKlvD,eAAU51B,GAAW,GARsB,IAAAulF,EAUVT,EAAKU,mCAAmCjK,GAAvEt7E,EAVyCslF,EAUzCtlF,OAAQqD,EAViCiiF,EAUjCjiF,KAAMo1B,EAV2B6sD,EAU3B7sD,MAAOvzB,EAVoBogF,EAUpBpgF,OAEtBoxB,EAAesnD,EAAU5mD,kBAC3B90B,EAAMygB,MAAM7iB,IACZuR,gBAAKmqB,GACLqpD,EAAKliE,MAAO6N,QAAQA,QACpBtuB,EAAMoE,KAAKxG,IACXE,EACAqD,EACAo1B,EACAvzB,GAGJhD,EAAMsjF,oBAAoBlvD,GAE1BuuD,EAAKxJ,oBAAoB/kD,EAAcglD,GAASt9E,MAAM,SAAA6O,GAAG,OAAI9Q,QAAQF,MAAMgR,KAE3Ei4E,EAA4BnkF,KAAKskF,EAAe3J,wCAInCp5E,GACdA,EAAMsvC,SACLjxC,KAAKs7B,SAAS0tB,OAAO3zB,MAAM6vD,iBAE3BllF,KAAKs7B,SAAS0tB,OAAO3zB,MAAM8vD,6EAIc,IAAAC,EAAAplF,KAC7CA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMgwD,eAAe,SAACC,GACvCF,EAAKzjF,MAAMoyB,qBAAqBqxD,EAAKzjF,MAAMygB,MAAM7iB,KAAK,EAAM+lF,2DAIxB,IAAAC,EAAAvlF,KACxCA,KAAKs7B,SAAS0tB,OAAO3zB,MAAMqP,YAAYC,QAAQ6gD,eAAgB,SAAC1B,EAAaloB,IACvDA,EAAImoB,YAAY,WAE9Bj/E,OAAOs8B,WAAW,WACdmkD,EAAKjqD,SAAS0tB,OAAO3zB,MAAMowD,iBAAiB7pB,EAAImoB,YAAY,cAC7D,iDAKapiF,GAAmC,IAAA+jF,EAAA1lF,KAC3D,IAAIA,KAAK85E,YACL,OAAO,EAGX,IAAI6L,GAAe,EAEnB,GAAGhkF,EAAMygB,MAAMiX,KAAO13B,EAAMoD,SAAST,OAAQ,CACzC,IAAM4rC,EAAS,IAAIksC,gBAAgBz6E,EAAMoD,SAAST,QAE5C+wB,EAAQr1B,KAAKs7B,SAAS0tB,OAAO3zB,MAC7BuwD,EAAe11C,EAAOv5B,IAAI,SAEhC,GAAGivE,EAAc,CACb,GAAG5lF,KAAKg6E,mBAAqB4L,GAAgB5lF,KAAKi6E,aAAe/pC,EAAOv5B,IAAI,UAExE,OAAQ,EAGZ,IAAMkvE,EAAoC,OAApB7lF,KAAKi6E,WAE3Bj6E,KAAKg6E,iBAAmB4L,EACxB5lF,KAAKi6E,WAAa/pC,EAAOv5B,IAAI,UAE7B,IAAMmvE,EAAUF,EAAa9J,MAAM,KAC7BiK,EAAe,GAErBD,EAAQvjF,QAAQ,SAAAoC,GACZ,IAAMy7B,EAAO/K,EAAMkL,MAAMF,QAAQ17B,GAC9By7B,GACC2lD,EAAMtjF,KAAK29B,KAIhB2lD,EAAM/kF,OAAS,IACdq0B,EAAMkM,oBAAoBwkD,GAAO,GAAM,EAAMF,GAC7CF,GAAe,EAG8B,IAA1C9nB,SAAS3tB,EAAOv5B,IAAI,WAAa,MAChC0e,EAAM2wD,kBAAkBD,KAaxC,OAPAjhF,OAAOs8B,WAAW,YACVskD,EAAK/K,cAAe+K,EAAK9K,cAAkB8K,EAAKhkF,MAAMq6E,kBACtDvgF,QAAQC,IAAI,wCACZiqF,EAAKr6B,SAAS,CAAC0wB,iBAAiB,MAErC,KAEI4J,mDAG6B,IAAAM,EAAAjmF,KACjCA,KAAK+5E,SACJ/5E,KAAK+5E,QAAQziB,eAAbx3D,OAAA8f,GAAA,EAAA9f,CAAA6P,GAAAhN,EAAAyW,KAA4B,SAAA++C,IAAA,IAAA9iC,EAAA0wD,EAAA7tB,EAAAt6B,EAAAm7B,EAAAC,EAAAC,EAAAC,EAAAC,EAAA+sB,EAAA9lD,EAAA,OAAAzwB,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,WACrB+5E,EAAKlM,QADgB,CAAAppE,EAAAzE,KAAA,YAEdmpB,EAAQ4wD,EAAK3qD,SAAS0tB,OAAO3zB,MAC7B0wD,EAAQ1wD,EAAM8wD,oCAChBjuB,EAAgB,GACdt6B,EAAkBxU,GAAmC68D,EAAKtkF,MAAMygB,MAAO7iB,MAE1EwmF,IAASl7E,MAAMoC,QAAQ84E,GAPN,CAAAp1E,EAAAzE,KAAA,SAAA6sD,GAAA,EAAAC,GAAA,EAAAC,OAAAz5D,EAAAmR,EAAAb,KAAA,EAAAopD,EAQE6sB,EARF/5E,OAAAC,YAAA,WAAA8sD,GAAAI,EAAAD,EAAAhtD,QAAAC,KAAA,CAAAwE,EAAAzE,KAAA,YAQNk0B,EARM+4B,EAAA34D,OASZ0lF,EAAAhuB,GAAMz1D,KAAN4I,MAAA66E,EAAApmF,OAAAyZ,GAAA,EAAAzZ,CAAck7B,GAAoB,CAAC,IAAIyC,GAAe2C,EAAM/K,EAAM0K,YAAY,EAAOnC,SAClFs6B,EAAMl3D,QAAU,IAVP,CAAA2P,EAAAzE,KAAA,gBAAAyE,EAAAzE,KAAA,GAWkB+5E,EAAKlM,QAASviB,UAAUyuB,EAAKtkF,MAAMygB,MAAM7iB,IAAK24D,GAXhE,WAAAvnD,EAAAX,KAAA,CAAAW,EAAAzE,KAAA,gBAAAyE,EAAAU,OAAA,kBAgBR6mD,EAAQ,GAhBA,QAAAa,GAAA,EAAApoD,EAAAzE,KAAA,iBAAAyE,EAAAzE,KAAA,iBAAAyE,EAAAb,KAAA,GAAAa,EAAAI,GAAAJ,EAAA,SAAAqoD,GAAA,EAAAC,EAAAtoD,EAAAI,GAAA,QAAAJ,EAAAb,KAAA,GAAAa,EAAAb,KAAA,GAAAipD,GAAA,MAAAG,EAAA3sD,QAAA2sD,EAAA3sD,SAAA,WAAAoE,EAAAb,KAAA,IAAAkpD,EAAA,CAAAroD,EAAAzE,KAAA,eAAA+sD,EAAA,eAAAtoD,EAAAK,OAAA,mBAAAL,EAAAK,OAAA,iBAoBbknD,EAAMl3D,OAAS,GApBF,CAAA2P,EAAAzE,KAAA,gBAAAyE,EAAAzE,KAAA,GAqBuB+5E,EAAKlM,QAASviB,UAAUyuB,EAAKtkF,MAAMygB,MAAM7iB,IAAK24D,GArBrE,WAAAvnD,EAAAX,KAAA,CAAAW,EAAAzE,KAAA,gBAAAyE,EAAAU,OAAA,UAuBD,GAvBC,QA4BpB40E,EAAKlM,QAAQvgB,eA5BO,yBAAA7oD,EAAAV,SAAAkoD,EAAAn4D,KAAA,6EAkCA,IAAAomF,EAAApmF,KAC1Bq1B,EAAQr1B,KAAKs7B,SAAS0tB,OAAO3zB,MACnCA,EAAMgxD,cAAc,SAACN,GAKjB,GAJGK,EAAKzkF,MAAMygB,QAAUgkE,EAAKzkF,MAAMygB,MAAM0X,uBACrCssD,EAAKzkF,MAAMsyB,kBAAkBmyD,EAAKzkF,MAAMygB,MAAM7iB,KAAK,GAGpD6mF,EAAKrM,QAAS,CACb,IAAM9+C,EAAQ8qD,EAAMr3E,IAAI,SAAA0xB,GAAI,OAAI,IAAI3C,GAAe2C,EAAM/K,EAAM0K,YAAY,EAAO3W,GAAmCg9D,EAAKzkF,MAAMygB,MAAO7iB,QACvI6mF,EAAKrM,QAAQ1lC,QAAQsiB,KAAKyvB,EAAKzkF,MAAMygB,MAAM7iB,IAAKy7B,GAAoBC,GAAO34B,OAAO,SAAA64B,GAAI,OAAIA,EAAKS,YAAcld,GAASsgB,iDAK5Gr9B,GAA0B,IAAA2kF,EAAAtmF,KACxCumF,EAAgB,EACdlxD,EAAQr1B,KAAKs7B,SAAS0tB,OAAO3zB,MAC7BmxD,EAAUzpF,SAASqsD,eAAe,WAErCo9B,IACCD,EAAgBC,EAAQC,cAG5BzmF,KAAKo4E,UAAY,IAAIrd,GAAgBluB,GAAQ7sC,KAAK25E,SAAShuB,QAASt2B,EAAO,SAAC6mC,GACxE,IAAME,EAAQ/mC,EAAMoM,KAAK26B,MACnBsqB,EAAKrxD,EAAMoM,KAAK8B,UAKtB,MAAO,CAAC3gB,GAHGs5C,EAAMt5C,EAAI8jE,EAAG9jE,GAAKw5C,EAGnBv5C,GAFCq5C,EAAMr5C,EAAI6jE,EAAG7jE,GAAKu5C,EAAQmqB,KAKzCvmF,KAAKo4E,UAAUC,aAAa,SAAC7xE,EAAQK,EAAM87C,EAAQrO,GAAvB,OAAiCgyC,EAAKK,cAAchlF,EAAO6E,EAAQK,EAAM87C,EAAQrO,KAC7Gt0C,KAAKo4E,UAAUE,WAAW,SAAA9xE,GAAM,OAAI8/E,EAAKM,iBAAiBpgF,KAE1DxG,KAAKo4E,UAAUY,UAAU,CACrBxyE,OAAQ7E,EAAMoE,KAAKxG,IACnBsH,KAAMlF,EAAMoE,KAAKoB,YACjBw7C,OAAQhhD,EAAMoE,KAAKa,UACnBub,QAASxgB,EAAMygB,MAAM7iB,MAGzBS,KAAK+5E,QAAUlkB,GACf71D,KAAK6mF,yBAELxxD,EAAMqP,YAAYC,QAAQmiD,iBAAkB,SAAChD,EAAaloB,GACtD,IAAMmrB,EAAUnrB,EAAImoB,YAAY,aAC1BiD,EAAKprB,EAAImoB,YAAY,SAE3B,GAAIiD,EAAJ,CAIA,IAAM5qB,EAAQ/mC,EAAMoM,KAAK26B,MACnBsqB,EAAKrxD,EAAMoM,KAAK8B,UAChB3gB,EAAIokE,EAAGC,YAAc7qB,EAAQsqB,EAAG9jE,EAChCC,EAAImkE,EAAGE,YAAc9qB,EAAQsqB,EAAG7jE,EAEnCkkE,IAAYpiD,QAAQwiD,aAAcb,EAAKlO,WAAc/iD,EAAM+xD,eAAeC,YAAehyD,EAAM+xD,eAAeE,eAC7GhB,EAAKlO,UAAUQ,kBAAqB,CAChCpyE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrB28D,MAAO,CAACt5C,IAAEC,KACVs5C,GAAIuqB,EACJtqB,QACAM,WAAW,OAKvBrnC,EAAMqP,YAAYrP,EAAMkyD,oBAAqB,SAACzD,EAAaloB,GACvD,GAAG0qB,EAAKlO,UAAW,CACf,IAAM4O,EAAKprB,EAAImoB,YAAY,MACrB3nB,EAAQR,EAAImoB,YAAY,SACxB2C,EAAK9qB,EAAImoB,YAAY,aACrBtmB,EAAa7B,EAAImoB,YAAY,cAEnC,IAAIiD,EACA,OAGJ,IAAMpkE,EAAIokE,EAAGC,YAAc7qB,EAAQsqB,EAAG9jE,EAChCC,EAAImkE,EAAGE,YAAc9qB,EAAQsqB,EAAG7jE,EAEtCyjE,EAAKlO,UAAUQ,kBAAkB,CAC7BpyE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrB28D,MAAO,CAACt5C,IAAEC,KACVs5C,GAAIuqB,EACJtqB,QACAM,WAAW,GACZe,MAIXpoC,EAAMqP,YAAYrP,EAAMmyD,4BAA6B,WAC9ClB,EAAKlO,WACJkO,EAAKlO,UAAUra,4CAKvB1oC,EAAMqP,YAAYrP,EAAMoyD,oBAAqB,SAAC3D,EAAaloB,GACvD0qB,EAAKlO,UAAWS,oBAAoB,CAChCryE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrB48D,GAAI9mC,EAAMoM,KAAK8B,UACf64B,MAAO/mC,EAAMoM,KAAK26B,UAI1B/mC,EAAMqP,YAAYrP,EAAMqyD,mBAAoB,SAAC5D,EAAaloB,GACtD,IAAM+rB,EAAW/rB,EAAImoB,YAAY,UACjCuC,EAAKlO,UAAWM,uBAAuB,CACnClyE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrBq7D,QAAS+sB,EAAU3tB,GAAQc,OAASd,GAAQsE,YAIpDjpC,EAAMqP,YAAYrP,EAAMuyD,mBAAoB,SAAC9D,EAAaloB,GACtD,IAAMisB,EAAWjsB,EAAImoB,YAAY,UACjCuC,EAAKlO,UAAWM,uBAAuB,CACnClyE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrBq7D,QAASitB,EAAU7tB,GAAQa,OAASb,GAAQsE,YAIpDjpC,EAAMqP,YAAYrP,EAAMyyD,2BAA4B,SAAChE,EAAaloB,GAC5D0qB,EAAKlO,WACJkO,EAAKlO,UAAUO,wBAAwB,CACnCnyE,OAAQ7E,EAAMoE,KAAKxG,IACnB4iB,QAASxgB,EAAMygB,MAAM7iB,IACrB68D,MAAOR,EAAImoB,YAAY,SACvBxgD,UAAWq4B,EAAImoB,YAAY,aAC3BrnB,UAAWd,EAAImoB,YAAY,iBAKtC/jF,KAAKy6E,iBAAiBz6E,KAAKo4E,iDAGTz2E,EAA0B6E,EAA0BK,EAA6B87C,EAA6BrO,GAAe,IAAAyzC,EAAA/nF,KAC/I,GAAGwG,IAAW7E,EAAMoE,KAAKxG,IAAzB,CAIA,IAAMyoF,EAAejrF,SAASqsD,eAAe,gBAEvCh9C,EAAOrP,SAAS6F,cAAc,OACpCwJ,EAAK4yD,UAAUt+C,IAAI,QAEnB,IAEMwX,EAAQn7B,SAAS6F,cAAc,OACrCs1B,EAAMt9B,GAAK,gBAAkB4L,EAC7B0xB,EAAM8mC,UAAUt+C,IAAI,KAAM,WAAY,QAJrB,aAIwC,QACzDwX,EAAMnT,MAAMm6C,gBAAkB5qB,EAE9Bpc,EAAMnT,MAAMkjE,eAAiB,QACf,KAAXtlC,EACCzqB,EAAMnT,MAAMmjE,gBAAkB,QAAQvlC,EAAO,KAE7CzqB,EAAM+mC,UAAYp4D,EAAK,GAAGshF,cAE9BjwD,EAAMsL,aAAa,eAAgB38B,GACnCqxB,EAAMsL,aAAa,gBAAiB,iBAEpCtL,EAAMr5B,iBAAiB,QAAS,SAAAxE,GAAC,OAAI0tF,EAAKK,kBAAkB/tF,EAAE8kC,UAE9D/yB,EAAK0d,OAAOoO,GACZ8vD,EAAcl+D,OAAO1d,6CAGA5F,GACrB,IAAM0xB,EAAQn7B,SAASqsD,eAAe,gBAAgB5iD,GAEnD0xB,GACCA,EAAMmwD,cAAexwE,mDAIHqgB,GACnBA,aAAiBowD,cACbpwD,EAAM8mC,UAAUzhD,SAAS,aACxB2a,EAAM8mC,UAAUnnD,OAAO,YACvB7X,KAAKo4E,UAAWa,sBAEhBj5E,KAAKuoF,2BACLvoF,KAAKo4E,UAAWa,oBAChB/gD,EAAM8mC,UAAUt+C,IAAI,YACpB1gB,KAAKo4E,UAAWna,YAAYj+D,KAAKwoF,qBAAqBtwD,EAAMt9B,0DAM/CmC,SAASqsD,eAAe,gBAE/Bq/B,WAAWlmF,QAAQ,SAAAq8B,GAC1BA,EAAM8pD,sBAAsBJ,aAC3B1pD,EAAM8pD,WAAW1pB,UAAUnnD,OAAO,2DAKjB8wE,GACzB,OAAOA,EAAQ1+E,QAAQ,gBAAiB,wCAgHxB8wE,GAChB,GAAGA,EAAQ/5E,QAAU,EACjB,OAAO+5E,EAGX,IAAM6N,EAAsB,GACtBC,EAAqB,GAsB3B,OApBA9N,EAAQx4E,QAAQ,SAAC24E,GACVA,aAAkB4N,iBAEO,IAArB5N,EAAO96C,KAAKpB,OAAmC,IAArBk8C,EAAO96C,KAAKpB,KACrC6pD,EAAYpmF,KAAKy4E,GAEjB0N,EAAanmF,KAAKy4E,GAEhBA,aAAkB6N,gBACC,IAAtB7N,EAAOt8C,MAAMI,OAAoC,IAAtBk8C,EAAOt8C,MAAMI,MACvC6pD,EAAYpmF,KAAKy4E,GAKrB0N,EAAanmF,KAAKy4E,KAI1B0N,EAAanmF,KAAb4I,MAAAu9E,EAAqBC,GACdD,6DAGgC7N,GAIvC,GAAsB,KAHtBA,EAAU/6E,KAAKgpF,uBAAuBjO,IAG3B/5E,QAAgB+5E,EAAQ,aAAc+N,kBAC1C/N,EAAQ,aAAc+N,kBAAoB/N,EAAQ,aAAcgO,cACnE,OAAOjpF,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAgC,OAAxBs7E,EAAQ,GAAGkO,SAAmBnuD,GAAcouD,MAAQpuD,GAAcquD,OACvEnpF,KAAKopF,wCAAwCrO,EAAQ,KAKhE,GAAsB,IAAnBA,EAAQ/5E,QAAgB+5E,EAAQ,aAAc+N,iBAC7C,OAAOhpF,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAQq7B,GAAcquD,OACnBnpF,KAAKopF,wCAAwCrO,EAAQ,KAKhE,GAAsB,IAAnBA,EAAQ/5E,QAAgB+5E,EAAQ,aAAcgO,eAAuC,OAAtBhO,EAAQ,GAAGp+C,OACzE,OAAO78B,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAQq7B,GAAc0iB,SACnBx9C,KAAKopF,wCAAwCrO,EAAQ,KAKhE,GAAsB,IAAnBA,EAAQ/5E,QAAgB+5E,EAAQ,aAAckJ,cAC7C,OAAOnkF,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAQq7B,GAAcwK,QACnBtlC,KAAKopF,wCAAwCrO,EAAQ,KAKhE,GAAsB,IAAnBA,EAAQ/5E,QAAgB+5E,EAAQ,aAAckJ,eAAiBlJ,EAAQ,aAAc+N,iBACpF,OAAOhpF,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAQq7B,GAAcwK,QACnBtlC,KAAKopF,wCAAwCrO,EAAQ,KAKhE,GAAIA,EAAQ/5E,QAAU,GAAM+5E,EAAQ,aAAcsO,kBAAoBtO,EAAQ,aAAcsO,iBACxF,OAAOvpF,OAAA2N,GAAA,EAAA3N,CAAA,CACHL,OAAQq7B,GAAcouD,OAEnBlpF,KAAKopF,wCAAwCrO,EAAQ,KAKhE,IAAIuO,GAAW,EACXxD,EAAoB,GAUxB,GARA/K,EAAQx4E,QAAQ,SAAA24E,GACPA,aAAkB4N,iBAGnBhD,EAAQrjF,KAAKy4E,EAAO96C,KAAKxlC,IAFzB0uF,GAAW,IAMhBA,EACC,MAAO,CACH7pF,OAAQq7B,GAAcquD,MACtBrmF,KAAM27B,GAAgBC,SACtBxG,MAAO,GACPvzB,OAAQmhF,EAAQv4B,KAAK,MAK7B,IAAIg8B,GAAa,EAWjB,GAVAzD,EAAU,GAEV/K,EAAQx4E,QAAQ,SAAA24E,GACPA,aAAkB6N,eAAmC,OAAlB7N,EAAOv+C,OAG3CmpD,EAAQrjF,KAAKy4E,EAAOt8C,MAAMhkC,IAF1B2uF,GAAa,IAMlBA,EACC,MAAO,CACH9pF,OAAQq7B,GAAc0iB,QACtB16C,KAAM27B,GAAgBC,SACtBxG,MAAO,GACPvzB,OAAQmhF,EAAQv4B,KAAK,MAK7B,IAAIi8B,GAAsB,EACtB7sD,EAAc,KAgBlB,GAdAo+C,EAAQx4E,QAAQ,SAAC24E,EAAQzY,GAClBA,EAAI,IAAM,MACJyY,aAAkB6N,eAAiBhO,EAAQtY,EAAE,aAAcqmB,mBAC5C,OAAXnsD,GAAmBA,IAAWu+C,EAAOv+C,QAAiC,IAAtBu+C,EAAOt8C,MAAMI,OAC9DZ,eAAeuC,YAAYu6C,EAAOv+C,SAAiC,IAAtBu+C,EAAOt8C,MAAMI,KAC9DwqD,GAAsB,EAEG,IAAtBtO,EAAOt8C,MAAMI,OACZrC,EAASu+C,EAAOv+C,WAM7BA,GAAU6sD,EACT,MAAO,CACH/pF,OAAQq7B,GAAcwK,OACtBxiC,KAAMs7B,eAAeG,gBAAgB5B,IAAW8B,GAAgBD,KAChEtG,MAAOkG,eAAeC,aAAa1B,GACnCh4B,OAAQg4B,EAAO/hC,IAKvB,GAAGmgF,EAAQA,EAAQ/5E,OAAQ,aAAc+nF,eAAwD,OAAvChO,EAAQA,EAAQ/5E,OAAS,GAAG27B,OAAiB,CACnG,IAAM8sD,EAAmB1O,EAAQA,EAAQ/5E,OAAQ,GAAG49B,MACpD,MAAO,CACHn/B,OAAQq7B,GAAc0iB,QACtB16C,KAAMs7B,eAAeG,gBAAgBkrD,IAAqBhrD,GAAgBD,KAC1EtG,MAAOkG,eAAeC,aAAaorD,GACnC9kF,OAAQ8kF,EAAiB7uF,IAKjC,IAAI8uF,GAAyB,EAa7B,OAZA5D,EAAU,GAEV/K,EAAQx4E,QAAQ,SAAC24E,EAAQzY,GAChByY,aAAkB4N,kBAAoB5N,aAAkB6N,cAGtD7N,aAAkB4N,kBACjBhD,EAAQrjF,KAAKy4E,EAAO96C,KAAKxlC,IAH7B8uF,GAAyB,IAQ9BA,EACQ,CACHjqF,OAAQq7B,GAAcquD,MACtBrmF,KAAM27B,GAAgBC,SACtBxG,MAAO,GACPvzB,OAAQmhF,EAAQv4B,KAAK,MAKtB,CACH9tD,OAAQq7B,GAAcwK,OACtBxiC,KAAM27B,GAAgBD,KACtBtG,MAAO,oEAIiCgjD,GAC5C,IAEIv2E,EAFA7B,GAAkC,EAClCo1B,EAAgB,GAiBpB,OAdGgjD,EAAO96C,MACNt9B,EAAOs7B,eAAeG,gBAAgB28C,EAAO96C,MAC7ClI,EAAQkG,eAAeC,aAAa68C,EAAO96C,MAC3Cz7B,EAASu2E,EAAO96C,KAAKxlC,IACfsgF,EAAOt8C,QACb97B,EAAOs7B,eAAeG,gBAAgB28C,EAAOt8C,OAC7C1G,EAAQkG,eAAeC,aAAa68C,EAAOt8C,OAC3Cj6B,EAASu2E,EAAOt8C,MAAMhkC,IAGtBkI,IACAA,EAAO27B,GAAgBD,MAGpB,CACH17B,OACAo1B,QACAvzB,yDAIuBo2E,GAC3B,OAAOA,EAAQz4E,OAAO,SAAA44E,GAAM,QAAMA,aAAkByO,wBAtwCjCzZ,cEnGrBpuE,GAAkB+wC,GAAclC,kCA8BvBi5C,GAFexmF,mBAAQtB,GA1BX,SAACuB,GAAD,OAAwBC,8BAC/C,CACI0tB,eAAgBjhB,EAAaihB,eAC7B+tD,QAAS8K,EAAarmF,QAAQlI,MAC9BgmF,OAAQuI,EAAarmF,QAAQ3C,KAC7Bu0B,UAAWrlB,EAAeqlB,UAC1BQ,UAAW7lB,EAAe6lB,UAC1BooD,cAAejuE,EAAe8lB,yBAC9BrB,kBAAmBzkB,EAAeykB,kBAClCywD,oBAAqBl1E,EAAa0mB,kBAClC8mD,oBAAqBxtE,EAAeimB,0BACpC4nD,qBAAsB7tE,EAAa6mB,mBACnC+mD,gBAAiB5tE,EAAa8mB,cAC9BgnD,gBAAiB9tE,EAAa+mB,cAC9BwrD,mBAAoBvyE,EAAagnB,iBACjC+nD,oCAAqC/uE,EAAaknB,kCAClD/B,mBAAoBnlB,EAAemlB,mBACnCsuD,4BAA6BzzE,EAAa+nB,0BAC1CksD,iCAAkCj0E,EAAaioB,+BAC/CksD,oCAAqCn0E,EAAaooB,kCAClDpE,qBAAsBhkB,EAAegkB,qBACrCE,kBAAmBlkB,EAAekkB,mBAEtC5wB,SAGuE7D,EAAW,CAACsqF,MAAM,GAA/D1mF,CAAuEq2E,iBC1B3FsQ,iBAmBOj5D,IAnBjB,SAAUi5D,GAAsCrxE,GAAhD,IAAA+e,EAAA7zB,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACkD,OADlD2D,EAAA3D,KAAA,EACwD0M,aAAOipC,GAAmCnpC,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ2zB,SAD3I,YACQ0G,EADR5nB,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAMkC,OAF1BurB,EAAkBA,EAAgBuyD,kBAAkBtxE,EAAQtb,QAAQ+yB,aAJ5EtgB,EAAA3D,KAAA,EAMwC9L,aAAK2P,EAAO4I,IAAImY,gCAAiCpY,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ2zB,OAAQrY,EAAQtb,QAAQ+yB,aAN1J,UAAAvsB,EAAAiM,EAAAG,KAMexS,EANfoG,EAMepG,UANfoG,EAMyBtI,MANzB,CAAAuU,EAAA3D,KAAA,SASY,OATZ2D,EAAA3D,KAAA,GASkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCATlE,YAYWkC,EAZX,CAAAqS,EAAA3D,KAAA,SAaY,OAbZ2D,EAAA3D,KAAA,GAakB0E,aAAIb,EAAOtM,MAAM+zB,4BAA4BC,IAb/D,QAcY,OAdZ5nB,EAAA3D,KAAA,GAckB0E,aAAIC,EAAarN,QAAQ3C,KAAK,sBAAuB,2CAdvE,yBAAAgP,EAAAI,SAAAg6E,GAAAjqF,MAmBO,SAAU8wB,KAAV,IAAApY,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKgS,sCAHjB,OAMC,OAJMtS,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK24E,GAAuCrxE,GANnD,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAi6E,GAAAlqF,uBCMUmqF,IA1BXC,GAAwBz6E,GAAAhN,EAAAyW,KAAG,SAA3BgxE,EAAsC3qF,GAAX,IAAAmE,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACW,OADX2D,EAAA3D,KAAA,EACiB9L,aAC1C2P,EAAW8gB,uBACXpxB,EAAOrC,QAAQ+kB,QACf1iB,EAAOrC,QAAQoJ,OACf/G,EAAOrC,QAAQ+yB,aALU,UAAAvsB,EAAAiM,EAAAG,KACtBxS,EADsBoG,EACtBpG,UADsBoG,EACZtI,MADY,CAAAuU,EAAA3D,KAAA,QASzB,OATyB2D,EAAA3D,KAAA,EASnB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,2CAT7B,WAY1BkC,EAZ0B,CAAAqS,EAAA3D,KAAA,SAazB,OAbyB2D,EAAA3D,KAAA,GAanB0E,aAAIC,EAAarN,QAAQ3C,KAC3B,sBACA,iDAfqB,QAkBzB,OAlByBgP,EAAA3D,KAAA,GAkBnB0E,aAAIb,EAAawnB,wBACnB93B,EAAOrC,QAAQ+kB,QACf1iB,EAAOrC,QAAQoJ,OACf/G,EAAOrC,QAAQ+yB,cArBM,yBAAAtgB,EAAAI,SAA3Bm6E,EAA2BpqF,QA0B1B,SAAUmqF,KAAV,IAAA1qF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAK,CAClCpB,EAAYgb,2BAJjB,OAOC,OAJMtrB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAOOkF,aAAKg5E,GAA0B3qF,GAPtC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAo6E,GAAArqF,MC/BP,IAMMsqF,GAAW,SAACnmF,GACd,MANc,wBAMG8F,QAAQ,MAAO9F,IAG9BomF,GAAgB,WAClB,IAAMC,EAAaC,aAAaC,QAXjB,sBAaf,OAAkB,OAAfF,EACQ15E,kBAGJjP,kBAAOgH,KAAK2gD,MAAMghC,KAyDhBG,GAAuB,SAACxoE,EAAiByoE,GAClD,IACI,IAAIC,EAAYN,KAEbM,EAAUroF,SAAS2f,KAClB0oE,EAAYA,EAAUnjF,OAAOmjF,EAAUt1B,QAAQpzC,IAE/CsoE,aAAaK,QAjFN,qBAiF0BjiF,KAAKC,UAAU+hF,EAAUz5D,WAC1Dq5D,aAAaM,WAAWT,GAASnoE,KAEvC,MAAO7V,GACLs+E,EAAMt+E,kBC/EJ2V,iBAsBO+oE,IAtBjB,SAAU/oE,GAAYxiB,GAAtB,IAAAwrF,EAAAC,EAAAtnF,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,UACQ++E,EAAa,KAEjBN,GAAqBlrF,EAAOrC,QAAQ+kB,QAAS,SAAC7V,GAC1C2+E,EAAa3+E,KAGb2+E,EAPR,CAAAp7E,EAAA3D,KAAA,QASQ,OADMg/E,EAAoBtmC,EAAOphD,QAAQlI,MAAM,0CAA2C2vF,GARlGp7E,EAAA3D,KAAA,EASc0E,aAAIs6E,GATlB,OAY4C,OAZ5Cr7E,EAAA3D,KAAA,EAYkD9L,aAAK2P,EAAWkS,YAAaxiB,EAAOrC,QAAQ+kB,SAZ9F,UAAAve,EAAAiM,EAAAG,KAYWxS,EAZXoG,EAYWpG,UAZXoG,EAYqBtI,MAZrB,CAAAuU,EAAA3D,KAAA,SAeQ,OAfR2D,EAAA3D,KAAA,GAec0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,4BAf9D,YAiBQkC,EAjBR,CAAAqS,EAAA3D,KAAA,SAkBQ,OAlBR2D,EAAA3D,KAAA,GAkBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kBAlB7D,yBAAAgP,EAAAI,SAAAk7E,GAAAnrF,MAsBO,SAAUgrF,KAAV,IAAAvrF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY2a,eAHjB,OAMC,OAJMjrB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK6Q,GAAaxiB,GANzB,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAm7E,GAAAprF,uBCkEUqrF,IAtFXC,GAAkB37E,GAAAhN,EAAAyW,KAAG,SAArBkyE,EAAgC7rF,GAAX,IAAAmE,EAAApG,EAAAlC,EAAA+Q,EAAA,OAAAsD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACiB,OADjB2D,EAAA3D,KAAA,EACuB9L,aAAK2P,EAAW0iB,iBAAkBhzB,EAAOrC,QAAQ+kB,SADxE,UAAAve,EAAAiM,EAAAG,KAChBxS,EADgBoG,EAChBpG,WAAUlC,EADMsI,EACNtI,OADM,CAAAuU,EAAA3D,KAAA,YAIE,MAAjB5Q,EAAMka,OAJS,CAAA3F,EAAA3D,KAAA,SAKf,OALe2D,EAAA3D,KAAA,EAKT0E,aAAIb,EAAawoB,yBAAyB94B,EAAOrC,QAAQ+kB,UALhD,OAAAtS,EAAA3D,KAAA,iBAOf,OAPe2D,EAAA3D,KAAA,GAOT0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,gCAPvC,YAWnBkC,EAXmB,CAAAqS,EAAA3D,KAAA,aAiBf9B,GALEiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC4B,GAAO,YAAa,kDAdnB,CAAA+C,EAAA3D,KAAA,SAkBf,OAlBe2D,EAAA3D,KAAA,GAkBT0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,gCAlBvC,YAqBfiP,GAAU8B,GArBK,CAAAwD,EAAA3D,KAAA,SAsBf,OAtBe2D,EAAA3D,KAAA,GAsBT0E,aAAIb,EAAasoB,mBAAmB54B,EAAOrC,QAAQ+kB,QAAS9V,EAAO7L,QAtB1D,yBAAAqP,EAAAI,SAArBq7E,EAAqBtrF,QA2BrBurF,GAAwB57E,GAAAhN,EAAAyW,KAAG,SAA3BmyE,EAAsC9rF,GAAX,IAAAqE,EAAAtG,EAAA6O,EAAA,OAAAsD,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACW,OADXyE,EAAAzE,KAAA,EACiB9L,aAAK2P,EAAW2iB,uBAAwBjzB,EAAOrC,QAAQ+kB,SADxE,UAAAre,EAAA6M,EAAAX,KACtBxS,EADsBsG,EACtBtG,UADsBsG,EACZxI,MADY,CAAAqV,EAAAzE,KAAA,QAIzB,OAJyByE,EAAAzE,KAAA,EAInB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCAJ7B,WAOzBkC,EAPyB,CAAAmT,EAAAzE,KAAA,aAarB9B,GALEiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC4B,GAAO,gBAAiB,sDAVjB,CAAA6D,EAAAzE,KAAA,SAcrB,OAdqByE,EAAAzE,KAAA,GAcf0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCAdjC,YAiBrBiP,GAAU8B,GAjBW,CAAAsE,EAAAzE,KAAA,SAkBrB,OAlBqByE,EAAAzE,KAAA,GAkBf0E,aAAIb,EAAayoB,yBAAyB/4B,EAAOrC,QAAQ+kB,QAAU9V,EAAO7L,MAAci4B,eAlBzE,yBAAA9nB,EAAAV,SAA3Bs7E,EAA2BvrF,QAuB3BwrF,GAAmB77E,GAAAhN,EAAAyW,KAAG,SAAtBoyE,EAAiC/rF,GAAX,IAAAuL,EAAAxN,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OACgB,OADhBgF,EAAAhF,KAAA,EACsB9L,aAAK2P,EAAW4iB,kBAAmBlzB,EAAOrC,QAAQ+kB,SADxE,UAAAnX,EAAAkG,EAAAlB,KACjBxS,EADiBwN,EACjBxN,UADiBwN,EACP1P,MADO,CAAA4V,EAAAhF,KAAA,QAIpB,OAJoBgF,EAAAhF,KAAA,EAId0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,kCAJlC,WAOpBkC,EAPoB,CAAA0T,EAAAhF,KAAA,SAQpB,OARoBgF,EAAAhF,KAAA,GAQd9L,aAAKkrF,GAAoB7rF,GARX,yBAAAyR,EAAAjB,SAAtBu7E,EAAsBxrF,QAYtByrF,GAAmB97E,GAAAhN,EAAAyW,KAAG,SAAtBqyE,EAAiChsF,GAAX,IAAAohB,EAAArjB,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,OACgB,OADhBiS,EAAAjS,KAAA,EACsB9L,aAAK2P,EAAW6iB,kBAAmBnzB,EAAOrC,QAAQ+kB,SADxE,UAAAtB,EAAA1C,EAAAnO,KACjBxS,EADiBqjB,EACjBrjB,UADiBqjB,EACPvlB,MADO,CAAA6iB,EAAAjS,KAAA,QAIpB,OAJoBiS,EAAAjS,KAAA,EAId0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,kCAJlC,WAOpBkC,EAPoB,CAAA2gB,EAAAjS,KAAA,SAQpB,OARoBiS,EAAAjS,KAAA,GAQd0E,aAAIb,EAAawoB,yBAAyB94B,EAAOrC,QAAQ+kB,UAR3C,yBAAAhE,EAAAlO,SAAtBw7E,EAAsBzrF,QAYtB0rF,GAAwB/7E,GAAAhN,EAAAyW,KAAG,SAA3BsyE,EAAsCjsF,GAAX,IAAA0hB,EAAA3jB,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAA4Q,GAAA,cAAAA,EAAA1Q,KAAA0Q,EAAAtU,MAAA,OACW,OADXsU,EAAAtU,KAAA,EACiB9L,aAAK2P,EAAW8iB,uBAAwBpzB,EAAOrC,QAAQ+kB,SADxE,UAAAhB,EAAAX,EAAAxQ,KACtBxS,EADsB2jB,EACtB3jB,UADsB2jB,EACZ7lB,MADY,CAAAklB,EAAAtU,KAAA,QAIzB,OAJyBsU,EAAAtU,KAAA,EAInB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wCAJ7B,WAOzBkC,EAPyB,CAAAgjB,EAAAtU,KAAA,SAQzB,OARyBsU,EAAAtU,KAAA,GAQnB9L,aAAKmrF,GAA0B9rF,GARZ,yBAAA+gB,EAAAvQ,SAA3By7E,EAA2B1rF,QAY1B,SAAUqrF,KAAV,IAAA5rF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAu+B,GAAA,cAAAA,EAAAr+B,KAAAq+B,EAAAjiC,MAAA,OAG4B,OAH5BiiC,EAAAjiC,KAAA,EAGkCiF,aAAK,CAClCpB,EAAY0f,mBACZ1f,EAAY2f,0BACZ3f,EAAYic,oBACZjc,EAAYkc,oBACZlc,EAAYmc,4BARjB,WAGOzsB,EAHP0uC,EAAAn+B,MAWYlN,OAASiN,EAAY0f,mBAXjC,CAAA0e,EAAAjiC,KAAA,QAYK,OAZLiiC,EAAAjiC,KAAA,EAYWkF,aAAKk6E,GAAoB7rF,GAZpC,OAAA0uC,EAAAjiC,KAAA,mBAaWzM,EAAOqD,OAASiN,EAAY2f,0BAbvC,CAAAye,EAAAjiC,KAAA,SAcK,OAdLiiC,EAAAjiC,KAAA,GAcWkF,aAAKm6E,GAA0B9rF,GAd1C,QAAA0uC,EAAAjiC,KAAA,oBAeWzM,EAAOqD,OAASiN,EAAYic,oBAfvC,CAAAmiB,EAAAjiC,KAAA,SAgBK,OAhBLiiC,EAAAjiC,KAAA,GAgBWkF,aAAKo6E,GAAqB/rF,GAhBrC,QAAA0uC,EAAAjiC,KAAA,oBAiBWzM,EAAOqD,OAASiN,EAAYkc,oBAjBvC,CAAAkiB,EAAAjiC,KAAA,SAkBK,OAlBLiiC,EAAAjiC,KAAA,GAkBWkF,aAAKq6E,GAAqBhsF,GAlBrC,QAAA0uC,EAAAjiC,KAAA,oBAmBWzM,EAAOqD,OAASiN,EAAYmc,0BAnBvC,CAAAiiB,EAAAjiC,KAAA,SAoBK,OApBLiiC,EAAAjiC,KAAA,GAoBWkF,aAAKs6E,GAA0BjsF,GApB1C,QAAA0uC,EAAAjiC,KAAA,iCAAAiiC,EAAAl+B,SAAA07E,GAAA3rF,uBCtDU4rF,IA/BXC,GAAyBl8E,GAAAhN,EAAAyW,KAAG,SAA5ByyE,EAAuCpsF,GAAX,IAAAmE,EAAApG,EAAA6O,EAAAmzD,EAAA,OAAA7vD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACU,OADV2D,EAAA3D,KAAA,EACgB9L,aAC1C2P,EAAWyiB,wBACX/yB,EAAOrC,QAAQ+kB,QACf1iB,EAAOrC,QAAQ0F,MAJW,UAAAc,EAAAiM,EAAAG,KACvBxS,EADuBoG,EACvBpG,UADuBoG,EACbtI,MADa,CAAAuU,EAAA3D,KAAA,QAQ1B,OAR0B2D,EAAA3D,KAAA,EAQpB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wCAR5B,WAW1BkC,EAX0B,CAAAqS,EAAA3D,KAAA,aAoBtB9B,GAREiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,8BACzBzB,GAAY,SAAC3L,GACT,OAAO2mC,GAAsC3mC,OAhB3B,CAAAgQ,EAAA3D,KAAA,SAqBtB,OArBsB2D,EAAA3D,KAAA,GAqBhB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,wCArBhC,YAwBtBiP,GAAU8B,GAxBY,CAAAwD,EAAA3D,KAAA,SA0BtB,OADMszD,EAAqB1uD,gBAAKzE,EAAO7L,OAzBjBqP,EAAA3D,KAAA,GA0BhB0E,aAAIb,EAAaqoB,0BAA0B34B,EAAOrC,QAAQ+kB,QAASq9C,IA1BnD,yBAAA3vD,EAAAI,SAA5B47E,EAA4B7rF,QA+B3B,SAAU4rF,KAAV,IAAAnsF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAKpB,EAAYyf,4BAHnD,OAKC,OAFM/vB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAKOkF,aAAKy6E,GAA2BpsF,GALvC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA67E,GAAA9rF,uBCoCU+rF,IA5DXC,GAA+Br8E,GAAAhN,EAAAyW,KAAG,SAAlC4yE,EAA6C7pE,GAAX,IAAAve,EAAApG,EAAA6O,EAAAgkB,EAAA,OAAA1gB,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU9L,aAAK2P,EAAWwhB,8BAA+BpP,GADzD,UAAAve,EAAAiM,EAAAG,KAC7BxS,EAD6BoG,EAC7BpG,UAD6BoG,EACnBtI,MADmB,CAAAuU,EAAA3D,KAAA,QAIhC,OAJgC2D,EAAA3D,KAAA,EAI1B0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,qCAJtB,WAOhCkC,EAPgC,CAAAqS,EAAA3D,KAAA,aAiB5B9B,GAREiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GACT,OAAOsnC,GAA2CtnC,OAb1B,CAAAgQ,EAAA3D,KAAA,SAoB5B,OADA1Q,QAAQF,MAAM,2DAA4D+Q,EAAO7L,MAAOhD,EAASqC,MAnBrEgQ,EAAA3D,KAAA,GAoBtB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,qCApB1B,YAuB5BiP,GAAU8B,GAvBkB,CAAAwD,EAAA3D,KAAA,SAyB5B,OADMmkB,EAAmBvf,gBAAKzE,EAAO7L,OAxBTqP,EAAA3D,KAAA,GAyBtB0E,aAAIb,EAAa2nB,gCAAgCrH,IAzB3B,yBAAAxgB,EAAAI,SAAlC+7E,EAAkChsF,QA8BlCisF,GAA+Bt8E,GAAAhN,EAAAyW,KAAG,SAAlC6yE,EAA6C9pE,GAAX,IAAAre,EAAAtG,EAAA6O,EAAAgkB,EAAA,OAAA1gB,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACI,OADJyE,EAAAzE,KAAA,EACU9L,aAAK2P,EAAWyhB,8BAA+BrP,GADzD,UAAAre,EAAA6M,EAAAX,KAC7BxS,EAD6BsG,EAC7BtG,UAD6BsG,EACnBxI,MADmB,CAAAqV,EAAAzE,KAAA,QAIhC,OAJgCyE,EAAAzE,KAAA,EAI1B0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,qCAJtB,WAOhCkC,EAPgC,CAAAmT,EAAAzE,KAAA,aAiB5B9B,GAREiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GACT,OAAOonC,GAA2CpnC,OAb1B,CAAA8Q,EAAAzE,KAAA,SAoB5B,OADA1Q,QAAQF,MAAM,2DAA4D+Q,EAAO7L,MAAOhD,EAASqC,MAnBrE8Q,EAAAzE,KAAA,GAoBtB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,qCApB1B,YAuB5BiP,GAAU8B,GAvBkB,CAAAsE,EAAAzE,KAAA,SAyB5B,OADMmkB,EAAmBvf,gBAAKzE,EAAO7L,OAxBTmQ,EAAAzE,KAAA,GAyBtB0E,aAAIb,EAAa4nB,gCAAgCtH,IAzB3B,yBAAA1f,EAAAV,SAAlCg8E,EAAkCjsF,QA8BjC,SAAU+rF,KAAV,IAAAtsF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAG4B,OAH5BgF,EAAAhF,KAAA,EAGkCiF,aAAK,CAClCpB,EAAYsf,kCACZtf,EAAYuf,kCACZgzB,GAAWtpC,KAAKijC,6BAChBqG,GAAWtpC,KAAKkjC,+BAPrB,OAGOz8C,EAHPyR,EAAAlB,KAAAkB,EAAAH,GAUStR,EAAOqD,KAVhBoO,EAAAhF,KAAAgF,EAAAH,KAWUse,GAXV,EAAAne,EAAAH,KAcUue,GAdV,GAAApe,EAAAH,KAeUuxC,GAAWtpC,KAAKijC,6BAf1B,GAAA/qC,EAAAH,KAgBUuxC,GAAWtpC,KAAKkjC,6BAhB1B,mBAYS,OAZThrC,EAAAhF,KAAA,EAYekF,aAAK46E,GAAiCvsF,EAAOrC,QAAQ+kB,SAZpE,cAAAjR,EAAAG,OAAA,oBAiBS,OAjBTH,EAAAhF,KAAA,GAiBekF,aAAK66E,GAAiCxsF,EAAOrC,QAAQ+kB,SAjBpE,eAAAjR,EAAAG,OAAA,oBAAAH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAAi8E,GAAAlsF,uBCnEGmsF,iBA8BOr5D,IA9BjB,SAAUq5D,GAAgCvyE,GAA1C,IAAAhW,EAAApG,EAAA6O,EAAAiqB,EAAA,OAAA3mB,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAAK2P,EAAO4I,IAAIma,0BAA2BlZ,EAAMxc,QAAQ+kB,SAD3G,UAAAve,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,oCAJ9D,WAOQkC,EAPR,CAAAqS,EAAA3D,KAAA,aAiBY9B,GAREiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GACT,OAAO2nD,GAAmC3nD,OAb1D,CAAAgQ,EAAA3D,KAAA,SAoBY,OADA1Q,QAAQF,MAAM,0DAA2D+Q,EAAO7L,MAAOhD,EAASqC,MAnB5GgQ,EAAA3D,KAAA,GAoBkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,oCApBlE,YAuBYiP,GAAU8B,GAvBtB,CAAAwD,EAAA3D,KAAA,SAyBY,OADMoqB,EAAkBxlB,gBAAKzE,EAAO7L,OAxBhDqP,EAAA3D,KAAA,GAyBkB0E,aAAIb,EAAOtM,MAAMi1B,4BAA4BpC,IAzB/D,yBAAAzmB,EAAAI,SAAAm8E,GAAApsF,MA8BO,SAAU8yB,KAAV,IAAAlZ,EAAA,OAAAjK,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEsB,OAFtByE,EAAAzE,KAAA,EAE4BiF,aAAK,CAC5BpB,EAAOiJ,KAAK2W,+BAHjB,OAMC,OAJM/V,EAFPjJ,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK+6E,GAAiCvyE,GAN7C,OAAAjJ,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAo8E,GAAArsF,uBCDUssF,IA7BXC,GAA2B58E,GAAAhN,EAAAyW,KAAG,SAA9BmzE,EAAyC9sF,GAAX,IAAAmE,EAAApG,EAAA6O,EAAA05C,EAAA,OAAAp2C,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACQ,OADR2D,EAAA3D,KAAA,EACc9L,aAAK2P,EAAW0hB,0BAA2BhyB,EAAOrC,QAAQ+kB,SADxE,UAAAve,EAAAiM,EAAAG,KACzBxS,EADyBoG,EACzBpG,UADyBoG,EACftI,MADe,CAAAuU,EAAA3D,KAAA,QAI5B,OAJ4B2D,EAAA3D,KAAA,EAItB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,0CAJ1B,WAO5BkC,EAP4B,CAAAqS,EAAA3D,KAAA,aAgBxB9B,GAREiC,EAASG,GACXhP,EAAUqC,KACVqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAAC3L,GACT,OAAOgnC,GAAoChnC,OAZvB,CAAAgQ,EAAA3D,KAAA,SAmBxB,OADA1Q,QAAQF,MAAM,gEAAiE+Q,EAAO7L,MAAOhD,EAASqC,MAlB9EgQ,EAAA3D,KAAA,GAmBlB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,0CAnB9B,YAsBxBiP,GAAU8B,GAtBc,CAAAwD,EAAA3D,KAAA,SAwBxB,OADM65C,EAAuBj1C,gBAAKzE,EAAO7L,OAvBjBqP,EAAA3D,KAAA,GAwBlB0E,aAAIb,EAAa6nB,4BAA4BmuB,IAxB3B,yBAAAl2C,EAAAI,SAA9Bs8E,EAA8BvsF,QA6B7B,SAAUssF,KAAV,IAAA7sF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAK,CAACpB,EAAYwf,+BAHpD,OAKC,OAFM9vB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAKOkF,aAAKm7E,GAA6B9sF,GALzC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAu8E,GAAAxsF,uBC+BUysF,IA3DXC,GAAgB/8E,GAAAhN,EAAAyW,KAAG,SAAnBszE,EAA8BjtF,GAAX,IAAA+6B,EAAA52B,EAAApG,EAAA4kB,EAAAqR,EAAAk5D,EAAA5hF,EAAAs7B,EAAA,OAAA12B,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACH,OADG2D,EAAA3D,KAAA,EACG0M,aAAOw3B,GAAsB3wC,EAAOrC,QAAQ+kB,UAD/C,YACfqY,EADe3qB,EAAAG,QAGLwqB,EAAUA,UAHL,CAAA3qB,EAAA3D,KAAA,QAIjB,OAJiB2D,EAAA3D,KAAA,EAIX0E,aAAIb,EAAe2jB,uBAAuBj0B,EAAOrC,QAAQ+kB,SAAS,IAJvD,cAAAtS,EAAAwB,OAAA,iBAQmB,OARnBxB,EAAA3D,KAAA,EAQyB9L,aAAK2P,EAAWihB,eAAgBvxB,EAAOrC,QAAQ+kB,SARxE,UAAAve,EAAAiM,EAAAG,KAQdxS,EARcoG,EAQdpG,UARcoG,EAQJtI,MARI,CAAAuU,EAAA3D,KAAA,SAWjB,OAXiB2D,EAAA3D,KAAA,GAWX0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,yBAXrC,YAcjBkC,EAdiB,CAAAqS,EAAA3D,KAAA,SAyCjB,OA1BMkW,EAAQ,IAAIgxB,EAAW1Y,MAAM,CAC/Bn7B,IAAK/B,EAASqC,KAAKsiB,QACnBtb,KAAMrJ,EAASqC,KAAKgH,KACpByyB,aAAc97B,EAASqC,KAAKy5B,aAC5BrJ,QAAS,IAAI28D,EAAgBzzD,aAAa37B,EAASqC,KAAKmwB,cACxDiK,OAAQz8B,EAASqC,KAAKo6B,OACtBE,WAAYrpB,gBAAKtT,EAASqC,KAAKs6B,YAC/BC,cAAetpB,gBAAKtT,EAASqC,KAAKu6B,eAClC9J,YAAa9yB,EAASqC,KAAKywB,YAC3BgK,MAAO98B,EAASqC,KAAKy6B,MACrBC,QAAS/8B,EAASqC,KAAK06B,QACvBhmB,aAAc/W,EAASqC,KAAK0U,aAC5BimB,WAAW,IAGX/G,EAAW,KACXk5D,EAAoC,GAErCnvF,EAASqC,KAAK4zB,WACbA,EAAW,IAAI6T,EAAcA,cAAc,CACvCnlB,QAAS3kB,EAASqC,KAAKsiB,QACvBkX,IAAK77B,EAASqC,KAAK4zB,SAAS5M,QAC5BmJ,aAAc,IAAI48D,EAAgBzzD,aAAa37B,EAASqC,KAAK4zB,SAASzD,iBArC7DngB,EAAA3D,KAAA,GAyCX0E,aAAIb,EAAeujB,aAAa,CAAClR,KAzCtB,YA2CdqR,EA3Cc,CAAA5jB,EAAA3D,KAAA,SA4Cb,OA5Ca2D,EAAA3D,KAAA,GA4CP0E,aAAI4iB,GAAmBC,IA5ChB,QA+CjBk5D,EAAU,GAEVnvF,EAASqC,KAAK8sF,QAAQpqF,QAAQ,SAAC8jC,GAAD,OAAgBsmD,EAAQlqF,KAAKyjC,GAA6BG,MAjDvEt7B,EAAA,eAAAA,EAmDE4hF,EAnDF3rF,QAAA,CAAA6O,EAAA3D,KAAA,SAoDb,OADMm6B,EAASsmD,EAnDF5hF,GAAA8E,EAAA3D,KAAA,GAoDP0E,aAAIklB,GAAoBuQ,IApDjB,QAAAt7B,IAAA8E,EAAA3D,KAAA,iBAuDjB,OAvDiB2D,EAAA3D,KAAA,GAuDX0E,aAAIb,EAAe2jB,uBAAuBtR,EAAM7iB,IAAK6iB,EAAMkO,cAvDhD,yBAAAzgB,EAAAI,SAAnBy8E,EAAmB1sF,QA2DlB,SAAUysF,KAAV,IAAAhtF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAK,CAClCpB,EAAYqf,mBAJjB,OAOC,OAJM3vB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAOOkF,aAAKs7E,GAAkBjtF,GAP9B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA48E,GAAA7sF,MC1DA,IAKM8sF,GAAmC,SAACjtF,GAC7C,IAAM0N,EAAqC7C,GAAS7K,EAChD,CAACiN,GAAO,UAAW,kBACnB,CAACA,GAAO,UAAW,qBAAqBjN,EAAK2G,SAGjD,OAAG4D,GAAUmD,GACFA,EAGJ9C,GAAQ,IAAIsiF,GAAa,CAC5BvmF,OAAQ3G,EAAK2G,OACbkwC,OAAQ72C,EAAK62C,WAKRq2C,GAAb,SAAAC,GAEI,SAAAD,EAAmBltF,GAA0B,OAAAC,OAAAC,GAAA,EAAAD,CAAAE,KAAA+sF,GAAAjtF,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAitF,GAAA3sF,KAAAJ,KACnCH,IAHd,OAAAC,OAAAO,GAAA,EAAAP,CAAAitF,EAAAC,GAAAD,EAAA,CAAkCE,kBAtByB,CACvDzmF,OAAQ,GACRkwC,OAAQ,mBCTKw2C,IAAV,SAAUA,KAAV,IAAAtpF,EAAApG,EAAA6O,EAAA,OAAAsD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACqC,OADrC2D,EAAA3D,KAAA,EAC2C9L,aAAK2P,EAAW9I,iBAD3D,UAAArD,EAAAiM,EAAAG,KACIxS,EADJoG,EACIpG,UADJoG,EACctI,MADd,CAAAuU,EAAA3D,KAAA,QAIC,OAJD2D,EAAA3D,KAAA,EAIO0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAJvD,WAOCkC,EAPD,CAAAqS,EAAA3D,KAAA,aAUK9B,GAFEiC,EAASygF,GAAiCtvF,EAASqC,OAR1D,CAAAgQ,EAAA3D,KAAA,SAaK,OADA1Q,QAAQF,MAAM,uDAAwD+Q,EAAO7L,MAAOhD,EAASqC,MAZlGgQ,EAAA3D,KAAA,GAaW0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,iCAb3D,YAgBKiP,GAAU8B,GAhBf,CAAAwD,EAAA3D,KAAA,SAiBK,OAjBL2D,EAAA3D,KAAA,GAiBW0E,aAAIb,EAAalI,mBAAmBwE,EAAO7L,QAjBtD,yBAAAqP,EAAAI,SAAAk9E,GAAAntF,uBCiBGotF,iBAUAC,iBA6BA7vE,iBA4BA8vE,iBAIOC,IAvEjB,SAAUH,GAAe5vF,GAAzB,IAAAuI,EAAA,OAAA4J,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACe,OADf2D,EAAA3D,KAAA,EACqB0M,aAAO6E,EAAaC,yBAAqBle,GAD9D,OAOI,OAFAuG,GADAA,GADAA,GADAA,GADIA,EADR8J,EAAAG,MAEgBvP,IAAI,QAASjD,EAASqC,KAAKsP,QAC3B1O,IAAI,YAAajD,EAASqC,KAAKuP,YAC/B3O,IAAI,YAAY,IAChBA,IAAI,qBAAsBjD,EAASqC,KAAKwP,oBAAsB,MAL9EQ,EAAA3D,KAAA,EAOU0E,aAAIyI,EAAW7V,QAAQsC,OAAOC,IAPxC,wBAAA8J,EAAAI,SAAAu9E,GAAAxtF,MAUA,SAAUqtF,KAAV,IAAAzpF,EAAApG,EAAA4Y,EAAA,OAAAzG,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACI,OADJyE,EAAAzE,KAAA,EACU0E,aAAIb,EAAaipB,wBAD3B,OAG4C,OAH5CroB,EAAAzE,KAAA,EAGkD9L,aAAK2P,EAAWkhB,iBAHlE,UAAArtB,EAAA+M,EAAAX,KAGWxS,EAHXoG,EAGWpG,UAHXoG,EAGqBtI,MAHrB,CAAAqV,EAAAzE,KAAA,SAMQ,OANRyE,EAAAzE,KAAA,GAMc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,0BAN9D,YASOkC,EATP,CAAAmT,EAAAzE,KAAA,SAyBQ,OAfMkK,EAAS1H,eAAIlR,EAASqC,KAAa,SAACA,GAAD,OAAe,IAAIuzC,EAAW1Y,MAAM,CACzEn7B,IAAKM,EAAKsiB,QACVtb,KAAMhH,EAAKgH,KACXyyB,aAAcz5B,EAAKy5B,aACnBrJ,QAAS,IAAIkJ,GAAat5B,EAAKowB,SAC/BgK,OAAQp6B,EAAKo6B,OACbE,WAAYrpB,gBAAKjR,EAAKs6B,YACtBC,cAAetpB,gBAAKjR,EAAKu6B,eACzBC,QAASx6B,EAAKw6B,UAAW,EACzBC,MAAOz6B,EAAKiW,QACZykB,QAAS16B,EAAK4tF,UACdl5E,aAAc1U,EAAK0U,aACnBimB,WAAW,MAtBvB7pB,EAAAzE,KAAA,GAyBc0E,aAAI0iB,GAAald,IAzB/B,yBAAAzF,EAAAV,SAAAy9E,GAAA1tF,MA6BA,SAAUwd,GAAoB/d,GAA9B,IAAAqE,EAAAtG,EAAAlC,EAAAgL,EAAAkL,EAAAm8E,EAAA,OAAAh+E,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAC4C,OAD5CgF,EAAAhF,KAAA,EACkD9L,aAAKwnC,EAAYjvB,IAAIpS,QAAS9G,EAAOrC,QAAQqtC,GAAGW,YAAaC,KAD/G,UAAAvnC,EAAAoN,EAAAlB,KACWxS,EADXsG,EACWtG,WAAUlC,EADrBwI,EACqBxI,QAEa,MAAjBA,EAAMka,OAHvB,CAAAtE,EAAAhF,KAAA,SAKsD,OADxC5F,EAAiBrG,KAAK+Z,KAJpC9I,EAAAhF,KAAA,EAK4D9L,aAAKoW,EAAoBmC,IAAInH,wBAAyBlL,GALlH,YAKckL,EALdN,EAAAlB,MAOoC1U,MAPpC,CAAA4V,EAAAhF,KAAA,SAQY,OARZgF,EAAAhF,KAAA,GAQkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,uCARlE,YAWYkW,EAAwBhU,SAXpC,CAAA0T,EAAAhF,KAAA,SAaiD,OAbjDgF,EAAAhF,KAAA,GAauD9L,aAAKwnC,EAAYjvB,IAAIpS,QAAS9G,EAAOrC,QAAQqtC,GAAGW,YAAaC,KAbpH,QAcY,OADMsiD,EAblBz8E,EAAAlB,KAAAkB,EAAAhF,KAAA,GAckBkhF,GAAeO,EAAenwF,UAdhD,QAAA0T,EAAAhF,KAAA,iBAiBQ,OAjBRgF,EAAAhF,KAAA,GAiBckhF,GAAe5vF,GAjB7B,QAoBI,OApBJ0T,EAAAhF,KAAA,GAoBU9L,aAAK8sF,IApBf,QAqBI,OArBJh8E,EAAAhF,KAAA,GAqBU0E,aAAI4F,EAAoB8C,MAAM1H,0BArBxC,QAsBI,OAtBJV,EAAAhF,KAAA,GAsBU4/B,aAAM,KAtBhB,QAuBI,OAvBJ56B,EAAAhF,KAAA,GAuBU9L,aAAKitF,IAvBf,QAwBI,OAxBJn8E,EAAAhF,KAAA,GAwBU9L,aAAK+9C,IAxBf,QAyBI,OAzBJjtC,EAAAhF,KAAA,GAyBU0E,aAAIomB,MAzBd,yBAAA9lB,EAAAjB,SAAA29E,GAAA5tF,MA4BA,SAAUstF,KAAV,OAAA39E,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,OACI,OADJiS,EAAAjS,KAAA,EACUmhF,KADV,wBAAAlvE,EAAAlO,SAAA49E,GAAA7tF,MAIO,SAAUutF,KAAV,IAAA9tF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAA4Q,GAAA,cAAAA,EAAA1Q,KAAA0Q,EAAAtU,MAAA,OAE4B,OAF5BsU,EAAAtU,KAAA,EAEkCiF,aAAK,CAClCu7B,EAAY1zB,KAAKqxB,mBACjBt6B,EAAYof,oBAJjB,OAEO1vB,EAFP+gB,EAAAxQ,KAAAwQ,EAAAzP,GAOStR,EAAOqD,KAPhB0d,EAAAtU,KAAAsU,EAAAzP,KAQU27B,EAAY1zB,KAAKqxB,mBAR3B,EAAA7pB,EAAAzP,KAWUhB,EAAYof,kBAXtB,mBASS,OATT3O,EAAAtU,KAAA,EASekF,aAAKoM,GAAqB/d,GATzC,cAAA+gB,EAAAnP,OAAA,oBAYS,OAZTmP,EAAAtU,KAAA,GAYekF,aAAKk8E,IAZpB,eAAA9sE,EAAAnP,OAAA,oBAAAmP,EAAAtU,KAAA,iCAAAsU,EAAAvQ,SAAA69E,GAAA9tF,uBCtFGy1B,iBAmBOs4D,IAnBjB,SAAUt4D,GAAoBh2B,GAA9B,IAAA2iB,EAAA4rE,EAAApqF,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAEqB,OADVkW,EAAS3iB,EAAOrC,QAAhBglB,MADXvS,EAAA3D,KAAA,EAE2B0M,aAAOw3B,GAAsBhuB,EAAM7iB,MAF9D,OAII,OAFMyuF,EAFVn+E,EAAAG,KAAAH,EAAA3D,KAAA,EAIU0E,aAAIb,EAAewjB,kBAAkB,CAACnR,KAJhD,OAM4C,OAN5CvS,EAAA3D,KAAA,EAMkD9L,aAAK2P,EAAWggB,kBAAmB3N,EAAM7iB,IAAK6iB,EAAM6N,QAAS7N,EAAMiX,KANrH,UAAAz1B,EAAAiM,EAAAG,KAMWxS,EANXoG,EAMWpG,UANXoG,EAMqBtI,MANrB,CAAAuU,EAAA3D,KAAA,SASQ,OATR2D,EAAA3D,KAAA,GASc0E,aAAIg0C,EAAOphD,QAAQlI,MAAM,eAAgB,qCATvD,QAUQ,OAVRuU,EAAA3D,KAAA,GAUc0E,aAAIb,EAAewjB,kBAAkB,CAACy6D,KAVpD,eAAAn+E,EAAAwB,OAAA,sBAcO7T,EAdP,CAAAqS,EAAA3D,KAAA,SAeQ,OAfR2D,EAAA3D,KAAA,GAec0E,aAAIg0C,EAAOphD,QAAQ3C,KAAK,kBAAmBuhB,EAAMvb,OAf/D,yBAAAgJ,EAAAI,SAAAg+E,GAAAjuF,MAmBO,SAAU+tF,KAAV,IAAAtuF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAACpB,EAAYma,wBAFpD,OAIC,OAFMzqB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKqkB,GAAqBh2B,GAJjC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAi+E,GAAAluF,uBCVGs1B,iBA0DO64D,IA1DjB,SAAU74D,GAAe71B,GAAzB,IAAA0iB,EAAA5N,EAAA/W,EAAA+I,EAAAR,EAAAqc,EAAA4uD,EAAAod,EAAA/6B,EAAAg7B,EAAA,OAAA1+E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAGyB,OAFfiW,EAAU1iB,EAAOrC,QAAQ+kB,SAAWliB,QAD9C4P,EAAA3D,KAAA,EAG+B0M,aAAO+uB,MAHtC,UAGUpzB,EAHV1E,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,QAMQ,OANR2D,EAAA3D,KAAA,EAMc0E,aAAIC,EAAarN,QAAQlI,MAAM,sBAAuB,8BANpE,cAAAuU,EAAAwB,OAAA,oBAUQ7T,EAAgC,KAEhCiC,EAAOrC,QAAQo4B,gBAZvB,CAAA3lB,EAAA3D,KAAA,SAamB,OAbnB2D,EAAA3D,KAAA,GAayB9L,aAAK2P,EAAW6f,yBAA0Brb,EAAajO,eAAgB6b,EAAS1iB,EAAOrC,QAAQyyB,WAbxH,QAaQryB,EAbRqS,EAAAG,KAAA,YAgBQxS,IAAYA,EAASlC,MAhB7B,CAAAuU,EAAA3D,KAAA,SAiBQ,OAjBR2D,EAAA3D,KAAA,GAiBc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,yBAjB9D,aAmBSkC,GAAYA,EAASA,UAAaiC,EAAOrC,QAAQo4B,iBAnB1D,CAAA3lB,EAAA3D,KAAA,YAoBYzM,EAAOrC,QAAQo4B,gBApB3B,CAAA3lB,EAAA3D,KAAA,SAqBY,OArBZ2D,EAAA3D,KAAA,GAqBkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kBArBjE,QA2B+B,OAFjB0F,EAAUkX,EAAavD,qBAzBrCrK,EAAA3D,KAAA,GA2BqC0M,aAAOrS,GA3B5C,QA8CQ,OAnBMR,EA3Bd8J,EAAAG,KA6BcoS,EAAQ,IAAIsY,GAAM,CACpBn7B,IAAK4iB,EACLtb,KAAMpH,EAAOrC,QAAQyyB,UACrBwJ,IAAK55B,EAAOrC,QAAQm4B,SACpBtF,QAAS,IAAIkJ,GAAa,CACtB3yB,OAAQT,EAAKxG,IACb0wB,QAAS,IAEbgK,QAAQ,EACRE,WAAYrpB,kBACZspB,cAAetpB,kBACfwpB,MAAO,KACPC,QAASx0B,EAAKxG,IACdgV,aAAcA,EAAajO,eAC3Bk0B,YAAa/6B,EAAOrC,QAAQo4B,kBA3CxC3lB,EAAA3D,KAAA,GA8Cc0E,aAAIb,EAAeujB,aAAa,CAAClR,KA9C/C,QAsDQ,OAtDR4uD,EAgDkC5d,KAhDlCg7B,EAAAtuF,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,GAAAod,EAAA,GAgDsB/6B,EAhDtB+6B,EAAA,GAkDcC,EAAoB7yD,GAAepZ,EAAMiX,UAAO75B,GAEtD6zD,EAASg7B,GApDjBx+E,EAAA3D,KAAA,GAsDc0E,aAAIb,EAAeqlB,UAAUhT,EAAOisE,IAtDlD,yBAAAx+E,EAAAI,SAAAq+E,GAAAtuF,MA0DO,SAAUmuF,KAAV,IAAA1uF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAACpB,EAAYka,mBAFpD,OAIC,OAFMxqB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKkkB,GAAgB71B,GAJ5B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAs+E,GAAAvuF,uBCnEGwuF,iBAmCOn4D,IAnCjB,SAAUm4D,GAA4B91E,GAAtC,IAAA+1E,EAAAC,EAAAr+E,EAAAC,EAAAC,EAAAC,EAAAC,EAAAy/C,EAAAtsD,EAAA,OAAA+L,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACUuiF,EAAO/1E,EAAQtb,QAAQk5B,gBAAgB9c,OACvCk1E,EAAe,GAFzBr+E,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAqQ,EAAAC,KAAA,EAAAU,EAIsBi+E,EAJtBziF,OAAAC,YAAA,UAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAA0D,EAAA3D,KAAA,SAKgD,OADjCgkD,EAJfz/C,EAAAjQ,MAAAqP,EAAA3D,KAAA,GAKsD9L,aAAK2P,EAAO4I,IAAIoa,kBAC1Dm9B,EAAI/tC,QACJ+tC,EAAIl9B,SACJk9B,EAAIj9B,UARhB,WAAArvB,EAAAiM,EAAAG,KAAApM,EAKepG,UALfoG,EAKyBtI,MALzB,CAAAuU,EAAA3D,KAAA,SAYY,OAZZ2D,EAAA3D,KAAA,GAYkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,qCAAuC40D,EAAIl9B,WAZ7G,eAAAnjB,EAAAwB,OAAA,uBAkBmD,OAF3Cq9E,EAAajsF,KAAKytD,GAhB1BrgD,EAAA3D,KAAA,GAkByD9L,aAAK2P,EAAO4I,IAAIua,2BAC7Dg9B,EAAI/tC,QACJ+tC,EAAIl9B,SACJk9B,EAAI/8B,aACJ+8B,EAAI98B,qBAAkB5zB,GAtBlC,YAAAqQ,EAAAG,KAyBiC1U,MAzBjC,CAAAuU,EAAA3D,KAAA,SA0BY,OA1BZ2D,EAAA3D,KAAA,GA0BkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,+CAAiD40D,EAAIl9B,WA1BvH,QAAA3iB,GAAA,EAAAR,EAAA3D,KAAA,gBAAA2D,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAkB,GAAAlB,EAAA,SAAAS,GAAA,EAAAC,EAAAV,EAAAkB,GAAA,QAAAlB,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAsD,EAAAC,KAAA,IAAAQ,EAAA,CAAAT,EAAA3D,KAAA,eAAAqE,EAAA,eAAAV,EAAAmB,OAAA,mBAAAnB,EAAAmB,OAAA,YA8BI,OA9BJnB,EAAA3D,KAAA,GA8BU0E,aAAIC,EAAarN,QAAQ3C,KAAK,0BAA2B,uCA9BnE,QA+BI,OA/BJgP,EAAA3D,KAAA,GA+BU0E,aAAIb,EAAOtM,MAAMq1B,wBAAwBhoB,gBAAK49E,KA/BxD,QAgCIh2E,EAAQtb,QAAQm5B,aAhCpB,yBAAA1mB,EAAAI,SAAA0+E,GAAA3uF,KAAA,4BAmCO,SAAUq2B,KAAV,IAAA3d,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKqT,0BAHjB,OAMC,OAJM3T,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKo9E,GAA6B91E,GANzC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA2+E,GAAA5uF,uBClCU6uF,IAAV,SAAUA,KAAV,IAAApvF,EAAA8U,EAAA3Q,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAG4B,OAH5B2D,EAAA3D,KAAA,EAGkCiF,aAAK,CAClCpB,EAAYoa,YAJjB,OAOsB,OAJf1qB,EAHPoQ,EAAAG,KAAAH,EAAA3D,KAAA,EAO4B0M,aAAO+uB,MAPnC,YAOOpzB,EAPP1E,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAU6C,OAV7C2D,EAAA3D,KAAA,GAUmD9L,aAAK2P,EAAW6f,yBAA0Brb,EAAajO,eAAgB7G,EAAOrC,QAAQglB,MAAM7iB,IAAKE,EAAOrC,QAAQglB,MAAMvb,MAVzK,WAAAjD,EAAAiM,EAAAG,KAUYxS,EAVZoG,EAUYpG,UAVZoG,EAUsBtI,MAVtB,CAAAuU,EAAA3D,KAAA,SAaS,OAbT2D,EAAA3D,KAAA,GAae0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,yBAb/D,YAeSkC,EAfT,CAAAqS,EAAA3D,KAAA,SAgBS,OAhBT2D,EAAA3D,KAAA,GAgBe0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kBAhB9D,QAiBS,OAjBTgP,EAAA3D,KAAA,GAiBe9L,aAAKX,EAAOrC,QAAQ+rB,QAAQ1mB,KAAM2mB,GAAsC3pB,EAAOrC,QAAQglB,MAAM7iB,MAjB5G,QAAAsQ,EAAA3D,KAAA,iBAoBK,OApBL2D,EAAA3D,KAAA,GAoBW0E,aAAIC,EAAarN,QAAQlI,MAAM,4BAA6B,8BApBvE,QAAAuU,EAAA3D,KAAA,iCAAA2D,EAAAI,SAAA6+E,GAAA9uF,uBCKU+uF,iBAiDAC,IAjDV,SAAUD,GAAeE,GAAzB,IAAAC,EAAA/lE,EAAAhH,EAAA9R,EAAAC,EAAAC,EAAAynD,EAAAxnD,EAAAC,EAAA0+E,EAAAC,EAAAruF,UAAA,OAAA4O,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAA2DgjF,EAA3DE,EAAApuF,OAAA,QAAAxB,IAAA4vF,EAAA,IAAAA,EAAA,GACCjmE,EAAwBrY,kBADzBT,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAmR,EAAAb,KAAA,EAAAkoD,EAAAroD,GAAAhN,EAAAyW,KAAA,SAAA4+C,IAAA,IAAAjiC,EAAAs5D,EAAAC,EAAA1rF,EAAA2rF,EAAAC,EAAA,OAAA7/E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAK4C,OADrC6pB,EAJPtlB,EAAAjQ,MAAAqP,EAAA3D,KAAA,EAKkD0M,aAAO62E,EAAoB1yE,mBAAoBgZ,EAAavvB,QAL9G,UAKK6oF,EALLx/E,EAAAG,KAMCmS,EAAU4T,EAAa3T,MAEnBitE,EARL,CAAAx/E,EAAA3D,KAAA,SASK,OATL2D,EAAA3D,KAAA,EASW0E,aAAIyI,EAAWC,MAAMpQ,cAAc,CAAC6sB,EAAavvB,UAT5D,OAWS8oF,GAAiB,EAX1B,WAaYA,EAbZ,CAAAz/E,EAAA3D,KAAA,SAcuF,OAdvF2D,EAAA3D,KAAA,GAc6FgjC,aAAK,CACrFqgD,WAAYp+E,aAAK,CAACkI,EAAWL,KAAK1T,wBAClC0jC,QAAS8C,aAAM,OAhB5B,WAAAloC,EAAAiM,EAAAG,KAcgBu/E,EAdhB3rF,EAcgB2rF,YAdhB3rF,EAc4BolC,QAd5B,CAAAn5B,EAAA3D,KAAA,gBAAA2D,EAAAwB,OAAA,UAAAq+E,OAAA,YAuBSH,EAAWnyF,QAAQwK,UAAUrF,QAAQ,SAAAotF,GAC9BA,EAAWnpF,SAAWuvB,EAAavvB,SAClC6oF,EAAcM,EACdL,GAAiB,KA1BlCz/E,EAAA3D,KAAA,gBAgCOsjF,EAAe/pD,GAAiB1P,EAAcs5D,GAEhDlmE,EADD+lE,EACW/lE,EAAQymE,QAAQJ,GAEhBrmE,EAAQ1mB,KAAK+sF,GApC5B,yBAAA3/E,EAAAI,SAAA+nD,EAAAh4D,QAAAwQ,EAIuBy+E,EAJvBjjF,OAAAC,YAAA,UAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAAwE,EAAAzE,KAAA,gBAAAyE,EAAA0nD,cAAAL,IAAA,sCAAAm3B,EAAAx+E,EAAAI,IAAA,CAAAJ,EAAAzE,KAAA,gBAAAyE,EAAAU,OAAA,SAAA89E,EAAAO,GAAA,QAAAr/E,GAAA,EAAAM,EAAAzE,KAAA,gBAAAyE,EAAAzE,KAAA,iBAAAyE,EAAAb,KAAA,GAAAa,EAAAq7B,GAAAr7B,EAAA,SAAAL,GAAA,EAAAC,EAAAI,EAAAq7B,GAAA,QAAAr7B,EAAAb,KAAA,GAAAa,EAAAb,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAoE,EAAAb,KAAA,IAAAQ,EAAA,CAAAK,EAAAzE,KAAA,eAAAqE,EAAA,eAAAI,EAAAK,OAAA,mBAAAL,EAAAK,OAAA,gBAwCAmR,EAxCA,CAAAxR,EAAAzE,KAAA,aAyCIgjF,EAzCJ,CAAAv+E,EAAAzE,KAAA,SA0CK,OA1CLyE,EAAAzE,KAAA,GA0CW0E,aAAI2jB,GAAsBpS,EAASgH,IA1C9C,QAAAxY,EAAAzE,KAAA,iBA4CK,OA5CLyE,EAAAzE,KAAA,GA4CW0E,aAAIyjB,GAAqBlS,EAASgH,IA5C7C,yBAAAxY,EAAAV,SAAA4/E,GAAA7vF,KAAA,4BAiDA,SAAUgvF,KAAV,IAAAvvF,EAAAw2B,EAAA,OAAAtmB,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE4B,OAF5BgF,EAAAhF,KAAA,EAEkCiF,aAAK,CAACpB,EAAYod,sBAAuBpd,EAAYid,sBAFvF,OAEOvtB,EAFPyR,EAAAlB,KAAAkB,EAAAH,GAIStR,EAAOqD,KAJhBoO,EAAAhF,KAAAgF,EAAAH,KAKUoc,GALV,EAAAjc,EAAAH,KAUUic,GAVV,mBAQS,OAFMiJ,EAASx2B,EAAOrC,QAAQ64B,OAAOje,UAN9C9G,EAAAhF,KAAA,GAQekF,aAAK29E,GAAgB94D,GAAQ,GAR5C,eAAA/kB,EAAAG,OAAA,oBAWS,OAXTH,EAAAhF,KAAA,GAWekF,aAAK29E,GAAgB,CAACtvF,EAAOrC,QAAQ24B,eAAe,GAXnE,eAAA7kB,EAAAG,OAAA,oBAAAH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAA6/E,GAAA9vF,uBCRG+vF,iBAgCAC,iBA0BOC,IA1EJC,GAAsB,SAACrwF,GAChC,OAAO,IAAIomC,GAAa,CACpB7jB,MAAOviB,EAAKsiB,QACZxd,OAAQ9E,EAAK8E,aAAUnF,EACvBmmC,UAAW9lC,EAAK8lC,UAChB3S,SAAUnzB,EAAKmzB,SACfvzB,OAAQI,EAAKJ,OACbomC,WAAYhmC,EAAKgmC,WACjBr/B,OAAQ3G,EAAKmwB,aAAaxpB,OAC1BypB,QAASpwB,EAAKmwB,aAAaC,QAC3B8V,UAAWj1B,gBAAKjR,EAAKwmC,OACrBx/B,KAAM,eACNtH,IAAKM,EAAKumC,WAIlB,SAAU2pD,GAAYtwF,GAAtB,IAAAuwC,EAAAmgD,EAAA/tE,EAAA+G,EAAAvlB,EAAApG,EAAAmvF,EAAA,OAAAh9E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAIyB,OAHf8jC,EAAeI,GAAsB3wC,EAAOrC,QAAQ+kB,SACpDguE,EAAkB7+C,GAA6B7xC,EAAOrC,QAAQ+kB,SAFxEtS,EAAA3D,KAAA,EAI+B0M,aAAOo3B,GAJtC,OAKkC,OADxB5tB,EAJVvS,EAAAG,KAAAH,EAAA3D,KAAA,EAKwC0M,aAAOu3E,GAL/C,UAKUhnE,EALVtZ,EAAAG,MAOOoS,GAAU+G,EAAQ0L,QAPzB,CAAAhlB,EAAA3D,KAAA,SAQQ,OARR2D,EAAA3D,KAAA,GAQc0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAR9D,QAUgD,OAVhDtS,EAAA3D,KAAA,GAUsD9L,aAAK2P,EAAWmhB,kBAAmBzxB,EAAOrC,QAAQ+kB,QAASC,EAAM6N,SAVvH,WAAArsB,EAAAiM,EAAAG,KAUexS,EAVfoG,EAUepG,UAVfoG,EAUyBtI,MAVzB,CAAAuU,EAAA3D,KAAA,SAaY,OAbZ2D,EAAA3D,KAAA,GAakB0E,aAAI+jB,GAA0Bl1B,EAAOrC,QAAQ+kB,UAb/D,QAcY,OAdZtS,EAAA3D,KAAA,GAckB0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAdlE,eAAAtS,EAAAwB,OAAA,sBAkBW7T,EAlBX,CAAAqS,EAAA3D,KAAA,YAqBkC,KAFhBygF,EAAUj+E,eAAIlR,EAASqC,KAAa,SAACA,GAAD,OAAeqwF,GAAoBrwF,MAElEmB,OArBvB,CAAA6O,EAAA3D,KAAA,SAsBgB,OAtBhB2D,EAAA3D,KAAA,GAsBsB0E,aAAI+jB,GAA0Bl1B,EAAOrC,QAAQ+kB,UAtBnE,QAyBY,OAzBZtS,EAAA3D,KAAA,GAyBkB9L,aAAK2uF,GAAgBpC,GAzBvC,QA4BQ,OA5BR98E,EAAA3D,KAAA,GA4Bc0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IA5B9D,yBAAAtS,EAAAI,SAAAmgF,GAAApwF,MAgCA,SAAUgwF,GAAWvwF,GAArB,IAAAqE,EAAAtG,EAAAmvF,EAAA,OAAAh9E,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEI,OAFJyE,EAAAzE,KAAA,EAEU0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAF1D,OAI4C,OAJ5CxR,EAAAzE,KAAA,EAIkD9L,aAAK2P,EAAWmhB,kBAAmBzxB,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQ4yB,cAJ5H,UAAAlsB,EAAA6M,EAAAX,KAIWxS,EAJXsG,EAIWtG,UAJXsG,EAIqBxI,MAJrB,CAAAqV,EAAAzE,KAAA,SAOQ,OAPRyE,EAAAzE,KAAA,GAOc0E,aAAI+jB,GAA0Bl1B,EAAOrC,QAAQ+kB,UAP3D,QAQQ,OARRxR,EAAAzE,KAAA,GAQc0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAR9D,eAAAxR,EAAAU,OAAA,sBAYO7T,EAZP,CAAAmT,EAAAzE,KAAA,YAe8B,KAFhBygF,EAAUj+E,eAAIlR,EAASqC,KAAa,SAACA,GAAD,OAAeqwF,GAAoBrwF,MAElEmB,OAfnB,CAAA2P,EAAAzE,KAAA,SAgBY,OAhBZyE,EAAAzE,KAAA,GAgBkB0E,aAAI+jB,GAA0Bl1B,EAAOrC,QAAQ+kB,UAhB/D,QAmBQ,OAnBRxR,EAAAzE,KAAA,GAmBc9L,aAAK2uF,GAAgBpC,GAnBnC,QAsBI,OAtBJh8E,EAAAzE,KAAA,GAsBU0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAtB1D,yBAAAxR,EAAAV,SAAAogF,GAAArwF,MA0BO,SAAUiwF,KAAV,IAAAK,EAAA,OAAA3gF,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE4B,OAF5BgF,EAAAhF,KAAA,EAEkCiF,aAAK,CAACwa,GAAgCC,KAFxE,OAEOnsB,EAFPyR,EAAAlB,KAAAkB,EAAAH,GAIStR,EAAOqD,KAJhBoO,EAAAhF,KAAAgF,EAAAH,KAKU6a,GALV,EAAA1a,EAAAH,KAQU4a,GARV,mBAMS,OANTza,EAAAhF,KAAA,EAMekF,aAAK4+E,GAAYvwF,GANhC,cAAAyR,EAAAG,OAAA,oBASS,OATTH,EAAAhF,KAAA,GASekF,aAAK2+E,GAAatwF,GATjC,QAAAyR,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAAsgF,GAAAvwF,uBCzGGwwF,iBAsBOn9D,IAtBjB,SAAUm9D,GAAkC93E,GAA5C,IAAA9U,EAAApG,EAAA4kB,EAAA,OAAAzS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC8B,OAD9B2D,EAAA3D,KAAA,EACoC9L,aAAK2P,EAAO4I,IAAI0a,4BAA6B3a,EAAQtb,QAAQkJ,eAAgBoS,EAAQtb,QAAQ+kB,SADjI,UAAAve,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,0CAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQQ,OARR2D,EAAA3D,KAAA,GAQc0E,aAAIb,EAAOuJ,MAAM2X,mBAR/B,QASQ,OATRphB,EAAA3D,KAAA,GASc0E,aAAI6/E,EAAkBn3E,MAAM1H,0BAT1C,QAWsB,OAXtB/B,EAAA3D,KAAA,GAW4B0M,aAAOw3B,GAAsB13B,EAAQtb,QAAQ+kB,UAXzE,aAWcC,EAXdvS,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAcY,OAdZ2D,EAAA3D,KAAA,GAckB0E,aAAIb,EAAOtM,MAAMs1B,6BAA6B3W,EAAMs/B,mBAAmBhpC,EAAQtb,QAAQkJ,kBAdzG,QAkBQ,OAlBRuJ,EAAA3D,KAAA,GAkBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,cAAe,kDAlB3D,yBAAAgP,EAAAI,SAAAygF,GAAA1wF,MAsBO,SAAUqzB,KAAV,IAAA3a,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAK2T,kCAHjB,OAMC,OAJMjU,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKo/E,GAAmC93E,GAN/C,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA0gF,GAAA3wF,uBCvBU4wF,IAAV,SAAUA,KAAV,IAAAnxF,EAAAmE,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAG4B,OAH5B2D,EAAA3D,KAAA,EAGkCiF,aAAK,CAACpB,EAAYia,eAHpD,OAKyC,OAFlCvqB,EAHPoQ,EAAAG,KAAAH,EAAA3D,KAAA,EAK+C9L,aAAK2P,EAAW+f,YAAarwB,EAAOrC,QAAQglB,MAAM7iB,IAAKE,EAAOrC,QAAQglB,MAAMvb,MAL3H,UAAAjD,EAAAiM,EAAAG,KAKQxS,EALRoG,EAKQpG,UALRoG,EAKkBtI,MALlB,CAAAuU,EAAA3D,KAAA,SAQK,OARL2D,EAAA3D,KAAA,GAQW0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,4BAR3D,QASK,OATLuU,EAAA3D,KAAA,GASW0E,aAAIb,EAAakhB,mBAT5B,YAYIzzB,EAZJ,CAAAqS,EAAA3D,KAAA,SAaK,OAbL2D,EAAA3D,KAAA,GAaW0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,KAb1D,QAAAgP,EAAA3D,KAAA,iCAAA2D,EAAAI,SAAA4gF,GAAA7wF,uBCCG8wF,iBAwBOC,IAxBjB,SAAUD,GAAwBrxF,GAAlC,IAAA03B,EAAAvzB,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4B,OAD5B2D,EAAA3D,KAAA,EACkC0M,aAAO4qC,GAA4B/jD,EAAOrC,QAAQ0U,eADpF,YACUqlB,EADVtnB,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAIgD,OAJhD2D,EAAA3D,KAAA,EAIsD9L,aAC1C2P,EAAW0gB,sBACXhxB,EAAOrC,QAAQ0U,cAN3B,UAAAlO,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAUY,OAVZ2D,EAAA3D,KAAA,GAUkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAVlE,YAaYkC,EAbZ,CAAAqS,EAAA3D,KAAA,SAcY,OAdZ2D,EAAA3D,KAAA,GAckB0E,aAAIC,EAAarN,QAAQ3C,KAC3B,oDACA,oDAhBhB,QAoBQ,OApBRgP,EAAA3D,KAAA,GAoBc0E,aAAIb,EAAaqnB,sBAAsBD,EAAgB2pB,WApBrE,yBAAAjxC,EAAAI,SAAA+gF,GAAAhxF,MAwBO,SAAU+wF,KAAV,IAAAtxF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY6a,0BAHjB,OAMC,OAJMnrB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK0/E,GAAyBrxF,GANrC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAghF,GAAAjxF,uBCzBGkxF,iBAcOC,IAdjB,SAAUD,GAAezxF,GAAzB,IAAAmE,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAAK2P,EAAW6gB,oBAAqBnxB,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQoJ,QAD9H,UAAA5C,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,UADXoG,EACqBtI,MADrB,CAAAuU,EAAA3D,KAAA,QAIQ,OAJR2D,EAAA3D,KAAA,EAIc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAJ9D,WAOOkC,EAPP,CAAAqS,EAAA3D,KAAA,SAQQ,OARR2D,EAAA3D,KAAA,GAQc0E,aAAIC,EAAarN,QAAQ3C,KAAK,iBAAkB,6BAR9D,QAUQ,OAVRgP,EAAA3D,KAAA,GAUc0E,aAAIb,EAAaunB,mBAAmB73B,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQoJ,SAVzF,yBAAAqJ,EAAAI,SAAAmhF,GAAApxF,MAcO,SAAUmxF,KAAV,IAAA1xF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAACpB,EAAY+a,yBAFpD,OAIC,OAFMrrB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAK8/E,GAAgBzxF,GAJ5B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAohF,GAAArxF,uBCbGsxF,iBAwBOC,IAxBjB,SAAUD,GAAwB7xF,GAAlC,IAAA03B,EAAAvzB,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4B,OAD5B2D,EAAA3D,KAAA,EACkC0M,aAAO4qC,GAA4B/jD,EAAOrC,QAAQ0U,eADpF,YACUqlB,EADVtnB,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAIgD,OAJhD2D,EAAA3D,KAAA,EAIsD9L,aAC1C2P,EAAW2gB,sBACXjxB,EAAOrC,QAAQ0U,cAN3B,UAAAlO,EAAAiM,EAAAG,KAIexS,EAJfoG,EAIepG,UAJfoG,EAIyBtI,MAJzB,CAAAuU,EAAA3D,KAAA,SAUY,OAVZ2D,EAAA3D,KAAA,GAUkB0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,sCAVlE,YAaYkC,EAbZ,CAAAqS,EAAA3D,KAAA,SAcY,OAdZ2D,EAAA3D,KAAA,GAckB0E,aAAIC,EAAarN,QAAQ3C,KAC3B,oDACA,oDAhBhB,QAmBY,OAnBZgP,EAAA3D,KAAA,GAmBkB0E,aAAIb,EAAasnB,uBAAuBF,EAAgB+pB,WAnB1E,yBAAArxC,EAAAI,SAAAuhF,GAAAxxF,MAwBO,SAAUuxF,KAAV,IAAA9xF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY8a,0BAHjB,OAMC,OAJMprB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKkgF,GAAyB7xF,GANrC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAwhF,GAAAzxF,uBCvBG0xF,iBA2COC,IA3CjB,SAAUD,GAAYjyF,EAAoBmyF,GAA1C,IAAA5gB,EAAAod,EAAA/4D,EAAAw8D,EAAAjuF,EAAAtI,EAAA,OAAAqU,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,UAAA8kE,EACoB5d,KADpBg7B,EAAAtuF,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,GACW37C,EADX+4D,EAAA,GAeI5yF,QAAQC,IAAI,kBAAmBm2F,EAAgB,KAE5CnyF,EAAOrC,QAAQglB,MAAMoY,UAjB5B,CAAA3qB,EAAA3D,KAAA,eAkBQ1Q,QAAQC,IAAI,kBAAmB,+BAlBvCoU,EAAAwB,OAAA,sBAsBOugF,EAAgB,KAAO,GAAKnyF,EAAOrC,QAAQglB,MAAM6N,QAAQA,QAAU,GAtB1E,CAAApgB,EAAA3D,KAAA,SAwByBmpB,EAAM89B,oBAEnB0+B,EAAQ,EA1BpB,OA4B0C,OA5B1ChiF,EAAA3D,KAAA,GA4BgD9L,aAAK2P,EAAWggB,kBAAmBtwB,EAAOrC,QAAQglB,MAAM7iB,IAAKE,EAAOrC,QAAQglB,MAAM6N,QAASoF,EAAM89B,qBA5BjJ,WAAAvvD,EAAAiM,EAAAG,MA4BmB1U,EA5BnBsI,EA4BmBtI,OAGHu2F,IAEAA,EAAQ,EAGE,IAAVA,IAAev2F,EApC/B,CAAAuU,EAAA3D,KAAA,SAqCgB,OArChB2D,EAAA3D,KAAA,GAqCsB0E,aAAIg0C,EAAOphD,QAAQlI,MAAM,eAAgB,mCArC/D,WAuCiBu2F,EAAQ,EAvCzB,CAAAhiF,EAAA3D,KAAA,iCAAA2D,EAAAI,SAAA6hF,GAAA9xF,MA2CO,SAAU2xF,KAAV,IAAAC,EAAAnyF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEC0lF,EAAgB,EAFjB,OAK4B,OAL5BjhF,EAAAzE,KAAA,EAKkCiF,aAAK,CAClCpB,EAAYga,WACZha,EAAYyd,iBAPjB,OAiBC,OAZM/tB,EALPkR,EAAAX,MAUWlN,OAASiN,EAAYyd,iBAE3BokE,EAAgB,GAGpBA,IAfDjhF,EAAAzE,KAAA,EAiBOkF,aAAKsgF,GAAajyF,EAAQmyF,GAjBjC,OAAAjhF,EAAAzE,KAAA,iCAAAyE,EAAAV,SAAA8hF,GAAA/xF,uBC7CGgyF,iBAuBOC,IAvBjB,SAAUD,GAAavyF,GAAvB,IAAAmE,EAAApG,EAAAlC,EAAA,OAAAqU,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAC1C2P,EAAWmgB,WACXzwB,EAAOrC,QAAQ+kB,QACf1iB,EAAOrC,QAAQuJ,MACflH,EAAOrC,QAAQ+yB,aALvB,UAAAvsB,EAAAiM,EAAAG,KACWxS,EADXoG,EACWpG,WAAUlC,EADrBsI,EACqBtI,QAOa,MAAjBA,EAAMka,OARvB,CAAA3F,EAAA3D,KAAA,QASQ,OATR2D,EAAA3D,KAAA,EASc0E,aAAIC,EAAarN,QAAQlI,MAAM,iBAAkB,+HAT/D,WAYOA,EAZP,CAAAuU,EAAA3D,KAAA,SAaQ,OAbR2D,EAAA3D,KAAA,GAac0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiBA,EAAMuE,KAAKvE,MAAM2D,UAb/E,YAgBOzB,EAhBP,CAAAqS,EAAA3D,KAAA,SAiBQ,OAjBR2D,EAAA3D,KAAA,GAiBc0E,aAAIC,EAAarN,QAAQ3C,KAAK,qBAAuBpB,EAAOrC,QAAQuJ,MAAO,KAjBzF,QAkBQ,OAlBRkJ,EAAA3D,KAAA,GAkBc0E,aAAIb,EAAa0hB,0BAA0BhyB,EAAOrC,QAAQ+kB,UAlBxE,QAmBQ,OAnBRtS,EAAA3D,KAAA,GAmBc0E,aAAIb,EAAawhB,8BAA8B9xB,EAAOrC,QAAQ+kB,UAnB5E,yBAAAtS,EAAAI,SAAAiiF,GAAAlyF,MAuBO,SAAUiyF,KAAV,IAAAxyF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAClCpB,EAAY4a,cAHjB,OAMC,OAJMlrB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK4gF,GAAcvyF,GAN1B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAkiF,GAAAnyF,MCvBA,IAAMoyF,GAAyB,SAAC5hB,GAAD,OAAwB/wE,kBAAO0wE,GAA0B,CAACK,eACnF6hB,GAAkB,SAACvvE,GAAD,OAAmBrjB,kBAAO2wE,GAAmB,CAACttD,wBCKnE4uE,iBAIOY,IAJjB,SAAUZ,GAAYvvE,EAA6BkT,GAAnD,OAAA1lB,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU0E,aAAIb,EAAemmB,wBAAwB/T,EAASkT,EAAM2K,UAAUpa,aAD9E,wBAAA/V,EAAAI,SAAAsiF,GAAAvyF,MAIO,SAAUsyF,KAAV,IAAAE,EAAAC,EAAAC,EAAA5Y,EAAAr6E,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAECsmF,GAAmB,EAGnB1Y,GAAc,EALf,OAQkD,OARlDnpE,EAAAzE,KAAA,EAQwDiF,aAAK,CACxDpB,EAAYga,WACZha,EAAY4d,uCACZ5d,EAAYyd,eACZzd,EAAY2d,kBACZilE,GAAmBxiB,2BAbxB,UAQO1wE,EARPkR,EAAAX,MAgBI8pE,GAAer6E,EAAOqD,OAAS6vF,GAAmBxiB,yBAhBtD,CAAAx/D,EAAAzE,KAAA,aAiBKsmF,EAAmB/yF,EAAOrC,QAAQozE,aAEViiB,IAAgBC,EAnB7C,CAAA/hF,EAAAzE,KAAA,SAoBS,OApBTyE,EAAAzE,KAAA,GAoBekF,aAAKsgF,GAAagB,EAAeD,GApBhD,QAAA9hF,EAAAI,GAwBStR,EAAOqD,KAxBhB6N,EAAAzE,KAAAyE,EAAAI,KAyBUhB,EAAYga,WAzBtB,GAAApZ,EAAAI,KA0BUhB,EAAY4d,uCA1BtB,GAAAhd,EAAAI,KA2BUhB,EAAYyd,eA3BtB,GAAA7c,EAAAI,KA4BUhB,EAAY2d,kBA5BtB,uBA6BYosD,GAAe4Y,IAAkBjzF,EAAOrC,QAAQglB,MAAM7iB,MACrDu6E,GAAc,GAGlB2Y,EAAchzF,EAAOrC,QAAQi4B,MAC7Bq9D,EAAgBjzF,EAAOrC,QAAQglB,MAAM7iB,IAEjCizF,EApCb,CAAA7hF,EAAAzE,KAAA,SAsCa,OADA4tE,GAAc,EArC3BnpE,EAAAzE,KAAA,GAsCmBkF,aAAKsgF,GAAagB,EAAeD,GAtCpD,eAAA9hF,EAAAU,OAAA,oBAAAV,EAAAzE,KAAA,iCAAAyE,EAAAV,SAAA2iF,GAAA5yF,uBC0GU6yF,IAzGbhqD,IAAuB,EACvBriC,GAAwB,KACxBE,GAA0B,KAC1BosF,GAA8B,KAC9BC,GAAiF,GACjFC,GAAkD,KAEhDC,GAAoBtjF,GAAAhN,EAAAyW,KAAG,SAAvB65E,EAAkCxzF,GAAX,IAAAuxC,EAAA5uB,EAAA8wE,EAAAC,EAAApoF,EAAAqoF,EAAAxvF,EAAApG,EAAAmvF,EAAAt8E,EAAAC,EAAAC,EAAAC,EAAAC,EAAA41B,EAAA,OAAA12B,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC6B,OAD7B2D,EAAA3D,KAAA,EACmC0M,aAAO40B,GAAgBC,eAAeC,iBADzE,OACnBsD,EADmBnhC,EAAAG,KAAAH,EAAAkB,GAGjBtR,EAAOqD,KAHU+M,EAAA3D,KAAA2D,EAAAkB,KAIhBhB,EAAYid,oBAJI,EAAAnd,EAAAkB,KAgBhBhB,EAAY6c,WAhBI,GAAA/c,EAAAkB,KA8BhBhB,EAAY8c,2BA9BI,GAAAhd,EAAAkB,KAwChBhB,EAAY+c,qBAxCI,GAAAjd,EAAAkB,KAgDhBy8B,EAAcx0B,KAAKovB,uBAhDH,GAAAv4B,EAAAkB,KAuDhBy8B,EAAcx0B,KAAKkvB,iBAvDH,wBAKd8I,EAAarD,cALC,CAAA99B,EAAA3D,KAAA,QAMb,OANa2D,EAAA3D,KAAA,EAMP0E,aAAI48B,EAAcz9B,OAAOg5B,cAC3BtpC,EAAOrC,QAAQ24B,aAAalvB,KAC5BpH,EAAOrC,QAAQ24B,aAAavc,OAC5BzJ,EAAYkd,mCATH,cAYd4b,IACCkqD,GAAqBtwF,KAAKhD,GAbboQ,EAAAwB,OAAA,qBAqBjB,OAJA7K,GAAS/G,EAAOrC,QAAQoJ,OACxBE,GAAWjH,EAAOrC,QAAQsJ,SAC1BosF,GAAerzF,EAAOrC,QAAQ+kB,QAnBbtS,EAAA3D,KAAA,GAqBX0E,aAAI48B,EAAcz9B,OAAO04B,iBArBd,QAsBjB,OAtBiB54B,EAAA3D,KAAA,GAsBXiF,aAAK,CAACq8B,EAAcx0B,KAAKkvB,mBAtBd,QAuBjB,OAvBiBr4B,EAAA3D,KAAA,GAuBX0E,aAAI48B,EAAcz9B,OAAOq5B,sBAAsB,eAAgBr5B,EAAY+c,uBAvBhE,QAwBjB,OAxBiBjd,EAAA3D,KAAA,GAwBX0E,aAAI48B,EAAcz9B,OAAOg5B,cAC3B,cACA,CAAC5mB,QAAS1iB,EAAOrC,QAAQ+kB,QAAS3b,OAAQ/G,EAAOrC,QAAQoJ,OAAQE,SAAUjH,EAAOrC,QAAQsJ,UAC1FqJ,EAAYgd,sBA3BC,eAAAld,EAAAwB,OAAA,qBAsCjB,OAPA7K,GAAS,KACTE,GAAW,KACXosF,GAAe,KACfjqD,IAAuB,EACvBkqD,GAAuB,GACvBC,GAA+B,KApCdnjF,EAAA3D,KAAA,GAsCX0E,aAAI48B,EAAcz9B,OAAOw5B,6BAA6B,iBAtC3C,eAAA15B,EAAAwB,OAAA,qBAyCH,OAzCGxB,EAAA3D,KAAA,GAyCG0M,aAAOi6B,GAAczC,sBAAsB3wC,EAAOrC,QAAQib,MAAM+J,QAzCnE,WAyCXA,EAzCWvS,EAAAG,KA0CXwmB,EAAqB6mD,EAAU7mD,mBAAmB/2B,EAAOrC,QAAQib,QAEnE+J,IAASoU,EAAmBoP,iBAAiB+2C,YAAYv6D,EAAM6N,SA5ClD,CAAApgB,EAAA3D,KAAA,SA6Cb,OA7Ca2D,EAAA3D,KAAA,GA6CP0E,aAAIb,EAAe+lB,oBAAoBU,IA7ChC,eAAA3mB,EAAAwB,OAAA,wBAiDjBw3B,IAAuB,GACpBiqD,GAlDc,CAAAjjF,EAAA3D,KAAA,SAmDQ,OAnDR2D,EAAA3D,KAAA,GAmDc0M,aAAOi6B,GAAczC,sBAAsB0iD,KAnDzD,QAmDPK,EAnDOtjF,EAAAG,KAoDbgjF,GAA+BG,EAAaljE,QApD/B,eAAApgB,EAAAwB,OAAA,yBAwDdw3B,KAAwBiqD,GAxDV,CAAAjjF,EAAA3D,KAAA,SA2Db,OAFA28B,IAAuB,EAzDVh5B,EAAA3D,KAAA,GA2DP0E,aAAI48B,EAAcz9B,OAAOq5B,sBAAsB,eAAgBr5B,EAAY+c,uBA3DpE,QA4Db,OA5Dajd,EAAA3D,KAAA,GA4DP0E,aAAI48B,EAAcz9B,OAAOg5B,cAC3B,cACA,CAAC5mB,QAAS2wE,GAActsF,UAAQE,aAChCqJ,EAAYgd,sBA/DH,QAAAhiB,EAAA,eAAAA,EAkEwBgoF,GAlExB/xF,QAAA,CAAA6O,EAAA3D,KAAA,SAmET,OADMknF,EAA2BL,GAlExBhoF,GAAA8E,EAAA3D,KAAA,GAmEH0E,aAAI48B,EAAcz9B,OAAOg5B,cAC3BqqD,EAAwBh2F,QAAQ24B,aAAalvB,KAC7CusF,EAAwBh2F,QAAQ24B,aAAavc,OAC7CzJ,EAAYkd,mCAtEP,QAwET,OAxESpd,EAAA3D,KAAA,GAwEH4/B,aAAM,IAxEH,QAAA/gC,IAAA8E,EAAA3D,KAAA,oBA0Eb6mF,GAAuB,IAEpBC,GA5EU,CAAAnjF,EAAA3D,KAAA,SA8E+B,OA9E/B2D,EAAA3D,KAAA,GA8EqC9L,aAAK2P,EAAWshB,kBAAmByhE,GAAcE,IA9EtF,WAAApvF,EAAAiM,EAAAG,KA8EFxS,EA9EEoG,EA8EFpG,SA9EEoG,EA8EQtI,OAEdkC,EAhFM,CAAAqS,EAAA3D,KAAA,SAiFCygF,EAAUj+E,eAAIlR,EAASqC,KAAa,SAACA,GAAD,OAAeqwF,GAAoBrwF,KAjFxEwQ,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAAqQ,EAAAC,KAAA,GAAAU,EAmFcm8E,EAnFd3gF,OAAAC,YAAA,WAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,KAAA,CAAA0D,EAAA3D,KAAA,SAoFD,OADMm6B,EAnFL51B,EAAAjQ,MAAAqP,EAAA3D,KAAA,GAoFK0E,aAAIb,EAAe+lB,oBAAoBuQ,IApF5C,QAAAh2B,GAAA,EAAAR,EAAA3D,KAAA,iBAAA2D,EAAA3D,KAAA,iBAAA2D,EAAAC,KAAA,GAAAD,EAAAm8B,GAAAn8B,EAAA,UAAAS,GAAA,EAAAC,EAAAV,EAAAm8B,GAAA,QAAAn8B,EAAAC,KAAA,GAAAD,EAAAC,KAAA,GAAAO,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAAsD,EAAAC,KAAA,IAAAQ,EAAA,CAAAT,EAAA3D,KAAA,eAAAqE,EAAA,eAAAV,EAAAmB,OAAA,mBAAAnB,EAAAmB,OAAA,YAwFbgiF,GAA+B,KAxFlB,wBAAAnjF,EAAAwB,OAAA,uCAAAxB,EAAAI,SAAvBgjF,EAAuBjzF,KAAA,+BAkGtB,SAAU6yF,KAAV,IAAApzF,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAIgC,OAJhCyE,EAAAzE,KAAA,EAIsCiF,aAAK,CACtCpB,EAAYid,oBACZjd,EAAY6c,WACZ7c,EAAY8c,2BACZ9c,EAAY+c,qBACZ0gB,EAAcx0B,KAAKovB,uBACnBoF,EAAcx0B,KAAKkvB,mBAVxB,OAaC,OATMzoC,EAJPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAaOkF,aAAK6hF,GAAsBxzF,GAblC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAojF,GAAArzF,uBChHGszF,iBA+BAzmC,iBAmCO0mC,IAlEjB,SAAUD,GAAwB56E,GAAlC,IAAAkgB,EAAA46D,EAAArxE,EAAA6Q,EAAAC,EAAArvB,EAAApG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACyB,OADzB2D,EAAA3D,KAAA,EAC+B0M,aAAOuvC,GAA2BZ,GAAsB7uC,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ41B,YADhI,OAa4C,OAZpC4F,EADR/oB,EAAAG,KAAAwjF,EAG0C96E,EAAQtb,QAAvC+kB,EAHXqxE,EAGWrxE,QAAS6Q,EAHpBwgE,EAGoBxgE,SAAUC,EAH9BugE,EAG8BvgE,SAErB2F,IACDA,EAAiB8uB,GACbvlC,EACA6Q,EACAC,IATZpjB,EAAA3D,KAAA,EAakD9L,aAAK2P,EAAO4I,IAAIoa,kBAC1D6F,EAAezW,QACfyW,EAAe5F,SACfC,GAhBR,UAAArvB,EAAAiM,EAAAG,KAaWxS,EAbXoG,EAaWpG,UAbXoG,EAaqBtI,MAbrB,CAAAuU,EAAA3D,KAAA,SAoBQ,OApBR2D,EAAA3D,KAAA,GAoBc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,mCApB9D,YAsBQkC,EAtBR,CAAAqS,EAAA3D,KAAA,YAuBYwM,EAAQtb,QAAQg5B,oBAvB5B,CAAAvmB,EAAA3D,KAAA,SAwBY,OAxBZ2D,EAAA3D,KAAA,GAwBkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,sBAAuB,uBAAyBmyB,EAAW,SAxB3G,QA2BQ,OA3BRnjB,EAAA3D,KAAA,GA2Bc0E,aAAIb,EAAOtM,MAAMk1B,kBAAkBC,EAAe66D,YAAYxgE,KA3B5E,yBAAApjB,EAAAI,SAAAyjF,GAAA1zF,MA+BA,SAAU6sD,GAAiCn0C,GAA3C,IAAAkgB,EAAA90B,EAAAtG,EAAA,OAAAmS,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACyB,OADzByE,EAAAzE,KAAA,EAC+B0M,aAAOuvC,GAA2BZ,GAAsB7uC,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ41B,YADhI,OAW4C,OAVpC4F,EADRjoB,EAAAX,QAIQ4oB,EAAiB8uB,GACbhvC,EAAQtb,QAAQ+kB,QAChBzJ,EAAQtb,QAAQ41B,SAChB,KAPZriB,EAAAzE,KAAA,EAWkD9L,aAAK2P,EAAO4I,IAAIua,2BAC1D0F,EAAezW,QACfyW,EAAe5F,SACfta,EAAQtb,QAAQ+1B,aAChBza,EAAQtb,QAAQg2B,qBAAkB5zB,GAf1C,UAAAsE,EAAA6M,EAAAX,KAWWxS,EAXXsG,EAWWtG,UAXXsG,EAWqBxI,MAXrB,CAAAqV,EAAAzE,KAAA,SAmBQ,OAnBRyE,EAAAzE,KAAA,GAmBc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,6CAnB9D,YAqBQkC,EArBR,CAAAmT,EAAAzE,KAAA,YAsBYwM,EAAQtb,QAAQg5B,oBAtB5B,CAAAzlB,EAAAzE,KAAA,SAuBY,OAvBZyE,EAAAzE,KAAA,GAuBkB0E,aAAIC,EAAarN,QAAQ3C,KAAK,iCAAkC,8BAAgC+3B,EAAe5F,SAAW,aAvB5I,QA+BQ,OANA4F,EAAiBA,EAAe+zB,gBAAgBj0C,EAAQtb,QAAQ+1B,cAE5Dza,EAAQtb,QAAQg2B,iBAChBwF,EAAiBA,EAAe44B,kBAAkB94C,EAAQtb,QAAQg2B,iBA5B9EziB,EAAAzE,KAAA,GA+Bc0E,aAAIb,EAAOtM,MAAMo1B,4BAA4BD,IA/B3D,yBAAAjoB,EAAAV,SAAA0jF,GAAA3zF,MAmCO,SAAUuzF,KAAV,IAAA76E,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE0B,OAF1BgF,EAAAhF,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKmT,oBACZpc,EAAOiJ,KAAKoT,gCAJjB,WAEO1T,EAFPxH,EAAAlB,MAOalN,OAASiN,EAAOiJ,KAAKmT,oBAPlC,CAAAjb,EAAAhF,KAAA,QAQK,OARLgF,EAAAhF,KAAA,EAQWkF,aAAKkiF,GAAyB56E,GARzC,OAAAxH,EAAAhF,KAAA,gBAUK,OAVLgF,EAAAhF,KAAA,GAUWkF,aAAKy7C,GAAkCn0C,GAVlD,QAAAxH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAA2jF,GAAA5zF,MCpEA,ICFF6zF,GDEQn3E,GAAS,sEEsBPo3E,GAtB4B,SAACnyF,GACxC,IAAMoyF,EAAYpyF,EAAMoyF,WAAa,GADuB9wE,EAGhCC,qBAAS,GAHuBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGrDmR,EAHqDjR,EAAA,GAG7C6wE,EAH6C7wE,EAAA,GAe5D,OAVsBiR,IAAWzyB,EAAMjD,SAUnBiD,EAAMu2B,MAAMl3B,QAAU+yF,EAC/Bx1F,GAAA,cAAAA,GAAA,cAAIoD,EAAMu2B,OAEV35B,GAAA,cAAAA,GAAA,cAAIoD,EAAMu2B,MAAMo8B,MAAM,EAAGy/B,GAAa,IAAKx1F,GAAA,sBAAMG,QAXxC,SAACk9D,GACjBA,EAAIpoB,iBACD7xC,EAAMjD,SACLiD,EAAMjD,SAAS01B,GAEnB4/D,GAAW5/D,KAMuC,SCY3C6/D,GAvBW,SAACtyF,GAAoB,IAAAshB,EAEbC,qBAAS,GAFIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEpCqe,EAFoCne,EAAA,GAE3B+wE,EAF2B/wE,EAAA,GAI3C,OAAO5kB,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CAAWL,GAAK+rE,QACL5zF,IAAKoB,EAAMpB,IACX2lB,UAAU,sBACVnB,MAAO,CAACklD,aAAa,KACrBvrE,QAASiD,EAAMjD,QACf+nB,GAAI,CAACpiB,SAAU+kB,GAAsCznB,EAAMyyF,MAAMjyE,SAAU7d,OAAM,UAAAO,OAAYlD,EAAMyyF,MAAMzvF,OAAxB,YAAAE,OAAyClD,EAAM0yF,UAC9I91F,GAAA,cAACswD,GAAD,CAAU77B,SAAUrxB,EAAMyyF,MAAMphE,WAChCz0B,GAAA,cAACuS,GAAA,EAAKwT,QAAN,KACI/lB,GAAA,cAACuS,GAAA,EAAKuT,OAAN,KAAa9lB,GAAA,cAAC+1F,GAAD,CAAgBp8D,MAAOv2B,EAAMyyF,MAAMl8D,MAAO67D,UAAW,GAAIr1F,QAAS,SAAA61F,GAAC,OAAIL,EAAWK,OAC/Fh2F,GAAA,cAACuS,GAAA,EAAK0jF,YAAN,QAAA3vF,OACQlD,EAAMyyF,MAAM30F,OADpB,QAAAoF,OACiClD,EAAMyyF,MAAM1tF,WAC1BnI,GAAA,cAACuS,GAAA,EAAK0jF,YAAN,KACnBj2F,GAAA,sBAAM2nB,UAAU,OAAOnB,MAAO,CAACuvB,MAAM,OAAQC,SAAS,SAAY,IAAI33C,KAAK+E,EAAMyyF,MAAM7uD,MAAOkP,oBAGjGnT,GAAW/iC,GAAA,cAACuS,GAAA,EAAKA,KAAN,CAAWiU,MAAO,CAACE,QAAQ,MAAM1mB,GAAA,cAACuS,GAAA,EAAK2X,KAAN,KAAWlqB,GAAA,cAACuS,GAAA,EAAK0jF,YAAN,KAAoB7yF,EAAMyyF,MAAMl8D,qBCTjFu8D,GAhBW,SAAC9yF,GAAoB,IAAAshB,EAEfC,oBAASvhB,EAAM+yF,oBAAqB,GAFrBvxE,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEpCmR,EAFoCjR,EAAA,GAE5B6wE,EAF4B7wE,EAAA,GAM3C,OAAO5kB,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACo2F,GAAA,EAAD,CAAgB9tE,QAASllB,EAAM3C,MAAOyjC,MAAO9gC,EAAM8gC,MAAOrO,OAAQA,EAAQ11B,QAH1D,kBAAMs1F,GAAW5/D,MAIjC71B,GAAA,cAACq2F,GAAA,EAAD,CAAkBxgE,OAAQA,GACtB71B,GAAA,cAACuS,GAAA,EAAD,CAAM20C,WAAW,GACX9jD,EAAM2yB,YCmHlBugE,GAAc,SAACxxF,EAAoB8e,EAAkB6N,GAEnD3sB,EADD2sB,EACUyE,GAA0BtS,EAAS6N,GAEnC0E,GAA2BvS,KAqG7Bjf,kBAAiB4jB,aA3FX,SAACnlB,GAElB,IAAMmzF,EAAuBC,mBAAQ,kBAAM3kD,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAAM,IACpFy1F,EAA8BD,mBAAQ,kBAAMzjD,GAA6B3vC,EAAMqI,MAAMkmC,OAAO3wC,MAAM,IAHzD0jB,EAInBC,oBAAS,GAJUC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAIxCoxE,EAJwClxE,EAAA,GAIhC8xE,EAJgC9xE,EAAA,GAMzCf,EAAQmF,uBAAYutE,GACpB3rE,EAAwB5B,uBAAYytE,GACpC3xF,EAAW0jB,yBACX+M,EAAY1R,GAASA,EAAMuX,oBAAsB,EAEjDu7D,EAAc,WAChBD,EAAUZ,EAAS,IAGjBc,EAAkCJ,mBAAQ,WAE5C,IAAMptE,EAAMytE,OACNC,EAtGgC,SAAC1tE,GAC3C,IAAM2tE,EAAcF,KAAOztE,GAAK4tE,QAAQ,WAClCC,EAAeJ,KAAOztE,GAAK4tE,QAAQ,SACnCE,EAAmBL,KAAOI,GAAcE,SAAS,EAAG,QAAQH,QAAQ,SAG1E,MAAO,CAACI,MAFMP,KAAOztE,GAAK4tE,QAAQ,OAEnBD,cAAaE,eAAcC,oBAgGdG,CAA+BjuE,GACjDkuE,EA7HH,CACHF,MAAO,GACPG,UAAW,GACXC,WAAY,GACZC,aAAc,GACdC,YAAa,GACbC,YAAa,GACbC,WAAY,GACZC,SAAU,GACVC,YAAa,GACbC,cAAe,GACfC,aAAc,GACdC,UAAW,GACXC,MAAO,IAyHP,OAPAttE,EAAQA,QAAQ5mB,QAAQ,SAAC6xF,EAAO7zF,GAC5B,IAAMm2F,EAAYtB,KAAOhB,EAAM7uD,KAAM6vD,KAAOuB,UACtCC,EAhHO,SAACxC,EAAkC7zF,EAAa8zF,EAAgBa,GAErF,OAAQ32F,GAAA,cAACs4F,GAAD,CAAmBzC,MAAOA,EAAO7zF,IAAKA,EAAK8zF,OAAQA,EAAQ31F,QAASw2F,IA8G7C4B,CAAiB1C,EAAO7zF,EAAM,EAAG8zF,EAAQa,GAC1D6B,EAnG2B,SACzCL,EACA/uE,EAFyC/jB,GAIhB,IADxB+xF,EACwB/xF,EADxB+xF,MAAOL,EACiB1xF,EADjB0xF,YAAaE,EACI5xF,EADJ4xF,aAAcC,EACV7xF,EADU6xF,iBAGnC,GAAGiB,EAAUM,SAASvB,EAAkB,SACpC,MAAO,QAGX,GAAGiB,EAAUM,SAASxB,GAClB,MAAO,YAGX,GAAGkB,EAAUM,SAAS1B,GAAc,CAChC,IAAM2B,EAAaP,EAAUQ,KAAK5B,EAAa,SAE/C,OAAkB,IAAf2B,EACQ,YAGQ,IAAhBA,EACQ,eAGQ,IAAhBA,EACQ,gBAGJ,eAGX,GAAGP,EAAUM,SAASrB,GAAQ,CAC1B,IAAMwB,EAAYT,EAAUQ,KAAKvB,EAAO,QAExC,OAAiB,IAAdwB,EACQ,aAGO,IAAfA,EACQ,cAGO,IAAfA,EACQ,gBAGO,IAAfA,EACQ,eAGO,IAAfA,EACQ,cAGJ,aAGX,MAAO,QAyCkBC,CAA8BV,EAAW/uE,EAAK0tE,GAC/DQ,EAAekB,GAAUt0F,KAAKm0F,KAG3Bf,GACR,CAAC1sE,EAASkrE,IAcb11F,qBAAU,WACHwqB,EAAQA,QAAQhP,QAAU,KAAOgP,EAAQ0L,SAAW1L,EAAQioB,uBAC3DyjD,GAAYxxF,EAAU1B,EAAMqI,MAAMkmC,OAAO3wC,IAAK4pB,EAAQgoB,qBAE3D,CAAChoB,IAEJ,IAQIkuE,EAREC,EAAqBvC,mBAAQ,WAC/B,OAAO,WACH1xF,EAASwwB,GAAmBlyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,MAEzD,CAACoC,EAAMqI,MAAMkmC,OAAO3wC,MAEjBg4F,EAAqB,GACvBp9E,EAAQ,EAEZ,IAAIk9E,KAASlC,EACLA,EAAWr0D,eAAeu2D,IACvBlC,EAAWkC,GAAOr2F,OAAS,IAC1Bu2F,EAAmB90F,KAAKlE,GAAA,cAACi5F,GAAD,CAAmBj3F,IAAK82F,EAAOr4F,MAAO2C,EAAMkB,EAAN,gBAAAgC,OAAwBwyF,IAAU50D,MAAOtoB,EAAOma,QAAS6gE,EAAWkC,GAAQ3C,kBAA6B,IAAVv6E,KAC7JA,KAcZ,OARG2Z,GAAW3K,EAAQ0L,SAClB0iE,EAAmB90F,KAAKlE,GAAA,cAACq2F,GAAA,EAAD,CAAkBxgE,QAAQ,GAC9C71B,GAAA,cAACuS,GAAA,EAAD,KACIvS,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CAAWloB,IAAI,cAAcwkB,MAAO,CAACi0B,WAAY,SAASz6C,GAAA,cAACyyD,GAAA,EAAD,CAAQ58B,QAAQ,EAAMqjE,OAAO,iBAK5Fl5F,GAAA,cAACm5F,GAAA,EAAWtiD,MAAZ,CAAkBuiD,UAAU,cAAc7jE,GAAWv1B,GAAA,qBAAKwmB,MAAO,CAAC5lB,SAAU,WAAY65C,WAAY,OAAQN,IAAK,MAAOk/C,MAAO,MAAO70E,OAAQ,OAAQ4nD,SAAU,SAAUha,WAAW,mBACpLpyD,GAAA,cAAC42C,GAAA,EAAD,CAAMpwB,MAAO,CAAChC,OAAQ,OAAQknD,aAAa,MAC3C1rE,GAAA,cAAC42C,GAAA,EAAK7wB,QAAN,KACE/lB,GAAA,cAAC42C,GAAA,EAAK9wB,OAAN,KAAa9lB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQqf,UAAU,gBAAgBxnB,QAAS44F,EAAoBvyE,MAAO,CAAC6D,OAAQ,aAAvG,cAEFrqB,GAAA,cAAC42C,GAAA,EAAK7wB,QAAN,CAAcuzE,SAlDD,SAACx9F,GAClB,IAAM09B,EAAU19B,EAAE8kC,OAEfpH,aAAmB+/D,gBACd//D,EAAQggE,aAAehgE,EAAQigE,YAAcjgE,EAAQ0uD,eACjDt9D,EAAQ0L,SAAW1L,EAAQioB,uBAC3ByjD,GAAYxxF,EAAU1B,EAAMqI,MAAMkmC,OAAO3wC,IAAK4pB,EAAQgoB,qBA4CxBpsB,MAAO,CAAC5lB,SAAU,WAAY4jB,OAAQ,OAAQk1E,UAAW,WAC3F15F,GAAA,cAAC25F,GAAA,EAAD,KACMX,UCxIPr0F,kBAvES,SAACvB,GACrB,IAAMmQ,EAAenQ,EAAMqI,MAAMkmC,OAAOp7B,WAElC4I,EAAsBxD,KAEtBoN,EAAcC,uBAAY7J,GALqBuF,EAMjBC,qBAAS,GANQC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAM9Ck1E,EAN8Ch1E,EAAA,GAMlCi1E,EANkCj1E,EAAA,GAAAG,EAObJ,oBAASkG,IAPI7F,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAO9C+0E,EAP8C90E,EAAA,GAOhC+0E,EAPgC/0E,EAAA,GAS/ClgB,EAAW0jB,yBAuDjB,OArDApoB,qBAAU,WACH2oB,EAAYhY,UACXoiB,GAAuB5f,GACtBvU,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SACJ,GADyBoG,EAAXtI,MAIV,OAFA+H,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,4CAChD88F,GAAc,GAIlB,GAAG56F,EAAU,CACT,IAAMqyB,EAAuBryB,EAASqC,KAAKgH,KACrCsb,EAAmB3kB,EAASqC,KAAKsiB,QACjC7b,EAAwC9I,EAASqC,KAAKyG,eAExDiyF,EAAU,EA8Bd5nE,GAAmB7e,GACdvU,KA7BqB,SAApBi7F,EAAqBC,GACvB,GAAGA,EAAYn9F,MAEX,OAAGi9F,EAAU,GACTA,SACAzzF,OAAOs8B,WAAW,WACdzQ,GAAmB7e,GAAcvU,KAAKi7F,IACvC,OAIPn1F,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,4CAChD88F,GAAc,IAIf9xF,GACCjD,EAAS4W,EAAkBzW,QAAQ6C,yBAAyBC,IAGhEjD,EAASuhD,EAAOphD,QAAQ3C,KACpBc,EAAMkB,EAAE,2BACRlB,EAAMkB,EAAE,4BAA6B,CAACgE,KAAMgpB,MAEhDyoE,EAAgBlvE,GAAsCjH,IACtDi2E,GAAc,SAQ/B,CAAC9wE,EAAYhY,WAGb6oF,EACQ55F,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI4xE,IAGlB95F,GAAA,cAACuyD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,kCCAlC9vC,kBApEO,SAACvB,GACpB,IAAMmQ,EAAenQ,EAAMqI,MAAMkmC,OAAOp7B,WAClC4I,EAAsBxD,KAEtBoN,EAAcC,uBAAY7J,GAJmBuF,EAKfC,qBAAS,GALMC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAK5Ck1E,EAL4Ch1E,EAAA,GAKhCi1E,EALgCj1E,EAAA,GAO7C9f,EAAW0jB,yBAsDjB,OApDApoB,qBAAU,WACH2oB,EAAYhY,UACXmrC,GAAsB3oC,GACrBvU,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SACJ,GADyBoG,EAAXtI,MAIV,OAFA+H,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,2CAChD88F,GAAc,GAIlB,GAAG56F,EAAU,CACT,IAAMm8C,EAAqBn8C,EAASqC,KAAKgH,KACnCP,EAAiC9I,EAASqC,KAAKyG,gBAAkB,KAEnEiyF,EAAU,EA+Bd/9C,GAAkB1oC,GACbvU,KA9BqB,SAApBi7F,EAAqBC,GACvB,GAAGA,EAAYn9F,MAEX,OAAGi9F,EAAU,GACTA,SACAzzF,OAAOs8B,WAAW,WACdoZ,GAAkB1oC,GAAcvU,KAAKi7F,IACtC,OAIPn1F,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,2CAChD88F,GAAc,IAIlB/0F,EAASuhD,EAAOphD,QAAQ3C,KACpBc,EAAMkB,EAAE,0BACRlB,EAAMkB,EAAE,2BAA4B,CAAC45C,KAAM9C,MAG5CrzC,GACCjD,EAASukC,EAAYpkC,QAAQ6C,yBAAyBC,IAG1DjD,EAAS0M,EAAOuJ,MAAM2X,mBACtBmnE,GAAc,SAQ/B,CAAC9wE,EAAYhY,WAEb6oF,EACQ55F,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI2C,KAGlB7qB,GAAA,cAACuyD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,iCCvBnC9vC,kBAjDa,SAACvB,GAEzB,IAAMg3F,EAAapxE,uBAAYqxE,GAAqBhkD,kBAAkBhD,eAAc,IAFvB3uB,EAGnBC,oBAAS,IAHUC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGtDm8C,EAHsDj8C,EAAA,GAGvCk8C,EAHuCl8C,EAAA,GAIvDmE,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAEhE8kC,IAAU5/B,GAAeA,EAAa4/B,QAAQ7sB,EAAY/nB,KAE1DkgE,EAAek5B,EAAWr2F,OAAO,SAAA8f,GAAK,OAAKA,EAAM7N,aAAc4/B,GAAW/xB,EAAM6X,UAAY7X,EAAMgY,cAAc7c,SAAS5b,EAAMovB,UAASriB,IAAI,SAAA0T,GAAK,MAAK,CACxJ7hB,IAAK6hB,EAAM7iB,IACXiB,MAAO4hB,EAAM7iB,IACbmpB,KAAMtG,EAAMvb,QACZmR,UAWJ,OACIzZ,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,QAASgwC,KAAK,QACnEz0C,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,2BACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,sBAAM4nB,SAXG,SAAC9rB,GAClBA,EAAEm5C,iBAEF7xC,EAAMwkB,SAASi5C,GACfC,EAAiB,MAQL9gE,GAAA,cAACgqB,GAAA,EAAD,CACIhC,YAAa5kB,EAAMkB,EAAE,0BACrBkiD,OAAO,EACPzgD,QAAQ,EACRmhD,WAAW,EACXC,QAAS+Z,EACTn6C,SApBC,SAACjrB,EAAyBsrD,GAA1B,OAAoD0Z,EAAiB1Z,EAAOnlD,QAqB7EA,MAAO4+D,IAEX7gE,GAAA,qBAAKwmB,MAAO,CAACmnC,UAAW,SACpB3tD,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASmwC,SAA4B,KAAlBmsB,GAC1Cz9D,EAAMkB,EAAE,sCCgCtBK,kBAvEI,SAACvB,GAA2B,IAAAshB,EACHC,qBAAS,GADNC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACpC41E,EADoC11E,EAAA,GACtB21E,EADsB31E,EAAA,GAAAG,EAEiBJ,qBAAS,GAF1BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEpCy1E,EAFoCx1E,EAAA,GAEZy1E,EAFYz1E,EAAA,GAAAG,EAGGR,qBAAS,GAHZS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGpCu1E,EAHoCt1E,EAAA,GAGnBu1E,EAHmBv1E,EAAA,GAIrCtgB,EAAW0jB,yBAuBjB,OAAGkyE,EACQ16F,GAAA,cAACm6F,GAAA,EAAD,CAAUj2F,MAAM,EAAMgkB,GAAI0yE,GAAqCx3F,EAAMygB,MAAM7iB,OAG/EhB,GAAA,cAAAA,GAAA,cACHA,GAAA,cAAC61C,GAAA,EAAD,CACI3+B,KAAMojF,EACNO,OA5BU,WACdN,GAAgB,IA4BZ91F,QAzBW,WACf81F,GAAgB,IAyBZxqD,GAAG,QACHnvC,SAAS,gBACT8zC,SAAUtxC,EAAM03F,SAChBxyE,QAAStoB,GAAA,cAACiqB,GAAA,EAAD,CAAMo+B,WAAW,EAAM0yC,UAAU,EAAMC,SAAS,GACrDh7F,GAAA,cAACiqB,GAAA,EAAKC,KAAN,CACI5B,QAASllB,EAAMkB,EAAE,YACjBnE,QAAS,kBAAMw6F,GAAmB,MAEtC36F,GAAA,cAACiqB,GAAA,EAAKC,KAAN,CACI5B,QAASllB,EAAMkB,EAAE,mBACjBnE,QAAS,WACLo6F,GAAgB,GAChBE,GAA0B,OAItC3kD,QAAS91C,GAAA,qBAAK2nB,UAAU,+BAA+B3lB,IAAKoB,EAAMygB,MAAM7iB,IAAKb,QA/B5D,WAClBiD,EAAM03F,UACLH,GAAmB,KA8Bf36F,GAAA,yBAAOoD,EAAMygB,MAAMvb,SAG3BtI,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAMsjF,EACNnyE,OAAQjlB,EAAMkB,EAAE,wCAChBgkB,QAASllB,EAAMkB,EACX,sCACA,CAAE22F,WAAY73F,EAAMygB,MAAMvb,OAE9B4yF,cAAe93F,EAAMkB,EAAE,yCACvB62F,aAAcn7F,GAAA,cAAConB,GAAA,EAAD,CAAQkB,QAASllB,EAAMkB,EAAE,mBAAoBqjB,UAAU,mBACrE6wB,SAAU,kBAAMiiD,GAA0B,IAC1C1hD,UApDoB,WACpB31C,EAAM03F,UACNh2F,EAAS0M,GAAeuqC,6BAA6B34C,EAAMygB,MAAM7iB,IAAKoC,EAAM86C,KAAKl9C,MAErFy5F,GAA0B,SCwEnBW,GAzFU,SAACh4F,GAAiC,IAAAshB,EACrBC,oBAASvhB,EAAMwzB,QAAS,GADHhS,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAChD22E,EADgDz2E,EAAA,GACrC02E,EADqC12E,EAAA,GAAAG,EAEvBJ,qBAAS,GAFcK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEhDw2E,EAFgDv2E,EAAA,GAEtCw2E,EAFsCx2E,EAAA,GAAAG,EAG7BR,oBAASvhB,EAAM+mB,MAHc/E,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGhDljB,EAHgDmjB,EAAA,GAGzComC,EAHyCpmC,EAAA,GAIjDq2E,EAAUtuC,kBAAc,MAoCxBuuC,EAAa,WACZt4F,EAAMuhE,UAAsB,KAAV1iE,GACjBu5F,GAAY,GACZj1F,OAAOs8B,WAAW,WACX44D,GAAWA,EAAQruC,SAClBquC,EAAQruC,QAAQx2B,SAErB,OAEA30B,IAAUmB,EAAM+mB,MACf/mB,EAAMu4F,cAAc15F,GAExBq5F,GAAa,KAIfM,EAAwB,KAAV35F,EAAeA,EAAMQ,OAAUW,EAAM4kB,YAAa5kB,EAAM4kB,YAAYvlB,OAAS,EAC3FikB,EAAUtjB,EAAMsjB,SAAW,EAC7BnC,EAASnhB,EAAMy4F,SAAWD,EAAcl1E,EACzCtjB,EAAM04F,UAAYv3E,EAAQnhB,EAAM04F,WAC/Bv3E,EAAQnhB,EAAM04F,UAGlB,IAAIxvB,EAASlpE,EAAMkpE,QAAU,oBAE1BivB,IACCjvB,EAAS,qBAGb,IAAMniD,EAAsB,KAAf/mB,EAAM+mB,KAAa/mB,EAAM4kB,aAAe,GAAK5kB,EAAM+mB,KAE1D4xE,EAAYV,IAAcj4F,EAAMsxC,SAEtC,OAAO10C,GAAA,cAAAA,GAAA,cACF+7F,GAAa/7F,GAAA,cAACk4C,GAAA,EAAD,CACM8jD,aAAa,EACbj/F,MAAOw+F,EACPt5F,MAAOA,EACPmoD,IAAKqxC,EACLQ,OAAQP,EACR30E,SAAU,SAACjrB,EAAGwF,GAAJ,MAhEhB,MADI46F,EAiEsC56F,EAAKW,QAhEzCs5F,GAChBC,GAAY,GAGF,KAAXU,GAAiB94F,EAAMuhE,WAAa42B,GACnCC,GAAY,QAGhBhwC,EAAS0wC,GATQ,IAACA,GAkEEnwC,UAtDF,SAACjwD,GACN,UAAVA,EAAEkG,IACD05F,IACiB,WAAV5/F,EAAEkG,MACTwpD,EAASpoD,EAAM+mB,MACfqxE,GAAY,GACZF,GAAa,GACVl4F,EAAMo1C,UACLp1C,EAAMo1C,aA+CMxwB,YAAa5kB,EAAM4kB,YACnBghB,UAAW5lC,EAAMwzB,MACjBpQ,MAAO,CAACjC,MAAOA,EAAQnhB,EAAM+4F,UAAWC,aAAc9vB,MACxEyvB,GAAa/7F,GAAA,sBAAMG,QA/ED,WACpBm7F,GAAa,GACb/0F,OAAOs8B,WAAW,WACX44D,GAAWA,EAAQruC,SAClBquC,EAAQruC,QAAQx2B,SAErB,OAyE8CzM,KCvC1CxlB,kBA7CY,SAACvB,GACxB,IAAM0N,EAAqBkY,uBAAYogB,MACjCtkC,EAAW0jB,yBAkBjB,OAAOxoB,GAAA,oBAAIwmB,MAAO,CAAC8/B,OAAO,EAAGj8B,OAAO,WAAYhuB,GAAI+G,EAAM86C,KAAKl9C,KAC3DhB,GAAA,cAACq8F,GAAD,CACIlyE,KAAM/mB,EAAM86C,KAAK51C,KACjBuzF,SA3BY,EA4BZM,UA3BW,KA4BXz1E,QA3BoB,GA4BpBi+C,UAAU,EACVg3B,cAvBkB,SAACvgD,GACpBh4C,EAAMk5F,aACLx3F,EAAS0M,GAAOvM,QAAQk2C,QAAQ/3C,EAAM86C,KAAKl9C,IAAKo6C,EAAUtqC,EAAoBA,EAAmB9P,IAAM,OACpGoC,EAAMm5F,eACLn5F,EAAMm5F,cAAcnhD,IAGxBt2C,EAAS0M,GAAOvM,QAAQo2C,WAAWj4C,EAAM86C,KAAKl9C,IAAKo6C,KAiBnDxkB,MAAOxzB,EAAMk5F,YACb9jD,SAAUp1C,EAAMo5F,aAChBx0E,YAAa5kB,EAAMkB,EAAE,yBAEzBtE,GAAA,sCACAA,GAAA,sBAAM2nB,UAAU,aAAanB,MAAO,CAAC8/B,OAAO,EAAGj8B,OAAO,YAAYrqB,GAAA,cAACq8F,GAAD,CAC9DlyE,KAAM/mB,EAAM86C,KAAKvgB,YACjBk+D,SAvCY,EAwCZM,UAvCW,KAwCXz1E,QAvCoB,GAwCpBsB,YAAa5kB,EAAMkB,EAAE,8BACrBq3F,cAxByB,SAACc,GAC9B33F,EAAS0M,GAAOvM,QAAQq2C,sBAAsBl4C,EAAM86C,KAAKl9C,IAAKy7F,KAwB1DjkD,SAAUp1C,EAAMs5F,qCCab/3F,kBAvDQ,SAACvB,GAA+B,IAAAshB,EAEnBC,oBAASxV,MAFUyV,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE5CyiB,EAF4CviB,EAAA,GAElCwgC,EAFkCxgC,EAAA,GAAAG,EAGbJ,qBAAS,GAHIK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAG5CsgC,EAH4CrgC,EAAA,GAG/BsgC,EAH+BtgC,EAAA,GAAAG,EAIfR,qBAAS,GAJMS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAI5CogC,EAJ4CngC,EAAA,GAIhCogC,EAJgCpgC,EAAA,GAAAE,EAKjBX,qBAAS,GALQY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAK5Cq3E,EAL4Cp3E,EAAA,GAKjCq3E,EALiCr3E,EAAA,GAM7CzgB,EAAW0jB,yBACXq0E,EAAmB7zE,uBAAYo5B,GAA2Bh/C,EAAMs7C,eAAe19C,MAErFZ,qBAAU,WACNsb,EAAkBtB,IAAI3R,4BAA4BrF,EAAMs7C,eAAe7sB,aAAa7yB,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SACvF,GAD4GoG,EAAXtI,MAC9FkC,EAAU,CACT,IAAM6O,EAAS4N,EAAuB3M,gCAAgC9P,EAASqC,MAE5E0K,GAAU8B,IACTs3C,EAAYt3C,EAAO7L,WAIhC,CAACmB,EAAMs7C,eAAe7sB,cAEzBzxB,qBAAU,WACHilD,GACCC,GAAe,GAGhBC,GAAcs3C,GAAoBA,EAAiB5lF,SAAWjE,GAAOwK,SACpEo/E,GAAa,IAElB,CAACC,IAYJ,OAAGF,EACQ38F,GAAA,cAAAA,GAAA,eAGJA,GAAA,cAAC88F,GAAA,EAAD,KACH98F,GAAA,cAACylD,GAAD,CAAYj+C,KAAM2/B,EAAUsN,KAAK,SACjCz0C,GAAA,sBAAMwmB,MAAO,CAACk/B,YAAa,SAAUtiD,EAAMs7C,eAAe7sB,aAC1D7xB,GAAA,cAAC2lD,GAAA,EAAD,CAAa7K,QAAQ,SACjB96C,GAAA,cAAC4lD,GAAD,CAAiBt9B,QAASllB,EAAMkB,EAAE,mBAAoBwlB,KAAK,cAAcwM,QAAS+uB,EAAallD,QAlB7E,WACtBmlD,GAAe,GACfxgD,EAAS0M,GAAekqC,qBAAqBt4C,EAAMs7C,eAAe19C,SAiB9DhB,GAAA,cAAC4lD,GAAD,CAAiBt9B,QAASllB,EAAMkB,EAAE,mBAAoBwlB,KAAK,SAASwM,QAASivB,EAAYplD,QAdvE,WACtBqlD,GAAc,GACd1gD,EAAS0M,GAAemqC,qBAAqBv4C,EAAMs7C,eAAe19C,aCnC3D+7F,GAXY,SAAC35F,GAExB,IAAM6rD,EAAQ7rD,EAAM2U,YAAY5H,IAAI,SAACoG,GACjC,OAAOvW,GAAA,cAACg9F,GAAD,CAAgBt+C,eAAgBnoC,EAAYvU,IAAKuU,EAAWvV,QAGvE,OAAOhB,GAAA,cAACuS,GAAA,EAAD,CAAc0qF,SAAS,EAAMC,SAAS,GACxCjuC,ICyIHkuC,GAAe,SAACl7F,GAClB,MAAO,6BAA6BmkD,KAAKnkD,IAG9B0C,kBAAiB4jB,aA7HF,SAACnlB,GAAsC,IAAAshB,EACvCC,oBAAS,IAD8BC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC1Dtc,EAD0Dwc,EAAA,GACnDohC,EADmDphC,EAAA,GAAAG,EAEbJ,qBAAS,GAFIK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAE1Dq4E,EAF0Dp4E,EAAA,GAEtCq4E,EAFsCr4E,EAAA,GAAAG,EAG3BR,oBAASpS,mBAHkB6S,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG1DpN,EAH0DqN,EAAA,GAG7Ck4E,EAH6Cl4E,EAAA,GAAAE,EAIzBX,qBAAS,GAJgBY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAI1Di4E,EAJ0Dh4E,EAAA,GAI5Ci4E,EAJ4Cj4E,EAAA,GAM3DwD,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChEw2C,EAAsB/0C,gBAAayD,EAAY,CAAIA,EAAauB,SAAjBjR,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAA6ByU,EAAa2B,QAAQsD,SAAU,IAC3GssC,EAAoBv+B,uBAAYlK,GAAgCwoC,IAEhExiD,EAAW0jB,yBAEjBpoB,qBAAU,WACHgD,EAAM8T,OACLmmF,GAAsB,GACtBlhD,GAAyB/4C,EAAM86C,KAAKl9C,KAAKhC,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SAAUlC,EAAWsI,EAAXtI,MAStD,GARAsgG,GAAsB,GAEnBtgG,IAECE,QAAQF,MAAMA,GACdygG,GAAgB,IAGjBv+F,EAAU,CACT,IAAM6O,EAASG,GACXhP,EAASqC,KACTqL,GAAa,CAAC+B,KAAW,uCACzBzB,GAAYuyC,KAGb3zC,GAAUiC,KAET7Q,QAAQF,MAAM,6DAA8D+Q,EAAO7L,MAAOhD,EAASqC,MACnGk8F,GAAgB,IAGjBxxF,GAAU8B,KACTwvF,EAAe/qF,gBAAKzE,EAAO7L,QAC3B6C,EAAS0M,GAAa+sC,sBAAsBhsC,gBAAKzE,EAAO7L,cAMpEmB,EAAM8T,MACNomF,EAAe/qF,oBAEpB,CAACnP,EAAM8T,OAEV,IAMMumF,KAAoBL,GAA8C,IAAxBrlF,EAAY6D,SAEtDsqC,EAAgBqB,EACjBxjD,OAAO,SAAAyD,GAAI,OAAIA,EAAKW,SAASg+C,oBAAoBliD,SAASmE,EAAM+9C,sBAAwB3+C,EAAKY,MAAM+9C,oBAAoBliD,SAASmE,EAAM+9C,uBACtIlP,OAAO,SAAAzvC,GAAI,OAAIA,EAAKW,WACpBgI,IAAI,SAAA3I,GACD,MAAO,CACHnL,GAAImL,EAAKS,OACTxH,MAAO+G,EAAKW,SACZw1B,YAAan2B,EAAKY,MAClB4d,MAAOxe,EAAKa,aAIxB,OACIrI,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,SACrDzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,0BACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,sBAAM4nB,SAxBG,WACjB9iB,EAAS0M,GAAegqC,iBAAiB95C,QAAW0B,EAAM86C,KAAKl9C,IAAKoH,IACpE49C,EAAS,IACT5iD,EAAMqB,YAsBMzE,GAAA,qBAAKwmB,MAAO,CAAE+9B,aAAc,SACxBvkD,GAAA,cAACumD,GAAA,EAAD,CACI//B,MAAO,CAAEjC,MAAO,QAChBiiC,OAAO,EACPvkD,MAAOmG,EACPq+C,QAASP,EAAczsC,UACvBuO,YAAa5kB,EAAMkB,EAAE,wBACrBoiD,eAAe,EACfC,eAAgB,SAAArlD,GACZ,OAAOtB,GAAA,qBAAKgC,IAAKV,EAAKjF,IAClB2D,GAAA,qBAAK2nB,UAAU,mBACX3nB,GAAA,qBAAKwlB,IAAKlkB,EAAK0kB,MAAOq+B,IAAK/iD,EAAKb,SAEpCT,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,SAASrmB,EAAKb,OAC7BT,GAAA,qBAAK2nB,UAAU,eAAermB,EAAKq8B,gBAI/CipB,eAAgB,SAAC9qD,EAAGwF,GAAJ,OAAa0kD,EAAS1kD,EAAKW,OAAS,KACpD4kD,eAAgB,SAAC/qD,EAAGwF,GAChB0kD,EAAS1kD,EAAKwM,OAAO6vB,cAEzBqL,WAAW,KAGnBhpC,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASmwC,UAAWyoD,GAAa/0F,IACxDhF,EAAMkB,EAAE,+BAGjBtE,GAAA,qBAAK2nB,UAAU,yBAA0BvkB,EAAMkB,EAAE,+BAChD84F,GAAsBp9F,GAAA,cAACw1C,GAAA,EAAD,CAAMlf,SAAS,EAAMhuB,KAAK,YAChDm1F,GAAkBz9F,GAAA,cAAC09F,GAAD,CAAoB3lF,YAAaA,KAClD0lF,IAAmBF,GAAgBv9F,GAAA,mBAAG2nB,UAAU,qBAAsBvkB,EAAMkB,EAAE,gCAC/Ei5F,GAAgBv9F,GAAA,mBAAG2nB,UAAU,oBAAoBnB,MAAO,CAACuvB,MAAO,QAAU3yC,EAAMkB,EAAE,6CC7DpFK,kBAhEK,SAACvB,GAA4B,IAAAshB,EACLC,qBAAS,GADJC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACtC41E,EADsC11E,EAAA,GACxB21E,EADwB31E,EAAA,GAAAG,EAELJ,qBAAS,GAFJK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEtC44E,EAFsC34E,EAAA,GAExB44E,EAFwB54E,EAAA,GAAAG,EAGiBR,qBAAS,GAH1BS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGtC04E,EAHsCz4E,EAAA,GAGb04E,EAHa14E,EAAA,GAIvCtgB,EAAW0jB,yBAEjBtoB,GAAe,WACXq6F,GAAgB,KAGpB,IAAMwD,EAAe,SAAC91F,GAClB,OAAQ7E,EAAM+gD,UAAY/gD,EAAM03F,UAG9BkD,EAAoB,SAACliG,GACpBiiG,EAAa36F,EAAMk8C,OAAOr3C,UACzBnM,EAAEwuB,kBACFiwE,GAAiBD,KAWnB2D,EAAa76F,EAAM+gD,QAAS,eAAiB,GAEnD,OAAOnkD,GAAA,qBAAK2nB,UAAW,QAAUs2E,EAAYj8F,IAAKoB,EAAMk8C,OAAOr3C,OAAQue,MAAOu3E,EAAa36F,EAAMk8C,OAAOr3C,QAAU,CAACoiB,OAAQ,WAAa,IACpIrqB,GAAA,cAACgqB,GAAA,EAAD,CAAU9S,KAAMojF,EAAcxwE,MAAM,EAAOw+B,SAAS,MAAM5T,SAAUtxC,EAAM03F,UACtE96F,GAAA,cAACgqB,GAAA,EAASC,KAAV,KACIjqB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIC,KAAM/mB,EAAMkB,EAAE,mBACdnE,QAAS,kBAAM29F,GAA2B,SAIpDH,GAAgB39F,GAAA,sBAAM2nB,UAAU,8BAA8BxnB,QAAS69F,IACzEh+F,GAAA,qBAAK2nB,UAAU,kBACVnC,IAAKpiB,EAAMk8C,OAAO8E,SAClBjkD,QAAS69F,EACT35C,IAAKjhD,EAAMk8C,OAAOn3C,SAClB+1F,OAAQ,kBAAMN,GAAgB,IAC9Bp3E,MAAO,CAAC2uB,QAASwoD,EAAe,eAAiB,UACtD39F,GAAA,qBAAK2nB,UAAU,UAAUxnB,QAAS69F,GAC9Bh+F,GAAA,qBAAK2nB,UAAU,UAAUvkB,EAAMk8C,OAAOn3C,WAE1CnI,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,MAAO9T,EAAM03F,UAAY+C,EACzBx1E,OAAQjlB,EAAMkB,EAAE,uCAChBgkB,QAASllB,EAAMkB,EACX,qCACA,CAAEimB,UAAWnnB,EAAMk8C,OAAOn3C,WAE9B+yF,cAAe93F,EAAMkB,EAAE,wCACvB62F,aAAcn7F,GAAA,cAAConB,GAAA,EAAD,CAAQkB,QAASllB,EAAMkB,EAAE,mBAAoBqjB,UAAU,mBACrE6wB,SAAU,kBAAMslD,GAA2B,IAC3C/kD,UAtCqB,WACrB31C,EAAM03F,UACNh2F,EAAS0M,GAAeoqC,qBAAqBx4C,EAAMovB,OAAQpvB,EAAMk8C,OAAOr3C,SAE5E61F,GAA2B,mBCIpBn5F,kBA/BM,SAACvB,GAClB,IAAM0B,EAAW0jB,yBAD8B9D,EAESC,sBAFTC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAExCwuC,EAFwCtuC,EAAA,GAElBuuC,EAFkBvuC,EAAA,GAIzCuiC,EAAU/jD,EAAMmY,cAAcpL,IAAI,SAAAq5B,GAAI,MAAK,CAC7CxnC,IAAKwnC,EAAKxoC,IACViB,MAAOunC,EAAKxoC,IACZmpB,KAAMqf,EAAK7wB,oBASf,OAAO3Y,GAAA,cAACspB,GAAA,EAAD,CAAM0oC,QAAS,GAClBhyD,GAAA,cAACm+F,GAAA,EAAD,CAAYz0E,OAAQ,GAAIC,OAAQ,GAAIC,SAAU,GAAIqoC,YAAa,GAAIC,WAAY,IAC3ElyD,GAAA,cAACuuD,GAAA,EAAD,CAAQpH,QAASA,EAAQlsC,OACjBurC,OAAO,EACPx+B,YAAa5kB,EAAMkB,EAAE,yCACrByiB,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa6xD,EAAwB7xD,EAAKW,WAGhEjC,GAAA,cAACm+F,GAAA,EAAD,CAAYz0E,OAAQ,GAAIC,OAAQ,GAAIC,SAAU,EAAGqoC,YAAa,EAAGC,WAAY,GACzElyD,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAMwzB,QAAQ,QAAQ36C,QAAS,WAdjD+yD,GACCpuD,EAAS0M,GAAe4qC,uBAAuBh5C,EAAMovB,OAAQ0gC,MAaY9vD,EAAMkB,EAAE,2CAErFtE,GAAA,cAACooB,GAAA,EAAD,CAASqsB,KAAK,QAAQnyC,MAAM,GAAOc,EAAMkB,EAAE,2CCyHpCK,kBAvIE,SAACvB,GACd,IAAMuU,EAAUqR,uBAAYlK,GAAgC1b,EAAM86C,KAAKvmC,UADhC+M,EAEOC,qBAAS,GAFhBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEhC05E,EAFgCx5E,EAAA,GAEfy5E,EAFez5E,EAAA,GAAAG,EAGSJ,qBAAkB,GAH3BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGhCu5E,EAHgCt5E,EAAA,GAGdu5E,EAHcv5E,EAAA,GAAAG,EAIuBR,qBAAS,GAJhCS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAIhCq5E,EAJgCp5E,EAAA,GAIPq5E,EAJOr5E,EAAA,GAKjCvN,EAASmR,uBAAY4qB,GAAkBxwC,EAAM86C,KAAKl9C,MAElD8D,EAAW0jB,yBA2DXk2E,EAAa/mF,EAAQs/B,OAAO,SAAA0nD,GAAC,OAAIA,EAAEx2F,WAAUgoD,KAAK,SAACyuC,EAAIC,GACzD,OAAGD,EAAG32F,SAAW7E,EAAM86C,KAAK3mC,SACf,EAGVsnF,EAAG52F,SAAW7E,EAAM86C,KAAK3mC,QACjB,EAGJ,IACRpH,IAAI,SAAAmvC,GAAM,OAAIt/C,GAAA,cAAC8+F,GAAD,CACb98F,IAAKs9C,EAAOr3C,OACZq3C,OAAQA,EACR6E,QAAS/gD,EAAM86C,KAAK3mC,UAAY+nC,EAAOr3C,OACvCuqB,OAAQpvB,EAAM86C,KAAKl9C,QAEjBsrF,EAAYz0E,EAAO1H,IAAI,SAAA0T,GAAK,OAAI7jB,GAAA,cAAC++F,GAAD,CAAYl7E,MAAOA,EAAOq6B,KAAM96C,EAAM86C,KAAMl8C,IAAK6hB,EAAM7iB,QAE7F,OAAOhB,GAAA,qBAAK2nB,UAAU,eACRvkB,EAAM47F,WAAah/F,GAAA,mBAAIk1C,KAAK,IAAIvtB,UAAU,+CAA+CxnB,QAxD7E,SAACrE,GACvBA,EAAEm5C,iBACFopD,GAAmB,KAsDU,UAIrBr+F,GAAA,cAACi/F,GAAD,CACI/gD,KAAM96C,EAAM86C,KACZo+C,YAAal5F,EAAM47F,UACnBzC,cAjFc,SAACnhD,GACxBh4C,EAAM47F,WAAa57F,EAAM87F,aACxB97F,EAAM87F,YAAY97F,EAAM86C,KAAKl9C,MAgFrBw7F,aA5ES,WAClBp5F,EAAMo5F,cACLp5F,EAAMo5F,aAAap5F,EAAM86C,KAAKl9C,MA2EtB07F,oBAvEgB,WACzBt5F,EAAMs5F,qBACLt5F,EAAMs5F,oBAAoBt5F,EAAM86C,KAAKl9C,QAuEjChB,GAAA,qBAAK2nB,UAAU,yBAAf,cACD3nB,GAAA,qBAAK2nB,UAAU,sBACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQmxB,OAAO,EAAMzuB,MAAM,EAAMisB,MAAM,OAAOtB,KAAK,QAAQt0C,QA1D/C,SAACrE,GACxBA,EAAEm5C,iBACFspD,GAAoB,IAwD+E7pD,SAAUtxC,EAAM47F,WACpGh/F,GAAA,mBAAG2nB,UAAU,qBAEdvkB,EAAM47F,WAAaN,GAEzB1+F,GAAA,qBAAK2nB,UAAU,yBAAf,cACA3nB,GAAA,qBAAK2nB,UAAU,sBACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQmxB,OAAO,EAAMzuB,MAAM,EAAMisB,MAAM,SAAStB,KAAK,QAAQt0C,QAtDjD,SAACrE,GACzBA,EAAEm5C,iBACFwpD,GAA2B,IAoD4E/pD,SAAUtxC,EAAM47F,WACvGh/F,GAAA,mBAAG2nB,UAAU,8BAEfvkB,EAAM47F,WAAa1S,GAExBlpF,EAAM+7F,WAAan/F,GAAA,qBAAK2nB,UAAU,yBAAyBvkB,EAAMkB,EAAE,yCACnElB,EAAM+7F,WAAan/F,GAAA,cAACo/F,GAAD,CAAc7jF,cAAenY,EAAMi8F,oBAAqB7sE,OAAQpvB,EAAM86C,KAAKl9C,MACnGhB,GAAA,cAACs/F,GAAD,CACIphD,KAAM96C,EAAM86C,KACZhnC,KAAMonF,EACN75F,QAtEc,WACtB85F,GAAoB,MAuEhBv+F,GAAA,cAACu/F,GAAD,CACI/sE,OAAQpvB,EAAM86C,KAAKl9C,IACnBkW,KAAMsnF,EACN/5F,QAhEqB,WAC7Bg6F,GAA2B,IAgEnB72E,SA7DuB,SAACi5C,GAChC/7D,EAAS0M,GAAOvM,QAAQ62C,4BAA4B+kB,EAAe,CAACz9D,EAAM86C,KAAKl9C,OAC/Ey9F,GAA2B,MA6DvBz+F,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAMknF,EACN/1E,OAAQjlB,EAAMkB,EAAE,uCAChB42F,cAAe93F,EAAMkB,EAAE,mBACvB62F,aAAcn7F,GAAA,cAAConB,GAAA,EAAD,CAAQkB,QAASllB,EAAMkB,EAAE,mBAAoBqjB,UAAU,mBACrEW,QAASllB,EAAMkB,EAAE,qCAAsC,CAACk7F,UAAWp8F,EAAM86C,KAAK51C,OAC9EkwC,SAAU,kBAAM6lD,GAAmB,IACnCtlD,UAhGO,WACfj0C,EAAS0M,GAAOvM,QAAQ42C,WAAWz4C,EAAM86C,KAAKl9C,YCnBvC2D,kBA7BK,SAACvB,GAA4B,IAAAshB,EACbC,qBAAS,GADIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACtC+6E,EADsC76E,EAAA,GAC5B86E,EAD4B96E,EAAA,GAAAG,EAEOJ,qBAAS,GAFhBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEtC46E,EAFsC36E,EAAA,GAElB46E,EAFkB56E,EAAA,GAGvCk5B,EAAOs4C,mBAAQ,WACjB,OAAOn3C,GAAc39C,KAAK+Z,OAC3B,CAACgkF,IAGEI,EAAgB72E,uBAAY+3B,MAC/B4+C,GAAsBE,EAAct2D,KAAK,SAAAu2D,GAAY,OAAIA,EAAa9+F,MAAQk9C,EAAKl9C,QAClF4+F,GAAsB,GACtBF,GAAY,IAOhB,OAAO1/F,GAAA,cAAAA,GAAA,cACHA,GAAA,yBACIA,GAAA,wBAAQ2nB,UAAU,uBAAuBxnB,QAN7B,SAACrE,GAAuBA,EAAEm5C,iBAAkByqD,GAAaD,KAOjEz/F,GAAA,mBAAG2nB,UAAU,cACXvkB,EAAMkB,EAAE,4BAGjBm7F,GAAYz/F,GAAA,cAAC+/F,GAAD,CAAU7hD,KAAMA,EAAM8gD,WAAW,EAAME,YAVhC,kBAAMU,GAAsB,IAUkCpD,aAT7D,kBAAMkD,GAAY,IAS2EP,WAAW,EAAOE,oBAAqB9sF,uBCelJ5N,kBA3CQ,SAACvB,GACpB,IAAMuU,EAAUqR,uBAAYlK,GAAgC1b,EAAM86C,KAAKvmC,UACjEE,EAASmR,uBAAY4qB,GAAkBxwC,EAAM86C,KAAKl9C,MAElD09F,EAAa/mF,EAAQs/B,OAAO,SAAA0nD,GAAC,OAAIA,EAAEx2F,WAAUgoD,KAAK,SAACyuC,EAAIC,GACzD,OAAGD,EAAG32F,SAAW7E,EAAM86C,KAAK3mC,SACf,EAGVsnF,EAAG52F,SAAW7E,EAAM86C,KAAK3mC,QACjB,EAGJ,IACRpH,IAAI,SAAAmvC,GAAM,OAAIt/C,GAAA,cAAC8+F,GAAD,CACb98F,IAAKs9C,EAAOr3C,OACZq3C,OAAQA,EACR6E,QAAS/gD,EAAM86C,KAAK3mC,UAAY+nC,EAAOr3C,OACvCuqB,OAAQpvB,EAAM86C,KAAKl9C,IACnB85F,UAAU,MAGRxO,EAAYz0E,EAAO1H,IAAI,SAAA0T,GAAK,OAAI7jB,GAAA,cAAC++F,GAAD,CAAYl7E,MAAOA,EAAOq6B,KAAM96C,EAAM86C,KAAMl8C,IAAK6hB,EAAM7iB,IAAK85F,UAAU,MAE5G,OAAO96F,GAAA,qBAAK2nB,UAAU,cAClB3nB,GAAA,oBAAIwmB,MAAO,CAAC8/B,OAAO,IACdljD,EAAM86C,KAAK51C,KACZtI,GAAA,sCACAA,GAAA,sBAAM2nB,UAAU,cACXvkB,EAAM86C,KAAKvgB,cAGpB39B,GAAA,qBAAK2nB,UAAU,yBAAf,cACA3nB,GAAA,qBAAK2nB,UAAU,sBACV+2E,GAEL1+F,GAAA,qBAAK2nB,UAAU,yBAAf,cACA3nB,GAAA,qBAAK2nB,UAAU,sBACV2kE,MCgDE3nF,kBA7EC,SAACvB,GACb,IAAM48F,EAAyBh3E,uBAAYogB,MACrC7tB,EAAgByN,uBAAYkgB,GAAqC9lC,EAAM2lB,YAAY/nB,MAEnFqyD,GAAsB2sC,IAA2BA,EAAuBnnF,qBACxEy6C,EAA2BD,EAAoB93C,EAAcxX,OAAO,SAAAylC,GAAI,OAAIA,EAAK3wB,uBAAyB2wB,EAAKzwB,cAAexG,kBAC9H0tF,EAAkB5sC,GAAsBC,EAAyB13C,QAAU,EAG3Eg6B,EAAU,SAACsI,EAAYj2C,EAAgBi4F,GACzC,SAAGhiD,EAAKn2C,gBAAkBm4F,GAAYhiD,EAAKn2C,iBAAmBm4F,EAASn4F,gBAChEm4F,EAASpnF,cAKTolC,EAAKtI,QAAQ3tC,IAIlBk4F,EAAY/8F,EAAM26C,MAAMh6C,OAAO,SAAAm6C,GAAI,OAAItI,EAAQsI,EAAM96C,EAAM2lB,YAAY/nB,IAAKg/F,KAC7E/oD,OAAO,SAAAiH,GAAI,OAAIA,EAAK51C,OACpB2uC,OAAO,SAAAiH,GAAI,OAAKA,EAAKgB,QACrB/uC,IAAI,SAAC+tC,GACF,OAAOl+C,GAAA,cAAC+/F,GAAD,CAAUZ,UAAWc,EAAiBZ,oBAAqB/rC,EAA0BpV,KAAMA,EAAMl8C,IAAKk8C,EAAKl9C,QAGpHo/F,EAAkBh9F,EAAM26C,MAAMh6C,OAAO,SAAAm6C,GAAI,OAAKtI,EAAQsI,EAAM96C,EAAM2lB,YAAY/nB,IAAKg/F,KACpF/oD,OAAO,SAAAiH,GAAI,OAAIA,EAAK51C,OACpB6H,IAAI,SAAC+tC,GACF,OAAOl+C,GAAA,cAACqgG,GAAD,CAAgBniD,KAAMA,EAAMl8C,IAAKk8C,EAAKl9C,QAGrD,OAAOhB,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAKC,MAAM,EAAMC,UAAU,UAClC/pB,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,yBAEI/lB,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,UAKhBxqB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,yBACIA,GAAA,cAACsgG,GAAD,CAAa5rD,UAAU,IACtByrD,KAIU,IAAtBA,EAAUvkF,SAA6C,IAA5BwkF,EAAgBxkF,SAAiB5b,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACzDxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAACooB,GAAA,EAAD,CAAS9lB,MAAM,EAAMi+F,UAAU,EAAMj4E,QAASllB,EAAMkB,EAAE,0BAG7D87F,EAAgBxkF,QAAU,GAAK5b,GAAA,cAACspB,GAAA,EAAKE,IAAN,KAC5BxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAKC,MAAM,EAAMC,UAAU,UAClC/pB,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,oBAEI/lB,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,UAKhBxqB,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACK22E,iBnBvFZ9K,+DAWL,IoBRYkL,GpBoBG77F,kBAZM,SAACvB,GAClB,IAAM26C,EAAQ/0B,uBAAY+3B,MACpBh4B,EAAcC,uBAAYrN,MAGhC,OAAO3b,GAAA,cAACqpB,GAAA,EAAD,KACCrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,EAAMotB,QAAQ,GAC3B32C,GAAA,cAACygG,GAAD,CAAS1iD,MAAOA,EAAOh1B,YAAaA,8BqBSrCpkB,kBArBS,SAACvB,GACrB,IAAMsvC,EAAW1pB,uBAAYmoB,G7JPA,a6JOuC,IAC9DrsC,EAAW0jB,yBAMXutB,EAAQrD,EAAU,UAAY,UAC9B5oB,EAAO4oB,EAAU,OAAS,OAC1BguD,EAAehuD,EAAU,sBAAwB,qBAEvD,OAAO1yC,GAAA,cAAC61C,GAAA,EAAD,CAAOC,QAAS91C,GAAA,cAAC2gG,GAAA,EAAD,CAAUxgG,QARb,WAChB2E,EAAS+C,G7JXgB,a6JWkB6qC,MAQ3C1yC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAI,WAAAhC,OAAcwjB,GAA0BtD,MAAO,CAACuvB,YACjDztB,QAAStoB,GAAA,cAAAA,GAAA,cAClBA,GAAA,uBAAIoD,EAAMkB,EAAE,iBAAiBo8F,IAC5BhuD,GAAY1yC,GAAA,uBAAGA,GAAA,2BAAQoD,EAAMkB,EAAE,oDCAlCs8F,GAAerV,aAAK,SAACnoF,GACvB,IAAM2lB,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChE+S,EAAQmF,uBAAY6oB,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAC7Du1C,EAAiBvtB,uBAAYwoB,MAC7BgF,EAAWxtB,uBAAYmoB,GAAwB,mBAAmB,IALpBzsB,EAMlBC,qBAAS,GANSC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAM7C+xB,EAN6C7xB,EAAA,GAMlC8xB,EANkC9xB,EAAA,GAO9C9f,EAAW0jB,yBAEjBpoB,qBAAU,WACHm2C,GAAmBC,GAClBE,GAAa,IAElB,CAACH,EAAgBC,IAEpB,IAKMZ,IAAU5/B,GAAeA,EAAa4/B,QAAQ7sB,EAAY/nB,KAEhE,OAAOhB,GAAA,cAAAA,GAAA,cACHA,GAAA,cAAC6gG,GAAD,MACA7gG,GAAA,cAAC61C,GAAA,EAAD,CACI3+B,KAAMu/B,EACNX,QAAS91C,GAAA,cAAC2gG,GAAA,EAAD,CAAU72E,KAAK,iBAAiB3pB,QAAS,kBAAM2E,EAAS6wB,GAAiBvyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,OAC1G8/F,oBAAoB,EACpBC,oBAAoB,EACpBC,yBAAyB,EACzBpgG,SAAS,cACT0nB,QACItoB,GAAA,cAAAA,GAAA,cACIA,GAAA,uBAAIoD,EAAMkB,EAAE,0BACZtE,GAAA,uBAAGA,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAS,UAAW1rB,OAAU,UAAWknC,MAAO,SAAUpxD,QAnBnE,WACpB2E,EAAS+C,GAAkB,mBAAmB,IAC9C6uC,GAAa,KAiBqGtzC,EAAMkB,EAAE,yBAI1HtE,GAAA,cAACgqB,GAAA,EAAD,CAAUnc,MAAM,EAAMic,KAAK,qBACvB9pB,GAAA,cAACgqB,GAAA,EAASC,KAAV,CAAeunC,UAAU,QACrBxxD,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,UAAUK,KAAK,WAAWhqB,QAAS,kBAAM2E,EAASwwB,GAAmBlyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,OACjHhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIJ,KAAM,oBACNK,KAAM/mB,EAAMkB,EAAE,iCACdnE,QAAS,kBAAM2E,EAAS0wB,GAAqBpyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,GAAM,OAE/EhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,OAAOK,KAAK,OAAOhqB,QAAS,kBAAM2E,EAAS4wB,GAAkBtyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,OACxG6iB,IAAUA,EAAM7N,aAAc4/B,GAAW/xB,EAAM6X,SAAW17B,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,MAAMK,KAAK,WAAWjC,GAAI2C,GAAiCznB,EAAMqI,MAAMkmC,OAAO3wC,KAAM6oB,GAAIo3E,aACrKp9E,IAAUA,EAAM4X,oBAAsBz7B,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,QAAQK,KAAK,eACzDhqB,QAAS,kBAAM2E,EAAS8wB,GAAmBxyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,OACjF6iB,GAASA,EAAM4X,oBAAsBz7B,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,QAAQK,KAAK,gBAEhBhqB,QAAS,kBAAMoG,OAAOC,SAAS06F,YAEvFlhG,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,SAASK,KAAK,eAAehqB,QAAS,kBAAM2E,EAASuwB,GAAmBjyB,EAAMqI,MAAMkmC,OAAO3wC,SAC/GhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,WAAWK,KAAK,OAAON,GAAG,IAAIqrB,KAAK,gCAAgCtU,OAAO,gBAK/Fj8B,kBAAiB4jB,aAAWq4E,KC8BrCzD,GAAe,SAACl7F,GAClB,MAAO,6BAA6BmkD,KAAKnkD,IAG9B0C,kBApGgB,SAACvB,GAAkC,IAAAshB,EAEpCC,oBAAiBvhB,EAAMgF,OAFawc,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEvDtc,EAFuDwc,EAAA,GAEhDohC,EAFgDphC,EAAA,GAGxDmE,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChEw2C,EAAsB/0C,gBAAayD,EAAY,CAAIA,EAAauB,SAAjBjR,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CAA6ByU,EAAa2B,QAAQsD,SAAU,IAC3GssC,EAAoBv+B,uBAAYlK,GAAgCwoC,IAEtElnD,qBAAU,WACN4lD,EAAS5iD,EAAMgF,QAChB,CAAChF,EAAMgF,QAEV,IAAM89C,EAAgBqB,EACjBxjD,OAAO,SAAAyD,GAAI,OAAIA,EAAKW,SAASg+C,oBAAoBliD,SAASmE,EAAM+9C,sBAAwB3+C,EAAKY,MAAM+9C,oBAAoBliD,SAASmE,EAAM+9C,uBACtIlP,OAAO,SAAAzvC,GAAI,OAAIA,EAAKW,WACpBgI,IAAI,SAAA3I,GACD,MAAO,CACHnL,GAAImL,EAAKS,OACTxH,MAAO+G,EAAKW,SACZw1B,YAAan2B,EAAKY,MAClB4d,MAAOxe,EAAKa,aAWxB,OACIrI,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,QAASgwC,KAAK,QACnEz0C,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,2BACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,qBAAKwmB,MAAO,CAAE+9B,aAAc,SACpBvkD,GAAA,cAACspB,GAAA,EAAD,CAAMkd,WAAW,EAAMjd,WAAW,EAAM43E,UAAU,GAC9CnhG,GAAA,cAACm+F,GAAA,EAAD,CAAYz0E,OAAQ,GAAIC,OAAQ,EAAGC,SAAU,IACzC5pB,GAAA,cAACumD,GAAA,EAAD,CACIC,OAAO,EACPvkD,MAAOmG,EACPq+C,QAASP,EAAczsC,UACvBuO,YAAa5kB,EAAMkB,EAAE,yBACrBoiD,eAAe,EACfC,eAAgB,SAAArlD,GACZ,OAAOtB,GAAA,qBAAKgC,IAAKV,EAAKjF,IAClB2D,GAAA,qBAAK2nB,UAAU,mBACX3nB,GAAA,qBAAKwlB,IAAKlkB,EAAK0kB,MAAOq+B,IAAK/iD,EAAKb,SAEpCT,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,SAASrmB,EAAKb,OAC7BT,GAAA,qBAAK2nB,UAAU,eAAermB,EAAKq8B,gBAI/CipB,eAAgB,SAAC9qD,EAAGwF,GAAJ,OA/BpB8/F,EA+BoD9/F,EAAKW,OAAS,GA9B1F+jD,EAASo7C,QACNjE,GAAaiE,IACZh+F,EAAMi+F,cAAcD,IAHD,IAACA,GAgCIv6C,eAAgB,SAAC/qD,EAAGwF,GAChB0kD,EAAS1kD,EAAKwM,OAAO6vB,aACrBv6B,EAAMi+F,cAAc//F,EAAKwM,OAAO6vB,iBAI5C39B,GAAA,cAACm+F,GAAA,EAAD,CAAYz0E,OAAQ,GAAIC,OAAQ,EAAGC,SAAU,GACzC5pB,GAAA,cAAConB,GAAA,EAAOyvB,MAAR,KACI72C,GAAA,cAAConB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAW,WACXN,SAAU,OACVlnB,QAAS,kBAAMiD,EAAMk+F,oBAAN//F,OAAA2N,GAAA,EAAA3N,CAAA,GAA8B6B,EAAMwuB,YAApC,CAAiDG,aAAa,QAEjF/xB,GAAA,cAAConB,GAAA,EAAO08B,GAAR,CAAW35B,KAAK,MAChBnqB,GAAA,cAAConB,GAAA,EAAD,CACI7iB,KAAM,SACNojB,UAAWvkB,EAAMwuB,YAAYG,YAAc,WAAa,GACxD1K,SAAU,QACVlnB,QAAS,kBAAMiD,EAAMk+F,oBAAN//F,OAAA2N,GAAA,EAAA3N,CAAA,GAA8B6B,EAAMwuB,YAApC,CAAiDG,aAAc3uB,EAAMwuB,YAAYG,uBAO5H/xB,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASpE,QAASiD,EAAMwkB,SAAU8sB,UAAWyoD,GAAa/0F,IACjFhF,EAAMkB,EAAE,yBCtCdikB,gBAlDU,SAACnlB,GACtB,IAAM2lB,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAFf4T,EAGrBC,oBAAiB,IAHIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGhD+2B,EAHgD72B,EAAA,GAGrC28E,EAHqC38E,EAAA,GAAAG,EAIPJ,qBAAkB,GAJXK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAIhDu5E,EAJgDt5E,EAAA,GAI9Bu5E,EAJ8Bv5E,EAAA,GAAAG,EAKjBR,oBAAsB,CAACsN,aAAa,EAAOF,aAAa,EAAMC,YAAY,IALzD5M,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAKhDyM,EALgDxM,EAAA,GAKnCo8E,EALmCp8E,EAAA,GAMjDvB,EAAQmF,uBAAY6oB,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAC7D8D,EAAW0jB,yBAEXotB,IAAU5/B,IAAeA,EAAa4/B,QAAQ7sB,EAAY/nB,MAAS6iB,GAASA,EAAMszB,UAAUpuB,EAAY/nB,MAOxGygG,EAAoB,WACtBlD,GAAoB,IAcxB,OAAOv+F,GAAA,cAAAA,GAAA,cAAG6jB,IAAUA,EAAM7N,aAAc4/B,GAAW/xB,EAAM6X,SACrD17B,GAAA,cAAAA,GAAA,cACIA,GAAA,cAAC2gG,GAAA,EAAD,KACI3gG,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EAAMnC,UAAU,QAAQxnB,QAvBzB,SAAC2Z,GACtBA,EAAMwQ,kBACNi0E,GAAoB,KAqBqDv+F,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,oBAA5E,cAEJtI,GAAA,cAAC0hG,GAAD,CACIxqF,KAAMonF,EACN75F,QAASg9F,EACT75E,SAnBmB,WAC3B9iB,EAAS0M,EAAemgB,WAAW9N,EAAM7iB,IAAKy6C,EAAW7pB,IAEzD2vE,EAAa,IACbE,KAgBQr5F,MAAOqzC,EACP4lD,cAdU,SAACj5F,GACnBm5F,EAAan5F,IAcLwpB,YAAaA,EACb0vE,oBAAqBE,QCdtBG,GAjCO,SAACv+F,GACnB,IAAM+b,EAAsBxD,KACtBoN,EAAcC,uBAAY7J,GAFiBuF,EAGzBC,qBAAS,GAHgBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAG1CxN,EAH0C0N,EAAA,GAGpCo8C,EAHoCp8C,EAAA,GAKjD,OAAO5kB,GAAA,cAAAA,GAAA,cACCA,GAAA,cAAC61C,GAAA,EAAD,CACA9F,GAAG,QACHnvC,SAAS,gBACTsW,KAAMA,EACN2jF,OAAQ,WAAO75B,GAAQ,IACvBv8D,QAAS,WAAOu8D,GAAQ,IACxBlrB,QACI91C,GAAA,cAAC2gG,GAAA,EAAD,KACI3gG,GAAA,cAACskD,GAAA,EAAD,CAAOQ,UAAU,EAAMn9B,UAAU,OAAOnB,MAAO,CAACmjE,gBAAe,OAAArjF,OAASyiB,EAAY1gB,UAArB,KAAmCqhF,eAAgB,YAG1HphE,QACItoB,GAAA,cAACiqB,GAAA,EAAD,CAAM8wE,UAAU,EAAM1yC,WAAW,EAAM2yC,SAAS,GAC5Ch7F,GAAA,cAAC2gG,GAAA,EAAD,CAAUz4E,GAAI2C,GAAoBhB,GAAIo3E,WAASW,gBAAgB,SAASzhG,QAAS,kBAAM6gE,GAAQ,KAC3FhhE,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SADf,WAIAtI,GAAA,cAAC2gG,GAAA,EAAD,CAAUxgG,QAAS,kBAAM0hG,OACrB7hG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,aADf,iBC3Bdw5F,GAAY,SAAC1+F,GACf,OAAOpD,GAAA,cAACioB,GAAA,KAAD,CAAMC,GAAI2C,GAAsCznB,EAAMwgB,SAAU+D,WAAYvkB,EAAM2+F,YAAa,UAAY,IAAI,WAAY3+F,EAAMikB,WA+B7HkB,gBA5BG,SAACnlB,GACf,IAAMquC,EAAeI,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,KACxD6iB,EAAQmF,uBAAYyoB,GACtBngB,EAAY,UACZ0wE,EAAWhiG,GAAA,cAAAA,GAAA,eAYf,OAVG6jB,IACCyN,EAAYzN,EAAMvb,KAEdub,EAAMkO,cACNiwE,EAAWhiG,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,0BAMZliG,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACiiG,GAAA,EAAWzqD,QAAZ,MACAx3C,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,CACIrsE,QAAQ,EACRhM,GAAIi4E,GACJC,aAAa,EACbn+E,QAASxgB,EAAMqI,MAAMkmC,OAAO3wC,KAC9BswB,GACD0wE,KC5BHG,GAAW,SAAC/+F,GACd,OAAOpD,GAAA,cAACioB,GAAA,KAAD,CAAMC,GAAI2C,IAAmBznB,EAAMikB,WAO/B+6E,GAJY,SAACh/F,GACxB,OAAOpD,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,CAAoBr4E,GAAIs4E,IAAxB,WCJIE,GAJmB,SAACj/F,GAC/B,OAAOpD,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,sBCGII,GAJW,SAACl/F,GACvB,OAAOpD,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,eCGIK,GAJM,SAACn/F,GAClB,OAAOpD,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,iBCGIM,GAJU,SAACp/F,GACtB,OAAOpD,GAAA,cAACiiG,GAAA,EAAWC,QAAZ,iBCqCIv9F,kBAAiB4jB,aA1BhB,SAACnlB,GACb,IAAMsuE,EAAU1oD,uBAAYqpD,MAGtB3sB,EAFmB76B,GAAiCznB,EAAMoD,SAASV,UAElC4rE,EAAQntD,MAAQ,GAAM,KAAO,QAEpE,OAAQvkB,GAAA,cAACiqB,GAAA,EAAD,CAAMw4E,MAAM,MAAMjwC,UAAU,EAAOn2D,GAAG,UAAUmqB,MAAO,CAACk/B,gBAC5D1lD,GAAA,cAACm6F,GAAA,EAAD,CAAO38F,KAAMqtB,IACT7qB,GAAA,cAAC2gG,GAAA,EAAD,KACI3gG,GAAA,cAACiiG,GAAA,EAAD,KACIjiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAM,CAACqtB,G9P3BRplB,wB8P2B0DolB,IAA4B9C,UAAWq6E,KACpHpiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAoB9C,UAAWy6E,KACzDxiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K9PhBjBiI,qB8PgBuCsiB,UAAWw6E,KACrDviG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAM,C9P9BPiI,wB8P8BwColB,IAA4B9C,UAAW46E,KAClG3iG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K9PpBZiI,mB8PoBuCsiB,UAAWu6E,KAC1DtiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K9PpBJiI,0B8PoBuCsiB,UAAWs6E,QAI9EriG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K9PpCWiI,wB8PoC2BsiB,UAAW66E,KACrE5iG,GAAA,cAACiqB,GAAA,EAAKA,KAAN,CAAWrpB,SAAS,QAAQvE,GAAG,iBAC/B2D,GAAA,cAAC6iG,GAAD,MACA7iG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K9PvCWiI,wB8PuC2BsiB,UAAW64E,8BCX9Dj8F,kBAnBgB,SAACvB,GAC5B,IAAM0N,EAAqBkY,uBAAYogB,MAGvC,OAAOppC,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,SAC5DzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAgB1iB,EAAMkB,EAAE,mBACxBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,cAACooB,GAAA,EAAD,CAAS0B,KAAK,SAAS6qB,SAAS,EACvBrsB,QACIxX,GAAsBA,EAAmBiI,YACnC3V,EAAMkB,EAAE,iCACRwM,GAAsBA,EAAmB+H,qBACtCzV,EAAMkB,EAAE,2BACRlB,EAAMkB,EAAE,sCCkD3BK,kBAAiB4jB,aA/Df,SAACnlB,GAAyB,IAAAshB,EACTC,qBAAS,GADAC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAChC6Q,EADgC3Q,EAAA,GACvB8d,EADuB9d,EAAA,GAAAG,EAELJ,qBAAS,GAFJK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEhC+9E,EAFgC99E,EAAA,GAErB+9E,EAFqB/9E,EAAA,GAAAG,EAGLR,oBAAS,IAHJS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGhCmM,EAHgClM,EAAA,GAGrB49E,EAHqB59E,EAAA,GAAAE,EAIPX,qBAAS,GAJFY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAIhCi2E,EAJgCh2E,EAAA,GAItBi2E,EAJsBj2E,EAAA,GAKjCk2E,EAAUtuC,kBAAc,MACxB81C,EAAe/jF,EAAa8E,2BAC5BqwB,EAAYrrB,uBAAYi6E,GACxBj7F,EAAUkX,EAAavD,qBACvBnU,EAAOwhB,uBAAYhhB,GACnBlD,EAAW0jB,yBAwCjB,OAAOxoB,GAAA,qBAAK2nB,UAAU,QACd3nB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,cAAcxnB,QAvCpB,WAChBuiC,GAAYnN,GACRA,GACAhvB,OAAOs8B,WAAW,WACd44D,EAAQruC,QAASx2B,SAClB,OAkCmD52B,GAAA,mBAAG2nB,UAAU,cAAnE,iBACA3nB,GAAA,cAACm5F,GAAA,EAAD,CAAYC,UAAU,YAAY7jE,QAASA,EAASqmC,SAAU,KAC1D57D,GAAA,qBAAK2nB,UAAU,iBACX3nB,GAAA,sBAAM4nB,SAjCD,SAAC9rB,GAGlB,GAFAA,EAAEm5C,iBAEe,KAAd3jB,EAKH,GAAiB,IAAd+iB,EAAH,CAKA,IAAMxwB,EAAQgxB,EAAW3Y,gBAAgB10B,EAAKxG,IAAKswB,GAEnDxsB,EAAS0M,EAAeiS,SAASI,EAAOzgB,EAAMwnB,eAN1Cm4E,GAAa,QALbvH,GAAY,KA8BAx7F,GAAA,cAACk4C,GAAA,EAAD,CAAOlwB,YAAY,iBAAiBw+B,OAAO,EAAM4D,IAAKqxC,EAAS1+F,MAAOw+F,EAAUt5F,MAAOqvB,EAAWvK,SAhBjG,SAACjrB,GAClBknG,EAAalnG,EAAE8kC,OAAO3+B,OACtBu5F,EAA+B,KAAnB1/F,EAAE8kC,OAAO3+B,aAkBjBjC,GAAA,cAACkjG,GAAD,CAAwBhsF,KAAM4rF,EAAWr+F,QAfxB,WACrBu+F,EAAa,IACbtgE,GAAW,GACXqgE,GAAa,UCMfI,GAAqB,SAAC3wE,EAAgBurB,GAGxC,QAFqBA,EAAMxU,KAAK,SAAA2U,GAAI,OAAIA,EAAKl9C,MAAQwxB,KAK1C7tB,kBApDa,SAACvB,GACzB,IAAM+b,EAAsBxD,KAEtBoiC,GADc/0B,uBAAY7J,GAClB6J,uBAAY+3B,IAAqB,KAHcr8B,EAIrBC,oBAAS,IAJYC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAItD0+E,EAJsDx+E,EAAA,GAIxCy+E,EAJwCz+E,EAAA,GAMvDqiC,EAAkBlJ,EAAM5tC,IAAI,SAAA+tC,GAAI,MAAK,CACvCl8C,IAAKk8C,EAAKl9C,IACViB,MAAOi8C,EAAKl9C,IACZmpB,KAAM+zB,EAAK51C,QACXmR,UAWJ,OACIzZ,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,SACrDzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,yBAA0B,CAAC22F,WAAY73F,EAAMygB,MAAMvb,QAC1EtI,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,sBAAM4nB,SAXG,SAAC9rB,GAClBA,EAAEm5C,iBAEF7xC,EAAMwkB,SAASw7E,GACfC,EAAgB,MAQJrjG,GAAA,cAACgqB,GAAA,EAAD,CACIhC,YAAa5kB,EAAMkB,EAAE,oBACrBkiD,OAAO,EACPzgD,QAAQ,EACRmhD,WAAW,EACXC,QAASF,EACTlgC,SApBC,SAACjrB,EAAyBsrD,GAA1B,OAAoDi8C,EAAgBj8C,EAAOnlD,QAqB5EA,MAAOmhG,IAEXpjG,GAAA,qBAAKwmB,MAAO,CAACmnC,UAAW,SACpB3tD,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASmwC,UAAWyuD,GAAmBC,EAAcrlD,IAC5E36C,EAAMkB,EAAE,2BC6J/Bg/F,GAAkB,SAAC9wE,EAAgBurB,GACrC,IAAMG,EAAOH,EAAMxU,KAAK,SAAAjlC,GAAC,OAAIA,EAAEtD,MAAQwxB,IAEvC,OAAI0rB,EAIGA,EAAK51C,KAHD,gBAMA3D,kBAhMO,SAACvB,GAA8B,IAAAshB,EACnBC,qBAAS,GADUC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAAAK,GAAAH,EAAA,GAAAA,EAAA,GAErBD,qBAAS,IAFYK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAAAI,GAAAH,EAAA,GAAAA,EAAA,GAGfL,oBAAiB,KAHFS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG1Cs2B,EAH0Cr2B,EAAA,GAG/Bm8E,EAH+Bn8E,EAAA,GAAAE,EAIXX,oBAAsB,CAACsN,aAAa,EAAOF,aAAa,EAAMC,YAAY,IAJ/DzM,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAI1CsM,EAJ0CrM,EAAA,GAI7Bi8E,EAJ6Bj8E,EAAA,GAAAq9C,EAKDj+C,qBAAkB,GALjBk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAK1C07B,EAL0Cz7B,EAAA,GAKxB07B,EALwB17B,EAAA,GAAAC,EAMDn+C,qBAAkB,GANjBo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAM1CygC,EAN0CxgC,EAAA,GAMxBygC,EANwBzgC,EAAA,GAAA0gC,EAOa9+E,qBAAkB,GAP/B++E,EAAAniG,OAAAmL,GAAA,EAAAnL,CAAAkiG,EAAA,GAO1C5F,EAP0C6F,EAAA,GAOjB5F,EAPiB4F,EAAA,GAAAC,EAQSh/E,qBAAkB,GAR3Bi/E,EAAAriG,OAAAmL,GAAA,EAAAnL,CAAAoiG,EAAA,GAQ1CE,EAR0CD,EAAA,GAQnBE,EARmBF,EAAA,GAAAG,EASLp/E,yBAAqC1jB,GAThC+iG,EAAAziG,OAAAmL,GAAA,EAAAnL,CAAAwiG,EAAA,GAS1CE,EAT0CD,EAAA,GAAAE,GAAAF,EAAA,GAUTr/E,yBAA2B1jB,IAVlBkjG,EAAA5iG,OAAAmL,GAAA,EAAAnL,CAAA2iG,EAAA,GAU1CE,EAV0CD,EAAA,GAW3Cr/F,GAX2Cq/F,EAAA,GAWhC37E,0BACX3J,EAAQmK,uBAAYpK,MACpBm/B,EAAQ/0B,uBAAY+3B,MACpBsjD,EAASr7E,uBAAYmoB,GAAwBH,GAAe5tC,EAAMygB,MAAM7iB,MAAM,IAKpFZ,qBAAU,WACFgD,EAAMygB,MAAM+X,WAAWhgB,QAAU,GAIrC9W,EAASgW,EAAiBnQ,cAAcvH,EAAMygB,MAAM+X,WAAWniB,aAChE,CAACrW,EAAMygB,MAAM+X,aAEhB,IAAM0oE,EAAsB,SAACr8F,GACzB,IAAMT,EAAOqX,EAAM0qB,KAAK,SAACpC,GAAD,OAA2BA,EAASl/B,SAAWA,IACvE,OAAOT,EAAOA,EAAKW,SAAW,IA4C5Bs5F,EAAoB,WACtBlD,GAAoB,IAGlBj0E,EAAkB,SAACxQ,GACrBA,EAAMwQ,mBA4BJi6E,EAAUF,EAAS,iBAAmB,WAE5C,OAAOrkG,GAAA,qBAAK2nB,UAAU,UAAWnB,MAAO,CAAC6D,OAAQ,aAC5C,EACDrqB,GAAA,cAACioB,GAAA,QAAD,CAASN,UAAU,mBAAmBO,GAAI0yE,GAAqCx3F,EAAMygB,MAAM7iB,MAAOoC,EAAMygB,MAAMvb,MAC9GtI,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAW48E,EAASpkG,QAVD,SAACrE,GAC1BA,EAAEwuB,kBACFxlB,EAAS+C,GAAkBmpC,GAAe5tC,EAAMygB,MAAM7iB,MAAOqjG,QAS5D,EA8BDrkG,GAAA,qBAAKG,QAASmqB,GACVtqB,GAAA,cAACwkG,GAAD,CACIttF,KAAMqsF,EACN9+F,QAhGc,WACtB++F,GAAoB,IAgGZ57E,SA7FgB,SAAC4K,GACzB1tB,EAASi/C,GAAW9+C,QAAQ62C,4BAA4B14C,EAAMygB,MAAM7iB,IAAK,CAACwxB,KAC1EgxE,GAAoB,IA4FZ3/E,MAAOzgB,EAAMygB,QAEjB7jB,GAAA,cAAC0hG,GAAD,CACIxqF,KAAMonF,EACN75F,QAASg9F,EACT75E,SAvEmB,WAC3B9iB,EAAS0M,EAAemgB,WAAWvuB,EAAMygB,MAAM7iB,IAAKy6C,EAAW7pB,IAE/D2vE,EAAa,IACbE,KAoEQr5F,MAAOqzC,EACP4lD,cAlEU,SAACj5F,GACnBm5F,EAAan5F,IAkELwpB,YAAaA,EACb0vE,oBAAqBE,IAEzBxhG,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAM2mF,EACNx1E,OAAQjlB,EAAMkB,EAAE,wCAChBgkB,QAASllB,EAAMkB,EACX,sCACA,CAAEimB,UAAW05E,EAAiBK,EAAoBL,GAAkB,KAExEzrD,SAAU,kBAAMslD,GAA2B,IAC3C/kD,UA1EkB,WACrBkrD,IAILn/F,EAAS0M,EAAe6gB,oBAAoBjvB,EAAMygB,MAAM7iB,IAAKijG,IAC7DnG,GAA2B,OAsEvB99F,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAM2sF,EACNx7E,OAAQjlB,EAAMkB,EAAE,6CAChBgkB,QAASllB,EAAMkB,EACX,2CACA,CAAEk7F,UAAW4E,EAAed,GAAgBc,EAAcrmD,GAAS,KAEvEvF,SAAU,kBAAMsrD,GAAyB,IACzC/qD,UAtHgB,WACpBqrD,IAIJt/F,EAASi/C,GAAW9+C,QAAQ82C,6BAA6B34C,EAAMygB,MAAM7iB,IAAKojG,IAC1EN,GAAyB,qBhBrFrBtD,6EAQZ,IiBDYiE,GCCG9/F,kBARY,SAACvB,GAGxB,OAAOpD,GAAA,qBAAK2nB,UAAU,UAAUnB,MAAO,CAAC6D,OAAQ,UAAWN,UAAW,SAAUgsB,MAAO,WAAY51C,QAF/E,kBAAMiD,EAAMjD,YAG3BiD,EAAM2/B,QAAS3/B,EAAMkB,EAAE,gBAAkBlB,EAAMkB,EAAE,kBCgE3CogG,GA3DG,SAACthG,GACf,IAmCYuhG,EAnCN57E,EAAcC,uBAAYrN,MAC1B3F,EAAegT,uBAAY1O,GAAyByO,EAAYjY,qBAChE8zF,IAAc5uF,GAAcA,EAAa4/B,QAAQ7sB,EAAY/nB,KAH1B0jB,EAMXC,qBAAS,GANEC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAMlCqe,EANkCne,EAAA,GAMzB+wE,EANyB/wE,EAAA,GAOnCvB,EAAYgwB,IAAc,GAC1Bx7B,EAASmR,uBAAY3F,GACrB9Z,EAAeyf,uBAAYsoB,MAS7BuzD,GARsBrO,mBAAgB,WACtC,OAAO3+E,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAM6X,SAAWkpE,IAAahpF,SAC7D,CAAC/D,IAMmBtF,mBACnBuyF,EAAkBvyF,kBAEtBsF,EACK9T,OAAO,SAAA8f,GAAK,OAAKA,EAAM6X,QAAUkpE,IACjC3tD,OAAO,SAAApzB,GAAK,OAAIA,EAAMvb,MAAM,SAAClE,EAAGg5B,GAAJ,OAAUh5B,IAAMg5B,EAAI,EAAKh5B,EAAKg5B,GAAM,EAAI,IACpEp5B,QAAQ,SAAA+gG,IAC8C,IAA/Cx7F,EAAaynC,GAAe+zD,EAAS/jG,MACrC8jG,EAAkBA,EAAgB5gG,KAAK6gG,IAEnChiE,GAAW8hE,EAAiBjpF,SAAW,EACvCkpF,EAAkBA,EAAgB5gG,KAAK6gG,GAEvCF,EAAmBA,EAAiB3gG,KAAK6gG,KAKtDhiE,IACC8hE,GAAmBF,EAAAE,GAAiB3gG,KAAjB4I,MAAA63F,EAAApjG,OAAAyZ,GAAA,EAAAzZ,CAAyBujG,EAAgBrrF,aAGhE,IAAMurF,EAAiBH,EAClB10F,IAAI,SAAC0T,GACN,OAAO7jB,GAAA,cAACilG,GAAD,CAAejjG,IAAK6hB,EAAM7iB,IAAK6iB,MAAOA,MAC9CpK,UAaH,OAXGqrF,EAAgBlpF,QAAU,GAAKipF,EAAiBjpF,QAAU,EACzDopF,EAAe9gG,KAAKlE,GAAA,cAACklG,GAAD,CAAoBniE,QAASA,EAAS/gC,IAAI,2BAA2B7B,QAhCjE,WACxBw1F,GAAY5yD,OAgCLA,GACP4yD,GAAW,GAQR31F,GAAA,cAAAA,GAAA,cAAGglG,IC/CCz8E,gBAjBO,SAACnlB,GACnB,IAAMigB,EAAYgwB,IAAc,GAC1Bx7B,EAASmR,uBAAY3F,GAEvB8hF,EAAe,iBAMnB,OAJG/hG,EAAMoD,SAASV,WAAa+kB,KAC5Bs6E,GAAgB,SAGZnlG,GAAA,cAACioB,GAAA,QAAD,CAASy6E,OAAO,EAAM/6E,UAAU,OAAOi6E,gBAAgB,SAAS15E,GAAI2C,IACvE7qB,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAU,qBAChB3nB,GAAA,qBAAK2nB,UAAWw9E,GAAgBttF,EAAO+D,SAFpC,uBCwCIjX,2BA9CO,SAACvB,GAA8B,IAAAshB,EACjBC,oBAAS,IADQC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC1C0gF,EAD0CxgF,EAAA,GAChCygF,EADgCzgF,EAAA,GAgBjD,OAJGxhB,EAAM+nB,OAAsB,KAAbi6E,GACdC,EAAY,IAGTrlG,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,SAC5DzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAgB1iB,EAAMkB,EAAE,yBACxBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,cAACooB,GAAA,EAAD,KACIpoB,GAAA,cAACslG,GAAA,EAAD,KACMliG,EAAMkB,EAAE,2BACVtE,GAAA,+BACAA,GAAA,uBAAGA,GAAA,mBAAGk1C,KAAK,0CAA0CtU,OAAO,UAAS5gC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,gBAA7E,aACHtI,GAAA,uBAAGA,GAAA,mBAAGk1C,KAAK,qDAAqDtU,OAAO,UAAS5gC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,gBAAxF,yBAGV,IAaJ,MCzCHi9F,GAAY,kFA0CHC,GAxCE,SAACpiG,GACd,IAAM0B,EAAW0jB,yBADsB9D,EAEWC,qBAAS,GAFpBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEhC+gF,EAFgC7gF,EAAA,GAEb8gF,EAFa9gF,EAAA,GAAAG,EAGaJ,qBAAS,GAHtBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGhC4gF,EAHgC3gF,EAAA,GAGZ4gF,EAHY5gF,EAAA,GAIjCxd,EAAOwhB,uBAAYrN,MAyBzB,OAAO3b,GAAA,cAAAA,GAAA,cACHA,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,MAAMxnB,QAzBD,WAC3BylG,GAAsB,GACtBF,GAAqB,KAwBb1lG,GAAA,qBAAK2nB,UAAU,UAAf,YACA3nB,GAAA,qBAAK2nB,UAAU,aAAanB,MAAO,CAACq/E,cAAc,OAAQC,WAAW,WAArE,kCAGR9lG,GAAA,cAAC+lG,GAAD,CAAe7uF,KAAMuuF,EAAmBhhG,QA1BnB,kBAAMihG,GAAqB,IA0BmB99E,SAzB1C,SAACw9E,GCxBF,IAACY,EAAsB59F,GAAtB49F,EDyBRZ,ECzB8Bh9F,EDyBpBZ,EAAKY,MCxB7BzJ,GAAgBgI,4BAAqC,CAACwjB,KAAM67E,EAAcvqD,UAAWrzC,KDyBnFpJ,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SAAqBoG,EAAXtI,OAEV+H,EAASuhD,EAAOphD,QAAQlI,MAAM,gBAAiBwoG,KAGhDtmG,IACC2mG,GAAsB,GACtBF,GAAqB,GACrB5gG,EAASuhD,EAAOphD,QAAQ3C,KAAK,gBAAiB,6CAGrDpD,MAAM,WACH4F,EAASuhD,EAAOphD,QAAQlI,MAAM,gBAAiBwoG,QAW4Cp6E,MAAOw6E,gBLnCtGlB,gGAQZ,IOCIwB,GCFAC,GRCEC,GAAkB,SAACl9F,EAAYm9F,GACjC,IAAM79C,EAAS,IAAIC,WACnBD,EAAOE,OAAS,WACZ,IAAIngC,EAAUigC,EAAOz6C,OAEN,OAAZwa,IACCA,EAAU,IAGd89E,EAAkB99E,IAEtBigC,EAAOG,WAAWz/C,IAGhBo9F,GAAmB,SAACp9F,GACtB,OAAOA,EAAKX,KAAKi1E,MAAM,KAAKxnB,MAAM,GAAI,GAAG/G,KAAK,MA4HnCrqD,kBAzHK,SAACvB,GACjB,IAAM8tD,EAAW/D,kBAAyB,MADGzoC,EAEbC,qBAAS,GAFIC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEtCgwB,EAFsC9vB,EAAA,GAE5B0hF,EAF4B1hF,EAAA,GAAAG,EAGDJ,qBAAS,GAHRK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGtCwhF,EAHsCvhF,EAAA,GAGtBwhF,EAHsBxhF,EAAA,GAAAG,EAIGR,qBAAS,GAJZS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAItCshF,EAJsCrhF,EAAA,GAIpBshF,EAJoBthF,EAAA,GAAAE,EAKPX,oBAAoB,MALbY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAKtCqhF,EALsCphF,EAAA,GAKzBqhF,EALyBrhF,EAAA,GAMvC09E,EAAe/jF,EAAa8E,2BAC5BqwB,EAAYrrB,uBAAYi6E,GACxBj7F,EAAUkX,EAAavD,qBACvBnU,EAAOwhB,uBAAYhhB,GACnBqb,EAAYgwB,KACZx7B,EAASmR,uBAAY3F,GAXkBu/C,EAYKj+C,oBAAS,aAZdk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAYtCikC,EAZsChkC,EAAA,GAYnBikC,EAZmBjkC,EAAA,GAAAC,EAafn+C,yBAA4B1jB,GAbb8hE,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAatCl/C,EAbsCm/C,EAAA,GAa7BgkC,EAb6BhkC,EAAA,GAcvCj+D,EAAW0jB,yBAMXw+E,EAAc,SAAC11E,EAAmBroB,EAAYg+F,GAChD,GAAGA,IAAexC,GAAWyC,SAAU,CACnC,GAAkB,IAAd7yD,EAGA,OAFAmyD,GAAkB,QAClBF,GAAY,GAIhBH,GAAgBl9F,EAAM,SAACqf,GACnB,IAAM6+E,EAAazlG,QACnBoD,EAAS0M,EAAeulB,eAAezF,EAAWhJ,EAAS6+E,IAC3Db,GAAY,GACZS,EAAWI,SAEZ,CACH,IAAMC,EAAoBvvF,EAAO9T,OAAO,SAAC8f,GACrC,OAAOA,EAAMvb,OAASgpB,IAG1B,GAAG81E,EAAkBxrF,QAAU,EAAG,CAC9B,IAAMyrF,EAAkCD,EAAkBvrF,QAE1DsqF,GAAgBl9F,EAAM,SAACqf,GACnB,IAAMg/E,EAAeD,EAAcloB,UAAU72D,EAAS9gB,EAAKxG,KAC3D8D,EAAS0M,EAAe0lB,oBAAoBowE,IAE5C/gG,OAAOs8B,WAAW,WACdkkE,EAAWO,EAAatmG,MACzB,IACHslG,GAAY,MAKxBp1C,EAAS9D,QAASnrD,MAAQ,IA8C9B,OAAG2hB,GAAqE,IAA1D/L,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAM7iB,MAAQ4iB,IAAShI,QACjD5b,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI2C,GAAsCjH,KAGxD5jB,GAAA,qBAAK2nB,UAAU,QAClB3nB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,cAAcxnB,QAzFhB,WAChB+wD,EAAS9D,QAASqE,SAwFoC/c,SAAUA,GAAU10C,GAAA,mBAAG2nB,UAAU,kBAAvF,oBACA3nB,GAAA,uBAAOuE,KAAK,OAAO6lD,IAAK8G,EAAU1qC,MAAO,CAAC2uB,QAAS,QAASpuB,SAjDrC,SAACjrB,GACxBwqG,GAAY,GAEZ,IAAMr9F,EAAOnN,EAAE8kC,OAAO8xB,MAAO,IAAM,KAE7BphC,EAAY+0E,GAAiBp9F,GAMnC,GAAiC,IAJP4O,EAAO9T,OAAO,SAAC8f,GACrC,OAAOA,EAAMvb,OAASgpB,IAGL1V,QAIjB,OAHAgrF,EAAe39F,GACf69F,EAAqBx1E,QACrBo1E,GAAoB,GAIxBM,EAAYX,GAAiBp9F,GAAOA,EAAMw7F,GAAWyC,aAgCrDlnG,GAAA,cAACkjG,GAAD,CAAwBhsF,KAAMqvF,EAAgB9hG,QA7BpB,WAC1B+hG,GAAkB,MA6BlBxmG,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMuvF,EAAkB5gF,WAAW,EAAMphB,QA1BrB,WAC3BiiG,GAAoB,KA0BhB1mG,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAgB1iB,EAAMkB,EAAE,sBACxBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,cAACooB,GAAA,EAAD,CAAS0B,KAAK,UAAU6qB,SAAS,EAAMrsB,QAASllB,EAAMkB,EAAE,oCAAoCoH,QAAQ,SAAUm7F,MAElH7mG,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAMnnB,QA5BL,WAC1BumG,GAAoB,GACjBC,GACCK,EAAYX,GAAiBM,GAAe,UAAWA,EAAalC,GAAWyC,YAyBpBlnG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAAlE,IAA8ElF,EAAMkB,EAAE,iCACtFtE,GAAA,cAAConB,GAAA,EAAD,CAAQmxB,OAAO,EAAMp4C,QAtBL,WACxBumG,GAAoB,GACjBC,GACCK,EAAYX,GAAiBM,GAAcA,EAAalC,GAAW8C,gBAmBVnkG,EAAMkB,EAAE,sCSpG9DK,kBA3CF,SAACvB,GAEV,IAAM0B,EAAW0jB,yBAFc9D,EAGGC,qBAAS,GAHZC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGxB+xB,EAHwB7xB,EAAA,GAGb8xB,EAHa9xB,EAAA,GAAAG,EAIKJ,qBAAS,GAJdK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAIxByiF,EAJwBxiF,EAAA,GAIZyiF,EAJYziF,EAAA,GAKzBuxB,EAAiBvtB,uBAAYwoB,MAC7BgF,EAAWxtB,uBAAYmoB,GAAwB,kBAAkB,IAGvE/wC,qBAAU,WACHm2C,GAAkBixD,GAAchxD,GAC/BE,GAAa,IAElB,CAACH,EAAgBixD,EAAYhxD,IAWhC,OAAOx2C,GAAA,cAAC61C,GAAA,EAAD,CACK3+B,KAAMu/B,EACN71C,SAAS,gBACT0nB,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,uBAAGA,GAAA,4BAASoD,EAAMkB,EAAE,+BACpBtE,GAAA,uBAAIoD,EAAMkB,EAAE,2BAAZ,KACAtE,GAAA,uBAAGA,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,gBAAd,OAAmCtI,GAAA,mBAAGk1C,KAAK,4DAA4DtU,OAAO,UAAUx9B,EAAMkB,EAAE,0BAChItE,GAAA,uBAAGA,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAS,UAAW1rB,OAAU,UAAWknC,MAAO,SAAUpxD,QAhBnE,WACpBu2C,GAAa,GACb5xC,EAAS+C,GAAkB,kBAAkB,MAcqEzE,EAAMkB,EAAE,uBAElHwxC,QACI91C,GAAA,cAAC2gG,GAAA,EAAD,CAAUh5E,UAAU,aAChB3nB,GAAA,cAACioB,GAAA,KAAD,CAAMC,GAAI2C,IACN7qB,GAAA,qBAAK2nB,UAAU,OAAOnC,IAAI,4BAA4B6+B,IAAI,oBAAqB65C,OAhB9E,WACrBuJ,GAAc,YCDPC,GA1Ba,SAACtkG,GACzB,IAAM0B,EAAW0jB,yBAEX4qB,EAAwBa,KAYxBlwC,EAXqBilB,uBAAYoqB,GAWLrvC,OAElC,OAAO/D,GAAA,qBAAK2nB,UAAU,QAClB3nB,GAAA,qBAAK2nB,UAAU,iBACX3nB,GAAA,uBAAOuE,KAAK,OAAOyjB,YAAY,YAAY/lB,MAAO8B,EAAQgjB,SAb7C,SAACjrB,GAClBgJ,EAASyxB,GAAoBz6B,EAAE8kC,OAAO3+B,WAatB,KAAX8B,GAAiB/D,GAAA,mBAAG2nB,UAAU,gBACnB,KAAX5jB,GAAiB/D,GAAA,mBAAG2nB,UAAU,kBAAkBnB,MAAO,CAAC6D,OAAQ,WAAYlqB,QAXjE,SAACrE,GACjBA,EAAEm5C,iBACFnwC,EAASyxB,GAAoB,4CCLxBoxE,GAA8B,CACvC/vE,SAAUrlB,kBACVxO,OAAQ,GACR6yB,OAAO,GAOEgxE,GAAc,SAAC7jG,GACxB,IAAM8jG,EAAQ9jG,EAAOw5E,MAAM,KAErBuqB,EAAoB,GACpBC,EAAsB,GACtBC,EAAuB,GACvBC,EAAqB,GAc3B,OAZAJ,EAAM7jG,QAAQ,SAAAkkG,IACiB,IAAxBA,EAAKniG,OAAO,OACX+hG,EAAQ5jG,KAAKgkG,EAAKx8F,QAAQ,MAAO,IAAIy8F,SACN,IAA1BD,EAAKniG,OAAO,SACjBgiG,EAAU7jG,KAAKgkG,EAAKx8F,QAAQ,QAAS,IAAIy8F,OAAO10D,gBAClB,IAAzBy0D,EAAKniG,OAAO,QACjBkiG,EAAS/jG,KAAKgkG,EAAKx8F,QAAQ,OAAQ,IAAIy8F,OAAO10D,eAE9Cu0D,EAAW9jG,KAAKgkG,EAAKC,UAItB,CAACL,UAASC,YAAWC,aAAYC,WAAUG,QAAQ,IAWxDC,GAAY,SAACzrE,EAAY74B,GAC3B,GAAGA,EAAOgkG,UAAUtlG,SAAWsB,EAAOgkG,UAAU9jG,SAAS24B,EAAKS,UAAUoW,eACpE,OAAO,EAGX,GAAG1vC,EAAO+jG,QAAQrlG,SAAWsB,EAAO+jG,QAAQ7jG,SAAS24B,EAAKc,SACtD,OAAO,EAGX,GAAG35B,EAAOkkG,SAASxlG,OAAQ,KAAAqP,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IACvB,QAAAiR,EAAAD,EAAkBlO,EAAOkkG,SAAzBx6F,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAAmC,KAAxB/F,EAAwBmG,EAAAjQ,MAC/B,IAAI26B,EAAKmB,UAAU/e,SAASjT,GAAM,CAE9B,GAAW,YAARA,EAKC,OAAO,EAJP,IAAI6wB,EAAKmB,UAAU/e,SAAS,UACxB,OAAO,IANA,MAAAjR,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,IAe3B,IAAIs2F,GAAuB,EAc3B,OAZAvkG,EAAOikG,WAAWhkG,QAAQ,SAAAukG,GACnBxkG,EAAOqkG,OACHxrE,EAAKY,YAAc+qE,IAClBD,GAAuB,IAG4C,IAApE1rE,EAAKY,UAAUiW,cAAc1tC,OAAOwiG,EAAY90D,iBAC/C60D,GAAuB,KAK5BA,GAGLE,GAAiB,SAAjBA,EAAkBnhF,EAAsBtjB,GAC1C,IAAM0kG,EAA2B,GAC3BC,EAnDyB,SAAC3kG,GAChC,OAAmC,IAA5BA,EAAOgkG,UAAUtlG,QAAgBsB,EAAOgkG,UAAU,KAAO5nF,GAASod,QAkDjDorE,CAAoB5kG,GACtC6kG,EAhDyB,SAAC7kG,GAChC,OAAmC,IAA5BA,EAAOgkG,UAAUtlG,QAAgBsB,EAAOgkG,UAAU,KAAO5nF,GAASmd,eAAemW,cA+ChEo1D,CAAoB9kG,GA8B5C,OA5BAsjB,EAASrjB,QAAQ,SAAAq8B,GACb,GAAGqoE,GAAmBroE,EAAMhD,YAAcld,GAASod,QAC5C8qE,GAAUhoE,EAAOt8B,IAChB0kG,EAAiBvkG,KAAKm8B,QAM9B,GAAGuoE,GAAmBvoE,EAAMhD,YAAcld,GAASmd,eAC5C+qE,GAAUhoE,EAAOt8B,IAChB0kG,EAAiBvkG,KAAKm8B,OAF9B,CAOA,IAAMyoE,EAAsBN,EAAenoE,EAAMhZ,WAAYtjB,GAE1D+kG,EAAoBltF,QAAU,EAC7B6sF,EAAiBvkG,KAAKm8B,EAAM0oE,YAAYD,IAIzCT,GAAUhoE,EAAOt8B,IAChB0kG,EAAiBvkG,KAAKm8B,EAAM0oE,YAAYD,OAIzCv2F,gBAAKk2F,IAGVO,GAAiB,SAAjBA,EAAkBpxE,EAAsB7zB,GAC1C,IAAMklG,EAA2B,GAejC,OAbArxE,EAAS5zB,QAAQ,SAAAklG,GAEd,IAAMJ,EAAsBE,EAAeE,EAAI7hF,WAAYtjB,GAExD+kG,EAAoBltF,QAAU,GAC7BqtF,EAAiB/kG,KAAjB4I,MAAAm8F,EAAgB1nG,OAAAyZ,GAAA,EAAAzZ,CAASunG,EAAoBrvF,YAG9C4uF,GAAUa,EAAKnlG,IACdklG,EAAiB/kG,KAAKglG,KAItB32F,gBAAK02F,IAGHE,GAAb,SAAA9nG,GAAA,SAAA8nG,IAAA,OAAA5nG,OAAAC,GAAA,EAAAD,CAAAE,KAAA0nG,GAAA5nG,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAA4nG,GAAAr8F,MAAArL,KAAAe,YAAA,OAAAjB,OAAAO,GAAA,EAAAP,CAAA4nG,EAAA9nG,GAAAE,OAAAQ,GAAA,EAAAR,CAAA4nG,EAAA,EAAAnnG,IAAA,YAAAC,MAAA,SACqB2J,GAEb,OAAOA,EAAM1J,IAAI,SAAUT,KAAKsC,UAHxC,CAAA/B,IAAA,4BAAAC,MAAA,WAOQ,IAAMmnG,EAAexB,GAAYnmG,KAAKsC,QAEtC,OAAOykG,GAAe/mG,KAAKm2B,SAAUwxE,KAT7C,CAAApnG,IAAA,aAAAC,MAAA,WAaQ,MAAuB,KAAhBR,KAAKsC,SAbpB,CAAA/B,IAAA,oCAAAC,MAAA,SAgB6ConG,EAAkB1vE,GACvD,OAAOqvE,GAAevnG,KAAKm2B,SAAU,CACjCkwE,QAAS,GACTE,WAAY,CAACruE,GACbyuE,QAAQ,EACRH,SAAU,GACVF,UAAW,CAACsB,OAtBxB,CAAArnG,IAAA,aAAAC,MAAA,SA0BsBy3B,GACd,IAAM4vE,EAAcN,GAAevnG,KAAKm2B,SAAU,CAC9CkwE,QAAS,CAACpuE,GACVsuE,WAAY,GACZC,SAAU,GACVF,UAAW,GACXK,QAAQ,IAGZ,GAAGkB,EAAY70D,KAAO,EAClB,OAAO60D,EAAYztF,YApC/BstF,EAAA,CAAkChnG,kBAAOwlG,KCnJ5B4B,GAAoC,SAAC3lF,GAAD,OAAoF,SAACzgB,GAAD,OAFpG,SAACA,EAAiCygB,GAAlC,OAAgFzgB,EAAME,MAAM,CAAC,kBAAmB,eAAgBugB,KAAa,IAAIulF,GAERK,CAAyBrmG,EAAOygB,KLmBtM6lF,GAAgB,GAGdC,GAAsB,SAACC,EAAmBC,GAC5C,OAAIA,EAIGD,EAAUj+F,QAAV,QAAApF,OAA0BsjG,EAA1B,KAA2C,IAHvCD,GAMTE,GAAmB,SAACF,EAAmBC,GACzC,OAAIA,EAIG,QAAAtjG,OAAQsjG,EAAR,KAA0BD,EAHtBA,GAMTG,GAAkB,SAACvlG,GACrB,OAAQA,GACJ,KAAK4b,GAASrG,MACd,KAAKqG,GAAShG,QACd,KAAKgG,GAAS1Q,KACd,KAAK0Q,GAASmpC,UACd,KAAKnpC,GAAS3hB,SACd,KAAK2hB,GAASopC,OACd,KAAKppC,GAASspC,eACd,KAAKtpC,GAASqpC,QACd,KAAKrpC,GAASupC,GACd,KAAKvpC,GAASmd,eACd,KAAKnd,GAASod,QACd,KAAKpd,GAAS2J,KACd,KAAK3J,GAAS6F,MACd,KAAK7F,GAASwpC,SACV,OAAO,EACX,QACI,OAAO,IAIfogD,IAAe,EAEbC,GAA6B,SAACzlG,GAChC,OAAQA,GACJ,KAAK27B,GAAgB5C,eAAemW,cAChC,OAAOvT,GAAgB5C,eAC3B,KAAK4C,GAAgBypB,SAASlW,cAC1B,OAAOvT,GAAgBypB,SAC3B,KAAKzpB,GAAgBspB,QAAQ/V,cACzB,OAAOvT,GAAgBspB,QAC3B,KAAKtpB,GAAgBupB,eAAehW,cAChC,OAAOvT,GAAgBupB,eAC3B,QACI,OAAOllD,IAmJJI,kBA/IY,SAACvB,GACxB,IAAM0B,EAAW0jB,yBAEXyhF,EAAuBV,GAAkCnmG,EAAMqI,MAAMkmC,OAAO3wC,KAC5EkpG,EAAelhF,uBAAYihF,GAJ0BvlF,EAKjCC,oBAASulF,EAAanmG,QALW6gB,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAKpDziB,EALoD2iB,EAAA,GAK7C4mC,EAL6C5mC,EAAA,GAMrDulF,EAAch9C,kBAAyB,MANcpoC,EAOvBJ,qBAAS,GAPcK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAOpDqlF,EAPoDplF,EAAA,GAOxCqlF,EAPwCrlF,EAAA,GAAAG,EAQnBR,sBARmBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAQpDykF,EARoDxkF,EAAA,GAQtCklF,EARsCllF,EAAA,GAAAE,EASfX,qBAAS,GATMY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GASpDilF,EAToDhlF,EAAA,GASpCilF,EAToCjlF,EAAA,GAY3D,GAAGkkF,KAAkBS,EAAanmG,OAAQ,CACtC0lG,GAAgBS,EAAanmG,OAC7BkiG,GAAmB2D,EAEnB,IAAMR,EAAexB,GAAYsC,EAAanmG,QAE3CqlG,EAAarB,UAAUtlG,SACtBwjG,GAAmBmD,EAAarB,UAAU,GAEvCxmG,OAAO42C,OAAOjY,IAAiB/vB,IAAI,SAAA5L,GAAI,OAAIA,EAAKkvC,gBAAexvC,SAASgiG,IACvEqE,EAAgBrE,IAEhBA,GAAmB2D,GAI3Bp+C,EAASk+C,GAAoBQ,EAAanmG,OAAQkiG,UAC/C,GAAGA,KAAqB2D,EAAc,CACzC,IAAMR,EAAexB,GAAYsC,EAAanmG,QAE3CqlG,EAAarB,UAAUtlG,QAAU2mG,EAAarB,UAAU,KAAO9B,KAC9Dz6C,EAASk+C,GAAoBQ,EAAanmG,OAAQkiG,KAClDqE,EAAgBrE,KAIrBiE,EAAatzE,OACTuzE,GAAeA,EAAY/8C,UAC1B+8C,EAAY/8C,QAAQx2B,QACpB9xB,EAAS6xB,GAAmBvzB,EAAMqI,MAAMkmC,OAAO3wC,IAAKkpG,EAAanmG,QAAQ,KAIjF,IAAM0mG,EAAuBh8F,YAAW,SAAC3C,GACrC29F,GAAgBI,GAAiB/9F,EAAK89F,GACtC9kG,EAAS6xB,GAAmBvzB,EAAMqI,MAAMkmC,OAAO3wC,IAAKyoG,MACrD,KAgCGiB,EAAc,WAChBl/C,EAAS,IACT8+C,OAAgBrpG,GAChBwoG,GAAgB,GAChBxD,QAAmBhlG,EACnB6D,EAAS6xB,GAAmBvzB,EAAMqI,MAAMkmC,OAAO3wC,IAAK,MASlD2pG,EAAcf,EAAev6C,GAAQC,aAAas6C,GAAgB,UAClEgB,EAAaL,EAAiB,SAAW,GAE/C,OAAOvqG,GAAA,qBAAK2nB,UAAU,QAClB3nB,GAAA,qBAAK2nB,UAAU,mCACX3nB,GAAA,cAACgqB,GAAA,EAAD,CAAU9S,KAAMkzF,EAAYtgF,MAAM,EAAOrlB,QAAS,WAC9C4lG,GAAc,IACfQ,WAAW,GACV7qG,GAAA,cAAC8qG,GAAA,EAAD,CAActkF,MAAO,CAACulD,OAAQ,OAC1B/rE,GAAA,cAAC+qG,GAAA,EAAD,CAAc5gF,KAAK,eAAeL,KAAK,QAAQ4qB,UAAWk1D,EAAczpG,QA9B9D,WACtBspG,GAAgBC,GAAoBD,GAAeG,GACnD3D,QAAmBhlG,EACnBqpG,OAAgBrpG,GAChB6D,EAAS6xB,GAAmBvzB,EAAMqI,MAAMkmC,OAAO3wC,IAAKyoG,QA2BxCzpG,GAAA,cAACgrG,GAAA,EAAD,MACCzpG,OAAO42C,OAAOjY,IAAiBn8B,OAAO+lG,IAAiB35F,IAAI,SAAA5L,GACxD,OAAOvE,GAAA,cAAC+qG,GAAA,EAAD,CACH/oG,IAAKuC,EACLpE,QAAS,kBA3CR,SAACoE,GACtBklG,GAAgBC,GAAoBD,GAAeG,GACnDU,EAAgB/lG,GAChB0hG,GAAmB1hG,EACnBklG,GAAgBI,GAAiBJ,GAAellG,GAChDO,EAAS6xB,GAAmBvzB,EAAMqI,MAAMkmC,OAAO3wC,IAAKyoG,KAsCjBwB,CAAiB1mG,EAAKkvC,gBACrC3pB,KAAM9pB,GAAA,cAACswD,GAAD,CAAU77B,SAAUlwB,IAC1B4lB,KAAM/mB,EAAMkB,EAAE,mBAAmBC,SAIjDvE,GAAA,qBAAK2nB,UAAW,qCAAqCijF,EAAYpkF,MAAO,CACpE0kF,UAAW,oBACX9O,aAAc,oBACdhqC,WAAY,oBACZ+4C,oBAAqB,gBACrBC,uBAAwB,kBAExBprG,GAAA,wBAAQ2nB,UAAU,uBAAuBskD,YAlEvB,WAC1B89B,GAAeK,GAiEsEjqG,QA9D/D,WAClB4pG,IACAM,GAAc,MA6DJT,GAAgB5pG,GAAA,mBAAG2nB,UAAU,cAAcnB,MAAO,CAACuvB,MAAO40D,KAC3Df,GAAgB5pG,GAAA,cAACswD,GAAD,CAAU77B,SAAUu1E,GAA2BJ,GAAen1D,KAAK,aAG5Fz0C,GAAA,uBACIuE,KAAK,OACLyjB,YAAY,YACZjB,SA/ES,SAACjrB,GAClB0vD,EAAS1vD,EAAE8kC,OAAO3+B,OAClBwoG,EAAqB3uG,EAAE8kC,OAAO3+B,QA8EtBopG,QAAS,kBAAMb,GAAkB,IACjCvO,OAAQ,kBAAMuO,GAAkB,IAChC7iF,UAAU,cAAc1lB,MAAOA,EAC/BmoD,IAAK+/C,EACLp+C,UA9CU,SAACjwD,GACF,KAAdA,EAAE8oE,SACD8lC,KA6CIlkF,MAAO,CAACjC,MAAO,UACjB2lF,EAAaoB,eAAiB1B,GAAgB5pG,GAAA,mBAAG2nB,UAAU,iBAC3DuiF,EAAaoB,cAAgB1B,IAC/B5pG,GAAA,mBAAG2nB,UAAU,kBAAkBnB,MAAO,CAAC6D,OAAQ,WAAYlqB,QAASuqG,QM/MjEniF,gBAPA,SAACnlB,GACZ,OAAOpD,GAAA,cAACm6F,GAAA,EAAD,KACHn6F,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAkB9C,UAAW2/E,KACvD1nG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KhRPWiI,wBgRO2BsiB,UAAWwjF,mBCuC9DC,GA/BS,SAACpoG,GAErB,IAAM0B,EAAW0jB,yBACX+tB,EAAiBvtB,uBAAYwoB,MAC7Bi6D,EAASziF,uBAAYmoB,GAAwBF,GAAgB7tC,EAAM4jC,OAAO,IAahF,OAXA5mC,qBACI,WACImG,OAAOs8B,WAAW,WACV0T,IAAmBk1D,GACnB3mG,EAAS+C,GAAkBopC,GAAgB7tC,EAAM4jC,OAAO,KAE7D,MAEP,CAACykE,EAAQl1D,IAITv2C,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAACooB,GAAA,EAAD,KACIpoB,GAAA,cAACskD,GAAA,EAAD,CAAO38B,UAAS,GAAArhB,OAAKmlG,EAAS,QAAU,MAAxB,uBAAhB,yBAC2B5U,KAAOzzF,EAAM4jC,MAAM0kE,OAAO,OAEpDtoG,EAAMikB,aCvCdskF,GAAa,CACtB,CACI3kE,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,mCAGA5rG,GAAA,uBACIA,GAAA,wBACIA,GAAA,gEACAA,GAAA,sEACAA,GAAA,oEACAA,GAAA,mDACAA,GAAA,0DAKhB,CACIgnC,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,6BAGA5rG,GAAA,wIAGAA,GAAA,uBACIA,GAAA,wBACIA,GAAA,mCACIA,GAAA,wBACIA,GAAA,wHACAA,GAAA,8GAGRA,GAAA,wDACIA,GAAA,wBACIA,GAAA,uCACIA,GAAA,wBACIA,GAAA,mCACAA,GAAA,oCACAA,GAAA,mCACAA,GAAA,uCAKhBA,GAAA,iCACIA,GAAA,wBACIA,GAAA,wCACAA,GAAA,wCACAA,GAAA,uCAGRA,GAAA,sCACIA,GAAA,wBACIA,GAAA,6GAGRA,GAAA,4CACIA,GAAA,wBACIA,GAAA,gJACAA,GAAA,uHACAA,GAAA,iHACIA,GAAA,wBACIA,GAAA,yHAGRA,GAAA,6EACAA,GAAA,oDACAA,GAAA,8DACAA,GAAA,kHAOxB,CACIgnC,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,qBAGA5rG,GAAA,oZAKR,CACIgnC,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,yCAGA5rG,GAAA,udAGR,CACIgnC,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,2BAGA5rG,GAAA,mZAGR,CACIgnC,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,sBAGA5rG,GAAA,2VAAoUA,GAAA,mBAAGk1C,KAAK,kMAAR,qMAG5U,CACIlO,KAAM,aACN1e,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,cAAC4rG,GAAA,EAAD,qBAGA5rG,GAAA,mTAA0RA,GAAA,mBAAGk1C,KAAK,0EAA0EtU,OAAO,UAAzF,2BAA1R,QAyBGirE,GAdI,SAACzoG,GAChB,OACIpD,GAAA,cAACqpB,GAAA,EAAD,KACIrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,EAAMotB,QAAQ,GAC1Bg1D,GAAWx7F,IAAI,SAAC27F,EAAQC,GAAT,OACZ/rG,GAAA,cAACgsG,GAAD,CAAiBhqG,IAAK+pG,EAAa/kE,KAAM8kE,EAAO9kE,MAC3C8kE,EAAOxjF,cClHjBC,gBAfC,SAACnlB,GAEb,IAAMmG,EAAeyf,uBAAYsoB,MAE3B11B,EAAQ+vF,GACTx7F,IAAI,SAAA27F,GAAM,OAAIA,EAAO9kE,OACrBjjC,OAAO,SAAAijC,GAAI,OAAKz9B,EAAY,UAAAjD,OAAW0gC,EAAX,cAC5BvkC,OAEL,OAAOzC,GAAA,cAACioB,GAAA,QAAD,CAASN,UAAU,OAAOO,GnRNdziB,sBmROfzF,GAAA,qBAAK2nB,UAAW,kBnRPDliB,uBmROqBrC,EAAMoD,SAASV,SAA6B,QAAW8V,EAAQ,EAAG,OAAS,KAAOA,GADnH,aCKIjX,kBAjBC,SAACvB,GAEb,OAAOpD,GAAA,cAAAA,GAAA,cACHA,GAAA,qBAAK2nB,UAAU,uBACX3nB,GAAA,qBAAK2nB,UAAU,iBAAf,gBACA3nB,GAAA,cAACspB,GAAA,EAAD,CAAM3B,UAAU,wBACZ3nB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,WAAWutB,KAAK,mCAAmCtU,OAAO,UAA5E,YAEJ5gC,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,qBAAK2nB,UAAU,cAAf,qECaLhjB,kBAdS,SAACvB,GACrB,OAAOpD,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACisG,GAAD,CAAMh6B,WAAW,IACjBjyE,GAAA,cAACksG,GAAD,MACAlsG,GAAA,cAACmsG,GAAD,MACAnsG,GAAA,cAACosG,GAAD,MACApsG,GAAA,cAACqsG,GAAD,MACArsG,GAAA,cAACssG,GAAD,MACAtsG,GAAA,cAACusG,GAAD,MACAvsG,GAAA,cAACwsG,GAAD,MACAxsG,GAAA,cAACysG,GAAD,SCHOC,GAbE,SAACtpG,GACd,IAAM8T,IAAS9T,EAAM8T,KAErB,OAAQ9T,EAAMmB,MACV,KAAK4b,GAAS6d,MACV,IAAM8yC,EAAW55D,EAAO,cAAgB,SACxC,OAAOlX,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMwoE,EAAWtqD,MAAO,CAAC6D,OAAQ,WAAY1C,UAAWvkB,EAAMukB,UAAWlnB,MAAO2C,EAAM3C,QACvG,QACI,OAAOT,GAAA,cAACswD,GAAD,CAAU77B,SAAUrxB,EAAMmB,KAAMkwC,KAAK,SAASh0C,MAAO2C,EAAM3C,MAAOknB,UAAWvkB,EAAMukB,cCYlGglF,GAAqB,KAiOVhoG,kBA/NI,SAACvB,GAA2B,IAAAshB,EACHC,qBAAS,GADNC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACpCkoF,EADoChoF,EAAA,GACtBioF,EADsBjoF,EAAA,GAAAG,EAEHJ,qBAAS,GAFNK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEpC+nF,EAFoC9nF,EAAA,GAEtB+nF,EAFsB/nF,EAAA,GAAAytD,EAG3B5d,KAAT/9B,EAHoCv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAAAttD,EAKfR,oBAAS,GALMS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAKpC2wE,EALoC1wE,EAAA,GAK5BsxE,EAL4BtxE,EAAA,GAAAE,EAMSX,oBAAuB,MANhCY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAMpC0nF,EANoCznF,EAAA,GAAAq9C,GAAAr9C,EAAA,GAOHZ,qBAAS,IAPNk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAOpCqqC,EAPoCpqC,EAAA,GAOtBqqC,EAPsBrqC,EAAA,GAAAC,EAQGn+C,qBAAS,GARZo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAQpCqqC,EARoCpqC,EAAA,GAQnBqqC,EARmBrqC,EAAA,GAWrCxtC,GAFW/M,yBAEAsO,EAAMiL,UAAU3+B,EAAM46B,QACjCwF,EAAS1M,EAAMo9B,SAAS9wD,EAAM46B,OAEpC59B,qBAAU,WACNysG,EAAgBzpG,EAAMiqG,SACvB,CAACjqG,EAAMiqG,SAGV,IAuFMC,EAAc/3E,EAAU,MAAQ,YAChCg4E,EAAW/pE,EAAQ,OAAS,YAC5BgqE,EAAkBpqG,EAAM4pG,mBAAoB5pG,EAAM4pG,mBAAqBA,EAE7E,OAAOhtG,GAAA,cAAAA,GAAA,eACDitG,GAAgBjtG,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CAAW1D,MAAO,CAACE,QAAS,MAAOqf,WAAY,oBACnDlc,GAAKo3E,WACL/4E,GAAG,IACH4gE,SAAU,kBAAM,GAChB3oF,QAAS,SAACrE,IAhGA,SAAC2xG,EAAmB3xG,GAC5C,GAAG,OAAS6wG,GAOR,OANApmG,OAAOgiE,aAAaokC,IACpBA,GAAgB,UACbp3E,IACCuB,EAAM29B,eAAerxD,EAAM46B,OAC3B04D,EAAUZ,EAAS,KAK3B6W,GAAgBpmG,OAAOs8B,WAAW,WAC1B4qE,GAAa32E,EAAMmN,cAAc7gC,EAAM46B,SACvClH,EAAMy9B,iBAAiBnxD,EAAM46B,OAE1B56B,EAAMsqG,sBACLtqG,EAAMsqG,wBAIXD,IAAarqG,EAAM46B,MAAMG,mBACxBrH,EAAM09B,0BACHpxD,EAAMsqG,sBACLtqG,EAAMsqG,wBAIdb,GAAiBY,GACdX,GACCC,GAAgB,GAEpBJ,GAAgB,MACjB,KAEH7wG,EAAEm5C,iBA8D6B04D,CAAoBf,EAAc9wG,IACnD8xG,cA5DY,SAAC9xG,GAC3BA,EAAEwuB,kBACFxuB,EAAEm5C,iBAEF83D,GAAgB,IAyDFplF,UAAW4N,EAAS,GAAK,UAEnCv1B,GAAA,cAAC6tG,GAAD,CAAUtpG,KAAM4b,GAAS6d,MACf9mB,KAAM01F,EACNnsG,MAAO2C,EAAMkB,EAAE,kCACfqjB,WAAYvkB,EAAMyyB,OAAQ,eAAiB,UAAgC,OAApB23E,EAA2BA,EAAiB,gBAAkB,eAAkB,MAChJhqE,GAAUxjC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMilG,EAAU5lF,UAAU,cAAc8sB,KAAK,OAAOq5D,QAAQ,KAC3Ev4E,GAAWv1B,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMglG,EAAa3lF,UAAU,eAAe8sB,KAAK,OAAOq5D,QAAQ,IACnF9tG,GAAA,cAACuS,GAAA,EAAKwT,QAAN,KACI/lB,GAAA,cAAC61C,GAAA,EAAD,CACIj1C,SAAS,gBACTmtG,oBAAoB,EACpBC,0BAA0B,EAC1BC,cAAc,EACd/2F,KAAM41F,EACNroG,QAAS,kBAAMsoG,GAAgB,IAC/BvmF,MAAO,CAACE,QAAS,OACjBovB,QACI91C,GAAA,yBACIA,GAAA,cAAC+1F,GAAD,CAAgBp8D,MAAOv2B,EAAMkF,KAAMktF,UAAW,MAGtDltE,QACItoB,GAAA,cAAAA,GAAA,eACEmtG,GAAmBntG,GAAA,cAACiqB,GAAA,EAAD,CAAMo+B,WAAW,EAAM2yC,SAAS,GACjDh7F,GAAA,cAAC2gG,GAAA,EAAD,CACIlgG,MAAO2C,EAAMkB,EAAE,+BACfnE,QAAS,SAAArE,GACTA,EAAEwuB,kBAnE1B4iF,GAAgB,KAsEQltG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,UAEftI,GAAA,cAAC2gG,GAAA,EAAD,CACIlgG,MAAO2C,EAAMkB,EAAE,gCACfnE,QAAS,SAAArE,GACTA,EAAEwuB,kBAzF1BwM,EAAMq9B,UAAU/wD,EAAM46B,OAAQlH,EAAMo9B,SAAS9wD,EAAM46B,QACnD04D,EAAUZ,EAAS,KA2FI91F,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMilG,KAEfvtG,GAAA,cAAC2gG,GAAA,EAAD,CACIlgG,MAAO2C,EAAMkB,EAAE,gCACfnE,QAAS,SAAArE,GACTA,EAAEwuB,kBA7FH,WACvB,IAAM4jF,GAAiBp3E,EAAMiL,UAAU3+B,EAAM46B,OAC7ClH,EAAMk9B,eAAe5wD,EAAM46B,MAAOkwE,GAC/B9qG,EAAM+qG,0BACL/qG,EAAM+qG,yBAAyBD,GAEnCxX,EAAUZ,EAAS,GAwFKsY,KAEApuG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMglG,KAEhBttG,GAAA,cAAC2gG,GAAA,EAAD,CAAUh5E,UAAU,aAAaxnB,QAAS,SAAArE,GACtCA,EAAEwuB,kBA1E1B8iF,GAAmB,IA4EI3sG,MAAO2C,EAAMkB,EAAE,kCAA6CowC,UAAWtxC,EAAMirG,WAC5EruG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,YAGlB6kG,GAAmBntG,GAAA,cAACiqB,GAAA,EAAD,CAAMo+B,WAAW,EAAM2yC,SAAS,GAChDh7F,GAAA,cAAC2gG,GAAA,EAAD,KACKv9F,EAAMkB,EAAE,0CAEbtE,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBA7E9BwM,EAAMw9B,YAAYlxD,EAAM46B,OACxBovE,GAAmB,KAgFMhqG,EAAMkB,EAAE,iBAEbtE,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBA1F9B8iF,GAAmB,GACnBL,GAAgB,KA6FS3pG,EAAMkB,EAAE,oBAMxBsoG,GAAgBxpG,EAAMikB,WAI9B4lF,GACDjtG,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CAAWvC,UAAU,aACjB3nB,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EAAMyuB,OAAO,EAAM9D,KAAK,UAClCz0C,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,oBAEftI,GAAA,cAACq8F,GAAD,CACIlyE,KAAM/mB,EAAM46B,MAAMR,UAClBq+D,SAAUyS,GACVnS,UAAWoS,GACX7nF,QAAS8nF,GACT1S,SAAU,IACVn3B,UAAU,EACVg3B,cA/HY,SAAC8S,GACrB33E,EAAM49B,eAAetxD,EAAM46B,MAAOywE,GAClCvB,GAAgB,GAChBH,GAAgB,IA6HRn2E,OAAO,EACP4hB,SAtIkB,WAC1B00D,GAAgB,GAChBH,GAAgB,IAqIR/kF,YAAa,cCtOzB2kF,GAAqB,KA2KVhoG,kBAzKO,SAACvB,GAA8B,IAAAshB,EAErBC,oBAAS,GAFYC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE1CoxE,EAF0ClxE,EAAA,GAElC8xE,EAFkC9xE,EAAA,GAAAG,EAGTJ,qBAAS,GAHAK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAG1C6nF,EAH0C5nF,EAAA,GAG5B6nF,EAH4B7nF,EAAA,GAAAG,EAITR,qBAAS,GAJAS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAI1C2nF,EAJ0C1nF,EAAA,GAI5B2nF,EAJ4B3nF,EAAA,GAAAE,EAKbX,qBAAS,GALIY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAK1CopF,EAL0CnpF,EAAA,GAK9BopF,EAL8BppF,EAAA,GAAAktD,EAMjC5d,KAAT/9B,EAN0Cv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAQjDryE,qBAAU,WACNysG,EAAgBzpG,EAAMiqG,SACvB,CAACjqG,EAAMiqG,SAEV,IAAM7pE,EAAS1M,EAAMo9B,SAAS9wD,EAAMo2B,SAC9BjE,EAAUuB,EAAMiL,UAAU3+B,EAAMo2B,SAChC8zE,EAAc/3E,EAAU,MAAQ,YAChCg4E,EAAW/pE,EAAS,OAAS,YA4D7BorE,EAAkBxrG,EAAMo2B,QAAQ6D,YAAcld,GAASmd,gBAAkBl6B,EAAMo2B,QAAQ6D,YAAcld,GAASod,QAC9GsxE,EAAgBzrG,EAAMo2B,QAAQnS,WAAWtjB,OAAO+qG,IAChDC,EAAcx5E,EAAS,GAAK,UAGlC,OAAOv1B,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACuS,GAAA,EAAK2X,KAAN,CAAWL,GAAKo3E,WACE/4E,GAAI,CAACpiB,SAAU+kB,GAAsCznB,EAAMwgB,SAAU7d,OAAM,UAAAO,OAAYlD,EAAMo2B,QAAQkE,QAA1B,YAAAp3B,OAA4CwvF,IACvH31F,QAlEE,SAACrE,GAGrB,GAFAA,EAAEwuB,kBAEC,OAASqiF,GAIR,OAHApmG,OAAOgiE,aAAaokC,IACpBA,GAAgB,UAChBjW,EAAUZ,EAAS,GAIvB6W,GAAgBpmG,OAAOs8B,WAAW,WAE9BgqE,GAAiBD,GACdE,GACCC,GAAgB,GAEpBJ,GAAgB,MACjB,KAGAp3E,GAAWnyB,EAAMo2B,QAAQ6D,YAAcld,GAASmd,gBAAkBl6B,EAAMo2B,QAAQ6D,YAAcld,GAASod,QACtGm5D,EAAUZ,EAAS,GAEnBh6F,EAAEm5C,kBA4CY24D,cAxCQ,SAAC9xG,GAC3BA,EAAEwuB,kBACFxuB,EAAEm5C,iBACF83D,GAAgB,IAsCEjkB,SAAU,kBAAM,GAChBtiE,MAAO,CAACE,QAAS,OACjBiB,UAAWmlF,EAAc,OAASiC,EAAcA,GAE9D/uG,GAAA,cAAC6tG,GAAD,CAAUtpG,KAAMnB,EAAMo2B,QAAQ6D,UAAWnmB,KAAM01F,IAC9CppE,GAAUxjC,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMilG,EAAU5lF,UAAU,cAAc8sB,KAAK,OAAOq5D,QAAQ,KAC3Ev4E,GAAWv1B,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMglG,EAAa3lF,UAAU,eAAe8sB,KAAK,OAAOq5D,QAAQ,IAEnF9tG,GAAA,cAACuS,GAAA,EAAKwT,QAAN,KACI/lB,GAAA,cAAC61C,GAAA,EAAD,CACIj1C,SAAS,gBACTmtG,oBAAoB,EACpBC,0BAA0B,EAC1BC,cAAc,EACd/2F,KAAM41F,EACNroG,QAAS,kBAAMsoG,GAAgB,IAC/Bj3D,QAAS91C,GAAA,yBAAKA,GAAA,cAAC+1F,GAAD,CAAgBp8D,MAAOv2B,EAAMo2B,QAAQgE,UAAWg4D,UAAW,MACzEhvE,MAAO,CAACE,QAAS,OACjB4B,QACItoB,GAAA,cAAAA,GAAA,eACM0uG,GAAc1uG,GAAA,cAACiqB,GAAA,EAAD,CAAMo+B,WAAW,EAAM2yC,SAAS,GAC5Ch7F,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBAzDlCwM,EAAMq9B,UAAU/wD,EAAMo2B,SAAUgK,GAChCkzD,EAAUZ,EAAS,KA4DS91F,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMilG,KAEhBvtG,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBA5DlCwM,EAAMk9B,eAAe5wD,EAAMo2B,SAAUjE,GACrCmhE,EAAUZ,EAAS,KA+DS91F,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAMglG,KAEhBttG,GAAA,cAAC2gG,GAAA,EAAD,CAAUh5E,UAAU,aAChBxnB,QAAS,SAAArE,GACLA,EAAEwuB,kBA/DlCqkF,GAAc,KAmEc3uG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,YAIlBomG,GAAc1uG,GAAA,cAACiqB,GAAA,EAAD,CAAMo+B,WAAW,EAAM2yC,SAAS,GAC3Ch7F,GAAA,cAAC2gG,GAAA,EAAD,KACKv9F,EAAMkB,EAAE,0CAEbtE,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBApElCwM,EAAMs9B,cAAchxD,EAAMo2B,SAC1Bm1E,GAAc,KAuEevrG,EAAMkB,EAAE,iBAEbtE,GAAA,cAAC2gG,GAAA,EAAD,CACIxgG,QAAS,SAAArE,GACLA,EAAEwuB,kBAjFlCqkF,GAAc,GACd5B,GAAgB,KAoFa3pG,EAAMkB,EAAE,oBAO5BuqG,EAAcjzF,QAAU,GAClBgxF,GACA5sG,GAAA,cAACgvG,GAAD,CAAWC,MAAOJ,EAAejrF,QAASxgB,EAAMwgB,QAASsrF,YAAa9rG,EAAMiqG,SACxD,IAA1BwB,EAAcjzF,SACRgzF,GACAhC,GACJ5sG,GAAA,cAACuS,GAAA,EAAD,KAAMvS,GAAA,cAACuS,GAAA,EAAK2X,KAAN,KAAWlqB,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAO,YAArB,kBClKrBo5D,GARG,SAAC/rG,GACf,IAAM6rG,EAAQ7rG,EAAM6rG,MAAMlrG,OAAO+qG,IAC5B3+C,KAAKhzB,IACLhtB,IAAI,SAAA+4F,GAAG,OAAIlpG,GAAA,cAACovG,GAAD,CAAe/B,OAAQjqG,EAAM8rG,YAAa11E,QAAS0vE,EAAKlnG,IAAKknG,EAAIxrE,QAAS9Z,QAASxgB,EAAMwgB,YAEzG,OAAO5jB,GAAA,cAACuS,GAAA,EAAD,CAAcoV,UAAU,iBAAkBsnF,ICLxCX,GAAiC,EACjCC,GAAgC,KAChCC,GAAyC,EAEzCM,GAAc,SAAC5F,GACxB,OAAQA,EAAI7rE,WACR,KAAKld,GAAS8f,KACd,KAAK9f,GAASsgB,KACd,KAAKtgB,GAASqvC,SACV,OAAO,EACX,QACI,MAAqB,KAAlB05C,EAAI1rE,YAkBb6xE,cAIF,SAAAA,EAAahoF,EAAsBiK,GAAuB/vB,OAAAC,GAAA,EAAAD,CAAAE,KAAA4tG,GAAA5tG,KAHlD88B,kBAGiD,EAAA98B,KAFjD6vB,eAEiD,EACrD7vB,KAAK88B,aAAelX,EACpB5lB,KAAK6vB,UAAYA,uDAIjB,MAAO,mDAIP,OAAO7vB,KAAK6vB,mDAIZ,MAAO,qCAIP,OAAOnR,GAASmd,iDAIhB,OAAO,uCAIP,OAAO/qB,oDAIP,OAAO,2CAIP,OAAO,sCAIP,OAAO,wCAIP,OAAO9Q,KAAK88B,iDAGGlX,GAEf,OADA5lB,KAAK88B,aAAelX,EACb5lB,0CAIP,OAAO8Q,uDAIP,OAAOA,wDAIP,MAAO,CAAC8R,EAAG,EAAGC,EAAG,yCAIjB,OAAO,cAgLA3f,kBAAiB4jB,aA5KV,SAACnlB,GACnB,IAAMwgB,EAAUxgB,EAAMqI,MAAMkmC,OAAO3wC,IAC7BsuG,EAA0B9Y,mBAAQ,kBAAM+S,GAAkC3lF,IAAU,IACpFsmF,EAAelhF,uBAAYsmF,GAHgB5qF,GAIhC8D,yBACiC7D,qBAAS,IALVC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAM3Cb,GAN2Ce,EAAA,GAAAA,EAAA,GAMnCoE,uBAAY6oB,GAAsBjuB,KANC6uD,EAOjC5d,KAAT/9B,EAP0Cv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAAA1tD,EAQCJ,oBAAS,GARVK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAQ1CwqF,EAR0CvqF,EAAA,GAQvBwqF,EARuBxqF,EAAA,GAAAG,EASGR,oBAAS,GATZS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAS1CsqF,EAT0CrqF,EAAA,GAStBsqF,EATsBtqF,EAAA,GAAAE,EAUCX,qBAAS,GAVVY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAU1CqqF,EAV0CpqF,EAAA,GAUvBqqF,EAVuBrqF,EAAA,GAAAq9C,EAWSj+C,qBAAS,GAXlBk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAW1CitC,EAX0ChtC,EAAA,GAWnBitC,EAXmBjtC,EAAA,GAAAC,EAYWn+C,yBAA8B1jB,GAZzC8hE,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAY1CitC,EAZ0ChtC,EAAA,GAYlBitC,EAZkBjtC,EAAA,GAcjD3iE,qBAAU,WACN02B,EAAMg9B,mBAAmB,SAAAm8C,GAAY,OAAIH,EAAyBG,MACnE,IAEH,IAAMC,EAAShG,EAAaiG,4BAA4Bl5D,OAAO,SAAAinB,GAAC,OAAIA,EAAE1gC,YAEhE4yE,EAAyB,GAE3BC,EAAWnG,EAAaiG,4BAA4BpsG,OAAO,SAAAmlG,GAC3D,OAAGA,EAAI7rE,YAAcld,GAASmd,iBAI3BwxE,GAAY5F,IACXkH,EAAelsG,KAAKglG,IAGjB,KAGX,GAAGkH,EAAe3tG,OAAS,EAAG,CAC1B,IAAM6tG,EAAqB/9F,gBAAK69F,GAE1BG,EAAgB,IAAIlB,GAAciB,EAAQzsF,EAAMvb,MAEtD+nG,EAAWA,EAASnsG,KAAKqsG,GAsD7B,OAAOvwG,GAAA,cAAAA,GAAA,cACHA,GAAA,qBAAK2nB,UAAU,QACX3nB,GAAA,cAACuS,GAAA,EAAD,CAAcoV,UAAU,iBACpB3nB,GAAA,cAACuS,GAAA,EAAa2X,KAAd,CAAmB1D,MAAO,CAACk0B,cAAe,QACtC16C,GAAA,qBAAK2nB,UAAU,gBACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EACNyuB,OAAO,EACP9D,KAAK,SACLt0C,QAtDA,WACxByvG,GAAqB,IAsDGl7D,SAAUi7D,EACVlvG,MAAO2C,EAAMkB,EAAE,gCAEnBtE,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,UAEftI,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EACNyuB,OAAO,EACP9D,KAAM,SACNC,UAAWm7D,EACX1vG,QA3BG,WAC3B22B,EAAM69B,6BACNq7C,GAA0B,GAE1BzpG,OAAOs8B,WAAW,WACdmtE,OAA0B/uG,IAC3B,MAsBqBR,MAAO2C,EAAMkB,EAAE,uCAEnBtE,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,8BAiBtBqnG,GAAqB3vG,GAAA,cAACuS,GAAA,EAAa2X,KAAd,CAAmBvC,UAAU,aAC/C3nB,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EAAMyuB,OAAO,EAAM9D,KAAK,UAClCz0C,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,oBAEftI,GAAA,cAACq8F,GAAD,CACIlyE,KAAM,GACN0xE,SAAUyS,GACVnS,UAAWoS,GACX7nF,QAAS8nF,GACT1S,SAAU,IACVn3B,UAAU,EACVg3B,cAvFG,SAAC6U,GACpB15E,EAAMu9B,SAASm8C,GAEfZ,GAAqB,IAqFLh5E,OAAO,EACP4hB,SA7FS,WACzBo3D,GAAqB,IA6FL5nF,YAAa,gBAKjBkoF,EAAO//F,IAAI,SAAA6tB,GAAK,OAAIh+B,GAAA,cAACywG,GAAD,CAChBzuG,IAAKg8B,EAAMN,QACXp1B,KAA0B,KAApB01B,EAAMR,UAAmB,QAAUQ,EAAMR,UAC/C5Z,QAASA,EACToa,MAAOA,EACPqwE,WAAYrwE,EAAMG,iBAClBtI,OAAQiB,EAAMmN,cAAcjG,GAC5BmwE,yBAA0B,SAAC54E,GAAD,OAhGT,SAACyI,EAAazI,GAC/C,IAAIA,GAAWuB,EAAMmN,cAAcjG,GAAQ,CACvC,IAAI0yE,GAA0B,EAS9B,GAPAR,EAAOlsG,QAAQ,SAAAk6D,GACRA,EAAE//B,kBAAoBrH,EAAMiL,UAAUm8B,KACrCwyC,GAA0B,EAC1B55E,EAAMy9B,iBAAiB2J,OAI3BwyC,EAAyB,KAAA5+F,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IACzB,QAAAiR,EAAAD,EAAgBi+F,EAAOz2F,UAAvBhM,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAAkC,KAAvBosD,EAAuBhsD,EAAAjQ,MAC3B60B,EAAMiL,UAAUm8B,IACfpnC,EAAMy9B,iBAAiB2J,IAHN,MAAAnwD,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,KASjCw9F,EAAqBD,EAAoB,GA4EuBoB,CAA6B3yE,EAAOzI,IACpFm4E,qBAAsB,kBAAMgC,EAAsBD,EAAqB,IACvEzC,mBAAoB+C,EACpB1C,OAASnD,EAAaoB,cAAgBttE,EAAM3W,WAAWzL,QAAU,GAAMoiB,EAAMG,kBAC5EH,EAAM3W,WAAWzL,QAAU,EACtB5b,GAAA,cAACgvG,GAAD,CAAWC,MAAOjxE,EAAM3W,WAAYzD,QAASA,EAASsrF,YAAahF,EAAaoB,eAChFtrG,GAAA,cAACuS,GAAA,EAAD,KAAcvS,GAAA,cAACuS,GAAA,EAAa2X,KAAd,KAAmBlqB,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAO,YAArB,sBCzPhDpxC,kBAfU,SAACvB,GACtB,OAAOpD,GAAA,cAAAA,GAAA,eACDoD,EAAM6uE,WAAajyE,GAAA,cAACisG,GAAD,CAAMh6B,UAAW7uE,EAAM6uE,aAC1C7uE,EAAM6uE,WAAajyE,GAAA,cAACksG,GAAD,MACrBlsG,GAAA,qBAAK2nB,UAAU,QACX3nB,GAAA,qBAAK3D,GAAG,4BAEV+G,EAAM6uE,WAAajyE,GAAA,cAAAA,GAAA,cACjBA,GAAA,cAACmsG,GAAD,MACAnsG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K3RrBOiI,wB2RqB+BsiB,UAAW6oF,KACrE5wG,GAAA,cAACysG,GAAD,UCAGoE,GAfQ,SAACztG,GACpB,IAAM0B,EAAW0jB,yBAOXsoF,EAAY1tG,EAAM6uE,UAAW,0BAA4B,yBAE/D,OAAOjyE,GAAA,sBAAM2nB,UAAU,iBAAiBxnB,QARpB,WAChB,IAAM4wG,GAAgB3tG,EAAM6uE,UAC5BntE,EAAS+uF,GAAuBkd,IAChCjsG,EAASgvF,GAAgBid,EAAc,GAAK,OAKcvqF,MAC1D,IACFxmB,GAAA,mBAAG2nB,UAAYmpF,MCoDNnsG,kBAAiB4jB,aA3DhB,SAACnlB,GAAwB,IAAAshB,EAEPC,qBAAS,GAFFC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE9B6Q,EAF8B3Q,EAAA,GAErB8d,EAFqB9d,EAAA,GAAAG,EAGLJ,oBAAS,IAHJK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAG9Bq2B,EAH8Bp2B,EAAA,GAGpBgsF,EAHoBhsF,EAAA,GAAAG,EAILR,qBAAS,GAJJS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAI9Bo2E,EAJ8Bn2E,EAAA,GAIpBo2E,EAJoBp2E,EAAA,GAM/BtU,EAAqBkY,uBAAYogB,MAEjCqyD,EAAUtuC,kBAAc,MACxBroD,EAAW0jB,yBA6BjB,OACIxoB,GAAA,qBAAK2nB,UAAU,QACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,cAAcxnB,QA7BpB,WAChBuiC,GAAYnN,GAEPA,GACDhvB,OAAOs8B,WAAW,WACd44D,EAAQruC,QAASx2B,SAClB,OAuBmD52B,GAAA,mBAAG2nB,UAAU,cAAnE,gBACA3nB,GAAA,cAACm5F,GAAA,EAAD,CAAYC,UAAU,YAAY7jE,QAASA,EAASqmC,SAAU,KAC1D57D,GAAA,qBAAK2nB,UAAU,iBACX3nB,GAAA,sBAAM4nB,SAtBD,SAAC9rB,GAClBA,EAAEm5C,iBAEe,KAAbmG,GAKJt2C,EAAS0M,GAAe2pC,QAAQz5C,QAAW05C,EAAUtqC,EAAoBA,EAAmB9P,IAAM,OAClGgwG,EAAY,KALRxV,GAAY,KAmBAx7F,GAAA,cAACk4C,GAAA,EAAD,CACIlwB,YAAa5kB,EAAMkB,EAAE,uBAAyB,OAC9CkiD,OAAO,EACP4D,IAAKqxC,EACL1+F,MAAOw+F,EACPt5F,MAAOm5C,EACPr0B,SAjBH,SAACjrB,GAClBk1G,EAAYl1G,EAAE8kC,OAAO3+B,OACrBu5F,EAA+B,KAAnB1/F,EAAE8kC,OAAO3+B,4BCyEd0C,kBAAiB4jB,aAxGX,SAACnlB,GAA6B,IAAAshB,EACjBC,qBAAS,GADQC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACxC6Q,EADwC3Q,EAAA,GAC/B8d,EAD+B9d,EAAA,GAAAG,EAEnBJ,qBAAS,GAFUK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAExCksF,EAFwCjsF,EAAA,GAEhCksF,EAFgClsF,EAAA,GAAAG,EAGCR,qBAAkB,GAHnBS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGxCm5E,EAHwCl5E,EAAA,GAGtBm5E,EAHsBn5E,EAAA,GAAAE,EAIeX,qBAAkB,GAJjCY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAIxCu4E,EAJwCt4E,EAAA,GAIfu4E,EAJev4E,EAAA,GAAAq9C,EAKHj+C,yBAA2B1jB,GALxB4hE,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAKxCqhC,EALwCphC,EAAA,GAKxBsuC,EALwBtuC,EAAA,GAOzChkD,EAAQmK,uBAAYlK,GAAgC1b,EAAM86C,KAAKvmC,UAC/D7S,EAAW0jB,yBAEX4oF,EAAYH,EAAS,gBAAkB,kBACvCI,EAAe,cAAgB97E,EAAU,YAAc,WAEvD+uE,EAAsB,SAACr8F,GACzB,IAAMT,EAAOqX,EAAM0qB,KAAK,SAACpC,GAAD,OAA2BA,EAASl/B,SAAWA,IACvE,OAAOT,EAAOA,EAAKW,SAAW,IAwB5BmiB,EAAkB,SAACxQ,GACrBA,EAAMwQ,mBAqBV,OACItqB,GAAA,qBAAK2nB,UAAU,UAAWnB,MAAO,CAAC6D,OAAQ,YACtCrqB,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAWypF,EAAWjxG,QA7CT,WACvBuiC,GAAYnN,GAER07E,EACA1qG,OAAOs8B,WAAW,WACdquE,GAAU,IACX,KAEHA,GAAU,MAsCVlxG,GAAA,cAACsxG,GAAA,YAAD,CAAahzC,OAZM,SAACizC,GACxB,IACMC,EAAWhzG,SAAS47C,KAAKq3D,wBAAwBt3D,IAGjDu3D,EAFcH,EAAGE,wBAAwBt3D,IACTq3D,EAHjB,GAKrBjrG,OAAOorG,SAAS,CAACC,SAAU,SAAUz3D,IAAKu3D,KAMGxpF,GAAI0yE,oBAA2Bx3F,EAAM86C,KAAKl9C,IAAK2mB,UAAU,kBAAkBvkB,EAAM86C,KAAK51C,MAC/HtI,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAU,WAAWnB,MAAO,CAACo0B,WAAY,YAC/C56C,GAAA,qBAAK2nB,UAAW0pF,GACZrxG,GAAA,mBAAG2nB,UAAU,sBAAsBxnB,QArCtB,SAAC2Z,GACtBwQ,EAAgBxQ,GAChBykF,GAAoB,KAoCRv+F,GAAA,mBAAG2nB,UAAU,oBACZvkB,EAAMkB,EAAE,uBAEZlB,EAAM86C,KAAKvmC,QAAQ5T,OAAO,SAAA46F,GAAC,OAAIA,IAAMv7F,EAAM86C,KAAK3mC,UAASpH,IAAI,SAAAmvC,GAAM,OAChEt/C,GAAA,qBAAKgC,IAAKs9C,EAAQ33B,UAAU,kBACvB28E,EAAoBhlD,GACrBt/C,GAAA,mBAAG2nB,UAAU,kBAAkBxnB,QAAS,SAAC2Z,GACrCwQ,EAAgBxQ,GAChBq3F,EAAkB7xD,GAClBw+C,GAA2B,UAK3C99F,GAAA,qBAAKG,QAASmqB,GACVtqB,GAAA,cAACs/F,GAAD,CACIphD,KAAM96C,EAAM86C,KACZhnC,KAAMonF,EACN75F,QAnDU,WACtB85F,GAAoB,MAoDZv+F,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAM2mF,EACNx1E,OAAQjlB,EAAMkB,EAAE,uCAChBgkB,QAASllB,EAAMkB,EACX,qCACA,CAAEimB,UAAW05E,EAAiBK,EAAoBL,GAAkB,KAExE/I,cAAe93F,EAAMkB,EAAE,wCACvBk0C,SAAU,kBAAMslD,GAA2B,IAC3C/kD,UAtDa,WACpBkrD,IAILn/F,EAAS0M,GAAeoqC,qBAAqBx4C,EAAM86C,KAAKl9C,IAAKijG,IAC7DnG,GAA2B,YClDpB+T,GAVE,SAACzuG,GACd,IAAM0uG,EAAW9oF,uBAAY+3B,IAAqB,IAElD,OACI/gD,GAAA,cAAAA,GAAA,cACK8xG,EAAS76D,OAAO,SAAAiH,GAAI,OAAIA,EAAK51C,OAAM2uC,OAAO,SAAAiH,GAAI,OAAKA,EAAKgB,QAAO/uC,IAAI,SAAA+tC,GAAI,OAAIl+C,GAAA,cAAC+xG,GAAD,CAAc/vG,IAAKk8C,EAAKl9C,IAAKk9C,KAAMA,QCiB5G31B,gBAlBM,SAACnlB,GAClB,IAAM0uG,EAAW9oF,uBAAY+3B,IAAqB,IAE9CokD,EAAe,iBAMnB,MhSPwB1/F,qBgSGrBrC,EAAMoD,SAASV,WACdq/F,GAAgB,SAIhBnlG,GAAA,cAACioB,GAAA,QAAD,CAASy6E,OAAO,EAAM/6E,UAAU,OAAOi6E,gBAAgB,SAAS15E,GhSR5CziB,oBgSShBzF,GAAA,cAACw1C,GAAA,EAAD,CAAM7tB,UAAU,kBAChB3nB,GAAA,qBAAK2nB,UAAWw9E,GAAe2M,EAASl2F,SAF5C,WCwFOjX,kBA5FoB,SAACvB,GAChC,IAAM2lB,EAAcC,uBAAYrN,MAC1BJ,EAAgByN,uBAAYkgB,GAAqCngB,EAAY/nB,MAFR0jB,EAGnDC,qBAAS,GAH0CC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAGpExN,EAHoE0N,EAAA,GAG9Do8C,EAH8Dp8C,EAAA,GAAAG,EAIvCJ,qBAAS,GAJ8BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAIpEitF,EAJoEhtF,EAAA,GAIxDitF,EAJwDjtF,EAAA,GAAAG,EAKzCR,qBAAS,GALgCS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAKpEsxB,EALoErxB,EAAA,GAKzDsxB,EALyDtxB,EAAA,GAMrEmxB,EAAiBvtB,uBAAYwoB,MAC7BgF,EAAWxtB,uBAAYmoB,GAAwB,kBAAkB,IAEvEjxC,GAAe,WACX+xG,GAAc,KAGlB7xG,qBAAU,WACHo2C,GACCE,GAAa,IAElB,CAACF,EAAUD,IAEd,IAAMzxC,EAAW0jB,yBAEX0pF,EAA0B,SAACnqG,GAC7BjD,EAAS0M,EAAe1J,yBAAyBC,IACjDi5D,GAAQ,IAGRmxC,EAAiB,eAEjBC,GAA0B,EAC1BnjD,EAAQ1zC,EAAcpL,IAAI,SAAAq5B,GACvBA,EAAK5wB,kBAAoB4wB,EAAK3wB,uBAC7Bu5F,GAA0B,GAG9B,IAAMC,EAAW7oE,EAAK3wB,qBAAsB2wB,EAAK7wB,iBAAmB6wB,EAAK5wB,gBAAiB,eAAiB4wB,EAAK7wB,iBAE1GmwE,EAAW//D,EAAYjY,qBAAuB04B,EAAKzhC,eAMzD,OAJG+gF,IACCqpB,EAAiBE,GAGdryG,GAAA,cAAC+qG,GAAA,EAAD,CACHl1E,OAAQizD,EACR3oF,QAAS,kBAAO2oF,GAAYopB,EAAwB1oE,EAAKzhC,iBACzD/F,IAAKwnC,EAAKzhC,gBAAiBsqG,KAG/BD,IACAnjD,EAAQA,EAAM/qD,KAAKlE,GAAA,cAAC+qG,GAAA,EAAD,CACfl1E,OAA2C,OAAnC9M,EAAYjY,mBACpB3Q,QAAS,kBAAyC,OAAnC4oB,EAAYjY,oBAA+BohG,EAAwB,OAClFlwG,IAAI,0BAHW,kBAOvB,IAAMovG,EAAYl6F,EAAO,WAAa,aAatC,OAAOlX,GAAA,cAAC61C,GAAA,EAAD,CACH3+B,KAAMu/B,EACNnuB,QAAStoB,GAAA,cAAAA,GAAA,cACLA,GAAA,uBAAGA,GAAA,4BAASoD,EAAMkB,EAAE,0CACpBtE,GAAA,uBAAIoD,EAAMkB,EAAE,kCACZtE,GAAA,uBAAGA,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAS,UAAW1rB,OAAU,UAAWknC,MAAO,SAAUpxD,QAV3D,WACpBu2C,GAAa,GACb5xC,EAAS+C,GAAkB,kBAAkB,MAQ6DzE,EAAMkB,EAAE,uCAElH1D,SAAS,eACTk1C,QAAU91C,GAAA,qBAAK2nB,UAAU,uBAAsB3nB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAM8oG,EAAW5qF,MAAO,CAAC6D,OAAQ,WAAYlqB,QAnBlF,SAACrE,GACjBA,EAAEwuB,kBACF02C,GAAS9pD,GACT+6F,GAAc,MAgB4GjyG,GAAA,cAACgqB,GAAA,EAAD,CACtHF,MAAM,EACN5S,KAAMA,EACN2jF,OAAQ,kBAAM75B,GAAQ,IACtBv8D,QAAS,WAAWutG,GAChBhxC,GAAQ,IAEZ72C,KAAMgoF,GACNnyG,GAAA,cAAC8qG,GAAA,EAAD,KACK77C,SC3EF1mC,gBAdM,SAACnlB,GACE4lB,uBAAYrN,MAAhC,IACM7K,EAAqBkY,uBAAYogB,MAEvC,OAAOppC,GAAA,qBAAK2nB,UAAU,QACjB7W,GAAsBA,EAAmBgI,aAAe9Y,GAAA,cAACioB,GAAA,QAAD,CAASC,GlSLtCziB,2BkSKuEzF,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,eAAc3nB,GAAA,mBAC/H2nB,UAAU,kBADqF,oBAEhG7W,IAAuBA,EAAmBgI,cAAgB9Y,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,2BAA2B+sB,UAAU,GAChH10C,GAAA,mBAAG2nB,UAAU,kBAD4C,iBAG7D3nB,GAAA,cAACsyG,GAAD,SCZOC,ICmDA5tG,eArCS,SAACvB,GAErB,IAAMsU,EAAqBsR,uBAAYhF,MACjClT,EAAqBkY,uBAAYogB,MAEvC,OAAOppC,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACisG,GAAD,CAAMh6B,WAAW,IACjBjyE,GAAA,cAACwyG,GAAD,MACAxyG,GAAA,cAACmsG,GAAD,MACAnsG,GAAA,cAACosG,GAAD,MACApsG,GAAA,cAACqsG,GAAD,MACArsG,GAAA,cAACssG,GAAD,MACAtsG,GAAA,cAACusG,GAAD,MACC70F,EAAa,GAAK5G,GAAsBA,EAAmB+H,uBAAyB/H,EAAmBiI,aACpG/Y,GAAA,qBAAK2nB,UAAU,QACX3nB,GAAA,qBAAK2nB,UAAU,4BACX3nB,GAAA,mBAAG2nB,UAAU,iBACb3nB,GAAA,qBAAK2nB,UAAU,WACX3nB,GAAA,qBAAK2nB,UAAU,UACK,IAAfjQ,EACKtU,EAAMkB,EAAE,uCACRlB,EAAMkB,EAAE,mCAAoC,CAAEmuG,YAAa/6F,KAGrE1X,GAAA,uBAAIoD,EAAMkB,EAAE,gDAK5BtE,GAAA,cAAC0yG,GAAD,MACA1yG,GAAA,cAAC2yG,GAAD,MACA3yG,GAAA,cAAC4yG,GAAD,MACA5yG,GAAA,cAACwsG,GAAD,MACAxsG,GAAA,cAACysG,GAAD,SC9BO9nG,eAfU,SAACvB,GACtB,OAAOpD,GAAA,cAAAA,GAAA,eACDoD,EAAM6uE,WAAajyE,GAAA,cAACisG,GAAD,CAAMh6B,UAAW7uE,EAAM6uE,aAC1C7uE,EAAM6uE,WAAajyE,GAAA,cAACwyG,GAAD,MACrBxyG,GAAA,qBAAK2nB,UAAU,QACX3nB,GAAA,qBAAK3D,GAAG,4BAEV+G,EAAM6uE,WAAajyE,GAAA,cAAAA,GAAA,cACjBA,GAAA,cAACmsG,GAAD,MACAnsG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KrSrBOiI,wBqSqB+BsiB,UAAW6oF,KACrE5wG,GAAA,cAACysG,GAAD,UFlBM,SAACrpG,GACf,OAAOpD,GAAA,qBAAK2nB,UAAU,uBAClB3nB,GAAA,mBAAG2nB,UAAU,aAAb,aAAqC3nB,GAAA,mBAAGk1C,KAAK,6BAAR,4BG0E9BvwC,kBAAiB4jB,aAjEhB,SAACnlB,GACb,IAAMyvG,EAAmBhoF,GAAiCznB,EAAMoD,SAASV,UACnE3C,EAAQ6lB,uBAAYqpD,MACpBvtE,EAAW0jB,yBAHoB9D,EAISC,oBAASxhB,EAAMohB,OAJxBK,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAI9BouF,EAJ8BluF,EAAA,GAIbmuF,EAJanuF,EAAA,GAAAG,EAKDJ,qBAAS,GALRK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAK9BklD,EAL8BjlD,EAAA,GAKlBklD,EALkBllD,EAAA,GAOrC5kB,qBAAU,WACF6pE,GACA8oC,EAAmB5vG,EAAMohB,QAE9B,CAACphB,EAAMohB,QAEV,IAAMyuF,EAAcH,EAAmB,eAAiB,GAClD5gC,EAAa4gC,GAAoB1vG,EAAM8uE,UAAY,aAAe,GAyBxE,OACIjyE,GAAA,cAAAA,GAAA,cACIA,GAAA,qBAAK2nB,UAAW,4CAA4CsqD,EAAWzrD,MAAO,CAACkzE,UAAU,SAAUn1E,OAAQsuF,EAAkB1vG,EAAMohB,MAAQ,KAAO,QAC5IsuF,IAAoB,GACpBA,GAAsC7yG,GAAA,cAACizG,GAAD,MACvCJ,IAAoB,EACpBA,GAAsC7yG,GAAA,cAACkzG,GAAD,CAA4BjhC,UAAW9uE,EAAM8uE,YACpFjyE,GAAA,cAACmzG,GAAD,OAEJnzG,GAAA,cAACozG,GAAAhvG,EAAD,CACIivG,KAAMR,EAAkB,IAAM,OAC9BS,OAlCW,SAACx3G,EAAmBwF,GACnC2oE,GACAC,GAAc,GAGlB,IAAMpI,EAAW3+D,EAAMohB,MAAQjjB,EAAKiyG,OAEpCzuG,EAASgvF,GAAgBhyB,IAEtB3+D,EAAMohB,OAAS,MAAQphB,EAAM8uE,WAC5BntE,EAAS+uF,IAAuB,IAGjC1wF,EAAMohB,MAAQ,KAAOphB,EAAM8uE,WAC1BntE,EAAS+uF,IAAuB,KAqB5B2f,OAjBW,SAAC13G,EAAmBwF,GACvC4oE,GAAc,GACd6oC,EAAmB5vG,EAAMohB,QAgBjB3jB,SAAU,CAACyjB,EAAG,EAAGC,EAAG,IAEpBtkB,GAAA,qBAAK2nB,UAAW,cAAcqrF,EAAY/gC,EACrCzrD,MAAO,CACH0zB,MAAO24D,EAAkBC,EAAkB,KAAO,KAClDzoF,OAASwoF,EAAkB,WAAa,YAE/CA,GAAoB7yG,GAAA,cAACyzG,GAAD,CAAgBxhC,UAAW9uE,EAAM8uE,kBCvE1DyhC,GAA8B,SAACvwG,EAAiCC,GAAlC,OACvCD,EAAME,MAAM,CAAC8a,GAAQ,yBC8CVxZ,kBAjCY,SAACvB,GAAmC,IAAAshB,EAC/BC,oBCtBS,KDqBsBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACpDoxE,EADoDlxE,EAAA,GAC5C8xE,EAD4C9xE,EAAA,GAGrD+uF,EAAQvwG,EAAMk9B,QAAQnwB,IAAI,SAAAuwB,GAC5B,OAAO1gC,GAAA,cAACuS,GAAA,EAAa2X,KAAd,CAAmBloB,IAAK0+B,EAAOhD,QACZlX,MAAO,CAACklD,aAAa,IAAK31B,MAAM,WAChCt1C,MAAM,SACNopB,GAAK+rE,QACL1tE,GAAI,CAACpiB,SAAU+kB,GAAsCznB,EAAMwgB,SAAU7d,OAAM,UAAAO,OAAYo6B,EAAOhD,QAAnB,qBAAAp3B,OAA8CwvF,IACzH31F,QAAS,kBAAMu2F,EAAUZ,EAAS,KACxD91F,GAAA,cAACuS,GAAA,EAAaijC,KAAd,CAAmBltC,KAAK,eACxBtI,GAAA,cAACuS,GAAA,EAAawT,QAAd,KAAsB/lB,GAAA,cAACswD,GAAD,CAAU77B,SAAUiM,EAAOrD,YAAar9B,GAAA,cAAC+1F,GAAD,CAAgBp8D,MAAO+G,EAAOlD,UAAWg4D,UAAW,SAEvH/7E,UAcH,OAZArW,EAAMu9B,QAAQ38B,QAAQ,SAAA48B,GAClB+yE,EAAMzvG,KAAKlE,GAAA,cAACuS,GAAA,EAAa2X,KAAd,CAAmBloB,IAAK4+B,EAAOlD,QACZlX,MAAO,CAACklD,aAAa,IAAK31B,MAAM,WAChCt1C,MAAM,SACNopB,GAAK+rE,QACL1tE,GAAI,CAACpiB,SAAU+kB,GAAsCznB,EAAMwgB,SAAU7d,OAAM,UAAAO,OAAYs6B,EAAOlD,QAAnB,qBAAAp3B,OAA8CwvF,IACzH31F,QAAS,kBAAMu2F,EAAUZ,EAAS,KAC5D91F,GAAA,cAACuS,GAAA,EAAaijC,KAAd,CAAmBltC,KAAK,gBACxBtI,GAAA,cAACuS,GAAA,EAAawT,QAAd,KAAsB/lB,GAAA,cAACswD,GAAD,CAAU77B,SAAUmM,EAAOvD,YAAar9B,GAAA,cAAC+1F,GAAD,CAAgBp8D,MAAOiH,EAAOpD,UAAWg4D,UAAW,UAInHx1F,GAAA,cAAAA,GAAA,cACHA,GAAA,cAACw3C,GAAA,EAAD,CAASC,YAAY,EAAMnvB,QAAS,gBACpCtoB,GAAA,cAACuS,GAAA,EAAD,KAAeohG,ME8ER3mD,QAAMC,WA9FQ,SAAC7pD,EAAkCgnD,GAA4C,IAAA1lC,EAC5EC,oBDlCW,KCiCiEC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACjGoxE,EADiGlxE,EAAA,GACzF8xE,EADyF9xE,EAAA,GAElGsoC,EAAgBC,kBAAwB,MAExCymD,EAAqBxwG,EAAM+4E,mBAAmB53E,OAAS4b,GAASqvC,UAC/DpsD,EAAM+4E,mBAAmB53E,OAAS4b,GAASsgB,KAiDlD,OA/CA+sB,+BAAsEpD,EAAK,iBAAO,CAC9EqD,gBAAiB,kBAAcP,EAAcE,QAASK,sBAG1DrtD,qBAAU,WACD8sD,EAAcE,SAInBF,EAAcE,QAASymD,kBAAkB,SAAC/3G,IAClCA,EAAEg4G,SAAuB,SAAXh4G,EAAEE,MAA8B,SAAXF,EAAEE,OACrCF,EAAEm5C,iBACF7xC,EAAM0kF,iBAGI,WAAXhsF,EAAEE,MAAqBoH,EAAMqB,UAC5BrB,EAAM2wG,iBAAiB7mD,EAAcE,QAASK,mBAC9C3xD,EAAEm5C,iBACFn5C,EAAEwuB,kBACFlnB,EAAMqB,cAGf,IAEHrE,qBAAU,WACDwzG,GAAuB1mD,EAAcE,SAG1CF,EAAcE,QAASC,gBAAgB,CACnCnC,OAAM,iBAAA5kD,OAAmBlD,EAAM+4E,mBAAmB9/E,GAA5C,SACN+uD,SAAUhoD,EAAMkqD,oBAAoB14B,aACpC3yB,MAAOmB,EAAM+4E,mBAAmBryE,UAAY1G,EAAMkqD,oBAAoB54B,UAAY,aAClF21B,OAAQjnD,EAAMkqD,oBAAoBz4B,qBAAkB5zB,EACpD8lB,SAAU,SAAAjrB,GACFoxD,EAAcE,SACdhqD,EAAM2wG,iBAAiB7mD,EAAcE,QAAQK,uBAI1D,CAACrqD,EAAM+4E,qBAEV/7E,qBAAU,WACH8sD,EAAcE,SAAWhqD,EAAMqyB,aAC9By3B,EAAcE,QAASx2B,SAE5B,CAACxzB,EAAMqyB,cAEFtxB,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACJ10C,GAAAC,EAAAC,cAAC4jB,GAAA,KAAD,CACIzB,MAAO,CAACklD,aAAc,IAAK31B,MAAO,WAClC51C,QAAS,kBAAMu2F,EAAUZ,EAAS,IAClC5tE,GAAI,CAACpiB,SAAU+kB,GAAsCznB,EAAMwgB,SAAU7d,OAAM,UAAAO,OAAYlD,EAAM+4E,mBAAmB9/E,GAArC,YAAAiK,OAAkDwvF,KAC7H3xF,GAAAC,EAAAC,cAACisD,GAAD,CAAU77B,SAAUrxB,EAAM+4E,mBAAmB53E,OAJjD,IAI6EJ,GAAAC,EAAAC,cAAA,cAASjB,EAAMkB,EAAE,mBAAqBlB,EAAM+4E,mBAAmB53E,SAE1InB,EAAM4wG,kBAAkBv/D,KAAO,GAAKrxC,EAAM6wG,kBAAkBx/D,KAAO,IACjEtwC,GAAAC,EAAAC,cAAC6vG,GAAD,CACItwF,QAASxgB,EAAMwgB,QACf0c,QAASl9B,EAAM4wG,kBACfrzE,QAASv9B,EAAM6wG,oBAGtBL,GAAuBzvG,GAAAC,EAAAC,cAAAF,GAAAC,EAAAy0C,SAAA,KACpB10C,GAAAC,EAAAC,cAACmzC,GAAA,EAAD,CAASC,YAAY,EAAMnvB,QAAS,aACpCnkB,GAAAC,EAAAC,cAACqpD,GAAD,CACItD,IAAK8C,EACL/F,QAAS,CACLnR,SAAU,GACV4X,SAAS,EACTC,aAAa,EACbC,YAAa,MACbC,qBAAsB,EACtBC,QAAS,CACLC,SAAS,GAEbC,eAAe,EACfC,sBAAsB,EACtBgmD,iBAAiB,EACjBC,UAAW,CACPC,yBAAyB,IAGjC7tF,MAAO,CAAEhC,OAAQ,eC0DlB7f,kBAAiB4jB,aAvJJ,SAACnlB,GAEzB,IJrB2CwgB,EIqBrC9e,EAAW0jB,yBACXkpD,EAAU1oD,uBAAYqpD,MAHiC3tD,EAIPC,qBAAkB,GAJXC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAItD4vF,EAJsD1vF,EAAA,GAIjC2vF,EAJiC3vF,EAAA,GAKvD2xE,EAAuBC,mBAAQ,kBAAM3kD,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAAM,IACpF6iB,EAAQmF,uBAAYutE,GACpBpa,EAAqBnzD,wBJ1BgBpF,EI0B2BxgB,EAAMqI,MAAMkmC,OAAO3wC,IJzBlFyC,aACH,CAACiwG,IACD,SAACc,GACG,OAAOA,EAAoBnkG,IAAIuT,GAAW4wF,EAAoBp8F,IAAIwL,GAAY,SIuBhF2R,EAAY1R,GAASA,EAAMwX,2BAA6B,EACxD60B,EAAuBlnC,uBAAY+gC,GAAmC3mD,EAAMqI,MAAMkmC,OAAO3wC,MACzFkpG,EAAelhF,uBAAYugF,GAAkCnmG,EAAMqI,MAAMkmC,OAAO3wC,MAVzB+jB,EAWzBJ,qBAAS,GAXgBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAWtDklD,EAXsDjlD,EAAA,GAW1CklD,EAX0CllD,EAAA,GAAAG,EAYbR,oBAAS+sD,EAAQQ,mBAZJ9sD,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAYtDsvF,EAZsDrvF,EAAA,GAYpCsvF,EAZoCtvF,EAAA,GAAAqtD,EAa7C5d,KAAT/9B,EAbsDv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAcvDkiC,EAA0BxnD,kBAAqC,MAErE/sD,qBAAU,WACF6pE,GACAyqC,EAAoBhjC,EAAQQ,oBAEjC,CAACR,EAAQQ,oBAEZ9xE,qBAAU,WACN0E,EAAS0M,EAAa+iB,0BAA0BnxB,EAAMqI,MAAMkmC,OAAO3wC,OACpE,CAACoC,EAAMqI,MAAMkmC,OAAO3wC,MAEvBZ,qBAAU,WACHyjB,GAASA,EAAMyX,2BACdx2B,EAAS0M,EAAegkB,qBAAqBpyB,EAAMqI,MAAMkmC,OAAO3wC,IAAKu0B,GAAS,KAEnF,CAAC1R,GAASA,EAAMyX,4BAGnB,IAAIs5E,EAAkBriG,kBAClByhG,EAAgCzhG,kBAChC0hG,EAAgC1hG,kBAkBpC,GAAG4pE,GAAsBA,EAAmB53E,OAAS4b,GAASsgB,KAAM,CAChEm0E,EAAkB1K,EAAa2K,kCAC3B14B,EAAmB53E,KACnB43E,EAAmBxiD,OACrB51B,OAAO,SAAAmlG,GAAG,OAAIA,EAAIxrE,UAAYy+C,EAAmB9/E,KAAI8T,IAAI,SAAA+4F,GAAG,OAAIA,EAAIxrE,UAEtE,IAAMo3E,EAAa5K,EAAa6K,WAAW54B,EAAmB9/E,IAE3Dy4G,IACCd,EAAoBc,EAAWp2E,aAC/Bu1E,EAAoBa,EAAWj2E,cAIvC,GAAGs9C,GAAsBA,EAAmB53E,OAAS4b,GAASsgB,MAAQ07C,EAAmBgJ,SAAU,CAC/F,IAAM6vB,EAAe9K,EAAa6K,WAAW54B,EAAmBgJ,SAASzkD,QACnEu0E,EAAe/K,EAAa6K,WAAW54B,EAAmBgJ,SAASvkD,QACtEo0E,IACChB,EAAoBzhG,gBAAK,CAACyiG,KAE3BC,IACChB,EAAoB1hG,gBAAK,CAAC0iG,KAKlC,IAAMC,EAA4B,WAC9BpwG,EAASy0B,GAA0Bn2B,EAAMqI,MAAMkmC,OAAO3wC,IAAKm7E,QAAsBl7E,IACjF6D,EAAS0wB,GAAqBpyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,GAAO,IAC7DuzG,GAAuB,GACvBz9E,EAAMF,SAiBV,OAGiD52B,GAAA,cAAAA,GAAA,cACxCu1B,GAAWv1B,GAAA,qBAAKwmB,MAAO,CAAC5lB,SAAU,WAAY65C,WAAY,OAAQN,IAAK,MAAOk/C,MAAO,MAAO70E,OAAQ,OAAQ4nD,SAAU,SAAUha,WAAW,mBAC5IpyD,GAAA,cAAC42C,GAAA,EAAD,CAAMpwB,MAAO,CAAChC,OAAQ,OAAQknD,aAAa,IAAKnnD,MAAOmtD,EAAQQ,kBAAoB,OAC/ElyE,GAAA,cAAC42C,GAAA,EAAK7wB,QAAN,KACI/lB,GAAA,cAAC42C,GAAA,EAAK9wB,OAAN,KAAa9lB,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,QAAQqf,UAAU,gBAAgBxnB,QAAS+0G,EAA2B1uF,MAAO,CAAC6D,OAAQ,aAC7G8xD,GAAsBn8E,GAAA,cAAAA,GAAA,cAAGm8E,EAAoBxiD,QAC5CwiD,GAAsBn8E,GAAA,cAAAA,GAAA,4BAG5BA,GAAA,cAAC42C,GAAA,EAAK7wB,QAAN,CAAcS,MAAO,CAAC5lB,SAAU,WAAY4jB,OAAQ,OAAQk1E,UAAW,UACjEvd,GAAsBn8E,GAAA,cAACooB,GAAA,EAAD,CAAS9lB,MAAM,GAAOc,EAAMkB,EAAE,qDACrD63E,GACGn8E,GAAA,cAACm1G,GAAD,CACIvxF,QAASxgB,EAAMqI,MAAMkmC,OAAO3wC,IAC5BgzG,kBAAmBA,EACnBC,kBAAmBA,EACnB93B,mBAAoBA,EACpB7uB,oBAAqB4C,EAAqB93C,IAAI+jE,EAAmB53E,MACjEujF,cAAe,kBAAMhxD,EAAM8K,eAC3BmyE,iBApCK,SAACllD,GAC1BstB,EAAoBryE,SAAW+kD,EAC/BstB,EAAoB4I,eAAel2B,GACnC0lD,GAAuB,IAkCH9vG,QAASywG,EACT5wG,EAAGlB,EAAMkB,EACT8lD,IAAKuqD,EACLl/E,cAAe5R,EAAMyX,6BAIhCg5E,GAAuBM,EAAgBngE,KAAO,GAAKz0C,GAAA,cAAC42C,GAAA,EAAK7wB,QAAN,KAChD/lB,GAAA,cAACooB,GAAA,EAAD,CAAS4yE,SAAS,EAAMrmD,SAAS,EAAMF,KAAK,SACvCrxC,EAAMkB,EAAE,4DAA6D,CAAC8wG,OAAQR,EAAgBngE,OADnG,OAEUz0C,GAAA,mBAAGk1C,KAAK,IAAI/0C,QAzCF,SAACrE,GACjCA,EAAEm5C,iBACEknC,GAAsBw4B,GAA2BA,EAAwBvnD,SACzE+uB,EAAmB6I,sBAAsB4vB,EAAgBn7F,UAAWk7F,EAAwBvnD,QAAQK,mBAExG8mD,GAAuB,KAoCkDnxG,EAAMkB,EAAE,iEAI7EtE,GAAA,cAACozG,GAAAhvG,EAAD,CACIivG,KAAK,IACLC,OAtGW,SAACx3G,EAAmBwF,GACnC2oE,GACAC,GAAc,GAGlB,IlF7D6B3lD,EkF6DvBu9C,EAAW4P,EAAQQ,kBAAoB5wE,EAAKiyG,OAElDzuG,GlF/D6Byf,EkF+DCu9C,ElF/DiB5gE,kBAAO4wE,GAAyB,CAACvtD,akF+JxEivF,OA7FW,SAAC13G,EAAmBwF,GACvC4oE,GAAc,GACdwqC,EAAoBhjC,EAAQQ,oBA4FpBtxE,SAAU,CAACyjB,EAAG,EAAGC,EAAG,IAEpBtkB,GAAA,qBAAK2nB,UAAU,+BAA+BnB,MAAO,CAAC6yE,MAAOob,EAAmB,KAAMpqF,OAAQ,oBC9D/F1lB,kBAjFsB,SAACvB,GAClC,IAAM2E,EAAiB3E,EAAMqI,MAAMkmC,OAAO37B,aACpCzC,EAAenQ,EAAMqI,MAAMkmC,OAAOp7B,WAElC4I,EAAsBxD,KAEtBoN,EAAcC,uBAAY7J,GAC1BrO,EAAqBkY,uBAAYogB,MAPwC1kB,EAQ3CC,qBAAS,GARkCC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAQxEk1E,EARwEh1E,EAAA,GAQ5Di1E,EAR4Dj1E,EAAA,GAUzE9f,EAAW0jB,yBAgEjB,OA9DApoB,qBAAU,WACN,GAAG2oB,EAAYhY,UAAYD,EAAoB,CAC3C,IAAIkpF,EAAU,EAsDdrmF,GAA+B5L,EAAgBwL,GAC1CvU,KArDqB,SAApBi7F,EAAqBC,GACvB,GAAGA,EAAYn9F,MAEX,OAAGi9F,EAAU,GACTA,SACAzzF,OAAOs8B,WAAW,WACdlvB,GAA+B5L,EAAgBwL,GAAcvU,KAAKi7F,IACnE,OAIPn1F,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,mDAChD88F,GAAc,IAIlBzmF,GAAkBrL,GACb/I,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SACJ,GADyBoG,EAAXtI,MAOV,OALA+H,EAASuhD,EAAOphD,QAAQ3C,KACpBc,EAAMkB,EAAE,kCACR,UAEJu1F,GAAc,GAIlB,GAAG56F,EAAU,CACT,IAAM6O,EAASG,GACXhP,EAASqC,KACTyL,GAAK,SAACzL,GAAD,OAAe0W,GAAiC1W,MAGrDuK,GAAUiC,KACV7Q,QAAQF,MAAM,kCAAmC+Q,EAAO7L,OACxD6C,EAASwN,EAAarN,QAAQlI,MAAM,gBAAiB,iCAGrDiP,GAAU8B,KACVhJ,EAAS0M,EAAOuJ,MAAM1H,0BACtBvO,EAAS4W,EAAkBzW,QAAQ6C,yBAAyBC,IAC5DjD,EAASuhD,EAAOphD,QAAQ3C,KACpBc,EAAMkB,EAAE,kCACRlB,EAAMkB,EAAE,mCAAoC,CAACgE,KAAMwF,EAAO7L,MAAMqG,UAIxEuxF,GAAc,UAQnC,CAAC9wE,EAAYhY,SAAUD,IAGvB8oF,EACQ55F,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI2C,KAGlB7qB,GAAA,cAACuyD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,oDCzG5C4gE,GAAYh2G,EAAQ,MAcXi2G,GANG,SAAClyG,GACf,IAAMmhB,EAAQnhB,EAAMmhB,OAAS,GAE7B,OAAOvkB,GAAA,wBAAQ2nB,UAAU,iBAAiBrmB,KAAM+zG,GAAW9wG,KAAK,gBAAgBiiB,MAAO,CAACjC,MAAOA,EAAM,SCyE1FgxF,GAvEK,SAACnyG,GAA4B,IAAAshB,EAEPC,qBAAS,GAFFC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEtC8wF,EAFsC5wF,EAAA,GAEzB6wF,EAFyB7wF,EAAA,GAIzC8wF,ECfqB,UDgBrBC,EChBqB,UDiBrB7P,EAAgC,SAChC8P,EAAuC,SACvCj1C,EAAkB,QAEnBv9D,EAAMyyG,aAAatxG,OAAS2wD,GAAiBn5D,QAC5C25G,EC1BmB,UD2BnBC,EC3BmB,UD4BnB7P,EAAa,OACb8P,EAAoB,OACpBj1C,EAAkB,WAGnBv9D,EAAMyyG,aAAatxG,OAAS2wD,GAAiBe,SACzC7yD,EAAMyyG,aAAatxG,OAAS2wD,GAAiBgB,UAC7C9yD,EAAMyyG,aAAatxG,OAAS2wD,GAAiBkB,eAEhDs/C,EAAW,UACXC,EAAe,UACf7P,EAAa,OACbnlC,EAAkB,WAGlBv9D,EAAMyyG,aAAatxG,MAAQnB,EAAMyyG,aAAatxG,OAAS2wD,GAAiBW,OACxE6/C,ECzCkB,UD0ClB5P,EAAa,QAGjB,IACIlwC,EADElzD,EAAQ4J,MAAMoC,QAAQtL,EAAMyyG,aAAalgD,MAAoCvyD,EAAMyyG,aAAalgD,KAA/C,CAACvyD,EAAMyyG,aAAalgD,MAGxEvyD,EAAMyyG,aAAajgD,UAClBA,EAAUxyD,EAAMyyG,aAAajgD,QAEzBtpD,MAAMoC,QAAQknD,KACdA,EAAU,CAACA,KAInB,IAMMkgD,EAAe,CAAC//D,MAAO2/D,EAAU5P,cACjCiQ,EAAe,CAAChgE,MAAO4/D,EAAc7P,WAAY8P,GACjDI,EAAkBR,EAAax1G,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,aAAamsC,KAAK,UAAaz0C,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,cAAcmsC,KAAK,UAE7G,OAAOz0C,GAAA,cAAAA,GAAA,cACHA,GAAA,qBAAK2nB,UAAU,kBAAkBnB,MAAO,CAACm6C,oBACrC3gE,GAAA,cAACi2G,GAAD,MACAj2G,GAAA,qBAAK2nB,UAAU,gBACVuuF,GAAkBxzG,EAAKozG,EAAc1yG,EAAMkyD,UAC3CM,GAAW51D,GAAA,mBAAGk1C,KAAK,IAAI/0C,QAfV,SAACrE,GACvBA,EAAEm5C,iBAEFwgE,GAAgBD,KAY6CQ,KAG5DpgD,GAAW4/C,GAAex1G,GAAA,qBAAK2nB,UAAU,kBAAkBnB,MAAO,CAACm6C,oBAChE3gE,GAAA,cAACi2G,GAAD,MACAj2G,GAAA,qBAAK2nB,UAAU,gBACVuuF,GAAkBtgD,EAASmgD,OAQtCG,GAAoB,SAACC,EAAwBL,EAA6BxgD,GAC5E,IAAI5yD,EAAMyzG,EAAa,IAAM,GAE7B,GAAkB,kBAARzzG,EAAkB,CAExB,GAA2B,oBAD3BA,EAAMA,GACQ6gC,SAGV,MAAO,GAFP7gC,EAAMA,EAAI6gC,WAMlB,IAAM6yE,EAAW1zG,EAAI66E,MAAM,MAErB84B,EAASF,EAAapgD,MAAM,GAE5BugD,EAAwB,GAE1BC,EAA2BT,EAE3BU,GAAY,EAEhB,IAAI,IAAMC,KAASL,EACf,GAA8B,qBAApBA,EAASK,GAAwB,CACvC,IAAIvO,EAAOkO,EAASK,GAChBC,GAAwB,EACxBC,GAAuB,EACrBl0G,EAASylG,EAAKzlG,OAEjBA,EAAS,IACuB,MAA5BylG,EAAK0O,OAAOn0G,EAAS,KACpBk0G,GAAuB,EACvBzO,EAAOA,EAAKnyC,MAAM,EAAGtzD,EAAS,IAGZ,MAAnBylG,EAAK0O,OAAO,KACXF,GAAwB,EACxBxO,EAAOA,EAAKnyC,MAAM,KAIvBtzD,EAAS,IACL+zG,GAAalhD,IACZ4yC,EAAO,IAAA5hG,OAAIgvD,EAAJ,OAAoB4yC,EAC3BsO,GAAY,GAEhBF,EAAMpyG,KAAKlE,GAAA,sBAAMgC,IAAKs0G,EAAM7zG,OAAS,EAAG+jB,MAAO+vF,GAC1CG,GAAyB12G,GAAA,cAAAA,GAAA,sBAAaA,GAAA,cAAAA,GAAA,cAAGkoG,GAAUyO,GAAwB32G,GAAA,cAAAA,GAAA,yBAKhFu2G,EADDF,EAAOI,GACMI,GAAiBR,EAAOI,IAExBX,EAKxB,OAAOQ,GAGLO,GAAmB,SAACrwF,GACtB,IAAMswF,EAAwC,GAExCC,EAAWvwF,EAAM+2D,MAAM,KAH0BzrE,GAAA,EAAAC,GAAA,EAAAC,OAAA/Q,EAAA,IAKvD,QAAAiR,EAAAD,EAAqB8kG,EAArBtpG,OAAAC,cAAAoE,GAAAI,EAAAD,EAAAtE,QAAAC,MAAAkE,GAAA,EAA+B,KAAAklG,EAAA9kG,EAAAjQ,MACCs7E,MAAM,KADP05B,EAAA11G,OAAAmL,GAAA,EAAAnL,CAAAy1G,EAAA,GACpB7nD,EADoB8nD,EAAA,GACdnrG,EADcmrG,EAAA,GAGR,kBAAT9nD,GAAoC,kBAARrjD,IAItCgrG,EAASI,oBAAS/nD,EAAKg5C,SAAWr8F,IAZiB,MAAAiC,GAAAgE,GAAA,EAAAC,EAAAjE,EAAA,YAAA+D,GAAA,MAAAG,EAAAjE,QAAAiE,EAAAjE,SAAA,WAAA+D,EAAA,MAAAC,GAevD,OAAO8kG,GEjKLK,GAAY93G,EAAQ,MAkCX+3G,GAzBU,SAACh0G,GAEtB,IAAIsyG,EDXqB,UCYrB5P,EAAgC,SAChCnlC,EAAkB,QAatB,MAXkB,UAAfv9D,EAAMmB,OACLmxG,EDpBmB,UCqBnB5P,EAAa,OACbnlC,EAAkB,WAGJ,YAAfv9D,EAAMmB,OACLmxG,EDzBqB,UC0BrB5P,EAAa,QAGV9lG,GAAA,qBAAK2nB,UAAU,kBAAkBnB,MAAO,CAACm6C,oBAC5C3gE,GAAA,cAACskD,GAAA,EAAD,CAAOQ,UAAU,EAAMn9B,UAAU,sBAAsBnB,MAAO,CAACmjE,gBAAe,OAAArjF,OAAS6wG,GAAT,KAAuBztB,eAAgB,QAAS3vC,WAAY,SAC1I/5C,GAAA,qBAAK2nB,UAAU,gBACX3nB,GAAA,sBAAMwmB,MAAO,CAACuvB,MAAO2/D,EAAU5P,eAAc1iG,EAAM1C,YrCT3DkqB,G1E+FkC,WAClC,IAAMysF,EAAcnrB,aAAaC,QAnHJ,2BAqH7B,GAAmB,OAAhBkrB,EACC,MAAO,GAGX,IACI,OAAO/sG,KAAK2gD,MAAMosD,GACpB,MAAOv7G,GACL,MAAO,I0EzGSw7G,GAqGTC,GAlGG,SAACn0G,GACf,IAAMoE,EAAOwhB,uBAAYrN,MACnB8/E,EAAUtuC,kBAAyB,MAFAslB,EAGzB5d,KAAT/9B,EAHkCv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAInC3tE,EAAW0jB,yBAEjBpoB,qBAAU,WACNmG,OAAOs8B,WAAW,WACX44D,EAAQruC,UAAahqD,EAAMo0G,aAAep0G,EAAMo0G,YAAYjzG,OAAS2wD,GAAiBgB,UAAa9yD,EAAMq0G,qBACxGhc,EAAQruC,QAAQx2B,SAErB,MACJ,CAACxzB,EAAMs0G,aAAct0G,EAAMo0G,YAAap0G,EAAMmyB,QAASnyB,EAAMq0G,qBAEhEr3G,qBAAU,WACN,OAAO,W1EyEuB,IAACwqB,I0ExEJA,GAAQmrC,MAAM,EAAE,I1EyE/Cm2B,aAAaK,QA/GgB,0BA+GkBjiF,KAAKC,UAAUqgB,O0ErE9D,IAAM+sF,EAAev0G,EAAMq0G,mBAAoB,iCAAmC,GAuElF,OAAOz3G,GAAA,qBAAK2nB,UAAU,mBAClB3nB,GAAA,cAACskD,GAAA,EAAD,CAAOQ,UAAU,EAAMn9B,UAAU,OAAOnB,MAAO,CAACmjE,gBAAe,OAAArjF,OAASkB,EAAKa,UAAd,KAA4BqhF,eAAgB,QAAS3vC,WAAY,SAChI/5C,GAAA,sBAAMwmB,MAAO,CAACuzB,WAAY,QAA1B,YACA/5C,GAAA,uBAAOuE,KAAK,OAAOozG,aAAcA,EAAcvtD,IAAKqxC,EAAS1vC,UAxE3C,SAACjwD,GACnB,GAAa,UAAVA,EAAEkG,IACDoB,EAAMw0G,QAAQnc,EAAQruC,QAASnrD,OAAS,IAEV,KAA3Bw5F,EAAQruC,QAASnrD,aACWhB,IAAxBilG,KAA8D,IAAzBA,IACjCt7E,GAAQs7E,MAAyBzK,EAAQruC,QAASnrD,OACjD2oB,GAAQmsC,OAAOmvC,GAAqB,GAIxCt7E,GAAQnoB,QAAUmoB,GAAQ,KAAO6wE,EAAQruC,QAASnrD,OAClD2oB,GAAQymE,QAAQoK,EAAQruC,QAASnrD,QAGzCw5F,EAAQruC,QAASnrD,MAAQ,GACzBikG,QAAsBjlG,OAEnB,GAAc,WAAVnF,EAAEkG,IACToB,EAAMy0G,gBACH,GAAI/7G,EAAEg4G,SAAqB,MAAVh4G,EAAEkG,IACtBoB,EAAMqB,eACH,GAAc,YAAV3I,EAAEkG,SACkBf,IAAxBilG,GACCA,GAAsB,EAEtBA,KAGDA,GAAsB,EAAIt7E,GAAQnoB,SACjCyjG,GAAsBt7E,GAAQnoB,OAAS,IAGf,IAAzByjG,KACCzK,EAAQruC,QAASnrD,MAAQ2oB,GAAQs7E,KAErCpqG,EAAEm5C,sBACC,GAAc,cAAVn5C,EAAEkG,IAAqB,CAC9B,QAA2Bf,IAAxBilG,GACC,SAGJA,IAE0B,IACtBzK,EAAQruC,QAASnrD,MAAQ2oB,GAAQs7E,IACjCzK,EAAQruC,QAASx2B,UAGO,IAAzBsvE,KACIt7E,GAAQnoB,QAAUmoB,GAAQ,KAAO6wE,EAAQruC,QAASnrD,QACjDw5F,EAAQruC,QAASnrD,MAAQ,GACzBw5F,EAAQruC,QAASx2B,SAErBsvE,QAAsBjlG,GAG1BnF,EAAEm5C,sBACKn5C,EAAEg4G,SAAqB,MAAVh4G,EAAEkG,KACtB80B,EAAM8K,cACN9lC,EAAEm5C,kBACKn5C,EAAEg4G,SAAqB,MAAVh4G,EAAEkG,KACtB8C,EAAS0wB,GAAqBpyB,EAAMwgB,SAAS,GAAM,IACnD9nB,EAAEm5C,kBAEFixD,QAAsBjlG,OsC3FnB62G,GAZK,SAAC10G,GACjB,IAAMoE,EAAOwhB,uBAAYrN,MAEzB,OAAO3b,GAAA,qBAAK2nB,UAAU,mBAClB3nB,GAAA,cAACskD,GAAA,EAAD,CAAOQ,UAAU,EAAMn9B,UAAU,sBAAsBnB,MAAO,CAACmjE,gBAAe,OAAArjF,OAASkB,EAAKa,UAAd,KAA4BqhF,eAAgB,QAAS3vC,WAAY,SAC/I/5C,GAAA,qBAAK2nB,UAAU,gBACI,KAAdvkB,EAAMV,KAAc1C,GAAA,kCACrBA,GAAA,0BAAOoD,EAAMV,QCUnBq1G,GAAiB,CACnB,UACA,aACA,UACA,OACA,QA0JWxvF,gBArJK,SAACnlB,GACjB,IAAM0B,EAAW0jB,yBAD4B9D,EAEbC,oBAA6BpS,gBAAK,KAFrBqS,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEtChhB,EAFsCkhB,EAAA,GAE5BozF,EAF4BpzF,EAAA,GAAAG,EAGPJ,sBAHOK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGtCyyF,EAHsCxyF,EAAA,GAGzBizF,EAHyBjzF,EAAA,GAIvC0sD,EAAU1oD,uBAAYqpD,MACtBkkB,EAAuBC,mBAAQ,kBAAM3kD,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAAM,IACpF6iB,EAAQmF,uBAAYutE,GACpBhhE,EAAU1R,GAASA,EAAM0X,sBAPcpW,EAQTR,qBAAS,GARAS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAQtC8kD,EARsC7kD,EAAA,GAQ1B8kD,EAR0B9kD,EAAA,GAAAE,EASKX,oBAAS+sD,EAAQS,mBATtB5sD,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAStC4yF,EATsC3yF,EAAA,GASnB4yF,EATmB5yF,EAAA,GAUvC/d,EAAOwhB,uBAAYrN,MACnBy8F,EAAYjrD,kBAAuB,MAXIslB,EAY7B5d,KAAT/9B,EAZsCv1B,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,MAcvC4lC,EAAe3mC,EAAQntD,MAAQ,GAC/B+zF,EAAoBD,GAAiBx0F,GAASA,EAAMwX,yBAA2Bq2C,EAAQQ,kBAAoB,EAAI,GAE/GqmC,EAAa,SAAC71G,GAChBs1G,EAAYt0G,EAASQ,KAAKxB,IAC1B6D,OAAOs8B,WAAW,WACXu1E,EAAUhrD,SACTgrD,EAAUhrD,QAAQorD,SAAS,CAACr+D,IAAK,IAAKy3D,SAAU,YAErD,KAGPt6C,GAAI+D,uBAAuB,SAAChG,EAAmBC,GAC3C2iD,EAAe5iD,GACfkjD,EAAWv4G,GAAA,cAACy4G,GAAD,CAAaz2G,IAAK0B,EAASkY,QAAU,EAAGi6F,aAAcxgD,EAAKC,SAAUA,OAGpFgC,GAAIiE,gBAAgB,SAACx+D,GACO,IAArB2G,EAASkY,SAAiB7e,IAAUo4D,IAIvCojD,EAAWv4G,GAAA,cAAC04G,GAAD,CAAkB12G,IAAK0B,EAASkY,QAAU,EAAGlb,QAAS3D,EAAOwH,KAAK,aAGjF+yD,GAAIkE,kBAAkB,SAACntB,GACnBkqE,EAAWv4G,GAAA,cAAC04G,GAAD,CAAkB12G,IAAK0B,EAASkY,QAAU,EAAGlb,QAAS2tC,EAAM9pC,KAAK,eAGhF,IAAMo0G,EAAmB,WACrB7zG,EAAS4wB,GAAkBtyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,KA6EvD,OAAOhB,GAAA,cAACm5F,GAAA,EAAWtiD,MAAZ,CAAkBuiD,UAAU,YAAY7jE,GAAWv1B,GAAA,qBAAK2nB,UAAU,eAAeyiC,IAAKguD,EAAW5xF,MAAO,CAC3GhC,OAAM,GAAAle,OAAKorE,EAAQS,kBAAb,MACNj4B,KAAI,GAAA5zC,OAAK+xG,EAAL,MACJ9zF,MAAK,eAAAje,OAAiBgyG,EAAjB,UAEHhhD,GAAIC,aAAev3D,GAAA,cAAC04G,GAAD,CAAkBh4G,QAAQ,wDAAwD6D,KAAK,YAC3Gb,EAAS+V,UACVzZ,GAAA,cAAC44G,GAAD,CAAWnB,oBAAqBngD,GAAIC,YACzB3zC,QAASxgB,EAAMqI,MAAMkmC,OAAO3wC,IAC5B02G,aAAch0G,EAASkY,QACvB47F,YAAaA,EACbjiF,QAASA,EACTqiF,QAvES,SAAC9rG,GAGrB,GAFAysG,EAAWv4G,GAAA,cAAC64G,GAAD,CAAa72G,IAAK0B,EAASkY,QAAU,EAAGlZ,IAAKoJ,KAE7C,UAARA,EAOH,GAAW,UAARA,EAAH,CAKA,IAAMgtG,EAAehtG,EAAIL,MAAM,sEAE/B,GAAGqtG,EACC,OAAGA,EAAaC,OAAQzwG,MACjByvG,GAAe9zG,SAAS60G,EAAaC,OAAQzwG,WAC5CiwG,EAAWv4G,GAAA,cAACy4G,GAAD,CAAa5C,aAAc,CAClClgD,KAAI,6BAAArvD,OAA+BwyG,EAAaC,OAAQzwG,KAApD,uCACJ/D,KAAM2wD,GAAiBn5D,OACxBu5D,SAAS,eAKpBgC,GAAIzyD,QAAQuzD,KAAK0gD,EAAaC,OAAQnsD,IAAKplD,EAAKoB,YAAakwG,EAAaC,OAAQzwG,MAItF,IAAM0wG,EAAkBltG,EAAIL,MAAM,0CAElC,IAAGutG,IAAmBA,EAAgBD,OAAQzwG,KAK9C,OAAGwD,EAAIL,MAAM,kCACTqrB,EAAMyP,kBAAkBz6B,EAAIJ,QAAQ,YAAa,IAAIy8F,aACrDoQ,EAAWv4G,GAAA,cAACy4G,GAAD,CAAanjD,SAAS,OAAOugD,aAAc,CAClDlgD,KAAM,4BACNC,QAAS,mHAKd0B,GAAIC,YACHD,GAAIkB,MAAM1sD,GAEVwrD,GAAIzyD,QAAQuzD,KAAKtsD,EAAIJ,QAAQ,YAAa,IAAKlE,EAAKoB,cAhBpD0uD,GAAI/oB,WAAWyqE,EAAgBD,OAAQzwG,WAxBvCgvD,GAAIsB,KAAK1wC,GAAGkwC,YAPZ7xD,OAAOs8B,WAAW,WACdy0B,GAAI6D,IAAI/C,KAAKgD,aAmEVy8C,SAjBU,WACrBvgD,GAAI4D,gBAiBOz2D,QAASk0G,IACpB34G,GAAA,cAACozG,GAAAhvG,EAAD,CACIivG,KAAK,IACLC,OA3Fe,SAACx3G,EAAmBwF,GACnC2oE,GACAC,GAAc,GAGlB,IzF/E6B1lD,EyF+EvBu9C,EAAY2P,EAAQS,kBAAoB7wE,EAAK23G,OAEnDn0G,GzFjF6B0f,EyFiFCu9C,EzFjFkB7gE,kBAAO6wE,GAAyB,CAACvtD,cyFsK7EgvF,OAlFe,SAAC13G,EAAmBwF,GACvC4oE,GAAc,GACdiuC,EAAqBzmC,EAAQS,oBAiFzBvxE,SAAU,CAACyjB,EAAG,EAAGC,EAAG,IAEpBtkB,GAAA,qBAAK2nB,UAAU,cAAcnB,MAAO,CAACkmD,OAAQwrC,EAAoB,KAAM3zF,MAAK,eAAAje,OAAiBgyG,EAAjB,OAA0CjuF,OAAQ,aAC1HrqB,GAAA,sBAAM2nB,UAAU,iBAAiBxnB,QAASw4G,GAAkB34G,GAAA,mBAAG2nB,UAAU,sBC7K5EuxF,GAAqC,SAACl4G,GAAD,OAA4G,SAACmC,GAAD,OAFjH,SAACA,EAAiCnC,GAAlC,OAAwGmC,EAAME,MAAM,CAAC8a,GAAQ,yBAA0Bnd,IAEDm4G,CAA8Bh2G,EAAOnC,KCqEzN2D,kBAvDoB,SAACvB,GAA2C,IAAAshB,EAE3CC,oBAASxV,MAFkCyV,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAEpEyiB,EAFoEviB,EAAA,GAE1DwgC,EAF0DxgC,EAAA,GAAAG,EAGrCJ,qBAAS,GAH4BK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAGpEsgC,EAHoErgC,EAAA,GAGvDsgC,EAHuDtgC,EAAA,GAAAG,EAIvCR,qBAAS,GAJ8BS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAIpEogC,EAJoEngC,EAAA,GAIxDogC,EAJwDpgC,EAAA,GAAAE,EAKzCX,qBAAS,GALgCY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAKpEq3E,EALoEp3E,EAAA,GAKzDq3E,EALyDr3E,EAAA,GAMrEs3E,EAAmB7zE,uBAAYkwF,GAAmC91G,EAAMmT,WAAWhD,eACnFzO,EAAW0jB,yBAEjBpoB,qBAAU,WACNsb,EAAkBtB,IAAI3R,4BAA4BrF,EAAMmT,WAAW/C,kBAAkBxU,KAAK,SAAAqG,GAAuB,IAArBpG,EAAqBoG,EAArBpG,SACxF,GAD6GoG,EAAXtI,MAC/FkC,EAAU,CACT,IAAM6O,EAAS4N,EAAuB3M,gCAAgC9P,EAASqC,MAE5E0K,GAAU8B,IACTs3C,EAAYt3C,EAAO7L,WAIhC,CAACmB,EAAMmT,WAAW/C,mBAErBpT,qBAAU,WACHilD,GACCC,GAAe,GAGhBC,GAAcs3C,GAAoBA,EAAiB5lF,SAAWjE,GAAOwK,SACpEo/E,GAAa,IAElB,CAACC,IAYJ,OAAGF,EACQ38F,GAAA,cAAAA,GAAA,eAGJA,GAAA,cAAC88F,GAAA,EAAD,KACH98F,GAAA,cAACylD,GAAD,CAAYj+C,KAAM2/B,EAAUsN,KAAK,SACjCz0C,GAAA,sBAAMwmB,MAAO,CAACk/B,YAAa,SAAUtiD,EAAMmT,WAAW/C,kBACtDxT,GAAA,cAAC2lD,GAAA,EAAD,CAAa7K,QAAQ,SACjB96C,GAAA,cAAC4lD,GAAD,CAAiBt9B,QAASllB,EAAMkB,EAAE,mBAAoBwlB,KAAK,cAAcwM,QAAS+uB,EAAallD,QAlB7E,WACtBmlD,GAAe,GACfxgD,EAAS0M,EAAekC,iCAAiCtQ,EAAM4S,aAAahV,IAAKoC,EAAMmT,WAAWhD,aAAcnQ,EAAMmT,WAAW/C,sBAiB7HxT,GAAA,cAAC4lD,GAAD,CAAiBt9B,QAASllB,EAAMkB,EAAE,mBAAoBwlB,KAAK,SAASwM,QAASivB,EAAYplD,QAdvE,WACtBqlD,GAAc,GACd1gD,EAAS0M,EAAeiC,iCAAiCrQ,EAAM4S,aAAahV,IAAKoC,EAAMmT,WAAWhD,aAAcnQ,EAAMmT,WAAW/C,0BC6BnI2pF,GAAe,SAACl7F,GAClB,MAAO,6BAA6BmkD,KAAKnkD,IAG9B0C,kBApEuB,SAACvB,GAA8C,IAAAshB,EACvDC,oBAAS,IAD8CC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC1Etc,EAD0Ewc,EAAA,GACnEohC,EADmEphC,EAAA,GAE3EmE,EAAcC,uBAAYrN,MAE1B7W,EAAW0jB,yBAEX8jB,EAAUv9B,GAAgC,CAC5C9G,OAAQ8gB,EAAY/nB,IACpBmH,SAAU4gB,EAAYngB,YACtBP,UAAW0gB,EAAY1gB,UACvBzH,SAAU,KAIXoL,GAAUsgC,IACEA,EAAQrqC,MAGvB,IAMMw7F,EAAiBr6F,EAAM4S,aAAa+B,YAAY6D,QAAU,EAEhE,OACI5b,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAMphB,QAASrB,EAAMqB,SACrDzE,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,kCACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,sBAAM4nB,SAZG,WACjB9iB,EAAS0M,EAAe8B,yBAAyBlQ,EAAM4S,aAAahV,IAAKoH,IACzE49C,EAAS,IACT5iD,EAAMqB,YAUMzE,GAAA,qBAAKwmB,MAAO,CAAE+9B,aAAc,SACxBvkD,GAAA,cAACk4C,GAAA,EAAD,CACI1xB,MAAO,CAAEjC,MAAO,QAChBtiB,MAAOmG,EACP2e,SAAU,SAACjrB,EAAGwF,GAAJ,OAAa0kD,EAAS1kD,EAAKW,QACrC+lB,YAAa5kB,EAAMkB,EAAE,gCACrB0kC,WAAW,KAGnBhpC,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAM/iB,KAAK,SAASmwC,UAAWyoD,GAAa/0F,KAAWhF,EAAMg2G,gBACzEh2G,EAAMkB,EAAE,uCAGjBtE,GAAA,qBAAK2nB,UAAU,yBAA0BvkB,EAAMkB,EAAE,uCAChDm5F,GAAkBz9F,GAAA,cAACuS,GAAA,EAAD,CAAc0qF,SAAS,EAAMC,SAAS,GACpD95F,EAAM4S,aAAa+B,YAAY5H,IAC5B,SAAAoG,GAAU,OAAIvW,GAAA,cAACq5G,GAAD,CACV9iG,WAAYA,EACZP,aAAc5S,EAAM4S,aACpBhU,IAAKuU,EAAWhD,mBAG1BkqF,GAAkBz9F,GAAA,mBAAG2nB,UAAU,qBAAsBvkB,EAAMkB,EAAE,4CCyChEK,kBAhGiB,SAACvB,GAAwC,IAAAshB,EAC7BC,qBAAS,GADoBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC9D41E,EAD8D11E,EAAA,GAChD21E,EADgD31E,EAAA,GAAAG,EAE7BJ,qBAAS,GAFoBK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAE9D44E,EAF8D34E,EAAA,GAEhD44E,EAFgD54E,EAAA,GAAAG,EAGPR,qBAAS,GAHFS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG9D04E,EAH8Dz4E,EAAA,GAGrC04E,EAHqC14E,EAAA,GAI/DtgB,EAAW0jB,yBAEjBtoB,GAAe,WACXq6F,GAAgB,KAGpB,IAAMwD,EAAe,SAAC91F,GAClB,OAAQ7E,EAAM+gD,UAAY/gD,EAAM03F,UAG9BkD,EAAoB,SAACliG,GACpBiiG,EAAa36F,EAAMk8C,OAAOr3C,UACzBnM,EAAEwuB,kBACFiwE,GAAiBD,KAkCnB2D,EAAa76F,EAAM+gD,SAAW/gD,EAAMwyC,QAAS,eAAiB,GAEpE,OAAO51C,GAAA,qBAAK2nB,UAAW,QAAUs2E,EAAYj8F,IAAKoB,EAAMk8C,OAAOr3C,OAAQue,MAAOu3E,EAAa36F,EAAMk8C,OAAOr3C,QAAU,CAACoiB,OAAQ,WAAa,IACpIrqB,GAAA,cAACgqB,GAAA,EAAD,CAAU9S,KAAMojF,EAAcxwE,MAAM,EAAOw+B,SAAS,MAAM5T,SAAUtxC,EAAM03F,SAAUnzE,UAAU,gBAC1F3nB,GAAA,cAACgqB,GAAA,EAASC,KAAV,KACK7mB,EAAMk2G,oBAAsBl2G,EAAMwyC,SAAW51C,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAC1CC,KAAM/mB,EAAMkB,EAAE,sCACdnE,QAAS,WA9BjBiD,EAAM03F,UACNh2F,EAAS0M,EAAOvM,QAAQ4O,+BAA+BzQ,EAAM2E,eAAgB3E,EAAMk8C,OAAOr3C,YA+BrF7E,EAAMk2G,qBAAuBl2G,EAAMwyC,UAAYxyC,EAAMm2G,SAAWv5G,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAC7DC,KAAM/mB,EAAMkB,EAAE,sCACdnE,QAAS,WAxCjBiD,EAAM03F,UACNh2F,EAAS0M,EAAOvM,QAAQ2O,+BAA+BxQ,EAAM2E,eAAgB3E,EAAMk8C,OAAOr3C,YAyCrF7E,EAAMm2G,SAAWv5G,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACdC,KAAM/mB,EAAMkB,EAAE,uCACdnE,QAAS,WAhCjBiD,EAAM03F,UACNh2F,EAAS0M,EAAOvM,QAAQiP,oBAAoB9Q,EAAMk8C,OAAOr3C,OAAQ7E,EAAM2E,oBAiCnE/H,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIC,KAAM/mB,EAAMkB,EAAE,mBACdnE,QAAS,kBAAM29F,GAA2B,SAIpDH,GAAgB39F,GAAA,sBAAM2nB,UAAU,8BAA8BxnB,QAAS69F,IACzEh+F,GAAA,qBAAK2nB,UAAU,kBAAkBnC,IAAKpiB,EAAMk8C,OAAO8E,SAAUjkD,QAAS69F,EAChDE,OAAQ,kBAAMN,GAAgB,IAC9Bv5C,IAAKjhD,EAAMk8C,OAAOn3C,SAAW,UAAWqe,MAAO,CAAC2uB,QAASwoD,EAAe,eAAiB,UAC/G39F,GAAA,qBAAK2nB,UAAU,UAAUxnB,QAAS69F,GAC9Bh+F,GAAA,qBAAK2nB,UAAU,UAAUvkB,EAAMk8C,OAAOn3C,WAE1CnI,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,MAAO9T,EAAM03F,UAAY+C,EACzBx1E,OAAQjlB,EAAMkB,EAAE,+CAChBgkB,QAASllB,EAAMkB,EACX,6CACA,CAAEimB,UAAWnnB,EAAMk8C,OAAOn3C,WAE9B+yF,cAAe93F,EAAMkB,EAAE,gDACvB62F,aAAcn7F,GAAA,cAAConB,GAAA,EAAD,CAAQkB,QAASllB,EAAMkB,EAAE,mBAAoBqjB,UAAU,mBACrE6wB,SAAU,kBAAMslD,GAA2B,IAC3C/kD,UApD6B,WAC7B31C,EAAM03F,WACH13F,EAAMm2G,QACLz0G,EAAS0M,EAAOvM,QAAQgP,4BAA4B7Q,EAAM2E,eAAgB3E,EAAMk8C,OAAOr3C,SAEvFnD,EAAS0M,EAAOvM,QAAQ6O,2BAA2B1Q,EAAM2E,eAAgB3E,EAAMk8C,OAAOr3C,UAI9F61F,GAA2B,SC4IpBn5F,kBAnLgB,SAACvB,GAAuC,IAAAshB,EAC7BC,qBAAS,GADoBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAC5D80F,EAD4D50F,EAAA,GAC/C60F,EAD+C70F,EAAA,GAAAG,EAErBJ,qBAAS,GAFYK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAE5Dq5E,EAF4Dp5E,EAAA,GAE3Cq5E,EAF2Cr5E,EAAA,GAAAG,EAGnBR,qBAAS,GAHUS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAG5Dm5E,EAH4Dl5E,EAAA,GAG1Cm5E,EAH0Cn5E,EAAA,GAI7D2D,EAAcC,uBAAYrN,MAC1B+9F,EAAmB1wF,uBAAY1O,GAAyBlX,EAAM0N,mBAAmB/I,iBACjFjD,EAAW0jB,yBACX7Q,EAAUqR,uBAENlK,GADN46F,EACsCA,EAAiB/hG,QAAQzT,KAAKw1G,EAAiBniG,SAC/ChF,oBAEpCuF,EAASkR,uBAELlK,GADN46F,EACsCA,EAAiB5hG,OACjBvF,oBAG1C,IAAImnG,EACA,OAAO15G,GAAA,cAACooB,GAAA,EAAD,CAASrrB,OAAO,GAAhB,2EAGX,IAAMq8G,EAAkBM,EAAiBjiG,YAAciiG,EAAiB3hG,YAAY6D,QAAW,EAyBzF8iF,EAAa/mF,EAAQs/B,OAAO,SAAA0nD,GAAC,OAAIA,EAAEx2F,WAAUgoD,KAAK,SAACyuC,EAAIC,GACzD,OAAGD,EAAG32F,SAAWyxG,EAAiBniG,SACrB,EAGVsnF,EAAG52F,SAAWyxG,EAAiBniG,QACvB,EAGRmiG,EAAiB9hG,OAAOoH,SAAS4/E,EAAG32F,SAC3B,EAGTyxG,EAAiB9hG,OAAOoH,SAAS6/E,EAAG52F,QAC5B,EAGJ,IACRkI,IAAI,SAAAmvC,GAAM,OAAIt/C,GAAA,cAAC25G,GAAD,CACb33G,IAAKs9C,EAAOr3C,OACZq3C,OAAQA,EACRg6D,mBAAoBI,EAAiBniG,UAAYwR,EAAY/nB,IAC7DmjD,QAASu1D,EAAiBniG,UAAY+nC,EAAOr3C,OAC7C2tC,QAAS8jE,EAAiB9hG,OAAOoH,SAASsgC,EAAOr3C,QACjD6yF,SAAU4e,EAAiBniG,UAAY+nC,EAAOr3C,QAAWyxG,EAAiBniG,UAAYwR,EAAY/nB,KAAO04G,EAAiB9hG,OAAOoH,SAASsgC,EAAOr3C,QACjJF,eAAgB2xG,EAAiB14G,QAE/B44G,EAAY9hG,EAAOm/B,OAAO,SAAA0nD,GAAC,OAAIA,EAAEx2F,WAAUgI,IAAI,SAAAmvC,GAAM,OAAIt/C,GAAA,cAAC25G,GAAD,CAC3D33G,IAAKs9C,EAAOr3C,OACZq3C,OAAQA,EACRg6D,mBAAoBI,EAAiBniG,UAAYwR,EAAY/nB,IAC7DmjD,QAASu1D,EAAiBniG,UAAY+nC,EAAOr3C,OAC7C2tC,QAAS8jE,EAAiB9hG,OAAOoH,SAASsgC,EAAOr3C,QACjDsxG,SAAS,EACTze,SAAU4e,EAAiBniG,UAAY+nC,EAAOr3C,QAAWyxG,EAAiBniG,UAAYwR,EAAY/nB,KAAO04G,EAAiB9hG,OAAOoH,SAASsgC,EAAOr3C,QACjJF,eAAgB2xG,EAAiB14G,QAErC,OAAOhB,GAAA,cAAAA,GAAA,cACEoD,EAAM0N,mBAAmB+H,uBAAyBugG,GAAkBp5G,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACjExpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAACooB,GAAA,EAAD,CAASusB,SAAS,EAAM4rD,UAAU,EAAMj4E,QAASllB,EAAMkB,EAAE,yCAGjEtE,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,0BACMoD,EAAM0N,mBAAmB+H,sBAAwBzV,EAAM0N,mBAAmB8H,iBACrE5Y,GAAA,wBAAQ2nB,UAAU,uBAAuBxnB,QAAS,kBAAMs5G,GAAgBD,KAC3Ex5G,GAAA,mBAAG2nB,UAAU,cACZvkB,EAAMkB,EAAE,iCAEZk1G,GAAex5G,GAAA,qBAAK2nB,UAAU,cAC3B3nB,GAAA,cAACq8F,GAAD,CACIlyE,KAAM,GACN0xE,SAzGR,EA0GQM,UAzGT,KA0GSz1E,QAzGA,GA0GAo1E,SAAU,IACVn3B,UAAU,EACVg3B,cAhEC,SAACrzF,GAC1BxD,EAAS0M,EAAe2B,0BAA0B/P,EAAM0N,mBAAmB/I,eAAgBO,IAC3FmxG,GAAe,IA+DS7iF,OAAO,EACP4hB,SAAU,WACNihE,GAAe,IAEnBzxF,YAAa5kB,EAAMkB,EAAE,6BAI5BlB,EAAM0N,mBAAmB+H,sBAAwB7Y,GAAA,qBAAK2nB,UAAU,cAC5D3nB,GAAA,mBAAGk1C,KAAK,IAAIvtB,UAAU,+CACnBxnB,QA7FF,SAACrE,GACvBA,EAAEwuB,kBACFxuB,EAAEm5C,iBACFopD,GAAmB,IA0FiC73E,MAAO,CAAC2uB,QAAS,SADhD,UAKDn1C,GAAA,oBAAIwmB,MAAO,CAAC8/B,OAAQ,EAAGj8B,OAAQjnB,EAAM0N,mBAAmB8H,gBAAiB,UAAY,WAAYvc,GAAI,QACjG2D,GAAA,cAACq8F,GAAD,CACIlyE,KAAM/mB,EAAM0N,mBAAmB6H,iBAC/BkjF,SAhIZ,EAiIYM,UAhIb,KAiIaz1E,QAhIJ,GAiIIo1E,SAAU,IACVn3B,UAAU,EACVg3B,cA3FF,SAACrzF,GAC3BxD,EAAS0M,EAAeuC,mBAAmB3Q,EAAM0N,mBAAmB/I,eAAgBO,KA2FxDsuB,OAAO,EACP4hB,SAAU,WACNv7C,QAAQC,IAAI,uBAEhB8qB,YAAa5kB,EAAMkB,EAAE,0BACrBowC,UAAWtxC,EAAM0N,mBAAmB8H,mBAG5C5Y,GAAA,qBAAK2nB,UAAU,yBAAyBvkB,EAAMkB,EAAE,6BAChDtE,GAAA,qBAAK2nB,UAAU,sBACX3nB,GAAA,cAAConB,GAAA,EAAD,CAAQmxB,OAAO,EAAMzuB,MAAM,EAAMisB,MAAM,OAAOtB,KAAK,QAAQt0C,QA9G5D,WACvBo+F,GAAoB,IA6G4F7pD,UAAW0kE,GAA2D,IAAzCM,EAAiB3hG,YAAY6D,SAC9I5b,GAAA,mBAAG2nB,UAAU,oBAEhB+2E,GAEJkb,EAAUh+F,QAAU,GAAM5b,GAAA,qBAAK2nB,UAAU,yBAAyBvkB,EAAMkB,EAAE,6BAC1Es1G,EAAUh+F,QAAU,GAAK5b,GAAA,qBAAK2nB,UAAU,sBACpCiyF,GAEL55G,GAAA,cAAC65G,GAAD,CACI3iG,KAAMonF,EACN75F,QArHF,WACtB85F,GAAoB,IAqHIvoF,aAAc0jG,EACdN,eAAgBA,IAEpBp5G,GAAA,cAAC84C,GAAA,EAAD,CACI5hC,KAAMknF,EACN/1E,OAAQjlB,EAAMkB,EAAE,uCAChB42F,cAAe93F,EAAMkB,EAAE,mBACvB62F,aAAcn7F,GAAA,cAAConB,GAAA,EAAD,CAAQkB,QAASllB,EAAMkB,EAAE,mBAAoBqjB,UAAU,mBACrEW,QAASllB,EAAMkB,EAAE,qCAAsC,CAACk7F,UAAWp8F,EAAM0N,mBAAmB6H,mBAC5F6/B,SAAU,kBAAM6lD,GAAmB,IACnCtlD,UAAW,WAAOg/B,MAAM,sBAM1C30E,EAAM0N,mBAAmB+H,sBAAwBzV,EAAM0N,mBAAmB8H,iBAAmB5Y,GAAA,cAACspB,GAAA,EAAKE,IAAN,KAC3FxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,KACIzpB,GAAA,cAACooB,GAAA,EAAD,CAAS9lB,MAAM,EAAMi+F,UAAU,EAAMj4E,QAASllB,EAAMkB,EAAE,sCAG9DtE,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,UCjKD9kB,kBA/Bc,SAACvB,GAC1B,IAAM2lB,EAAcC,uBAAYrN,MAC1B7K,EAAqBkY,uBAAYogB,MAEvC,OAAOppC,GAAA,cAACqpB,GAAA,EAAD,KACHrpB,GAAA,cAACspB,GAAA,EAAD,CAAMC,WAAW,EAAMotB,QAAQ,GAC3B32C,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACIxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAAC8lB,GAAA,EAAD,CAAQ+D,GAAG,KAAKC,MAAM,EAAMC,UAAU,UAClC/pB,GAAA,cAAC8lB,GAAA,EAAOC,QAAR,2BAEI/lB,GAAA,cAAC8lB,GAAA,EAAO0E,UAAR,UAKf1Z,GAAsBA,EAAmBgI,aAAe9Y,GAAA,cAAAA,GAAA,cACzDA,GAAA,cAAC85G,GAAD,CAAwB/wF,YAAaA,EAAajY,mBAAoBA,OAEnEA,IAAuBA,EAAmBgI,cAAgB9Y,GAAA,cAACspB,GAAA,EAAKE,IAAN,KACzDxpB,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaG,SAAS,IAAIqoC,YAAY,IAAIC,WAAW,MACrDlyD,GAAA,cAACspB,GAAA,EAAKG,OAAN,CAAaC,OAAO,KAAKC,OAAO,KAAKC,SAAS,KAAKqoC,YAAY,KAAKC,WAAW,MAC3ElyD,GAAA,cAACooB,GAAA,EAAD,CAASE,QAASllB,EAAMkB,EAAE,8BAA+BqwC,SAAS,UCThF0xD,GAAmB,SAAChzE,GACtB,IAAMw0E,EAAQx0E,EAAKkqD,MAAM,KAEzB,OADkBsqB,EAAMA,EAAMplG,OAAS,GACtB86E,MAAM,KAAKxnB,MAAM,GAAI,GAAG/G,KAAK,MA4HnCzmC,gBAAW5jB,eAxHE,SAACvB,GAAoC,IAAAshB,EACzBC,qBAAS,GADgBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GACtDk1E,EADsDh1E,EAAA,GAC1Ci1E,EAD0Cj1E,EAAA,GAAAG,EAErBJ,oBAASkG,IAFY7F,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GAEtD+0E,EAFsD90E,EAAA,GAAAG,GAAAH,EAAA,GAGbL,qBAAS,IAHIS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAGtDshF,EAHsDrhF,EAAA,GAGpCshF,EAHoCthF,EAAA,GAAAE,EAI7BX,yBAA6B1jB,GAJAskB,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAItD0R,EAJsDzR,EAAA,GAI5Cw0F,EAJ4Cx0F,EAAA,GAAAq9C,EAK/Bj+C,yBAA4B1jB,GALG4hE,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAKtDh/C,EALsDi/C,EAAA,GAK7CkkC,EAL6ClkC,EAAA,GAMvDpqC,EAAyBzP,uBAAY+qB,MACrCvsC,EAAOwhB,uBAAYrN,MACnB0H,EAAYgwB,KACZx7B,EAASmR,uBAAY3F,GATkCy/C,EAUXn+C,oBAAS,aAVEo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAUtD+jC,EAVsD9jC,EAAA,GAUnC+jC,EAVmC/jC,EAAA,GAWvDj+D,EAAW0jB,yBACX6K,EAAO2mF,mBAAmB52G,EAAMqI,MAAMkmC,OAAOte,MAE7C4mF,EAAc,IAAIp8B,gBAAgBz6E,EAAMoD,SAAST,QAEjDm0G,GAAcD,EAAY5pG,IAAI,SAA+D,IAApDivD,SAAS26C,EAAY7hG,IAAI,QAAQ,QAAInX,GAEpFb,qBAAU,WACFq4B,GAIJrF,GAAsBC,GACjBr0B,KAAK,SAAAm7G,GACFJ,EAAYI,GAEZ,IAAM7oF,EAAY+0E,GAAiBhzE,GAE7B+zE,EAAoBvvF,EAAO9T,OAAO,SAAC8f,GACrC,OAAOA,EAAMvb,OAASgpB,IAG1B,GAAG4oF,GAA4C,IAA9B9S,EAAkBxrF,QAG/B,OAFAkrF,EAAqBx1E,QACrBo1E,GAAoB,GAIxBM,EAAY11E,EAAW6oF,EAAgBD,EAAYzV,GAAWyC,SAAWzC,GAAWxoE,aAEvF/8B,MAAM,SAAA6O,GACH9Q,QAAQF,MAAMgR,GACdjJ,EAASuhD,EAAOphD,QAAQlI,MAAM,iBAAkB,+FAChD88F,GAAc,MAGvB,CAACxmE,EAAMoF,IAEV,IAIMuuE,EAAc,SAAC11E,EAAmBwJ,EAAemsE,GACnD,GAAGA,IAAexC,GAAWyC,SAAU,CACnC,IAAMC,EAAazlG,QACnBoD,EAAS0M,EAAeulB,eAAezF,EAAWwJ,EAAKqsE,IAEvDJ,EAAWI,QACR,GAAIF,IAAexC,GAAWxoE,UAAW,CAC5C,IAAMkrE,EAAazlG,QACnBoD,EAAS0M,EAAeulB,eAAezF,EAAWwJ,EAAKqsE,GAAY,IAEnEJ,EAAWI,OACR,CACH,IAAMC,EAAoBvvF,EAAO9T,OAAO,SAAC8f,GACrC,OAAOA,EAAMvb,OAASgpB,IAG1B,GAAG81E,EAAkBxrF,QAAU,EAAG,CAC9B,IAEM0rF,EAFkCF,EAAkBvrF,QAEvBsjE,UAAUrkD,EAAKtzB,EAAKxG,KACvD8D,EAAS0M,EAAe0lB,oBAAoBowE,IAG5C/gG,OAAOs8B,WAAW,WACdkkE,EAAWO,EAAatmG,MACzB,OAmBf,OAAG4iB,GAAqE,IAA1D/L,EAAO9T,OAAO,SAAA8f,GAAK,OAAIA,EAAM7iB,MAAQ4iB,IAAShI,QACjD5b,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI2C,GAAsCjH,KAG5Dg2E,EACQ55F,GAAA,cAACm6F,GAAA,EAAD,CAAUjyE,GAAI4xE,IAGlB95F,GAAA,cAAAA,GAAA,cACCA,GAAA,cAACuyD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,sBAAyCphB,IAChFrzB,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMuvF,EAAkB5gF,WAAW,EAAMphB,QA1DzB,WAC3BiiG,GAAoB,KA0DZ1mG,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAgB1iB,EAAMkB,EAAE,sBACxBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,cAACooB,GAAA,EAAD,CAAS0B,KAAK,UAAU6qB,SAAS,EAAMrsB,QAASllB,EAAMkB,EAAE,oCAAoCoH,QAAQ,SAAUm7F,MAElH7mG,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CAAQE,SAAS,EAAMnnB,QA9BT,WAC1BumG,GAAoB,GACjB1vE,GACCgwE,EAAYX,GAAiBhzE,GAAQ,UAAW2D,EAAUytE,GAAWyC,YA2BNlnG,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,SAAlE,IAA8ElF,EAAMkB,EAAE,iCACtFtE,GAAA,cAAConB,GAAA,EAAD,CAAQmxB,OAAO,EAAMp4C,QAxBT,WACxBumG,GAAoB,GACjB1vE,GACCgwE,EAAYX,GAAiBhzE,GAAO2D,EAAUytE,GAAW8C,gBAqBInkG,EAAMkB,EAAE,uCCjIlEikB,gBARc,SAACnlB,GAAqC,IACxD8xC,EAAQ9xC,EAAMwnB,QAAQpkB,SAASrD,MAA/B+xC,KAIP,OAHA3uC,OAAOs8B,WAAW,WACdz/B,EAAMwnB,QAAQlf,QAAQwpC,IACvB,KACIl1C,GAAA,cAACuyD,GAAA,EAAD,CAAQ18B,QAAQ,EAAMlO,UAAU,QAAO3nB,GAAA,cAACyyD,GAAA,EAAD,CAAQhe,KAAK,SAAb,oBCO5C2lE,kBAAsB,SAACtuG,EAAaqlE,GAAqD,IAAxCkpC,EAAwC73G,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,IAAAA,UAAA,GAiB3F,OAhBmB,IAAfsJ,EAAIrJ,SACJqJ,EAAM,IAAIA,GAGI,IAAfA,EAAIrJ,SACHqJ,EAAMA,EAAIiqD,MAAM,IAGa,IAA7BuJ,SAASxzD,OAAK7K,KACd6K,EAAMuuG,EAAY,KAAO,IAG1B/6C,SAASxzD,OAAK7K,GAAakwE,IAC1BrlE,EAAG,GAAAxF,OAAM6qE,IAGNrlE,IAGLwuG,GAAuB,SAAC9zC,GAC1BA,EAAIthC,KAAK66C,MAAMw6B,OAAO/zC,GAAK,KAE3B,IAAIg0C,EAAIt1E,KAAK66C,MAAMvZ,EAAI,MACnBm4B,EAAIz5D,KAAK66C,MAAMvZ,EAAI,KAAO,IAC1BwvB,EAAI9wD,KAAK66C,MAAMvZ,EAAI,KAAO,IAc9B,OAZGg0C,EAAI,IACHA,EAAI,GAGL7b,EAAI,IACHA,EAAI,GAGL3I,EAAI,IACHA,EAAI,GAGD,CAACwkB,EAAG7b,EAAG3I,IAGZykB,GAAuB,SAACD,EAAW7b,EAAW3I,GAKhD,OAJ6D,GAAzC12B,SAAe,KAANk7C,EAAU,IAAMA,OAAGv5G,GAAkB,GAAK,IACR,GAAzCq+D,SAAe,KAANq/B,EAAU,IAAMA,OAAG19F,GAAkB,IACL,IAAzCq+D,SAAe,KAAN02B,EAAU,IAAMA,OAAG/0F,IAKhDy5G,GAAuB,SACzB/+C,EACAC,EACA++C,EACAC,EACAC,EACAnpG,GAEA,IAGIopG,EAHAC,EAAa,EACbC,EAAe,EACfC,EAAe,EAGnBH,EAAWn/C,EAAWt9D,KAAK+qB,MAE3B,IAAM8xF,EAAiBh2E,KAAK66C,MAAiB,IAAX+6B,EAAiBl/C,GAcnD,GAZGs/C,EAAiB,IAAoB,UAAdP,GACtBC,EAAa,SAGdM,GAAkB,IAAMA,EAAiB,GAAmB,SAAdP,GAC7CC,EAAa,QAGdM,GAAkB,GAAmB,QAAdP,GACtBC,EAAa,OAGdE,EAAW,EAAG,KAAAK,EAC8Bb,GAAqBQ,GADnDM,EAAA75G,OAAAmL,GAAA,EAAAnL,CAAA45G,EAAA,GACZJ,EADYK,EAAA,GACAJ,EADAI,EAAA,GACcH,EADdG,EAAA,GAIbz/C,EAAW,GAAKm/C,GAAY,KAC5BppG,IAGJmpG,EAAe,CAACE,EAAYC,EAAcC,KAM1CI,GAA2B,KA8ThB9yF,gBAAW5jB,eA1TP,SAACvB,GAChB,IAAM0B,EAAW0jB,yBACX8yF,EAASnuD,kBAAc,MACvBukB,EAAU1oD,uBAAYqpD,MACtBkkB,EAAuBC,mBAAQ,kBAAM3kD,GAAsBzuC,EAAMqI,MAAMkmC,OAAO3wC,MAAM,IACpF6iB,EAAQmF,uBAAYutE,GACpBhhE,EAAU1R,GAASA,EAAM2X,qBACzBh0B,EAAOwhB,uBAAYrN,MAPkB+I,EAQjBC,oBAAS,IARQC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAQpC62F,EARoC32F,EAAA,GAQ7B42F,EAR6B52F,EAAA,GAAAG,EASbJ,oBAAiB,IATJK,EAAAzjB,OAAAmL,GAAA,EAAAnL,CAAAwjB,EAAA,GASpC02F,EAToCz2F,EAAA,GAS3B02F,EAT2B12F,EAAA,GAAAG,EAUbR,oBAAS,IAVIS,EAAA7jB,OAAAmL,GAAA,EAAAnL,CAAA4jB,EAAA,GAUpCw2F,EAVoCv2F,EAAA,GAU3Bw2F,EAV2Bx2F,EAAA,GAAAE,EAWXX,oBAAS,GAXEY,EAAAhkB,OAAAmL,GAAA,EAAAnL,CAAA+jB,EAAA,GAWpCq2C,EAXoCp2C,EAAA,GAW1Bs2F,EAX0Bt2F,EAAA,GAAAq9C,EAYXj+C,oBAAS,GAZEk+C,EAAAthE,OAAAmL,GAAA,EAAAnL,CAAAqhE,EAAA,GAYpChH,EAZoCiH,EAAA,GAY1Bi5C,EAZ0Bj5C,EAAA,GAAAC,EAaTn+C,sBAbSo+C,EAAAxhE,OAAAmL,GAAA,EAAAnL,CAAAuhE,EAAA,GAapCjH,EAboCkH,EAAA,GAazBg5C,EAbyBh5C,EAAA,GAAA0gC,EAcT9+E,qBAAS,GAdA++E,EAAAniG,OAAAmL,GAAA,EAAAnL,CAAAkiG,EAAA,GAcpCuY,EAdoCtY,EAAA,GAczBuY,EAdyBvY,EAAA,GAAAC,EAeLh/E,oBAAoB,CAAC,EAAE,EAAE,IAfpBi/E,EAAAriG,OAAAmL,GAAA,EAAAnL,CAAAoiG,EAAA,GAepCuY,EAfoCtY,EAAA,GAevBiX,EAfuBjX,EAAA,GAAAG,EAgBPp/E,sBAhBOq/E,EAAAziG,OAAAmL,GAAA,EAAAnL,CAAAwiG,EAAA,GAgBpCjoC,EAhBoCkoC,EAAA,GAgBxBmY,EAhBwBnY,EAAA,GAAAE,EAiBTv/E,oBAAyB,SAjBhBw/E,EAAA5iG,OAAAmL,GAAA,EAAAnL,CAAA2iG,EAAA,GAiBpCyW,EAjBoCxW,EAAA,GAiBzByW,EAjByBzW,EAAA,GAAAiY,EAkBKz3F,qBAAS,GAlBd03F,EAAA96G,OAAAmL,GAAA,EAAAnL,CAAA66G,EAAA,GAkBpCE,EAlBoCD,EAAA,GAkBlBE,EAlBkBF,EAAA,GAAAz+B,EAmBrB5C,KAAfnB,EAnBoCt4E,OAAAmL,GAAA,EAAAnL,CAAAq8E,EAAA,MAqB3Cx9E,qBAAU,WACHm1B,GACChvB,OAAOs8B,WAAW,WACXy4E,GAAUA,EAAOluD,SAChBkuD,EAAOluD,QAAQx2B,SAEpB,MAER,CAACrB,IAEJ,IAgBM21C,GAAO,WAAuC,IAAtCsxC,EAAsCh6G,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,IAAAA,UAAA,GAC5Ci6G,EAA+D,GAAjDn9C,SAAmB,KAAVi8C,EAAc,IAAMA,OAAOt6G,GAAkB,GAAK,IACzEy7G,EAAqE,GAArDp9C,SAAqB,KAAZm8C,EAAgB,IAAMA,OAASx6G,GAAkB,IAC1E07G,EAAqE,IAArDr9C,SAAqB,KAAZq8C,EAAgB,IAAMA,OAAS16G,GAE5D,GAAG66D,IAAe0gD,EAAkB,KAAAI,EAAAr7G,OAAAmL,GAAA,EAAAnL,CACcu6D,EADd,GAC/B2gD,EAD+BG,EAAA,GAClBF,EADkBE,EAAA,GACHD,EADGC,EAAA,GAEhCH,EAA4B,GAAdA,EAAmB,GAAK,IACtCC,EAAgC,GAAhBA,EAAqB,IACrCC,GAAgC,IAGpC,IAAME,EAAqBJ,EAAcC,EAAgBC,GAErD7gD,GAAc0gD,EACdV,EAAYe,GAEZV,OAAcl7G,GAGlB,IAAM67G,EAAcz+G,KAAK+qB,MAAQyzF,EAEjChB,EAAYiB,GACZb,GAAa,GACbpB,EAAeP,GAAqBuC,IACpCd,EAAav0G,EAAKxG,KAClB64E,EAAU9a,gBAAgBhD,GACtB34D,EAAMqI,MAAMkmC,OAAO3wC,IACnB87G,EACArC,GAAqBc,EAAOE,EAASE,GACrCn0G,EAAKxG,MAET8D,EAAS6wB,GAAiBvyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,IAClD05G,GACIoC,EACAD,EACAlC,EACAC,EACAC,EACAnpG,KAmBFA,GAAO,WAAsC,IAArCqrG,IAAqCv6G,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,KAAAA,UAAA,GAC/Cs5G,EAAY,GACZD,EAAY,GACZI,GAAa,GACbE,OAAcl7G,GACd86G,OAAa96G,GACb25G,EAAa,SACVmC,GACCljC,EAAUkB,eAAehf,GACrB34D,EAAMqI,MAAMkmC,OAAO3wC,IACnB,EACA,EACA,MAYNg8G,GAA2B,SAACt+C,GAC9Bm9C,EAAYn9C,EAAM/C,UAClBmgD,EAAYp9C,EAAM9C,UAClBmgD,EAAar9C,EAAM7C,WACnBogD,GAAa,GACbvB,GACIh8C,EAAM/C,SACN+C,EAAM9C,SACN++C,EACAC,EACAC,EACAnpG,IAXkD,IAAAurG,EAcF3C,GAAqB57C,EAAM9C,UAdzBshD,EAAA37G,OAAAmL,GAAA,EAAAnL,CAAA07G,EAAA,GAc/CE,EAd+CD,EAAA,GAclCE,EAdkCF,EAAA,GAcnBG,EAdmBH,EAAA,GAgBtDjgH,QAAQC,IAAI,wBAAyBwhE,EAAM7rC,UAE3C2oF,EAASpB,GAAoB+C,EAAY55E,WAAY,KACrDm4E,EAAWtB,GAAoBgD,EAAc75E,WAAY,KACzDq4E,EAAWxB,GAAoBiD,EAAc95E,WAAY,MAGvD+5E,GAA2B,SAAC5+C,GAC9BzhE,QAAQC,IAAI,kCAAmCwhE,EAAM7rC,UACrDnhB,IAAK,IAGH6rG,GAA0B,SAAC7+C,GAC7Bu9C,GAAa,GAEbh/G,QAAQC,IAAI,uBAAwBwhE,EAAM7rC,UAEvC6rC,EAAM5C,aACL++C,EAAen8C,EAAM5C,YACrBqgD,EAAcz9C,EAAM5C,cAItB0hD,GAA6C,SAACv1G,EAAgBK,EAAc87C,EAAgBrO,GAC3F9tC,IAAW4zD,GACV0gD,GAAoB,IAItBkB,GAAyC,SAACx1G,GACzCA,IAAW4zD,GACV0gD,GAAoB,IAI5Bn8G,qBAAU,WAuBN,OAtBG47G,IACCX,GAAc90G,OAAOm3G,YAAY,WAC7BhD,GACI/+C,EACAC,EACA++C,EACAC,EACAC,EACAnpG,KAEL,KAEHgpG,GACI/+C,EACAC,EACA++C,EACAC,EACAC,EACAnpG,KAID,WACA2pG,IACCsC,cAActC,MAGvB,CAACW,EAAWrB,EAAW/+C,EAAUD,IAEpCv7D,qBAAU,WAQN,OAPAnD,QAAQC,IAAI,oBACZ28E,EAAUG,oBAAoBgjC,IAC9BnjC,EAAUK,oBAAoBojC,IAC9BzjC,EAAUI,mBAAmBsjC,IAC7B1jC,EAAUC,aAAa0jC,IACvB3jC,EAAUE,WAAW0jC,IAEd,WACHxgH,QAAQC,IAAI,oBACZ28E,EAAUgB,qBAAqBmiC,IAC/BnjC,EAAUe,oBAAoB2iC,IAC9B1jC,EAAUiB,qBAAqBwiC,IAC/BzjC,EAAUU,cAAcijC,IACxB3jC,EAAUW,YAAYijC,MAE3B,CAACr6G,EAAMqI,MAAMkmC,OAAO3wC,IAAKu6G,EAAOE,EAASE,EAAS9/C,IAErDz7D,qBAAU,WACNsR,MACD,CAACtO,EAAMqI,MAAMkmC,OAAO3wC,MAtOoB,IAAA48G,GAAAr8G,OAAAmL,GAAA,EAAAnL,CAwOY26G,EAxOZ,GAwOpC2B,GAxOoCD,GAAA,GAwOtBE,GAxOsBF,GAAA,GAwONG,GAxOMH,GAAA,GAyOrCI,GAAcH,GAAeC,GAAiBC,GAAkB,EAChEE,GAAcpiD,IAAcr0D,EAAKxG,IACjCk9G,IAAeriD,GAAaoiD,IAAe3B,EAEjD,OAAQt8G,GAAA,cAAAA,GAAA,cACH27D,EAAW,GAAK37D,GAAA,qBAAKwmB,MAAO,CACzB5lB,SAAU,WACVs5C,KAAMw3B,EAAQntD,MAAQ,GAAK,KAC3B41B,IAAK,OACLwmB,gBAAiB,yBACjBt2C,OAAQ,WAENlqB,QAAS,kBAAM2E,EAAS6wB,GAAiBvyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,MAEnEhB,GAAA,mBAAGwmB,MAAO,CAACE,QAAS,OAAQo/E,WAAY,OAAQ9vD,SAAU,OAAQD,MAAOioE,GAAY,UAAY,WAAYr2F,UAAWq2F,GAAY,GAAK,SACrIh+G,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAM,cAAgB01G,GAAYrD,EAAY,SADxD,WAEKP,GAAoByD,GAAat6E,WAAY,IAAI,GAFtD,YAGK62E,GAAoB0D,GAAev6E,WAAY,IAAI,GAHxD,YAIK62E,GAAoB2D,GAAex6E,WAAY,IAAI,KAG5DvjC,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAMqe,EAAS1P,WAAW,EAAMphB,QAnNvB,WAChBK,EAAS6wB,GAAiBvyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,KAkNWyzC,KAAK,QAC9Dz0C,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,kCACvBtE,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,mBAAGwmB,MAAO,CAACuD,UAAW,SAAU+7E,WAAY,OAAQ9vD,SAAU,SAC1Dh2C,GAAA,cAACk4C,GAAA,EAAD,CAAO5vC,KAAK,QACL0zF,aAAa,EACbz3F,KAAK,SACL6sE,IAAK,EACLD,IAAK,GACLnpD,YAAY,KACZysB,KAAK,QACLjuB,MAAO,CAACjC,MAAO,QACftiB,MAAO05D,EAAW,EAAGy+C,GAAoByD,GAAat6E,WAAY,IAAMg4E,EACxExvD,UAAW,SAACjwD,GAAD,MAAgC,UAAVA,EAAEkG,KAAiBkpE,MACpDnkD,SAAU,SAACjrB,EAAGwF,GAAJ,OA7OL68G,EA6OqC78G,EAAKW,WA5OlEu5G,EAASpB,GAAoB+D,EAAU,KADhB,IAACA,GA8OLzpE,SAAUinB,EAAW,IAE5B37D,GAAA,sBAAMwmB,MAAO,CAAC43F,aAAc,SAA5B,aACAp+G,GAAA,cAACk4C,GAAA,EAAD,CAAO5vC,KAAK,UACL8hD,IAAKkxD,EACLtf,aAAa,EACbz3F,KAAK,SACL6sE,IAAK,EACLD,IAAK,GACLnpD,YAAY,KACZysB,KAAK,QACLjuB,MAAO,CAACjC,MAAO,QACftiB,MAAO05D,EAAW,EAAGy+C,GAAoB0D,GAAev6E,WAAY,IAAMk4E,EAC1E1vD,UAAW,SAACjwD,GAAD,MAAgC,UAAVA,EAAEkG,KAAkBkpE,MACrDnkD,SAAU,SAACjrB,EAAGwF,GAAJ,OAxPH+8G,EAwPqC/8G,EAAKW,WAvPpEy5G,EAAWtB,GAAoBiE,EAAY,KADlB,IAACA,GAyPP3pE,SAAUinB,EAAW,IAE5B37D,GAAA,sBAAMwmB,MAAO,CAAC43F,aAAc,SAA5B,aACAp+G,GAAA,cAACk4C,GAAA,EAAD,CAAO5vC,KAAK,UACL0zF,aAAa,EACbz3F,KAAK,SACL6sE,IAAK,EACLD,IAAK,GACLnpD,YAAY,KACZysB,KAAK,QACLjuB,MAAO,CAACjC,MAAO,QACftiB,MAAO05D,EAAW,EAAGy+C,GAAoB2D,GAAex6E,WAAY,IAAMo4E,EAC1E5vD,UAAW,SAACjwD,GAAD,MAAgC,UAAVA,EAAEkG,KAAiBkpE,MACpDnkD,SAAU,SAACjrB,EAAGwF,GAAJ,OAlQHg9G,EAkQqCh9G,EAAKW,WAjQpE25G,EAAWxB,GAAoBkE,EAAY,KADlB,IAACA,GAmQP5pE,SAAUinB,EAAW,MAIpC37D,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,CAAeX,MAAO,CAACuD,UAAW,WAC9B/pB,GAAA,cAAC2lD,GAAA,EAAD,MACMq2D,GAAah8G,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,KAAK,OAAO3pB,QAAS,kBAAM+qE,MAAQx2B,UAAWwpE,KACpElC,GAAah8G,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,KAAK,QAAQ3pB,QAAS,kBAvN9C,WAAsC,IAArC48G,IAAqCv6G,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,KAAAA,UAAA,GAChDy5G,GAAa,GACbE,EAAc,CAAC0B,GAAcC,GAAgBC,KAC1ChB,GACCljC,EAAU7a,gBAAgBjD,GACtB34D,EAAMqI,MAAMkmC,OAAO3wC,IACnB26D,EACA8+C,GAAqBc,EAAOE,EAASE,GACrCn0G,EAAKxG,IACL,CAAC68G,GAAcC,GAAgBC,MA8MuB9yC,IAASv2B,UAAWwpE,KACtEl+G,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,KAAK,OAAO3pB,QAAS,kBAAMuR,MAAQgjC,UAAWsnE,IAAckC,KACpEl+G,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,KAAK,OAAO3pB,QAAS,kBAvLzCg8G,OAAcl7G,GACdg7G,GAAa,QACb/wC,IAAK,IAqLmDx2B,SAAuB,IAAbinB,IAAmBuiD,YCnYvFK,GAAO,kBACTv+G,GAAA,cAACm6F,GAAA,EAAD,KACIn6F,GAAA,cAACm6F,GAAA,EAAD,CAAUuI,OAAO,EAAMllG,K5T3CX,I4T2C8B0qB,GAAI2C,KAC9C7qB,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAkB9C,UAAWy2F,KACvDx+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAA2B9C,UAAW02F,KAChEz+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5T1CWiI,wB4T0C2BsiB,UAAWmzD,KACrEl7E,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TpCGiI,2C4ToC2BsiB,UAAWygB,KAC7DxoC,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAoB9C,UAAW22F,KACzD1+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TlCAiI,mB4TkC2BsiB,UAAW42F,KAC1D3+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TrCEiI,0C4TqC2BsiB,UAAW03B,KAC5Dz/C,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TlCLiI,qB4TkC2BsiB,UAAW8jF,KACrD7rG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAsB9C,UAAW62F,KAC3D5+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TrCQiI,0B4TqC2BsiB,UAAW82F,KAClE7+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TxCUiI,gE4TwC2BsiB,UAAW+2F,KACpE9+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5T3CGiI,iC4T2C2BsiB,UAAWg3F,OAqB/DC,GAAOz2F,aAjBE,SAACnlB,GAAD,OACXpD,GAAA,cAACqpB,GAAA,EAAD,CAAWm9B,OAAO,GACdxmD,GAAA,cAACi/G,GAAD,MACAj/G,GAAA,qBAAKwmB,MAAO,CAACulD,OAAO,IAAInrE,SAAS,QAAQu0C,QAAQ,OAAOC,cAAc,SAAS+E,IAAI,IAAIuyB,OAAO,IAAIxyB,KAAK,IAAIglE,UAAU,SAASC,KAAK,MACnIn/G,GAAA,cAACo/G,GAAD,OAEAp/G,GAAA,qBAAKwmB,MAAO,CAACuzB,WAAW,QAASU,WAAW,SAC5Cz6C,GAAA,cAACq/G,GAAD,OAEAr/G,GAAA,cAACs/G,GAAD,MACAt/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TjEWiI,wB4TiE2BsiB,UAAWw3F,KACrEv/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TlEWiI,wB4TkE2BsiB,UAAWy3F,KACrEx/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TnEWiI,wB4TmE2BsiB,UAAW03F,KACrEz/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,K5TpEWiI,wB4ToE2BsiB,UAAWi0C,QC5C9Dr3D,ID6DGqoD,aC7DHroD,eAhBgB,SAACvB,GAC5B,OACIpD,GAAA,cAAC4lB,GAAA,EAAD,CAAO1O,KAAM9T,EAAM8T,KAAM2O,WAAW,EAAOphB,QAASrB,EAAMqB,QAASgwC,KAAK,QACpEz0C,GAAA,cAAC4lB,GAAA,EAAME,OAAP,KAAe1iB,EAAMkB,EAAE,4BAA4BlB,EAAMs8G,YACzD1/G,GAAA,cAAC4lB,GAAA,EAAMG,QAAP,KACI/lB,GAAA,uBAAIoD,EAAMkB,EAAE,mCAEhBtE,GAAA,cAAC4lB,GAAA,EAAMuB,QAAP,KACInnB,GAAA,cAAConB,GAAA,EAAD,CAAQO,UAAU,WAAWutB,KAAK,mCAAmCtU,OAAO,UAA5E,gBCKVggE,GAAerV,aAAK,SAACnoF,GAA6B,IAAAshB,EAEVC,qBAAS,GAFCC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAE7Ci7F,EAF6C/6F,EAAA,GAE9Bg7F,EAF8Bh7F,EAAA,GAI9C9f,EAAW0jB,yBAEjB,OAAOxoB,GAAA,cAAAA,GAAA,cAAEA,GAAA,cAACgqB,GAAA,EAAD,CAAUnc,MAAM,EAAMic,KAAK,qBAChC9pB,GAAA,cAACgqB,GAAA,EAASC,KAAV,CAAeunC,UAAU,QACrBxxD,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,UAAUK,KAAK,WAAWhqB,QAAS,kBAAMy/G,GAAiB,MAC9E5/G,GAAA,cAACgqB,GAAA,EAASE,KAAV,CACIJ,KAAM,oBACNK,KAAM/mB,EAAMkB,EAAE,iCACdnE,QAAS,kBAAM2E,EAAS0wB,GAAqBpyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,GAAM,OAE/EhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,OAAOK,KAAK,OAAOhqB,QAAS,kBAAM2E,EAAS4wB,GAAkBtyB,EAAMqI,MAAMkmC,OAAO3wC,KAAK,OACzGhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,MAAMK,KAAK,WAAWjC,GAAI2C,GAAiCznB,EAAMqI,MAAMkmC,OAAO3wC,KAAM6oB,GAAIo3E,aAC5GjhG,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,WAAWK,KAAK,eAAehqB,QAAS,kBAAM2E,EAASswB,GAAmBhyB,EAAMqI,MAAMkmC,OAAO3wC,SACjHhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,SAASK,KAAK,eAAehqB,QAAS,kBAAM2E,EAASuwB,GAAmBjyB,EAAMqI,MAAMkmC,OAAO3wC,SAC/GhB,GAAA,cAACgqB,GAAA,EAASE,KAAV,CAAeJ,KAAK,WAAWK,KAAK,OAAON,GAAG,IAAIqrB,KAAK,gCAAgCtU,OAAO,aAGlG5gC,GAAA,cAAC6/G,GAAD,CAAwB3oG,KAAMyoG,EAAel7G,QAAS,kBAAMm7G,GAAiB,IAAQF,UAAW,sBAGzF/6G,kBAAiB4jB,aAAWq4E,KCvB5BgC,GAfU,SAACx/F,GAAiC,IAAAshB,EAC/BC,qBAAS,GADsBC,EAAArjB,OAAAmL,GAAA,EAAAnL,CAAAmjB,EAAA,GAChDxN,EADgD0N,EAAA,GAC1Co8C,EAD0Cp8C,EAAA,GAOvD,OAAO5kB,GAAA,cAAAA,GAAA,cACHA,GAAA,cAAC2gG,GAAA,EAAD,KACI3gG,GAAA,cAAConB,GAAA,EAAD,CAAQ0C,MAAM,EAAMnC,UAAU,QAAQxnB,QAAS,kBAAM6gE,GAAQ,KAAOhhE,GAAA,cAACw1C,GAAA,EAAD,CAAMltC,KAAK,oBAA/E,cAEJtI,GAAA,cAAC6/G,GAAD,CAAwB3oG,KAAMA,EAAMzS,QARpB,WAChBu8D,GAAQ,IAOkD0+C,UAAU,kBCe7D/6G,kBAAiB4jB,aAtBhB,SAACnlB,GACb,IAAMsuE,EAAU1oD,uBAAYqpD,MAGtB3sB,EAFmB76B,GAAiCznB,EAAMoD,SAASV,UAElC4rE,EAAQntD,MAAQ,GAAM,KAAO,QAEpE,OAAQvkB,GAAA,cAACiqB,GAAA,EAAD,CAAMw4E,MAAM,MAAMjwC,UAAU,EAAOn2D,GAAG,UAAUmqB,MAAO,CAACk/B,gBAC5D1lD,GAAA,cAACm6F,GAAA,EAAD,CAAO38F,KAAMqtB,IACT7qB,GAAA,cAAC2gG,GAAA,EAAD,KACI3gG,GAAA,cAACiiG,GAAA,EAAD,KACIjiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAM,CAACqtB,GhUrBRplB,wBgUqB0DolB,IAA4B9C,UAAWq6E,KACpHpiG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KhUTjBiI,qBgUSuCsiB,UAAWw6E,KACrDviG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAM,ChUvBPiI,wBgUuBwColB,IAA4B9C,UAAW46E,QAI9G3iG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KhU3BWiI,wBgU2B2BsiB,UAAW66E,KACrE5iG,GAAA,cAACiqB,GAAA,EAAKA,KAAN,CAAWrpB,SAAS,UACpBZ,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KhU7BWiI,wBgU6B2BsiB,UAAW64E,SCCvE2d,GAAO,kBACTv+G,GAAA,cAACm6F,GAAA,EAAD,KACIn6F,GAAA,cAACm6F,GAAA,EAAD,CAAUuI,OAAO,EAAMllG,KjUpCX,IiUoC8B0qB,GAAI2C,KAC9C7qB,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAkB9C,UAAWy2F,KACvDx+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAA2B9C,UAAW02F,KAChEz+G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjUnCWiI,wBiUmC2BsiB,UAAWmzD,KACrEl7E,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjUvBLiI,qBiUuB2BsiB,UAAW8jF,KACrD7rG,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KAAMqtB,GAAsB9C,UAAW62F,OAqB7DI,GAAOz2F,aAjBE,SAACnlB,GAAD,OACXpD,GAAA,cAACqpB,GAAA,EAAD,CAAWm9B,OAAO,GACdxmD,GAAA,cAAC8/G,GAAD,MACA9/G,GAAA,qBAAKwmB,MAAO,CAACulD,OAAO,IAAInrE,SAAS,QAAQu0C,QAAQ,OAAOC,cAAc,SAAS+E,IAAI,IAAIuyB,OAAO,IAAIxyB,KAAK,IAAIglE,UAAU,SAASC,KAAK,MAC/Hn/G,GAAA,cAACo/G,GAAD,OAEJp/G,GAAA,qBAAKwmB,MAAO,CAACuzB,WAAW,QAASU,WAAW,SACxCz6C,GAAA,cAAC+/G,GAAD,OAEJ//G,GAAA,cAACs/G,GAAD,MACAt/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjUnDWiI,wBiUmD2BsiB,UAAWw3F,KACrEv/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjUpDWiI,wBiUoD2BsiB,UAAWy3F,KACrEx/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjUrDWiI,wBiUqD2BsiB,UAAW03F,KACrEz/G,GAAA,cAACm6F,GAAA,EAAD,CAAOuI,OAAO,EAAMllG,KjU9CGiI,iCiU8C2BsiB,UAAWg3F,QAmCtDiB,yLAjBK,IACJC,EAAUx+G,KAAK2B,MAAf68G,MAEFC,EAAkE,IAAvD35G,OAAOC,SAASV,SAASC,OAAO,mBAA2B,iBAAmB,IAE/F,OACI/F,GAAA,cAACmgH,GAAA,EAAD,CAAiB7gH,KAAMA,IACnBU,GAAA,cAACogH,GAAA,SAAD,CAAUH,MAAOA,GACbjgH,GAAA,cAACioB,GAAA,cAAD,CAAQo4F,SAAUH,GACdlgH,GAAA,cAACsgH,GAAD,gBAVNtzD,yBCjELrzC,GAAe3J,iBCEfuwG,GAAc1mG,2BAAgD,CACvEmyB,KDD4C,WAAoE,IAAnE7oC,EAAmEX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAhDmX,GAAczY,EAAkCsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAChH,OAAQC,EAAOqD,MACX,KAAKsnC,GACD,OAAO1oC,EAAMjB,IAAI,QAAShB,EAAOrC,QAAQmtC,KAAKtvC,OAClD,QACI,OAAOyG,KCHhB,kBAAMG,kBAAO,MCcHqW,GAAwC3J,iBCUxC2J,GAA4B3J,iBC3B5B2J,GAAkC3J,iBCClC2J,GAAwC3J,iBCFxC2J,GAAqC3J,iBCArC2J,GAA8C3J,iBCI9C2J,GAA8C3J,iBCD9C2J,GAAkC3J,iBCUlC2J,GAAe,IAF5B,SAAAtY,GAAA,SAAAm/G,IAAA,OAAAj/G,OAAAC,GAAA,EAAAD,CAAAE,KAAA++G,GAAAj/G,OAAAI,GAAA,EAAAJ,CAAAE,KAAAF,OAAAK,GAAA,EAAAL,CAAAi/G,GAAA1zG,MAAArL,KAAAe,YAAA,OAAAjB,OAAAO,GAAA,EAAAP,CAAAi/G,EAAAn/G,GAAAm/G,EAAA,CAAwCr+G,kBANkB,CACtD4B,OAAQ,GACR2vC,uBAAuB,EACvBC,oBAAoB,MCDlB8sE,GAAmB,SAAC71F,GACtB,IAAM81F,EAAkC,GAClCC,EAAa/1F,EAAQnR,UAEvBmnG,GAAoB,EACpBC,GAAwB,EACxBC,EAAoB,GACpBC,EAA8B,KAC9BC,EAAiC,KAwErC,OAtEAL,EAAW38G,QAAQ,SAAC6xF,EAAO3xB,GAQvB,IANI08C,GAAYC,IACZhrB,EAAQA,EAAM3zF,IAAI,QAAS4+G,GAC3BD,GAAe,EACfC,EAAY,IAGb58C,EAAE,EAAIy8C,EAAWl+G,OAAQ,CACxB,IAAMkL,EAAOgzG,EAAWz8C,EAAE,GAE1B,GAAG2xB,EAAM5tF,SAAW0F,EAAK1F,OAOrB,OANAy4G,EAAgBx8G,KAAK2xF,GACrB+qB,GAAW,EACXC,GAAe,EACfC,EAAY,GACZC,EAAiB,KACjBC,EAAa,MACN,EAUX,GAPGD,GAAkBC,IAAenrB,EAAM30F,SACtC20F,EAAQA,EAAM3zF,IAAI,OAAQ6+G,IAG9BA,EAAiB,KACjBC,EAAa,KAEVnrB,EAAMzvF,SAAWuH,EAAKvH,OAAQ,CAC7B,GAAGyvF,EAAM30F,SAAWyM,EAAKzM,OACrB,OAAG20F,EAAMphE,WAAayL,GAAgBC,UAAY01D,EAAMphE,WAAayL,GAAgBD,MACjF6gF,EAAYjrB,EAAMl8D,MAClBonF,EAAiBlrB,EAAM7uD,KACvBg6E,EAAanrB,EAAM30F,OAEnB0/G,GAAW,EACXC,GAAe,GACR,IAGPD,GACAF,EAAgBx8G,KAAK2xF,GAGzB+qB,GAAW,GACJ,GAGX,GAAG/qB,EAAM30F,SAAWq7B,GAAcwK,QAAUp5B,EAAKzM,SAAWq7B,GAAcouD,MAItE,OAHAi2B,GAAW,EACXC,GAAe,EACfC,EAAYjrB,EAAMl8D,OACX,GAKfinF,GACAF,EAAgBx8G,KAAK2xF,GAGzB+qB,GAAW,EACXE,EAAY,GACZD,GAAe,EACfG,EAAa,KACbD,EAAiB,OAGqBxuG,gBAAKmuG,IAKtC/mG,GAAkC3J,iBCzFlC2J,GAAgC3J,iBCQhC2J,GAAoC3J,iBC4BpCixG,GAAyBpnG,2BAA6D,CAC/FhC,OXRyD,WAAmF,IAAlF1U,EAAkFX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA7DmX,GAAczY,EAA+CsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC5I,OAAQC,EAAOqD,MACX,KAAKqnB,GACD,IAAMs7E,EAAWhmG,EAAOrC,QAAQglB,MAChC,OAAO1gB,EAAMjB,IAAIglG,EAASlmG,IAAKkmG,GACnC,KAAKr7E,GACD,IAAMhU,EAAS3W,EAAOrC,QAUtB,OATAmF,mBAAQ6T,EAAQ,SAACgM,GAEb,GAAI1gB,EAAMiV,IAAIyL,EAAM7iB,KAEb,CACH,IAAMqmG,EAAgBlkG,EAAMiV,IAAIyL,EAAM7iB,KACtCmC,EAAQA,EAAMjB,IAAI2hB,EAAM7iB,IAAKqmG,EAAe6Z,gBAAgBr9F,SAH5D1gB,EAAQA,EAAMjB,IAAI2hB,EAAM7iB,IAAK6iB,KAM9B1gB,EACX,KAAK2oB,GAID,OAHA9nB,mBAAQ9C,EAAOrC,QAAS,SAACglB,GACrB1gB,EAAQA,EAAMjB,IAAI2hB,EAAM7iB,IAAK6iB,KAE1B1gB,EACX,KAAK4oB,GACD,IAAIo1F,EAA8Ch+G,EAAMiV,IAAIlX,EAAOrC,QAAQq2B,SAAStR,SAOpF,OALGu9F,IAECA,GADAA,EAAgBA,EAAcC,sBAAsBlgH,EAAOrC,QAAQq2B,WACrChzB,IAAI,kBAAkB,GACpDiB,EAAQA,EAAMjB,IAAIhB,EAAOrC,QAAQq2B,SAAStR,QAASu9F,IAEhDh+G,EACX,KAAK6oB,GACD,IAAIq1F,EAAqDl+G,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,SAOlF,OALGy9F,IAECA,GADAA,EAAuBA,EAAqBn/G,IAAI,kBAAkB,IACtBA,IAAI,cAAehB,EAAOrC,QAAQkzB,aAC9E5uB,EAAQA,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAASy9F,IAEvCl+G,EACX,KAAKqoB,GACD,IAAI81F,EAAcn+G,EAAMiV,IAAIlX,EAAOrC,QAAQglB,MAAM7iB,KAMjD,OAJGsgH,IACCA,EAAcA,EAAYC,6BAA6BrgH,EAAOrC,QAAQglB,OACtE1gB,EAAQA,EAAMjB,IAAIhB,EAAOrC,QAAQglB,MAAM7iB,IAAKsgH,IAEzCn+G,EACX,KAAKsoB,GACD,OAAQtoB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQglB,MAAM7iB,KAAME,EAAOrC,QAAQglB,OACnE,KAAKoI,GACD,OAAO9oB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,eAAe,GAC/D,KAAKsI,GACD,OAAO/oB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,eAAe,GAC/D,KAAKuI,GACD,OAAOhpB,EAAMs+G,SAAS,CAACvgH,EAAOrC,QAAQ+kB,UAC1C,KAAK8K,GACD,GAAIugB,EAAcz9B,OAAO05B,eAAehqC,EAAOrC,QAAQu5B,WAAY,CAC/D,IAAM56B,EAAO,CAAC0D,EAAOrC,QAAQu5B,UAAUv5B,QAAQglB,MAAO,WADS69F,EAErCxgH,EAAOrC,QAAQu5B,UAAUv5B,QAA5CoJ,EAFwDy5G,EAExDz5G,OAAQypB,EAFgDgwF,EAEhDhwF,QACTiwF,EAAc,IAAItzB,EAAgBzzD,aAAa,CACjD3yB,SACAypB,YAEEkwF,EAA+Cz+G,EAAME,MAAM7F,GAEjE,GAAIokH,EAAetxG,OAAOqxG,GACtB,OAAOx+G,EAAMq+G,MAAMhkH,EAAMokH,EAAe7iC,UAIhD,OAAO57E,EACX,KAAKupB,GACD,OAAOvpB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAiB,GACjE,KAAKqL,GACL,KAAKD,GACD,OAAO7rB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAiB,GACjE,KAAK+I,GACD,OAAOxpB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAiB,GACjE,KAAKsL,GACD,OAAO/rB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAiB,GACjE,KAAKgJ,GAKD,OAJI1rB,EAAOrC,QAAQ02B,UACfpyB,EAAQA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,6BAA6B,IAGvEzgB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,qBAAsB1iB,EAAOrC,QAAQ02B,SACrF,KAAK1I,GAOD,OANI3rB,EAAOrC,QAAQ02B,UACfpyB,EAAQA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,sBAAsB,KAGvEzgB,EAAQA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,6BAA8B1iB,EAAOrC,QAAQ42B,cAE7E+rF,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,4BAA6B1iB,EAAOrC,QAAQ02B,SAC5F,KAAKzI,GACD,OAAO3pB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,yBAA0B1iB,EAAOrC,QAAQ02B,SACzF,KAAKxI,GAED,OADA5pB,EAAQA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,wBAAyB1iB,EAAOrC,QAAQ02B,SAEzF,KAAKvI,GAED,OADA7pB,EAAQA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,sBAAuB1iB,EAAOrC,QAAQg3B,QAEvF,KAAKrG,GACD,IAAM7X,EAAkCxU,EAAME,MAAM,CAACnC,EAAOrC,QAAQ+kB,QAAS,cAAerR,mBAC5F,OAAOpP,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,cAAejM,EAAQ5T,OAAO,SAAA46F,GAAC,OAAIA,IAAMz9F,EAAOrC,QAAQoJ,UACxG,KAAKwoB,GACD,OAAOttB,EAAMjB,IAAIhB,EAAOrC,QAAQmC,IAAKE,EAAOrC,SAEhD,KAAKklD,GAAWtpC,KAAKijC,6BACjB,IAAMmkE,EAA8B1+G,EAAME,MAAM,CAACnC,EAAOrC,QAAQ+kB,QAAS,iBAAkBrR,mBAC3F,OAAOpP,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAkBi+F,EAAS39G,KAAKhD,EAAOrC,QAAQ2zB,SAC/F,KAAKuxB,GAAWtpC,KAAKkjC,6BACjB,IAAMmkE,EAAiC3+G,EAAME,MAAM,CAACnC,EAAOrC,QAAQ+kB,QAAS,iBAAkBrR,mBAC9F,OAAOpP,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,iBAAkBk+F,EAAY/9G,OAAO,SAAAO,GAAC,OAAIA,IAAMpD,EAAOrC,QAAQ2zB,UAC/G,QACI,OAAOrvB,IW3Gf4+G,yBNjC2E,WAAuH,IAAtH5+G,EAAsHX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA/EmX,GAAczY,EAAiEsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAClM,OAAQC,EAAOqD,MACX,KAAKorB,GACD,OAAOpW,GAAiBpW,EAAOjC,EAAOrC,QAAQizB,kBAClD,KAAKrC,GACD,IAAM7L,EAAU1iB,EAAOrC,QAAQ+kB,QACzB3b,EAAS/G,EAAOrC,QAAQoJ,OACxBixB,EAA6E/1B,EAAM6+G,WAAWvoG,UAC/F8vB,KAAK,SAAA04E,GAAe,OAAIA,EAAgBr+F,UAAYA,GAAWq+F,EAAgBh6G,SAAWA,IAE/F,OAAIixB,EACO/1B,EAAMq+G,MAAM,CAACtoF,EAAgBl4B,IAAK,eAAgBE,EAAOrC,QAAQ+yB,aAGrEzuB,EAEX,KAAKqsB,GACD,IAAM5L,EAAU1iB,EAAOrC,QAAQ+kB,QACzB3b,EAAS/G,EAAOrC,QAAQoJ,OACxBixB,EAA6E/1B,EAAM6+G,WAAWvoG,UAC/F8vB,KAAK,SAAA04E,GAAe,OAAIA,EAAgBr+F,UAAYA,GAAWq+F,EAAgBh6G,SAAWA,IAE/F,OAAIixB,EACO/1B,EAAMmW,OAAO4f,EAAgBl4B,KAGjCmC,EAEX,QACI,OAAOA,IMKf++G,yBPtC2E,WAAuH,IAAtH/+G,EAAsHX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA/EmX,GAAczY,EAAiEsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAClM,OAAQC,EAAOqD,MACX,KAAKqrB,GACD,OAAOrW,GAAiBpW,EAAOjC,EAAOrC,QAAQizB,kBAClD,KAAKpC,GACD,OAAOtW,GAAgBjW,EAAOjC,EAAOrC,SACzC,QACI,OAAOsE,IOgCfm2B,iBRvCkE,WAAqG,IAApGn2B,EAAoGX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAtEmX,GAAczY,EAAwDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACvK,OAAQC,EAAOqD,MACX,KAAKsrB,GACD,OAAOtW,GAAiBpW,EAAOjC,EAAOrC,QAAQy6B,kBAClD,KAAKhK,GAEL,KAAKC,GACD,OAAOnW,GAAgBjW,EAAOjC,EAAOrC,QAAQ+5B,iBACjD,QACI,OAAOz1B,IQ+Bf43C,aVvC+D,WAA+F,IAA9F53C,EAA8FX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAnEmX,GAAczY,EAAqDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC9J,OAAQC,EAAOqD,MACX,KAAK2rB,GACD,OAAO/sB,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAAS1iB,EAAOrC,QAAQk7B,QAC5D,KAAK5J,GACD,OAAOhtB,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAAS,MAC7C,KAAKwM,GACD,OAAOjtB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,gBAAiB1iB,EAAOrC,QAAQq7B,cAChF,QACI,OAAO/2B,IU+Bf89D,mBTvCqE,WAA2G,IAA1G99D,EAA0GX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAzEmX,GAAczY,EAA2DsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAChL,OAAQC,EAAOqD,MACX,KAAK0rB,GACD,IAAMkyF,EAAqBh/G,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,UAAY5T,iBAChE,OAAO7M,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAASrK,GAAiB4oG,EAAoBjhH,EAAOrC,QAAQ+4B,WACjG,QACI,OAAOz0B,ISkCfi/G,OFxB6D,WAA2F,IAA1Fj/G,EAA0FX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAjEmX,GAAczY,EAAmDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACxJ,OAAQC,EAAOqD,MACX,KAAKoqB,GACD,OApBI,SAACxrB,EAAwBq0B,GACrC,IAAM6qF,EAAmCl/G,EAAMiV,IAAIof,EAAa3T,MAAOtR,mBACvE,OAAOpP,EAAMjB,IAAIs1B,EAAa3T,MAAOw+F,EAAWn+G,KAAKszB,IAkBtC8qF,CAAQn/G,EAAOjC,EAAOrC,QAAQ24B,cACzC,KAAK5I,GACD,OAjBI,SAACzrB,EAAwBu0B,GACrC,IAAM6qF,EAAoB7qF,EAAO7b,MAAM,IAAIijE,EAAUp3C,aAAao3C,EAAUv3C,2BAExE86E,EAAmCl/G,EAAMiV,IAAImqG,EAAkB1+F,MAAOtR,mBAM1E,OALAmlB,EAAO1zB,QAAQ,SAAAwzB,GACX6qF,EAAaA,EAAWt+G,OAAO,SAAAy+G,GAAkB,OAAIA,EAAmBxhH,MAAQw2B,EAAax2B,MAC7FmC,EAAQA,EAAMjB,IAAIs1B,EAAa3T,MAAOw+F,KAGnCl/G,EAQQs/G,CAAQt/G,EAAOjC,EAAOrC,QAAQ64B,QACzC,QACI,OAAOv0B,IEkBfynB,QH+C+D,WAA+F,IAAA83F,EAAAC,EAA9Fx/G,EAA8FX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAnEmX,GAAczY,EAAqDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC9J,OAAQC,EAAOqD,MACX,KAAK0oB,GACD,IAAI21F,EAA8Bz/G,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,QAAS,IAAIkvB,IACpE+vE,EAAc3hH,EAAOrC,QAAQk3B,QAEjC,GAAG6sF,EAAch4F,QAAQhP,QAAU,EAAG,CAClC,IAAMknG,EAAiCF,EAAch4F,QAAQi0D,OAC7D+jC,EAAgBA,EAAc1gH,IAAI,UAAW0gH,EAAch4F,QAAQm2D,OACnE8hC,EAAcA,EAAYxxB,QAAQyxB,GAGtCD,EAAcpC,GAAiBoC,GAC/B,IAAME,EAAY7hH,EAAOrC,QAAQk3B,QAAQ8oD,KAAK,IAAI53C,IAelD,OAZA27E,GADAA,EAAgBA,EAAc1gH,IAAI,WAAWwgH,EAAAE,EAAch4F,SAAQ1mB,KAAtB4I,MAAA41G,EAAAnhH,OAAAyZ,GAAA,EAAAzZ,CAA8BshH,EAAYppG,cACzDvX,IAAI,qBAAsB6gH,EAAUtxF,cAG9DsxF,EAAU38G,QAAU28G,EAAUtuF,WAAayL,GAAgBD,MAEzC42D,KAAOksB,EAAU/7E,KAAM6vD,KAAOuB,UAEnCK,SAAS5B,KAAO,iBACzB+rB,EAAgBA,EAAc1gH,IAAI,yBAAyB,IAI5DiB,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAASg/F,GAC7C,KAAK11F,GACD,IAAI81F,EAA8B7/G,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,QAAS,IAAIkvB,IACpEmwE,EAAc/hH,EAAOrC,QAAQk3B,QAEjC,GAAGitF,EAAcp4F,QAAQhP,QAAU,EAAG,CAClC,IAAMsnG,EAA2BF,EAAcp4F,QAAQ/O,QACvDmnG,EAAgBA,EAAc9gH,IAAI,UAAW8gH,EAAcp4F,QAAQu4F,SACnEF,EAAcA,EAAY/+G,KAAKg/G,GAGnCD,EAAcxC,GAAiBwC,GAE/BD,EAAgBA,EAAc9gH,IAAI,WAAWygH,EAAAK,EAAcp4F,SAAQymE,QAAtBvkF,MAAA61G,EAAAphH,OAAAyZ,GAAA,EAAAzZ,CAAiC0hH,EAAYxpG,aAE1F,IAAM2pG,EAAaliH,EAAOrC,QAAQk3B,QAAQ8oD,KAAK,IAAI53C,IAenD,OAbI+7E,EAAcpwE,qBACdowE,EAAgBA,EAAc9gH,IAAI,qBAAsBkhH,EAAW3xF,eAInE2xF,EAAWh9G,QAAUg9G,EAAW3uF,WAAayL,GAAgBD,MAC3C42D,KAAOusB,EAAWp8E,KAAM6vD,KAAOuB,UAEpCK,SAAS5B,KAAO,iBACzBmsB,EAAgBA,EAAc9gH,IAAI,yBAAyB,IAI5DiB,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAASo/F,GAC7C,KAAKz1F,GACD,IAAI81F,EAAsBlgH,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,QAAS,IAAIkvB,IAEhE,OADAuwE,EAAsBA,EAAoBnhH,IAAI,UAAWhB,EAAOrC,QAAQy3B,SACjEnzB,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAASy/F,GAC7C,KAAK/1F,GACD,OAAOnqB,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,0BAA0B,GAC1E,KAAKuJ,GACD,OAAOhqB,EAAMmW,OAAOpY,EAAOrC,QAAQ+kB,SACvC,QACI,OAAOzgB,IGlHfmgH,cCpDqD,WAAmE,IAAlEngH,IAAkEX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,KAAAA,UAAA,GACxH,QADwHA,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,GACzGsD,MACX,KAAKosB,GACD,OAAQ,EACZ,KAAK9E,GACD,OAAO,EACX,QACI,OAAO1oB,ID8Cfs1B,uBErDqD,WAAoE,IAAnEt1B,EAAmEX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,IAAAA,UAAA,GACzH,QADyHA,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,GAC1GsD,MACX,KAAKmsB,GACD,OAAQ,EACZ,QACI,OAAOvtB,IFiDfogH,SJjCgE,WAAiG,IAAhGpgH,EAAgGX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAApEmX,GAAczY,EAAsDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACjK,OAAQC,EAAOqD,MACX,KAAKypB,GACD,OAAO7qB,EAAMjB,IAAI,SAAUhB,EAAOrC,QAAQkF,QAC9C,KAAKkqB,GACD,OAAO9qB,EAAMjB,IAAI,wBAAyBhB,EAAOrC,QAAQ43B,MAC7D,KAAKvI,GACD,OAAO/qB,EAAMjB,IAAI,qBAAsBhB,EAAOrC,QAAQ43B,MAC1D,QACI,OAAOtzB,IIyBf+mG,aL5C+D,WAA+F,IAA9F/mG,EAA8FX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAnEmX,GAAczY,EAAqDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC9J,OAAQC,EAAOqD,MACX,KAAKipB,GACD,IAAMg2F,EAAkBrgH,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,QAAS,IAAIulF,GAAa,CAACvxE,SAAUrlB,qBACtF,OAAOpP,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAAS4/F,EAAgBC,UAAU,IAAIta,GAAa,CAACvxE,SAAU12B,EAAOrC,QAAQ+4B,aAClH,KAAKzJ,GACD,IAAMu1F,EAAkBvgH,EAAMiV,IAAIlX,EAAOrC,QAAQ+kB,QAAS,IAAIulF,GAAa,CAACvxE,SAAUrlB,qBACtF,OAAOpP,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAAS8/F,EAAgBxhH,IAAI,SAAUhB,EAAOrC,QAAQkF,QAAQ7B,IAAI,QAAShB,EAAOrC,QAAQ+3B,QAAS,IACvI,QACI,OAAOzzB,IKoCfqxG,oBZ9BqE,WAA2G,IAA1GrxG,EAA0GX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAzEmX,GAAczY,EAA2DsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAChL,OAAQC,EAAOqD,MACX,KAAKurB,GACD,OAAI5uB,EAAOrC,QAAQ26B,QAIZr2B,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,QAAS,CACrCvnB,GAAI6E,EAAOrC,QAAQ26B,QAAQn9B,GAC3BkI,KAAMrD,EAAOrC,QAAQ26B,QAAQj1B,KAC7Bo1B,MAAOz4B,EAAOrC,QAAQ26B,QAAQG,MAC9B7vB,SAAU5I,EAAOrC,QAAQ26B,QAAQ1vB,eAAY7I,EAC7CkkF,SAAUjkF,EAAOrC,QAAQ26B,QAAQ2rD,eAAYlkF,EAC7C8jF,eAAgB7jF,EAAOrC,QAAQ26B,QAAQurD,eACvCC,sBAAuB9jF,EAAOrC,QAAQ26B,QAAQwrD,wBAVvC7hF,EAAMjB,IAAIhB,EAAOrC,QAAQ+kB,aAAS3iB,GAYjD,KAAK8uB,GACD,OAAG5sB,EAAME,MAAM,CAACnC,EAAOrC,QAAQ+kB,QAAS,SAAW1iB,EAAOrC,QAAQ66B,UACvDv2B,EAGJA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,SAAU1iB,EAAOrC,QAAQ86B,OACzE,KAAK3J,GACD,OAAG7sB,EAAME,MAAM,CAACnC,EAAOrC,QAAQ+kB,QAAS,SAAW1iB,EAAOrC,QAAQ66B,UACvDv2B,EAGJA,EAAMq+G,MAAM,CAACtgH,EAAOrC,QAAQ+kB,QAAS,YAAa1iB,EAAOrC,QAAQiL,UAC5E,QACI,OAAO3G,IYEf+lD,eDxCiE,WAAkG,IAAjG/lD,EAAiGX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAApEmX,GAAcG,EAAsDtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EACnK,OAAQ6Y,EAAMvV,MACV,KAAK8rB,GACL,KAAKG,GACD,OAAOjX,GAAiBpW,EAAO2W,EAAMjb,QAAQk5B,iBACjD,KAAKzH,GAEL,KAAKC,GACD,OAAOhX,GAAiBpW,EAAOoP,gBAAK,CAACuH,EAAMjb,QAAQw7B,kBACvD,QACI,OAAOl3B,KC+BhB,kBAAMG,kBAAO,CACZuU,YAAQ5W,EACRmhH,YAAQnhH,EACRioD,oBAAgBjoD,MGpDP0iH,GAA0B9pG,2BAA8D,CACjG63D,QjKiB0D,WAAqF,IAApFvuE,EAAoFX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA9DmX,GAAczY,EAAgDsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC/I,OAAQC,EAAOqD,MACX,KAAKqtE,GACD,OAAOzuE,EAAMjB,IAAI,YAAahB,EAAOrC,QAAQozE,WACjD,KAAKJ,GACD,OAAO1uE,EAAMjB,IAAI,QAAShB,EAAOrC,QAAQ0lB,OAC7C,KAAKutD,GACD,OAAO3uE,EAAMjB,IAAI,oBAAqBhB,EAAOrC,QAAQ0lB,OACzD,KAAKwtD,GACD,OAAO5uE,EAAMjB,IAAI,oBAAqBhB,EAAOrC,QAAQ2lB,QACzD,QACI,OAAOrhB,KiK3BhB,kBAAMG,kBAAO,CAACouE,aAASzwE,MCLb0Y,GAA8BpH,kBCG9BqxG,GAA4B/pG,2BAA8D,CACnGnW,SDCyD,WAAqF,IAApFP,EAAoFX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAA7DmX,GAAczY,EAA+CsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC9I,OAAQC,EAAOqD,MACX,KAAKnC,GACL,I1VhBuB,sC0ViBnB,IAAMyhH,EAAM1gH,EAAM2gH,UAAU,SAAAC,GAAI,OAAIA,EAAK/iH,MAAQE,EAAOrC,QAAQmC,MAWhE,OAPQmC,EAFJ0gH,GAAO,EACH3iH,EAAOrC,QAAQkC,QACPoC,EAAMmW,OAAOuqG,GAEb1gH,EAAMjB,IAAI2hH,EAAK3iH,EAAOrC,SAG1BsE,EAAMe,KAAKhD,EAAOrC,SAGlC,QACI,OAAOsE,KCjBhB,kBAAMG,kBAAO,CAACI,cAAUzC,MCPd0Y,GAAeo3B,EAAYpF,qBCelCq4E,GAAUnqG,2BAA2C,CACvD5C,ODdgD,WAA0E,IAAzE9T,EAAyEX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAApDmX,GACtE,QAD0HnX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,GAC3GsD,MACX,KAAKm9B,EAAa+H,eACd,OAAOsH,EAAYvhC,YAAYuhC,EAAYxF,mBAC/C,KAAK7J,EAAaiI,iBACd,OAAOoH,EAAYvhC,YAAYuhC,EAAYzF,kBAC/C,KAAK5J,EAAakI,oBACd,OAAOmH,EAAYvhC,YAAYuhC,EAAYvF,qBAC/C,KAAK9J,EAAagI,kBACd,OAAOqH,EAAYvhC,YAAYuhC,EAAYtF,sBAC/C,KAAK/J,EAAamI,uBACd,OAAOkH,EAAYvhC,YAAYuhC,EAAYrF,wBAC/C,QACI,OAAOvoC,KCEhB,kBAAMG,kBAAO,CAAC2T,YAAQhW,MCbZ0Y,GAAe3J,iBCCf2J,GAAe3J,iBAAkC9N,IAAI,cAAe,IAAI+hH,EAAUjzG,SAASizG,EAAUj5G,mBCHrG2O,GAAe3J,iBCOfk0G,GAAuBrqG,2BAA0D,CAC1FgF,MFDmD,WAA2E,IAA1E1b,EAA0EX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAvDmX,GAAczY,EAAyCsB,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC9H,OAAQC,EAAOqD,MACX,KAAKqC,GACD,OAAOzD,EAAMjB,IAAI,cAAehB,EAAOrC,QAAQ2I,MACnD,KAAK28G,EAAY1pG,KAAKmR,UACtB,KAAKu4F,EAAY1pG,KAAKiR,iBAClB,OAAOvoB,EAAMq+G,MAAM,CAAC,cAAe,SAAUr+G,EAAME,MAAM,CAAC,cAAe,UAAY,GACzF,KAAK8gH,EAAY1pG,KAAK0R,aAClB,OAAOhpB,EAAMq+G,MAAM,CAAC,cAAe,SAAUr+G,EAAME,MAAM,CAAC,cAAe,UAAY,GACzF,KAAK0gD,GAAWtpC,KAAKwiC,WACjB,OAAO95C,EAAMq+G,MAAM,CAAC,cAAe,aAAcr+G,EAAME,MAAM,CAAC,cAAe,cAAgB,GACjG,KAAK0gD,GAAWtpC,KAAK6iC,aACjB,OAAOn6C,EAAMq+G,MAAM,CAAC,cAAe,aAAcr+G,EAAME,MAAM,CAAC,cAAe,cAAgB,GACjG,KAAK6D,GACD,OAAO/D,EAAMq+G,MAAM,CAAC,eAAgBtgH,EAAOrC,QAAQ2I,MACvD,KAAKF,GACD,OAAOnE,EAAMq+G,MAAM,CAAC,cAAe,sBAAuBtgH,EAAOrC,QAAQiS,oBAC7E,QACI,OAAO3N,IEhBfoG,aDL+C,WAA8E,IAA7EpG,EAA6EX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAlDmX,GAAcG,EAAoCtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC7H,OAAQ6Y,EAAMvV,MACV,KAAKiN,EAAYxK,qBACb,OAAO7D,EAAM+lB,MAAMpP,EAAMjb,QAAQ0K,aAAa4uC,OAAQ,CAAEisE,iBAAiB,IAC7E,KAAK5yG,EAAYvK,sBACb,OAAO9D,EAAMjB,IAAI4X,EAAMjb,QAAQmD,IAAK8X,EAAMjb,QAAQoD,OACtD,QACI,OAAOkB,ICDfkhH,aHJ8C,WAA4E,IAA3ElhH,EAA2EX,UAAAC,OAAA,QAAAxB,IAAAuB,UAAA,GAAAA,UAAA,GAAjDmX,GAAcG,EAAmCtX,UAAAC,OAAA,EAAAD,UAAA,QAAAvB,EAC1H,OAAQ6Y,EAAMvV,MACV,KAAKiN,EAAYzK,sBACb,OAAOwS,GAAiBpW,EAAO2W,EAAMjb,QAAQwK,WACjD,QACI,OAAQlG,KGAjB,kBAAMG,kBAAO,CAACub,WAAO5d,EAAWsI,kBAActI,EAAWojH,kBAAcpjH,MCc7DqjH,GAAczqG,2BACvB,CACI0qG,mBAAoBX,GACpBY,gBAAiBvD,GACjBwD,eAAgBP,GAChBQ,eAAgBC,GAAejlE,sBAC/BklE,uBAAwBC,EAAuBjrG,8BAC/CkrG,iBAAkBnB,GAClBl8F,KAAMs9F,WACN/4E,KAAMu0E,GACNjyE,OAAQ02E,IAEZ,kBAAM1hH,kBAAO,CACTihH,wBAAoBtjH,EACpBujH,qBAAiBvjH,EACjBwjH,oBAAgBxjH,EAChByjH,oBAAgBzjH,EAChB2jH,4BAAwB3jH,EACxB6jH,sBAAkB7jH,EAClB+qC,UAAM/qC,EACNqtC,YAAQrtC,mBC/CNgkH,iBAKOC,IALjB,SAAUD,GAAc/jH,GAAxB,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU9L,aAAKkiB,GAAyBL,YAAaxiB,EAAOrC,QAAQ+kB,SADpE,OAEI,OAFJtS,EAAA3D,KAAA,EAEU0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kBAFzD,wBAAAgP,EAAAI,SAAAyzG,GAAA1jH,MAKO,SAAUyjH,KAAV,IAAAhkH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAKpB,EAAY2a,cAFnD,OAGC,OADMjrB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAGOkF,aAAKoyG,GAAe/jH,GAH3B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA0zG,GAAA3jH,uBCAGmsF,iBA+BOy3B,IA/BjB,SAAUz3B,GAAgCvyE,GAA1C,IAAAiqG,EAAAx3G,EAAAiqB,EAAA,OAAA3mB,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAC4C,OAD5C2D,EAAA3D,KAAA,EACkD9L,aAAKkiB,GAAyBR,SAAUlI,EAAMxc,QAAQ+kB,SADxG,UACU0hG,EADVh0G,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,eAAA2D,EAAAwB,OAAA,qBAqBQjH,GAdEiC,EAASG,GACXq3G,EAAUvtF,gBACVprB,GAAa,CAAC+B,KAAW,uCACzBzB,GAAY,SAACs4G,GACT,OAAOt8D,GAAmC,CACtCrlC,QAASvI,EAAMxc,QAAQ+kB,QACvB6Q,SAAU8wF,EAAmB9wF,SAC7BC,SAAU6wF,EAAmB7wF,SAC7BE,aAAc2wF,EAAmB3wF,aACjCC,eAAgB0wF,EAAmB1wF,qBAhBnD,CAAAvjB,EAAA3D,KAAA,QAsBQ,OAtBR2D,EAAA3D,KAAA,EAsBc0E,aAAIC,EAAarN,QAAQlI,MAAM,gBAAiB,oCAtB9D,WAyBQiP,GAAU8B,GAzBlB,CAAAwD,EAAA3D,KAAA,SA2BQ,OADMoqB,EAAkBxlB,gBAAKzE,EAAO7L,OA1B5CqP,EAAA3D,KAAA,GA2Bc0E,aAAIb,EAAOtM,MAAMi1B,4BAA4BpC,IA3B3D,yBAAAzmB,EAAAI,SAAA8zG,GAAA/jH,MA+BO,SAAU4jH,KAAV,IAAAhqG,EAAA,OAAAjK,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAEsB,OAFtByE,EAAAzE,KAAA,EAE4BiF,aAAK,CAC5BpB,EAAOiJ,KAAK2W,+BAHjB,OAMC,OAJM/V,EAFPjJ,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAK+6E,GAAiCvyE,GAN7C,OAAAjJ,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA+zG,GAAAhkH,uBChCGikH,iBAcAC,iBA2BO52B,iBAsBA62B,IA/DjB,SAAUF,KAAV,IAAAn8G,EAAA4uC,EAAA,OAAA/mC,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACkD,OADlD2D,EAAA3D,KAAA,EACwD9L,aAAKkiB,GAAyBrb,iBADtF,OAQI,OAPMa,EADV+H,EAAAG,KAEU0mC,EAA4C,GAElD5uC,EAAavF,QAAQ,SAAA8f,GACjBq0B,EAAOr0B,EAAQ9hB,KAAO8hB,EAAQ7hB,QALtCqP,EAAA3D,KAAA,EAQU0E,aAAIyI,EAAW5V,MAAMoE,mBAAmB,IAAIklF,GAAa,CAC3DvmF,OAAQ8b,GAAyB/b,UAAUC,OAC3CkwC,aAVR,wBAAA7mC,EAAAI,SAAAm0G,GAAApkH,MAcA,SAAUkkH,KAAV,OAAAv0G,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACI,OADJyE,EAAAzE,KAAA,EACU0E,aAAIyI,EAAW7V,QAAQsC,OAAO,CAChCvG,IAAK+iB,GAAyB/b,UAAUC,OACxCK,KAAM,aACNF,MAAO,GACPmI,UAAW,GACXC,WAAY,GACZlF,MAAO,CACHyE,QAAS,CACLlB,UAAW,CACPtK,KAAM,eAIlBmM,QAAS,CACLzF,YAAa,QAEjB2F,MAAO,IACPC,UAAW,EACXjI,YAAa,aACbP,UAAW,GACXQ,YAAa,GACbC,SAAU,GACViI,UAAU,KAvBlB,wBAAAqB,EAAAV,SAAAo0G,GAAArkH,MA2BO,SAAUstF,KAAV,IAAAztF,EAAA,OAAA8P,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OACH,OADGgF,EAAAhF,KAAA,EACG0E,aAAIb,EAAaipB,wBADpB,OAG6B,OAH7B9nB,EAAAhF,KAAA,EAGmC9L,aAAKkiB,GAAyBV,WAHjE,OAIH,OADM/hB,EAHHqR,EAAAlB,KAAAkB,EAAAhF,KAAA,EAIG0E,aAAI0iB,GAAazzB,EAAK6O,IAAI,SAAAm1G,GAAS,OAAI,IAAIzwE,EAAW1Y,MAAM,CAC9Dn7B,IAAKskH,EAAU1hG,QACftb,KAAMg9G,EAAUh9G,KAChByyB,aAAcuqF,EAAUvqF,aACxBrJ,QAAS,IAAIkJ,GAAaF,IAC1BgB,QAAQ,EACRE,WAAYrpB,kBACZspB,cAAetpB,kBACfupB,SAAS,EACTC,MAAOhY,GAAyB/b,UAAUC,OAC1C+zB,QAAS,KACThmB,aAAc,KACdimB,WAAW,QAhBZ,OAmBH,OAnBGtpB,EAAAhF,KAAA,EAmBG0E,aAAIomB,MAnBP,wBAAA9lB,EAAAjB,SAAAq0G,GAAAtkH,MAsBA,SAAUmkH,KAAV,OAAAx0G,GAAAhN,EAAAiN,KAAA,SAAAuO,GAAA,cAAAA,EAAArO,KAAAqO,EAAAjS,MAAA,OAEC,OAFDiS,EAAAjS,KAAA,EAEOiF,aAAKpB,EAAYof,mBAFxB,OAGC,OAHDhR,EAAAjS,KAAA,EAGOkF,aAAKk8E,IAHZ,OAIC,OAJDnvE,EAAAjS,KAAA,EAIOkF,aAAK8yG,IAJZ,OAKC,OALD/lG,EAAAjS,KAAA,EAKOkF,aAAK6yG,IALZ,OAAA9lG,EAAAjS,KAAA,iCAAAiS,EAAAlO,SAAAs0G,GAAAvkH,uBC9BUwkH,IA7BX93B,GAAgB/8E,GAAAhN,EAAAyW,KAAG,SAAnBszE,EAA8BjtF,GAAX,IAAA+6B,EAAAqpF,EAAApwF,EAAA,OAAA9jB,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAEO,OAFP2D,EAAA3D,KAAA,EAEa0M,aAAOg5B,MAFpB,YAAA/hC,EAAAG,KAGVgjC,KAAO,GAHG,CAAAnjC,EAAA3D,KAAA,QAIjB,OAJiB2D,EAAA3D,KAAA,EAIX9L,aAAKktF,IAJM,OAOH,OAPGz9E,EAAA3D,KAAA,EAOG0M,aAAOw3B,GAAsB3wC,EAAOrC,QAAQ+kB,UAP/C,YAOfqY,EAPe3qB,EAAAG,QASLwqB,EAAUA,UATL,CAAA3qB,EAAA3D,KAAA,SAUjB,OAViB2D,EAAA3D,KAAA,GAUX0E,aAAIb,EAAe2jB,uBAAuBj0B,EAAOrC,QAAQ+kB,SAAS,IAVvD,eAAAtS,EAAAwB,OAAA,kBAcmB,OAdnBxB,EAAA3D,KAAA,GAcyB9L,aAAKkiB,GAAyBR,SAAUriB,EAAOrC,QAAQ+kB,SAdhF,WAcf0hG,EAdeh0G,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,gBAAA2D,EAAAwB,OAAA,kBAyBrB,OANMoiB,EAAW,IAAI6T,EAAcA,cAAc,CAC7CnlB,QAAS0hG,EAAU1hG,QACnBkX,IAAKwqF,EAAUxqF,IACfrJ,aAAc,IAAI48D,EAAgBzzD,aAAaF,MAtB9BppB,EAAA3D,KAAA,GAyBf0E,aAAI4iB,GAAmBC,IAzBR,QA0BrB,OA1BqB5jB,EAAA3D,KAAA,GA0Bf0E,aAAIb,EAAe2jB,uBAAuBj0B,EAAOrC,QAAQ+kB,SAAS,IA1BnD,yBAAAtS,EAAAI,SAAnBy8E,EAAmB1sF,QA6BlB,SAAUwkH,KAAV,IAAA/kH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAKpB,EAAYqf,kBAHnD,OAIC,OADM3vB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKs7E,GAAkBjtF,GAJ9B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAw0G,GAAAzkH,uBCpCG0kH,iBAaOC,IAbjB,SAAUD,GAAsBjlH,GAAhC,IAAA2iB,EAAA,OAAAzS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACwC,OADxC2D,EAAA3D,KAAA,EAC8C9L,aAAKkiB,GAAyBR,SAAUriB,EAAOrC,QAAQglB,MAAM7iB,KAD3G,YACU6iB,EADVvS,EAAAG,MAAA,CAAAH,EAAA3D,KAAA,SAGQ,OAHR2D,EAAA3D,KAAA,EAGc9L,aAAKkiB,GAAyBP,YAA1BjiB,OAAA2N,GAAA,EAAA3N,CAAA,GACHsiB,EADG,CAENiX,IAAK55B,EAAOrC,QAAQglB,MAAMiX,OALtC,OAQQ,OARRxpB,EAAA3D,KAAA,EAQc0E,aAAIb,EAAewjB,kBAAkB,CAAC9zB,EAAOrC,QAAQglB,SARnE,OASQ,OATRvS,EAAA3D,KAAA,GASc0E,aAAIg0C,EAAOphD,QAAQ3C,KAAK,kBAAmBpB,EAAOrC,QAAQglB,MAAMvb,OAT9E,yBAAAgJ,EAAAI,SAAA20G,GAAA5kH,MAaO,SAAU2kH,KAAV,IAAAllH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAACpB,EAAYma,wBAFpD,OAIC,OAFMzqB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKszG,GAAuBjlH,GAJnC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA40G,GAAA7kH,uBCJG8kH,iBA8COC,IA9CjB,SAAUD,GAAiBrlH,GAA3B,IAAA0iB,EAAA5b,EAAAR,EAAAqc,EAAA4uD,EAAAod,EAAA/6B,EAAAg7B,EAAA,OAAA1+E,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,UACUiW,EAAU1iB,EAAOrC,QAAQ+kB,SAAWliB,QAEtCR,EAAOrC,QAAQo4B,gBAHvB,CAAA3lB,EAAA3D,KAAA,SAIQ,OAJR2D,EAAA3D,KAAA,EAIc9L,aAAKkiB,GAAyBN,SAAU,CAC1CG,UACAtb,KAAMpH,EAAOrC,QAAQyyB,UACrByJ,cAAe,IAAI18B,MAAQ28B,cAC3BF,IAAK55B,EAAOrC,QAAQm4B,SACpBe,gBAAiB,KAT7B,OAYQ,OAZRzmB,EAAA3D,KAAA,EAYc0E,aAAIC,EAAarN,QAAQ3C,KAAK,gBAAiB,kBAZ7D,OAaQ,OAbRgP,EAAA3D,KAAA,EAackF,aAAKk8E,IAbnB,OAAAz9E,EAAA3D,KAAA,iBAgB+B,OADjB3F,EAAUkX,EAAavD,qBAfrCrK,EAAA3D,KAAA,GAgBqC0M,aAAOrS,GAhB5C,QAkCQ,OAlBMR,EAhBd8J,EAAAG,KAkBcoS,EAAQ,IAAIsY,GAAM,CACpBn7B,IAAK4iB,EACLtb,KAAMpH,EAAOrC,QAAQyyB,UACrBwJ,IAAK55B,EAAOrC,QAAQm4B,SACpBtF,QAAS,IAAIkJ,GAAa,CACtB3yB,OAAQT,EAAKxG,IACb0wB,QAAS,IAEbgK,QAAQ,EACRE,WAAYrpB,kBACZspB,cAAetpB,kBACfwpB,MAAO,KACPC,QAASx0B,EAAKxG,IACdgV,aAAc,KACdimB,WAAW,IAhCvB3qB,EAAA3D,KAAA,GAkCc0E,aAAIb,EAAeujB,aAAa,CAAClR,KAlC/C,QA0CQ,OA1CR4uD,EAoCkC5d,KApClCg7B,EAAAtuF,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,GAAAod,EAAA,GAoCsB/6B,EApCtB+6B,EAAA,GAsCcC,EAAoB7yD,GAAepZ,EAAMiX,UAAO75B,GAEtD6zD,EAASg7B,GAxCjBx+E,EAAA3D,KAAA,GA0Cc0E,aAAIb,EAAeqlB,UAAUhT,EAAOisE,IA1ClD,yBAAAx+E,EAAAI,SAAA+0G,GAAAhlH,MA8CO,SAAU+kH,KAAV,IAAAtlH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAK,CAACpB,EAAYka,mBAFpD,OAIC,OAFMxqB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAK0zG,GAAkBrlH,GAJ9B,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAg1G,GAAAjlH,uBCtDGwuF,iBAuBOn4D,IAvBjB,SAAUm4D,GAA4B91E,GAAtC,IAAA0J,EAAA8uC,EAAA,OAAAvhD,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACwC,OADxC2D,EAAA3D,KAAA,EAC8C9L,aAAKkiB,GAAyBR,SAAUpJ,EAAQtb,QAAQ+kB,SADtG,UACUC,EADVvS,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,eAAA2D,EAAAwB,OAAA,iBAaI,OAPM6/C,EAAYx4C,EAAQtb,QAAQk5B,gBAAgB5nB,IAAI,SAAAwhD,GAAG,MAAK,CAC1Dl9B,SAAUk9B,EAAIl9B,SACdC,SAAUi9B,EAAIj9B,SACdE,aAAc+8B,EAAI/8B,aAClBC,eAAgB88B,EAAI98B,gBAAkB,QAV9CvjB,EAAA3D,KAAA,EAaU9L,aAAKkiB,GAAyBP,YAA1BjiB,OAAA2N,GAAA,EAAA3N,CAAA,GACHsiB,EADG,CAENkU,gBAAiB46B,EAAUl5C,aAfnC,OAkBI,OAlBJnI,EAAA3D,KAAA,GAkBU0E,aAAIC,EAAarN,QAAQ3C,KAAK,0BAA2B,uCAlBnE,QAmBI,OAnBJgP,EAAA3D,KAAA,GAmBU0E,aAAIb,EAAOtM,MAAMq1B,wBAAwBhoB,gBAAK4H,EAAQtb,QAAQk5B,mBAnBxE,QAoBI5d,EAAQtb,QAAQm5B,aApBpB,yBAAA1mB,EAAAI,SAAAi1G,GAAAllH,MAuBO,SAAUq2B,KAAV,IAAA3d,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE0B,OAF1ByE,EAAAzE,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKqT,0BAHjB,OAMC,OAJM3T,EAFP/H,EAAAX,KAAAW,EAAAzE,KAAA,EAMOkF,aAAKo9E,GAA6B91E,GANzC,OAAA/H,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAk1G,GAAAnlH,uBCzBGolH,iBAYOC,IAZjB,SAAUD,GAAmB3lH,GAA7B,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU9L,aAAKkiB,GAAyBN,SAAU,CAC1CG,QAAS1iB,EAAOrC,QAAQglB,MAAM7iB,IAC9BsH,KAAMpH,EAAOrC,QAAQglB,MAAMvb,KAC3ByyB,cAAe,IAAI18B,MAAQ28B,cAC3BF,IAAK,GACL/C,gBAAiB,KANzB,OASI,OATJzmB,EAAA3D,KAAA,EASU9L,aAAKX,EAAOrC,QAAQ+rB,QAAQ1mB,KAAM2mB,GAAsC3pB,EAAOrC,QAAQglB,MAAM7iB,MATvG,wBAAAsQ,EAAAI,SAAAq1G,GAAAtlH,MAYO,SAAUqlH,KAAV,IAAA5lH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAG4B,OAH5ByE,EAAAzE,KAAA,EAGkCiF,aAAKpB,EAAYoa,WAHnD,OAIC,OADM1qB,EAHPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKg0G,GAAoB3lH,GAJhC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAs1G,GAAAvlH,uBCRG+vF,iBAMOy1B,IANjB,SAAUz1B,GAAYtwF,GAAtB,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAD1D,OAEI,OAFJtS,EAAA3D,KAAA,EAEU0E,aAAI+jB,GAA0Bl1B,EAAOrC,QAAQ+kB,UAFvD,OAGI,OAHJtS,EAAA3D,KAAA,EAGU0E,aAAIgkB,GAAoBn1B,EAAOrC,QAAQ+kB,SAAS,IAH1D,wBAAAtS,EAAAI,SAAAw1G,GAAAzlH,MAMO,SAAUwlH,KAAV,IAAA/lH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAKwa,IAFvC,OAGC,OADMlsB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAGOkF,aAAK2+E,GAAatwF,GAHzB,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAy1G,GAAA1lH,uBCTG0xF,iBAYOi0B,IAZjB,SAAUj0B,GAAYjyF,GAAtB,IAAAuxE,EAAAod,EAAA/4D,EAAAjT,EAAA,OAAAzS,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAGwC,OAHxC8kE,EACoB5d,KADpBg7B,EAAAtuF,OAAAmL,GAAA,EAAAnL,CAAAkxE,EAAA,GACW37C,EADX+4D,EAAA,GAAAv+E,EAAA3D,KAAA,EAG8C9L,aAAKkiB,GAAyBR,SAAUriB,EAAOrC,QAAQglB,MAAM7iB,KAH3G,YAGU6iB,EAHVvS,EAAAG,OAIkBvQ,EAAOrC,QAAQglB,MAAMoY,UAJvC,CAAA3qB,EAAA3D,KAAA,QAKQ,OALR2D,EAAA3D,KAAA,EAKc9L,aAAKkiB,GAAyBP,YAA1BjiB,OAAA2N,GAAA,EAAA3N,CAAA,GACHsiB,EADG,CAENiX,IAAKhE,EAAM89B,uBAPvB,wBAAAtjD,EAAAI,SAAA21G,GAAA5lH,MAYO,SAAU2lH,KAAV,IAAAlmH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAKpB,EAAYga,YAFnD,OAGC,OADMtqB,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAGOkF,aAAKsgF,GAAajyF,GAHzB,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAA41G,GAAA7lH,uBCRGszF,iBAyCAzmC,iBA6COi5D,IAtFjB,SAAUxyB,GAAwB56E,GAAlC,IAAAkgB,EAAA46D,EAAArxE,EAAA6Q,EAAAC,EAAA7Q,EAAA2jG,EAAA,OAAAp2G,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACyB,OADzB2D,EAAA3D,KAAA,EAC+B0M,aAAOuvC,GAA2BZ,GAAsB7uC,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ41B,YADhI,OAawC,OAZhC4F,EADR/oB,EAAAG,KAAAwjF,EAG0C96E,EAAQtb,QAAvC+kB,EAHXqxE,EAGWrxE,QAAS6Q,EAHpBwgE,EAGoBxgE,SAAUC,EAH9BugE,EAG8BvgE,SAErB2F,IACDA,EAAiB8uB,GACbvlC,EACA6Q,EACAC,IATZpjB,EAAA3D,KAAA,EAa8C9L,aAAKkiB,GAAyBR,SAAUpJ,EAAQtb,QAAQ+kB,SAbtG,UAaUC,EAbVvS,EAAAG,KAAA,CAAAH,EAAA3D,KAAA,gBAAA2D,EAAAwB,OAAA,kBA0BI,OARM00G,EAAwB3jG,EAAMkU,gBAAgBwR,KAChD,SAAAg8E,GAAkB,OAAIA,EAAmB9wF,WAAa4F,EAAe5F,YACpE,CACDA,WACAG,aAAcyF,EAAezF,aAC7BC,eAAgBwF,EAAexF,gBAAkB,MAvBzDvjB,EAAA3D,KAAA,GA0BU9L,aAAKkiB,GAAyBP,YAA1BjiB,OAAA2N,GAAA,EAAA3N,CAAA,GACHsiB,EADG,CAENkU,gBAAe,GAAAzxB,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CACRsiB,EAAMkU,gBAAgBh0B,OAAO,SAAAwhH,GAAkB,OAAIA,EAAmB9wF,WAAa4F,EAAe5F,YAD1F,CAAAlzB,OAAA2N,GAAA,EAAA3N,CAAA,GAGJimH,EAHI,CAIP9yF,kBAhChB,QAqCI,OArCJpjB,EAAA3D,KAAA,GAqCU0E,aAAIC,EAAarN,QAAQ3C,KAAK,sBAAuB,uBAAyBmyB,EAAW,SArCnG,QAsCI,OAtCJnjB,EAAA3D,KAAA,GAsCU0E,aAAIb,EAAOtM,MAAMk1B,kBAAkBC,EAAe66D,YAAYxgE,KAtCxE,yBAAApjB,EAAAI,SAAA+1G,GAAAhmH,MAyCA,SAAU6sD,GAAiCn0C,GAA3C,IAAAkgB,EAAAxW,EAAA2jG,EAAA,OAAAp2G,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAAwF,OAAxFyE,EAAAzE,KAAA,EAA8F,KAA9F,OACyB,OADzByE,EAAAzE,KAAA,EAC+B0M,aAAOuvC,GAA2BZ,GAAsB7uC,EAAQtb,QAAQ+kB,QAASzJ,EAAQtb,QAAQ41B,YADhI,OAWwC,OAVhC4F,EADRjoB,EAAAX,QAIQ4oB,EAAiB8uB,GACbhvC,EAAQtb,QAAQ+kB,QAChBzJ,EAAQtb,QAAQ41B,SAChB,KAPZriB,EAAAzE,KAAA,EAW8C9L,aAAKkiB,GAAyBR,SAAUpJ,EAAQtb,QAAQ+kB,SAXtG,UAWUC,EAXVzR,EAAAX,KAAA,CAAAW,EAAAzE,KAAA,gBAAAyE,EAAAU,OAAA,kBAuBI,OAPM00G,EAAwB3jG,EAAMkU,gBAAgBwR,KAChD,SAAAg8E,GAAkB,OAAIA,EAAmB9wF,WAAa4F,EAAe5F,YACpE,CACDA,SAAU4F,EAAe5F,SACzBC,SAAU2F,EAAe3F,UApBjCtiB,EAAAzE,KAAA,GAuBU9L,aAAKkiB,GAAyBP,YAA1BjiB,OAAA2N,GAAA,EAAA3N,CAAA,GACHsiB,EADG,CAENkU,gBAAe,GAAAzxB,OAAA/E,OAAAyZ,GAAA,EAAAzZ,CACRsiB,EAAMkU,gBAAgBh0B,OAAO,SAAAwhH,GAAkB,OAAIA,EAAmB9wF,WAAa4F,EAAe5F,YAD1F,CAAAlzB,OAAA2N,GAAA,EAAA3N,CAAA,GAGJimH,EAHI,CAIP5yF,aAAcza,EAAQtb,QAAQ+1B,aAC9BC,eAAgB1a,EAAQtb,QAAQg2B,gBAAkB,YA9BlE,QAmCI,OAnCJziB,EAAAzE,KAAA,GAmCU0E,aAAIC,EAAarN,QAAQ3C,KAAK,iCAAkC,8BAAgC+3B,EAAe5F,SAAW,aAnCpI,QA0CI,OANA4F,EAAiBA,EAAe+zB,gBAAgBj0C,EAAQtb,QAAQ+1B,cAE5Dza,EAAQtb,QAAQg2B,iBAChBwF,EAAiBA,EAAe44B,kBAAkB94C,EAAQtb,QAAQg2B,iBAvC1EziB,EAAAzE,KAAA,GA0CU0E,aAAIb,EAAOtM,MAAMo1B,4BAA4BD,IA1CvD,yBAAAjoB,EAAAV,SAAAg2G,GAAAjmH,MA6CO,SAAU8lH,KAAV,IAAAptG,EAAA,OAAA/I,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAE0B,OAF1BgF,EAAAhF,KAAA,EAEgCiF,aAAK,CAChCpB,EAAOiJ,KAAKmT,oBACZpc,EAAOiJ,KAAKoT,gCAJjB,WAEO1T,EAFPxH,EAAAlB,MAOalN,OAASiN,EAAOiJ,KAAKmT,oBAPlC,CAAAjb,EAAAhF,KAAA,QAQK,OARLgF,EAAAhF,KAAA,EAQWkF,aAAKkiF,GAAyB56E,GARzC,OAAAxH,EAAAhF,KAAA,gBAUK,OAVLgF,EAAAhF,KAAA,GAUWkF,aAAKy7C,GAAkCn0C,GAVlD,QAAAxH,EAAAhF,KAAA,iCAAAgF,EAAAjB,SAAAi2G,GAAAlmH,uBC5FGqe,iBAKO8nG,IALjB,SAAU9nG,GAAoB5e,GAA9B,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OACI,OADJ2D,EAAA3D,KAAA,EACU9L,aAAKkiB,GAAyBJ,eAAgBziB,EAAOrC,SAD/D,OAEI,OAFJyS,EAAA3D,KAAA,EAEU0E,aAAIb,EAAahI,oBAAoBtI,EAAOrC,QAAQmD,IAAKd,EAAOrC,QAAQoD,QAFlF,wBAAAqP,EAAAI,SAAAm2G,GAAApmH,MAKO,SAAUmmH,KAAV,IAAA1mH,EAAA,OAAAkQ,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OAE4B,OAF5ByE,EAAAzE,KAAA,EAEkCiF,aAAKpB,EAAYpK,qBAFnD,OAIC,OAFMlG,EAFPkR,EAAAX,KAAAW,EAAAzE,KAAA,EAIOkF,aAAKiN,GAAqB5e,GAJjC,OAAAkR,EAAAzE,KAAA,gCAAAyE,EAAAV,SAAAo2G,GAAArmH,MCEP,IAgBesmH,GAhBQ,CACnB7C,6BACAG,2CACAO,iCACAK,gCACAO,gCACAJ,qCACAU,kCACAG,kCACAG,2BACAG,sCACAK,+BACA7zB,wBACAj8D,uCCmEqBkwF,IAFnBC,GA7DyB1mH,OAAO42C,OAAO4vE,IA6DrB53G,IA7EA,SAAC+3G,GACrB,OAAA92G,GAAAhN,EAAAyW,KAAO,SAAA++C,IAAA,OAAAxoD,GAAAhN,EAAAiN,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAzE,MAAA,OACH,OADGyE,EAAAzE,KAAA,EACGw6G,aAAK/2G,GAAAhN,EAAAyW,KAAC,SAAAyG,IAAA,OAAAlQ,GAAAhN,EAAAiN,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA3D,MAAA,OAGA,OAHA2D,EAAAC,KAAA,EAAAD,EAAA3D,KAAA,EAGM9L,aAAKqmH,GAHX,OAIAjrH,QAAQF,MAAM,qHAAsHmrH,GAJpI52G,EAAA3D,KAAA,gBAAA2D,EAAAC,KAAA,EAAAD,EAAAkB,GAAAlB,EAAA,SAMArU,QAAQF,MAAM,yCAAduU,EAAAkB,IANA,QAQJ,OARIlB,EAAA3D,KAAA,GAQE4/B,aAAM,KARR,QAAAj8B,EAAA3D,KAAA,iCAAA2D,EAAAI,SAAA4P,EAAA7f,KAAA,YADT,wBAAA2Q,EAAAV,SAAAkoD,EAAAn4D,UA8EI,SAAUumH,KAAV,OAAA52G,GAAAhN,EAAAiN,KAAA,SAAAsB,GAAA,cAAAA,EAAApB,KAAAoB,EAAAhF,MAAA,OAEX,OADA1Q,QAAQC,IAAI,qBADDyV,EAAAhF,KAAA,EAELy6G,aAAIH,GAAU93G,IAAI,SAAC+3G,GAAD,OAAermH,aAAKqmH,MAFjC,wBAAAv1G,EAAAjB,SAAA22G,GAAA5mH,MChFf,IAuBe6mH,GAvBQ,SACnB19F,EACAjR,GAGA,IAAM4uG,EAAmBC,+BAAoB,IAEvCC,EAAiBC,eAKjBzI,EAAQ0I,uBACVrE,GACA3qG,EACA4uG,EAAiBK,2BAAgBH,KAKrC,OADAA,EAAeI,IAAIb,IACZ/H,cC9BEr1F,GAAUk+F,sBCFVzpH,EAAQ,MCFrB/C,EAAAkqE,EAAAuiD,EAAA,2BAAAlnB,KAkBA,IAEM31D,GAAuB,IAAK88E,KAAiB,CAC/C7+G,IAAK8+G,wBACLC,MAAOD,cACPnvE,SAAUmvE,cAMJtvG,GAAiCrW,kBAAO,IAExC28G,GAAQqI,GAAe19F,GAASjR,IACtCsmG,GAAMn7G,SAAS4tB,MAEfy2F,UAAgBnpH,GAAA,cAACopH,GAAD,CAAenJ,MAAOA,GAAOr1F,QAASA,KAAYpsB,SAASqsD,eAAe,SAoCvF,IAAMg3C,GAAS,kBAAM31D,GAAG21D,0OCtE/B1lG,EAAAC,QAAA,CAAkBitH,GAAA,CAAMC,YAAA,CAAeC,IAAA,CAAO9oH,MAAA,uCAAA+oH,QAAA,uDAAAC,QAAA,CAA2Hj9E,QAAA,UAAmB/kB,KAAA,CAAS04B,OAAA,aAAAupE,KAAA,YAAA/sC,OAAA,YAAA7tC,OAAA,YAAA66E,QAAA,KAAAxgH,OAAA,aAAAmQ,OAAA,YAAA+pD,OAAA,YAAA9gB,OAAA,gBAAAI,OAAA,aAAAinE,IAAA,KAAAC,GAAA,OAAAC,KAAA,YAAAC,iBAAA,uBAA2RC,SAAA,mBAAAjnF,QAAA,gBAAA7rB,KAAA,YAAA+yG,UAAA,gBAAAC,YAAA,CAAoHpwG,MAAA,QAAAK,QAAA,UAAAmvC,UAAA,YAAA9qD,SAAA,cAAAiR,KAAA,OAAA+5C,QAAA,WAAAE,GAAA,WAAAD,eAAA,kBAAAnsB,eAAA,kBAAAC,QAAA,UAAAkD,KAAA,YAAA8oB,OAAA,SAAAI,SAAA,OAAA6F,SAAA,OAAA1lC,KAAA,OAAA9D,MAAA,UAA0UmkG,KAAA,CAASC,KAAA,CAAQC,WAAA,gBAAAC,OAAA,aAAAC,gBAAA,aAAAC,cAAA,mCAAAC,kBAAA,cAAAC,gBAAA,4IAAoUnH,SAAA,CAAaoH,WAAA,eAAAC,UAAA,cAAAC,cAAA,sBAAAC,kBAAA,yHAAAC,aAAA,0FAAAC,YAAA,0IAA6dt5C,QAAA,CAAYu5C,gBAAA,CAAmBC,mBAAA,qBAAAC,kBAAA,gDAAAC,oBAAA,yEAAAC,6BAAA,4FAA6QC,6BAAA,kEAAkJC,uBAAA,iCAAAC,oBAAA,8CAAuGC,4BAAA,8CAA0FC,SAAA,CAAaC,SAAA,WAAAV,gBAAA,WAAAW,aAAA,eAAAC,aAAA,eAAAC,mBAAA,oGAAAC,oBAAA,mCAAAC,4BAAA,wHAAuaC,oBAAA,CAAwBC,YAAA,qBAAAC,eAAA,iBAAAhiG,KAAA,uEAA+ItG,MAAA,CAAU1B,IAAA,cAAAiqG,OAAA,eAAAC,sBAAA,+JAAAC,kBAAA,yBAAAC,kBAAA,wBAAAC,YAAA,sBAAA/tC,KAAA,SAAAguC,MAAA,cAAAC,UAAA,wEAAAC,YAAA,gEAAAC,YAAA,aAAAC,YAAA,IAAAC,cAAA,kIAAArlG,KAAA,CAAstBwzE,WAAA,aAAA8xB,aAAA,aAAAC,UAAA,QAAAC,oBAAA,sBAAAC,SAAA,OAAA9kH,MAAA,QAAAo3F,UAAA,YAA+K2tB,YAAA,gBAAAC,WAAA,0BAAAC,0BAAA,4BAAAC,yBAAA,oEAAuLlwD,OAAA,CAAkD38D,MAAA,gBAAAm1D,QAAA,gDAAiFyN,OAAA,CAAWkqD,aAAA,oBAAAC,mBAAA,wFAAAC,oBAAA,wBAAAC,mBAAA,yCAAAC,sBAAA,6BAAAC,qBAAA,wCAAAC,aAAA,6BAAAC,oBAAA,yEAA2ez6F,KAAA,CAAS06F,SAAA,kBAAAC,aAAA,qBAAAC,aAAA,sBAA+FC,SAAA,CAAaH,SAAA,kBAA4B1rH,OAAA,CAAW8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,4BAAAiC,IAAA,yCAAkF0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,uBAAAiC,IAAA,oCAAwE2rH,iBAAA,CAAqBN,SAAA,iBAAAO,aAAA,gDAAAC,gBAAA,2BAAAC,YAAA,0GAAAC,8BAAA,oBAAAC,6BAAA,sDAA+Xxe,OAAA,CAAWye,wBAAA,mCAAAC,yBAAA,8OAAAC,2BAAA,+BAAAC,oBAAA,YAAAC,UAAA,sBAAAC,sBAAA,iDAAAC,eAAA,gDAAAC,aAAA,8GAAAC,aAAA,mBAAAv0E,WAAA,uBAAAw0E,WAAA,2BAAAC,UAAA,2BAAAC,iBAAA,oEAA84BC,2BAAA,8BAAAC,+BAAA,qDAAAC,0BAAA,8SAAAC,4BAAA,6BAAAC,4BAAA,cAAAjxD,MAAA,CAAskBkxD,aAAA,mBAAAxF,KAAA,mJAAwLyF,aAAA,CAAiBC,mBAAA,sBAAAC,YAAA,0NAAAC,eAAA,aAAAC,WAAA,yBAAA3nH,KAAA,wBAAA4nH,aAAA,mIAAAC,gBAAA,kIAAAC,SAAA,qGAAAjD,YAAA,gBAAAC,WAAA,0BAAAC,0BAAA,uCAAAC,yBAAA,+EAAw7B+C,2BAAA,YAAAC,gBAAA,mBAAAC,iBAAA,qBAAAC,kBAAA,oCAAAC,iBAAA,qBAAAC,iBAAA,+BAAAC,kBAAA,wBAAArxE,OAAA,aAAAxnC,OAAA,WAAAzV,OAAA,CAAwZ8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,4BAAAiC,IAAA,uDAAgG0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,uBAAAiC,IAAA,qCAAyE06D,OAAA,CAAW38D,MAAA,2BAAAm1D,QAAA,mDAA+F1X,KAAA,CAAS0yE,aAAA,WAAAzuG,IAAA,aAAAq9E,UAAA,WAAAqxB,iBAAA,mBAAAC,SAAA,WAAA3D,YAAA,gBAAAC,WAAA,0BAAAC,0BAAA,2BAAAC,yBAAA,mEAAqT+C,2BAAA,YAAAU,2BAAA,4BAAAC,0BAAA,qEAAuNC,4BAAA,YAAA7zD,OAAA,CAAyE38D,MAAA,mBAAAm1D,QAAA,0CAA8Es7D,aAAA,8CAAgDC,aAAA,2BAAAC,OAAA,wBAAAC,aAAA,yBAAAC,gCAAA,4BAAAC,+BAAA,oEAAwPC,0BAAA,kBAAAC,yBAAA,0DAA+IlB,iBAAA,qBAAAC,kBAAA,oCAAAkB,0BAAA,2FAAApB,gBAAA,mBAAAjuH,OAAA,CAAiS8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,4BAAAiC,IAAA,uDAAgG0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,uBAAAiC,IAAA,qCAAyEivH,SAAA,uJAAApC,2BAAA,8BAAAE,0BAAA,sPAAAC,4BAAA,6BAAAC,4BAAA,eAAilBnoH,KAAA,CAASoqH,iBAAA,gBAAiCC,gBAAA,4BAAAC,cAAA,0FAAAC,mBAAA,2EAAAC,oBAAA,gFAAAC,mBAAA,sNAAAxqG,KAAA,CAAokByqG,OAAA,CAAUllF,aAAA,cAAA5kC,MAAA,SAAA+pH,QAAA,QAAAvxH,SAAA,WAAAoqB,UAAA,WAAAC,UAAA,0BAAkJmnG,OAAA,CAAWplF,aAAA,oBAAA5kC,MAAA,eAAA+pH,QAAA,cAAAvxH,SAAA,+BAA2HyxH,cAAA,CAAkBC,aAAA,oBAAA9E,mBAAA,oDAAAC,oBAAA,wBAAAC,mBAAA,+CAAAC,sBAAA,6BAAAC,qBAAA,+CAA+U2E,gBAAA,CAAoBC,6BAAA,yCAAAC,4BAAA,uFAAgL7nG,QAAA,CAAYwsE,MAAA,QAAAG,UAAA,UAAAC,WAAA,cAAAC,aAAA,cAAAC,YAAA,cAAAC,YAAA,cAAAC,WAAA,cAAAC,SAAA,eAAAC,YAAA,eAAAC,cAAA,eAAAC,aAAA,eAAAC,UAAA,gBAAAC,MAAA,YAAiVkN,SAAA,CAAastB,UAAA,2QAAAC,WAAA,iKAAAtqG,OAAA,mCAAAL,YAAA,yBAAA+gD,KAAA,oBAAgiByN,UAAA,CAAco8C,UAAA,CAAavqG,OAAA,aAAAC,QAAA,+pBAA+qBuqG,GAAA,CAAOvJ,YAAA,CAAeC,IAAA,CAAO9oH,MAAA,uCAAA+oH,QAAA,kDAAAC,QAAA,CAAsHj9E,QAAA,UAAmB/kB,KAAA,CAAS04B,OAAA,SAAAupE,KAAA,OAAA/sC,OAAA,SAAA7tC,OAAA,SAAA66E,QAAA,UAAAxgH,OAAA,SAAAmQ,OAAA,SAAA+pD,OAAA,SAAA9gB,OAAA,SAAAI,OAAA,SAAAx3B,MAAA,QAAAy+F,IAAA,MAAAC,GAAA,KAAAC,KAAA,OAAAC,iBAAA,qBAA6QC,SAAA,YAAAjnF,QAAA,WAAA7rB,KAAA,OAAA+yG,UAAA,aAAAC,YAAA,CAAmGpwG,MAAA,QAAAK,QAAA,UAAAmvC,UAAA,YAAA9qD,SAAA,cAAAiR,KAAA,OAAA+5C,QAAA,WAAAE,GAAA,WAAAD,eAAA,kBAAAnsB,eAAA,kBAAAC,QAAA,UAAAkD,KAAA,YAAA8oB,OAAA,SAAAI,SAAA,OAAA6F,SAAA,OAAA1lC,KAAA,OAAA9D,MAAA,UAA0UmkG,KAAA,CAASC,KAAA,CAAQC,WAAA,aAAAC,OAAA,SAAAC,gBAAA,WAAAC,cAAA,iCAAAC,kBAAA,WAAAC,gBAAA,oFAA8PnH,SAAA,CAAaoH,WAAA,YAAAC,UAAA,YAAAC,cAAA,gBAAAC,kBAAA,qFAAAC,aAAA,wDAAAC,YAAA,+GAA6Xt5C,QAAA,CAAYu5C,gBAAA,CAAmBC,mBAAA,iBAAAC,kBAAA,kDAAAC,oBAAA,uDAAAC,6BAAA,+EAAsPC,6BAAA,mCAAkHC,uBAAA,iBAAAC,oBAAA,kCAAsFC,4BAAA,uCAAiFC,SAAA,CAAaC,SAAA,WAAAV,gBAAA,WAAAW,aAAA,eAAAC,aAAA,eAAAC,mBAAA,mFAAAC,oBAAA,uBAAAC,4BAAA,yFAA0XC,oBAAA,CAAwBC,YAAA,qBAAAC,eAAA,iBAAAhiG,KAAA,sEAAiJtG,MAAA,CAAU1B,IAAA,YAAAiqG,OAAA,eAAAC,sBAAA,yHAAAC,kBAAA,iBAAAC,kBAAA,cAAAC,YAAA,0BAAA/tC,KAAA,SAAAguC,MAAA,cAAAC,UAAA,sDAAAC,YAAA,gDAAAC,YAAA,SAAAC,YAAA,YAAAC,cAAA,oFAAArlG,KAAA,CAA+mBwzE,WAAA,aAAA8xB,aAAA,WAAAC,UAAA,QAAAC,oBAAA,kBAAAC,SAAA,OAAA9kH,MAAA,QAAAo3F,UAAA,aAA0K2tB,YAAA,cAAAC,WAAA,wBAAAC,0BAAA,0BAAAC,yBAAA,wEAAyMlwD,OAAA,CAA8B38D,MAAA,eAAAm1D,QAAA,2CAA2EyN,OAAA,CAAWkqD,aAAA,kBAAAC,mBAAA,yEAAAC,oBAAA,gBAAAC,mBAAA,8BAAAC,sBAAA,kBAAAC,qBAAA,8BAAAC,aAAA,eAAAC,oBAAA,uDAAiaz6F,KAAA,CAAS06F,SAAA,gBAAAC,aAAA,iBAAAC,aAAA,mBAA4FC,SAAA,CAAaH,SAAA,gBAA0B1rH,OAAA,CAAW8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,kBAAAiC,IAAA,uCAAsE0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,qBAAAiC,IAAA,qCAAuEq3B,OAAA,CAAWg0F,SAAA,YAAApwF,YAAA,oFAAAm1F,cAAA,uEAAAC,aAAA,2BAAAj5E,SAAA,YAAA5f,aAAA,gBAAA84F,eAAA,yBAAAC,mBAAA,qCAAAC,kBAAA,yKAAAC,kBAAA,0BAAAC,iBAAA,6JAAAC,mBAAA,2BAAAC,kBAAA,8HAAAC,WAAA,mJAAA/4E,gBAAA,qBAAurC6zE,iBAAA,CAAqBN,SAAA,iBAAApwF,YAAA,6CAAA4wF,gBAAA,kBAAAC,YAAA,0EAAAC,8BAAA,wBAAAC,6BAAA,iDAA0Vxe,OAAA,CAAWye,wBAAA,qCAAAC,yBAAA,wLAAAC,2BAAA,kCAAAC,oBAAA,UAAAC,UAAA,YAAAC,sBAAA,gDAAAC,eAAA,yCAAAC,aAAA,0FAAAC,aAAA,eAAAv0E,WAAA,kBAAAw0E,WAAA,oBAAAC,UAAA,oBAAAC,iBAAA,4CAAgzBC,2BAAA,uBAAAC,+BAAA,4CAAAC,0BAAA,uRAAAC,4BAAA,sBAAAC,4BAAA,OAAAjxD,MAAA,CAAuhBkxD,aAAA,YAAAxF,KAAA,mIAAoKyF,aAAA,CAAiBC,mBAAA,qBAAAC,YAAA,yMAAAC,eAAA,SAAAC,WAAA,sBAAA3nH,KAAA,2BAAA4nH,aAAA,6FAAAC,gBAAA,8GAAAC,SAAA,kFAAAjD,YAAA,cAAAC,WAAA,wBAAAC,0BAAA,iCAAAC,yBAAA,+EAAw3B+C,2BAAA,SAAAC,gBAAA,kBAAAC,iBAAA,mBAAAC,kBAAA,sBAAAC,iBAAA,mBAAAC,iBAAA,mBAAAC,kBAAA,oBAAArxE,OAAA,SAAAxnC,OAAA,SAAAzV,OAAA,CAAuV8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,kBAAAiC,IAAA,wCAAuE0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,qBAAAiC,IAAA,sCAAwE06D,OAAA,CAAW38D,MAAA,sBAAAm1D,QAAA,0CAAiF1X,KAAA,CAAS0yE,aAAA,WAAAzuG,IAAA,WAAAq9E,UAAA,YAAAqxB,iBAAA,mBAAAC,SAAA,WAAA3D,YAAA,cAAAC,WAAA,wBAAAC,0BAAA,yBAAAC,yBAAA,uEAAsU+C,2BAAA,SAAAU,2BAAA,0BAAAC,0BAAA,qEAA8MC,4BAAA,SAAA7zD,OAAA,CAAsD38D,MAAA,cAAAm1D,QAAA,iCAAgEs7D,aAAA,wCAAqDC,aAAA,sBAAAC,OAAA,oBAAAC,aAAA,qBAAAC,gCAAA,0BAAAC,+BAAA,wEAA4PC,0BAAA,eAAAC,yBAAA,yDAAgJlB,iBAAA,mBAAAC,kBAAA,sBAAAkB,0BAAA,sDAAApB,gBAAA,kBAAAjuH,OAAA,CAAqN8rH,kBAAA,CAAqB7hF,QAAA,CAAW7rC,MAAA,kBAAAiC,IAAA,wCAAuE0rH,kBAAA,CAAsB9hF,QAAA,CAAW7rC,MAAA,qBAAAiC,IAAA,sCAAwEivH,SAAA,0HAAApC,2BAAA,uBAAAE,0BAAA,+MAAAC,4BAAA,sBAAAC,4BAAA,QAA8fnoH,KAAA,CAASoqH,iBAAA,gBAAiCC,gBAAA,oBAAAC,cAAA,kEAAAC,mBAAA,mDAAAC,oBAAA,iGAAAC,mBAAA,mLAAAxqG,KAAA,CAAygByqG,OAAA,CAAUllF,aAAA,eAAA5kC,MAAA,SAAA+pH,QAAA,UAAAvxH,SAAA,YAAAoqB,UAAA,WAAAC,UAAA,uBAAmJmnG,OAAA,CAAWplF,aAAA,oBAAA5kC,MAAA,iBAAA+pH,QAAA,aAAAvxH,SAAA,8BAA2HyxH,cAAA,CAAkBC,aAAA,iBAAA9E,mBAAA,0DAAAC,oBAAA,gBAAAC,mBAAA,wCAAAC,sBAAA,kBAAAC,qBAAA,yCAA2T2E,gBAAA,CAAoBC,6BAAA,yBAAAC,4BAAA,8DAAmJ7nG,QAAA,CAAYwsE,MAAA,QAAAG,UAAA,YAAAC,WAAA,aAAAC,aAAA,aAAAC,YAAA,aAAAC,YAAA,aAAAC,WAAA,aAAAC,SAAA,YAAAC,YAAA,cAAAC,cAAA,cAAAC,aAAA,cAAAC,UAAA,aAAAC,MAAA,SAAqUkN,SAAA,CAAastB,UAAA,+LAAAC,WAAA,+GAAAtqG,OAAA,mCAAAL,YAAA,gBAAA+gD,KAAA,gBAAuayN,UAAA,CAAco8C,UAAA,CAAavqG,OAAA,aAAAC,QAAA","file":"static/js/main.181186e1.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 1208;","module.exports = __webpack_public_path__ + \"static/media/cody.63c5836d.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAIAAAABlV4SAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABQElEQVRoge3ZMW7CMBTG8eeIQIYs7VZ3RCJzxTF6gKysrKh7VYZOSFwgB4DTMHOAMjK3qlSzdeiAnx23/hp9//mJvJ8SS1Ewzjn55xW5F0gQDRjRgBENGNGAEQ0YDcEw0gx9vR0/98/udPztbX5kbFO2L8V94xnTvLd+vD668ynRYmEZ20xWu+szqmcpF0BENDd/COeBBoxowIgGjGjAiAaMaMCIBoxowIgGjGjAiAaMhmBQfatMnrGzsl17P0Iqy3MfEgIklyEhQHI9S9+9Pz14Z6rN4foA+pkupnP/zB/sEV9Vl+3aOwVsqOrxsjO31juIaqjq8bJTHn1IQwhAEA2BAIEzhAMEyxAFECBDLECUBnNzF/HTAfUAiNJQLrbGzuIu4N9gOp+s9n3eoFT/sYMHcx56RANGNGBEA0Y0YHQBkZ0zQP+umloAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,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\"","import { default as jwt, JwtHeader, SigningKeyCallback, VerifyErrors } from 'jsonwebtoken';\nimport JwksClient, { CertSigningKey, RsaSigningKey, SigningKey } from 'jwks-rsa' ;\nimport { KeycloakTokenParsed } from 'keycloak-js';\n\nexport interface TokenParsed extends KeycloakTokenParsed {\n    iss: string;\n}\n\nlet jwksClient: JwksClient.JwksClient;\nlet getKey: any;\n\nexport const isRsaSigningKey = (s?: SigningKey): s is RsaSigningKey => {\n    if (s === undefined) {\n        return false;\n    }\n    return s.hasOwnProperty('rsaPublicKey');\n};\nexport const isCertSigningKey = (s?: SigningKey): s is CertSigningKey => {\n    if (s === undefined) {\n        return false;\n    }\n    return s.hasOwnProperty('publicKey');\n};\n\nexport const initJwtVerify = (token: string, unsecureToken: TokenParsed) => {\n    jwksClient = JwksClient({\n        cache: true,\n        strictSsl: process.env.REACT_APP_IG_KC_VERIFY_SSL_CERTIFICATE === 'true',\n        jwksUri: unsecureToken.iss + '/protocol/openid-connect/certs',\n        requestHeaders: {}, // Optional\n    });\n\n    getKey = (header: JwtHeader, callback: SigningKeyCallback) => {\n        // ensure integrity\n        if (header.alg !== 'RS256' || header.typ !== 'JWT') {\n            throw Error('Only RSA256 is supported for JWT');\n        }\n\n        jwksClient.getSigningKey(header.kid!, (err: Error | null, key: SigningKey) => {\n\n            if (isRsaSigningKey(key)) {\n                callback(err, key.rsaPublicKey);\n                return;\n            }\n            if (isCertSigningKey(key)) {\n                callback(err, key.publicKey);\n                return;\n            }\n\n            console.warn('Wrong signing key');\n            console.warn({err});\n            callback(err);\n        });\n    };\n\n};\n\nexport default (token: string) => {\n    return new Promise<object>(\n        (resolve, reject) => {\n            jwt.verify(\n                token,\n                getKey,\n                // {algorithms: ['RS256']},\n                (error: VerifyErrors, verifiedToken: object | string) => {\n                    if (error) {\n                        console.log({error});\n                        return reject(error);\n                    }\n\n                    return resolve({\n                        token,\n                        verifiedToken,\n                    });\n                },\n            );\n        },\n    );\n};\n","import axios from 'axios';\n\nexport const GRAPHQL_URL = '/graphql';\n\nconst configuredAxios = axios.create({\n  baseURL: '/board/api/v1/messagebox',\n});\n\nexport default configuredAxios;\n","import io from \"socket.io-client\";\n\nexport default io({\n    path: '/board/socket/',\n    autoConnect: false,\n    reconnection: true,\n    transportOptions: {\n        polling: {\n            extraHeaders: {}\n        }\n    }\n});\n\n\n","import {AxiosError, AxiosPromise, AxiosResponse} from \"axios\";\nimport api from './ConfiguredAxios';\nimport configuredAxios from \"./ConfiguredAxios\";\nimport configuredSocket from \"./ConfiguredSocket\";\n\n\nexport interface ResponseType {\n    response?: AxiosResponse,\n    error?: AxiosResponse,\n}\n\nexport interface KeyCloakUserObject extends Object{\n    uid: string,\n    email: string,\n    display_name: string,\n    company_name: string,\n    job_title: string,\n    avatar_url: string,\n}\n\n/**\n * Provide axios and the socket connection with the new token and also update the token cookie\n *\n * @param token\n */\nexport const distributeNewToken = (token: string) => {\n    configuredAxios.defaults.headers.Authorization = 'Bearer ' + token;\n    // @ts-ignore\n    configuredSocket.io.opts.transportOptions!.polling.extraHeaders.Authorization = 'Bearer ' + token;\n\n    const expiresDate = new Date();\n    expiresDate.setTime(expiresDate.getTime() + 10 * 60 * 1000);\n    document.cookie = 'token=' + token + ';path=/buckets/boards;expires=' + expiresDate.toUTCString();\n};\n\nexport const axiosApiPromise = (messageName: string, payload: object): Promise<ResponseType> => {\n    return api.post(messageName, payload)\n        .then((response: AxiosResponse) => ({response}))\n        .catch((error: AxiosError) => ({error: error.response}));\n};\n\nexport const userManagementApiPromise = (messageName: string, payload: object): Promise<ResponseType> => {\n    return api.post(messageName, payload, { baseURL: '/board/api/v1/user-management' })\n        .then((response: AxiosResponse) => ({response}))\n        .catch((error: AxiosError) => ({error: error.response}));\n};\n\nexport const avatarUploadApiPromise = (messageName: string, payload: any): AxiosPromise<any> => {\n    return api.post(messageName, payload,{ baseURL: '/avatar/' });\n};\n\nexport const avatarDeletionApiPromise = (messageName: string): AxiosPromise<any> => {\n    return api.delete(messageName, { baseURL: '/avatar/' });\n};\n\nexport const boardImageUploadApiPromise = (boardId: string, payload: string|ArrayBuffer, mimeType: string): AxiosPromise<any> => {\n    return api.post(\n        boardId,\n        payload,\n        { baseURL: '/buckets/boards/', headers: { 'Content-Type': mimeType } }\n    );\n};\n\nexport const boardImageReplacementApiPromise = (boardId: string, imageId: string, payload: string|ArrayBuffer, mimeType: string): AxiosPromise<any> => {\n    return api.post(\n        `${boardId}/${imageId}`,\n        payload,\n        { baseURL: '/buckets/boards/',  headers: { 'Content-Type': mimeType } }\n    );\n};\n\nexport const boardImageDeletionApiPromise = (imageUrl: string): AxiosPromise<any> => {\n    return api.delete(imageUrl, { baseURL: `/` });\n};\n","import i18n from 'i18next';\nimport LngDetector from 'i18next-browser-languagedetector';\n\nconst resources = require('i18next-resource-store-loader!./i18n/index.js');\n\nconst detectionOptions = {\n    // order and from where user language should be detected\n    order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag', 'path', 'subdomain'],\n\n    // cache user language on\n    caches: ['localStorage', 'cookie'],\n    excludeCacheFor: ['cimode'], // languages to not persist (cookie, localStorage)\n};\n\ni18n\n    // detect user language\n    // learn more: https://github.com/i18next/i18next-browser-languageDetector\n    .use(LngDetector)\n    // pass the i18n instance to the react-i18next components.\n    // Alternative use the I18nextProvider: https://react.i18next.com/components/i18nextprovider\n    // init i18next\n    // for all options read: https://www.i18next.com/overview/configuration-options\n    .init({\n        detection: detectionOptions,\n        fallbackLng: 'en',\n        debug: true,\n\n        resources,\n\n        // special options for react-i18next\n        // learn more: https://react.i18next.com/components/i18next-instance\n        react: {\n            wait: true,\n        },\n    });\n\nexport default i18n;","import React, { useEffect } from 'react';\n\nexport function useOnBodyClick(onClick: () => void): void {\n    useEffect(() => {\n        document.getElementsByTagName('body')[0].addEventListener('click', onClick);\n\n        return () => {\n            document.getElementsByTagName('body')[0].removeEventListener('click', onClick);\n        }\n    }, []);\n}","import { Record } from 'immutable';\nimport * as uuid from 'uuid';\n\nexport interface NotificationActionType {\n    label: string,\n    callback: () => void\n}\n\nexport interface MessageProps {\n    title?: string,\n    message: string,\n    tOpts?: object,\n    level?: 'success' | 'error' | 'warning' | 'info',\n    position?: 'tr' | 'tl' | 'tc' | 'br' | 'bl' | 'bc',\n    autoDismiss?: number,\n    dismissible?: boolean,\n    handled?: boolean,\n    uid?: string,\n    action?: NotificationActionType | null,\n    hideProgressBar?: boolean,\n}\n\nconst defaultMessageProps: MessageProps = {\n    title: '',\n    message: '',\n    level: 'info',\n    position: 'bl',\n    autoDismiss: 5,\n    dismissible: true,\n    handled: false,\n    uid: undefined,\n    action: null,\n    hideProgressBar: true,\n};\n\nexport class Message extends Record(defaultMessageProps) implements MessageProps {\n\n    public constructor(data: Partial<MessageProps>) {\n        if (data.uid === undefined) {\n            data.uid = uuid.v4();\n        }\n        super(data);\n    }\n\n    public markAsHandled(): Message {\n        return this.set('handled', true) as Message;\n    }\n\n    public hasAction(): boolean {\n        return null !== this.action;\n    }\n\n}\n","\nexport const NOTIFY = '@@NotificationSystem/Notify';\nexport const MESSAGE_HANDLED = '@@NotificationSystem/MessageHandled';","import { action } from 'typesafe-actions';\nimport {NotificationModel} from \"../model\";\nimport { NOTIFY } from \"./constants\";\n\nexport const notify = (message: NotificationModel.Message  ) => action(NOTIFY, message);\n\nexport const info =  (title: string, message: string, tOpts: object|undefined = undefined, autoDismiss = 5 ) => {\n    const msg = new NotificationModel.Message({\n            title,\n            message,\n            tOpts,\n            level: \"info\",\n            autoDismiss,\n        });\n\n    return action(NOTIFY, msg);\n};\n\nexport const error =  (title: string, message: string, tOpts: object|undefined = undefined ) => {\n    const msg = new NotificationModel.Message({\n            title,\n            message,\n            tOpts,\n            level: \"error\",\n            autoDismiss: 0,\n        });\n\n    return action(NOTIFY, msg);\n};\n","import { action } from 'typesafe-actions';\nimport {NotificationModel} from \"../model\";\nimport {MESSAGE_HANDLED} from \"./constants\";\n\nexport const publishMessageHandled = (message: NotificationModel.Message) => action(MESSAGE_HANDLED, message);","import { List } from 'immutable';\nimport * as React from 'react';\nimport {withNamespaces, WithNamespaces} from 'react-i18next';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { Command, Event } from '../actions';\nimport { NotificationModel } from '../model';\n\nimport 'react-toastify/dist/ReactToastify.css';\n\n\n// Separate state props + dispatch props to their own interfaces.\ninterface PropsFromState {\n    messages: List<NotificationModel.Message>\n}\n\n// We can use `typeof` here to map our dispatch types to the props, like so.\ninterface PropsFromDispatch {\n    sendNotify: typeof Command.info,\n    onHandled: typeof Event.publishMessageHandled,\n}\n\ninterface OwnProps {\n    maxMessages?: number\n}\n\nexport interface NotificiationsProps extends PropsFromState, PropsFromDispatch, OwnProps, WithNamespaces {\n}\n\nconst options = {\n    // onOpen: (props:any) => console.log({props}),\n    // onClose: (props:any) => console.log({props}),\n    autoClose: 6000,\n    type: toast.TYPE.INFO,\n    hideProgressBar: true,\n    position: toast.POSITION.BOTTOM_LEFT,\n    pauseOnHover: true,\n    // progress: 0.2\n};\n\nexport const Notifications = (props: NotificiationsProps) =>\n    <ToastContainer position={toast.POSITION.BOTTOM_LEFT} />\n;\n","import {fromJS, List} from 'immutable';\nimport { createSelector } from 'reselect';\nimport { ApplicationState } from '../../reducer';\nimport { NotificationModel } from '../model';\n\nexport const notificationsSelector = (state: any, props: any) => state.getIn(['notificationSystem', 'messages'], fromJS([]));\n\nexport const makeGetNotifications = (): (state: ApplicationState, props: any) => List<NotificationModel.Message> => {\n    return createSelector(\n        [notificationsSelector] as any,\n        (messages: List<NotificationModel.Message>): List<NotificationModel.Message> => messages\n    )\n}\n\nexport const makeMapStateTopPropsNotifications = () => {\n    const getNotifications = makeGetNotifications();\n\n    return (state: ApplicationState, props: any) => {\n        const messages = getNotifications(state, props);\n\n        return {\n            messages,\n        }\n    }\n}\n","import {List} from \"immutable\";\nimport * as _ from 'lodash';\nimport React from \"react\";\nimport {withNamespaces} from \"react-i18next\";\nimport { connect } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { compose, lifecycle } from 'recompose';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { Command, Event } from '../actions';\nimport { Notifications, NotificiationsProps } from '../components/Notifications';\nimport { NotificationModel } from '../model';\nimport { makeMapStateTopPropsNotifications } from \"../selectors/message\";\n\n// It's usually good practice to only include one context at a time in a connected component.\n// Although if necessary, you can always include multiple contexts. Just make sure to\n// separate them from each other to prevent prop conflicts.\nconst mapStateToProps = makeMapStateTopPropsNotifications();\n\n// mapDispatchToProps is especially useful for constraining our actions to the connected component.\n// You can access these via `this.props`.\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators(\n    {\n        sendNotify: Command.info,\n        onHandled: Event.publishMessageHandled\n    },\n    dispatch,\n);\n\nlet currentlyVisible: string[] = [];\n\nconst showUnhandledMessages = (messages: List<NotificationModel.Message>, onHandled: (msg: NotificationModel.Message) => void, props: NotificiationsProps) => {\n    messages.filter((value?: NotificationModel.Message) => {\n        if (!value) {\n            return false;\n        }\n        return !value.handled;\n    })\n        .forEach((msg?: NotificationModel.Message) => {\n            if (!msg) {\n                return;\n            }\n\n            if(msg.uid && currentlyVisible.includes(msg.uid)) {\n                return;\n            }\n\n            let message: any = msg.message;\n\n            if(message instanceof Error) {\n                message = message.message;\n            }\n            if(msg.uid) {\n                currentlyVisible.push(msg.uid);\n            }\n\n            toast(\n                <div><p><strong>{ props.t(msg.title+'')}</strong></p>{props.t(message)}</div>,\n                {\n                    type: msg.level,\n                    autoClose: msg.level === 'error'? false : 2000,\n                    hideProgressBar: msg.hideProgressBar,\n                    onClose: () => {\n                        if(msg.uid) {\n                            currentlyVisible = currentlyVisible.filter(uid => uid !== msg.uid);\n                        }\n                        onHandled(msg.markAsHandled())\n                    }\n                });\n        });\n};\n\nexport default withNamespaces()(compose<NotificiationsProps, any>(\n    connect(mapStateToProps, mapDispatchToProps),\n    lifecycle({\n        componentDidMount() {\n            const { messages, onHandled } =\n                this.props as NotificiationsProps;\n\n            if (!messages) {\n                return;\n            }\n\n            showUnhandledMessages(messages, onHandled, this.props as NotificiationsProps);\n        },\n        componentDidUpdate() {\n            const { messages, onHandled } =\n                this.props as NotificiationsProps;\n\n            if (!messages) {\n                return;\n            }\n\n            showUnhandledMessages(messages, onHandled, this.props as NotificiationsProps);\n        }\n    }),\n)(Notifications));\n","export const root = '/';\nexport const overview = '/overview';\nexport const inspectio = '/inspectio';\nexport const userProfile = inspectio + '/user/profile';\nexport const inspectioBoardWorkspace = inspectio + '/board/:uid';\nexport const compileInspectioBoardWorkspace = (boardUid: string): string => inspectio + '/board/' + boardUid;\nexport const isInspectioBoardWorkspace = (pathname: string): boolean => pathname.search(inspectio + '/board/') === 0;\nexport const getBoardUidFromWorkspacePath = (pathname: string): string => pathname.replace(inspectio + '/board/', '');\nexport const getBoardUidFromWorkspaceUrl = (url: string): string => url.replace(getHostUrlPart() + inspectio + '/board/', '');\nexport const inspectioEditBoard = inspectio + '/boards/edit/:uid';\nexport const compileInspectioBoardEdit = (boardUid: string): string => inspectio + '/boards/edit/' + boardUid;\nexport const boardInvitation = inspectio + '/boards/invitation/:invitation';\nexport const boardImportLink = inspectio + '/boards/import/:link';\nexport const teamInvitation = inspectio + '/teams/invitation/:invitation';\nexport const organizationInvitation = inspectio + '/organizations/:organization/invitation/:invitation';\nexport const teamOverview = inspectio + '/teams';\nexport const organizationOverview = inspectio + '/organization';\nexport const Updates = inspectio + '/updates';\nexport const BoardRedirect = inspectio + '/boards/redirect';\n\nexport type DeepLinkFactory = (cellId: string) => string;\n\nexport const makeWorkspaceDeeplinkFacory = (boardUid: string): DeepLinkFactory =>\n    (cellId) => getHostUrlPart() + compileInspectioBoardWorkspace(boardUid) + `?cells=${cellId}&clicks=1`;\n\nconst getHostUrlPart = (): string => {\n    return  window.location.protocol + '//' + window.location.host;\n}\n","export const SERVER_CONTEXT = 'InspectIO.';\n\nexport const SIGN_IN = '@@InspectioUsers/SignIn';\n\n// Queries\nexport const FETCH_USER = '@@InspectioBoards/User';\nexport const LOAD_IIO_USERS_INFO = '@@InspectioBoards/IioUsersInfo';\n\n// Events\nexport const IIO_USERS_INFO_LOADED = '@@InspectioBoards/IioUsersInfoLoaded';\nexport const USER_SETTINGS_LOADED = '@@InspectioBoard/UserSettingsLoaded';\nexport const USER_SETTING_UPSERTED = '@@InsecptioBoard/UserSettingUpserted';\n\n// User Update\nexport const UPDATE_PROFILE = '@@InspectioBoards/UserUpdate';\nexport const UPDATE_PASSWORD = '@@InspectioBoards/PasswordUpdate';\nexport const UPSERT_USER_SETTING = '@@InsecptioBoards/UpsertUserSetting';\n\n// Active Organization\nexport const SWITCH_ACTIVE_ORGANIZATION = '@@InspectioBoards/SwitchActiveOrganization';\nexport const ACTIVE_ORGANIZATION_SWITCHED = '@@InspectioBoards/ActiveOrganizationSwitched';\n","import { action } from 'typesafe-actions';\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {UserModel} from '../model';\nimport {UserSettingsValue} from \"../model/UserSettings\";\nimport {SIGN_IN, UPDATE_PASSWORD, UPDATE_PROFILE, UPSERT_USER_SETTING} from \"./constants\";\nimport {SWITCH_ACTIVE_ORGANIZATION} from \"./constants\";\n\nexport const signIn = (user: UserModel.UserInfo) => action(SIGN_IN, {user});\n\nexport const updateProfile = (user: UserModel.UserInfo, successCb: () => void) => action(UPDATE_PROFILE, {user, successCb});\n\nexport const updatePassword = (password: string) => action(UPDATE_PASSWORD, {password});\n\nexport const upsertUserSetting = (key: string, value: UserSettingsValue) => action(UPSERT_USER_SETTING, {key, value});\n\nexport const switchActiveOrganization = (organizationId: OrganizationId | null) => action(SWITCH_ACTIVE_ORGANIZATION, {organizationId});\n","import {AxiosPromise} from \"axios\";\nimport {\n    avatarDeletionApiPromise, avatarUploadApiPromise,\n    axiosApiPromise,\n    ResponseType,\n    userManagementApiPromise\n} from '../../api/util';\nimport { UserModel } from '../../User';\nimport {Email, UserId} from \"../model/UserInfo\";\nimport {UserSettingsValue} from \"../model/UserSettings\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {SERVER_CONTEXT} from \"./constants\";\n\nexport const getUser = (userId: string): Promise<ResponseType> => {\n    return axiosApiPromise('InspectIO.User', {userId});\n};\n\nexport const syncUsername = (\n    userId: string,\n    username: string,\n    email: string|null,\n    avatarUrl: string|null,\n    position: string|null\n): Promise<ResponseType> => {\n    email = email || null;\n    avatarUrl = avatarUrl || null;\n    position = position || null;\n\n    return  axiosApiPromise(\n        'InspectIO.SyncUserName',\n        {userId, name: username, email, avatarUrl, position}\n    );\n};\n\nexport const getInspectioUsersInfo = (userIds: UserId[]): Promise<ResponseType> => {\n    return axiosApiPromise('InspectIO.Users', {userIds});\n};\n\nexport const getInspectioUserInfoByEmail = (email: Email): Promise<ResponseType> => {\n    return axiosApiPromise('InspectIO.UserInfo', {email});\n};\n\nexport const getUserSettings = (): Promise<ResponseType> => {\n    return axiosApiPromise('InspectIO.UserSettings', {});\n};\n\nexport const upsertUserSetting = (key: string, value: UserSettingsValue): Promise<ResponseType> => {\n    return axiosApiPromise('InspectIO.UpsertUserSetting', {key, value: String(value)});\n};\n\nexport const updateProfile = (user: UserModel.UserInfo): Promise<ResponseType> => {\n    const data = {\n        userId: user.uid,\n        email: user.email,\n        username: user.name,\n        avatarUrl: user.avatarUrl,\n        displayName: user.displayName,\n        companyName: user.companyName,\n        jobTitle: user.jobTitle\n    };\n\n    return userManagementApiPromise('update-profile', data);\n};\n\nexport const updatePassword = (userId: string, password: string): Promise<ResponseType> => {\n    const data = {\n        userId,\n        temporary: false,\n        password\n    };\n\n    return userManagementApiPromise('reset-password', data);\n};\n\nexport const uploadAvatar = (userId: string, file: FormData): AxiosPromise<any> => {\n    return avatarUploadApiPromise(userId, file);\n};\n\nexport const deleteAvatar = (userId: string): AxiosPromise<any> => {\n    return avatarDeletionApiPromise(userId);\n};\n\nexport const switchActiveOrganization = (userId: UserId, organizationId: OrganizationId | null): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'SwitchActiveOrganization', { userId, organizationId });\n}\n","import {List} from \"immutable\";\nimport {action} from \"typesafe-actions\";\nimport {IioUserInfo} from \"../model/IioUserInfo\";\nimport {\n    ACTIVE_ORGANIZATION_SWITCHED,\n    IIO_USERS_INFO_LOADED,\n    USER_SETTING_UPSERTED,\n    USER_SETTINGS_LOADED\n} from \"./constants\";\nimport {UserSettings, UserSettingsValue} from \"../model/UserSettings\";\nimport {UserInfo} from \"../model/UserInfo\";\n\nexport const iioUsersInfoLoaded = (usersInfo: List<IioUserInfo>) => action(IIO_USERS_INFO_LOADED, {usersInfo});\n\nexport const userSettingsLoaded = (userSettings: UserSettings) => action(USER_SETTINGS_LOADED, {userSettings});\n\nexport const userSettingUpserted = (key: string, value: UserSettingsValue) => action(USER_SETTING_UPSERTED, {key, value});\n\nexport const activeOrganizationSwitched = (user: UserInfo) => action(ACTIVE_ORGANIZATION_SWITCHED, user);\n","export const SEND_HTTP_REQUEST = '@@api/SEND_HTTP_REQUEST';\nexport const RESET_WEB_DATA = '@@api/RESET_WEB_DATA';\nexport const SEND_GRAPHQL_QUERY = '@@api/SEND_GRAPHQL_QUERY';\n\n","import { AxiosRequestConfig } from 'axios';\nimport { action } from 'typesafe-actions';\nimport {\n    RESET_WEB_DATA,\n    SEND_HTTP_REQUEST,\n} from './constants';\nimport {WebData} from \"./WebData\";\n\nexport const sendHttpRequest = <TMeta> (request: AxiosRequestConfig, responseActionType: string, metadata?: TMeta) => action(SEND_HTTP_REQUEST, {request, responseActionType, metadata});\n\nexport const responseAction = <D, TMeta> (responseActionType: string, webData: WebData<D>, metadata?: TMeta) => action(responseActionType, {webData, metadata});\n\nexport const resetWebData = (responseActionType: string) => action(RESET_WEB_DATA, {responseActionType});\n","\nexport const getMessageBoxRequestConfig = <P> (messageName: string, payload: P) => {\n    return {\n        url: messageName,\n        method: 'post',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        data: JSON.stringify(payload),\n        responseType: 'json'\n    }\n}\n","import {action} from \"typesafe-actions\";\nimport * as ApiAction from '../../api';\nimport {Email, UserId} from \"../model/UserInfo\";\nimport {FETCH_USER, LOAD_IIO_USERS_INFO, SERVER_CONTEXT} from './constants';\n\nexport const fetchUser = (userId: string) => {\n    return ApiAction.Action.sendHttpRequest<{}>(ApiAction.MessageBox.getMessageBoxRequestConfig(\n        SERVER_CONTEXT + 'User',\n        {userId},\n    ), FETCH_USER);\n};\n\nexport const loadUsersInfo = (userIds: UserId[]) => action(LOAD_IIO_USERS_INFO, {userIds});\n","import { Record } from 'immutable';\n\nexport const TYPE_FREE = 'free';\nexport const TYPE_BASIC = 'basic';\nexport const TYPE_PREMIUM = 'premium';\nexport const TYPE_CUSTOM = 'custom';\n\nexport type AccountType = 'free' | 'basic' | 'premium' | 'custom';\n\nexport interface AccountProps {\n    accountType: AccountType;\n}\n\nexport interface AccountMethods {\n    isEqualOrBetterThan(other: Account): boolean;\n    isFreeAccount(): boolean;\n    isBasicAccount(): boolean;\n    isPremiumAccount(): boolean;\n    isCustomAccount(): boolean;\n    equals(other: Account): boolean;\n}\n\nexport interface AccountRecord extends AccountProps, AccountMethods {\n}\n\nexport const defaultUserProps: AccountProps = {\n    accountType: TYPE_FREE,\n};\n\nexport const assertAccountType = (accountType: string): void => {\n    switch (accountType) {\n        case TYPE_FREE:\n        case TYPE_BASIC:\n        case TYPE_PREMIUM:\n        case TYPE_CUSTOM:\n            break;\n        default:\n            throw new Error('Invalid accountType type \"' + accountType + '\" provided');\n    }\n};\n\nexport const fromString = (accountType: AccountType) => new Account({accountType});\n\nexport const fromUserToken = (roles: string[]) => {\n    let accountType = freeAccount();\n    let otherAccount = freeAccount();\n\n    roles.forEach((value: string) => {\n        if (value.match(/-account/) !== null) {\n            otherAccount = new Account({accountType: value.replace(/-account/, '') as AccountType});\n\n            if (otherAccount.isEqualOrBetterThan(accountType)) {\n                accountType = otherAccount;\n            }\n        }\n    });\n    return accountType;\n};\n\nexport const freeAccount = (): Account => new Account({accountType: TYPE_FREE});\n\nexport class Account extends Record(defaultUserProps) implements AccountRecord {\n    public constructor(data: AccountProps) {\n        assertAccountType(data.accountType);\n        super(data);\n    }\n\n    public isFreeAccount(): boolean {\n        return this.accountType === TYPE_FREE;\n    }\n\n    public isBasicAccount(): boolean {\n        return this.accountType === TYPE_BASIC;\n    }\n\n    public isPremiumAccount(): boolean {\n        return this.accountType === TYPE_PREMIUM;\n    }\n\n    public isCustomAccount(): boolean {\n        return this.accountType === TYPE_CUSTOM;\n    }\n\n    public isEqualOrBetterThan(other: Account): boolean {\n        if (this.accountType === other.accountType) {\n            return true;\n        }\n\n        if (this.accountType === TYPE_FREE) {\n            return false;\n        }\n\n        if (other.accountType === TYPE_FREE) {\n            return true;\n        }\n\n        if (this.accountType === TYPE_CUSTOM) {\n            return true;\n        }\n\n        if (other.accountType === TYPE_CUSTOM) {\n            return false;\n        }\n\n        if (this.accountType === TYPE_PREMIUM) {\n            return true;\n        }\n\n        return false;\n    }\n\n    public equals(other: Account): boolean {\n        return this.accountType === other.accountType;\n    }\n}\n","/**\n * Code taken from: https://dev.to/polyov_dev/data-validation-in-typescript-using-the-either-pattern-4omk\n * But modified for better understanding (no need to know Haskell)\n */\n\nexport interface Failure<A> {\n    value: A;\n    tag: 'left'\n}\n\nexport interface Success<B> {\n    value: B;\n    tag: 'right'\n}\n\nexport type Either<A,B> = Failure<A> | Success<B>;\n\nexport function isFailure<A>(val: any): val is Failure<A> {\n    if ((val as Failure<A>).tag === 'left') {\n        return true;\n    }\n    return false;\n}\n\nexport function isSuccess<B>(val: any): val is Success<B> {\n    if ((val as Success<B>).tag === 'right') {\n        return true;\n    }\n\n    return false;\n}\n\nexport function Failure<A>(val: A) : Failure<A> {\n    return { value: val, tag: 'left' };\n}\n\nexport function Success<B>(val: B) : Success<B> {\n    return { value: val, tag: 'right' };\n}\n\nexport type Predicate<N> = (val: N) => boolean;\n\nexport type EitherFunction<A, B> = (val: B) => Either<A, B>;\n\nexport function predicateEither<A, B>(error: A, predicate: Predicate<B>) : (val: B) => Either<A, B> {\n    return (value: B) => {\n        if (!predicate(value)) {\n            return Failure(error);\n        }\n        return Success(value);\n    }\n}\n\n\nexport function validate<A, B>(val: B, ...predicates: Array<[Predicate<B>, A]>) : Either<A, B> {\n    for (const [p, error] of predicates) {\n        if (!p(val)) {\n            return Failure(error);\n        }\n    }\n    return Success(val);\n}\n\nexport function execValidate<A, B>(...predicates: Array<[Predicate<B>, A]>): (val: B) => Either<A, B> {\n    return (val: B) => {\n        return validate(val, ...predicates);\n    }\n}\n\nexport function validateEach<A, B>(list: B[], ...predicates: Array<[Predicate<B>, A]>) : Either<A, B[]> {\n    for(const item of list) {\n        const result = validate(item, ...predicates);\n\n        if(isFailure(result)) {\n            return result;\n        }\n    }\n\n    return Success(list);\n}\n\nexport function execValidateEach<A, B>(...predicates: Array<[Predicate<B>, A]>) : (list: B[]) => Either<A, B[]> {\n    return (list: B[]) => validateEach(list, ...predicates);\n}\n\nexport function exec<A, B>(func: EitherFunction<A, B>): (val: B) => Either<A, B> {\n    return (val: B) => func(val);\n}\n\nexport function execForEach<A, B, C>(func: EitherFunction<A, B>): (list: B[]) => Either<A, B[]> {\n    return (list: B[]) => {\n        const newList: B[] = [];\n\n        for(const item of list) {\n            const result = func(item);\n\n            if(isFailure(result)) {\n                return result;\n            }\n\n            newList.push(result.value);\n        }\n\n        return Success(newList);\n    }\n}\n\nexport function pipe<A, B>(val: B, ...funcs: Array<EitherFunction<A, B>>): Either<A, B> {\n    for (const eitherFunc of funcs) {\n        const result = eitherFunc(val);\n\n        if(isFailure(result)) {\n            return result;\n        }\n\n        val = result.value;\n    }\n\n    return Success(val);\n}\n\n","import * as _ from \"lodash\";\n\nexport const hasKey = <O>(key: string): (obj: O) => boolean => {\n    return (obj: O): boolean => {\n        if(!_.isObject(obj)) {\n            return false;\n        }\n\n        return _.has(obj, key);\n    }\n};\n\nexport const isArray = <O>(): (obj: O) => boolean => {\n    return (obj: O) => {\n        return _.isArray(obj);\n    }\n};\n","import { Record } from 'immutable';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {AvatarUrl, Email, JobTitle, UserId, Username} from \"./UserInfo\";\n\nexport const AGGREGATE_TYPE = 'IioUserInfo';\nexport type IioUserInfoError = string;\n\nexport interface IioUserInfoProps {\n    uid: UserId;\n    userId: UserId;\n    username: Username;\n    avatarUrl: AvatarUrl;\n    anonymous: boolean;\n    aggregateType: AggregateType;\n    position: JobTitle;\n    email: Email;\n}\n\nexport const defaultIioUserInfoProps: IioUserInfoProps = {\n    uid: '',\n    userId: '',\n    username: '',\n    avatarUrl: '',\n    anonymous: true,\n    aggregateType: AGGREGATE_TYPE,\n    position: '',\n    email: '',\n};\n\nexport function createIioUserInfoFromServerData(data: any): Either<IioUserInfoError, IioUserInfo> {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('userId'), \"userId missing\"],\n        [hasKey('username'), \"username missing in \"+data.userId],\n        [hasKey('avatarUrl'), \"avatarUrl missing in \"+data.userId],\n        [hasKey('position'), \"position missing in \"+data.userId],\n        [hasKey('email'), \"email missing in \"+data.userId],\n    );\n\n    if(isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new IioUserInfo({\n        ...defaultIioUserInfoProps,\n        ...data,\n        uid: data.userId,\n    }));\n}\n\nexport function createAnonymous(): IioUserInfo {\n    return new IioUserInfo(defaultIioUserInfoProps);\n}\n\nexport class IioUserInfo extends Record(defaultIioUserInfoProps) implements Aggregate, IioUserInfoProps {\n    public constructor(data: IioUserInfoProps) {\n        if(data.userId !== '') {\n            data.anonymous = false;\n        }\n\n        super(data);\n    }\n\n    public avatar(): AvatarUrl {\n        if(this.anonymous) {\n            return '';\n        }\n\n        if(this.avatarUrl === '') {\n            return this.generateDefaultAvatarUrl();\n        }\n\n        return this.avatarUrl;\n    }\n\n    private generateDefaultAvatarUrl(): AvatarUrl {\n        return `/avatar/${this.userId}?displayName=${this.username}`;\n    }\n}\n","import { Record } from 'immutable';\n\nexport const TYPE_ANONYMOUS = 'anonymous';\nexport const TYPE_USER = 'user';\nexport const TYPE_ADMIN = 'admin';\n\nexport type RoleType = 'anonymous' | 'user' | 'admin';\n\nexport interface RoleProps {\n    type: RoleType;\n}\n\nexport interface RoleMethods {\n    isAnonymous(): boolean;\n    isUser(): boolean;\n    isAdmin(): boolean;\n    equals(other: Role): boolean;\n}\n\nexport interface RoleRecord extends RoleProps, RoleMethods {}\n\nexport const defaultUserProps: RoleProps = {\n    type: TYPE_ANONYMOUS,\n};\n\nexport const fromtString = (role: RoleType): Role => new Role({type: role});\n\nexport const anonymousRole = (): Role => new Role({type: TYPE_ANONYMOUS});\n\nexport const assertRoleType = (type: string): void => {\n    switch (type) {\n        case TYPE_ANONYMOUS:\n        case TYPE_USER:\n        case TYPE_ADMIN:\n            break;\n        default:\n            throw new Error('Invalid role type \"' + type + '\" provided');\n    }\n};\n\nexport class Role extends Record(defaultUserProps) implements RoleRecord {\n    public constructor(data: RoleProps) {\n        assertRoleType(data.type);\n        super(data);\n    }\n\n    public isAnonymous(): boolean {\n        return this.type === TYPE_ANONYMOUS;\n    }\n\n    public isUser(): boolean {\n        return this.type === TYPE_USER;\n    }\n\n    public isAdmin(): boolean {\n        return this.type === TYPE_ADMIN;\n    }\n\n    public equals(other: Role): boolean {\n        return this.type === other.type;\n    }\n}\n","import { Map, Record } from 'immutable';\nimport { RoleModel } from './index';\n\nexport type RoleMapType = Map<RoleModel.RoleType, RoleModel.Role>;\n\nconst anonymous = () => Map<RoleModel.RoleType, RoleModel.Role>().set(RoleModel.TYPE_ANONYMOUS, RoleModel.anonymousRole());\n\nexport const withAnonymous = () => new RoleMap({roleMap: Map<RoleModel.RoleType, RoleModel.Role>().set(RoleModel.TYPE_ANONYMOUS, RoleModel.anonymousRole())});\n\nexport const fromToken = (roles: string[]): RoleMap => {\n    let map: RoleMapType = Map<RoleModel.RoleType, RoleModel.Role>();\n\n    roles.forEach((value: string) => {\n        if (null === value.match(/-account/)) {\n            const role = new RoleModel.Role({type: value as RoleModel.RoleType});\n            map = map.set(role.type, role);\n        }\n    });\n\n    return new RoleMap({roleMap: map});\n};\n\nexport interface RoleMapProps {\n    roleMap: RoleMapType;\n}\n\nexport interface RoleMapMethods {\n    isAnonymous(): boolean;\n    isUser(): boolean;\n    isAdmin(): boolean;\n    equals(other: RoleMap): boolean;\n}\n\nexport interface RoleMapRecord extends RoleMapProps, RoleMapMethods {}\n\nexport const defaultUserProps: RoleMapProps = {\n    roleMap: anonymous(),\n};\n\nexport class RoleMap extends Record(defaultUserProps) implements RoleMapRecord {\n    public constructor(data: RoleMapProps) {\n        if (data.roleMap.isEmpty()) {\n            data.roleMap = data.roleMap.set(RoleModel.TYPE_ANONYMOUS, RoleModel.anonymousRole());\n        }\n        super(data);\n    }\n\n    public isAnonymous(): boolean {\n        return this.roleMap.has(RoleModel.TYPE_ANONYMOUS);\n    }\n\n    public isUser(): boolean {\n        return this.roleMap.has(RoleModel.TYPE_USER);\n    }\n\n    public isAdmin(): boolean {\n        return this.roleMap.has(RoleModel.TYPE_ADMIN);\n    }\n\n    public equals(other: RoleMap): boolean {\n        return this.roleMap.equals(other);\n    }\n}\n","import {List, Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport { AccountModel, RoleMapModel } from './index';\nimport {OrganizationId} from \"../../Organization/model/Organization\";\n\nexport type UserId = string;\nexport type Username = string;\nexport type Email = string;\nexport type Account = AccountModel.AccountProps;\nexport type Roles = RoleMapModel.RoleMap;\nexport type GivenName = string;\nexport type FamilyName = string;\nexport type Quota = number;\nexport type TeamQuota = number;\nexport type DisplayName = string;\nexport type AvatarUrl = string;\nexport type CompanyName = string;\nexport type JobTitle = string;\n\nexport interface UserProps {\n    uid: UserId;\n    name: Username;\n    email: Email;\n    roles: Roles;\n    account: Account;\n    givenName: GivenName;\n    familyName: FamilyName;\n    quota: Quota;\n    teamQuota: TeamQuota,\n    displayName: DisplayName;\n    avatarUrl: AvatarUrl;\n    companyName: CompanyName;\n    jobTitle: JobTitle;\n    activeOrganization: OrganizationId | null;\n    signedIn?: boolean;\n}\n\nexport const defaultUserProps: UserProps = {\n    uid: '',\n    name: '',\n    email: '',\n    givenName: '',\n    familyName: '',\n    roles: RoleMapModel.withAnonymous(),\n    account: AccountModel.freeAccount(),\n    quota: 0,\n    teamQuota: 0,\n    displayName: '',\n    avatarUrl: '',\n    companyName: '',\n    jobTitle: '',\n    activeOrganization: null,\n    signedIn: false,\n};\n\nexport class UserInfo extends Record(defaultUserProps) implements UserProps {\n    public constructor(data: UserProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4();\n        }\n\n        super(data);\n    }\n\n    public generateDefaultAvatarUrl(): AvatarUrl {\n        return `/avatar/${this.uid}?displayName=${this.displayName}`;\n    }\n}\n\n\n","import {List} from \"immutable\";\nimport {call, fork, put, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {isFailure, isSuccess} from \"../../core/validation/either\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\nimport {LOAD_IIO_USERS_INFO} from \"../actions/constants\";\nimport {createIioUserInfoFromServerData, IioUserInfo} from \"../model/IioUserInfo\";\n\ntype LoadIioUsersInfo = ActionType<typeof Action.Query.loadUsersInfo>;\n\ntype FlowAction = LoadIioUsersInfo;\n\nfunction* onLoadUsersInfo(action: LoadIioUsersInfo) {\n    const response = yield call(Action.Api.getInspectioUsersInfo, action.payload.userIds);\n\n    yield call(onResponse, response);\n}\n\nfunction* onResponse({response, error}: ResponseType) {\n    if (error) {\n        // tslint:disable-next-line:no-console\n        console.error(\"Request Error\", \"Failed to laod user info\", error);\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load user info\"));\n    }\n\n    if (response) {\n        const rawUserInfoList: Array<{userId: string, username: string, avatarUrl: string}> = response.data;\n        let userInfoList = List<IioUserInfo>();\n\n        for (const rawInfo of rawUserInfoList) {\n            const result = createIioUserInfoFromServerData(rawInfo);\n\n            if(isFailure(result)) {\n                // tslint:disable-next-line:no-console\n                console.error(\"Failed to process IioUserInfo loaded from server\", result.value, rawInfo);\n                yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load user info\"));\n            }\n\n            if(isSuccess(result)) {\n                userInfoList = userInfoList.push(result.value);\n            }\n        }\n\n        yield put(Action.Event.iioUsersInfoLoaded(userInfoList));\n    }\n}\n\nexport function* lazyLoadInspectioUserInfo() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.LOAD_IIO_USERS_INFO,\n        ]);\n\n        switch (action.type) {\n            case LOAD_IIO_USERS_INFO:\n                yield fork(onLoadUsersInfo, action);\n                break;\n        }\n    }\n}","import {axiosApiPromise, ResponseType} from \"../../api/util\";\nimport {SERVER_CONTEXT} from \"../../User/actions/constants\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {OrganizationId, OrganizationName} from \"../model/Organization\";\nimport {OrganizationInvitationId} from \"../model/OrganizationInvitation\";\n\nexport const installUserOrganization = (organizationId: OrganizationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InstallUserOrganization', { organizationId });\n};\n\nexport const setUpImplicitOrganization = (organizationId: OrganizationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'SetUpImplicitOrganization', { organizationId });\n}\n\nexport const setUpExplicitOrganization = (organizationId: OrganizationId, name: OrganizationName): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'SetUpExplicitOrganization', {organizationId, name});\n}\n\nexport const fetchOrganization = (organizationId: OrganizationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'Organization', { organizationId });\n}\n\nexport const fetchUserOrganizations = (): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'UserOrganizations', {});\n}\n\nexport const inviteUserToOrganization = (organizationId: OrganizationId, invitationId: OrganizationInvitationId, invitedUserEmail: Email): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InviteUserToOrganization', {organizationId, invitationId, invitedUserEmail});\n}\n\nexport const revokeUserOrganizationInvitation = (organizationId: OrganizationId, invitedUserEmail: Email): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RevokeUserOrganizationInvitation', {organizationId, invitedUserEmail});\n}\n\nexport const resendUserOrganizationInvitation = (organizationId: OrganizationId, invitedUserEmail: Email): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ResendUserOrganizationInvitation', {organizationId, invitedUserEmail});\n}\n\nexport const acceptInvitationToOrganization = (organizationId: OrganizationId, invitationId: OrganizationInvitationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AcceptInvitationToOrganization', {organizationId, invitationId});\n}\n\nexport const promoteUserToOrganizationAdmin = (organizationId: OrganizationId, userId: UserId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'PromoteUserToOrganizationAdmin', {organizationId, userId});\n}\n\nexport const demoteUserToOrganizationMember = (organizationId: OrganizationId, userId: UserId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'DemoteUserToOrganizationMember', {organizationId, userId});\n}\n\nexport const removeUserFromOrganization = (organizationId: OrganizationId, userId: UserId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RemoveUserFromOrganization', {organizationId, userId});\n}\n\nexport const renameOrganization = (organizationId: OrganizationId, newName: OrganizationName): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RenameOrganization', {organizationId, newName});\n}\n\nexport const removeGuestFromOrganization = (organizationId: OrganizationId, userId: UserId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RemoveGuestFromOrganization', {organizationId, userId});\n}\n\nexport const turnGuestIntoMember = (guestId: UserId, organizationId: OrganizationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'TurnGuestIntoMember', {guestId, organizationId});\n}\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {Email} from \"../../User/model/UserInfo\";\n\nexport const AGGREGATE_TYPE = 'OrganizationInvitation';\n\nexport type OrganizationInvitationId = string;\nexport type OrganizationInvitationError = string;\nexport enum Status {\n    open = 'open',\n    acknowledged = 'acknowledged',\n    revoked = 'revoked',\n}\n\nexport interface OrganizationInvitationProps {\n    uid: OrganizationInvitationId;\n    invitationId: OrganizationInvitationId;\n    invitedUserEmail: Email;\n    status: Status;\n    aggregateType: AggregateType;\n}\n\nexport const defaultOrganizationInvitationProps: OrganizationInvitationProps = {\n    uid: '',\n    invitationId: '',\n    invitedUserEmail: '',\n    status: Status.open,\n    aggregateType: AGGREGATE_TYPE,\n};\n\nexport const createOrganizationInvitation = (data: {invitationId: OrganizationInvitationId, invitedUserEmail: Email}) => {\n    return new OrganizationInvitation({\n        uid: data.invitationId,\n        invitationId: data.invitationId,\n        invitedUserEmail: data.invitedUserEmail,\n        status: Status.open,\n        aggregateType: AGGREGATE_TYPE\n    });\n}\n\nexport const createOrganizationInvitationFromServerData = (data: any): Either<OrganizationInvitationError, OrganizationInvitation> => {\n    const validatedData: Either<OrganizationInvitationError, any> = validate(data,\n        [hasKey('invitationId'), \"invitationId missing\"],\n        [hasKey('invitedUserEmail'), \"invitedUserEmail missing\"],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new OrganizationInvitation({\n        ...defaultOrganizationInvitationProps,\n        ...data,\n        uid: data.invitationId,\n    }));\n};\n\nexport class OrganizationInvitation extends Record(defaultOrganizationInvitationProps) implements OrganizationInvitationProps, Aggregate {\n    public constructor(data: OrganizationInvitationProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    // @TODO add use case methods to change state\n}\n","export const SET_UP_EXPLICIT_ORGANIZATION = '@@InspectioOrganizations/SetUpExplicitOrganization';\nexport const EXPLICIT_ORGANIZATION_SET_UP = '@@InspectioOrganizations/ExplicitOrganizationSetUp';\nexport const EXPLICIT_ORGANIZATION_SET_UP_FAILED = '@@InspectioOrganizations/ExplicitOrganizationSetUpFailed';\n\nexport const INVITE_USER_TO_ORGANIZATION = '@@InspectioOrganizations/InviteUserToOrganization';\nexport const USER_INVITED_TO_ORGANIZATION = '@@InspectioOrganizations/UserInvitedToOrganization';\nexport const REVOKE_USER_ORGANIZATION_INVITATION = '@@InspectioOrganizations/RevokeUserOrganizationInvitation';\nexport const RESEND_USER_ORGANIZATION_INVITATION = '@@InspectioOrganizations/ResendUserOrganizationInvitation';\nexport const USER_ORGANIZATION_INVITATION_REVOKED = '@@InspectioOrganizations/UserOrganizationInvitationRevoked';\nexport const USER_ORGANIZATION_INVITATION_RESENT = '@@InspectioOrganizations/UserOrganizationInvitationResent';\nexport const ACCEPT_INVITATION_TO_ORGANIZATION = '@@InspectioOrganizations/AcceptInvitationToOrganization';\nexport const INVITATION_TO_ORGANIZATION_ACCEPTED = '@@InspectioOrganizations/InvitationToOrganizationAccepted';\nexport const PROMOTE_USER_TO_ORGANIZATION_ADMIN = '@@InspectioOrganizations/PromoteUserToOrganizationAdmin';\nexport const USER_PROMOTED_TO_ORGANIZATION_ADMIN = '@@InspectioOrganizations/UserPromotedToOrganizationAdmin';\nexport const DEMOTE_USER_TO_ORGANIZATION_MEMBER = '@@InspectioOrganizations/DemoteUserToOrganizationMember';\nexport const USER_DEMOTED_TO_ORGANIZATION_MEMBER = '@@InspectioOrganizations/UserDemotedToOrganizationMember';\nexport const REMOVE_USER_FROM_ORGANIZATION = '@@InspectioOrganizations/RemoveUserFromOrganization';\nexport const USER_REMOVED_FROM_ORGANIZATION = '@@InspectioOrganizations/UserRemovedFromOrganization';\n\nexport const FETCH_ORGANIZATION = '@@InspectioOrganizations/FetchOrganization';\nexport const ORGANIZATION_FETCHED = '@@InspectioOrganizations/OrganizationFetched';\n\nexport const FETCH_USER_ORGANIZATIONS = '@@InspectioOrganizations/FetchUserOrganizations';\nexport const USER_ORGANIZATIONS_FETCHED = '@@InspectioOrganizations/UserOrganizationsFetched';\n\nexport const RENAME_ORGANIZATION = '@@InspectioOrganizations/RenameOrganization';\nexport const ORGANIZATION_RENAMED = '@@InspectioOrganizations/OrganizationRenamed';\n\nexport const REMOVE_GUEST_FROM_ORGANIZATION = '@@InspectioOrganizations/RemoveGuestFromOrganization';\nexport const GUEST_REMOVED_FROM_ORGANIZATION = '@@InspectioOrganizations/GuestRemovedFromOrganization';\n\nexport const TURN_GUEST_INTO_MEMBER = '@@InspectioOrganizations/TurnGuestIntoMember';\nexport const GUEST_TURNED_INTO_MEMBER = '@@InspectioOrganizations/GuestTurnedIntoMember';\n","import {action} from \"typesafe-actions\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {OrganizationId, OrganizationName} from \"../model/Organization\";\nimport {OrganizationInvitationId} from \"../model/OrganizationInvitation\";\nimport {\n    ACCEPT_INVITATION_TO_ORGANIZATION,\n    DEMOTE_USER_TO_ORGANIZATION_MEMBER,\n    INVITE_USER_TO_ORGANIZATION,\n    PROMOTE_USER_TO_ORGANIZATION_ADMIN, REMOVE_GUEST_FROM_ORGANIZATION,\n    REMOVE_USER_FROM_ORGANIZATION, RENAME_ORGANIZATION,\n    RESEND_USER_ORGANIZATION_INVITATION,\n    REVOKE_USER_ORGANIZATION_INVITATION,\n    SET_UP_EXPLICIT_ORGANIZATION, TURN_GUEST_INTO_MEMBER\n} from \"./constants\";\n\nexport const setUpExplicitOrganization = (organizationId: OrganizationId, name: OrganizationName) => action(SET_UP_EXPLICIT_ORGANIZATION, {organizationId, name});\n\nexport const inviteUserToOrganization = (organizationId: OrganizationId, invitedUserEmail: Email) => action(INVITE_USER_TO_ORGANIZATION, {organizationId, invitedUserEmail});\nexport const revokeUserOrganizationInvitation = (organizationId: OrganizationId, invitationId: OrganizationInvitationId, invitedUserEmail: Email) => action(REVOKE_USER_ORGANIZATION_INVITATION, {organizationId, invitationId, invitedUserEmail});\nexport const resendUserOrganizationInvitation = (organizationId: OrganizationId, invitationId: OrganizationInvitationId, invitedUserEmail: Email) => action(RESEND_USER_ORGANIZATION_INVITATION, {organizationId, invitationId, invitedUserEmail});\nexport const acceptInvitationToOrganization = (organizationId: OrganizationId, invitationId: OrganizationInvitationId) => action(ACCEPT_INVITATION_TO_ORGANIZATION, {organizationId, invitationId});\nexport const promoteUserToOrganizationAdmin = (organizationId: OrganizationId, userId: UserId) => action(PROMOTE_USER_TO_ORGANIZATION_ADMIN, {organizationId, userId});\nexport const demoteUserToOrganizationMember = (organizationId: OrganizationId, userId: UserId) => action(DEMOTE_USER_TO_ORGANIZATION_MEMBER, {organizationId, userId});\nexport const removeUserFromOrganization = (organizationId: OrganizationId, userId: UserId) => action(REMOVE_USER_FROM_ORGANIZATION, {organizationId, userId});\nexport const renameOrganization = (organizationId: OrganizationId, newName: OrganizationName) => action(RENAME_ORGANIZATION, {organizationId, newName});\nexport const removeGuestFromOrganization = (organizationId: OrganizationId, userId: UserId) => action(REMOVE_GUEST_FROM_ORGANIZATION, {organizationId, userId});\nexport const turnGuestIntoMember = (guestId: UserId, organizationId: OrganizationId) => action(TURN_GUEST_INTO_MEMBER, {guestId, organizationId});\n","import {List} from \"immutable\";\nimport {action} from \"typesafe-actions\";\nimport {Organization} from \"../model/Organization\";\nimport {OrganizationInvitation} from \"../model/OrganizationInvitation\";\nimport {UserOrganizationInfo} from \"../model/UserOrganizationInfo\";\nimport {\n    EXPLICIT_ORGANIZATION_SET_UP,\n    EXPLICIT_ORGANIZATION_SET_UP_FAILED,\n    GUEST_REMOVED_FROM_ORGANIZATION,\n    GUEST_TURNED_INTO_MEMBER,\n    INVITATION_TO_ORGANIZATION_ACCEPTED,\n    ORGANIZATION_FETCHED,\n    ORGANIZATION_RENAMED,\n    USER_DEMOTED_TO_ORGANIZATION_MEMBER,\n    USER_INVITED_TO_ORGANIZATION,\n    USER_ORGANIZATION_INVITATION_RESENT,\n    USER_ORGANIZATION_INVITATION_REVOKED,\n    USER_ORGANIZATIONS_FETCHED,\n    USER_PROMOTED_TO_ORGANIZATION_ADMIN,\n    USER_REMOVED_FROM_ORGANIZATION\n} from \"./constants\";\n\nexport const organizationFetched = (organization: Organization) => action(ORGANIZATION_FETCHED, organization);\nexport const explicitOrganizationSetUp = (organization: Organization) => action(EXPLICIT_ORGANIZATION_SET_UP, organization);\nexport const explicitOrganizationSetUpFailed = (organization: Organization) => action(EXPLICIT_ORGANIZATION_SET_UP_FAILED, organization);\nexport const userOrganizationsFetched = (userOrganizations: List<UserOrganizationInfo>) => action(USER_ORGANIZATIONS_FETCHED, userOrganizations);\nexport const userInvitedToOrganization = (organization: Organization) => action(USER_INVITED_TO_ORGANIZATION, organization);\nexport const userOrganizationInvitationRevoked = (invitation: OrganizationInvitation, organization: Organization) => action(USER_ORGANIZATION_INVITATION_REVOKED, {invitation, organization});\nexport const userOrganizationInvitationResent = (invitation: OrganizationInvitation, organization: Organization) => action(USER_ORGANIZATION_INVITATION_RESENT, {invitation, organization});\nexport const invitationToOrganizationAccepted = (organization: Organization) => action(INVITATION_TO_ORGANIZATION_ACCEPTED, organization);\nexport const userPromotedToOrganizationAdmin = (organization: Organization) => action(USER_PROMOTED_TO_ORGANIZATION_ADMIN, organization);\nexport const userDemotedToOrganizationMember = (organization: Organization) => action(USER_DEMOTED_TO_ORGANIZATION_MEMBER, organization);\nexport const userRemovedFromOrganization = (organization: Organization) => action(USER_REMOVED_FROM_ORGANIZATION, organization);\nexport const organizationRenamed = (organization: Organization) => action(ORGANIZATION_RENAMED, organization);\nexport const guestRemovedFromOrganization = (organization: Organization) => action(GUEST_REMOVED_FROM_ORGANIZATION, organization);\nexport const guestTurnedIntoMember = (organization: Organization) => action(GUEST_TURNED_INTO_MEMBER, organization);\n","import {action} from \"typesafe-actions\";\nimport {FETCH_ORGANIZATION, FETCH_USER_ORGANIZATIONS} from \"./constants\";\n\nexport const fetchOrganization = (organizationId: string) => action(FETCH_ORGANIZATION, { organizationId });\n\nexport const fetchUserOrganizations = () => action(FETCH_USER_ORGANIZATIONS, {});\n","import {List, Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, isSuccess, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {BoardId} from \"../../InspectioBoards/model/Board\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {\n    createOrganizationInvitation,\n    createOrganizationInvitationFromServerData,\n    OrganizationInvitation,\n    OrganizationInvitationId\n} from \"./OrganizationInvitation\";\n\nexport type OrganizationId = string;\nexport type OrganizationName = string;\nexport type OrganizationMemberQuota = number;\nexport type OrganizationBoardQuota = number;\nexport type OrganizationMembers = List<UserId>;\nexport type OrganizationAdmins = List<UserId>;\nexport type OrganizationGuests = List<UserId>;\nexport type OrganizationBoards = List<BoardId>;\nexport type OrganizationInvitations = List<OrganizationInvitation>;\n\nexport type OrganizationValidationError = string;\n\nexport const AGGREGATE_TYPE = 'Organization';\n\n\nexport interface OrganizationProps {\n    uid: OrganizationId;\n    ownerId: UserId;\n    name: OrganizationName;\n    explicit: boolean;\n    memberQuota: OrganizationMemberQuota;\n    boardQuota: OrganizationBoardQuota;\n    members: OrganizationMembers;\n    admins: OrganizationAdmins;\n    guests: OrganizationGuests;\n    boards: OrganizationBoards;\n    invitations: OrganizationInvitations;\n    aggregateType: AggregateType;\n}\n\nexport const defaultOrganizationProps: OrganizationProps = {\n    uid: '',\n    ownerId: '',\n    name: '',\n    explicit: false,\n    memberQuota: 0,\n    boardQuota: 0,\n    members: List(),\n    admins: List(),\n    boards: List(),\n    guests: List(),\n    invitations: List(),\n    aggregateType: AGGREGATE_TYPE,\n};\n\nexport const createOrganizationFromServerData = (data: any): Either<OrganizationValidationError, Organization> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('organizationId'), \"organizationId missing\"],\n        [hasKey('ownerId'), `ownerId missing in ${data.organizationId}`],\n        [hasKey('name'), `name missing in ${data.organizationId}`],\n        [hasKey('explicit'), `explicit missing in ${data.organizationId}`],\n        [hasKey('memberQuota'), `memberQuota missing in ${data.organizationId}`],\n        [hasKey('boardQuota'), `boardQuota missing in ${data.organizationId}`],\n        [hasKey('members'), `members missing in ${data.organizationId}`],\n        [hasKey('admins'), `admins missing in ${data.organizationId}`],\n        [hasKey('boards'), `boards missing in ${data.organizationId}`],\n        [hasKey('guests'), `guests missing in ${data.organizationId}`],\n        [hasKey('invitations'), `invitations missing in ${data.organizationId}`],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    const invitations = [];\n    let invitation: any;\n\n    for(invitation of data.invitations) {\n        const result = createOrganizationInvitationFromServerData(invitation);\n\n        if(isFailure(result)) {\n            return result;\n        }\n\n        if(isSuccess(result)) {\n            invitations.push(result.value)\n        }\n    }\n\n    return Success(new Organization({\n        uid: data.organizationId,\n        ownerId: data.ownerId,\n        name: data.name,\n        explicit: data.explicit,\n        memberQuota: data.memberQuota,\n        boardQuota: data.boardQuota,\n        members: List(data.members),\n        admins: List(data.admins),\n        guests: List(data.guests),\n        boards: List(data.boards),\n        invitations: List(invitations),\n        aggregateType: AGGREGATE_TYPE,\n    }));\n};\n\nexport class Organization extends Record(defaultOrganizationProps) implements OrganizationProps, Aggregate {\n    public constructor(data: OrganizationProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    public isAdmin(userId: UserId): boolean {\n        return this.ownerId === userId || this.admins.includes(userId);\n    }\n\n    public setUpAsExplicit(name: OrganizationName): Organization {\n        const orga = this.set('explicit', true);\n        return orga.set('name', name);\n    }\n\n    public inviteUser(invitationId: OrganizationInvitationId, email: Email): Organization {\n        return this.set('invitations', this.invitations.push(\n            createOrganizationInvitation({invitationId, invitedUserEmail: email})\n        ));\n    }\n\n    public promoteAdmin(userId: UserId): Organization {\n        return this.set('admins', this.admins.push(userId));\n    }\n\n    public demoteToMember(userId: UserId): Organization {\n        return this.set('admins', this.admins.filter(admin => admin !== userId));\n    }\n\n    public revokeInvitation(invitationId: OrganizationInvitationId): Organization {\n        return this.set('invitations', this.invitations.filter(invitation => invitation.invitationId !== invitationId));\n    }\n\n    public removeUser(userId: UserId): Organization {\n        let self = this;\n        self = self.set('admins', self.get('admins', List()).filter(adminId => adminId !== userId));\n        self = self.set('members', self.get('members', List()).filter(memberId => memberId !== userId));\n        self = self.set('memberQuota', self.get('memberQuota', 0) + 1);\n        return self;\n    }\n\n    public removeGuest(userId: UserId): Organization {\n        let self = this;\n        self = self.set('guests', self.get('guests', List()).filter(guestId => guestId !== userId));\n        self = self.set('memberQuota', self.get('memberQuota', 0) + 1);\n        return self;\n    }\n\n    public turnGuestIntoMember(guestId: UserId): Organization {\n        const newGuests = this.guests.filter(guest => guest !== guestId);\n        const newMembers = this.members.push(guestId);\n        return this.set('guests', newGuests).set('members', newMembers);\n    }\n\n    public withNewName(name: OrganizationName): Organization {\n        return this.set('name', name);\n    }\n}\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {OrganizationId} from \"./Organization\";\n\nexport const AGGREGATE_TYPE = 'UserOrganizationInfo';\n\nexport type UserOrganizationInfoError = string;\n\nexport interface UserOrganizationInfoProps {\n    uid: OrganizationId;\n    organizationId: OrganizationId;\n    userId: UserId;\n    organizationName: string;\n    ownOrganization: boolean;\n    explicitOrganization: boolean;\n    userIsAdmin: boolean;\n    userIsGuest: boolean;\n    aggregateType: AggregateType;\n}\n\nexport const defaultUserOrganizationInfoProps: UserOrganizationInfoProps = {\n    uid: '',\n    organizationId: '',\n    userId: '',\n    organizationName: '',\n    ownOrganization: false,\n    explicitOrganization: false,\n    userIsAdmin: false,\n    userIsGuest: true,\n    aggregateType: AGGREGATE_TYPE,\n};\n\nexport const createUserOrganizationInfoFromServerData = (data: any): Either<UserOrganizationInfoError, UserOrganizationInfo> => {\n    const validatedData: Either<UserOrganizationInfoError, any> = validate(data,\n        [hasKey('organizationId'), \"organizationId missing\"],\n        [hasKey('userId'), \"userId missing\"],\n        [hasKey('organizationName'), \"organizationName missing\"],\n        [hasKey('ownOrganization'), \"ownOrganization missing\"],\n        [hasKey('explicitOrganization'), \"explicitOrganization missing\"],\n        [hasKey('userIsAdmin'), \"userIsAdmin missing\"],\n        [hasKey('userIsGuest'), \"userIsGuest missing\"],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new UserOrganizationInfo({\n        ...defaultUserOrganizationInfoProps,\n        ...data,\n        uid: data.organizationId,\n    }));\n};\n\nexport class UserOrganizationInfo extends Record(defaultUserOrganizationInfoProps) implements UserOrganizationInfoProps, Aggregate {\n    public constructor(data: UserOrganizationInfoProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    // @TODO add use case methods to change state\n}\n","import {List, Map} from \"immutable\";\nimport {Aggregate, AggregateType} from \"../model/Aggregate\";\n\nexport interface AggregateMap<T> extends Map<string, Aggregate & T>{}\n\nexport function initialAggregateState<T>(): AggregateMap<T> {\n    return Map<string, Aggregate & T>();\n}\n\nexport function addAggregate<T>(state: AggregateMap<T>, ar: Aggregate & T): AggregateMap<T> {\n    return state.set(ar.uid, ar);\n}\n\nexport function updateAggregate<T>(state: AggregateMap<T>, ar: Aggregate & T): AggregateMap<T> {\n    return state.set(ar.uid, ar);\n}\n\nexport function removeAggregate<T>(state: AggregateMap<T>, ar: Aggregate & T): AggregateMap<T> {\n    return state.remove(ar.uid);\n}\n\nexport function upsertAggregates<T>(state: AggregateMap<T>, arList: List<Aggregate & T>): AggregateMap<T> {\n    for(const ar of arList.toArray()) {\n        state = updateAggregate(state, ar);\n    }\n    return state;\n}\n\nexport function removeAggregates<T>(state: AggregateMap<T>, arList: List<Aggregate & T>): AggregateMap<T> {\n    for(const ar of arList.toArray()) {\n        state = removeAggregate(state, ar);\n    }\n\n    return state;\n}\n\nexport function removeAllAggregates<T>(state: AggregateMap<T>): AggregateMap<T> {\n    return initialAggregateState();\n}\n\n\n\n\n\n\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {addAggregate, updateAggregate} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    EXPLICIT_ORGANIZATION_SET_UP,\n    EXPLICIT_ORGANIZATION_SET_UP_FAILED,\n    GUEST_REMOVED_FROM_ORGANIZATION,\n    GUEST_TURNED_INTO_MEMBER,\n    ORGANIZATION_FETCHED,\n    ORGANIZATION_RENAMED,\n    USER_DEMOTED_TO_ORGANIZATION_MEMBER,\n    USER_INVITED_TO_ORGANIZATION,\n    USER_ORGANIZATION_INVITATION_REVOKED,\n    USER_PROMOTED_TO_ORGANIZATION_ADMIN,\n    USER_REMOVED_FROM_ORGANIZATION\n} from \"../actions/constants\";\nimport {Organization} from '../model';\nimport {InspectioOrganizationEvent} from './index';\n\nexport interface OrganizationsState extends Map<string, Organization.Organization> {\n}\n\nexport const initialState: OrganizationsState = Map<string, Organization.Organization>();\n\nconst reducer: Reducer<OrganizationsState, InspectioOrganizationEvent> =\n    (state: OrganizationsState = initialState, event: InspectioOrganizationEvent): OrganizationsState => {\n    switch (event.type) {\n        case ORGANIZATION_FETCHED:\n            return addAggregate(state, event.payload);\n        case EXPLICIT_ORGANIZATION_SET_UP:\n        case EXPLICIT_ORGANIZATION_SET_UP_FAILED:\n        case USER_INVITED_TO_ORGANIZATION:\n        case USER_PROMOTED_TO_ORGANIZATION_ADMIN:\n        case USER_DEMOTED_TO_ORGANIZATION_MEMBER:\n        case USER_REMOVED_FROM_ORGANIZATION:\n        case GUEST_REMOVED_FROM_ORGANIZATION:\n        case ORGANIZATION_RENAMED:\n        case GUEST_TURNED_INTO_MEMBER:\n            return updateAggregate(state, event.payload);\n        case USER_ORGANIZATION_INVITATION_REVOKED:\n            return updateAggregate(state, event.payload.organization);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveOrganizationReducer };\n","import {List, Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {USER_ORGANIZATION_INVITATION_RESENT, USER_ORGANIZATION_INVITATION_REVOKED} from \"../actions/constants\";\nimport * as Events from \"../actions/events\";\nimport {OrganizationInvitation} from \"../model/OrganizationInvitation\";\n\ntype Event = ActionType<typeof Events>;\n\nexport interface OrganizationInvitationState extends Map<string, OrganizationInvitation> {\n}\n\nexport const initialState: OrganizationInvitationState = Map<string, OrganizationInvitation>();\n\nconst reducer: Reducer<OrganizationInvitationState, Event> = (state: OrganizationInvitationState = initialState, event: Event): OrganizationInvitationState => {\n    switch (event.type) {\n        case USER_ORGANIZATION_INVITATION_RESENT:\n        case USER_ORGANIZATION_INVITATION_REVOKED:\n            return upsertAggregates(state, List([event.payload.invitation]));\n        default:\n            return state;\n    }\n};\n\nexport {reducer as saveOrganizationInvitationReducer};\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {updateAggregate, upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    EXPLICIT_ORGANIZATION_SET_UP,\n    EXPLICIT_ORGANIZATION_SET_UP_FAILED,\n    ORGANIZATION_RENAMED,\n    USER_ORGANIZATIONS_FETCHED\n} from \"../actions/constants\";\nimport * as Events from \"../actions/events\";\nimport {UserOrganizationInfo} from \"../model/UserOrganizationInfo\";\n\ntype Event = ActionType<typeof Events>;\n\nexport interface UserOrganizationInfoState extends Map<string, UserOrganizationInfo> {\n}\n\nexport const initialState: UserOrganizationInfoState = Map<string, UserOrganizationInfo>();\n\nconst reducer: Reducer<UserOrganizationInfoState, Event> = (state: UserOrganizationInfoState = initialState, event: Event): UserOrganizationInfoState => {\n    switch (event.type) {\n        case USER_ORGANIZATIONS_FETCHED:\n            return upsertAggregates(state, event.payload);\n        case EXPLICIT_ORGANIZATION_SET_UP:\n            const implOrga = state.get(event.payload.uid);\n            if(implOrga) {\n                return updateAggregate(state, implOrga.set('organizationName', event.payload.name).set('explicitOrganization', true))\n            } else {\n                return state;\n            }\n        case EXPLICIT_ORGANIZATION_SET_UP_FAILED:\n            const resetOrga = state.get(event.payload.uid);\n            if(resetOrga) {\n                return updateAggregate(state, resetOrga.set('organizationName', event.payload.name).set('explicitOrganization', false))\n            } else {\n                return state;\n            }\n        case ORGANIZATION_RENAMED:\n            const renamedOrga = state.get(event.payload.uid);\n            if(renamedOrga) {\n                return updateAggregate(state, renamedOrga.set('organizationName', event.payload.name));\n            } else {\n                return state;\n            }\n        default:\n            return state;\n    }\n};\n\nexport {reducer as saveUserOrganizationInfoReducer};\n","import {fromJS} from \"immutable\";\nimport { combineReducers } from 'redux-immutable';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Events from \"../actions/events\";\nimport {saveOrganizationReducer} from \"./applyOrganizationEvents\";\nimport {saveOrganizationInvitationReducer} from \"./applyOrganizationInvitationEvents\";\nimport {saveUserOrganizationInfoReducer} from \"./applyUserOrganizationInfoEvents\";\n\nexport type InspectioOrganizationEvent = ActionType<typeof Events>;\n\nexport interface InspectioOrganizationsState {\n}\n\nexport const inspectioOrganizationsReducer = combineReducers<InspectioOrganizationsState, InspectioOrganizationEvent>({\n    Organization: saveOrganizationReducer,\n    UserOrganizationInfo: saveUserOrganizationInfoReducer,\n    OrganizationInvitation: saveOrganizationInvitationReducer,\n}, () => fromJS({\n    Organization: undefined,\n    UserOrganizationInfo: undefined,\n    OrganizationInvitation: undefined,\n}));\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.demoteUserToOrganizationMember>\n\nfunction* handleDemoteUserToOrganizationMember(command: Command) {\n    const {response, error} = yield call(Action.Api.demoteUserToOrganizationMember, command.payload.organizationId, command.payload.userId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not demote user to organization member.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userDemotedToOrganizationMember(organization.demoteToMember(command.payload.userId)));\n\n        yield put(NotifyAction.Command.info('User demoted', 'The user is no longer an admin of the organization.'));\n    }\n}\n\nexport function* demoteUserToOrganizationMember() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.DEMOTE_USER_TO_ORGANIZATION_MEMBER\n        ]);\n\n        yield fork(handleDemoteUserToOrganizationMember, command);\n    }\n}\n","import { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {exec, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport { Action as UserAction } from '../../User';\nimport * as Action from '../actions';\nimport {createOrganizationFromServerData} from \"../model/Organization\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchOrganization>;\n\nconst onFetchOrganization = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchOrganization, action.payload.organizationId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not fetch organization'));\n    }\n\n    if (response) {\n        const result = pipe(\n            response.data,\n            exec((data: any) => createOrganizationFromServerData(data)),\n        );\n\n        if (isFailure(result)) {\n            console.error(\"Invalid organization response: \", result.value);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load organization'));\n        }\n\n        if (isSuccess(result)) {\n            yield put(Action.Event.organizationFetched(result.value));\n            yield put(UserAction.Query.loadUsersInfo([result.value.ownerId, ...result.value.members.toJS(), ...result.value.guests.toJS()]));\n        }\n    }\n};\n\nexport function* fetchOrganizationFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.FETCH_ORGANIZATION\n        ]);\n\n        yield fork(onFetchOrganization, action);\n    }\n}\n","import {List} from \"immutable\";\nimport {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport uuid from \"uuid\";\nimport {ResponseType} from \"../../api/util\";\nimport * as Auth from '../../Auth';\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as UserModule from \"../../User\";\nimport {Action} from \"../index\";\nimport {createUserOrganizationInfoFromServerData} from \"../model/UserOrganizationInfo\";\nimport v4 from \"uuid/v4\";\n\ntype Query = ActionType<typeof Action.Query.fetchUserOrganizations> | ActionType<typeof Auth.Action.Type.USER_AUTHENTICATED>;\n\nlet implicitOrgaSetup = false;\n\nfunction* handleFetchUserOrganizations(query: Query) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchUserOrganizations);\n\n    if (error) {\n        if(error.status === 404) {\n            const installResponse = yield call(Action.Api.setUpImplicitOrganization, v4());\n\n            if(installResponse.error) {\n                yield put(NotifyAction.Command.error('Request Error', 'Could not install user organization'));\n            }\n\n            if(installResponse.response) {\n                yield put(Action.Query.fetchUserOrganizations());\n            }\n        } else {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not fetch user organizations'));\n        }\n\n    }\n\n    if (response) {\n        const result = pipe(\n            response.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                return createUserOrganizationInfoFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load user organizations'));\n        }\n\n        if (isSuccess(result)) {\n            if(result.value.length) {\n                const organizations = List(result.value);\n\n                yield put(Action.Event.userOrganizationsFetched(organizations));\n\n                const currentUser = yield select(UserModule.UserSelector.makeGetCurrentUser());\n\n                // Automatically switch to personal workspace if only organization is own implicit one\n                // Can be the case: a) after migration; b) member removed from organization\n                if(currentUser.activeOrganization === null\n                    && organizations.count() === 1\n                    && !organizations.first({explicitOrganization: false}).explicitOrganization) {\n                    yield put(UserModule.Action.Command.switchActiveOrganization(organizations.first({organizationId: null}).organizationId));\n                }\n\n                const updatedCurrentUser = yield select(UserModule.UserSelector.makeGetCurrentUser());\n\n                if(updatedCurrentUser.activeOrganization) {\n                    yield put(Action.Query.fetchOrganization(updatedCurrentUser.activeOrganization));\n                }\n            } else if(!implicitOrgaSetup) {\n                implicitOrgaSetup = true;\n                const organizationId = uuid.v4();\n                const installUserOrganization: ResponseType = yield call(Action.Api.installUserOrganization, organizationId);\n\n                if (installUserOrganization.error) {\n                    yield put(NotifyAction.Command.error('Request Error', 'Could not initialize organization.'));\n                }\n\n                if (installUserOrganization.response) {\n                    yield put(Action.Query.fetchUserOrganizations());\n                }\n            }\n        }\n    }\n}\n\nexport function* fetchUserOrganizations() {\n    while (true) {\n        const query: Query = yield take([\n            Action.Type.FETCH_USER_ORGANIZATIONS\n        ]);\n\n        yield fork(handleFetchUserOrganizations, query);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport v4 from \"uuid/v4\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.inviteUserToOrganization>\n\nfunction* handleInviteUserToOrganization(command: Command) {\n    const invitationId = v4();\n    const {response, error} = yield call(Action.Api.inviteUserToOrganization, command.payload.organizationId, invitationId, command.payload.invitedUserEmail);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not invite user to organization.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userInvitedToOrganization(organization.inviteUser(invitationId, command.payload.invitedUserEmail)));\n\n        yield put(NotifyAction.Command.info('User invited', 'The user was invited to the organization.'));\n    }\n}\n\nexport function* inviteUserToOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.INVITE_USER_TO_ORGANIZATION\n        ]);\n\n        yield fork(handleInviteUserToOrganization, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.promoteUserToOrganizationAdmin>\n\nfunction* handlePromoteUserToOrganizationAdmin(command: Command) {\n    const {response, error} = yield call(Action.Api.promoteUserToOrganizationAdmin, command.payload.organizationId, command.payload.userId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not promote user to organization admin.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userPromotedToOrganizationAdmin(organization.promoteAdmin(command.payload.userId)));\n\n        yield put(NotifyAction.Command.info('User promoted', 'The user is now an admin of the organization.'));\n    }\n}\n\nexport function* promoteUserToOrganizationAdmin() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.PROMOTE_USER_TO_ORGANIZATION_ADMIN\n        ]);\n\n        yield fork(handlePromoteUserToOrganizationAdmin, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.removeGuestFromOrganization>\n\nfunction* handleRemoveGuestFromOrganization(command: Command) {\n    const {response, error} = yield call(Action.Api.removeGuestFromOrganization, command.payload.organizationId, command.payload.userId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not remove guest from organization.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.guestRemovedFromOrganization(organization.removeGuest(command.payload.userId)));\n\n        yield put(NotifyAction.Command.info('Guest removed', 'The guest no longer has access to organization boards and teams.'));\n    }\n}\n\nexport function* removeGuestFromOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.REMOVE_GUEST_FROM_ORGANIZATION\n        ]);\n\n        yield fork(handleRemoveGuestFromOrganization, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.removeUserFromOrganization>\n\nfunction* handleRemoveUserFromOrganization(command: Command) {\n    const {response, error} = yield call(Action.Api.removeUserFromOrganization, command.payload.organizationId, command.payload.userId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not remove user from organization.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userRemovedFromOrganization(organization.removeUser(command.payload.userId)));\n\n        yield put(NotifyAction.Command.info('User removed', 'The user is no longer member of the organization.'));\n    }\n}\n\nexport function* removeUserFromOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.REMOVE_USER_FROM_ORGANIZATION\n        ]);\n\n        yield fork(handleRemoveUserFromOrganization, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.renameOrganization>\n\nfunction* handleRenameOrganization(command: Command) {\n    const {response, error} = yield call(Action.Api.renameOrganization, command.payload.organizationId, command.payload.newName);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not rename organization.'));\n    }\n\n    if(response) {\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.organizationRenamed(organization.withNewName(command.payload.newName)));\n\n        yield put(NotifyAction.Command.info('Organization renamed', 'Renaming organization was successful.'));\n    }\n}\n\nexport function* renameOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.RENAME_ORGANIZATION\n        ]);\n\n        yield fork(handleRenameOrganization, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../index\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {createOrganizationInvitation, Status} from \"../model/OrganizationInvitation\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.resendUserOrganizationInvitation>\n\nfunction* handleResendUserOrganizationInvitation(command: Command) {\n    const {response, error} = yield call(Action.Api.resendUserOrganizationInvitation, command.payload.organizationId, command.payload.invitedUserEmail);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not resend invitation.'));\n    }\n\n    if(response) {\n        const invitation = createOrganizationInvitation({\n            invitationId: command.payload.invitationId,\n            invitedUserEmail: command.payload.invitedUserEmail,\n        });\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userOrganizationInvitationResent(\n            invitation,\n            organization\n        ));\n        yield put(NotifyAction.Command.info('User invited', 'Invitation was sent again.'));\n    }\n}\n\nexport function* resendUserOrganizationInvitation() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.RESEND_USER_ORGANIZATION_INVITATION\n        ]);\n\n        yield fork(handleResendUserOrganizationInvitation, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {createOrganizationInvitation, Status} from \"../model/OrganizationInvitation\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\n\ntype Command = ActionType<typeof Action.Command.revokeUserOrganizationInvitation>\n\nfunction* handleRevokeUserOrganizationInvitation(command: Command) {\n    const {response, error} = yield call(Action.Api.revokeUserOrganizationInvitation, command.payload.organizationId, command.payload.invitedUserEmail);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not revoke invitation.'));\n    }\n\n    if(response) {\n        const invitation = createOrganizationInvitation({\n            invitationId: command.payload.invitationId,\n            invitedUserEmail: command.payload.invitedUserEmail,\n        });\n        const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n        yield put(Action.Event.userOrganizationInvitationRevoked(\n            invitation.set('status', Status.revoked),\n            organization.revokeInvitation(invitation.invitationId)\n        ));\n    }\n}\n\nexport function* revokeUserOrganizationInvitation() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.REVOKE_USER_ORGANIZATION_INVITATION\n        ]);\n\n        yield fork(handleRevokeUserOrganizationInvitation, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\n\ntype Command = ActionType<typeof Action.Command.setUpExplicitOrganization>\n\nfunction* handleSetUpExplicitOrganization(command: Command) {\n    const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n    if(organization) {\n        const explicitOrganization = organization.setUpAsExplicit(command.payload.name);\n\n        yield put(Action.Event.explicitOrganizationSetUp(explicitOrganization));\n\n        const {response, error}: ResponseType = yield call(Action.Api.setUpExplicitOrganization, command.payload.organizationId, command.payload.name);\n\n        if(error) {\n            yield put(Action.Event.explicitOrganizationSetUpFailed(organization));\n            yield put(NotifyAction.Command.error('Request Error', 'Could not create organization.'));\n        }\n\n        if(response) {\n            yield put(NotifyAction.Command.info('Organization created', 'Organization created successfully'));\n        }\n    }\n}\n\nexport function* setUpExplicitOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.SET_UP_EXPLICIT_ORGANIZATION\n        ]);\n\n        yield fork(handleSetUpExplicitOrganization, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../index\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\n\ntype Command = ActionType<typeof Action.Command.turnGuestIntoMember>\n\nfunction* handleTurnGuestIntoMember(command: Command) {\n    const organization = yield select(makeOrganizationSelector(command.payload.organizationId));\n\n    if(organization) {\n        const {response, error}: ResponseType = yield call(Action.Api.turnGuestIntoMember, command.payload.guestId, command.payload.organizationId);\n\n        if(error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not turn guest into member.'));\n        }\n\n        if(response) {\n            yield put(NotifyAction.Command.info('Member added', 'Guest turned into member.'));\n            yield put(Action.Event.guestTurnedIntoMember(organization.turnGuestIntoMember(command.payload.guestId)));\n        }\n    }\n}\n\nexport function* turnGuestIntoMember() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.TURN_GUEST_INTO_MEMBER\n        ]);\n\n        yield fork(handleTurnGuestIntoMember, command);\n    }\n}\n","import * as Action from \"./actions\";\nimport * as Model from \"./model\";\nimport * as Reducer from \"./reducers\";\nimport * as Saga from \"./sagas\";\n\nconst MODULE = 'inspectioOrganizations';\n\nexport {\n    MODULE,\n    Action,\n    Model,\n    Reducer,\n    Saga,\n};\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as OrganizationModule from \"../../Organization\";\nimport {Action} from \"../index\";\nimport {makeGetCurrentUser} from \"../selectors/currentUser\";\n\ntype Command = ActionType<typeof Action.Command.switchActiveOrganization>\n\nfunction* handleSwitchActiveOrganization(command: Command) {\n    let user = yield select(makeGetCurrentUser());\n    const {response, error}: ResponseType = yield call(Action.Api.switchActiveOrganization, user.uid, command.payload.organizationId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not switch active organization.'));\n    }\n    if (response) {\n        user = user.set('activeOrganization', command.payload.organizationId);\n        yield put(Action.Event.activeOrganizationSwitched(user));\n        if(command.payload.organizationId) {\n            yield put(OrganizationModule.Action.Query.fetchOrganization(command.payload.organizationId));\n        }\n    }\n}\n\nexport function* switchActiveOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.SWITCH_ACTIVE_ORGANIZATION\n        ]);\n\n        yield fork(handleSwitchActiveOrganization, command);\n    }\n}\n","import {List, Record} from 'immutable';\nimport { createSelector } from 'reselect';\nimport { ApplicationState } from '../../reducer';\nimport {IioUserInfo} from \"../model/IioUserInfo\";\nimport {UserId} from \"../model/UserInfo\";\n\nexport const getIioUserInfoById = (state: Record<ApplicationState>, userId: UserId): IioUserInfo|undefined => state.getIn(['inspectioUsers', 'iioUsersInfo', userId]);\n\nexport const makeGetIioUserInfoByIdSelector = (userId: UserId): (state: Record<ApplicationState>, props?: any) => IioUserInfo|undefined => (state: Record<ApplicationState>) => getIioUserInfoById(state, userId);\n\nexport const iioUserListSelector = (state: Record<ApplicationState>, props: any): List<IioUserInfo> =>\n    List(state.getIn(['inspectioUsers', 'iioUsersInfo']).toIndexedSeq().toArray()) || List();\n\nexport const makeIioUserListSelector = (): (state: Record<ApplicationState>, props?: any) => List<IioUserInfo> => {\n    return createSelector(\n        [iioUserListSelector],\n        (users): List<IioUserInfo> =>  {\n            return users;\n        }\n    )\n};\n\nexport const makeIioFilteredUserListSelector = (userIdList: List<UserId>): (state: Record<ApplicationState>, props?: any) => List<IioUserInfo> => {\n    return createSelector(\n        [iioUserListSelector],\n        (users): List<IioUserInfo> => {\n            return users.filter((info) => {\n                return userIdList.contains(info.userId);\n            })\n        }\n    )\n};\n","import { call, fork, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport * as Action from \"../actions\";\nimport {UserInfo} from \"../model/UserInfo\";\nimport {UserSelector} from \"../selectors\";\n\ntype FlowAction = ActionType<typeof Action.Command.signIn>;\n\nfunction* onUserAuthenticated(action: FlowAction) {\n    const user: UserInfo = yield select(UserSelector.currentUserSelector, undefined);\n\n    if(user.displayName) {\n         yield call(Action.Api.syncUsername, user.uid, user.displayName, user.email, user.avatarUrl, user.jobTitle);\n    }\n}\n\nexport function* syncUsername() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.SIGN_IN\n        ]);\n\n        yield fork(onUserAuthenticated, action)\n    }\n}","import { call, fork, put, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\nimport {UserInfo} from \"../model/UserInfo\";\nimport {UserSelector} from \"../selectors\";\n\ntype FlowAction = ActionType<typeof Action.Command.updateProfile>;\ntype UpdatePasswordFlowAction = ActionType<typeof Action.Command.updatePassword>;\n\nfunction* onUpdateProfile(action: FlowAction) {\n    const user: UserInfo = yield select(UserSelector.currentUserSelector, undefined);\n\n    if(user.name) {\n        const {response, error}: ResponseType = yield call(Action.Api.updateProfile, user);\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not update profile with new profile picture.'));\n        }\n\n        if(response) {\n            if(user.displayName) {\n                yield call(Action.Api.syncUsername, user.uid, user.displayName, user.email, user.avatarUrl, user.jobTitle);\n            }\n            yield put(NotifyAction.Command.info('Profile Saved', 'Your profile has been saved'));\n            action.payload.successCb();\n        }\n    }\n}\n\nexport function* updateProfile() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.UPDATE_PROFILE\n        ]);\n\n        yield fork(onUpdateProfile, action)\n    }\n}\n\nfunction* onUpdatePassword(action: UpdatePasswordFlowAction) {\n    const user: UserInfo = yield select(UserSelector.currentUserSelector, undefined);\n    const pass: string = action.payload.password;\n\n    if (user.uid) {\n        const {response, error}: ResponseType = yield call(Action.Api.updatePassword, user.uid, pass);\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not change password.'));\n        }\n        if (response) {\n            yield put(NotifyAction.Command.info('Password changed', 'Password was changed successfully.'));\n        }\n    }\n}\n\nexport function* updatePassword() {\n    while (true) {\n        const action: UpdatePasswordFlowAction = yield take([\n            Action.Type.UPDATE_PASSWORD\n        ]);\n\n        yield fork(onUpdatePassword, action)\n    }\n}","import { call, actionChannel, fork, put, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Action from \"../actions\";\nimport {ResponseType} from \"../../api/util\";\n\ntype FlowAction = ActionType<typeof Action.Command.upsertUserSetting>;\n\nfunction* onUpsertUserSetting(action: FlowAction) {\n\n    // Trigger the event immediately since its not the end of the world if the request fails\n    yield put(Action.Event.userSettingUpserted(action.payload.key, action.payload.value));\n\n    const {response, error}: ResponseType = yield call(\n        Action.Api.upsertUserSetting,\n        action.payload.key,\n        action.payload.value\n    );\n\n    if (error) {\n        /* tslint:disable-next-line:no-console */\n        console.log(`Failed updating user setting for ${action.payload.key} and ${action.payload.value}`);\n    }\n}\n\nexport function* upsertUserSetting() {\n    // Execute user setting upserts one after another to prevent race conditions\n    const requestChan = yield actionChannel(Action.Type.UPSERT_USER_SETTING);\n\n    while (true) {\n        const action: FlowAction = yield take(requestChan);\n\n        yield call(onUpsertUserSetting, action)\n    }\n}\n","import {List, Map, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport * as User from \"../../User\";\nimport {MODULE} from \"../index\";\nimport {Organization, OrganizationId} from \"../model/Organization\";\n\nexport const getOrganizationById = (state: Record<ApplicationState>, uid: OrganizationId): Organization|undefined =>\n    state.getIn([MODULE, 'Organization', uid]);\n\nexport const makeOrganizationSelector = (organizationId: OrganizationId | null): (state: Record<ApplicationState>) => Organization|undefined =>\n    (state: Record<ApplicationState>) => organizationId ? getOrganizationById(state, organizationId) : undefined;\n\nexport const getOrganizationList = (state: Record<ApplicationState>): List<Organization> => state.getIn([MODULE, 'Organization']).toList();\n\nexport const makeOrganizationListSelector = (): (state: Record<ApplicationState>) => List<Organization> =>\n    (state: Record<ApplicationState>) => getOrganizationList(state);\n\nexport const makeActiveOrganizationSelector = (): (state: Record<ApplicationState>, props?: any) => Organization | undefined => {\n    return createSelector(\n        [getOrganizationList, User.UserSelector.currentUserSelector],\n        (organizations, currentUser): Organization | undefined => {\n            if(currentUser.activeOrganization === null) {\n                return;\n            }\n\n            return organizations.find(orga => orga.uid === currentUser.activeOrganization);\n        }\n    )\n}\n","import {List, Record} from \"immutable\";\nimport {DeepLinkFactory} from \"../../routes\";\nimport {HistoryCellType} from \"./HistoryEntry\";\n\n// Todo: Customized mxgraph js files are currently imported as scripts because they rely on globals. We need to change that!\ndeclare const inspectioUtils: {getTypeInclEdge: (cell: any) => HistoryCellType | false, getLabelText: (cell: any) => string, getLabelSecondaryText: (cell: any) => string, isContainer: (cell: any) => boolean, getTags:(cell: any) => string[], getMetadata: (cell: any) => string | undefined};\ndeclare const mxUtils: {getValue: (style: any, prop: string, defaultVal: string) => string; createXmlDocument: () => any; getXml: (node: any) => string};\ndeclare const mxEvent: {CHANGE: string};\ndeclare const MXGRAPH_ROOT_UUIDS: string[];\n// tslint:disable-next-line:class-name\ndeclare class mxVisibleChange {constructor(graphModel: any, layer: any, visible: boolean);}\n// tslint:disable-next-line:class-name max-classes-per-file\ndeclare class mxCell {constructor(cellName: string)}\n// tslint:disable-next-line:class-name max-classes-per-file\ndeclare class mxCodec {constructor(doc: any); public encode(model: any): any}\n\nexport type NodeId = string;\nexport type NodeName = string;\nexport type NodeDescription = string;\nexport type NodeTag = string;\nexport type NodeLink = string;\nexport enum NodeType {\n    event = 'event',\n    command = 'command',\n    role = 'role',\n    projection = 'projection',\n    aggregate = 'aggregate',\n    document = 'document',\n    policy = 'policy',\n    hotSpot = 'hotSpot',\n    externalSystem = 'externalSystem',\n    ui = 'ui',\n    feature = 'feature',\n    boundedContext = 'boundedContext',\n    freeText = 'freeText',\n    textCard = 'textCard',\n    edge = 'edge',\n    misc = 'misc',\n    icon = 'icon',\n    image = 'image',\n    layer = 'layer'\n}\n\nexport interface GraphPoint {\n    x: number;\n    y: number;\n}\n\nexport type PanningListener = (translate: GraphPoint) => void;\nexport type ZoomListener = (scale: number, translate: GraphPoint) => void;\n\nexport interface Node {\n    getId: () => NodeId;\n    getName: () => NodeName;\n    getDescription: () => NodeDescription;\n    getType: () => NodeType;\n    getLink: () => NodeLink | null;\n    getTags: () => List<NodeTag>;\n    isLayer: () => boolean;\n    isDefaultLayer: () => boolean;\n    getParent: () => Node | null;\n    children: () => List<Node>;\n    setChildren: (children: List<Node>) => Node;\n    getGeometry: () => GraphPoint;\n    getSources: () => List<Node>;\n    getTargets: () => List<Node>;\n    getMetadata: () => string | null;\n}\n\nexport interface Graph {\n    getCurrentScale: () => number;\n    getCurrentTranslate: () => GraphPoint;\n    onPanning: (listener: PanningListener) => void;\n    offPanning: (listener: PanningListener) => void;\n    translateMousePoint: (x: number, y: number) => GraphPoint;\n    onZoom: (listener: ZoomListener) => void;\n    offZoom: (listener: ZoomListener) => void;\n    getRoot: () => Node;\n    openLayersDialog: () => void;\n    triggerCody: () => void;\n    hasUserLevelVisibilityChanges: () => boolean;\n    isVisible: (node: Node) => boolean;\n    setUserVisible: (node: Node, visible: boolean) => void;\n    applyVisibilityGlobally: () => void;\n    isLocked: (node: Node) => boolean;\n    setLocked: (node: Node, locked: boolean) => void;\n    deleteElement: (node: Node) => void;\n    addLayer: (name: string) => void;\n    deleteLayer: (node: Node) => void;\n    isActiveLayer: (node: Node) => boolean;\n    setAsActiveLayer: (node: Node) => void;\n    setDefaultLayerAsActive: () => void;\n    highlightLayer: (node: Node) => void;\n    changeNodeName: (node: Node, newName: string) => void;\n    copySelectionToActiveLayer: () => boolean;\n    exportXmlSnapshot: () => string;\n    onSelectionChanged: (listener: (hasSelection: boolean) => void) => void;\n    setCockpitBaseUrl: (baseUrl: string) => void;\n    focus: () => void;\n}\n\nexport const flattenNodeChildren = (nodes: Node[], targetArr?: Node[]): Node[] => {\n    if(!targetArr) {\n        targetArr = [];\n    }\n\n    nodes.forEach(node => {\n        targetArr!.push(node);\n        if(node.children().count() > 0) {\n            flattenNodeChildren(node.children().toJS(), targetArr);\n        }\n    })\n\n    return targetArr;\n}\n\n\nexport const deriveGraphFromMxgraph = (mxgraph: any, editorUi: any): Graph => {\n    return new MxGraphWrapper(mxgraph, editorUi);\n};\n\nexport const makeEmptyGraph = (boardXml?: string): Graph => {\n    return new EmptyGraph(boardXml);\n};\n\nexport const sortNodesByGraphPosition = (a: Node, b: Node): number => {\n    if(a.getGeometry().y < b.getGeometry().y - 40) {\n        return -1;\n    }\n\n    if(a.getGeometry().x < b.getGeometry().x - 40 && a.getGeometry().y < b.getGeometry().y) {\n        return -1;\n    }\n\n    if(a.getGeometry().x > b.getGeometry().x) {\n        return 1;\n    }\n\n    if(a.getGeometry().y > b.getGeometry().y) {\n        return 1;\n    }\n\n    return 0;\n};\n\nexport const sortNodesByType = (a: Node, b: Node): number => {\n    if(a.getType() === NodeType.boundedContext && b.getType() !== NodeType.boundedContext) {\n        return -1;\n    }\n\n    if(b.getType() === NodeType.boundedContext && a.getType() !== NodeType.boundedContext) {\n        return 1;\n    }\n\n    if(a.getType() === NodeType.feature && b.getType() !== NodeType.feature) {\n        return -1;\n    }\n\n    if(b.getType() === NodeType.feature && a.getType() !== NodeType.feature) {\n        return 1;\n    }\n\n    if(a.getName() < b.getName()) {\n        return -1;\n    }\n\n    if(b.getName() < a.getName()) {\n        return 1;\n    }\n\n    return 0;\n}\n\nexport const convertNodeToJs = (node: Node): NodeRecordProps => {\n    return {\n        id: node.getId(),\n        name: node.getName(),\n        description: node.getDescription(),\n        type: node.getType(),\n        link: node.getLink(),\n        tags: node.getTags(),\n        layer: node.isLayer(),\n        defaultLayer: node.isDefaultLayer(),\n        parent: node.getParent()? makeParentNodeRecord(node.getParent() as Node, node) : null,\n        childrenList: node.children().map(makeNodeRecord),\n        sourcesList: node.getSources().map(makeConnectedNodeRecord),\n        targetsList: node.getTargets().map(makeConnectedNodeRecord),\n        geometry: new GraphPointRecord(node.getGeometry()),\n        metadata: node.getMetadata(),\n    };\n}\n\n// tslint:disable-next-line:max-classes-per-file\nclass GraphPointRecord extends Record({x: 0, y: 0}) implements GraphPoint {};\n\n// tslint:disable-next-line:max-classes-per-file\nexport class MxGraphElement implements Node {\n    private mxcell: any;\n    private mxgraphModel: any;\n\n    private id: NodeId | null = null;\n    private root: boolean | null = null;\n    private name: NodeName | null = null;\n    private description: NodeDescription | null = null;\n    private type: NodeType | null = null;\n    private tags: List<NodeTag> | null = null;\n    private layer: boolean = false;\n    private parentCache: Node | null | undefined = undefined;\n    private childrenCache: List<Node> | null = null;\n    private sourcesCache: List<Node> | null = null;\n    private targetsCache: List<Node> | null = null;\n    private metadataCache: string | null | undefined = undefined;\n    private deepLinkFactory: DeepLinkFactory | undefined = undefined;\n\n    constructor (mxcell: any, mxgraphModel: any, layer: boolean = false, deepLinkFactory?: DeepLinkFactory | undefined) {\n        this.mxcell = mxcell;\n        this.mxgraphModel = mxgraphModel;\n        this.layer = layer;\n        this.root = mxcell.getId() === MXGRAPH_ROOT_UUIDS[1];\n        this.deepLinkFactory = deepLinkFactory;\n    }\n\n    public getId(): NodeId {\n        if(null === this.id) {\n            this.id = this.mxcell.getId();\n        }\n        return this.id as NodeId;\n    }\n\n    public getName(): NodeName {\n        if(null === this.name) {\n            this.name = inspectioUtils.getLabelText(this.mxcell);\n\n            if(this.isDefaultLayer() && this.name === '') {\n                this.name = 'Board'\n            }\n        }\n        return this.name as NodeName;\n    }\n\n    public getDescription(): NodeDescription {\n        if(null === this.description) {\n            this.description = inspectioUtils.getLabelSecondaryText(this.mxcell);\n        }\n\n        return this.description as NodeDescription;\n    }\n\n    public getType(): NodeType {\n        if(null !== this.type) {\n            return this.type;\n        }\n\n        let type = inspectioUtils.getTypeInclEdge(this.mxcell);\n\n        if(!type) {\n            type = NodeType.misc;\n        }\n\n        if(type === HistoryCellType.multiple) {\n            type = NodeType.misc;\n        }\n\n        if(this.isLayer()) {\n            type = NodeType.layer;\n        }\n\n        this.type = type;\n\n        return this.type;\n    }\n\n    public getLink(): NodeLink | null {\n        if(this.isLayer()) {\n            return null;\n        }\n\n        if(this.root) {\n            return null;\n        }\n\n        if(!this.deepLinkFactory) {\n            return null;\n        }\n\n        return this.deepLinkFactory(this.getId());\n    }\n\n    public getTags(): List<NodeTag> {\n        if(null !== this.tags) {\n            return this.tags;\n        }\n\n        return List(inspectioUtils.getTags(this.mxcell));\n    }\n\n    public getParent(): Node | null {\n        if(typeof this.parentCache === 'undefined') {\n            this.parentCache = this.isLayer() || this.mxcell.getParent() === null? null : new MxGraphElement(\n                this.mxcell.getParent(),\n                this.mxgraphModel,\n                this.mxgraphModel.getChildren(this.mxgraphModel.root).includes(this.mxcell.getParent()),\n                this.deepLinkFactory\n            );\n        }\n\n        return this.parentCache;\n    }\n\n    public children(): List<Node> {\n        if(null !== this.childrenCache) {\n            return this.childrenCache;\n        }\n\n        let children: any[] | null = this.mxgraphModel.getChildren(this.mxcell);\n\n        if(!children) {\n            children = [];\n        }\n\n        const childrenList = List(children);\n\n        this.childrenCache = childrenList.map(child => new MxGraphElement(child, this.mxgraphModel, !!this.root, this.deepLinkFactory));\n\n        return this.childrenCache;\n    }\n\n    public setChildren(children: List<Node>): Node {\n        this.childrenCache = children;\n        return this;\n    }\n\n    public getSources(): List<Node> {\n        if(null !== this.sourcesCache) {\n            return this.sourcesCache;\n        }\n\n        let sources = List();\n\n        if(!this.mxcell.isVertex() || !this.mxcell.edges) {\n            return sources;\n        }\n\n        this.mxcell.edges.forEach((edge: any) => {\n            if(edge && edge.source && edge.source.getId() !== this.mxcell.getId()) {\n                sources = sources.push(new MxGraphElement(edge.source, this.mxgraphModel, false, this.deepLinkFactory));\n            }\n        });\n\n        this.sourcesCache = sources;\n\n        return sources;\n    }\n\n    public getTargets(): List<Node> {\n        if(null !== this.targetsCache) {\n            return this.targetsCache;\n        }\n\n        let targets = List();\n\n        if(!this.mxcell.isVertex() || !this.mxcell.edges) {\n            return targets;\n        }\n\n        this.mxcell.edges.forEach((edge: any) => {\n            if(edge && edge.target && edge.target.getId() !== this.mxcell.getId()) {\n                targets = targets.push(new MxGraphElement(edge.target, this.mxgraphModel, false, this.deepLinkFactory));\n            }\n        });\n\n        this.targetsCache = targets;\n        return targets;\n    }\n\n    public isLayer(): boolean {\n        return this.layer;\n    }\n\n    public isDefaultLayer(): boolean {\n        return this.isLayer() && this.mxcell.getId() === MXGRAPH_ROOT_UUIDS[0];\n    }\n\n    public getGeometry(): GraphPoint {\n        if(!this.mxcell.geometry) {\n            return {x:0, y:0};\n        }\n\n        return new GraphPointRecord({x: this.mxcell.geometry.x, y: this.mxcell.geometry.y});\n    }\n\n    public getMetadata(): string | null {\n        if(typeof this.metadataCache === 'undefined') {\n            const meta = inspectioUtils.getMetadata(this.mxcell);\n            this.metadataCache = meta? meta : null;\n        }\n\n        return this.metadataCache;\n    }\n}\n\n// tslint:disable-next-line:max-classes-per-file\nclass MxGraphWrapper implements Graph {\n    private mxgraph: any;\n    private editorUi: any;\n    private orgLayerVisibility: {[nodeId: string]: boolean} = {};\n\n    constructor(mxgraph: any, editorUi: any) {\n        this.mxgraph = mxgraph;\n        this.editorUi = editorUi;\n    }\n\n    public getCurrentScale(): number {\n        return this.mxgraph.getCurrentScale();\n    }\n\n    public getCurrentTranslate(): GraphPoint {\n        return this.mxgraph.getCurrentTranslate();\n    }\n\n    public onPanning(listener: PanningListener): void {\n        this.mxgraph.onPanning(listener);\n    }\n\n    public offPanning(listener: PanningListener): void {\n        this.mxgraph.offPanning(listener);\n    }\n\n    public translateMousePoint(x: number, y: number): GraphPoint {\n        return this.mxgraph.translateMousePoint(x, y);\n    }\n\n    public onZoom(listener: ZoomListener): void {\n        this.mxgraph.onZoom(listener);\n    }\n\n    public offZoom(listener: ZoomListener): void {\n        this.mxgraph.offZoom(listener);\n    }\n\n    public getRoot(): Node {\n        const mxmodel = this.mxgraph.getModel();\n        return makeNodeRecord(new MxGraphElement(mxmodel.getRoot(), mxmodel));\n    }\n\n    public openLayersDialog(): void {\n        this.editorUi.actions.get('layers').funct();\n    }\n\n    public triggerCody(): void {\n        this.mxgraph.triggerCody();\n    }\n\n    public hasUserLevelVisibilityChanges(): boolean {\n        return Object.keys(this.orgLayerVisibility).length > 0;\n    }\n\n    public isVisible(node: Node): boolean {\n        const cell = this.mxgraph.getModel().getCell(node.getId());\n\n        return cell && this.mxgraph.getModel().isVisible(cell);\n    }\n\n    public setUserVisible(node: Node, visible: boolean): void {\n        const cell = this.mxgraph.getModel().getCell(node.getId());\n\n        // User visibility feature is deactivated\n        // It allows users to play around with visibility without effecting others, but on the other hand\n        // it makes the handling way more complicated and would also require a userElementLock functionality\n        // We keep the feature in the code, if too many users complain about the behavior\n        // Sync button above elements tree is also hidden at the moment\n        if(cell) {\n            this.mxgraph.model.beginUpdate();\n\n            try {\n                this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, cell, visible));\n                if(!inspectioUtils.isContainer(cell) && !node.isLayer()) {\n                    const edges: any[] = this.mxgraph.getAllEdges([cell]);\n\n                    edges.forEach(edge => {\n                        if(visible) {\n                            if(edge.source && edge.source !== cell && this.mxgraph.getModel().isVisible(edge.source)) {\n                                this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, edge, visible));\n                            }\n\n                            if(edge.target && edge.target !== cell && this.mxgraph.getModel().isVisible(edge.target)) {\n                                this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, edge, visible));\n                            }\n                        } else {\n                            this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, edge, visible));\n                        }\n                    })\n                }\n            } finally {\n                this.mxgraph.model.endUpdate();\n            }\n\n            return;\n\n            window.setTimeout(() => {\n                if(visible) {\n                    if(node.isLayer()) {\n                        this.mxgraph.zoom(0.2, true);\n                        this.mxgraph.showAll(cell);\n                        this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(cell));\n                    } else {\n                        this.mxgraph.scrollCellsIntoView([cell]);\n                    }\n                }\n            }, 200);\n        }\n\n        if(!this.orgLayerVisibility.hasOwnProperty(cell.getId())) {\n            this.orgLayerVisibility[cell.getId()] = this.isVisible(node);\n        }\n\n        if(cell) {\n            this.mxgraph.enableLazyTextPaint();\n            this.mxgraph.model.beginUpdateWithoutChangeNotifications();\n\n            try {\n                this.mxgraph.getModel().setVisible(cell, visible);\n            } finally {\n                this.mxgraph.model.endUpdateWithoutChangeNotifications();\n            }\n\n            this.mxgraph.disableLazyTextPaint();\n        }\n\n        window.setTimeout(() => {\n            if(visible) {\n                if(node.isLayer()) {\n                    this.mxgraph.zoom(0.2, true);\n                    this.mxgraph.showAll(cell);\n                    this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(cell));\n                } else {\n                    this.mxgraph.scrollCellsIntoView([cell]);\n                }\n            }\n        }, 200);\n    }\n\n    public applyVisibilityGlobally(): void {\n        if(this.hasUserLevelVisibilityChanges()) {\n            this.mxgraph.model.beginUpdate();\n\n            try {\n                for (const cellId in this.orgLayerVisibility) {\n                    if(this.orgLayerVisibility.hasOwnProperty(cellId)) {\n                        const cell = this.mxgraph.model.getCell(cellId);\n\n                        if(cell) {\n                            this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, cell, this.mxgraph.model.isVisible(cell)));\n                        }\n                    }\n                }\n\n                this.orgLayerVisibility = {};\n            } finally {\n                this.mxgraph.model.endUpdate();\n            }\n        }\n    }\n\n    public isLocked(node: Node): boolean {\n        const cell = this.mxgraph.getModel().getCell(node.getId());\n\n        if(!cell) {\n            return false;\n        }\n\n        const state = this.mxgraph.view.getState(cell);\n        const style = (state != null) ? state.style : this.mxgraph.getCellStyle(cell);\n        return  mxUtils.getValue(style, 'locked', '0').toString() === '1';\n    }\n\n    public setLocked(node: Node, locked: boolean): void {\n        const cell = this.mxgraph.getModel().getCell(node.getId());\n\n        if(!cell) {\n            return;\n        }\n\n        const state = this.mxgraph.view.getState(cell);\n        const style = (state != null) ? state.style : this.mxgraph.getCellStyle(cell);\n\n        this.mxgraph.getModel().beginUpdate();\n        try {\n            this.mxgraph.setCellStyles('locked', locked? '1' : null, [cell]);\n        } finally {\n            this.mxgraph.getModel().endUpdate();\n        }\n\n        if (locked)\n        {\n            this.mxgraph.removeSelectionCells(this.mxgraph.getModel().getDescendants(cell));\n        }\n    }\n\n    public deleteElement(node: Node): void {\n        const cell = this.mxgraph.model.getCell(node.getId());\n\n        if(cell) {\n            this.mxgraph.removeCells([cell], true);\n        }\n    }\n\n    public addLayer(name: string): void {\n        if (this.mxgraph.isEnabled())\n        {\n            this.mxgraph.model.beginUpdate();\n\n            try\n            {\n                const cell = this.mxgraph.addCell(new mxCell(name), this.mxgraph.model.root);\n                this.mxgraph.setDefaultParent(cell);\n            }\n            finally\n            {\n                this.mxgraph.model.endUpdate();\n            }\n        }\n    }\n\n    public deleteLayer(node: Node): void {\n        if(node.isDefaultLayer()) {\n            throw Error(\"The default layer cannot be deleted!\");\n        }\n\n        const cell = this.mxgraph.model.getCell(node.getId());\n        const isActiveLayer = this.isActiveLayer(node);\n\n        this.mxgraph.model.beginUpdate();\n        try\n        {\n            const index = this.mxgraph.model.root.getIndex(cell);\n            this.mxgraph.removeCells([cell], false);\n\n            if(isActiveLayer) {\n                if (index > 0 && index <= this.mxgraph.model.getChildCount(this.mxgraph.model.root))\n                {\n                    this.mxgraph.setDefaultParent(this.mxgraph.model.getChildAt(this.mxgraph.model.root, index - 1));\n                }\n                else\n                {\n                    this.mxgraph.setDefaultParent(null);\n                }\n            }\n        }\n        finally\n        {\n            this.mxgraph.model.endUpdate();\n        }\n    }\n\n    public isActiveLayer(node: Node): boolean {\n        return this.mxgraph.getDefaultParent().getId() === node.getId();\n    }\n\n    public setAsActiveLayer(node: Node): void {\n        const cell = this.mxgraph.model.getCell(node.getId());\n\n        if(cell) {\n            this.mxgraph.model.beginUpdate();\n\n            try {\n                this.mxgraph.setDefaultParent(cell);\n            } finally {\n                this.mxgraph.model.endUpdate();\n            }\n        }\n    }\n\n    public setDefaultLayerAsActive(): void {\n        this.mxgraph.setDefaultParent(null);\n    }\n\n    public highlightLayer(node: Node): void {\n        const cell = this.mxgraph.getModel().getCell(node.getId());\n\n        if(cell && this.mxgraph.model.getChildren(cell)) {\n            this.mxgraph.scrollCellsIntoView(this.mxgraph.model.getChildren(cell));\n        }\n    }\n\n    public changeNodeName(node: Node, newName: string): void {\n        const cell = this.mxgraph.model.getCell(node.getId());\n\n        if(cell) {\n            this.mxgraph.cellLabelChanged(cell, newName);\n        }\n    }\n\n    public copySelectionToActiveLayer(): boolean {\n        if (this.mxgraph.isEnabled() && !this.mxgraph.isSelectionEmpty())\n        {\n            this.mxgraph.moveCells(this.mxgraph.getSelectionCells(), 0, 0, false, this.mxgraph.getDefaultParent());\n            return true;\n        }\n\n        return false;\n    }\n\n    public exportXmlSnapshot(): string {\n        // 1. check if we need to reset layer visibility to not override global settings\n        const userLayerVisibility: {[nodeId: string]: boolean} = {};\n\n        if(this.hasUserLevelVisibilityChanges()) {\n            this.mxgraph.model.beginUpdateWithoutChangeNotifications();\n\n            try {\n                for (const cellId in this.orgLayerVisibility) {\n                    if(this.orgLayerVisibility.hasOwnProperty(cellId)) {\n                        const cell = this.mxgraph.model.getCell(cellId);\n\n                        if(cell) {\n                            const layerVisibleForUser = this.mxgraph.model.isVisible(cell);\n\n                            if(layerVisibleForUser !== this.orgLayerVisibility[cellId]) {\n                                userLayerVisibility[cellId] = layerVisibleForUser;\n                                this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, cell, this.orgLayerVisibility[cellId]));\n                            }\n                        }\n                    }\n                }\n            } finally {\n                this.mxgraph.model.endUpdateWithoutChangeNotifications();\n            }\n        }\n\n        // 2. Export Graph Xml\n\n        const enc = new mxCodec(mxUtils.createXmlDocument());\n        const node = enc.encode(this.mxgraph.getModel());\n\n        if (this.mxgraph.view.translate.x !== 0 || this.mxgraph.view.translate.y !== 0)\n        {\n            node.setAttribute('dx', Math.round(this.mxgraph.view.translate.x * 100) / 100);\n            node.setAttribute('dy', Math.round(this.mxgraph.view.translate.y * 100) / 100);\n        }\n\n        node.setAttribute('grid', (this.mxgraph.isGridEnabled()) ? '1' : '0');\n        node.setAttribute('gridSize', this.mxgraph.gridSize);\n        node.setAttribute('guides', (this.mxgraph.graphHandler.guidesEnabled) ? '1' : '0');\n        node.setAttribute('tooltips', (this.mxgraph.tooltipHandler.isEnabled()) ? '1' : '0');\n        node.setAttribute('connect', (this.mxgraph.connectionHandler.isEnabled()) ? '1' : '0');\n        node.setAttribute('arrows', (this.mxgraph.connectionArrowsEnabled) ? '1' : '0');\n        node.setAttribute('fold', (this.mxgraph.foldingEnabled) ? '1' : '0');\n        node.setAttribute('page', (this.mxgraph.pageVisible) ? '1' : '0');\n        node.setAttribute('pageScale', this.mxgraph.pageScale);\n        node.setAttribute('pageWidth', this.mxgraph.pageFormat.width);\n        node.setAttribute('pageHeight', this.mxgraph.pageFormat.height);\n\n        if (this.mxgraph.background != null)\n        {\n            node.setAttribute('background', this.mxgraph.background);\n        }\n\n        const xml = mxUtils.getXml(node);\n\n        // 3. Now set layer visibility back to what user currently sees\n        this.mxgraph.model.beginUpdateWithoutChangeNotifications();\n\n        try {\n            for (const layerId in this.orgLayerVisibility) {\n                if(this.orgLayerVisibility.hasOwnProperty(layerId)) {\n                    const layer = this.mxgraph.model.getCell(layerId);\n\n                    if(layer) {\n                        this.mxgraph.model.execute(new mxVisibleChange(this.mxgraph.model, layer, userLayerVisibility[layerId]));\n                    }\n                }\n            }\n        } finally {\n            this.mxgraph.model.endUpdateWithoutChangeNotifications();\n        }\n\n        return xml;\n    }\n\n    public onSelectionChanged(listener: (hasSelection: boolean) => void): void {\n        this.mxgraph.selectionModel.addListener(mxEvent.CHANGE, () => {\n            if(this.mxgraph.isSelectionEmpty()) {\n                listener(false);\n            } else {\n                listener(true);\n            }\n        });\n    }\n\n    public setCockpitBaseUrl(baseUrl: string): void {\n        this.mxgraph.setCockpitBaseUrl(baseUrl);\n    }\n\n    public focus(): void {\n        this.mxgraph.container.focus();\n    }\n}\n\n// tslint:disable-next-line:max-classes-per-file\nexport class EmptyLayer implements Node {\n    public getId(): NodeId {\n        return '__EMPTY_LAYER__';\n    }\n\n    public getName(): NodeName {\n        return 'Empty Layer';\n    }\n\n    public getDescription(): NodeDescription {\n        return '';\n    }\n\n    public getType(): NodeType {\n        return NodeType.misc;\n    }\n\n    public getLink(): NodeLink | null {\n        return null;\n    }\n\n    public getTags(): List<NodeTag> {\n        return List();\n    }\n\n    public isLayer(): boolean {\n        return true;\n    }\n\n    public isDefaultLayer(): boolean {\n        return false;\n    }\n\n    public getParent(): Node | null {\n        return null;\n    }\n\n    public children(): List<Node> {\n        return List();\n    }\n\n    public getSources(): List<Node> {\n        return List();\n    }\n\n    public getTargets(): List<Node> {\n        return List();\n    }\n\n    public getMetadata(): string | null {\n        return null;\n    }\n\n    public setChildren(children: List<Node>): Node {\n        return this;\n    }\n\n    public getGeometry(): GraphPoint {\n        return {x: 0, y: 0};\n    }\n}\n\n// tslint:disable-next-line:max-classes-per-file\nclass EmptyGraph implements Graph {\n    private boardXml: string;\n\n    constructor(boardXml?: string) {\n        if(!boardXml) {\n            boardXml = '';\n        }\n\n        this.boardXml = boardXml;\n    }\n\n    public getCurrentScale(): number {\n        return 1.0;\n    }\n\n    public getCurrentTranslate(): GraphPoint {\n        return {x: 0, y: 0};\n    }\n\n    public onPanning(listener: PanningListener): void {\n        // no op\n    }\n\n    public offPanning(listener: PanningListener): void {\n        // no op\n    }\n\n    public translateMousePoint(x: number, y: number): GraphPoint {\n        return {x,y};\n    }\n\n    public onZoom(listener: ZoomListener): void {\n        // no op\n    }\n\n    public offZoom(listener: ZoomListener): void {\n        // no op\n    }\n\n    public getRoot(): Node {\n        return new EmptyLayer();\n    }\n\n    public openLayersDialog(): void {\n        // do nothing\n    }\n\n    public triggerCody(): void {\n        // do nothing\n    }\n\n    public hasUserLevelVisibilityChanges(): boolean {\n        return false;\n    }\n\n    public isVisible(node: Node): boolean {\n        return false;\n    }\n\n    public setUserVisible(node: Node, visible: boolean): void {\n        // Do nothing\n    }\n\n    public applyVisibilityGlobally(): void {\n        // Do nothing\n    }\n\n    public isLocked(node: Node): boolean {\n        return false;\n    }\n\n    public setLocked(node: Node, locked: boolean): void {\n        // Do nothing\n    }\n\n    public deleteElement(node: Node): void {\n        // Do nothing\n    }\n\n    public addLayer(name: string): void {\n        // Do nothing\n    }\n\n    public deleteLayer(node: Node): void {\n        // Do nothing\n    }\n\n    public isActiveLayer(node: Node): boolean {\n        return false;\n    }\n\n    public setAsActiveLayer(node: Node): void {\n        // Do nothing\n    }\n\n    public setDefaultLayerAsActive(): void {\n        // Do nothing\n    }\n\n    public highlightLayer(node: Node): void {\n        // Do nothing\n    }\n\n    public changeNodeName(node: Node, newName: string): void {\n        // Do nothing\n    }\n\n    public copySelectionToActiveLayer(): boolean {\n        return false;\n    }\n\n    public exportXmlSnapshot(): string {\n        return this.boardXml;\n    }\n\n    public onSelectionChanged(listener: (hasSelection: boolean) => void): void {\n        // Do nothing\n    }\n\n    public setCockpitBaseUrl(baseUrl: string): void {\n        // Do nothing\n    }\n\n    public focus(): void {\n        // Do nothing\n    }\n}\n\ninterface NodeRecordProps {\n    id: NodeId;\n    name: NodeName;\n    description: NodeDescription;\n    type: NodeType;\n    link: NodeLink | null;\n    tags: List<NodeTag>;\n    layer: boolean;\n    defaultLayer: boolean;\n    parent: Node | null;\n    childrenList: List<Node>;\n    sourcesList: List<Node>;\n    targetsList: List<Node>;\n    geometry: GraphPoint;\n    metadata: string | null;\n}\n\nconst defaultNodeRecordProps: NodeRecordProps = {\n    id: '',\n    name: '',\n    description: '',\n    type: NodeType.misc,\n    link: null,\n    tags: List(),\n    layer: false,\n    defaultLayer: false,\n    parent: null,\n    childrenList: List(),\n    sourcesList: List(),\n    targetsList: List(),\n    geometry: {x:0, y:0},\n    metadata: null,\n};\n\nconst makeNodeRecord = (node: Node): NodeRecord => {\n    return new NodeRecord({\n        id: node.getId(),\n        name: node.getName(),\n        description: node.getDescription(),\n        type: node.getType(),\n        link: node.getLink(),\n        tags: node.getTags(),\n        layer: node.isLayer(),\n        defaultLayer: node.isDefaultLayer(),\n        parent: node.getParent()? makeParentNodeRecord(node.getParent() as Node, node) : null,\n        childrenList: node.children().map(makeNodeRecord),\n        sourcesList: node.getSources().map(makeConnectedNodeRecord),\n        targetsList: node.getTargets().map(makeConnectedNodeRecord),\n        geometry: new GraphPointRecord(node.getGeometry()),\n        metadata: node.getMetadata(),\n    });\n};\n\nconst makeConnectedNodeRecord = (node: Node): NodeRecord => {\n    return new NodeRecord({\n        id: node.getId(),\n        name: node.getName(),\n        description: node.getDescription(),\n        type: node.getType(),\n        link: node.getLink(),\n        tags: node.getTags(),\n        layer: node.isLayer(),\n        defaultLayer: node.isDefaultLayer(),\n        parent: node.getParent()? makeParentNodeRecord(node.getParent() as Node, node) : null,\n        childrenList: node.children().map(makeNodeRecord),\n        sourcesList: List(),\n        targetsList: List(),\n        geometry: new GraphPointRecord(node.getGeometry()),\n        metadata: node.getMetadata(),\n    });\n};\n\nconst makeParentNodeRecord = (parent: Node, referencingChild: Node): NodeRecord => {\n    return new NodeRecord({\n        id: parent.getId(),\n        name: parent.getName(),\n        description: parent.getDescription(),\n        type: parent.getType(),\n        link: parent.getLink(),\n        tags: parent.getTags(),\n        layer: parent.isLayer(),\n        defaultLayer: parent.isDefaultLayer(),\n        parent: parent.getParent()? makeParentNodeRecord(parent.getParent() as Node, parent) : null,\n        childrenList: List(),\n        sourcesList: List(),\n        targetsList: List(),\n        geometry: new GraphPointRecord(parent.getGeometry()),\n        metadata: parent.getMetadata(),\n    });\n}\n\n// tslint:disable-next-line:max-classes-per-file\nclass NodeRecord extends Record(defaultNodeRecordProps) implements Node {\n    public getId(): NodeId {\n        return this.id;\n    }\n\n    public getName(): NodeName {\n        return this.name;\n    }\n\n    public getDescription(): NodeDescription {\n        return this.description;\n    }\n\n    public getType(): NodeType {\n        return this.type;\n    }\n\n    public getLink(): NodeLink | null {\n        return this.link;\n    }\n\n    public getTags(): List<NodeTag> {\n        return this.tags;\n    }\n\n    public isLayer(): boolean {\n        return this.layer;\n    }\n\n    public isDefaultLayer(): boolean {\n        return this.defaultLayer;\n    }\n\n    public getParent(): Node | null {\n        return this.parent;\n    }\n\n    public children(): List<Node> {\n        return this.childrenList;\n    }\n\n    public getSources(): List<Node> {\n        return this.sourcesList;\n    }\n\n    public getTargets(): List<Node> {\n        return this.targetsList;\n    }\n\n    public getGeometry(): GraphPoint {\n        return this.geometry;\n    }\n\n    public getMetadata(): string | null {\n        return this.metadata;\n    }\n\n    public setChildren(children: List<Node>): Node {\n        return this.set('childrenList', children);\n    }\n}\n","/**\n * Specifies the current version of the insp_standalone IndexedDB. This should be incremented whenever the structure of\n * the DB has changed and a migration is required. Take a look at StandaloneIndexedDB::updateDatabaseToLatestVersion.\n * Note: This must be an integer!\n */\nconst DB_VERSION: number = 1\n\nexport const OBJECT_STORE_BOARDS = 'boards';\nexport const OBJECT_STORE_USER_SETTINGS = 'userSettings';\n\nclass StandaloneIndexedDB {\n    private initializationPromise: Promise<void>;\n    private db?: IDBDatabase;\n\n    constructor() {\n        this.initializationPromise = new Promise((resolve, reject) => {\n            const openRequest = indexedDB.open('insp_standalone', DB_VERSION);\n\n            openRequest.onupgradeneeded = (event: IDBVersionChangeEvent) => {\n                this.updateDatabaseToLatestVersion(openRequest.result, event.oldVersion);\n            }\n\n            openRequest.onerror = () => {\n                reject('IndexedDB could not be initialized');\n            }\n\n            openRequest.onsuccess = () => {\n                this.db = openRequest.result;\n                resolve();\n            };\n        });\n    }\n\n    public async get(objectStore: string, key: string): Promise<any> {\n        await this.assertDBInitialized();\n\n        return new Promise(async (resolve, reject) => {\n            const transaction = this.db!.transaction(objectStore, 'readonly');\n            const request = await transaction.objectStore(objectStore).get(key);\n\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject();\n        });\n    }\n\n    public async getAll(objectStore: string): Promise<any[]> {\n        await this.assertDBInitialized();\n\n        return new Promise(async (resolve, reject) => {\n            const transaction = this.db!.transaction(objectStore, 'readonly');\n            const request = await transaction.objectStore(objectStore).getAll();\n\n            request.onsuccess = () => resolve(request.result);\n            request.onerror = () => reject();\n        });\n    }\n\n    public async add(objectStore: string, data: object): Promise<void> {\n        await this.assertDBInitialized();\n\n        return new Promise(async (resolve, reject) => {\n            const transaction = this.db!.transaction(objectStore, 'readwrite');\n            const request = transaction.objectStore(objectStore).add(data);\n\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject();\n        });\n    }\n\n    public async put(objectStore: string, data: object): Promise<void> {\n        await this.assertDBInitialized();\n\n        return new Promise(async (resolve, reject) => {\n            const transaction = this.db!.transaction(objectStore, 'readwrite');\n            const request = transaction.objectStore(objectStore).put(data);\n\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject();\n        });\n    }\n\n    public async delete(objectStore: string, key: string): Promise<void> {\n        await this.assertDBInitialized();\n\n        return new Promise(async (resolve, reject) => {\n            const transaction = this.db!.transaction(objectStore, 'readwrite');\n            const request = transaction.objectStore(objectStore).delete(key);\n\n            request.onsuccess = () => resolve();\n            request.onerror = () => reject();\n        });\n    }\n\n    public async assertDBInitialized(): Promise<void> {\n        await this.initializationPromise;\n\n        if (!this.db) {\n            throw new Error('IndexedDB is not initialized');\n        }\n    }\n\n    private updateDatabaseToLatestVersion(db: IDBDatabase, oldVersion: number): void {\n        // tslint:disable-next-line\n        console.log(`Starting upgrade for DB insp_standalone from version ${oldVersion} to ${DB_VERSION}`);\n\n        /**\n         * Specify what migrations need to be done for each version to the next one. Make sure to not use any \"break\"\n         * statements since fallthrough is actually what we want here in order to handle larger version jumps.\n         */\n        switch (oldVersion) {\n            case 0: // Initialization (migration from version 0 to 1)\n                db.createObjectStore(OBJECT_STORE_BOARDS, { keyPath: 'boardId' });\n                db.createObjectStore(OBJECT_STORE_USER_SETTINGS, { keyPath: 'key' });\n        }\n    }\n}\n\nexport default StandaloneIndexedDB;\n","import {StandaloneBoard, StandaloneUser, StandaloneUserSetting} from \"./types\";\nimport StandaloneIndexedDB, {OBJECT_STORE_BOARDS, OBJECT_STORE_USER_SETTINGS} from \"./StandaloneIndexedDB\";\n\nclass StandaloneStorageManager {\n    private db: StandaloneIndexedDB;\n\n    constructor(db: StandaloneIndexedDB) {\n        this.db = db;\n        this.getBoards = this.getBoards.bind(this);\n        this.getBoard = this.getBoard.bind(this);\n        this.updateBoard = this.updateBoard.bind(this);\n        this.addBoard = this.addBoard.bind(this);\n        this.deleteBoard = this.deleteBoard.bind(this);\n        this.getUserSettings = this.getUserSettings.bind(this);\n        this.setUserSetting = this.setUserSetting.bind(this);\n    }\n\n    public getUser(): StandaloneUser {\n        return {\n            userId: 'f1c1512d-e1b9-44c2-940c-3f7cade64a29',\n        }\n    }\n\n    public async getBoards(): Promise<StandaloneBoard[]> {\n        return await this.db.getAll(OBJECT_STORE_BOARDS);\n    }\n\n    public async getBoard(boardId: string): Promise<StandaloneBoard|null> {\n        return await this.db.get(OBJECT_STORE_BOARDS, boardId) || null;\n    }\n\n    public async updateBoard(board: StandaloneBoard): Promise<void> {\n        await this.db.put(OBJECT_STORE_BOARDS, board);\n    }\n\n    public async addBoard(board: StandaloneBoard): Promise<void> {\n        await this.db.add(OBJECT_STORE_BOARDS, board);\n    }\n\n    public async deleteBoard(boardId: string): Promise<void> {\n        await this.db.delete(OBJECT_STORE_BOARDS, boardId);\n    }\n\n    public async getUserSettings(): Promise<StandaloneUserSetting[]> {\n        return await this.db.getAll(OBJECT_STORE_USER_SETTINGS);\n    }\n\n    public async setUserSetting(setting: StandaloneUserSetting): Promise<void> {\n        if (await this.db.get(OBJECT_STORE_USER_SETTINGS, setting.key)) {\n            await this.db.put(OBJECT_STORE_USER_SETTINGS, setting);\n        } else {\n            await this.db.add(OBJECT_STORE_USER_SETTINGS, setting);\n        }\n    }\n}\n\nexport default StandaloneStorageManager;\n","import StandaloneStorageManager from \"./storage/StandaloneStorageManager\";\nimport StandaloneIndexedDB from \"./storage/StandaloneIndexedDB\";\n\nexport const isStandalone = () => process.env.REACT_APP_IS_STANDALONE === 'true';\n\nexport const standaloneStorageManager = new StandaloneStorageManager(new StandaloneIndexedDB());\n","import { Record } from 'immutable';\nimport { createSelector } from 'reselect';\nimport { ApplicationState } from '../../reducer';\nimport { UserModel } from '../model';\nimport {\n    makeActiveUserOrganizationInfoSelector,\n    userOrganizationInfoListSelector\n} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport {makeOrganizationListSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {Organization} from \"../../Organization/model/Organization\";\nimport {isStandalone} from \"../../standalone/util\";\n\nexport const currentUserSelector = (state: Record<ApplicationState>, props: any) => state.getIn(['inspectioUsers', 'users', 'currentUser']);\n\nexport const makeGetCurrentUser = (): (state: Record<ApplicationState>, props?: any) => UserModel.UserInfo => {\n    return createSelector(\n        [currentUserSelector],\n        (user: UserModel.UserInfo): UserModel.UserInfo => user,\n    );\n};\n\nexport const makeGetCurrentBoardQuota = (): (state: Record<ApplicationState>, props?: any) => number => {\n    const organizationListSelector = makeOrganizationListSelector();\n\n    return createSelector(\n        [currentUserSelector, organizationListSelector],\n        (user: UserModel.UserInfo, organizations): number => {\n            if(isStandalone()) {\n                return -1;\n            }\n\n            let activeOrganization: Organization | undefined;\n\n            organizations.forEach(organization => {\n                if(organization.uid === user.activeOrganization) {\n                    activeOrganization = organization;\n                }\n            });\n\n            if(!activeOrganization) {\n                return 0;\n            }\n\n            if(activeOrganization.guests.includes(user.uid)) {\n                return 0;\n            }\n\n            return activeOrganization.boardQuota;\n        },\n    );\n};\n\n","import * as React from \"react\";\nimport {useState} from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport {Button, Modal} from \"semantic-ui-react\";\n\nexport interface CropData {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\ninterface UserAvatarUploadModalProps {\n    t: any;\n    open: boolean;\n    onClose: () => void;\n    onUpload: (file: any, crop: CropData) => void;\n}\n\nconst INITIAL_CROP = { aspect: 1, unit: 'px' as 'px', x: 0, y: 0, width: 150, height: 150 };\n\nconst UserAvatarUploadModal = (props: UserAvatarUploadModalProps) => {\n    const [crop, setCrop] = useState(INITIAL_CROP);\n    const [imageScale, setImageScale] = useState<number>(1.0);\n    const [file, setFile] = useState<undefined|File>(undefined);\n    const [src, setSrc] = useState<undefined|string>(undefined);\n\n    const onFileSelected = (acceptedFiles: File[]) => {\n        setFile(acceptedFiles[0]);\n        setSrc(URL.createObjectURL(acceptedFiles[0]));\n    };\n\n    const closeModal = () => {\n        props.onClose();\n        resetModal();\n    };\n\n    const resetModal = () => {\n        setFile(undefined);\n        setSrc(undefined);\n        setCrop(INITIAL_CROP);\n    };\n\n    return (\n        <Modal open={props.open} onClose={closeModal} closeIcon={true}>\n            <Modal.Header>{props.t('insp.user.avatar_upload.select_photo')}</Modal.Header>\n            <Modal.Content image={true}>\n                <Dropzone onDrop={onFileSelected}>\n                    {({getRootProps, getInputProps}) => (\n                        <section style={{ height: '410px', width: '100%' }}>\n                            <div {...getRootProps()} style={{ width: '100%', height: '100%', padding: '1px' }}>\n                                {src ? (\n                                    <ReactCrop\n                                        style={{ maxWidth: \"100%\", maxHeight: \"400px\" }}\n                                        imageStyle={{ maxWidth: \"100%\", maxHeight: \"400px\" }}\n                                        src={src as any}\n                                        crop={crop}\n                                        onChange={(newCrop: any) => setCrop(newCrop)}\n                                        onImageLoaded={image => setImageScale(image.width / image.naturalWidth)}\n                                    />\n                                ) : (\n                                    <div>\n                                        <input {...getInputProps()} />\n                                        <p>{props.t('insp.user.avatar_upload.drag_and_drop_info')}</p>\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n                </Dropzone>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={closeModal}\n                />\n                <Button\n                    primary={true}\n                    children={props.t('app.form.save')}\n                    onClick={() => {\n                        props.onUpload(file, {\n                            x: crop.x / imageScale,\n                            y: crop.y / imageScale,\n                            width: crop.width / imageScale,\n                            height: crop.height / imageScale\n                        });\n                        resetModal();\n                    }}\n                />\n            </Modal.Actions>\n        </Modal>\n    );\n};\n\nexport default UserAvatarUploadModal;\n","import {Map} from \"immutable\";\nimport React from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Link} from \"react-router-dom\";\nimport {InjectedFormProps} from \"redux-form\";\nimport { Field, reduxForm } from 'redux-form/immutable';\nimport {Button} from \"semantic-ui-react\";\nimport {inspectio} from \"../../routes\";\n\ninterface FormData  {\n    uid: string;\n    displayName: string;\n    companyName: string;\n    email: string;\n    jobTitle: string;\n}\n\n// tslint:disable-next-line:interface-name\nexport interface IFormData extends Map<string, string> {\n    toJS(): FormData\n}\n\nexport interface OwnProps {\n}\n\nexport interface PropsFromDispatch { }\n\nexport type UserProfileEditFormProps = OwnProps & PropsFromDispatch & WithNamespaces & InjectedFormProps<IFormData, OwnProps & WithNamespaces>;\n\nconst UserProfileEditForm = (props: UserProfileEditFormProps) => (\n    <form className=\"ui form\" onSubmit={props.handleSubmit}>\n        <div className=\"field\">\n            <label>{props.t('insp.user.form.labels.email')}</label>\n            <Field name=\"email\" component=\"input\" type=\"text\" placeholder={props.t('insp.user.form.fields.email')} />\n        </div>\n\n        <div className=\"field\">\n            <label>{props.t('insp.user.form.labels.display_name')}</label>\n            <Field name=\"displayName\" component=\"input\" type=\"text\" placeholder={props.t('insp.user.form.fields.display_name')} />\n        </div>\n\n        <div className=\"field\">\n            <label>{props.t('insp.user.form.labels.company')}</label>\n            <Field name=\"companyName\" component=\"input\" type=\"text\" placeholder={props.t('insp.user.form.fields.company')} />\n        </div>\n\n        <div className=\"field\">\n            <label>{props.t('insp.user.form.labels.position')}</label>\n            <Field name=\"jobTitle\" component=\"input\" type=\"text\" placeholder={props.t('insp.user.form.fields.position')} />\n        </div>\n\n        <div className=\"field\">\n            <Button primary={true} type=\"submit\" className=\"bottom aligned\">{props.t('app.form.save')}</Button>\n            <Link to={inspectio} className=\"ui basic button noborder\">{props.t('app.form.cancel')}</Link>\n        </div>\n    </form>\n);\n\nexport default withNamespaces()(reduxForm<IFormData, OwnProps & WithNamespaces>({form: 'UserProfileEditForm', enableReinitialize: true})(UserProfileEditForm));\n\n","import {Map} from \"immutable\";\nimport React from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {InjectedFormProps} from \"redux-form\";\nimport { Field, reduxForm } from 'redux-form/immutable';\nimport {Button, Message} from \"semantic-ui-react\";\n\ninterface FormData  {\n    uid: string;\n    passwordSet: {\n        password1: string,\n        password2: string,\n    }\n}\n\nexport interface ImFormData extends Map<string, string> {\n    toJS(): FormData\n}\n\nexport interface OwnProps {\n    showErrorMessage: boolean;\n}\n\nexport interface PropsFromDispatch { }\n\nexport type UserProfilePasswordFormProps = OwnProps & PropsFromDispatch & WithNamespaces & InjectedFormProps<ImFormData, OwnProps & WithNamespaces>;\n\nconst UserProfilePasswordForm = (props: UserProfilePasswordFormProps) => {\n\n    return (\n        <form className={'ui form' + (props.showErrorMessage ? ' error' : '')} onSubmit={props.handleSubmit}>\n            <div className={'field'}>\n                <label>{props.t('insp.user.form.labels.password1')}</label>\n                <Field name={'password1'} component={'input'} type={'password'}/>\n            </div>\n\n            <div className={'field'}>\n                <label>{props.t('insp.user.form.labels.password2')}</label>\n                <Field name={'password2'} component={'input'} type={'password'}/>\n            </div>\n\n            <Message\n                error={true}\n                header={props.t('insp.user.change_password.passwords_not_matching_title')}\n                content={props.t('insp.user.change_password.passwords_not_matching_text')}\n            />\n\n            <div className={'field'}>\n                <Button primary={true} type={'submit'} className={'bottom aligned'}>{props.t('app.form.change')}</Button>\n            </div>\n        </form>\n    );\n};\n\nexport default withNamespaces()(reduxForm<ImFormData, OwnProps & WithNamespaces>({form: 'UserProfilePasswordForm', enableReinitialize: false})(UserProfilePasswordForm));\n\n","import {fromJS} from \"immutable\";\nimport {SyntheticEvent, useState} from \"react\";\nimport * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {reset} from \"redux-form\";\nimport {Container, Dropdown, Grid, Header} from 'semantic-ui-react';\nimport {useOnBodyClick} from \"../../core/hooks/useOnBodyClick\";\nimport {UserProfileMatchParams} from \"../../InspectioBoards/components/types\";\nimport { Action as NotifyAction } from '../../NotificationSystem/index';\nimport * as Routes from '../../routes';\nimport {updatePassword, updateProfile} from \"../actions/commands\";\nimport {Api} from \"../actions/index\";\nimport {makeGetCurrentUser} from \"../selectors/currentUser\";\nimport UserAvatarUploadModal, {CropData} from \"./UserAvatarUploadModal\";\nimport {default as UserProfileEditForm, IFormData} from './UserProfileEditForm';\nimport {default as UserProfilePasswordForm, ImFormData} from './UserProfilePaswordForm';\n\ninterface PasswordObject{\n    password1: string,\n    password2: string,\n}\n\ninterface OwnProps {\n}\n\n\nexport type UserProfileProps = OwnProps & WithNamespaces & RouteComponentProps<UserProfileMatchParams>;\n\n\nconst UserProfile = (props: UserProfileProps) => {\n\n    const dispatch = useDispatch();\n    const [showAvatarActions, setShowAvatarActions] = useState<boolean>(false);\n    const [showAvatarUploadModal, setShowAvatarUploadModal] = useState<boolean>(false);\n    const [showPasswordErrorMessage, setShowPasswordErrorMessage] = useState<boolean>(false);\n    const currentUser = useSelector(makeGetCurrentUser());\n\n    useOnBodyClick(() => {\n        setShowAvatarActions(false);\n    });\n\n    const submitForm = (data: IFormData, cProps: UserProfileProps): void => {\n        const user = currentUser!.merge(data.toJS());\n        dispatch(updateProfile(user, () => cProps.history.push(Routes.inspectio)));\n    };\n\n    const uploadAvatar = (file: any, crop: CropData) => {\n        const data = new FormData();\n        data.append('avatar_file', file);\n        data.append('crop', JSON.stringify(crop));\n\n        Api.uploadAvatar(currentUser.uid,data)\n            .then(() => {\n                updateProfileWithNewAvatarUrl();\n            })\n            .catch(() => {\n                dispatch(NotifyAction.Command.error(\n                    props.t('insp.user.avatar_upload.upload_failed_title'),\n                    props.t('insp.user.avatar_upload.upload_failed_text')\n                ));\n            })\n            .finally(() => {\n                setShowAvatarUploadModal(false);\n                setShowAvatarActions(false);\n            });\n    };\n\n    const deleteAvatar = () => {\n        Api.deleteAvatar(currentUser.uid)\n            .then(() => {\n                updateProfileWithNewAvatarUrl();\n            })\n            .catch(() => {\n                dispatch(NotifyAction.Command.error(\n                    props.t('insp.user.avatar_upload.deletion_failed_title'),\n                    props.t('insp.user.avatar_upload.deletion_failed_text')\n                ));\n            })\n            .finally(() => {\n                setShowAvatarActions(false);\n            })\n    };\n\n    /**\n     * Updates the profile avatar url by changing the timestamp to prevent caching issues\n     */\n    const updateProfileWithNewAvatarUrl = () => {\n        dispatch(updateProfile(\n            currentUser!.merge({\n                avatarUrl: '/avatar/' + currentUser.uid +\n                    '?displayName=' + encodeURI(currentUser.displayName) + '&timestamp=' + Date.now(),\n            }),\n            () => { return; }\n        ));\n    };\n\n    const submitFormPassword = (data: ImFormData): void => {\n        const defaultPwdSet = {\n            password1: \"\",\n            password2: \"\",\n        };\n\n        const pws = {...defaultPwdSet, ...data.toJS()};\n\n        if (pws.password1 === pws.password2) {\n            setShowPasswordErrorMessage(false);\n            dispatch(updatePassword(pws.password1));\n            dispatch(reset('UserProfilePasswordForm'));\n        } else {\n            setShowPasswordErrorMessage(true);\n        }\n    };\n\n    return <Container>\n        <Grid stackable={true}>\n            <Grid.Row>\n                <Grid.Column width=\"2\" className=\"tabletHidden\" />\n                <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"12\">\n                    <Header as=\"h1\" icon={true} textAlign='center'>\n                        <Dropdown open={showAvatarActions} icon={false}>\n                            <Dropdown.Menu>\n                                <Dropdown.Item\n                                    text={props.t('app.form.upload')}\n                                    onClick={() => setShowAvatarUploadModal(true)}\n                                />\n                                <Dropdown.Item\n                                    text={props.t('app.form.delete')}\n                                    onClick={deleteAvatar}\n                                />\n                            </Dropdown.Menu>\n                        </Dropdown>\n                        <img\n                            style={{ cursor: 'pointer' }}\n                            onClick={(e: SyntheticEvent) => {e.stopPropagation(); setShowAvatarActions(!showAvatarActions);}}\n                            className={\"ui circular image\"}\n                            src={currentUser.avatarUrl}\n                        />\n                        <Header.Content>\n                            {props.t('insp.user.profile_headline', {user_name: currentUser.displayName})}\n                            <Header.Subheader>{ props.t(\"insp.user.profile_subline\")}</Header.Subheader>\n                        </Header.Content>\n                    </Header>\n                </Grid.Column>\n            </Grid.Row>\n            <Grid.Row>\n                <Grid.Column width=\"2\" className=\"tabletHidden\" />\n                <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"12\">\n                    <div className=\"ui segments\">\n                        <div className=\"ui segment\">\n                            <UserProfileEditForm\n                                initialValues={fromJS(currentUser.toJS())}\n                                onSubmit={(data) => {submitForm(data, props)}}\n                            />\n                        </div>\n                    </div>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n\n        <Grid stackable={true}>\n            <Grid.Row>\n                <Grid.Column width=\"2\" className=\"tabletHidden\" />\n                <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"12\">\n                    <div className=\"ui segments\">\n                        <div className=\"ui segment\">\n                            <UserProfilePasswordForm\n                                initialValues={fromJS({password1: \"\",password2: \"\"})}\n                                onSubmit={(data) => {submitFormPassword(data)}}\n                                showErrorMessage={showPasswordErrorMessage}\n                            />\n                        </div>\n                    </div>\n                </Grid.Column>\n            </Grid.Row>\n        </Grid>\n       \n        <UserAvatarUploadModal\n            t={props.t}\n            open={showAvatarUploadModal}\n            onClose={() => {\n                setShowAvatarUploadModal(false);\n                setShowAvatarActions(false);\n            }}\n            onUpload={uploadAvatar}\n        />\n    </Container>\n};\n\nexport default withNamespaces()(withRouter(UserProfile));\n\n","export const SERVER_CONTEXT = 'InspectIO.';\n\nexport const SAVE_BOARD = '@@InspectioBoards/SaveBoard';\nexport const RENAME_BOARD = '@@InspectioBoards/RenameBoard';\nexport const IMPORT_NEW_BOARD = '@@InspectioBoards/ImportNewBoard';\nexport const IMPORT_EXISTING_BOARD = '@@InspectioBoards/ImportExistingBoard';\nexport const ADD_BOARD = '@@InspectioBoards/AddBoard';\nexport const UPDATE_BOARDS = '@@InspectioBoards/AddBoards';\nexport const FORCE_UPDATE_BOARDS = '@@InspectioBoards/ForceUpdateBoards';\nexport const SET_BOARD_TO_SNAPSHOT = '@@InspectioBoards/SetBoardToSnapshot';\nexport const SET_BOARD_DETAILS_FETCHED = '@@InspectioBoards/SetBoardDetailsFetched';\nexport const CONFIRM_DELETE_BOARD = '@@InspectioBoards/ConfirmDeleteBoard';\nexport const ABORT_BOARD_DELETION = '@@InspectioBoards/AbortBoardDeletion';\nexport const DELETE_BOARD = '@@InspectioBoards/DeleteBoard';\nexport const SHARE_BOARD = '@@InspectioBoards/ShareBoard';\nexport const RESEND_BOARD_INVITATION = '@@InspectioBoards/ResendBoardInvitation';\nexport const REVOKE_BOARD_INVITATION = '@@InspectioBoards/RevokeBoardInvitation';\nexport const REVOKE_ACCESS_TO_BOARD = '@@InspectioBoards/RevokeAccessToBoard';\nexport const CHANGE_BOARD_PERMISSIONS = '@@InspectioBoards/ChangeBoardPermissions';\nexport const ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS = '@@InspectioBoards/AdminChangeTeamBoardPermissions';\nexport const TRIGGER_IMPORT_BOARD = '@@InspectioBoards/TriggerImportBoard';\nexport const TRIGGER_EXPORT_BOARD = '@@InspectioBoards/TriggerExportBoard';\nexport const TOGGLE_BOARD_HISTORY = '@@IspectioBoards/ToggleBoardHistory';\nexport const TOGGLE_ELEMENT_DETAILS = '@@IspectioBoards/ToggleElementDetails';\nexport const TOGGLE_CODY_CONSOLE = '@@InspectioBoards/ToggleCodyConsole';\nexport const TOGGLE_TIMER_MODAL = '@@InspectioBoards/ToggleTimerModal';\nexport const TOGGLE_VIDEO_SESSION = '@@InspectioBoards/ToggleVideoSession';\nexport const APPEND_HISTORY_ENTRIES = '@@InspectioBoards/AppendHistoryEntries';\nexport const PREPEND_HISTORY_ENTRIES = '@@InspectioBoards/PrependHistoryEntries';\nexport const CLEAR_BOARD_HISTORY = '@@InspectioBoards/ClearBoardHistory';\nexport const LOAD_FIRST_BOARD_HISTORY_CHUNK = '@@InspectioBoards/LoadFirstBoardHistoryChunk';\nexport const LOAD_NEXT_BOARD_HISTORY_CHUNK = '@@InspectioBoards/LoadNextBoardHistoryChunk';\nexport const SET_NO_MORE_HISTORY_AVAILABLE = '@@InspectioBoards/SetNoMoreHistoryAvailable';\nexport const SET_IS_LOADING_HISTORY = '@@InspectioBoards/SetIsLoadingHistory';\nexport const UPDATE_BOARD_ELEMENTS_TREE = '@@InspectioBoards/UpdateBoardElementsTree';\nexport const CREATE_BOARD_CLIENT = '@@InspectioBoards/CreateBoardClient';\nexport const REMOVE_BOARD_CLIENT = '@@InspectioBoards/RemoveBoardClient';\nexport const RESET_BOARD_CLIENT_SECRET = '@@InspectioBoards/ResetBoardClientSecret';\nexport const SET_STICKY_TEMPLATE = '@@InspectioBoards/SetStickyTemplate';\nexport const UPDATE_STICKY_ADVANCED_CONFIG = '@@InspectioBoards/UpdateStickyAdvancedConfig';\nexport const IMPORT_STICKY_TEMPLATES = '@@InspectioBoards/ImportStickyTemplates';\n\nexport const OPEN_ELEMENTS_DETAILS = '@@InspectioBoards/OpenElementsDetails';\n\nexport const FILTER_BOARD_OVERVIEW = '@@InspectioBoards/FilterBoardOverview';\nexport const HIDE_SHARED_BOARDS_ON_OVERVIEW = '@@InspectioBoards/HideSharedBoardsOnOverview';\nexport const HIDE_OWN_BOARDS_ON_OVERVIEW = '@@InspectioBoards/HideOwnBoardsOnOverview';\nexport const FILTER_ELEMENTS_TREE = '@@InspectioBoards/FilterElementsTree';\n\nexport const MOVE_USER_BOARD_TO_ORGANIZATION = '@@InspectioBoards/MoveUserBoardToOrganization';\n\n\n// Board Sync\nexport const SYNC_BOARD = '@@InspectioBoards/SyncBoard';\nexport const STOP_BOARD_SYNCHRONISATION = '@@InspectioBoards/StopBoardSynchronisation';\nexport const REMOTE_BOARD_CHANGED = '@@InspectioBoards/RemoteBoardChanged';\nexport const REMOTE_BOARD_OPENED = '@@InspectioBoards/RemoteBoardOpened';\nexport const LOCAL_BOARD_CHANGED = '@@InspectioBoards/LocalBoardChanged';\nexport const LOCAL_CHANGE_SET_AS_HEAD_VERSION = '@@InspectioBoards/LocalChangeSetAsHeadVersion';\nexport const ENQUEUE_BOARD_CHANGED = '@@InspectioBoards/EnqueueBoardChanged';\nexport const DEQUEUE_BOARD_CHANGED = '@@InspectioBoards/DequeueBoardChanged';\nexport const SET_BOARD_VERSION = '@@InspectioBoards/SetBoardVersion';\nexport const APPLY_REMOTE_CHANGE = '@@InspectioBoards/ApplyRemoteChange';\nexport const REMOTE_CHANGE_APPLIED = '@@InspectioBoards/RemoteChangeApplied';\nexport const BOARD_IMPORT_STARTED = '@@InspectioBoards/BoardImportStarted';\nexport const BOARD_IMPORTED = '@@InspectioBoards/BoardImported';\nexport const BOARD_EXPORTED = '@@InspectioBoards/BoardExported';\nexport const BOARD_INITIALIZED = '@@InspectioBoards/BoardInitialized';\nexport const LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE = '@@InspectioBoards/LocalBoardUpdatedWithRemoteChange';\n\n// Events\nexport const BOARD_INVITATION_SENT = '@@InspectioBoards/BoardInvitationSent';\nexport const BOARD_INVITATION_RESENT = '@@InspectioBoards/BoardInvitationResent';\nexport const BOARD_INVITATION_REVOKED = '@@InspectioBoards/BoardInvitationRevoked';\nexport const BOARD_ACCESS_REVOKED = '@InspectioBoards/BoardAccessRevoked';\nexport const BOARD_PERMISSIONS_CHANGED = '@@InspectioBoards/BoardPermissionsChanged';\nexport const TEAM_BOARD_PERMISSIONS_CHANGED = '@@InspectioBoards/TeamBoardPermissionsChanged';\nexport const BOARD_PERMISSIONS_FOR_USERS_FETCHED = '@@InspectioBoards/BoardPermissionsForUsersFetched';\nexport const BOARD_PERMISSIONS_FOR_TEAMS_FETCHED = '@@InspectioBoards/BoardPermissionsForTeamsFetched';\nexport const OPEN_BOARD_INVITATIONS_FETCHED = '@@InspectioBoards/OpenBoardInvitationsFetched';\nexport const ACTIVE_GRAPH_ELEMENT_CHANGED = '@@InspectioBoards/ActiveGraphElementChanged';\nexport const ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED = '@@InspectioBoards/ActiveGraphElementLabelChanged';\nexport const ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED = '@@InspectioBoards/ActiveGraphElementMetadataChanged';\nexport const BOARD_GRAPH_ELEMENTS_FETCHED = '@@InspectioBoards/BoardGraphElementsFetched';\nexport const BOARD_CLIENT_FETCHED = '@@InspectioBoards/BoardClientFetched';\nexport const BOARD_CLIENT_NOT_CONFIGURED = '@@InspectioBoards/BoardClientNotConfigured';\nexport const BOARD_CLIENT_SECRET_FETCHED = '@@InspectioBoards/BoardClientSecretFetched';\nexport const BOARD_STICKY_TEMPLATES_FETCHED = '@@InspectioBoards/BoardStickyTemplatesFetched';\nexport const STICKY_TEMPLATE_SET = '@@InspectioBoards/StickyTemplateSet';\nexport const STICKY_ADVANCED_CONFIG_UPDATED = '@@InspectioBoards/StickyAdvancedConfigUpdated';\nexport const STICKY_TEMPLATES_IMPORTED = '@@InspectioBoards/StickyTemplatesImported';\nexport const USER_BOARD_MOVED_TO_ORGANIZATION = '@@InspectioBoards/UserBoardMovedToOrganization';\nexport const INITIAL_BOARD_LIST_LOADED = '@@InspectioBoards/InitialBoardListLoaded';\n\n// Queries\nexport const START_FETCH_USER_BOARDS = '@@InspectioBoards/StartFetchUserBoards';\nexport const FETCH_USER_BOARDS = '@@InspectioBoards/FetchUserBoards';\nexport const FETCH_USER_BOARD = '@@InspectioBoards/FetchUserBoard';\nexport const FETCH_BOARD_PERMISSIONS_FOR_USERS = '@@InspectioBoards/BoardPermissionsForUsers';\nexport const FETCH_BOARD_PERMISSIONS_FOR_TEAMS = '@@InspectioBoards/BoardPermissionsForTeams';\nexport const FETCH_OPEN_BOARD_INVITATIONS = '@@InspectioBoards/FetchOpenBoardInvitations';\nexport const FETCH_BOARD_GRAPH_ELEMENTS = '@@InspectioBoards/BoardGraphElements';\nexport const FETCH_BOARD_CLIENT = '@@InspectioBoards/FetchBoardClient';\nexport const FETCH_BOARD_CLIENT_SECRET = '@@InspectioBoards/FetchBoardClientSecret';\nexport const FETCH_BOARD_STICKY_TEMPLATES = '@@InspectioBoards/FetchBoardStickyTemplates';\n","import {AxiosPromise} from \"axios\";\nimport {\n    axiosApiPromise, boardImageDeletionApiPromise, boardImageReplacementApiPromise,\n    boardImageUploadApiPromise,\n    ResponseType\n} from '../../api/util';\nimport * as TeamModel from \"../../InspectioTeams/model/Team\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {UserModel} from \"../../User\";\nimport { BoardModel, BoardVersioning } from '../model';\nimport {BoardId, BoardXml} from \"../model/Board\";\nimport {GraphElementType} from \"../model/BoardGraphElement\";\nimport {BoardInvitationId} from \"../model/BoardInvitation\";\nimport {Permissions} from \"../model/BoardPermissionForUser\";\nimport {NodeType} from \"../model/Graph\";\nimport {TemplateSchema, TemplateType} from \"../model/StickyTemplate\";\nimport { SERVER_CONTEXT } from './constants';\n\nexport const installOrganizationBoard = (organizationId: OrganizationId, boardId: BoardModel.BoardId, boardName: BoardModel.BoardName): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InstallOrganizationBoard', {organizationId, boardId, boardName});\n}\n\nexport const renameBoard = (boardId: BoardModel.BoardId, name: BoardModel.BoardName): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RenameBoard', {boardId, name});\n};\n\nexport const deleteBoard = (boardId: BoardModel.BoardId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'DeleteBoard', {boardId});\n};\n\nexport const takeBoardSnapshot = (boardId: BoardModel.BoardId, boardVersion: BoardVersioning.BoardVersion, content: BoardModel.BoardXml) => {\n    return axiosApiPromise(\n        SERVER_CONTEXT + 'TakeBoardSnapshot',\n        {boardId, boardVersion: {userId: boardVersion.userId, version: boardVersion.version}, content});\n};\n\nexport const shareBoard = (boardId: BoardModel.BoardId, email: UserModel.Email, permissions?: Permissions): Promise<ResponseType> => {\n    return axiosApiPromise(\n        SERVER_CONTEXT + 'ShareBoardWithUser',\n        {boardId, invitedUser: email, boardPermissions: (permissions || {writeAccess: true, readAccess: true, adminAccess: false})}\n    )\n};\n\nexport const resendBoardInvitation = (invitationId: BoardInvitationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ResendBoardInvitation', { invitationId });\n};\n\nexport const revokeBoardInvitation = (invitationId: BoardInvitationId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RevokeBoardInvitation', { invitationId });\n};\n\nexport const ackBoardInvitation = (invitationId: BoardInvitationId): Promise<ResponseType> => {\n    return axiosApiPromise(\n        SERVER_CONTEXT + 'AcknowledgeInvitation',\n        {invitationId}\n    )\n};\n\nexport const revokeAccessToBoard = (boardId: BoardModel.BoardId, userId: UserModel.UserId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RevokeAccessToBoard', {boardId, userId});\n};\n\nexport const changeBoardPermissions = (boardId: BoardModel.BoardId, userId: UserModel.UserId, permissions: Permissions): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ChangeBoardPermissions', {boardId, userId, boardPermissions: permissions});\n};\n\nexport const adminChangeTeamBoardPermissions = (boardId: BoardModel.BoardId, teamId: TeamModel.TeamId, permissions: Permissions): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AdminChangeTeamBoardPermissions', {boardId, teamId, boardPermissions: permissions});\n}\n\nexport const fetchUserBoard = (boardId: BoardModel.BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'UserBoard', {boardId});\n};\n\nexport const fetchUserBoards = () => {\n    return axiosApiPromise(SERVER_CONTEXT + 'UserBoards', {});\n};\n\nexport const fetchOlderPatches = (boardId: BoardModel.BoardId, boardVersion: BoardVersioning.BoardVersion) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardHistory', {boardId, fromBoardVersion: boardVersion.toJSON()});\n};\n\nexport const fetchNewerPatches = (boardId: BoardModel.BoardId, boardVersion: BoardVersioning.BoardVersion) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardHistory', {boardId, fromBoardVersion: boardVersion.toJSON(), mode: \"newer\"});\n};\n\nexport const fetchBoardPermissionsForUsers = (boardId: BoardModel.BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardPermissionsForUsers', { boardId });\n};\n\nexport const fetchBoardPermissionsForTeams = (boardId: BoardModel.BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardPermissionsForTeams', { boardId });\n};\n\nexport const fetchOpenBoardInvitations = (boardId: BoardModel.BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'OpenBoardInvitations', { boardId });\n};\n\nexport const fetchBoardOfInvitation = (invitationId: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InvitationBoard', {invitationId});\n};\n\nexport const fetchBoardXmlFromLink = (link: string): Promise<BoardXml> => {\n    return fetch(link).then(response => response.text())\n}\n\nexport const uploadBoardImage = (boardId: BoardId, imageContent: string|ArrayBuffer, mimeType: string): AxiosPromise<{imageId: string}> => {\n    return boardImageUploadApiPromise(boardId, imageContent, mimeType);\n};\n\nexport const replaceBoardImage = (boardId: BoardId, imageId: string, imageContent: string|ArrayBuffer, mimeType: string): AxiosPromise<{imageId: string}> => {\n    return boardImageReplacementApiPromise(boardId, imageId, imageContent, mimeType);\n};\n\nexport const deleteBoardImage = (imageUrl: string): AxiosPromise<any> => {\n    return boardImageDeletionApiPromise(imageUrl);\n};\n\nexport const fetchBoardGraphElements = (boardId: BoardId, type: GraphElementType) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardGraphElements', { boardId, type });\n};\n\nexport const fetchBoardClient = (boardId: BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardClient', { boardId });\n};\n\nexport const fetchBoardClientSecret = (boardId: BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'BoardClientSecret', { boardId });\n};\n\nexport const createBoardClient = (boardId: BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'CreateBoardClient', { boardId });\n};\n\nexport const removeBoardClient = (boardId: BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RemoveBoardClient', { boardId });\n};\n\nexport const resetBoardClientSecret = (boardId: BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ResetBoardClientSecret', { boardId });\n};\n\nexport const fetchBoardStickyTemplates = (boardId: BoardModel.BoardId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'StickyTemplates', { boardId });\n};\n\nexport const setStickyTemplate = (boardId: BoardModel.BoardId, cellType: NodeType, template: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'SetStickyTemplate', {boardId, cellType, template});\n}\n\nexport const updateStickyAdvancedConfig = (boardId: BoardModel.BoardId, cellType: NodeType, templateType: TemplateType, templateSchema?: TemplateSchema) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'UpdateStickyAdvancedConfig', {boardId, cellType, templateType, ...(templateSchema ? {templateSchema} : {})});\n}\n\nexport const moveUserBoardToOrganization = (organizationId: OrganizationId, boardId: BoardId): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'MoveUserBoardToOrganization', {organizationId, boardId});\n}\n","import {History} from \"history\";\nimport {List} from \"immutable\";\nimport { action } from 'typesafe-actions';\nimport {Model as TeamModel} from \"../../InspectioTeams\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {UserModel} from '../../User';\nimport { BoardModel, BoardSnapshot, BoardSync } from '../model';\nimport {BoardId} from \"../model/Board\";\nimport {BoardInvitationId} from \"../model/BoardInvitation\";\nimport {Permissions} from \"../model/BoardPermissionForUser\";\nimport {BoardVersion} from \"../model/BoardVersion\";\nimport {Graph, Node, NodeType} from \"../model/Graph\";\nimport {BoardHistory} from \"../model/HistoryEntry\";\nimport {StickyTemplate, TemplateSchema, TemplateType} from \"../model/StickyTemplate\";\nimport {\n    ABORT_BOARD_DELETION,\n    ADD_BOARD, ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS,\n    APPEND_HISTORY_ENTRIES, CHANGE_BOARD_PERMISSIONS,\n    CLEAR_BOARD_HISTORY,\n    CONFIRM_DELETE_BOARD, CREATE_BOARD_CLIENT,\n    DELETE_BOARD,\n    DEQUEUE_BOARD_CHANGED,\n    ENQUEUE_BOARD_CHANGED,\n    FILTER_BOARD_OVERVIEW,\n    FILTER_ELEMENTS_TREE, FORCE_UPDATE_BOARDS,\n    HIDE_OWN_BOARDS_ON_OVERVIEW,\n    HIDE_SHARED_BOARDS_ON_OVERVIEW,\n    IMPORT_EXISTING_BOARD,\n    IMPORT_NEW_BOARD, IMPORT_STICKY_TEMPLATES,\n    LOAD_FIRST_BOARD_HISTORY_CHUNK,\n    LOAD_NEXT_BOARD_HISTORY_CHUNK, MOVE_USER_BOARD_TO_ORGANIZATION, PREPEND_HISTORY_ENTRIES,\n    REMOVE_BOARD_CLIENT, RENAME_BOARD, RESEND_BOARD_INVITATION,\n    RESET_BOARD_CLIENT_SECRET, REVOKE_ACCESS_TO_BOARD,\n    REVOKE_BOARD_INVITATION,\n    SAVE_BOARD,\n    SET_BOARD_DETAILS_FETCHED,\n    SET_BOARD_TO_SNAPSHOT,\n    SET_IS_LOADING_HISTORY, SET_NO_MORE_HISTORY_AVAILABLE,\n    SET_STICKY_TEMPLATE,\n    SHARE_BOARD,\n    STOP_BOARD_SYNCHRONISATION,\n    SYNC_BOARD, TOGGLE_BOARD_HISTORY, TOGGLE_CODY_CONSOLE,\n    TOGGLE_ELEMENT_DETAILS, TOGGLE_TIMER_MODAL, TOGGLE_VIDEO_SESSION,\n    TRIGGER_EXPORT_BOARD,\n    TRIGGER_IMPORT_BOARD,\n    UPDATE_BOARD_ELEMENTS_TREE, UPDATE_BOARDS,\n    UPDATE_STICKY_ADVANCED_CONFIG\n} from './constants';\n\nexport const addBoard = (board: BoardModel.Board, history: History<any>) => action(ADD_BOARD, {board, history});\nexport const updateBoards = (boards: BoardModel.Board[]) => action(UPDATE_BOARDS, boards);\nexport const forceUpdateBoards = (boards: BoardModel.Board[]) => action(FORCE_UPDATE_BOARDS, boards);\nexport const setBoardToSnapshot = (snapshot: BoardSnapshot.BoardSnapshot) => action(SET_BOARD_TO_SNAPSHOT, {snapshot});\nexport const setBoardDetailsFetched = (boardId: BoardModel.BoardId, writeAccess: boolean) => action(SET_BOARD_DETAILS_FETCHED, {boardId, writeAccess});\n\nexport const triggerImportBoard = (boardId: BoardModel.BoardId) => action(TRIGGER_IMPORT_BOARD, {boardId});\nexport const triggerExportBoard = (boardId: BoardModel.BoardId) => action(TRIGGER_EXPORT_BOARD, {boardId});\nexport const toggleBoardHistory = (boardId: BoardModel.BoardId, visible: boolean) => action(TOGGLE_BOARD_HISTORY, {boardId, visible});\nexport const toggleElementDetails = (boardId: BoardModel.BoardId, visible: boolean, focusEditor: boolean) => action(TOGGLE_ELEMENT_DETAILS, {boardId, visible, focusEditor});\nexport const toggleCodyConsole = (boardId: BoardModel.BoardId, visible: boolean) => action(TOGGLE_CODY_CONSOLE, {boardId, visible});\nexport const toggleTimerModal = (boardId: BoardModel.BoardId, visible: boolean) => action(TOGGLE_TIMER_MODAL, {boardId, visible});\nexport const toggleVideoSession = (boardId: BoardModel.BoardId, active: boolean) => action(TOGGLE_VIDEO_SESSION, {boardId, active});\nexport const appendHistoryEntries = (boardId: BoardModel.BoardId, entries: BoardHistory) => action(APPEND_HISTORY_ENTRIES, {boardId, entries});\nexport const prependHistoryEntries = (boardId: BoardModel.BoardId, entries: BoardHistory) => action(PREPEND_HISTORY_ENTRIES, {boardId, entries});\nexport const clearBoardHistory = (boardId: BoardModel.BoardId) => action(CLEAR_BOARD_HISTORY, {boardId});\nexport const loadNextBoardHistoryChunk = (boardId: BoardModel.BoardId, boardVersion: BoardVersion) => action(LOAD_NEXT_BOARD_HISTORY_CHUNK, {boardId, boardVersion});\nexport const loadFirstBoardHistoryChunk = (boardId: BoardModel.BoardId) => action(LOAD_FIRST_BOARD_HISTORY_CHUNK, {boardId});\nexport const setNoMoreHistoryAvailable = (boardId: BoardModel.BoardId) => action(SET_NO_MORE_HISTORY_AVAILABLE, {boardId});\nexport const setIsLoadingHistory = (boardId: BoardModel.BoardId, loading: boolean) => action(SET_IS_LOADING_HISTORY, {boardId, loading});\n\n\nexport const filterBoardOverview = (filter: string) => action(FILTER_BOARD_OVERVIEW, {filter});\nexport const hideSharedBoardsOnOverview = (hide: boolean) => action(HIDE_SHARED_BOARDS_ON_OVERVIEW, {hide});\nexport const hideOwnBoardsOnOverview = (hide: boolean) => action(HIDE_OWN_BOARDS_ON_OVERVIEW, {hide});\nexport const filterElementsTree = (boardId: BoardId, filter: string, focus?: boolean) => action(FILTER_ELEMENTS_TREE, {boardId, filter, focus});\n\nexport const saveBoard = (board: BoardModel.Board, graph: Graph) => action(SAVE_BOARD, {board, graph});\nexport const renameBoard = (board: BoardModel.Board) => action(RENAME_BOARD, {board});\nexport const importNewBoard = (boardName: string, boardXml: string, boardId?: BoardId, importTemporary?: boolean) => action(IMPORT_NEW_BOARD, {boardName, boardXml, boardId, importTemporary});\nexport const importExistingBoard = (board: BoardModel.Board) => action(IMPORT_EXISTING_BOARD, {board});\n\nexport const confirmDeleteBoard = (boardId: string) => action(CONFIRM_DELETE_BOARD, {boardId});\n\nexport const abortBoardDeletion = (boardId: string) => action(ABORT_BOARD_DELETION, {boardId});\n\nexport const deleteBoard = (boardId: BoardModel.BoardId) => action(DELETE_BOARD, {boardId});\n\nexport const syncBoard = (boardId: BoardModel.BoardId, userId: UserModel.UserId, username: UserModel.Username) => action(SYNC_BOARD, {boardId, userId, username});\nexport const shareBoard = (boardId: BoardModel.BoardId, email: UserModel.Email, permissions?: Permissions) => action(SHARE_BOARD, {boardId, email, permissions});\nexport const resendBoardInvitation = (invitationId: BoardInvitationId) => action(RESEND_BOARD_INVITATION,{invitationId});\nexport const revokeBoardInvitation = (invitationId: BoardInvitationId) => action(REVOKE_BOARD_INVITATION, {invitationId});\nexport const revokeAccessToBoard = (boardId: BoardModel.BoardId, userId: UserModel.UserId) => action(REVOKE_ACCESS_TO_BOARD, {boardId, userId});\nexport const changeBoardPermissions = (boardId: BoardModel.BoardId, userId: UserModel.UserId, permissions: Permissions) => action(CHANGE_BOARD_PERMISSIONS, {boardId, userId, permissions});\nexport const adminChangeTeamBoardPermissions = (boardId: BoardModel.BoardId, teamId: TeamModel.Team.TeamId, permissions: Permissions) => action(ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS, {boardId, teamId, permissions});\nexport const stopBoardSynchronisation = (boardId: BoardModel.BoardId) => action(STOP_BOARD_SYNCHRONISATION, {boardId});\n\nexport const enqueueBoardChanged = (boardChanged: BoardSync.BoardChanged) => action(ENQUEUE_BOARD_CHANGED, {boardChanged});\n\nexport const dequeueBoardChangedEvents = (events: BoardSync.BoardQueue) => action(DEQUEUE_BOARD_CHANGED, {events});\n\nexport const updateBoardElementsTree = (boardId: BoardModel.BoardId, elements: List<Node>) => action(UPDATE_BOARD_ELEMENTS_TREE, {boardId, elements});\n\nexport const createBoardClient = (boardId: BoardModel.BoardId) => action(CREATE_BOARD_CLIENT, {boardId});\nexport const removeBoardClient = (boardId: BoardModel.BoardId) => action(REMOVE_BOARD_CLIENT, {boardId});\nexport const resetBoardClientSecret = (boardId: BoardModel.BoardId) => action(RESET_BOARD_CLIENT_SECRET, {boardId});\n\nexport const setStickyTemplate = (boardId: BoardModel.BoardId, cellType: NodeType, template: string, disableNotification?: boolean) => action(SET_STICKY_TEMPLATE, {boardId, cellType, template, disableNotification});\nexport const updateStickyAdvancedConfig = (boardId: BoardModel.BoardId, cellType: NodeType, templateType: TemplateType, templateSchema?: TemplateSchema, disableNotification?: boolean) => action(UPDATE_STICKY_ADVANCED_CONFIG, {boardId, cellType, templateType, templateSchema, disableNotification});\nexport const importStickyTemplates = (boardId: BoardModel.BoardId, stickyTemplates: List<StickyTemplate>, finishedCb: () => void) => action(IMPORT_STICKY_TEMPLATES, {boardId, stickyTemplates, finishedCb});\n\nexport const moveUserBoardToOrganization = (organizationId: OrganizationId, boardId: BoardId) => action(MOVE_USER_BOARD_TO_ORGANIZATION, {organizationId, boardId});\n","import {List} from \"immutable\";\nimport { action } from 'typesafe-actions';\nimport * as Socket from '../../Socket';\nimport {UserModel} from \"../../User/model\";\nimport {BoardGraphElement, BoardInvitation, BoardPermissionForTeam, BoardPermissionForUser} from \"../model\";\nimport { BoardSync } from '../model';\nimport {Board, BoardId} from \"../model/Board\";\nimport {BoardClient} from \"../model/BoardClient\";\nimport {Permissions} from \"../model/BoardPermissionForUser\";\nimport {Graph} from \"../model/Graph\";\nimport {StickyTemplate} from \"../model/StickyTemplate\";\nimport {ActiveGraphElement} from \"../reducers/applyActiveGraphElementActions\";\nimport {\n    ACTIVE_GRAPH_ELEMENT_CHANGED, ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED, ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED,\n    BOARD_ACCESS_REVOKED,\n    BOARD_CLIENT_FETCHED,\n    BOARD_CLIENT_NOT_CONFIGURED, BOARD_CLIENT_SECRET_FETCHED, BOARD_EXPORTED,\n    BOARD_GRAPH_ELEMENTS_FETCHED, BOARD_IMPORT_STARTED,\n    BOARD_IMPORTED,\n    BOARD_INITIALIZED,\n    BOARD_INVITATION_RESENT,\n    BOARD_INVITATION_REVOKED,\n    BOARD_INVITATION_SENT,\n    BOARD_PERMISSIONS_CHANGED,\n    BOARD_PERMISSIONS_FOR_TEAMS_FETCHED,\n    BOARD_PERMISSIONS_FOR_USERS_FETCHED, BOARD_STICKY_TEMPLATES_FETCHED, INITIAL_BOARD_LIST_LOADED,\n    LOCAL_BOARD_CHANGED,\n    LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE,\n    LOCAL_CHANGE_SET_AS_HEAD_VERSION,\n    OPEN_BOARD_INVITATIONS_FETCHED,\n    REMOTE_BOARD_CHANGED, STICKY_ADVANCED_CONFIG_UPDATED, STICKY_TEMPLATE_SET, STICKY_TEMPLATES_IMPORTED,\n    TEAM_BOARD_PERMISSIONS_CHANGED,\n    USER_BOARD_MOVED_TO_ORGANIZATION\n} from './constants';\n\nexport const remoteBoardChanged = (event: BoardSync.RawBoardChangedProps) => action(REMOTE_BOARD_CHANGED, {event});\n\nexport const localBoardChanged = (boardChanged: BoardSync.BoardChanged) => action(LOCAL_BOARD_CHANGED, {boardChanged});\n\nexport const localChangeSetAsHeadVersion = (socketCmd: Socket.Action.Action.SocketCmd<BoardSync.RawBoardChangedProps>) => action(LOCAL_CHANGE_SET_AS_HEAD_VERSION, {socketCmd});\n\nexport const boardImportStarted = (boardId: BoardId) => action(BOARD_IMPORT_STARTED, {boardId});\nexport const boardImported = (boardId: BoardId, board: Board, graph: Graph) => action(BOARD_IMPORTED, {boardId, board, graph});\nexport const boardExported = (boardId: BoardId) => action(BOARD_EXPORTED, {boardId});\nexport const boardInitialized = (board: Board, graph: Graph) => action(BOARD_INITIALIZED, {board, graph});\n\nexport const initialBoardListLoaded = () => action(INITIAL_BOARD_LIST_LOADED);\n\nexport const localBoardUpdatedWithRemoteChange = (boardId: BoardId, board: Board, graph: Graph) => action(LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE, {boardId, board, graph});\n\nexport const boardInvitationSent = (boardInvitation: BoardInvitation.BoardInvitation) => action(BOARD_INVITATION_SENT, {boardInvitation});\nexport const boardInvitationResent = (boardInvitation: BoardInvitation.BoardInvitation) => action(BOARD_INVITATION_RESENT, {boardInvitation});\nexport const boardInvitationRevoked = (boardInvitation: BoardInvitation.BoardInvitation) => action(BOARD_INVITATION_REVOKED, {boardInvitation});\nexport const boardAccessRevoked = (boardId: BoardId, userId: UserModel.UserId) => action(BOARD_ACCESS_REVOKED, {boardId, userId});\nexport const boardPermissionsChanged = (boardId: BoardId, userId: UserModel.UserId, permissions: Permissions) => action(BOARD_PERMISSIONS_CHANGED, {boardId, userId, permissions});\nexport const teamBoardPermissionsChanged = (boardPermission: BoardPermissionForTeam.BoardPermissionForTeam) => action(TEAM_BOARD_PERMISSIONS_CHANGED, boardPermission);\n\nexport const boardPermissionsForUsersFetched = (boardPermissions: List<BoardPermissionForUser.BoardPermissionForUser>) =>\n    action(BOARD_PERMISSIONS_FOR_USERS_FETCHED, {boardPermissions});\n\nexport const boardPermissionsForTeamsFetched = (boardPermissions: List<BoardPermissionForTeam.BoardPermissionForTeam>) =>\n    action(BOARD_PERMISSIONS_FOR_TEAMS_FETCHED, {boardPermissions});\n\nexport const openBoardInvitationsFetched = (boardInvitations: List<BoardInvitation.BoardInvitation>) => action(OPEN_BOARD_INVITATIONS_FETCHED, {boardInvitations});\n\nexport const activeGraphElementChanged = (boardId: BoardId, element: ActiveGraphElement | undefined) => action(ACTIVE_GRAPH_ELEMENT_CHANGED, {boardId, element});\nexport const activeGraphElementLabelChanged = (boardId: BoardId, elementId: string, label: string) => action(ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED, {boardId, elementId, label});\nexport const activeGraphElementMetadataChanged = (boardId: BoardId, elementId: string, metadata: string | undefined) => action(ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED, {boardId, elementId, metadata});\nexport const boardGraphElementsFetched = (boardId: BoardId, elements: List<BoardGraphElement.BoardGraphElement>) => action(BOARD_GRAPH_ELEMENTS_FETCHED, { boardId, elements });\nexport const boardClientFetched = (boardId: BoardId, client: BoardClient) => action(BOARD_CLIENT_FETCHED, { boardId, client });\nexport const boardClientNotConfigured = (boardId: BoardId) => action(BOARD_CLIENT_NOT_CONFIGURED, { boardId });\nexport const boardClientSecretFetched = (boardId: BoardId, clientSecret: string) => action(BOARD_CLIENT_SECRET_FETCHED, { boardId, clientSecret });\n\nexport const boardStickyTemplatesFetched = (stickyTemplates: List<StickyTemplate>) => action(BOARD_STICKY_TEMPLATES_FETCHED, {stickyTemplates});\nexport const stickyTemplateSet = (stickyTemplate: StickyTemplate) => action(STICKY_TEMPLATE_SET, {stickyTemplate});\nexport const stickyAdvancedConfigUpdated = (stickyTemplate: StickyTemplate) => action(STICKY_ADVANCED_CONFIG_UPDATED, {stickyTemplate});\nexport const stickyTemplatesImported = (stickyTemplates: List<StickyTemplate>) => action(STICKY_TEMPLATES_IMPORTED, {stickyTemplates});\nexport const userBoardMovedToOrganization = (board: Board) => action(USER_BOARD_MOVED_TO_ORGANIZATION, board);\n","import {action} from \"typesafe-actions\";\nimport {BoardModel} from '../model';\nimport {GraphElementType} from \"../model/BoardGraphElement\";\nimport {\n    FETCH_BOARD_CLIENT, FETCH_BOARD_CLIENT_SECRET, FETCH_BOARD_GRAPH_ELEMENTS,\n    FETCH_BOARD_PERMISSIONS_FOR_TEAMS,\n    FETCH_BOARD_PERMISSIONS_FOR_USERS, FETCH_BOARD_STICKY_TEMPLATES, FETCH_OPEN_BOARD_INVITATIONS,\n    FETCH_USER_BOARD,\n    FETCH_USER_BOARDS,\n    START_FETCH_USER_BOARDS\n} from './constants';\n\nexport const startFetchUserBoards = () => action(START_FETCH_USER_BOARDS);\n\nexport const fetchUserBoards = () => action(FETCH_USER_BOARDS);\n\nexport const fetchUserBoard = (boardId: BoardModel.BoardId) => action(FETCH_USER_BOARD, {boardId});\n\nexport const fetchBoardPermissionsForUsers = (boardId: BoardModel.BoardId) => action(FETCH_BOARD_PERMISSIONS_FOR_USERS, {boardId});\n\nexport const fetchBoardPermissionsForTeams = (boardId: BoardModel.BoardId) => action(FETCH_BOARD_PERMISSIONS_FOR_TEAMS, {boardId});\n\nexport const fetchOpenBoardInvitations = (boardId: BoardModel.BoardId) => action(FETCH_OPEN_BOARD_INVITATIONS, {boardId});\n\nexport const fetchBoardGraphElements = (boardId: BoardModel.BoardId, type: GraphElementType) => action(FETCH_BOARD_GRAPH_ELEMENTS, {boardId, type});\n\nexport const fetchBoardClient = (boardId: BoardModel.BoardId) => action(FETCH_BOARD_CLIENT, {boardId});\n\nexport const fetchBoardClientSecret = (boardId: BoardModel.BoardId) => action(FETCH_BOARD_CLIENT_SECRET, {boardId});\n\nexport const fetchBoardStickyTemplates = (boardId: BoardModel.BoardId) => action(FETCH_BOARD_STICKY_TEMPLATES, {boardId});\n","import {Record} from 'immutable';\nimport {UserModel} from '../../User';\n\nexport interface BoardVersionProps {\n    userId: UserModel.UserId;\n    version: number;\n    head?: boolean;\n}\n\nexport const defaultBoardVersionProps: BoardVersionProps = {\n    userId: '',\n    version: 0,\n    head: false,\n}\n\nexport class BoardVersion extends Record(defaultBoardVersionProps) implements BoardVersionProps {\n    public constructor(data: BoardVersionProps) {\n        if(data.head === undefined || data.head === null) {\n            data.head = false;\n        }\n\n        super(data);\n    }\n\n    public isHead(): boolean {\n        return this.head || false;\n    }\n\n    public asHead(): BoardVersion {\n        return this.set('head', true);\n    }\n\n    public equals(other: BoardVersion): boolean {\n        return this.userId === other.userId && this.version === other.version;\n    }\n\n    public isNewerThan(other: BoardVersion): boolean {\n        if(this.userId !== other.userId) {\n            return true;\n        }\n\n        return this.version > other.version;\n    }\n}\n","import {List, Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {TeamId} from \"../../InspectioTeams/model/Team\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {UserModel} from \"../../User\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {BoardSnapshot} from \"./BoardSnapshot\";\nimport {BoardVersion, defaultBoardVersionProps} from \"./BoardVersion\";\n\nexport type BoardId = string;\nexport type BoardName = string;\nexport type BoardXml = string;\n\nexport interface BoardProps {\n    uid: BoardId;\n    name: string;\n    version: BoardVersion;\n    xml?: BoardXml | null;\n    lastModified?: string;\n    inDeletion?: boolean;\n    shouldImport?: boolean;\n    shouldExport?: boolean;\n    shouldShowHistory?: boolean;\n    shouldShowElementDetails?: boolean;\n    shouldFocusMetadataEditor?: boolean;\n    shouldShowCodyConsole?: boolean;\n    shouldShowTimerModal?: boolean;\n    videoSessionActive?: boolean;\n    detailsFetched?: boolean;\n    shared: boolean;\n    sharedWith: List<UserId>;\n    assignedTeams: List<TeamId>;\n    writeAccess?: boolean;\n    example?: boolean;\n    owner: UserId | null;\n    creator: UserId | null;\n    organization: OrganizationId | null;\n    tempBoard: boolean;\n}\n\nexport const defaultBoardProps: BoardProps = {\n    uid: '',\n    name: '',\n    version: new BoardVersion(defaultBoardVersionProps),\n    xml: null,\n    lastModified: (() => new Date())().toISOString(),\n    inDeletion: false,\n    shouldImport: false,\n    shouldExport: false,\n    shouldShowHistory: false,\n    shouldShowElementDetails: false,\n    shouldFocusMetadataEditor: false,\n    shouldShowCodyConsole: false,\n    shouldShowTimerModal: false,\n    videoSessionActive: false,\n    shared: false,\n    detailsFetched: false,\n    sharedWith: List<UserId>(),\n    assignedTeams: List<TeamId>(),\n    writeAccess: false,\n    example: false,\n    owner: null,\n    creator: null,\n    organization: null,\n    tempBoard: false,\n};\n\nexport const createUserBoard = (userId: UserModel.UserId, name: BoardName): Board => {\n    return new Board({\n        uid: '',\n        name,\n        version: new BoardVersion({userId, version: 1}),\n        xml: null,\n        lastModified: undefined,\n        inDeletion: false,\n        shared: false,\n        detailsFetched: true,\n        sharedWith: List<UserId>(),\n        assignedTeams: List<TeamId>(),\n        writeAccess: true,\n        example: false,\n        owner: null,\n        creator: userId,\n        organization: null,\n        tempBoard: false,\n    });\n};\n\nexport const createTempBoard = (userId: UserModel.UserId, name: BoardName): Board => {\n    return new Board({\n        uid: '',\n        name,\n        version: new BoardVersion({userId, version: 1}),\n        xml: null,\n        lastModified: undefined,\n        inDeletion: false,\n        shared: false,\n        detailsFetched: true,\n        sharedWith: List<UserId>(),\n        assignedTeams: List<TeamId>(),\n        writeAccess: true,\n        example: false,\n        owner: null,\n        creator: userId,\n        organization: null,\n        tempBoard: true,\n    });\n};\n\nexport class Board extends Record(defaultBoardProps) implements BoardProps {\n    public constructor(data: BoardProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        if(data.xml === undefined) {\n            data.xml = null;\n        }\n\n        if(data.lastModified === undefined) {\n            data.lastModified = (() => new Date())().toISOString();\n        }\n\n        super(data);\n    }\n\n    public updateXmlAndVersionFromBoard(board: Board): Board\n    {\n        let changed = this.set('xml', board.xml);\n        changed = changed.set('version', board.version);\n        changed = changed.set('lastModified', board.lastModified);\n        return changed;\n    }\n\n    public updateXmlFromSnapshot(snapshot: BoardSnapshot): Board\n    {\n        let changed = this.set('xml', snapshot.xml);\n        changed = changed.set('version', snapshot.boardVersion);\n        return changed;\n    }\n\n    public updateXml(xml: string, userId: UserModel.UserId): Board\n    {\n        let changed = this.set('xml', xml);\n        changed = changed.set('lastModified', (() => new Date())().toISOString());\n        // Note: we set a new version that is not the HEAD version, even if current version is marked as head\n        // The local change needs to be acknowledged first\n        changed = changed.set('version', new BoardVersion({userId, version: this.version.version + 1}));\n        return changed;\n    }\n\n    public updateXmlAfterRemoteChange(xml: string, remoteBoardVersion: BoardVersion): Board\n    {\n        let changed = this.set('xml', xml);\n        changed = changed.set('version', remoteBoardVersion);\n        return changed;\n    }\n\n    public syncSummaryInfo(other: Board): Board\n    {\n        let changed = this.set('sharedWith', other.sharedWith);\n        changed = changed.set('assignedTeams', other.assignedTeams);\n        changed = changed.set('owner', other.owner);\n        return changed.set('example', other.example);\n    }\n\n    public isCreator(userId: UserId): boolean\n    {\n        return this.get('creator') === userId;\n    }\n\n    public moveToOrganization(organizationId: OrganizationId): Board\n    {\n        let changed = this.set('creator', this.get('owner'));\n        changed = changed.set('owner', null);\n        return changed.set('organization', organizationId);\n    }\n}\n","import {List, Record} from 'immutable';\nimport moment from \"moment\";\nimport {UserModel} from \"../../User\";\nimport {IioUserInfo} from \"../../User\";\nimport {BoardId} from \"./Board\";\nimport {BoardChanged} from \"./BoardChanged\";\nimport {BoardVersion, defaultBoardVersionProps} from \"./BoardVersion\";\nimport {NodeType} from \"./Graph\";\n\nexport interface BoardHistory extends List<HistoryEntry>{\n\n}\n\nexport enum HistoryAction {\n    added = 'added',\n    edited = 'edited',\n    deleted = 'deleted',\n    moved = 'moved',\n}\n\nenum HistoryCellTypeAddition {multiple = 'multiple'}\n\nexport const HistoryCellType = {...NodeType, ...HistoryCellTypeAddition}\nexport type HistoryCellType = NodeType | HistoryCellTypeAddition;\n\nexport interface HistoryEntryProps {\n    userId: UserModel.UserId;\n    username: UserModel.Username;\n    boardId: BoardId;\n    boardVersion: BoardVersion;\n    action: HistoryAction;\n    cellType: HistoryCellType;\n    label: string;\n    date: string;\n    cellId?: string;\n}\n\nexport const defaultHistoryEntryProps: HistoryEntryProps = {\n    userId: '',\n    username: '',\n    boardId: '',\n    boardVersion: new BoardVersion(defaultBoardVersionProps),\n    action: HistoryAction.edited,\n    cellType: HistoryCellType.misc,\n    label: '',\n    date: '',\n    cellId: undefined,\n};\n\nexport class HistoryEntry extends Record(defaultHistoryEntryProps) implements HistoryEntryProps {}\n\nexport const makeHistoryEntry = (boardChanged: BoardChanged, userInfo: IioUserInfo.IioUserInfo): HistoryEntry => {\n    return new HistoryEntry({\n        action: boardChanged.action!,\n        cellType: boardChanged.cellType!,\n        label: boardChanged.cellLabel!,\n        userId: userInfo.userId,\n        username: userInfo.username,\n        boardId: boardChanged.board,\n        boardVersion: boardChanged.toBoardVersion(),\n        date: boardChanged.recordedAt,\n        cellId: boardChanged.cellId,\n    });\n};\n\n","import {Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\n\nexport type GraphElementId = string;\nexport type GraphElementName = string;\nexport type GraphElementParentId = string|null;\nexport type GraphElementChildren = string[];\nexport type GraphElementSources = string[];\nexport type GraphElementTargets = string[];\n\nexport enum GraphElementType {\n    event = 'event'\n}\n\nexport type BoardGraphElementValidationError = string;\n\nexport const AGGREGATE_TYPE = 'BoardGraphElement';\n\nexport interface BoardGraphElementProps {\n    uid: GraphElementId;\n    aggregateType: AggregateType;\n    name: GraphElementName\n    parentId: GraphElementParentId;\n    type: GraphElementType;\n    children: GraphElementChildren|undefined;\n    sources: GraphElementSources|undefined;\n    targets: GraphElementTargets|undefined;\n}\n\nexport const defaultBoardGraphElementProps: BoardGraphElementProps = {\n    uid: '',\n    aggregateType: AGGREGATE_TYPE,\n    name: '',\n    parentId: null,\n    type: GraphElementType.event,\n    children: undefined,\n    sources: undefined,\n    targets: undefined,\n};\n\nexport const createBoardGraphElementFromServerData = (data: any): Either<BoardGraphElementValidationError, BoardGraphElement> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('id'), \"id missing\"],\n        [hasKey('name'), \"name missing in \" + data.id],\n        [hasKey('parentId'), \"parentId missing in \" + data.id],\n        [hasKey('type'), \"type missing in \" + data.id]\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new BoardGraphElement({\n        uid: data.id,\n        aggregateType: AGGREGATE_TYPE,\n        name: data.name,\n        parentId: data.parentId,\n        type: data.type,\n        sources: data.sources || undefined,\n        targets: data.targets || undefined,\n        children: data.children || undefined\n    }));\n};\n\nexport class BoardGraphElement extends Record(defaultBoardGraphElementProps) implements BoardGraphElementProps, Aggregate {\n    public constructor(data: BoardGraphElementProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n}\n","import {List, Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {UserModel} from \"../../User\";\nimport {BoardId} from \"./Board\";\nimport {BoardVersion} from \"./BoardVersion\";\nimport {HistoryAction, HistoryCellType} from \"./HistoryEntry\";\n\nexport interface BoardQueue extends List<BoardChanged>{\n\n}\n\n\nexport interface RawBoardChangedProps {\n    uid: string;\n    name: string;\n    board: BoardId;\n    changeSet: string[];\n    version: number;\n    recordedAt: string;\n    userId: UserModel.UserId;\n    action?: HistoryAction;\n    cellType?: HistoryCellType;\n    cellLabel?: string;\n    cellId?: string;\n}\n\nexport interface BoardChangedProps {\n    uid: string;\n    name: string;\n    board: BoardId;\n    changeSet: List<string>;\n    version: number;\n    recordedAt: string;\n    userId: UserModel.UserId;\n    action?: HistoryAction;\n    cellType?: HistoryCellType;\n    cellLabel?: string;\n    cellId?: string;\n}\n\nexport const defaultBoardChangedProps: BoardChangedProps = {\n    uid: '',\n    name: 'BoardChanged',\n    board: '',\n    changeSet: List(),\n    version: 0,\n    recordedAt: '',\n    userId: '',\n    action: HistoryAction.edited,\n    cellType: HistoryCellType.misc,\n    cellLabel: '',\n    cellId: undefined,\n}\n\nexport const remoteBoardChanged = (data: RawBoardChangedProps): BoardChanged => {\n    const iData = {...data, changeSet: List(data.changeSet)}\n    return new BoardChanged(iData);\n}\n\nexport const localBoardChanged = (\n    board: string,\n    changeSet: List<string>,\n    version: number,\n    userId: string,\n    action: HistoryAction,\n    cellType: HistoryCellType,\n    cellLabel: string,\n    cellId?: string\n): BoardChanged => {\n    return new BoardChanged({\n        uid: '',\n        name: defaultBoardChangedProps.name,\n        board,\n        changeSet,\n        version,\n        recordedAt: '',\n        userId,\n        action,\n        cellType,\n        cellLabel,\n        cellId\n    })\n}\n\nexport const mapServerPatchToBoardChanged = (serverPatch: any): BoardChanged => {\n    return remoteBoardChanged({\n        uid: serverPatch.patchId,\n        board: serverPatch.boardId,\n        name: defaultBoardChangedProps.name,\n        changeSet: serverPatch.patch,\n        version: serverPatch.boardVersion.version,\n        userId: serverPatch.boardVersion.userId,\n        recordedAt: serverPatch.recordedAt,\n        action: serverPatch.action,\n        cellId: serverPatch.cellId !== null? serverPatch.cellId : undefined,\n        cellType: serverPatch.cellType,\n        cellLabel: serverPatch.cellLabel,\n    });\n}\n\nexport class BoardChanged extends Record(defaultBoardChangedProps) implements BoardChangedProps {\n    public constructor(data: BoardChangedProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4();\n        }\n\n        if(data.recordedAt === '') {\n            data.recordedAt = (() => new Date())().toISOString();\n        }\n\n        super(data);\n    }\n\n    public toBoardVersion (): BoardVersion {\n        return new BoardVersion({\n            userId: this.userId,\n            version: this.version\n        })\n    }\n}\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {BoardId} from \"./Board\";\nimport {Permissions} from \"./BoardPermissionForUser\";\n\nexport const AGGREGATE_TYPE = 'BoardInvitation';\n\nexport type BoardInvitationId = string;\nexport type BoardInvitationError = string;\nexport type BoardInvitationStatus = 'pending'|'acknowledged'|'deactivated'|'revoked';\n\nexport interface BoardInvitationProps {\n    uid: BoardInvitationId;\n    aggregateType: AggregateType;\n    boardId: BoardId;\n    invitedUserEmail: Email;\n    invitingUser: UserId;\n    permissions: Permissions;\n    status: BoardInvitationStatus;\n    resendAttempts: number;\n}\n\nexport const defaultBoardInvitationProps: BoardInvitationProps = {\n    uid: '',\n    aggregateType: AGGREGATE_TYPE,\n    boardId: '',\n    invitedUserEmail: '',\n    invitingUser: '',\n    permissions: {adminAccess: false, readAccess: false, writeAccess: false},\n    status: 'pending',\n    resendAttempts: 0,\n};\n\nexport const createBoardInvitationFromServerData = (data: any): Either<BoardInvitationError, BoardInvitation> => {\n    const validatedData: Either<BoardInvitationError, any> = validate(data,\n        [hasKey('invitationId'), \"invitationId missing\"],\n        [hasKey('boardId'), \"boardId missing in \" + data.permissionsId],\n        [hasKey('invitedUserEmail'), \"invitedUserEmail missing in \" + data.permissionsId],\n        [hasKey('invitingUser'), \"invitingUser missing in \" + data.permissionsId],\n        [hasKey('permissions'), \"permissions missing in \" + data.permissionsId],\n        [hasKey('status'), \"status missing in \" + data.permissionsId],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new BoardInvitation({\n        ...defaultBoardInvitationProps,\n        ...data,\n        uid: data.invitationId,\n    }));\n};\n\nexport class BoardInvitation extends Record(defaultBoardInvitationProps) implements BoardInvitationProps, Aggregate {\n    public constructor(data: BoardInvitationProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    public resend(): BoardInvitation\n    {\n        return this.set('resendAttempts', this.resendAttempts + 1);\n    }\n\n    public revoke(): BoardInvitation\n    {\n        return this.set('status', 'revoked');\n    }\n}\n","import {Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {TeamId} from \"../../InspectioTeams/model/Team\";\nimport {BoardId} from \"./Board\";\n\nexport type PermissionsId = string;\nexport interface Permissions {adminAccess: boolean; readAccess: boolean; writeAccess: boolean}\n\nexport type BoardPermissionValidationError = string;\n\nexport const AGGREGATE_TYPE = 'BoardPermission';\n\nexport interface BoardPermissionForTeamProps {\n    uid: PermissionsId;\n    aggregateType: AggregateType;\n    permissions: Permissions;\n    teamId: TeamId;\n    boardId: BoardId;\n}\n\nexport const defaultBoardPermissionProps: BoardPermissionForTeamProps = {\n    uid: '',\n    aggregateType: AGGREGATE_TYPE,\n    permissions: {adminAccess: false, readAccess: false, writeAccess: false},\n    teamId: '',\n    boardId: '',\n};\n\nexport const createBoardPermissionForTeamFromServerData = (data: any): Either<BoardPermissionValidationError, BoardPermissionForTeam> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('permissionsId'), \"permissionsId missing\"],\n        [hasKey('permissions'), \"permissions missing in \" + data.permissionsId],\n        [hasKey('teamId'), \"teamId missing in \" + data.permissionsId],\n        [hasKey('boardId'), \"boardId missing in \" + data.permissionsId],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new BoardPermissionForTeam({\n        uid: data.permissionsId,\n        aggregateType: AGGREGATE_TYPE,\n        permissions: data.permissions,\n        teamId: data.teamId,\n        boardId: data.boardId\n    }));\n};\n\nexport class BoardPermissionForTeam extends Record(defaultBoardPermissionProps) implements BoardPermissionForTeamProps, Aggregate {\n    public constructor(data: BoardPermissionForTeamProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    public changePermissions(permissions: Permissions): BoardPermissionForTeam\n    {\n        return this.set('permissions', permissions);\n    }\n}\n","import {Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {BoardId} from \"./Board\";\n\nexport type PermissionsId = string;\nexport interface Permissions {adminAccess: boolean; readAccess: boolean; writeAccess: boolean}\n\nexport type BoardPermissionValidationError = string;\n\nexport const AGGREGATE_TYPE = 'BoardPermissionForUser';\n\nexport interface BoardPermissionForUserProps {\n    uid: PermissionsId;\n    aggregateType: AggregateType;\n    permissions: Permissions;\n    userId: UserId;\n    boardId: BoardId;\n}\n\nexport const defaultBoardPermissionProps: BoardPermissionForUserProps = {\n    uid: '',\n    aggregateType: AGGREGATE_TYPE,\n    permissions: {adminAccess: false, readAccess: false, writeAccess: false},\n    userId: '',\n    boardId: '',\n};\n\nexport const createBoardPermissionForUserFromServerData = (data: any): Either<BoardPermissionValidationError, BoardPermissionForUser> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('permissionsId'), \"permissionsId missing\"],\n        [hasKey('permissions'), \"permissions missing in \" + data.permissionsId],\n        [hasKey('userId'), \"userId missing in \" + data.permissionsId],\n        [hasKey('boardId'), \"boardId missing in \" + data.permissionsId],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new BoardPermissionForUser({\n        uid: data.permissionsId,\n        aggregateType: AGGREGATE_TYPE,\n        permissions: data.permissions,\n        userId: data.userId,\n        boardId: data.boardId\n    }));\n};\n\nexport class BoardPermissionForUser extends Record(defaultBoardPermissionProps) implements BoardPermissionForUserProps, Aggregate {\n    public constructor(data: BoardPermissionForUserProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n}\n","import {Record} from 'immutable';\nimport {BoardId, BoardXml} from \"./Board\";\nimport {BoardVersion, defaultBoardVersionProps} from \"./BoardVersion\";\n\nexport interface BoardSnapshotProps {\n    boardId: BoardId,\n    xml: BoardXml,\n    boardVersion: BoardVersion\n}\n\nexport const defaultBoardSnapshotProps: BoardSnapshotProps = {\n    boardId: '',\n    xml: '',\n    boardVersion: new BoardVersion(defaultBoardVersionProps),\n};\n\nexport class BoardSnapshot extends Record(defaultBoardSnapshotProps) implements BoardSnapshotProps {\n    public constructor(data: BoardSnapshotProps) {\n        super(data);\n    }\n}\n","import {Map} from \"immutable\";\nimport React from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {InjectedFormProps} from \"redux-form\";\nimport { Field, reduxForm } from 'redux-form/immutable'\nimport {Button} from \"semantic-ui-react\";\nimport {ADD_BOARD_FORM} from \"./constants\";\n\ninterface FormData  {\n    uid: string,\n    name: string;\n}\n\nexport interface ImFormData extends Map<string, string> {\n    toJS(): FormData\n}\n\nexport interface OwnProps {\n\n}\n\nexport interface PropsFromDispatch {\n\n}\n\n\nexport type AddBoardFormProps = OwnProps & PropsFromDispatch & WithNamespaces & InjectedFormProps<ImFormData, OwnProps & WithNamespaces>;\n\nconst AddBoardForm = (props: AddBoardFormProps) => <form className=\"ui form\" onSubmit={props.handleSubmit}>\n    <div className=\"field\">\n        <Field name=\"name\" component=\"input\" type=\"text\" placeholder={props.t('insp.board.form.board_name')} autoFocus={true} />\n    </div>\n    <Button primary={true} type=\"submit\">{ props.t('insp.board.form.btn_add_save') }</Button>\n</form>;\n\nexport default withNamespaces()(reduxForm<ImFormData, OwnProps & WithNamespaces>({form: ADD_BOARD_FORM})(AddBoardForm));","export const ADD_BOARD_FORM = \"AddBoardForm\";\nexport const EDIT_BOARD_FORM = \"EditBoardForm\";\nexport const SHARE_BOARD_FORM = \"ShareBoardForm\";\nexport const SHARE_BOARD_WITH_TEAM_FORM = \"ShareBoardWithTeamForm\";\nexport const CONFIRM_BOARD_DELETION_FORM = 'ConfirmBoardDeletionForm';","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {MODULE} from \"../index\";\nimport {OrganizationId} from \"../model/Organization\";\nimport {UserOrganizationInfo} from \"../model/UserOrganizationInfo\";\nimport * as User from \"../../User\";\n\nexport const getUserOrganizationInfoById = (state: Record<ApplicationState>, uid: OrganizationId): UserOrganizationInfo | undefined => state.getIn([MODULE, 'UserOrganizationInfo', uid]);\n\nexport const makeUserOrganizationInfoSelector = (uid: OrganizationId): (state: Record<ApplicationState>) => UserOrganizationInfo | undefined => (state: Record<ApplicationState>) => getUserOrganizationInfoById(state, uid);\n\nexport const userOrganizationInfoListSelector = (state: Record<ApplicationState>, props: any): List<UserOrganizationInfo> =>\n    List(state.getIn([MODULE, 'UserOrganizationInfo']).toIndexedSeq().toArray()) || List();\n\nexport const makeUserOrganizationInfoListSelector = (userId: UserId): (state: Record<ApplicationState>, props?: any) => List<UserOrganizationInfo> => {\n    return createSelector(\n        [userOrganizationInfoListSelector],\n        (UserOrganizationInfoList): List<UserOrganizationInfo> => {\n            return UserOrganizationInfoList.filter(info => info.userId === userId);\n        }\n    )\n};\n\nexport const makeActiveUserOrganizationInfoSelector = (): (state: Record<ApplicationState>, props?: any) => UserOrganizationInfo | undefined => {\n    return createSelector(\n        [userOrganizationInfoListSelector, User.UserSelector.currentUserSelector],\n        (userOrganizationInfoList, currentUser): UserOrganizationInfo | undefined => {\n            if(currentUser.activeOrganization === null) {\n                return;\n            }\n\n            return userOrganizationInfoList.find(orga => orga.uid === currentUser.activeOrganization);\n        }\n    )\n}\n","export const CONNECT_SOCKET = '@@api/ConnectSocket';\nexport const DISCONNECT_SOCKET = '@@api/DisconnectSocket';\nexport const SOCKET_CONNECTED = '@@api/SocketConnected';\nexport const SOCKET_DISCONNECTED = '@@api/SocketConnected';\nexport const SOCKET_CONNECTION_LOST = '@@api/SocketConnectionLost';\nexport const SEND_SOCKET_CMD = '@@api/SendSocketCmd';\nexport const LISTEN_ON_SOCKET_CHANNEL = '@@api/ListenOnSocketChannel';\nexport const STOP_LISTENING_ON_SOCKET_CHANNEL = '@@api/StopListeningOnSocketChannel';\nexport const DEFAULT_SOCKET_CMD_TIMEOUT = 2000;\n\n","import { action } from 'typesafe-actions';\nimport {\n    CONNECT_SOCKET, DEFAULT_SOCKET_CMD_TIMEOUT,\n    DISCONNECT_SOCKET,\n    LISTEN_ON_SOCKET_CHANNEL, SEND_SOCKET_CMD, SOCKET_CONNECTED,\n    SOCKET_CONNECTION_LOST,\n    SOCKET_DISCONNECTED, STOP_LISTENING_ON_SOCKET_CHANNEL,\n} from './constants';\n\nexport const connectSocket = () => action(CONNECT_SOCKET);\nexport const disconnectSocket = () => action(DISCONNECT_SOCKET);\nexport const socketConnected = () => action(SOCKET_CONNECTED);\nexport const socketDisconnected = () => action(SOCKET_DISCONNECTED);\nexport const socketConnectionLost = (reason: string) => action(SOCKET_CONNECTION_LOST, {reason});\n\nexport const sendSocketCmd = <D, TMeta>(name: string, data: D, responseActionType: string, metadata?: TMeta, timeout: number = DEFAULT_SOCKET_CMD_TIMEOUT) => action(SEND_SOCKET_CMD, {\n    name,\n    data,\n    responseActionType,\n    metadata,\n    timeout,\n});\nexport const notifySocketCmdSent = <D, TMeta>(responseActionType: string, socketCmd: SocketCmd<D>, metadata?: TMeta) => action(responseActionType, {\n    socketCmd,\n    metadata,\n});\nexport const ackSocketCmd = <D, TMeta>(responseActionType: string, socketCmd: SocketCmd<D>, metadata?: TMeta) => action(responseActionType, {\n    socketCmd,\n    metadata,\n});\nexport const rejectSocketCmd = <D, TMeta>(responseActionType: string, socketCmd: SocketCmd<D>, metadata?: TMeta) => action(responseActionType, {\n    socketCmd,\n    metadata,\n});\n\nexport const listenOnSocketChannel = <D, TMeta>(channelName: string, emitActionType: string, metadata?: TMeta) => action(LISTEN_ON_SOCKET_CHANNEL, {\n    channelName,\n    emitActionType,\n    metadata,\n});\nexport const stopListeningOnSocketChannel = (channelName: string) => action(STOP_LISTENING_ON_SOCKET_CHANNEL, {channelName});\nexport const emitChannelEvent = <D, TMeta>(emitActionType: string, event: D, metadata?: TMeta) => action(emitActionType, {\n    event,\n    metadata,\n});\n\n\ninterface SocketCmdPending<D> {\n    name: string;\n    type: 'pending';\n    payload: D;\n    reason?: undefined;\n}\n\ninterface SocketCmdError<D> {\n    name: string;\n    type: 'error';\n    payload: D;\n    reason: string;\n}\n\ninterface SocketCmdSuccess<D> {\n    name: string;\n    type: 'success';\n    payload: D;\n    reason?: undefined;\n}\n\nexport type SocketCmd<D> = SocketCmdPending<D> | SocketCmdError<D> | SocketCmdSuccess<D>;\n\nexport const isAcknowledged = <D>(cmd: SocketCmd<D>): boolean => {\n    return cmd.type === 'success';\n};\n\nexport const isNotAcknowledged = <D>(cmd: SocketCmd<D>): boolean => {\n    return cmd.type === 'pending';\n};\n\nexport const isError = <D>(cmd: SocketCmd<D>): boolean => {\n    return cmd.type === 'error';\n};\n\n\n\n\n\n","import { Record } from 'immutable';\n\nexport const STATUS_CONNECTED = 'connected';\nexport const STATUS_CONNECTING = 'connecting';\nexport const STATUS_DISCONNECTED = 'disconnected';\nexport const STATUS_DISCONNECTING = 'disconnecting';\nexport const STATUS_CONNECTION_LOST = 'connectionLost';\n\nexport type SocketStatus = 'connected' | 'connecting' | 'disconnected' | 'connectionLost' | 'disconnecting';\n\nexport interface StatusProps {\n    status: SocketStatus;\n}\n\nexport interface StatusMethods {\n    isConnected(): boolean;\n\n    isDisconnected(): boolean;\n\n    isConnecting(): boolean;\n\n    isDisconnecting(): boolean;\n\n    hasConnectionLost(): boolean;\n\n    equals(other: Status): boolean;\n}\n\nexport interface StatusRecord extends StatusProps, StatusMethods {\n}\n\nexport const defaultUserProps: StatusProps = {\n    status: STATUS_DISCONNECTED,\n};\n\nexport const fromtString = (status: SocketStatus): Status => new Status({status});\n\nexport const disconnectedStatus = (): Status => new Status({status: STATUS_DISCONNECTED});\n\nexport const assertSocketStatus = (status: string): void => {\n    switch (status) {\n        case STATUS_CONNECTED:\n        case STATUS_CONNECTING:\n        case STATUS_DISCONNECTED:\n        case STATUS_CONNECTION_LOST:\n        case STATUS_DISCONNECTING:\n            break;\n        default:\n            throw new Error('Invalid socket status \"' + status + '\" provided');\n    }\n};\n\nexport class Status extends Record(defaultUserProps) implements StatusRecord {\n    public constructor(data: StatusProps) {\n        assertSocketStatus(data.status);\n        super(data);\n    }\n\n    public isConnected(): boolean {\n        return this.status === STATUS_CONNECTED;\n    }\n\n    public isDisconnected(): boolean {\n        return this.status === STATUS_DISCONNECTED;\n    }\n\n    public isConnecting(): boolean {\n        return this.status === STATUS_CONNECTING;\n    }\n\n    public isDisconnecting(): boolean {\n        return this.status === STATUS_DISCONNECTING;\n    }\n\n    public hasConnectionLost(): boolean {\n        return this.status === STATUS_CONNECTION_LOST;\n    }\n\n    public equals(other: Status): boolean {\n        return this.status === other.status;\n    }\n}\n","export const AUTHENTICATE = '@@Auth/Authenticate';\nexport const USER_AUTHENTICATED = '@@Auth/UserAuthenticated';","import { action } from 'typesafe-actions';\nimport {AUTHENTICATE} from \"./constants\";\n\nexport const authenticate = (auth: any) => action(AUTHENTICATE, {auth});\n","import { action } from 'typesafe-actions';\nimport { USER_AUTHENTICATED } from './constants';\n\nexport const userAuthenticated = (kc: Keycloak.KeycloakInstance) => action(USER_AUTHENTICATED, {kc});\n","import { KeycloakProfile, KeycloakTokenParsed } from 'keycloak-js';\nimport Keycloak from 'keycloak-js';\nimport { delay, put, select, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport configuredAxios from '../../api/ConfiguredAxios';\nimport verifyJwt from '../../api/ConfiguredJwtVerify';\nimport configuredSocket from '../../api/ConfiguredSocket';\nimport {distributeNewToken} from \"../../api/util\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport {Action as UserAction, UserModel, UserSelector} from '../../User';\nimport { AccountModel, RoleMapModel } from '../../User/model';\nimport * as Action from '../actions';\n\ntype AuthFlowAction = ActionType<typeof Action.Event.userAuthenticated>;\n\ninterface KcUserAttributes {\n    attributes: {\n        display_name: string[],\n        avatar_url: string[],\n        company_name: string[],\n        job_title: string[]\n    }\n};\n\ntype KcProfile = KeycloakProfile & KcUserAttributes;\n\nexport const keycloakPromise = <TSuccess>(promise: Keycloak.KeycloakPromise<TSuccess, any>) => new Promise<TSuccess>((resolve, reject) =>\n    promise\n        .success((result: TSuccess) => resolve(result))\n        .error((e: any) => reject(e)),\n);\n\nexport function* tokenRefreshFlow() {\n\n    const action: AuthFlowAction = yield take([\n        Action.Type.USER_AUTHENTICATED,\n    ]);\n\n    let authErrors = 0;\n    const kc: Keycloak.KeycloakInstance = action.payload.kc;\n\n    try {\n        yield verifyJwt(kc.token!);\n    } catch (e) {\n        yield keycloakPromise(kc.login());\n    }\n\n    const profile: KcProfile = yield keycloakPromise<KeycloakProfile>(kc.loadUserProfile());\n\n    // Sync currentUser -> either default or quota request was faster and has set quota already\n    let user = yield select(UserSelector.currentUserSelector, undefined);\n\n    user = user.set('uid', kc.tokenParsed!.sub!);\n    user = user.set('name', profile.username!);\n    \n    const attr = profile.attributes;\n\n    if(attr.display_name) {\n        user = user.set('displayName', attr.display_name[0]!);\n    } else {\n        user = user.set('displayName', profile.username!);\n    }\n\n    if(attr.avatar_url && attr.avatar_url[0] !== '') {\n        user = user.set('avatarUrl', attr.avatar_url[0]!);\n    } else {\n        user = user.set('avatarUrl', user.generateDefaultAvatarUrl());\n    }\n\n    if(attr.company_name) {\n        user = user.set('companyName', attr.company_name[0]);\n    }\n\n    if(attr.job_title) {\n        user = user.set('jobTitle', attr.job_title[0]);\n    }\n\n    user = user.set('email', profile.email!);\n    user = user.set('givenName', profile.firstName!);\n    user = user.set('familyName', profile.lastName!);\n    user = user.set('roles', RoleMapModel.fromToken(kc.resourceAccess!.inspectio.roles));\n    user = user.set('account', AccountModel.fromUserToken(kc.resourceAccess!.inspectio.roles));\n    user = user.set('signedIn', true);\n\n    yield put(UserAction.Command.signIn(user));\n\n    yield put(Action.Command.authenticate({token: kc.token}));\n\n    while (true) {\n        yield delay(10000);\n        try {\n            const refreshed = yield keycloakPromise<boolean>(kc.updateToken(31));\n\n            if (refreshed === false) {\n                continue;\n            }\n\n            try {\n                yield verifyJwt(kc.token!);\n\n                distributeNewToken(kc.token!);\n            } catch (e) {\n                yield keycloakPromise(kc.login());\n            }\n\n            yield put(Action.Command.authenticate({token: kc.token}));\n\n            if (authErrors > 0) {\n                yield put(NotifyAction.Command.info('Authorization established', 'You will be able to work ahead.'));\n            }\n\n            authErrors = 0;\n        } catch (e) {\n            if(authErrors === 0) {\n                yield put(NotifyAction.Command.error('Authorization error', 'You will be logged out shortly if connection can not be restored.'));\n            }\n            authErrors++;\n\n            if (authErrors > 2) {\n                // TODO maybe not logged out\n                yield keycloakPromise(kc.login());\n            }\n        }\n    }\n}\n","import {Record} from \"immutable\";\nimport { AuthState } from '../reducers/applyAuth';\n\nconst getToken = (state: Record<AuthState>, token: string): string => state.getIn(['auth', 'auth', 'token']);\n\nexport const makeTokenSelector = (): (state: Record<AuthState>) => string => (state: Record<AuthState>) => getToken(state, 'token');\n","import {func} from \"prop-types\";\nimport { buffers, eventChannel, EventChannel } from 'redux-saga';\nimport { call, cancel, delay, fork, put, race, select, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { default as socket } from '../../api/ConfiguredSocket';\nimport * as Auth from '../../Auth';\nimport { Action, Type } from '../actions';\nimport {\n    connectSocket as connectSocketActionFactory, disconnectSocket as disconnectSocketActionFactory,\n    listenOnSocketChannel,\n    sendSocketCmd,\n    stopListeningOnSocketChannel,\n} from '../actions/actions';\nimport * as Socket from \"../index\";\n\ninterface ChannelRegistry {\n    [key: string]: EventChannel<any>\n}\n\ntype AuthFlowAction = ActionType<typeof Auth.Action.Event.userAuthenticated>;\n\ntype ConnectAction = ActionType<typeof connectSocketActionFactory>\n    | ActionType<typeof disconnectSocketActionFactory>\n    ;\n\nexport type SocketFlowAction = ActionType<typeof sendSocketCmd>\n    | ActionType<typeof listenOnSocketChannel>\n    | ActionType<typeof stopListeningOnSocketChannel>\n    ;\n\nexport function* manageSocketConnection() {\n    const authAction: AuthFlowAction = yield take([\n        Auth.Action.Type.USER_AUTHENTICATED,\n    ]);\n    yield fork(flow);\n}\n\nfunction* flow() {\n    try {\n        while (true) {\n            const action: ConnectAction = yield take([Type.CONNECT_SOCKET, Type.DISCONNECT_SOCKET]);\n\n            switch (action.type) {\n                case Type.CONNECT_SOCKET:\n                    console.log(\"[Socket Flow] Received ConnectSocket command.\");\n                    const success = yield call(connectSocket);\n\n                    // success can also be NULL, which indicates that a socket connection exists, so we don't need to start background tasks\n                    if (success === true || success === null) {\n                        // Always answer with socket connected event, even in case socket connection exists already\n                        yield put(Action.socketConnected());\n\n                        if(success === true) {\n                            // New socket connection established, so we need to start background tasks to handle IO\n                            yield fork(runBackgroundTasks);\n                        }\n                    } else if (success === false) {\n                        console.warn(\"[Socket Flow] ConnectSocket command failed. Calling socket.disconnect now.\");\n                        yield call([socket, socket.disconnect]);\n                    }\n                    break;\n                case Type.DISCONNECT_SOCKET:\n                    console.log(\"[Socket Flow] Received DisconnectSocket command.\");\n                    yield call([socket, socket.disconnect]);\n                    break;\n\n            }\n\n        }\n    } finally {\n        yield put(Action.socketConnectionLost('Socket saga cancelled'));\n    }\n\n}\n\nfunction* runBackgroundTasks(): any {\n    console.log(\"[Socket Flow] Running backgound tasks: listenDisconnectSaga, listenReconnectSaga, handleIO\");\n\n    const disconnectTask = yield fork(listenDisconnectSaga);\n    const reconnectTask = yield fork(listenReconnectSaga);\n    const ioTask = yield fork(handleIO);\n\n    // wait for disconnecting action\n    const action: SocketFlowAction = yield take([Type.DISCONNECT_SOCKET]);\n\n    console.warn(\"[Socket Flow] Received DisconnectSocket command. Canceling backgound tasks.\");\n\n    yield cancel(disconnectTask);\n    yield cancel(reconnectTask);\n    yield cancel(ioTask);\n}\n\nfunction* onHandleIO(action: SocketFlowAction, channelRegistry: ChannelRegistry) {\n    console.log(\"[Socket Flow] Received action \", action);\n\n    switch (action.type) {\n        case Type.SEND_SOCKET_CMD:\n            const socketStatus: Socket.Model.StatusModel.Status = yield select(Socket.Selector.StatusSelector.makeGetStatus());\n\n            if(socketStatus.isConnected()) {\n                yield call(sendCmd, action);\n            } else {\n                console.warn(\"[Socket Flow] Cannot send socket command: \", action.payload, \"Socket is not connected\");\n            }\n            break;\n        case Type.LISTEN_ON_SOCKET_CHANNEL:\n            if (channelRegistry.hasOwnProperty(action.payload.channelName)) {\n                stopListeningOnChannel(action.payload.channelName, channelRegistry);\n            }\n            yield fork(listenOnChannel, action, channelRegistry);\n            break;\n        case Type.STOP_LISTENING_ON_SOCKET_CHANNEL:\n            stopListeningOnChannel(action.payload.channelName, channelRegistry);\n            break;\n        default:\n        // ignore\n    }\n}\n\nfunction* handleIO() {\n    const channelRegistry: ChannelRegistry = {};\n\n    while (true) {\n        const action: SocketFlowAction = yield take([Type.SEND_SOCKET_CMD, Type.LISTEN_ON_SOCKET_CHANNEL, Type.STOP_LISTENING_ON_SOCKET_CHANNEL]);\n\n        yield fork(onHandleIO, action, channelRegistry);\n    }\n}\n\nconst listenOnChannel = function* (cmd: ActionType<typeof Action.listenOnSocketChannel>, registry: ChannelRegistry) {\n    console.log(\"[Socket Flow] Start listening on channel: \", cmd.payload.channelName);\n\n    const chan = eventChannel((emit) => {\n        const handler = (data: any) => {\n            emit(data);\n        };\n\n        const errorHandler = (errorEvent: { reason: string }) => {\n            if (typeof errorEvent === 'undefined') {\n                emit(new Error('Unknown error occurred.'));\n                return;\n            }\n            // create an Error object and put it into the channel\n            emit(new Error(errorEvent.reason));\n        };\n\n        socket.on(cmd.payload.channelName, handler);\n\n        socket.on('error', errorHandler);\n\n        return () => {\n            console.log(\"[Socket Flow] stop listening on channel, because redux-saga event channel was closed: \", cmd.payload.channelName);\n            socket.off(cmd.payload.channelName);\n        };\n    }, buffers.expanding(10));\n\n    registry[cmd.payload.channelName] = chan;\n\n    while (true) {\n        try {\n            const event = yield take(chan);\n            yield put(Action.emitChannelEvent(cmd.payload.emitActionType, event, cmd.payload.metadata));\n        } catch (e) {\n            chan.close();\n            yield put(Action.socketConnectionLost(e.message));\n            return;\n        }\n    }\n};\n\nconst connectSocket = (): Promise<boolean|null> => {\n    return new Promise<boolean|null>((resolve) => {\n        if(socket.connected) {\n            resolve(null);\n            return;\n        }\n\n        socket.on('connect', () => resolve(true));\n        socket.open();\n    }).then(\n        response => response,\n    ).catch(\n        error => false,\n    );\n};\n\nconst reconnectSocket = (): Promise<boolean> => {\n    return new Promise((resolve) => {\n        socket.on('reconnect', () => {\n            resolve(true);\n        });\n    });\n};\n\nconst disconnectSocket = (): Promise<string> => {\n    return new Promise((resolve) => {\n        socket.on('disconnect', (reason: string) => {\n            resolve(reason);\n        });\n    });\n};\n\n// connection monitoring sagas\nconst listenDisconnectSaga = function* () {\n    while (true) {\n        const reason = yield call(disconnectSocket);\n        console.warn(\"[Socket Flow] Socket connection lost: \", reason);\n        yield put(Action.socketConnectionLost(reason));\n    }\n};\n\nconst listenReconnectSaga = function* () {\n    while (true) {\n        yield call(reconnectSocket);\n        console.log(\"[Socket Flow] socket reconnected.\");\n\n        // Wait a moment before telling the app that the socket is available again.\n        // This is needed, because otherwise the socket can still be flagged as disconnected\n        // if the saga receives new cmds too fast\n        yield delay(100);\n        yield put(Action.socketConnected());\n    }\n};\n\n\nconst stopListeningOnChannel = (channelName: string, registry: ChannelRegistry) => {\n    if (registry.hasOwnProperty(channelName)) {\n        console.log(\"[Socket Flow] Stop listening on channel: \", channelName);\n        registry[channelName].close();\n        delete registry[channelName];\n    }\n};\n\nconst sendCmd = function* <D>(cmd: ActionType<typeof Action.sendSocketCmd>) {\n\n    yield put(Action.notifySocketCmdSent(cmd.payload.responseActionType, {\n        name: cmd.payload.name,\n        type: 'pending',\n        payload: cmd.payload.data,\n    }, cmd.payload.metadata));\n\n    try {\n        const token = yield select(Auth.Selector.AuthSelector.makeTokenSelector());\n\n        const {ack, timeout} = yield race<any>({\n            ack: call(pushCmd, {\n                name: cmd.payload.name,\n                type: 'pending',\n                payload: {\n                    ...cmd.payload.data,\n                    token,\n                },\n            }),\n            timeout: delay(cmd.payload.timeout),\n        });\n\n        if (ack) {\n            yield put(Action.ackSocketCmd(cmd.payload.responseActionType, {\n                name: cmd.payload.name,\n                type: 'success',\n                payload: cmd.payload.data,\n            }, cmd.payload.metadata));\n        }\n\n        if (timeout) {\n            yield put(Action.rejectSocketCmd(cmd.payload.responseActionType, {\n                name: cmd.payload.name,\n                type: 'error',\n                payload: cmd.payload.data,\n                reason: 'Timed out after ' + cmd.payload.timeout + ' ms',\n            }, cmd.payload.metadata));\n        }\n    } catch (e) {\n        yield put(Action.rejectSocketCmd(cmd.payload.responseActionType, {\n            name: cmd.payload.name,\n            type: 'error',\n            payload: cmd.payload.data,\n            reason: e.toString(),\n        }, cmd.payload.metadata));\n    }\n\n\n};\n\nconst pushCmd = <D>(cmd: Action.SocketCmd<D>): Promise<true> => {\n    return new Promise((resolve, reject) => {\n        try {\n            if (socket.disconnected) {\n                reject(new Error('Socket not connected'));\n                return;\n            }\n            socket.emit(cmd.name, cmd.payload, () => resolve(true));\n        } catch (e) {\n            reject(e);\n        }\n    });\n};\n\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {TeamId} from \"./Team\";\n\nexport const AGGREGATE_TYPE = 'TeamInvitation';\n\nexport type TeamInvitationId = string;\nexport type TeamInvitationError = string;\n\nexport enum Status {\n    open = 'open',\n    acknowledged = 'acknowledged',\n    revoked = 'revoked',\n}\n\nexport interface TeamInvitationProps {\n    uid: TeamInvitationId;\n    teamId: TeamId;\n    admin: UserId;\n    invitedUser: Email;\n    status: Status;\n    resendAttempts: number;\n    aggregateType: AggregateType;\n}\n\nexport const defaultTeamInvitationProps: TeamInvitationProps = {\n    uid: '',\n    teamId: '',\n    admin: '',\n    invitedUser: 'unknown@acme.com',\n    status: Status.open,\n    resendAttempts: 0,\n    aggregateType: AGGREGATE_TYPE,\n};\n\nexport const createTeamInvitationFromServerData = (data: any): Either<TeamInvitationError, TeamInvitation> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('invitationId'), \"invitationId missing\"],\n        [hasKey('teamId'), \"teamId missing in \"+data.invitationId],\n        [hasKey('admin'), \"admin missing in \"+data.invitationId],\n        [hasKey('invitedUser'), \"invitedUser missing in \"+data.invitationId],\n        [hasKey('status'), \"status missing in \"+data.invitationId],\n    );\n\n    if(isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new TeamInvitation({\n        ...data,\n        uid: data.invitationId,\n        aggregateType: AGGREGATE_TYPE,\n    }));\n};\n\nexport class TeamInvitation extends Record(defaultTeamInvitationProps) implements TeamInvitationProps, Aggregate {\n    public constructor(data: TeamInvitationProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    public resend(): TeamInvitation\n    {\n        return this.set(\"resendAttempts\", this.resendAttempts + 1);\n    }\n\n    public revoke(): TeamInvitation\n    {\n        return this.set(\"status\", Status.revoked);\n    }\n}","import { Record } from 'immutable';\nimport { createSelector } from 'reselect';\nimport { ApplicationState } from '../../reducer';\nimport { StatusModel } from '../model';\n\nexport const statusSelector = (state: Record<ApplicationState>) => state.getIn(['socket', 'status', 'status']);\n\nexport const makeGetStatus = (): (state: Record<ApplicationState>, props?: any) => StatusModel.Status => {\n    return createSelector(\n        [statusSelector],\n        (status: StatusModel.SocketStatus): StatusModel.Status => StatusModel.fromtString(status),\n    );\n};\n","import { Map, Record } from 'immutable';\nimport { createSelector } from 'reselect';\nimport { ApplicationState } from '../../reducer';\nimport {UserSettingsValue, UserSettingsValues} from \"../model/UserSettings\";\nimport {BoardId} from \"../../InspectioBoards/model/Board\";\n\nexport const keyBoardHidden = (boardId: BoardId) => `board_${boardId}_hidden`;\nexport const keyUpdateViewed = (date: string) => `update_${date}_viewed`;\nexport const keyLiteMode = () => 'lite_mode';\n\nexport const userSettingsSelector = (state: Record<ApplicationState>, props: any) => state.getIn(['inspectioUsers', 'userSettings']);\n\nexport const makeUserSettingSelector = (key: string, defaultVal?: UserSettingsValue): (state: Record<ApplicationState>, props?: any) => UserSettingsValue => {\n    return createSelector(\n        [userSettingsSelector],\n        (settings: Map<string, UserSettingsValue>): any => settings.has(key) ? settings.get(key) : defaultVal\n    );\n};\n\nexport const makeUserSettingsSelector = (): (state: Record<ApplicationState>, props?: any) => UserSettingsValues => {\n    return createSelector(\n        [userSettingsSelector],\n        (settings: Map<string, UserSettingsValue>): UserSettingsValues => settings.toObject()\n    );\n};\n\nexport const makeUserSettingsLoadedSelector = (): (state: Record<ApplicationState>, props?: any) => boolean => {\n    return createSelector(\n        [userSettingsSelector],\n        (settings: Map<string, UserSettingsValue>): boolean => !!settings.get('settings_loaded')\n    );\n};\n\n","import {List, Record} from \"immutable\";\nimport {RouteComponentProps} from \"react-router\";\nimport { createSelector } from 'reselect';\nimport {ApplicationState} from \"../../reducer\";\nimport {Selector as SocketSelector} from \"../../Socket\";\nimport {UserModel, UserSelector} from \"../../User\";\nimport {EditBoardProps} from \"../components/EditBoard\";\nimport {MxGraphBoardProps, PropsFromState} from \"../components/MxGraphBoard\";\nimport {BoardRouteMatchParams} from \"../components/types\";\nimport {BoardModel, BoardSync} from \"../model\";\nimport {keyLiteMode, makeUserSettingSelector} from \"../../User/selectors/userSettings\";\n\nconst getBoardById = (state: Record<ApplicationState>, boardId: BoardModel.BoardId): BoardModel.Board => state.getIn(['inspectioBoards', 'boards', boardId]);\n\nexport const boardSelector = (state: Record<ApplicationState>, props: RouteComponentProps<BoardRouteMatchParams>) => getBoardById(state, props.match.params.uid);\n\nexport const boardQueueSelector = (state: Record<ApplicationState>, props: RouteComponentProps<BoardRouteMatchParams>) => state.getIn(['inspectioBoards', 'queues', props.match.params.uid]) || List()\n\nexport const makeBoardByIdSelector = (boardId: BoardModel.BoardId): (state: Record<ApplicationState>) => BoardModel.Board => (state: Record<ApplicationState>) => getBoardById(state, boardId);\n\nexport const makeGetBoard = (): (state: Record<ApplicationState>, props: RouteComponentProps<BoardRouteMatchParams>) => BoardModel.Board => {\n    return createSelector(\n        [boardSelector],\n        (board): BoardModel.Board => board\n    )\n}\n\nexport const makeGetQueue = (): (state: Record<ApplicationState>, props: RouteComponentProps<BoardRouteMatchParams>) => BoardSync.BoardQueue => {\n    return createSelector(\n        [boardQueueSelector],\n        (queue): BoardSync.BoardQueue => queue\n    )\n}\n\nexport const makeMapStateToPropsAddBoard = () => {\n    const getCurrentUser = UserSelector.makeGetCurrentUser();\n\n    return (state: Record<ApplicationState>, props: any) => {\n        const currentUser = getCurrentUser(state, props);\n\n        return {\n            user: currentUser\n        }\n    }\n}\n\nexport const makeMapStateToPropsEditBoard = () => {\n    const getBoard = makeGetBoard();\n\n    return (state: Record<ApplicationState>, props: EditBoardProps) => {\n        const board = getBoard(state, props);\n\n        return {\n            board\n        }\n    }\n}\n\nexport  const makeMapStateToPropsMxGraphBoard = (): (state: Record<ApplicationState>, props: MxGraphBoardProps) => PropsFromState => {\n    const getBoard = makeGetBoard();\n    const getCurrentUser = UserSelector.makeGetCurrentUser();\n    const getSocketStatus = SocketSelector.StatusSelector.makeGetStatus();\n    const getQueue = makeGetQueue();\n    const getLiteModeSetting = makeUserSettingSelector(keyLiteMode(), false);\n\n    return (state: Record<ApplicationState>, props: MxGraphBoardProps): PropsFromState => {\n        const board = getBoard(state, props);\n        const user = getCurrentUser(state, props);\n        const queue = getQueue(state, props);\n        const socketStatus = getSocketStatus(state, props);\n        const liteMode = getLiteModeSetting(state, props) as boolean;\n\n        return {\n            board,\n            user,\n            queue,\n            socketStatus,\n            liteMode\n        }\n    }\n}\n","import {List, Record} from \"immutable\";\nimport {BoardVersion} from \"./BoardVersion\";\nimport {BoardHistory} from \"./HistoryEntry\";\n\nexport interface HistoryStateData {\n    history: BoardHistory;\n    loading: boolean;\n    olderPatchesAvailable: boolean;\n    oldestBoardVersion?: BoardVersion;\n}\n\nconst defaultHistoryStateData: HistoryStateData = {\n    history: List(),\n    loading: false,\n    oldestBoardVersion: undefined,\n    olderPatchesAvailable: true,\n};\n\nexport class HistoryState extends Record(defaultHistoryStateData) implements HistoryStateData {}","import {List, Record} from \"immutable\";\nimport {ApplicationState} from \"../../reducer\";\nimport {BoardModel, BoardSync} from \"../model\";\nimport {BoardHistory} from \"../model/HistoryEntry\";\nimport {HistoryState} from \"../model/HistoryState\";\n\nconst getBoardHistoryById = (state: Record<ApplicationState>, boardId: BoardModel.BoardId): HistoryState => state.getIn(['inspectioBoards', 'history', boardId]) || new HistoryState();\n\nexport const makeBoardHistoryByIdSelector = (boardId: BoardModel.BoardId): (state: Record<ApplicationState>) => HistoryState => (state: Record<ApplicationState>) => getBoardHistoryById(state, boardId);","import {List, Record} from \"immutable\";\nimport { createSelector } from 'reselect';\nimport {Team} from \"../../InspectioTeams/model\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport {ApplicationState} from \"../../reducer\";\nimport {UserModel, UserSelector} from '../../User';\nimport {UserSettingsState} from \"../../User/reducers/applyUserSettingsActions\";\nimport {currentUserSelector} from \"../../User/selectors/currentUser\";\nimport {keyBoardHidden, userSettingsSelector} from \"../../User/selectors/userSettings\";\nimport {BoardModel} from \"../model\";\nimport {BoardOverviewState} from \"../reducers/applyOverviewActions\";\n\nexport const boardListSelector = (state: Record<ApplicationState>, props: any): List<BoardModel.Board> => List(state.getIn(['inspectioBoards', 'boards']).toIndexedSeq().toArray()) || List();\n\nexport const boardLoadingSelector = (state: Record<ApplicationState>, props: any): boolean => !!state.getIn(['inspectioBoards', 'loadingBoards']);\n\nexport const initialBoardListLoadedSelector = (state: Record<ApplicationState>, props: any): boolean => state.getIn(['inspectioBoards', 'initialBoardListLoaded']) || false;\n\nexport const boardOverviewSelector = (state: Record<ApplicationState>, props?: any): BoardOverviewState => state.getIn(['inspectioBoards', 'overview']);\n\nexport const makeGetBoards = (returnHiddenBoards: boolean = false): (state: Record<ApplicationState>, props?: any) => List<BoardModel.Board> => {\n    const activeUserOrganizationInfoSelector = makeActiveUserOrganizationInfoSelector();\n\n    return createSelector(\n        [boardListSelector, boardOverviewSelector, userSettingsSelector, currentUserSelector, activeUserOrganizationInfoSelector],\n        (boards, boardOverview: BoardOverviewState, userSettings: UserSettingsState, currentUser: UserModel.UserInfo, activeOrganization): List<BoardModel.Board> =>  {\n            boards = boards.filter(board => {\n                if(activeOrganization) {\n                    if(!activeOrganization.explicitOrganization && board.organization === null) {\n                        return true;\n                    }\n\n                    return board.organization === activeOrganization.organizationId;\n                } else {\n                    return board.organization === null;\n                }\n            })\n\n            if(boardOverview.filter !== '') {\n                boards = boards.filter((board) => {\n                    return board.name.toLowerCase().search(boardOverview.filter.toLowerCase()) !== -1;\n                })\n            }\n\n            if(!returnHiddenBoards && boardOverview.allSharedBoardsHidden) {\n                boards = boards.filter(board => !board.shared);\n            }\n\n            if(!returnHiddenBoards && boardOverview.allOwnBoardsHidden) {\n                boards = boards.filter(board => board.shared);\n            }\n\n            if(!returnHiddenBoards) {\n                boards = boards.filter(board => {\n                    return userSettings.get(keyBoardHidden(board.uid)) !== true\n                })\n            }\n\n            return boards;\n        }\n    )\n};\n\nexport const makeGetTeamBoards = (teamId: Team.TeamId): (state: Record<ApplicationState>, props?: any) => List<BoardModel.Board> => {\n    return createSelector(\n        [boardListSelector],\n        (boards): List<BoardModel.Board> => boards.filter(board => board.assignedTeams.contains(teamId))\n    )\n}\n\nexport const makeIsLoadingBoards = (): (state: Record<ApplicationState>, props: any) => boolean => {\n    return  createSelector(\n        [boardLoadingSelector],\n        (isLoading): boolean => isLoading\n    )\n};\n\nexport const makeInitialBoardListLoaded = (): (state: Record<ApplicationState>, props?: any) => boolean => {\n    return createSelector(\n        [initialBoardListLoadedSelector],\n        (listLoaded): boolean => listLoaded\n    )\n}\n\nexport const makeGetBoardOverview = (): (state: Record<ApplicationState>, props?: any) => BoardOverviewState => {\n    return createSelector(\n        [boardOverviewSelector],\n        (boardOverview: BoardOverviewState): BoardOverviewState => boardOverview\n    )\n}\n\nexport const makeMapStateToPropsBoardOverview = () => {\n    const getBoards = makeGetBoards();\n    const getQuota = UserSelector.makeGetCurrentBoardQuota();\n    const isLoadingBoards = makeIsLoadingBoards();\n\n    return (state: Record<ApplicationState>, props: any) => {\n        const boards = getBoards(state, props).filter(board => !board.tempBoard);\n        const userQuota = getQuota(state, props);\n        const loading = isLoadingBoards(state, props);\n\n        return {\n            boards,\n            userQuota,\n            loading,\n        }\n    }\n}\n","import {withNamespaces} from \"react-i18next\";\nimport { connect } from 'react-redux';\nimport {withRouter} from \"react-router\";\nimport { compose, lifecycle } from 'recompose';\nimport {bindActionCreators, Dispatch} from \"redux\";\nimport {Command} from \"../actions\";\nimport {AddBoard, AddBoardProps} from \"../components/AddBoard\";\nimport {BoardSelector} from \"../selectors\";\n\nconst mapStateToProps = BoardSelector.makeMapStateToPropsAddBoard();\n\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators(\n    {\n        addBoard: Command.addBoard,\n    },\n    dispatch\n);\n\nexport default withNamespaces()(withRouter<AddBoardProps>(compose<AddBoardProps, AddBoardProps>(\n    connect(mapStateToProps, mapDispatchToProps),\n    lifecycle({\n\n    })\n)(AddBoard)));","import {fromJS} from \"immutable\";\nimport * as React from 'react';\nimport {useState} from \"react\";\nimport {WithNamespaces} from \"react-i18next\";\nimport {RouteComponentProps} from \"react-router\";\nimport {Message, Modal} from 'semantic-ui-react';\nimport {UserModel} from \"../../User\";\nimport {Command} from \"../actions\";\nimport {BoardModel} from \"../model\";\nimport {default as AddBoardForm, ImFormData} from './AddBoardForm';\nimport {useSelector} from \"react-redux\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ninterface PropsFromState {\n    user: UserModel.UserInfo;\n}\n\ninterface PropsFromDispatch {\n    addBoard: typeof Command.addBoard;\n}\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n    disabled: boolean;\n}\n\nexport type AddBoardProps = PropsFromState & PropsFromDispatch & OwnProps & WithNamespaces & RouteComponentProps;\n\nconst submitForm = (data: ImFormData, props: AddBoardProps): void => {\n    const board = BoardModel.createUserBoard(props.user.uid, data.get('name') as BoardModel.BoardName);\n    props.addBoard(board, props.history);\n}\n\nexport const AddBoard = ( props: AddBoardProps) => {\n    const [isAddingBoard, setIsAddingBoard] = useState(false);\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n    return <Modal open={ props.open} closeIcon={true} onClose={ props.onClose} size=\"mini\">\n    <Modal.Header>{  props.t(\"insp.board.add\") }</Modal.Header>\n    <Modal.Content>\n        { props.disabled && !isAddingBoard && <Message icon=\"dollar\" warning={true}\n                                                       content={activeOrganization && activeOrganization.userIsGuest\n                                                           ? props.t('insp.user.quota_reached_guest')\n                                                           : activeOrganization && activeOrganization.explicitOrganization\n                                                               ? props.t('insp.user.quota_reached')\n                                                               : props.t('insp.user.quota_reached_user')\n                                                       } />}\n        {! props.disabled && <AddBoardForm initialValues={fromJS(BoardModel.defaultBoardProps)} onSubmit={(data) => {setIsAddingBoard(true); submitForm(data,  props)}} />}\n        {isAddingBoard && <span>...</span>}\n    </Modal.Content>\n</Modal>};\n\n\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {Button} from \"semantic-ui-react\";\nimport {AddBoard} from \"../index\";\n\ninterface OwnProps {\n    disabled: boolean;\n    primary?: boolean;\n}\n\ntype AddBoardButtonProps = OwnProps & WithNamespaces;\n\n// Needed for typescript to compile\nconst AddBoardModal: any = AddBoard;\n\nconst AddBoardButton = (props: AddBoardButtonProps) => {\n    const [addBoard, setAddBoard] = useState(false);\n\n    return  <>\n        <Button primary={props.primary} onClick={e => {e.preventDefault(); setAddBoard(true)}}>Add Board</Button>\n        <AddBoardModal open={addBoard} onClose={() => {setAddBoard(false)}} disabled={props.disabled} />\n    </>;\n};\n\nexport default withNamespaces()(AddBoardButton);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Icon} from 'semantic-ui-react';\nimport {AddBoard} from \"../index\";\n\nexport interface AddBoardCardProps {\n    disabled: boolean;\n}\n\ntype EnhancedProps = AddBoardCardProps & WithNamespaces;\n\n// Needed for typescript to compile\nconst AddBoardModal: any = AddBoard;\n\nconst AddBoardCard = (props: EnhancedProps) => {\n    const [addBoard, setAddBoard] = useState(false);\n\n    return  <>\n        <a href=\"#\" className=\"ui card event add board\" onClick={e => {e.preventDefault(); setAddBoard(true)}}>\n            <div className=\"content\" style={{display: \"flex\", flexDirection: \"column\", verticalAlign: \"middle\",\n                textAlign: \"center\", justifyContent: \"center\", alignItems: \"center\"}}>\n                <div><button className=\"ui big circular icon button\">\n                    <Icon name=\"plus\" size=\"large\" />\n                </button></div>\n                <button className=\"ui big basic button noborder\">\n                { props.t('insp.overview.add_board') }\n                </button>\n            </div>\n        </a>\n        <AddBoardModal open={addBoard} onClose={() => {setAddBoard(false)}} disabled={props.disabled} />\n    </>;\n};\n\nexport default withNamespaces()(AddBoardCard);","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Link} from 'react-router-dom';\nimport {Icon, Popup} from 'semantic-ui-react';\nimport {printIsoDateString} from \"../../core/dateTime\";\nimport {compileInspectioBoardEdit, compileInspectioBoardWorkspace} from \"../../routes\";\nimport * as Action from \"../actions\";\nimport {BoardModel} from \"../model\";\n\nexport interface BoardCardProps {\n    board: BoardModel.Board;\n    isAdmin: boolean;\n    setBoardToSnapshot: typeof Action.Command.setBoardToSnapshot;\n    enqueueBoardChanged: typeof Action.Command.enqueueBoardChanged;\n}\n\ntype EnhancedProps = BoardCardProps & WithNamespaces;\n\nconst BoardCard = (props: EnhancedProps) => {\n    return <div className=\"ui card event\">\n        <Link to={compileInspectioBoardWorkspace(props.board.uid)}>\n            <div className=\"content\">\n                <div className=\"header\"/>\n                <div className=\"description\">\n                    <span style={{ width: '100%', wordBreak: 'break-word', overflowWrap: 'break-word' }}>\n                        {props.board.name}\n                    </span>\n                </div>\n            </div>\n        </Link>\n        <div className=\"extra\">\n            {(props.isAdmin || !props.board.shared) && <Link to={compileInspectioBoardEdit(props.board.uid)} className=\"ui right floated\">\n                <Icon name=\"edit outline\" size={\"large\"} link={true} />\n            </Link>}\n            {(!props.isAdmin && props.board.shared) && <Popup trigger={<Icon name=\"share\" size=\"large\" className=\"ui right floated\" />} content={props.t('insp.overview.shared_board')} />}\n            <span style={{color: \"rgb(160, 156, 156)\", fontSize: \"0.9em\"}}>{ props.t('insp.overview.last_modified') + \": \" + printIsoDateString(props.board.lastModified as string) }</span>\n        </div>\n    </div>\n};\n\nexport default withNamespaces()(BoardCard);\n","export const printIsoDateString = (isoDateTime: string): string => {\n    const d = new Date(isoDateTime);\n    return d.toLocaleString();\n}","import * as React from 'react';\nimport {Icon} from \"semantic-ui-react\";\n\nexport const LoadingBoardCard = () => {\n    return <div className=\"ui card event\">\n        <div className=\"content\" >\n            <div className=\"header\" />\n            <div className=\"description\"><Icon loading={true} name=\"spinner\" size=\"big\" /></div>\n        </div>\n    </div>\n};","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Icon, Message, Modal} from \"semantic-ui-react\";\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n}\n\ntype NewDomainModalProps = OwnProps & WithNamespaces;\n\nconst NewDomainModal = (props: NewDomainModalProps) => {\n return (<Modal open={ props.open} closeIcon={true} onClose={ props.onClose}>\n     <Modal.Header>{  props.t(\"insp.hint.new_domain_header\") }</Modal.Header>\n     <Modal.Content>\n         { <Message icon=\"bullhorn\" info={true}\n                content={\n                    <div>\n                        <p>{props.t('insp.hint.new_domain_text')}</p>\n                        <p><Icon name=\"arrow right\"/>&nbsp;<a href=\"https://github.com/event-engine/inspectio/wiki/Rebranding\" target=\"_blank\">{props.t('insp.hint.learn_more')}</a></p>\n                    </div>\n                } />}\n     </Modal.Content>\n </Modal>);\n};\n\nexport default withNamespaces()(NewDomainModal);\n","import * as React from 'react';\n\ninterface OwnProps {\n    board: {\n        link: string;\n        name: string;\n    };\n}\n\ntype StandaloneExampleBoardCardProps = OwnProps;\n\nconst StandaloneExampleBoardCard = (props: StandaloneExampleBoardCardProps) => {\n    return <div className=\"ui card event\">\n        <a href={props.board.link}>\n            <div className=\"content\">\n                <div className=\"header\"/>\n                <div className=\"description\">\n                    <span style={{ width: '100%', wordBreak: 'break-word', overflowWrap: 'break-word' }}>\n                        {props.board.name}\n                    </span>\n                </div>\n            </div>\n        </a>\n        <div className=\"extra\">\n            <span style={{color: \"rgb(160, 156, 156)\", fontSize: \"0.9em\"}}>Example</span>\n        </div>\n    </div>\n};\n\nexport default StandaloneExampleBoardCard;\n","import {withNamespaces} from \"react-i18next\";\nimport { connect } from 'react-redux';\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport { compose, lifecycle } from 'recompose';\nimport { bindActionCreators, Dispatch } from 'redux';\nimport {Command} from \"../actions\";\nimport {BoardOverview, BoardOverviewProps, EnhancedProps} from \"../components/BoardOverview\";\nimport {BoardListSelector} from \"../selectors\";\n\nconst mapStateToProps = BoardListSelector.makeMapStateToPropsBoardOverview();\n\nconst mapDispatchToProps = {\n    setBoardToSnapshot: Command.setBoardToSnapshot,\n    enqueueBoardChanged: Command.enqueueBoardChanged,\n};\n\nexport default compose<BoardOverviewProps, EnhancedProps>(\n    connect(mapStateToProps, mapDispatchToProps),\n    lifecycle({\n        \n    })\n)(withNamespaces()(withRouter(BoardOverview)));","import {is, List} from \"immutable\";\nimport * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps} from \"react-router\";\nimport {\n    Button,\n    Card,\n    Container,\n    Divider,\n    Grid, Header, Icon, Segment,\n} from 'semantic-ui-react';\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {isStandalone} from \"../../standalone/util\";\nimport {upsertUserSetting} from \"../../User/actions/commands\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeUserSettingSelector, makeUserSettingsLoadedSelector} from \"../../User/selectors/userSettings\";\nimport * as Action from '../actions';\nimport {BoardModel} from \"../model\";\nimport AddBoardButton from \"./AddBoardButton\";\nimport AddBoardCard from \"./AddBoardCard\";\nimport {default as BoardCard} from \"./BoardCard\";\nimport {LoadingBoardCard} from \"./LoadingBoardCard\";\nimport NewDomainModal from \"./NewDomainModal\";\nimport StandaloneExampleBoardCard from \"./StandaloneExampleBoardCard\";\n\ninterface PropsFromState {\n    boards: List<BoardModel.Board>,\n    userQuota: number,\n    loading: boolean,\n}\n\ninterface PropsFromDispatch {\n    setBoardToSnapshot: typeof Action.Command.setBoardToSnapshot;\n    enqueueBoardChanged: typeof Action.Command.enqueueBoardChanged;\n}\n\ninterface OwnProps {\n\n}\n\nexport type BoardOverviewProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport type EnhancedProps = BoardOverviewProps & WithNamespaces & RouteComponentProps;\n\nexport const BoardOverview = (props: EnhancedProps) => {\n    const dispatch = useDispatch();\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const settingsLoaded = useSelector(makeUserSettingsLoadedSelector());\n    const showHint = useSelector(makeUserSettingSelector('show_pb_domain_hint', false));\n    const [popupOpen, setPopupOpen] = useState(false);\n\n    useEffect(() => {\n        if(settingsLoaded && showHint) {\n            setPopupOpen(true);\n        }\n    }, [settingsLoaded, showHint])\n\n    const isAdmin = organization ? organization.isAdmin(currentUser.uid) : false;\n\n    const handleCloseNewDomainModal = () => {\n        setPopupOpen(false);\n        dispatch(upsertUserSetting('show_pb_domain_hint', false));\n    }\n\n    return <Container>\n    <Grid stackable={true} padded={true}>\n    {(props.boards.count() > 0 || props.loading )&& <Grid.Row>\n        <Grid.Column> \n                <Card.Group itemsPerRow={4}>\n                    <AddBoardCard disabled={props.userQuota === 0} />\n                    {props.loading && <LoadingBoardCard/>}\n                    {props.boards.filter(board => !board.example).sortBy(board => board.lastModified, (a, b) => a === b ? 0 : (a! > b! ? -1 : 1)  )\n                        .map(board =>\n                        <BoardCard key={board.uid} board={board}\n                                   isAdmin={board.organization? isAdmin  || board.isCreator(currentUser.uid) : board.owner === currentUser.uid}\n                                   setBoardToSnapshot={props.setBoardToSnapshot} enqueueBoardChanged={props.enqueueBoardChanged} />\n                    ).toArray()}\n                </Card.Group>\n        </Grid.Column>\n    </Grid.Row>}\n    {props.boards.count() === 0 && !props.loading && <Grid.Row>\n        <Grid.Column>\n            <Segment placeholder={true}>\n                <Header icon={true} style={{color: 'grey'}}>\n                    <Icon name='lightbulb' color=\"yellow\" />\n                    {props.t('insp.overview.empty_space')}\n                </Header>\n                <Segment.Inline>\n                    <a href=\"https://wiki.prooph-board.com\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"ui yellow button\">Check Wiki</a>\n                    <AddBoardButton disabled={props.userQuota === 0} primary={false} />\n                </Segment.Inline>\n            </Segment>\n        </Grid.Column>\n    </Grid.Row>}\n    <Grid.Row>\n        <Grid.Column>\n            <Divider horizontal={true} content=\"Example Boards\" />\n        </Grid.Column>\n    </Grid.Row>\n    <Grid.Row>\n        <Grid.Column>\n            <Card.Group itemsPerRow={4}>\n                <StandaloneExampleBoardCard key='proophboard' board={{name: 'Annotated prooph board', link: '/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2Fprooph%20board%2520Example.xml?temp=1'}} />\n                <StandaloneExampleBoardCard key='Cody_Tutorial' board={{name: 'Cody Tutorial', link: '/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fproophboard%2Fexample-boards%2Fmain%2FCody%2520Tutorial.xml?temp=1'}} />\n                <StandaloneExampleBoardCard key='Event_Storming' board={{name: 'Event Storming - The Picture', link: '/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml?temp=1'}} />\n                <StandaloneExampleBoardCard key='Event_Modeling' board={{name: 'Event Modeling', link: '/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FEvent%2520Modeling.xml?temp=1'}} />\n            </Card.Group>\n        </Grid.Column>\n    </Grid.Row>\n    </Grid>\n        <NewDomainModal open={popupOpen} onClose={handleCloseNewDomainModal} />\n    </Container>\n};\n","import {Map} from \"immutable\";\nimport React, {InputHTMLAttributes, MouseEvent} from 'react'\nimport {InjectedFormProps, WrappedFieldProps} from \"redux-form\";\nimport { Field, reduxForm } from 'redux-form/immutable';\nimport {Button, Form, Icon, Message, Segment} from \"semantic-ui-react\";\nimport {CONFIRM_BOARD_DELETION_FORM, EDIT_BOARD_FORM} from \"./constants\";\n\ninterface FormData  {\n    uid: string;\n    confirmedName: string;\n}\n\nexport interface ImFormData extends Map<string, string> {\n    confirmedName: string;\n    toJS(): FormData;\n}\n\nexport interface OwnProps {\n    boardName: string;\n    t: (val: string) => string;\n    onCancel: () => void;\n}\n\nexport interface PropsFromDispatch {\n\n}\n\n\nexport type ConfirmBoardDeletionFormProps = OwnProps & PropsFromDispatch & InjectedFormProps<ImFormData, OwnProps>;\n\nconst renderConfirm = (componentProps: WrappedFieldProps & InputHTMLAttributes<HTMLInputElement>) => {\n    const { input, placeholder, meta: { touched, error } } = componentProps;\n\n    return <Form.Input {...input} placeholder={placeholder} error={(touched && error)? true : false}/>\n};\n\nconst validateName = (boardName: string): (confirmedName: string) => undefined | string => confirmedName => confirmedName === boardName? undefined : 'Name is not correct';\n\nconst handleAbortClick = (e: MouseEvent<HTMLButtonElement>, props: ConfirmBoardDeletionFormProps) => {\n    e.preventDefault();\n\n    props.onCancel();\n}\n\nconst ConfirmBoardDeletionForm = (props: ConfirmBoardDeletionFormProps) => <Message error={true}>\n    <Icon name=\"warning sign\" />\n    {props.t('insp.board.really_delete')}\n    <Segment>\n        <form className=\"ui form\" onSubmit={props.handleSubmit}>\n            <div className=\"field\">\n                <Field name=\"confirmedName\" type=\"text\" component={renderConfirm} placeholder={props.t('insp.board.form.board_name')} />\n            </div>\n            <Button color=\"red\" type=\"submit\" disabled={props.pristine || !props.valid}>{props.t('app.form.confirm')}</Button>\n            <Button basic={true} className=\"noborder\" onClick={(e) => handleAbortClick(e, props)}>{ props.t('app.form.cancel') }</Button>\n        </form>\n    </Segment>\n</Message>;\n\nexport default reduxForm<ImFormData, OwnProps>({\n    form: CONFIRM_BOARD_DELETION_FORM,\n    validate: (values, props) => {\n        if(values) {\n            const error = validateName(props.boardName)(values.get('confirmedName') || '');\n            if(error) {\n                return {confirmedName: error};\n            }\n        }\n\n        return {};\n    }\n})(ConfirmBoardDeletionForm);\n\n","import { Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {BoardClient} from \"../model/BoardClient\";\nimport {BoardClientsState} from \"../reducers/applyBoardClientActions\";\n\nexport const boardClientsSelector = (state: Record<ApplicationState>, props: any): BoardClientsState =>\n    state.getIn([MODULE, 'boardClients']);\n\nexport const makeBoardClientSelector = (boardId: string): (state: Record<ApplicationState>, props?: any) => BoardClient|null|undefined => {\n    return createSelector(\n        [boardClientsSelector],\n        (boardClients): BoardClient|null|undefined =>  {\n            return boardClients.has(boardId) ? boardClients.get(boardId) : undefined;\n        }\n    )\n};\n","import React, {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Confirm, Message} from \"semantic-ui-react\";\nimport {createBoardClient} from \"../../../actions/commands\";\nimport * as BoardModel from \"../../../model/Board\";\n\ninterface OwnProps {\n    boardId: BoardModel.BoardId;\n}\n\ntype BoardClientNotConfiguredMessageProps = OwnProps & WithNamespaces;\n\nconst BoardClientNotConfiguredMessage = (props: BoardClientNotConfiguredMessageProps) => {\n\n    const dispatch = useDispatch();\n    const [confirmOpen, setConfirmOpen] = useState<boolean>(false);\n\n    const handleCreateBoardClientClick = (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        setConfirmOpen(true);\n    };\n\n    const handleCreateBoardClient = () => {\n        dispatch(createBoardClient(props.boardId));\n        setConfirmOpen(false);\n    };\n\n    return (<>\n        <Message>\n            <p>\n                {props.t('insp.board.client.notConfigured')}\n                <a href={'#'} onClick={handleCreateBoardClientClick}> {props.t('insp.board.client.createClient')}</a>\n            </p>\n        </Message>\n        <Confirm\n            header={props.t('insp.board.client.createConfirmTitle')}\n            content={props.t('insp.board.client.createConfirmText')}\n            open={confirmOpen}\n            onCancel={() => setConfirmOpen(false)}\n            onConfirm={handleCreateBoardClient}\n        />\n    </>);\n};\n\nexport default withNamespaces()(BoardClientNotConfiguredMessage);\n","import React, {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Confirm, Icon, Message, Table} from \"semantic-ui-react\";\nimport {copyToClipboard} from \"../../../../core/copyToClipboard\";\nimport {removeBoardClient, resetBoardClientSecret} from \"../../../actions/commands\";\nimport {fetchBoardClientSecret} from \"../../../actions/queries\";\nimport * as BoardModel from \"../../../model/Board\";\nimport {BoardClient} from \"../../../model/BoardClient\";\n\ninterface OwnProps {\n    boardId: BoardModel.BoardId;\n    client: BoardClient;\n}\n\ntype BoardClientTableProps = OwnProps & WithNamespaces;\n\nconst BoardClientTable = (props: BoardClientTableProps) => {\n\n    const dispatch = useDispatch();\n    const [resetConfirmOpen, setResetConfirmOpen] = useState<boolean>(false);\n    const [removeConfirmOpen, setRemoveConfirmOpen] = useState<boolean>(false);\n    const [resetLoading, setResetLoading] = useState<boolean>(false);\n    const [clientSecretCopied, setClientSecretCopied] = useState<boolean>(false);\n\n    useEffect(() => {\n        if (props.client && props.client.clientSecret) {\n            setResetLoading(false);\n        }\n    }, [props.client]);\n\n    const retrieveClientSecret = (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        dispatch(fetchBoardClientSecret(props.boardId));\n    };\n\n    const openResetConfirm = () => setResetConfirmOpen(true);\n    const closeResetConfirm = () => setResetConfirmOpen(false);\n    const openRemoveConfirm = () => setRemoveConfirmOpen(true);\n    const closeRemoveConfirm = () => setRemoveConfirmOpen(false);\n\n    const resetClientSecret = () => {\n        closeResetConfirm();\n        setResetLoading(true);\n        dispatch(resetBoardClientSecret(props.boardId));\n    };\n\n    const removeClientSecret = () => {\n        closeRemoveConfirm();\n        dispatch(removeBoardClient(props.boardId));\n    };\n\n    const copyClientSecretToClipboard = () => {\n        copyToClipboard(props.client.clientSecret!);\n        setClientSecretCopied(true);\n        setTimeout(() => setClientSecretCopied(false), 2000);\n    };\n\n    return (<>\n        <Table unstackable={true} basic={'very'}>\n            <Table.Body>\n                <Table.Row>\n                    <Table.Cell style={{ width: '150px' }}>\n                        <strong>{props.t('insp.board.client.clientId')}:</strong>\n                    </Table.Cell>\n                    <Table.Cell>\n                        {props.client.clientId}\n                    </Table.Cell>\n                    <Table.Cell style={{ width: '125px' }} />\n                </Table.Row>\n                <Table.Row>\n                    <Table.Cell>\n                        <strong>{props.t('insp.board.client.clientSecret')}:</strong>\n                    </Table.Cell>\n                    <Table.Cell>\n                        {props.client.clientSecret && (\n                            <>\n                                {props.client.clientSecret}\n                                <Icon\n                                    name={clientSecretCopied ? 'clipboard check' : 'copy'}\n                                    style={{ cursor: 'pointer', marginLeft: '5px' }}\n                                    title={props.t('insp.board.client.copyToClipboard')}\n                                    onClick={copyClientSecretToClipboard}\n                                />\n                            </>\n                        )}\n                        {!props.client.clientSecret && (\n                            <a href={'#'} onClick={retrieveClientSecret}>\n                                {props.t('insp.board.client.retrieveSecret')}\n                            </a>\n                        )}\n                    </Table.Cell>\n                    <Table.Cell style={{ paddingTop: '10px', paddingBottom: '10px' }}>\n                        <Button\n                            icon={true}\n                            labelPosition={'left'}\n                            title={props.t('app.form.reset')}\n                            onClick={openResetConfirm}\n                            loading={resetLoading}\n                            style={props.client.clientSecret ? null : { visibility: 'hidden' }}\n                            children={<><Icon name={'redo'} />{props.t('app.form.reset')}</>}\n                        />\n                    </Table.Cell>\n                </Table.Row>\n            </Table.Body>\n        </Table>\n        <Message>\n            <Table unstackable={true} basic={'very'}>\n                <Table.Body>\n                    <Table.Row>\n                        <Table.Cell>\n                            {props.t('insp.board.client.removeText')}\n                        </Table.Cell>\n                        <Table.Cell>\n                            <Button\n                                icon={true}\n                                labelPosition={'left'}\n                                negative={true}\n                                floated={'right'}\n                                title={props.t('app.form.remove')}\n                                onClick={openRemoveConfirm}\n                                children={<><Icon name={'delete'} />{props.t('app.form.remove')}</>}\n                            />\n                        </Table.Cell>\n                    </Table.Row>\n                </Table.Body>\n            </Table>\n        </Message>\n        <Confirm\n            header={props.t('insp.board.client.resetConfirmTitle')}\n            content={props.t('insp.board.client.resetConfirmText')}\n            open={resetConfirmOpen}\n            onCancel={closeResetConfirm}\n            onConfirm={resetClientSecret}\n        />\n        <Confirm\n            header={props.t('insp.board.client.removeConfirmTitle')}\n            content={props.t('insp.board.client.removeConfirmText')}\n            open={removeConfirmOpen}\n            onCancel={closeRemoveConfirm}\n            onConfirm={removeClientSecret}\n        />\n    </>);\n};\n\nexport default withNamespaces()(BoardClientTable);\n","\n/**\n * Copies the value provided to the clipboard.\n * Sometimes it is necessary to append the temporary input to a specific element to make this work.\n *\n * @param value\n * @param appendTo\n */\nexport const copyToClipboard = (value: string, appendTo?: HTMLElement) => {\n    const inputElement = document.createElement('input');\n    inputElement.type = 'text';\n    inputElement.value = value;\n    inputElement.style.position = 'fixed';\n    inputElement.style.left = '-1000px';\n    inputElement.style.top = '-1000px';\n\n    (appendTo || document.body).append(inputElement);\n    inputElement.select();\n    document.execCommand('copy');\n\n    inputElement.parentNode!.removeChild(inputElement);\n};\n","import React, {useEffect} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport HeaderSubHeader from \"semantic-ui-react/dist/commonjs/elements/Header/HeaderSubheader\";\nimport {fetchBoardClient} from \"../../actions/queries\";\nimport * as BoardModel from \"../../model/Board\";\nimport {BoardClient} from \"../../model/BoardClient\";\nimport {makeBoardClientSelector} from \"../../selectors/boardClient\";\nimport BoardClientNotConfiguredMessage from \"./BoardClientConfiguration/BoardClientNotConfiguredMessage\";\nimport BoardClientTable from \"./BoardClientConfiguration/BoardClientTable\";\n\ninterface OwnProps {\n    boardId: BoardModel.BoardId;\n}\n\ntype BoardClientConfigurationProps = OwnProps & WithNamespaces;\n\nconst BoardClientConfiguration = (props: BoardClientConfigurationProps) => {\n\n    const dispatch = useDispatch();\n    const client: BoardClient|null|undefined = useSelector(makeBoardClientSelector(props.boardId));\n\n    useEffect(() => {\n        dispatch(fetchBoardClient(props.boardId));\n    }, [props.boardId]);\n\n    return (\n        <div className=\"ui segments\">\n            <div className=\"ui segment\">\n                {client === undefined && (\n                    <div className=\"ui active dimmer\">\n                        <div className=\"ui loader\" />\n                    </div>\n                )}\n\n                <h2 className=\"ui header\">\n                    {props.t('insp.board.client.headline')}\n                    <HeaderSubHeader>{props.t('insp.board.client.description')}</HeaderSubHeader>\n                </h2>\n                <div>\n                    {client === null && (\n                        <BoardClientNotConfiguredMessage boardId={props.boardId} />\n                    )}\n                    {client && (\n                        <BoardClientTable boardId={props.boardId} client={client} />\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default withNamespaces()(BoardClientConfiguration);\n","import {axiosApiPromise, ResponseType} from '../../api/util';\nimport { SERVER_CONTEXT } from '../../InspectioBoards/actions/constants';\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {Permissions} from \"../../InspectioBoards/model/BoardPermissionForTeam\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {Team} from \"../model\";\nimport {TeamId} from \"../model/Team\";\nimport {TeamInvitationId} from \"../model/TeamInvitation\";\nimport {BoardId} from \"../../InspectioBoards/model/Board\";\n\nexport const addTeam = (teamId: Team.TeamId, teamName: Team.TeamName,  organizationId: OrganizationId | null) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AddTeam', { teamId, name: teamName, organizationId });\n};\n\nexport const renameTeam = (teamId: Team.TeamId, name: Team.TeamName) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RenameTeam', {teamId, name});\n};\n\nexport const changeTeamDescription = (teamId: Team.TeamId, newDescription: Team.TeamDescription) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ChangeTeamDescription', {teamId, newDescription});\n};\n\nexport const inviteUserToTeam = (invitationId: string, teamId: string, userEmail: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InviteUserToTeam', { invitationId, teamId, invitedUser: userEmail });\n};\n\nexport const resendTeamInvitation = (invitationId: TeamInvitationId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'ResendTeamInvitation', {invitationId});\n};\n\nexport const revokeTeamInvitation = (invitationId: TeamInvitationId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RevokeTeamInvitation', {invitationId});\n};\n\nexport const removeMemberFromTeam = (teamId: string, memberId: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'RemoveMemberFromTeam', { teamId, memberId });\n};\n\nexport const deleteTeam = (teamId: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'DeleteTeam', {teamId});\n};\n\nexport const adminGrantTeamAccessToBoard = (boardId: BoardModel.BoardId, teamId: Team.TeamId, permissions?: Permissions) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AdminGrantTeamAccessToBoard', {\n        boardId,\n        teamId,\n        boardPermissions: (permissions || {\n            readAccess: true,\n            writeAccess: true,\n            adminAccess: false,\n        })\n    });\n};\n\nexport const adminRevokeTeamAccessToBoard = (boardId: BoardModel.BoardId, teamId: Team.TeamId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AdminRevokeTeamAccessToBoard', {\n        boardId,\n        teamId\n    });\n};\n\nexport const fetchUserTeams = () => {\n    return axiosApiPromise(SERVER_CONTEXT + 'UserTeams', {});\n};\n\nexport const ackTeamInvitation = (invitationId: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'AcknowledgeTeamInvitation', {invitationId})\n};\n\nexport const fetchTeamOfInvitation = (invitationId: string) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'InvitationTeam', {invitationId});\n};\n\nexport const fetchOpenTeamInvitations = (teamId: TeamId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'OpenTeamInvitations', {teamId});\n};\n\nexport const moveTeamToOrganization = (teamId: TeamId, organizationId: OrganizationId) => {\n    return axiosApiPromise(SERVER_CONTEXT + 'MoveTeamToOrganization', {teamId, organizationId});\n}\n","// Commands\nexport const ADD_TEAM = '@@InspectioTeams/AddTeam';\nexport const RENAME_TEAM = '@@InspectioTeams/RenameTeam';\nexport const CHANGE_TEAM_DESCRIPTION = '@@InspectioTeams/ChangeTeamDescription';\nexport const INVITE_USER_TO_TEAM = '@@InspectioTeams/InviteUserToTeam';\nexport const RESEND_TEAM_INVITATION = '@@InspectioTeams/ResendTeamInvitation';\nexport const REVOKE_TEAM_INVITATION = '@@InspectioTeams/RevokeTeamInvitation';\nexport const REMOVE_MEMBER_FROM_TEAM = '@@InspectioTeams/RemoveMemberFromTeam';\nexport const FETCH_USER_TEAMS = '@@InspectioTeams/FetchUserTeams';\nexport const UPDATE_TEAMS = '@@InspectioTeams/AddTeams';\nexport const ADMIN_GRANT_TEAM_ACCESS_TO_BOARD = '@@InspectioTeams/AdminGrantTeamAccessToBoard';\nexport const ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD = '@@InspectioTeams/AdminRevokeTeamAccessToBoard';\nexport const DELETE_TEAM = '@@InspectioTeams/DeleteTeam';\n\n// Events\nexport const TEAM_ADDED = '@@InspectioTeams/TeamAdded';\nexport const TEAM_RENAMED = '@@InspectioTeams/TeamRenamed';\nexport const TEAM_DESCRIPTION_CHANGED = '@@InspectioTeams/TeamDescriptionChanged';\nexport const TEAMS_FETCHED = '@@InspectioTeams/TeamsFetched';\nexport const MEMBER_REMOVED_FROM_TEAM = '@@InspectioTeams/MemberRemovedFromTeam';\nexport const TEAM_DELETED = '@@InspectioTeams/TeamDeleted';\nexport const TEAM_INVITATIONS_LOADED = '@@InspectioTeams/TeamInvitationsLoaded';\nexport const TEAM_INVITATION_RESENT = '@@InspectioTeams/TeamInvitationResent';\nexport const TEAM_INVITATION_REVOKED = '@@InspectioTeams/TeamInvitationRevoked';\n\n// @TODO move to inspectioBoards context?\nexport const TEAM_ACCESS_TO_BOARD_GRANTED = '@InspectioBoards/TeamAccessToBoardGranted';\nexport const TEAM_ACCESS_TO_BOARD_REVOKED = '@InspectioBoards/TeamAccessToBoardRevoked';\n\nexport const MOVE_TEAM_TO_ORGANIZATION = '@@InspectioTeams/MoveTeamToOrganization';\nexport const TEAM_MOVED_TO_ORGANIZATION = '@@InspectioTeams/TeamMovedToOrganization';\n","import {List} from \"immutable\";\nimport { action } from 'typesafe-actions';\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {Permissions} from \"../../InspectioBoards/model/BoardPermissionForTeam\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport * as TeamModel from \"../model/Team\";\nimport {Team, TeamDescription, TeamId, TeamName} from \"../model/Team\";\nimport {TeamInvitationId} from \"../model/TeamInvitation\";\nimport {\n    ADD_TEAM,\n    ADMIN_GRANT_TEAM_ACCESS_TO_BOARD,\n    ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD, CHANGE_TEAM_DESCRIPTION, DELETE_TEAM,\n    INVITE_USER_TO_TEAM, MOVE_TEAM_TO_ORGANIZATION,\n    REMOVE_MEMBER_FROM_TEAM, RENAME_TEAM, RESEND_TEAM_INVITATION, REVOKE_TEAM_INVITATION, UPDATE_TEAMS\n} from \"./constants\";\n\nexport const addTeam = (teamId: TeamId, teamName: TeamName, organizationId: OrganizationId | null) => action(ADD_TEAM, { teamId, teamName, organizationId });\nexport const renameTeam = (teamId: TeamId, newName: TeamName) => action(RENAME_TEAM, {teamId, newName});\nexport const changeTeamDescription = (teamId: TeamId, newDescription: TeamDescription) => action(CHANGE_TEAM_DESCRIPTION, {teamId, newDescription});\n\nexport const inviteUserToTeam = (invitationId: TeamInvitationId, teamId: string, userEmail: string) => action(INVITE_USER_TO_TEAM, { invitationId, teamId, userEmail });\nexport const resendTeamInvitation = (invitationId: TeamInvitationId) => action(RESEND_TEAM_INVITATION, {invitationId});\nexport const revokeTeamInvitation = (invitationId: TeamInvitationId) => action(REVOKE_TEAM_INVITATION, {invitationId});\n\nexport const removeMemberFromTeam = (teamId: string, memberId: string) => action(REMOVE_MEMBER_FROM_TEAM, { teamId, memberId });\n\nexport const updateTeams = (teams: List<TeamModel.Team>) => action(UPDATE_TEAMS, teams);\n\nexport const deleteTeam = (teamId: TeamModel.TeamId) => action(DELETE_TEAM, {teamId});\n\nexport const adminGrantTeamAccessToBoard = (boardId: BoardModel.BoardId, teamIds: TeamModel.TeamId[], permissions?: Permissions) => action(ADMIN_GRANT_TEAM_ACCESS_TO_BOARD, {boardId, teamIds, permissions});\nexport const adminRevokeTeamAccessToBoard = (boardId: BoardModel.BoardId, teamId: TeamModel.TeamId) => action(ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD, {boardId, teamId});\n\nexport const moveTeamToOrganization = (teamId: TeamId, organizationId: OrganizationId) => action(MOVE_TEAM_TO_ORGANIZATION, {teamId, organizationId});\n","import {List} from \"immutable\";\nimport {action} from \"typesafe-actions\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {Team} from \"../model\";\nimport {TeamInvitation} from \"../model/TeamInvitation\";\nimport {\n    MEMBER_REMOVED_FROM_TEAM,\n    TEAM_ACCESS_TO_BOARD_GRANTED,\n    TEAM_ACCESS_TO_BOARD_REVOKED,\n    TEAM_ADDED,\n    TEAM_DELETED,\n    TEAM_DESCRIPTION_CHANGED,\n    TEAM_INVITATION_RESENT,\n    TEAM_INVITATION_REVOKED,\n    TEAM_INVITATIONS_LOADED, TEAM_MOVED_TO_ORGANIZATION,\n    TEAM_RENAMED,\n    TEAMS_FETCHED\n} from \"./constants\";\n\nexport const teamAdded = (team: Team.Team) => action(TEAM_ADDED, team);\nexport const teamRenamed = (team: Team.Team) => action(TEAM_RENAMED, team);\nexport const teamDescriptionChanged = (team: Team.Team) => action(TEAM_DESCRIPTION_CHANGED, team);\nexport const memberRemovedFromTeam = (team: Team.Team) => action(MEMBER_REMOVED_FROM_TEAM, team);\nexport const teamDeleted = (team: Team.Team) => action(TEAM_DELETED, team);\nexport const teamInvitationsLoaded = (teamInvitations: List<TeamInvitation>) => action(TEAM_INVITATIONS_LOADED, teamInvitations);\nexport const teamInvitationResent = (teamInvitation: TeamInvitation) => action(TEAM_INVITATION_RESENT, teamInvitation);\nexport const teamInvitationRevoked = (teamInvitation: TeamInvitation) => action(TEAM_INVITATION_REVOKED, teamInvitation);\n\nexport const teamsFetched = (teams: List<Team.Team>) => action(TEAMS_FETCHED, teams);\n\nexport const teamAccessToBoardGranted = (boardId: BoardModel.BoardId, teamId: Team.TeamId) => action(TEAM_ACCESS_TO_BOARD_GRANTED, {boardId, teamId});\nexport const teamAccessToBoardRevoked = (boardId: BoardModel.BoardId, teamId: Team.TeamId) => action(TEAM_ACCESS_TO_BOARD_REVOKED, {boardId, teamId});\n\nexport const teamMovedToOrganization = (team: Team.Team) => action(TEAM_MOVED_TO_ORGANIZATION, team);\n","import {List, Record} from 'immutable';\nimport * as uuid from 'uuid';\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\n\nexport type TeamId = string;\nexport type TeamName = string;\nexport type TeamDescription = string;\nexport type TeamMemberQuota = number;\n\nexport type TeamValidationError = string;\n\nexport const AGGREGATE_TYPE = 'Team';\n\nexport interface TeamProps {\n    uid: TeamId;\n    name: TeamName;\n    description: TeamDescription;\n    ownerId: UserId;\n    members: List<UserId>;\n    admins: List<UserId>;\n    deleted: boolean;\n    aggregateType: AggregateType;\n    isNew: boolean;\n    organizationId: OrganizationId | null;\n}\n\nexport const defaultTeamProps: TeamProps = {\n    uid: '',\n    name: '',\n    description: '',\n    ownerId: '',\n    members: List(),\n    admins: List(),\n    deleted: true,\n    aggregateType: AGGREGATE_TYPE,\n    isNew: false,\n    organizationId: null,\n};\n\nexport const createTeamFromServerData = (data: any): Either<TeamValidationError, Team> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('teamId'), \"teamId missing\"],\n        [hasKey('name'), \"name missing in \"+data.teamId],\n        [hasKey('description'), \"description missing in \"+data.teamId],\n        [hasKey('ownerId'), \"ownerId missing in \"+data.teamId],\n        [hasKey('members'), \"members missing in \"+data.teamId],\n        [hasKey('admins'), \"admins missing in \"+data.teamId],\n        [hasKey('organizationId'), \"organizationId missing in \"+data.teamId],\n        [hasKey('deleted'), \"deleted missing in \"+data.teamId],\n    );\n\n    if(isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new Team({\n        uid: data.teamId,\n        name: data.name,\n        description: data.description,\n        ownerId: data.ownerId,\n        members: List(data.members),\n        admins: List(data.admins),\n        deleted: data.deleted,\n        aggregateType: AGGREGATE_TYPE,\n        isNew: data.isNew || false,\n        organizationId: data.organizationId || null,\n    }));\n};\n\nexport const createNewTeam = (uid: TeamId): Team => {\n    return new Team({...defaultTeamProps, uid, isNew: true});\n};\n\nexport class Team extends Record(defaultTeamProps) implements TeamProps, Aggregate {\n    public constructor(data: TeamProps) {\n        if(data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    public rename(newName: TeamName): Team {\n        return this.set('name', newName);\n    }\n\n    public changeDescription(newDescription: TeamDescription): Team {\n        return this.set('description', newDescription);\n    }\n\n    public removeMember(userId: UserId): Team {\n        const state = this.set('members', this.members.filter(member => member !== userId));\n        return state.set('admins', state.admins.filter(admin => admin !== userId));\n    }\n\n    public moveToOrganization(organizationId: OrganizationId): Team {\n        return this.set('organizationId', organizationId);\n    }\n\n    public isAdmin(userId: UserId): boolean {\n        return this.ownerId === userId || this.admins.contains(userId);\n    }\n}\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {\n    addAggregate,\n    removeAggregate,\n    removeAllAggregates,\n    updateAggregate,\n    upsertAggregates\n} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    MEMBER_REMOVED_FROM_TEAM,\n    TEAM_ADDED,\n    TEAM_DELETED,\n    TEAM_DESCRIPTION_CHANGED,\n    TEAM_MOVED_TO_ORGANIZATION,\n    TEAM_RENAMED,\n    TEAMS_FETCHED\n} from \"../actions/constants\";\nimport {Team} from '../model';\nimport {InspectioTeamEvent} from './index';\n\nexport interface TeamsState extends Map<string, Team.Team> {\n}\n\nexport const initialState: TeamsState = Map<string, Team.Team>();\n\nconst reducer: Reducer<TeamsState, InspectioTeamEvent> = (state: TeamsState = initialState, event: InspectioTeamEvent): TeamsState => {\n    switch (event.type) {\n        case TEAM_ADDED:\n            return addAggregate(state, event.payload);\n        case TEAM_RENAMED:\n        case TEAM_DESCRIPTION_CHANGED:\n        case MEMBER_REMOVED_FROM_TEAM:\n        case TEAM_MOVED_TO_ORGANIZATION:\n            return updateAggregate(state, event.payload);\n        case TEAMS_FETCHED:\n            state = removeAllAggregates(state);\n            return upsertAggregates(state, event.payload);\n        case TEAM_DELETED:\n            return removeAggregate(state, event.payload);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveTeamReducer };\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {updateAggregate, upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {TEAM_INVITATION_RESENT, TEAM_INVITATION_REVOKED, TEAM_INVITATIONS_LOADED} from \"../actions/constants\";\nimport * as Events from \"../actions/events\";\nimport {TeamInvitation} from \"../model/TeamInvitation\";\n\ntype Event = ActionType<typeof Events>;\n\nexport interface TeamInvitationState extends Map<string, TeamInvitation> {\n}\n\nexport const initialState: TeamInvitationState = Map<string, TeamInvitation>();\n\nconst reducer: Reducer<TeamInvitationState, Event> = (state: TeamInvitationState = initialState, event: Event): TeamInvitationState => {\n    switch (event.type) {\n        case TEAM_INVITATIONS_LOADED:\n            return upsertAggregates(state, event.payload);\n        case TEAM_INVITATION_RESENT:\n            return updateAggregate(state, event.payload);\n        case TEAM_INVITATION_REVOKED:\n            return updateAggregate(state, event.payload);\n        default:\n            return state;\n    }\n};\n\nexport {reducer as saveTeamInvitationReducer};","import {fromJS} from \"immutable\";\nimport { combineReducers } from 'redux-immutable';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Events from \"../actions/events\";\nimport {saveTeamReducer, TeamsState} from \"./applyTeamEvents\";\nimport {saveTeamInvitationReducer, TeamInvitationState} from \"./applyTeamInvitationEvents\";\n\nexport type InspectioTeamEvent = ActionType<typeof Events>;\n\nexport interface InspectioTeamsState {\n    Team: TeamsState,\n    TeamInvitation: TeamInvitationState,\n}\n\nexport const inspectioTeamsReducer = combineReducers<InspectioTeamsState, InspectioTeamEvent>({\n    Team: saveTeamReducer,\n    TeamInvitation: saveTeamInvitationReducer,\n}, () => fromJS({\n    Team: undefined,\n    TeamInvitation: undefined\n}));","import {List} from \"immutable\";\nimport { map } from 'lodash';\nimport { call, put } from 'redux-saga/effects';\nimport {ResponseType} from \"../../api/util\";\nimport { execForEach, execValidate, isFailure, isSuccess, pipe, Success} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as UserAction from \"../../User/actions\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport * as Action from \"../actions\";\nimport {teamsFetched} from \"../actions/events\";\nimport {Team} from \"../model\";\nimport {createTeamFromServerData} from \"../model/Team\";\n\nfunction* loadMembersOfAllTeams(teams: List<Team.Team>) {\n    let memberIds = List<UserId>();\n\n    teams.forEach(team => {memberIds = memberIds.merge(team.members)});\n\n    // Remove duplicate memberIds\n    memberIds = memberIds.toSet().toList();\n\n    yield put(UserAction.Query.loadUsersInfo(memberIds.toArray()));\n}\n\nexport function* loadUserTeams(newTeam?: Team.TeamId) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchUserTeams);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not load teams'));\n    }\n\n    if (response) {\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                if(newTeam && data.teamId === newTeam) {\n                    data.isNew = true;\n                }\n\n                return createTeamFromServerData(data);\n            }),\n        );\n\n        if(isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process team response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load teams'));\n        }\n\n        if(isSuccess(result)) {\n            const teams = List(result.value);\n            yield put(teamsFetched(teams));\n            yield call(loadMembersOfAllTeams, teams);\n        }\n    }\n}\n","import { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { ResponseType } from '../../api/util';\nimport { Action as NotifyAction } from '../../NotificationSystem/index';\nimport * as Action from '../actions/index';\nimport {createNewTeam} from \"../model/Team\";\nimport {loadUserTeams} from \"./loadUserTeams\";\n\ntype Command = ActionType<typeof Action.Command.addTeam>;\n\nfunction* handleAddTeam(command: Command) {\n    const {response, error}: ResponseType = yield call(Action.Api.addTeam, command.payload.teamId, command.payload.teamName, command.payload.organizationId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not add team.'));\n    }\n    if (response) {\n        const newTeam = createNewTeam(command.payload.teamId);\n        yield put(Action.Event.teamAdded(newTeam.rename(command.payload.teamName)));\n\n        yield put(NotifyAction.Command.info('Team created', 'Team created'));\n        yield call(loadUserTeams, command.payload.teamId);\n    }\n}\n\nexport function* addTeam() {\n\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.ADD_TEAM\n        ]);\n\n        yield fork(handleAddTeam, command);\n    }\n}\n","import {call, fork, put, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Api} from \"../actions\";\nimport {ADMIN_GRANT_TEAM_ACCESS_TO_BOARD, ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD} from \"../actions/constants\";\nimport {Action} from \"../index\";\n\ntype FlowAction = ActionType<typeof Action.Command.adminGrantTeamAccessToBoard> & ActionType<typeof Action.Command.adminRevokeTeamAccessToBoard>;\n\nfunction* onAdminGrantTeamAccessToBoard(action: ActionType<typeof Action.Command.adminGrantTeamAccessToBoard>) {\n    let success = false;\n\n    for (const teamId of action.payload.teamIds) {\n        const {response, error}: ResponseType = yield call(\n            Api.adminGrantTeamAccessToBoard,\n            action.payload.boardId,\n            teamId,\n            action.payload.permissions\n        );\n\n        if(error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not add team to board.'));\n        }\n\n        if(response) {\n            success = true;\n            yield put(Action.Event.teamAccessToBoardGranted(action.payload.boardId, teamId));\n\n        }\n    }\n\n\n    if(success) {\n        const plural = action.payload.teamIds.length > 1 ? 's' : '';\n        yield put(NotifyAction.Command.info('Team Added', `Team${plural} successfully added to board`));\n    }\n\n}\n\nfunction* onAdminRevokeTeamAccessToBoard(action: ActionType<typeof Action.Command.adminRevokeTeamAccessToBoard>) {\n    const {response, error}: ResponseType = yield call(Api.adminRevokeTeamAccessToBoard, action.payload.boardId, action.payload.teamId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not revoke team access.'));\n    }\n\n    if(response) {\n        yield put(Action.Event.teamAccessToBoardRevoked(action.payload.boardId, action.payload.teamId));\n        yield put(NotifyAction.Command.info('Team Access Revoked', 'The team has no longer access to the board.'))\n    }\n}\n\nexport function* adminGrantTeamAccessToBoard() {\n    while (true) {\n        const action: FlowAction = yield take([ADMIN_GRANT_TEAM_ACCESS_TO_BOARD, ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD]);\n\n        switch (action.type) {\n            case ADMIN_GRANT_TEAM_ACCESS_TO_BOARD:\n                yield fork(onAdminGrantTeamAccessToBoard, action);\n                break;\n            case ADMIN_REVOKE_TEAM_ACCESS_TO_BOARD:\n                yield fork(onAdminRevokeTeamAccessToBoard, action);\n                break;\n        }\n    }\n}\n","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {makeActiveOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {ApplicationState} from \"../../reducer\";\nimport * as UserModule from \"../../User\";\nimport {MODULE} from \"../index\";\nimport {Team, TeamId} from \"../model/Team\";\n\nexport const getTeamById = (state: Record<ApplicationState>, uid: TeamId): Team|undefined => state.getIn([MODULE, 'Team', uid]);\n\nexport const makeTeamSelector = (teamId: TeamId): (state: Record<ApplicationState>) => Team|undefined => (state: Record<ApplicationState>) => getTeamById(state, teamId);\n\nexport const teamListSelector = (state: Record<ApplicationState>, props: any): List<Team> =>\n    List(state.getIn([MODULE, 'Team']).toIndexedSeq().toArray()) || List();\n\nexport const makeTeamListSelector = (withAdminAccess?: boolean): (state: Record<ApplicationState>, props?: any) => List<Team> => {\n    const currentUserSelector = UserModule.UserSelector.makeGetCurrentUser();\n    const activeOrganizationSelector = makeActiveOrganizationSelector();\n\n    return createSelector(\n        [teamListSelector, currentUserSelector, activeOrganizationSelector],\n        (teams, user, activeOrganization): List<Team> =>  {\n            teams = teams.filter(team => !team.deleted).filter(team => activeOrganization\n                ? team.organizationId === activeOrganization.uid || (!activeOrganization.explicit && team.organizationId === null)\n                : team.organizationId === null);\n            if(withAdminAccess) {\n                teams = teams.filter(team => team.isAdmin(user.uid) || (activeOrganization && activeOrganization.admins.includes(user.uid)));\n            }\n\n            return teams;\n        }\n    )\n};\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\n\ntype Command = ActionType<typeof Action.Command.changeTeamDescription>\n\nfunction* handleChangeTeamDescription(command: Command) {\n    const orgTeam: Team.Team = yield select(makeTeamSelector(command.payload.teamId));\n\n    const changedTeam = orgTeam.changeDescription(command.payload.newDescription);\n\n    yield put(Action.Event.teamDescriptionChanged(changedTeam));\n\n    const {response, error}: ResponseType = yield call(Action.Api.changeTeamDescription, command.payload.teamId, command.payload.newDescription);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not change team description.'));\n        yield put(Action.Event.teamDescriptionChanged(orgTeam));\n    }\n\n    if(response) {\n        yield put(NotifyAction.Command.info('Team Description Changed', 'Description saved successfully'));\n    }\n}\n\nexport function* changeTeamDescription() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.CHANGE_TEAM_DESCRIPTION\n        ]);\n\n        yield fork(handleChangeTeamDescription, command);\n    }\n}","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\nimport {loadUserTeams} from \"./loadUserTeams\";\n\ntype Command = ActionType<typeof Action.Command.deleteTeam>\n\nfunction* handleDeleteTeam(command: Command) {\n    const team: Team.Team = yield select(makeTeamSelector(command.payload.teamId));\n    const {response, error}: ResponseType = yield call(Action.Api.deleteTeam, command.payload.teamId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not delete team.'));\n    }\n    if (response) {\n        yield put(NotifyAction.Command.info('Team deleted', 'Team ' + team.name  + 'deleted'));\n        yield put(Action.Event.teamDeleted(team));\n    }\n}\n\nexport function* deleteTeam() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.DELETE_TEAM\n        ]);\n\n        yield fork(handleDeleteTeam, command);\n    }\n}","import {call, put, select, take} from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { ResponseType } from '../../api/util';\nimport { Action as NotifyAction } from '../../NotificationSystem/index';\nimport * as Action from '../actions/index';\nimport {loadUserTeams} from \"./loadUserTeams\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\n\ntype FlowAction = ActionType<typeof Action.Command.inviteUserToTeam>;\n\nexport function* inviteUserToTeam() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.INVITE_USER_TO_TEAM\n        ]);\n\n        const {response, error}: ResponseType = yield call(Action.Api.inviteUserToTeam, action.payload.invitationId, action.payload.teamId, action.payload.userEmail);\n\n        const team = yield select(makeTeamSelector(action.payload.teamId));\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not add user to team.'));\n        }\n        if (response) {\n            yield put(NotifyAction.Command.info('User invited', 'The user was invited to the team.'));\n\n            yield call(loadUserTeams, team.isNew? team.uid : undefined);\n        }\n    }\n}\n","import { call, fork, put, select, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { ResponseType } from '../../api/util';\nimport { Action as NotifyAction } from '../../NotificationSystem/index';\nimport {memberRemovedFromTeam} from \"../actions/events\";\nimport * as Action from '../actions/index';\nimport {Team} from \"../model\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\n\ntype Command = ActionType<typeof Action.Command.removeMemberFromTeam>;\n\nfunction* handleRemoveMemberFromTeam(command: Command) {\n    const team: Team.Team|undefined = yield select(makeTeamSelector(command.payload.teamId));\n\n    if(!team) {\n        yield put(NotifyAction.Command.error('Internal Error', 'Team could not be loaded from local store. Please contact support.'));\n        return;\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.removeMemberFromTeam, command.payload.teamId, command.payload.memberId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not remove member from team.'));\n    }\n    if (response) {\n        yield put(memberRemovedFromTeam(team.removeMember(command.payload.memberId)));\n        yield put(NotifyAction.Command.info('Member removed', 'The member was removed from the team.'));\n    }\n}\n\nexport function* removeMemberFromTeam() {\n\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.REMOVE_MEMBER_FROM_TEAM\n        ]);\n\n        yield fork(handleRemoveMemberFromTeam, command);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\n\ntype Command = ActionType<typeof Action.Command.renameTeam>\n\nfunction* handleRenameTeam(command: Command) {\n    let team: Team.Team = yield select(makeTeamSelector(command.payload.teamId));\n\n    const oldName = team.name;\n\n    team = team.rename(command.payload.newName);\n\n    yield put(Action.Event.teamRenamed(team));\n\n    const {response, error}: ResponseType = yield call(Action.Api.renameTeam, command.payload.teamId, command.payload.newName);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not rename team.'));\n        team = team.rename(oldName);\n        yield put(Action.Event.teamRenamed(team));\n    }\n    if (response) {\n        yield put(NotifyAction.Command.info('Team renamed', 'Team renamed to: ' + command.payload.newName));\n    }\n}\n\nexport function* renameTeam() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.RENAME_TEAM\n        ]);\n\n        yield fork(handleRenameTeam, command);\n    }\n}","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {TeamInvitation, TeamInvitationId} from \"../model/TeamInvitation\";\n\nexport const getTeamInvitationById = (state: Record<ApplicationState>, uid: TeamInvitationId): TeamInvitation | undefined => state.getIn([MODULE, 'TeamInvitation', uid]);\n\nexport const makeTeamInvitationSelector = (uid: TeamInvitationId): (state: Record<ApplicationState>) => TeamInvitation | undefined => (state: Record<ApplicationState>) => getTeamInvitationById(state, uid);\n\nexport const teamInvitationListSelector = (state: Record<ApplicationState>, props: any): List<TeamInvitation> =>\n    List(state.getIn([MODULE, 'TeamInvitation']).toIndexedSeq().toArray()) || List();\n\nexport const makeTeamInvitationListSelector = (): (state: Record<ApplicationState>, props?: any) => List<TeamInvitation> => {\n    return createSelector(\n        [teamInvitationListSelector],\n        (TeamInvitationList): List<TeamInvitation> => {\n            return TeamInvitationList;\n        }\n    )\n};","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeTeamInvitationSelector} from \"../selectors/TeamInvitation\";\n\ntype Command = ActionType<typeof Action.Command.resendTeamInvitation>\n\nfunction* handleResendTeamInvitation(command: Command) {\n    const teamInvitation = yield select(makeTeamInvitationSelector(command.payload.invitationId));\n\n    if(teamInvitation) {\n        const {response, error} = yield call(Action.Api.resendTeamInvitation, command.payload.invitationId);\n\n        if(error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not resend team invitation.'));\n        }\n\n        if(response) {\n            yield put(NotifyAction.Command.info(\n                'insp.team.notify.invitation_resend.success.title',\n                'insp.team.notify.invitation_resend.success.msg',\n                {email: teamInvitation.invitedUser}\n            ));\n        }\n\n        yield put(Action.Event.teamInvitationResent(teamInvitation.resend()));\n    }\n}\n\nexport function* resendTeamInvitation() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.RESEND_TEAM_INVITATION\n        ]);\n\n        yield fork(handleResendTeamInvitation, command);\n    }\n}","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {makeTeamInvitationSelector} from \"../selectors/TeamInvitation\";\n\ntype Command = ActionType<typeof Action.Command.revokeTeamInvitation>\n\nfunction* handleRevokeTeamInvitation(command: Command) {\n    const teamInvitation = yield select(makeTeamInvitationSelector(command.payload.invitationId));\n\n    if(teamInvitation) {\n        const {response, error} = yield call(Action.Api.revokeTeamInvitation, command.payload.invitationId);\n\n        if(error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not revoke team invitation.'));\n        }\n\n        if(response) {\n            yield put(NotifyAction.Command.info(\n                'insp.team.notify.invitation_revoke.success.title',\n                'insp.team.notify.invitation_revoke.success.msg',\n                {email: teamInvitation.invitedUser}\n            ));\n\n            yield put(Action.Event.teamInvitationRevoked(teamInvitation.revoke()));\n        }\n    }\n}\n\nexport function* revokeTeamInvitation() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.REVOKE_TEAM_INVITATION\n        ]);\n\n        yield fork(handleRevokeTeamInvitation, command);\n    }\n}","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport * as UserModule from \"../../User\";\nimport {loadUserTeams} from \"./loadUserTeams\";\n\ntype Event = ActionType<typeof UserModule.Action.Event.activeOrganizationSwitched>\n\nfunction* handleRefreshUserTeams(event: Event) {\n    yield call(loadUserTeams);\n}\n\nexport function* refreshUserTeams() {\n    while (true) {\n        const event: Event = yield take([\n            UserModule.Action.Type.ACTIVE_ORGANIZATION_SWITCHED\n        ]);\n\n        yield fork(handleRefreshUserTeams, event);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {teamMovedToOrganization} from \"../actions/events\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport {makeTeamSelector} from \"../selectors/selectTeam\";\n\ntype Command = ActionType<typeof Action.Command.moveTeamToOrganization>\n\nfunction* handleMoveTeamToOrganization(command: Command) {\n    const team: Team.Team|undefined = yield select(makeTeamSelector(command.payload.teamId));\n\n    if(!team) {\n        yield put(NotifyAction.Command.error('Internal Error', 'Team could not be loaded from local store. Please contact support.'));\n        return;\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.moveTeamToOrganization, command.payload.teamId, command.payload.organizationId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not move team to organization'));\n    }\n    if (response) {\n        yield put(teamMovedToOrganization(team.moveToOrganization(command.payload.organizationId)));\n        yield put(NotifyAction.Command.info('Team moved', 'Moved team successfully to organization.'));\n    }\n}\n\nexport function* moveTeamToOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.MOVE_TEAM_TO_ORGANIZATION\n        ]);\n\n        yield fork(handleMoveTeamToOrganization, command);\n    }\n}\n","import * as Action from \"./actions\";\nimport * as Model from \"./model\";\nimport * as Reducer from \"./reducers\";\nimport * as Saga from \"./sagas\";\nimport * as Selector from \"./selectors\";\n\nconst MODULE = 'inspectioTeams';\n\nexport {\n    MODULE,\n    Reducer,\n    Action,\n    Model,\n    Saga,\n    Selector\n};\n","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {TeamId} from \"../../InspectioTeams/model/Team\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {BoardId} from \"../model/Board\";\nimport {BoardPermissionForTeam, PermissionsId} from \"../model/BoardPermissionForTeam\";\nimport {BoardPermissionForUser} from \"../model/BoardPermissionForUser\";\n\nexport const getBoardPermissionForTeamById = (state: Record<ApplicationState>, permissionId: PermissionsId): BoardPermissionForTeam =>\n    state.getIn([MODULE, 'boardPermissionsForTeams', permissionId]);\n\nexport const makeBoardPermissionForTeamSelector = (boardId: BoardId, teamId: TeamId): (state: Record<ApplicationState>, props?: any) => BoardPermissionForTeam|undefined => {\n    return createSelector(\n        [boardPermissionForTeamListSelector],\n        (boardPermissions): BoardPermissionForTeam|undefined => {\n            return boardPermissions.find(permission => permission.teamId === teamId && permission.boardId === boardId);\n        }\n    )\n};\n\nexport const boardPermissionForUserListSelector = (state: Record<ApplicationState>, props: any): List<BoardPermissionForUser> =>\n    List(state.getIn([MODULE, 'boardPermissionsForUsers']).toIndexedSeq().toArray()) || List();\n\nexport const boardPermissionForTeamListSelector = (state: Record<ApplicationState>, props: any): List<BoardPermissionForTeam> =>\n    List(state.getIn([MODULE, 'boardPermissionsForTeams']).toIndexedSeq().toArray()) || List();\n\nexport const makeBoardPermissionForUserListSelector = (boardId: string): (state: Record<ApplicationState>, props?: any) => List<BoardPermissionForUser> => {\n    return createSelector(\n        [boardPermissionForUserListSelector],\n        (boardPermissions): List<BoardPermissionForUser> =>  {\n            return boardPermissions.filter(boardPermission => boardPermission.boardId === boardId);\n        }\n    )\n};\n\nexport const makeBoardPermissionForTeamListSelector = (boardId: string): (state: Record<ApplicationState>, props?: any) => List<BoardPermissionForTeam> => {\n    return createSelector(\n        [boardPermissionForTeamListSelector],\n        (boardPermissions): List<BoardPermissionForTeam> =>  {\n            return boardPermissions.filter(boardPermission => boardPermission.boardId === boardId);\n        }\n    )\n};\n","import * as React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Header, Icon, Image, Label, Table} from \"semantic-ui-react\";\nimport {Action as TeamAction} from \"../../../InspectioTeams\";\nimport {makeTeamSelector} from \"../../../InspectioTeams/selectors/selectTeam\";\nimport * as Action from \"../../actions\";\nimport {Board} from \"../../model/Board\";\nimport {BoardPermissionForTeam} from \"../../model/BoardPermissionForTeam\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n    boardPermission: BoardPermissionForTeam;\n}\n\nexport type BoardPermissionsForTeamsTableEntryProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport const BoardPermissionsForTeamsTableEntry = (props: BoardPermissionsForTeamsTableEntryProps) => {\n\n    const dispatch = useDispatch();\n    const team = useSelector(makeTeamSelector(props.boardPermission.teamId));\n\n    const hasReadAccess = props.boardPermission.permissions.readAccess;\n    const hasWriteAccess = props.boardPermission.permissions.writeAccess;\n\n    if (!hasReadAccess && !hasWriteAccess) {\n        return null;\n    }\n\n    if (!team) {\n        return null;\n    }\n\n    const handleRevokeAccessToBoard = () => {\n        dispatch(TeamAction.Command.adminRevokeTeamAccessToBoard(props.board.uid, team.uid));\n    };\n\n    const handleChangeReadBoardPermissions = () => {\n        if(!props.boardPermission.permissions.writeAccess) {\n            return;\n        }\n\n        dispatch(Action.Command.adminChangeTeamBoardPermissions(\n            props.board.uid,\n            team.uid,\n            { ...props.boardPermission.permissions, writeAccess: false }\n        ));\n    };\n\n    const handleChangeWriteBoardPermissions = () => {\n        dispatch(Action.Command.adminChangeTeamBoardPermissions(\n            props.board.uid,\n            team.uid,\n            { ...props.boardPermission.permissions, writeAccess: !props.boardPermission.permissions.writeAccess }\n        ));\n    };\n\n    return (\n        <Table.Row>\n            <Table.Cell style={{width: \"310px\"}}>\n                <Header as='h4' image={true}>\n                    <img className=\"ui avatar image\" src={`/avatar/team-${team.uid}?displayName=${team.name}`} />\n                    <Header.Content>\n                        {team.name}\n                        <Header.Subheader>{team.description}</Header.Subheader>\n                    </Header.Content>\n                </Header>\n            </Table.Cell>\n            <Table.Cell>\n                <Button.Group>\n                    <Button\n                        className={'positive'}\n                        children={'Read'}\n                        onClick={handleChangeReadBoardPermissions}\n                    />\n                    <Button.Or text=\"+\" />\n                    <Button\n                        className={hasWriteAccess ? 'positive' : ''}\n                        children={'Write'}\n                        onClick={handleChangeWriteBoardPermissions}\n                    />\n                </Button.Group>\n                <Button\n                    icon={true}\n                    className=\"right floated basic circular noborder\"\n                    children={<Icon className=\"red close icon\" />}\n                    onClick={handleRevokeAccessToBoard}\n                />\n            </Table.Cell>\n        </Table.Row>\n    );\n};\n","import * as React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {Table} from \"semantic-ui-react\";\nimport {Board} from \"../../model/Board\";\nimport {makeBoardPermissionForTeamListSelector} from \"../../selectors/boardPermission\";\nimport {BoardPermissionsForTeamsTableEntry} from \"./BoardPermissionsForTeamsTableEntry\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n}\n\nexport type BoardPermissionsForTeamsTableProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport const BoardPermissionsForTeamsTable = (props: BoardPermissionsForTeamsTableProps) => {\n\n    const boardPermissions = useSelector(makeBoardPermissionForTeamListSelector(props.board.uid));\n\n    return (\n        <Table unstackable={true} basic=\"very\">\n            <Table.Body>\n                {boardPermissions.map(boardPermission => (\n                    <BoardPermissionsForTeamsTableEntry\n                        board={props.board}\n                        boardPermission={boardPermission}\n                        key={boardPermission.uid}\n                    />\n                ))}\n            </Table.Body>\n        </Table>\n    );\n};\n","import * as React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Header, Icon, Image, Label, Table} from \"semantic-ui-react\";\nimport {IioUserInfo} from \"../../../User/model/IioUserInfo\";\nimport {makeGetIioUserInfoByIdSelector} from \"../../../User/selectors/iioUserInfo\";\nimport * as Action from \"../../actions\";\nimport {Board} from \"../../model/Board\";\nimport {BoardPermissionForUser} from \"../../model/BoardPermissionForUser\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n    boardPermission: BoardPermissionForUser;\n}\n\nexport type BoardPermissionsTableEntryProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport const BoardPermissionTableEntry = (props: BoardPermissionsTableEntryProps) => {\n\n    const dispatch = useDispatch();\n    const userInfo: IioUserInfo|undefined = useSelector(makeGetIioUserInfoByIdSelector(props.boardPermission.userId));\n\n    const isOwner = props.board.owner === props.boardPermission.userId || props.board.creator === props.boardPermission.userId;\n    const hasReadAccess = props.boardPermission.permissions.readAccess;\n    const hasWriteAccess = props.boardPermission.permissions.writeAccess;\n\n    if (!hasReadAccess && !hasWriteAccess) {\n        return null;\n    }\n\n    if (!userInfo) {\n        return null;\n    }\n\n    const handleRevokeAccessToBoard = () => {\n        dispatch(Action.Command.revokeAccessToBoard(props.board.uid, userInfo.userId));\n    };\n\n    const handleChangeReadBoardPermissions = () => {\n        if(!props.boardPermission.permissions.writeAccess) {\n            return;\n        }\n\n        dispatch(Action.Command.changeBoardPermissions(\n            props.board.uid,\n            userInfo.userId,\n            { ...props.boardPermission.permissions, writeAccess: false }\n        ));\n    };\n\n    const handleChangeWriteBoardPermissions = () => {\n        dispatch(Action.Command.changeBoardPermissions(\n            props.board.uid,\n            userInfo.userId,\n            { ...props.boardPermission.permissions, writeAccess: !props.boardPermission.permissions.writeAccess }\n        ));\n    };\n\n    return (\n        <Table.Row>\n            <Table.Cell style={{width: \"310px\"}}>\n                <Header as='h4' image={true}>\n                    <img className=\"ui avatar image\" src={userInfo.avatar()} alt={userInfo.username} />\n                    <Header.Content>\n                        {userInfo.username}\n                        {isOwner && (\n                            <Label color='blue' style={{marginBottom:\"0.2rem\", marginLeft:\"0\"}} basic={true}>Owner</Label>\n                        )}\n                        <Header.Subheader>{userInfo.position}</Header.Subheader>\n                    </Header.Content>\n                </Header>\n            </Table.Cell>\n            <Table.Cell>\n                <Button.Group>\n                    <Button\n                        className={'positive'}\n                        children={'Read'}\n                        disabled={isOwner}\n                        onClick={handleChangeReadBoardPermissions}\n                    />\n                    <Button.Or text=\"+\" />\n                    <Button\n                        className={hasWriteAccess ? 'positive' : ''}\n                        children={'Write'}\n                        disabled={isOwner}\n                        onClick={handleChangeWriteBoardPermissions}\n                    />\n                </Button.Group>\n                {!isOwner && (\n                    <Button\n                        icon={true}\n                        className=\"right floated basic noborder circular button\"\n                        children={<Icon className=\"red close icon\" />}\n                        onClick={handleRevokeAccessToBoard}\n                    />\n                )}\n            </Table.Cell>\n        </Table.Row>\n    );\n};\n","import * as React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {Table} from \"semantic-ui-react\";\nimport {Board} from \"../../model/Board\";\nimport {AGGREGATE_TYPE, BoardPermissionForUser} from \"../../model/BoardPermissionForUser\";\nimport {makeBoardPermissionForUserListSelector} from \"../../selectors/boardPermission\";\nimport {BoardPermissionTableEntry} from \"./BoardPermissionsTableEntry\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n}\n\nexport type BoardPermissionsTableProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport const BoardPermissionTable = (props: BoardPermissionsTableProps) => {\n\n    const currentUser = useSelector(makeGetCurrentUser());\n    const boardPermissions = useSelector(makeBoardPermissionForUserListSelector(props.board.uid));\n\n    const onwerId = props.board.owner || props.board.creator;\n\n    return (\n        <Table unstackable={true} basic=\"very\">\n            <Table.Body>\n                <BoardPermissionTableEntry\n                    board={props.board}\n                    boardPermission={new BoardPermissionForUser({\n                        uid: '',\n                        aggregateType: AGGREGATE_TYPE,\n                        permissions: { readAccess: true, writeAccess: true, adminAccess: true },\n                        userId: onwerId as string,\n                        boardId: props.board.uid\n                    })}\n                />\n                {boardPermissions.map(boardPermission => (\n                    <BoardPermissionTableEntry\n                        key={boardPermission.uid}\n                        board={props.board}\n                        boardPermission={boardPermission}\n                    />\n                ))}\n            </Table.Body>\n        </Table>\n    );\n};\n","import React from 'react'\nimport {Button, ButtonProps} from \"semantic-ui-react\";\n\nconst SecondaryButton = (props: ButtonProps) => {\n    const btnProps = {...props, basic: true};\n    return <Button  {...btnProps} className=\"noborder\" />\n};\n\nexport default SecondaryButton;","import * as React from 'react';\nimport {Button, Image, Label, Popup, SemanticSIZES} from \"semantic-ui-react\";\nimport {IioUserInfo} from \"../model\";\n\ninterface OwnProps {\n    user: IioUserInfo.IioUserInfo,\n    size?: SemanticSIZES,\n    namePopup?: boolean,\n}\n\ntype UserAvatarProps = OwnProps;\n\nconst UserAvatar = (props: UserAvatarProps) => {\n    if(props.user.anonymous) {\n        // Label looks ugly with an Icon only, hence we use a disabled button here. Icon alone does not work, because icons use other size options :-(\n        return <Button circular={true} size={props.size || 'small'} className=\"user\" icon=\"user\" disabled={true} style={{cursor: \"default\"}}/>\n    } else {\n        const avatar = <Image size={props.size || 'small'} src={props.user.avatar()} avatar={true} verticalAlign=\"middle\" />;\n\n        if(props.namePopup) {\n            return <Popup   trigger={avatar}\n                            content={props.user.username}\n                            position=\"bottom center\" />\n        }\n\n        return avatar;\n    }\n\n};\n\nexport default UserAvatar;","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {BoardInvitation, BoardInvitationId} from \"../model/BoardInvitation\";\n\nexport const getBoardInvitationById = (state: Record<ApplicationState>, uid: BoardInvitationId): BoardInvitation | undefined =>\n    state.getIn([MODULE, 'boardInvitations', uid]);\n\nexport const makeBoardInvitationSelector = (uid: BoardInvitationId): (state: Record<ApplicationState>) => BoardInvitation | undefined =>\n    (state: Record<ApplicationState>) => getBoardInvitationById(state, uid);\n\nexport const boardInvitationListSelector = (state: Record<ApplicationState>, props: any): List<BoardInvitation> =>\n    List(state.getIn([MODULE, 'boardInvitations']).toIndexedSeq().toArray()) || List();\n\nexport const makeOpenBoardInvitationListSelector = (boardId: string): (state: Record<ApplicationState>, props?: any) => List<BoardInvitation> => {\n    return createSelector(\n        [boardInvitationListSelector],\n        (boardInvitations): List<BoardInvitation> =>  {\n            return boardInvitations.filter(boardInvitation =>\n                boardInvitation.boardId === boardId && boardInvitation.status === 'pending'\n            );\n        }\n    )\n};\n","import * as React from \"react\";\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {ButtonGroup, ListItem, Table} from \"semantic-ui-react\";\nimport SecondaryButton from \"../../../core/components/SecondaryButton\";\nimport {isSuccess} from \"../../../core/validation/either\";\nimport * as UserModule from \"../../../User\";\nimport UserAvatar from \"../../../User/components/UserAvatar\";\nimport {createAnonymous} from \"../../../User/model/IioUserInfo\";\nimport * as Action from \"../../actions\";\nimport {Board} from \"../../model/Board\";\nimport {BoardInvitation} from \"../../model/BoardInvitation\";\nimport {makeBoardInvitationSelector} from \"../../selectors/boardInvitation\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n    boardInvitation: BoardInvitation;\n}\n\nexport type OpenBoardInvitationTableEntryProps = PropsFromState & PropsFromDispatch & OwnProps & WithNamespaces;\n\nconst OpenBoardInvitationsTableEntry = (props: OpenBoardInvitationTableEntryProps) => {\n\n    const dispatch = useDispatch();\n    const [userInfo, setUserInfo] = useState(createAnonymous());\n    const [isResending, setIsResending] = useState<boolean>(false);\n    const [isRevoking, setIsRevoking] = useState<boolean>(false);\n    const invitation = useSelector(makeBoardInvitationSelector(props.boardInvitation.uid));\n\n    useEffect(() => {\n        UserModule.Action.Api.getInspectioUserInfoByEmail(props.boardInvitation.invitedUserEmail).then(({response, error}) => {\n            if(response) {\n                const result = UserModule.IioUserInfo.createIioUserInfoFromServerData(response.data);\n\n                if(isSuccess(result)) {\n                    setUserInfo(result.value);\n                }\n            }\n        })\n    }, [props.boardInvitation.invitedUserEmail]);\n\n    useEffect(\n        () => {\n            setIsResending(false);\n            setIsRevoking(false);\n        },\n        [invitation]\n    );\n\n    const handleResendInvitation = () => {\n        if (isResending || isRevoking) {\n            return;\n        }\n\n        setIsResending(true);\n        dispatch(Action.Command.resendBoardInvitation(props.boardInvitation.uid));\n    };\n\n    const handleRevokeInvitation = () => {\n        if (isResending || isRevoking) {\n            return;\n        }\n\n        setIsRevoking(true);\n        dispatch(Action.Command.revokeBoardInvitation(props.boardInvitation.uid));\n    };\n\n    return (\n        <Table.Row>\n            <Table.Cell style={{ width: \"250px\" }}>\n                <UserAvatar user={userInfo} size=\"mini\" />\n                <span style={{paddingLeft: \"10px\"}}>{props.boardInvitation.invitedUserEmail}</span>\n            </Table.Cell>\n            <Table.Cell>\n                <ButtonGroup floated=\"right\">\n                    <SecondaryButton\n                        content={props.t('app.form.resend')}\n                        icon=\"paper plane\"\n                        loading={isResending}\n                        onClick={handleResendInvitation}\n                    />\n                    <SecondaryButton\n                        content={props.t('app.form.revoke')}\n                        icon=\"delete\"\n                        loading={isRevoking}\n                        onClick={handleRevokeInvitation}\n                    />\n                </ButtonGroup>\n            </Table.Cell>\n        </Table.Row>\n    );\n};\n\nexport default withNamespaces()(OpenBoardInvitationsTableEntry);\n","import * as React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {Table} from \"semantic-ui-react\";\nimport {Board} from \"../../model/Board\";\nimport {makeOpenBoardInvitationListSelector} from \"../../selectors/boardInvitation\";\nimport OpenBoardInvitationsTableEntry from \"./OpenBoardInvitationsTableEntry\";\nimport {List} from \"immutable\";\nimport {BoardInvitation} from \"../../model/BoardInvitation\";\n\ninterface PropsFromState {\n}\n\ninterface PropsFromDispatch {\n\n}\n\ninterface OwnProps {\n    board: Board;\n    openInvitations: List<BoardInvitation>;\n}\n\nexport type OpenBoardInvitationsTableProps = PropsFromState & PropsFromDispatch & OwnProps;\n\nexport const OpenBoardInvitationsTable = (props: OpenBoardInvitationsTableProps) => {\n\n    return (\n        <Table unstackable={true} basic=\"very\">\n            <Table.Body>\n                {props.openInvitations.map(boardInvitation => (\n                    <OpenBoardInvitationsTableEntry\n                        key={boardInvitation.uid}\n                        board={props.board}\n                        boardInvitation={boardInvitation}\n                    />\n                ))}\n            </Table.Body>\n        </Table>\n    );\n};\n","import React, {useState} from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Label, Search, Table} from \"semantic-ui-react\";\nimport {Action as Notify} from \"../../../NotificationSystem\";\nimport {BoardId} from \"../../model/Board\";\nimport {Permissions} from \"../../model/BoardPermissionForUser\";\nimport {Email, UserId, Username} from \"../../../User/model/UserInfo\";\nimport {List} from \"immutable\";\n\nexport interface ShareBoardWithUserFormData  {\n    boardId: BoardId,\n    email: string,\n    permissions: Permissions\n}\n\nexport interface OwnProps {\n    boardId: BoardId,\n    email: string,\n    permissions: Permissions,\n    users: List<{ userId: UserId, name: Username, email: Email, avatar: string }>,\n    handleSubmit: (data: ShareBoardWithUserFormData) => void,\n}\n\nexport interface PropsFromDispatch {\n\n}\n\n\nexport type ShareBoardFormProps = OwnProps & PropsFromDispatch & WithNamespaces;\n\nconst PAGE_EMAIL_INPUT = 1;\nconst PAGE_PERMISSIONS = 2;\n\nconst ShareBoardForm = (props: ShareBoardFormProps) => {\n\n    const dispatch = useDispatch();\n    const [email, setEmail] = useState<string>(props.email);\n    const [writeAccess, setWriteAccess] = useState<boolean>(props.permissions.writeAccess);\n\n    const filteredUsers = props.users\n        .filter(user => user.name.toLocaleLowerCase().includes(email.toLocaleLowerCase()) || user.email.toLocaleLowerCase().includes(email.toLocaleLowerCase()))\n        .sortBy(user => user.name)\n        .map(user => {\n        return {\n            id: user.userId,\n            title: user.name,\n            description: user.email,\n            image: user.avatar,\n        }\n    });\n\n    const reset = () => {\n        setWriteAccess(true);\n        setEmail('');\n    };\n\n    const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n        event.preventDefault();\n\n        if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email)) {\n            dispatch(Notify.Command.error('Invalid email address', 'Invalid email address'));\n            return;\n        }\n\n        props.handleSubmit({\n            boardId: props.boardId,\n            email,\n            permissions: { ...props.permissions, writeAccess }\n        });\n        reset();\n    };\n\n    return (\n        <form className=\"ui form\" onSubmit={handleSubmit}>\n            <div className=\"fields\" style={{margin:\"0\"}}>\n                <Table unstackable={true} basic=\"very\">\n                    <Table.Body>\n                        <Table.Row>\n                            <Table.Cell style={{width: \"310px\"}}>\n                                <Search\n                                    fluid={true}\n                                    value={email}\n                                    results={filteredUsers.toArray()}\n                                    placeholder={props.t('insp.board.form.email') as string}\n                                    showNoResults={false}\n                                    resultRenderer={data => {\n                                        return <div key={data.id}>\n                                            <div className=\"ui image avatar\">\n                                                <img src={data.image} alt={data.title} />\n                                            </div>\n                                            <div className=\"content\">\n                                                <div className=\"title\">{data.title}</div>\n                                                <div className=\"description\">{data.description}</div>\n                                            </div>\n                                        </div>\n                                    }}\n                                    onSearchChange={(e, data) => setEmail(data.value || '')}\n                                    onResultSelect={(e, data) => {\n                                        setEmail(data.result.description)\n                                    }}\n                                />\n                            </Table.Cell>\n                            <Table.Cell>\n                                <Button.Group>\n                                    <Button\n                                        type={'button'}\n                                        className={'positive'}\n                                        children={'Read'}\n                                        onClick={() => setWriteAccess(false)}\n                                    />\n                                    <Button.Or text=\"+\" />\n                                    <Button\n                                        type={'button'}\n                                        className={writeAccess ? 'positive' : ''}\n                                        children={'Write'}\n                                        onClick={() => setWriteAccess(!writeAccess)}\n                                    />\n                                </Button.Group>\n                            </Table.Cell>\n                            <Table.Cell>\n                                <Button primary={true} type=\"submit\" floated=\"right\">\n                                    {props.t('insp.board.form.btn_share')}\n                                </Button>\n                            </Table.Cell>\n                        </Table.Row>\n                    </Table.Body>\n                </Table>\n            </div>\n        </form>\n    );\n};\n\nexport default withNamespaces()(ShareBoardForm);\n","import React, {useState} from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Button, Dropdown, DropdownProps, Label, Table} from \"semantic-ui-react\";\nimport {Model as TeamModel} from \"../../../InspectioTeams\";\nimport {makeTeamListSelector} from \"../../../InspectioTeams/selectors/selectTeam\";\nimport {UserInfo} from \"../../../User/model/UserInfo\";\nimport {BoardId} from \"../../model/Board\";\nimport {Permissions} from \"../../model/BoardPermissionForUser\";\nimport {makeBoardPermissionForTeamListSelector} from \"../../selectors/boardPermission\";\n\nexport interface ShareBoardWithTeamFormData {\n    boardId: BoardId,\n    teamIds: TeamModel.Team.TeamId[],\n    permissions: Permissions,\n}\n\nexport interface OwnProps {\n    boardId: BoardId,\n    user: UserInfo,\n    permissions: Permissions,\n    handleSubmit: (data: ShareBoardWithTeamFormData) => void,\n}\n\nexport type ShareBoardWithTeamFormProps = OwnProps & WithNamespaces;\n\nconst PAGE_TEAM_NAME_INPUT = 1;\nconst PAGE_PERMISSIONS = 2;\n\nconst ShareBoardWithTeamForm = (props: ShareBoardWithTeamFormProps) => {\n\n    const teams = useSelector(makeTeamListSelector());\n    const [page, setPage] = useState<number>(PAGE_TEAM_NAME_INPUT);\n    const [selectedTeams, setSelectedTeams] = useState<string[]>([]);\n    const [writeAccess, setWriteAccess] = useState<boolean>(props.permissions.writeAccess);\n\n    const boardPermissions = useSelector(makeBoardPermissionForTeamListSelector(props.boardId));\n    const teamBlacklist = boardPermissions.map(boardPermission => boardPermission.teamId);\n\n    const filteredTeams = teams.filter(team => !teamBlacklist.contains(team.uid));\n\n    const ownTeamsOptions = teams.map(team => ({\n        key: team.uid,\n        value: team.uid,\n        text: team.name\n    })).toArray();\n\n    const reset = () => {\n        setWriteAccess(props.permissions.writeAccess);\n        setSelectedTeams([]);\n    };\n\n    const handleChange = (e: React.SyntheticEvent, dProps: DropdownProps) => setSelectedTeams(dProps.value as string[]);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        props.handleSubmit({\n            boardId: props.boardId,\n            teamIds: selectedTeams,\n            permissions: { ...props.permissions, writeAccess }\n        });\n        reset();\n    };\n\n    return (\n        <form className=\"ui form\" onSubmit={handleSubmit}>\n            <div className=\"fields\" style={{margin: \"0\"}}>\n                <Table unstackable={true} basic=\"very\">\n                    <Table.Body>\n                        <Table.Row>\n                            <Table.Cell style={{width: \"310px\", verticalAlign: \"top\"}}>\n                                <div className=\"inline field\" style={{width: '100%'}}>\n                                    <Dropdown\n                                        placeholder={props.t('insp.board.form.team_name') as string}\n                                        search={true}\n                                        selection={true}\n                                        multiple={true}\n                                        options={ownTeamsOptions}\n                                        value={selectedTeams}\n                                        onChange={handleChange}\n                                        style={{width: '100%'}}\n                                    />\n                                </div>\n                            </Table.Cell>\n                            <Table.Cell style={{verticalAlign: \"top\"}}>\n                                <Button.Group>\n                                    <Button\n                                        type={'button'}\n                                        className={'positive'}\n                                        children={'Read'}\n                                        onClick={() => setWriteAccess(false)}\n                                    />\n                                    <Button.Or text=\"+\" />\n                                    <Button\n                                        type={'button'}\n                                        className={writeAccess ? 'positive' : ''}\n                                        children={'Write'}\n                                        onClick={() => setWriteAccess(!writeAccess)}\n                                    />\n                                </Button.Group>\n                            </Table.Cell>\n                            <Table.Cell style={{verticalAlign: \"top\"}}>\n                                <Button primary={true} type=\"submit\" disabled={selectedTeams.length === 0}>\n                                    {props.t('insp.board.form.btn_share')}\n                                </Button>\n                            </Table.Cell>\n                        </Table.Row>\n                    </Table.Body>\n                </Table>\n            </div>\n        </form>\n    );\n};\n\nexport default withNamespaces()(ShareBoardWithTeamForm);\n","\nexport const readFile = (file: File): Promise<string> => {\n    return new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = () => reject();\n        reader.readAsText(file, 'UTF-8');\n    });\n};\n\nexport const readFileArrayBuffer = (file: File): Promise<ArrayBuffer> => {\n    return new Promise<ArrayBuffer>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as ArrayBuffer);\n        reader.onerror = () => reject();\n        reader.readAsArrayBuffer(file);\n    });\n}\n\nexport const readFileBase64 = (file: File): Promise<string> => {\n    return new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = () => reject();\n        reader.readAsDataURL(file);\n    });\n};\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Divider, Tab} from \"semantic-ui-react\";\nimport {Action as TeamAction} from \"../../../InspectioTeams\";\nimport {makeOrganizationSelector} from \"../../../Organization/selectors/selectOrganization\";\nimport {UserId} from \"../../../User/model/UserInfo\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\nimport {makeIioFilteredUserListSelector} from \"../../../User/selectors/iioUserInfo\";\nimport * as Action from \"../../actions\";\nimport {BoardModel} from \"../../model\";\nimport {BoardPermissionsForTeamsTable} from \"./BoardPermissionsForTeamsTable\";\nimport {BoardPermissionTable} from \"./BoardPermissionsTable\";\nimport {OpenBoardInvitationsTable} from \"./OpenBoardInvitationsTable\";\nimport {default as ShareBoardForm, ShareBoardWithUserFormData} from \"./ShareBoardForm\";\nimport ShareBoardWithTeamForm, {ShareBoardWithTeamFormData} from \"./ShareBoardWithTeamForm\";\nimport {makeOpenBoardInvitationListSelector} from \"../../selectors/boardInvitation\";\n\ninterface OwnProps {\n    board?: BoardModel.Board;\n}\n\ntype BoardPermissionsMenuProps = OwnProps & WithNamespaces;\n\nconst BoardPermissionsMenu = (props: BoardPermissionsMenuProps) => {\n    const dispatch = useDispatch();\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const organizationUserIds = List<UserId>(organization ? [organization.ownerId, ...organization.members.toJS()] : []);\n    const organizationUsers = useSelector(makeIioFilteredUserListSelector(organizationUserIds));\n    const openBoardInvitations = useSelector(makeOpenBoardInvitationListSelector(props.board ? props.board.uid : ''));\n\n    const shareBoard = (data: ShareBoardWithUserFormData): void => {\n        dispatch(Action.Command.shareBoard(data.boardId, data.email, data.permissions));\n    };\n\n    const shareBoardWithTeams = (data: ShareBoardWithTeamFormData): void => {\n        dispatch(TeamAction.Command.adminGrantTeamAccessToBoard(data.boardId, data.teamIds, data.permissions));\n    };\n\n    if (!props.board || !organization) {\n        return <></>;\n    }\n\n    const usersPane = <>\n        <ShareBoardForm\n            boardId={props.board.uid}\n            email={''}\n            permissions={{ readAccess: true, writeAccess: true, adminAccess: false }}\n            handleSubmit={shareBoard}\n            users={organizationUsers.map(user => ({\n                userId: user.userId,\n                name: user.username,\n                avatar: user.avatarUrl,\n                email: user.email\n            }))}\n        />\n        <Divider />\n        <BoardPermissionTable board={props.board} />\n        {openBoardInvitations.count() > 0 && <>\n            <Divider horizontal={true}>Open Invitations</Divider>\n            <OpenBoardInvitationsTable openInvitations={openBoardInvitations} board={props.board} />\n        </>}\n    </>;\n\n    const teamsPane = <>\n        <ShareBoardWithTeamForm\n            boardId={props.board.uid}\n            user={currentUser}\n            permissions={{ readAccess: true, writeAccess: true, adminAccess: false }}\n            handleSubmit={shareBoardWithTeams}\n        />\n        <Divider />\n        <BoardPermissionsForTeamsTable board={props.board} />\n    </>;\n\n    const panes = [\n        {\n            \"menuItem\": \"User\",\n            render: () => usersPane,\n        },\n        {\n            \"menuItem\": \"Teams\",\n            render: () => teamsPane,\n        }\n    ];\n\n    return <Tab menu={{ secondary: true, pointing: true, color: 'orange' }} panes={panes} />\n};\n\nexport default withNamespaces()(BoardPermissionsMenu);\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {BoardId} from \"./Board\";\nimport {NodeType} from \"./Graph\";\n\nexport const AGGREGATE_TYPE = 'StickyTemplate';\n\nexport type StickyTemplateId = string;\nexport type StickyTemplateError = string;\nexport type TemplateString = string;\nexport type TemplateType = 'json'|'xml'|'yaml';\nexport type TemplateSchema = string|null;\n\nexport interface StickyTemplateProps {\n    uid: StickyTemplateId;\n    aggregateType: AggregateType;\n    cellType: NodeType;\n    template: TemplateString;\n    templateType: TemplateType;\n    templateSchema?: TemplateSchema;\n    boardId: BoardId;\n}\n\nexport const defaultStickyTemplateProps: StickyTemplateProps = {\n    uid: '',\n    aggregateType: AGGREGATE_TYPE,\n    cellType: NodeType.misc,\n    template: '',\n    templateType: 'json',\n    templateSchema: undefined,\n    boardId: '',\n};\n\nexport const deriveStickTemplateId = (boardId: BoardId, cellType: NodeType): StickyTemplateId => {\n    return `${boardId}__${cellType}`;\n}\n\nexport const createStickyTemplateFromServerData = (data: any): Either<StickyTemplateError, StickyTemplate> => {\n    const validatedData: Either<StickyTemplateError, any> = validate(data,\n        [hasKey('boardId'), \"boardId missing\"],\n        [hasKey('cellType'), \"cellType missing\"],\n        [hasKey('template'), \"template missing\"],\n        [hasKey('templateType'), \"templateType is missing\"]\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new StickyTemplate({\n        ...defaultStickyTemplateProps,\n        ...data,\n        uid: deriveStickTemplateId(data.boardId, data.cellType)\n    }));\n};\n\nexport const createStickyTemplateFromDefault = (boardId: BoardId, cellType: NodeType, template: string): StickyTemplate => {\n    return new StickyTemplate({\n        uid: deriveStickTemplateId(boardId, cellType),\n        aggregateType: AGGREGATE_TYPE,\n        cellType,\n        boardId,\n        template,\n        templateType: 'json',\n    });\n};\n\nexport class StickyTemplate extends Record(defaultStickyTemplateProps) implements StickyTemplateProps, Aggregate {\n    public constructor(data: StickyTemplateProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        if (!data.templateSchema) {\n            data.templateSchema = undefined;\n        }\n\n        super(data);\n    }\n\n    public setTemplate(template: TemplateString): StickyTemplate {\n        return this.set('template', template);\n    }\n\n    public setTemplateType(templateType: TemplateType): StickyTemplate {\n        return this.set('templateType', templateType);\n    }\n\n    public setTemplateSchema(templateSchema: TemplateSchema): StickyTemplate {\n        return this.set('templateSchema', templateSchema);\n    }\n}\n","const OBJ_SCHEMA = `{\n    \"type\": \"object\",\n    \"properties\": {\n      \n    },\n    \"required\": [],\n    \"additionalProperties\": false\n  }`;\n\nexport const DEFAULT_TEMPLATE: {[index: string]: string} = {\n    command: `\\\n{\n  \"newAggregate\": false,\n  \"schema\": ${OBJ_SCHEMA} \n}\n`,\n    event: `\\\n{\n  \"public\": false,\n  \"schema\": ${OBJ_SCHEMA}\n}\n`,\n    aggregate: `\\\n{\n  \"schema\": ${OBJ_SCHEMA}\n}  \n`,\n    document: `\\\n{\n  \"schema\": ${OBJ_SCHEMA}\n}  \n`,\n    policy: `\\\n{\n  \"streams\": []\n}\n`,\n    role: `\\\n{\n  \n}\n`,\n    hotSpot: `\\\n{\n  \n}\n`,\n    externalSystem: `\\\n{\n  \n}\n`,\n    ui: `\\\n{\n  \n}\n`,\n    feature: `\\\n{\n  \n}\n`,\n    boundedContext: `\\\n{\n  \n}\n`,\n    icon: `\\\n{\n  \n}\n`,\n    image: `\\\n{\n  \n}\n`,\n    freeText: `\\\n{\n  \n}\n`,\n};\n","import {List, Map, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {BoardId} from \"../model/Board\";\nimport {DEFAULT_TEMPLATE} from \"../model/DefaultStickyTemplate\";\nimport {NodeType} from \"../model/Graph\";\nimport {createStickyTemplateFromDefault, StickyTemplate, StickyTemplateId} from \"../model/StickyTemplate\";\n\nexport const getStickyTemplateById = (state: Record<ApplicationState>, uid: StickyTemplateId): StickyTemplate | undefined => state.getIn([MODULE, 'StickyTemplate', uid]);\n\nexport const makeStickyTemplateSelector = (uid: StickyTemplateId): (state: Record<ApplicationState>) => StickyTemplate | undefined => (state: Record<ApplicationState>) => getStickyTemplateById(state, uid);\n\nexport const stickyTemplateListSelector = (state: Record<ApplicationState>, props: any): List<StickyTemplate> =>\n    List(state.getIn([MODULE, 'StickyTemplate']).toIndexedSeq().toArray()) || List();\n\nexport const makeStickyTemplateListSelector = (): (state: Record<ApplicationState>, props?: any) => List<StickyTemplate> => {\n    return createSelector(\n        [stickyTemplateListSelector],\n        (StickyTemplateList): List<StickyTemplate> => {\n            return StickyTemplateList;\n        }\n    )\n};\n\nexport const boardStickyTemplateMapSelector = (state: Record<ApplicationState>, props: {boardId: BoardId}): Map<NodeType, StickyTemplate> => {\n    let stickyMap = Map<NodeType, StickyTemplate>();\n\n    (state.getIn([MODULE, 'StickyTemplate']) || List()).toIndexedSeq()\n        .filter((stickyTemplate: StickyTemplate) => {\n            return stickyTemplate.boardId === props.boardId;\n        })\n        .forEach((stickyTemplate: StickyTemplate) => {\n            stickyMap = stickyMap.set(stickyTemplate.cellType, stickyTemplate);\n        });\n\n    return stickyMap;\n};\n    List();\n\nexport const makeBoardStickyTemplateMapSelector = (boardId: BoardId): (state: Record<ApplicationState>) => Map<NodeType, StickyTemplate> => {\n    return (state: Record<ApplicationState>): Map<NodeType, StickyTemplate> => {\n        let stickyTemplateMap = boardStickyTemplateMapSelector(state, {boardId});\n\n        for (const cellType in DEFAULT_TEMPLATE) {\n            if(!stickyTemplateMap.has(cellType as NodeType)) {\n                stickyTemplateMap = stickyTemplateMap.set(\n                    cellType as NodeType,\n                    createStickyTemplateFromDefault(boardId, cellType as NodeType, DEFAULT_TEMPLATE[cellType] as string)\n                )\n            }\n        }\n        return stickyTemplateMap;\n    }\n};\n","import {EmptyLayer, Graph, GraphPoint, Node, PanningListener, ZoomListener} from \"../model/Graph\";\n\ntype SelectionListener = (hasSelection: boolean) => void;\n\nclass GraphRef implements Graph {\n    private graphRef: Graph | undefined;\n    private selectionListeners: SelectionListener[] = [];\n\n    public setGraph(graph: Graph | undefined): void {\n        this.graphRef = graph;\n\n        if(graph) {\n            this.selectionListeners.forEach(listener => graph.onSelectionChanged(listener));\n        }\n\n        this.selectionListeners = [];\n    }\n\n    public getCurrentScale(): number {\n        if(this.graphRef) {\n            return this.graphRef.getCurrentScale();\n        }\n\n        return 1.0;\n    }\n\n    public getCurrentTranslate(): GraphPoint {\n        if(this.graphRef) {\n            return this.graphRef.getCurrentTranslate();\n        }\n\n        return {x: 0, y: 0};\n    }\n\n    public onPanning(listener: PanningListener): void {\n        if(this.graphRef) {\n            this.graphRef.onPanning(listener);\n        }\n    }\n\n    public offPanning(listener: PanningListener): void {\n        if(this.graphRef) {\n            this.graphRef.offPanning(listener);\n        }\n    }\n\n    public translateMousePoint(x: number, y: number): GraphPoint {\n        if(this.graphRef) {\n            return this.graphRef.translateMousePoint(x, y);\n        }\n\n        return {x, y};\n    }\n\n    public onZoom(listener: ZoomListener): void {\n        if(this.graphRef) {\n            this.graphRef.onZoom(listener);\n        }\n    }\n\n    public offZoom(listener: ZoomListener): void {\n        if(this.graphRef) {\n            this.graphRef.offZoom(listener);\n        }\n    }\n\n    public getRoot(): Node {\n        return this.graphRef? this.graphRef.getRoot() : new EmptyLayer();\n    }\n\n    public openLayersDialog(): void {\n        if(this.graphRef) {\n            this.graphRef.openLayersDialog();\n        }\n    }\n\n    public triggerCody(): void {\n        if(this.graphRef) {\n            this.graphRef.triggerCody();\n        }\n    }\n\n    public hasUserLevelVisibilityChanges(): boolean {\n        return this.graphRef? this.graphRef.hasUserLevelVisibilityChanges() : false;\n    }\n\n    public isVisible(node: Node): boolean {\n        return this.graphRef? this.graphRef.isVisible(node) : false;\n    }\n\n    public setUserVisible(node: Node, visible: boolean): void {\n        if(this.graphRef) {\n            this.graphRef.setUserVisible(node, visible);\n        }\n    }\n\n    public applyVisibilityGlobally(): void {\n        if(this.graphRef) {\n            this.graphRef.applyVisibilityGlobally();\n        }\n    }\n\n    public isLocked(node: Node): boolean {\n        return this.graphRef? this.graphRef.isLocked(node) : false;\n    }\n\n    public setLocked(node: Node, locked: boolean): void {\n        if(this.graphRef) {\n            this.graphRef.setLocked(node, locked);\n        }\n    }\n\n    public deleteElement(node: Node): void {\n        if(this.graphRef) {\n            this.graphRef.deleteElement(node);\n        }\n    }\n\n    public addLayer(name: string): void {\n        if(this.graphRef) {\n            this.graphRef.addLayer(name);\n        }\n    }\n\n    public deleteLayer(node: Node): void {\n        if(this.graphRef) {\n            this.graphRef.deleteLayer(node);\n        }\n    }\n\n    public isActiveLayer(node: Node): boolean {\n        return this.graphRef? this.graphRef.isActiveLayer(node) : false;\n    }\n\n    public setAsActiveLayer(node: Node): void {\n        if(this.graphRef) {\n            return this.graphRef.setAsActiveLayer(node);\n        }\n    }\n\n    public setDefaultLayerAsActive(): void {\n        if(this.graphRef) {\n            this.graphRef.setDefaultLayerAsActive();\n        }\n    }\n\n    public highlightLayer(node: Node): void {\n        if(this.graphRef) {\n            this.graphRef.highlightLayer(node);\n        }\n    }\n\n    public changeNodeName(node: Node, newName: string): void {\n        if(this.graphRef) {\n            this.graphRef.changeNodeName(node, newName);\n        }\n    }\n\n    public copySelectionToActiveLayer(): boolean {\n        if(this.graphRef) {\n            return this.graphRef.copySelectionToActiveLayer();\n        }\n\n        return false;\n    }\n\n    public exportXmlSnapshot(): string {\n        if(this.graphRef) {\n            return this.graphRef.exportXmlSnapshot();\n        }\n\n        return '';\n    }\n\n    public onSelectionChanged(listener: (hasSelection: boolean) => void): void {\n        this.selectionListeners.push(listener);\n        if(this.graphRef) {\n            this.graphRef.onSelectionChanged(listener);\n        }\n    }\n\n    public setCockpitBaseUrl(baseUrl: string): void {\n        if(this.graphRef) {\n            this.graphRef.setCockpitBaseUrl(baseUrl);\n        }\n    }\n\n    public focus(): void {\n        if(this.graphRef) {\n            this.graphRef.focus();\n        }\n    }\n}\n\nlet currentGraph: GraphRef|undefined;\n\nexport function useGraph(): [Graph, (graph: Graph | undefined) => void] {\n    if(!currentGraph) {\n        currentGraph = new GraphRef();\n    }\n\n    return [currentGraph, (graph: Graph | undefined) => { currentGraph!.setGraph(graph) }];\n}\n","export enum Command {\n    Sync = 'Sync',\n    SyncDeleted = 'SyncDeleted',\n}\n","export enum Event {\n    IioSaidHello = 'IioSaidHello',\n    UserReplied = 'UserReplied',\n    ElementEdited = 'ElementEdited',\n    ConfirmTest = 'ConfirmTest',\n}\n","import * as _ from 'lodash';\n\nexport type JSONSchema = any;\n\nexport const convertJsonSchemaToEditorValue = (schema: JSONSchema, definitions?: Record<string, JSONSchema>): any => {\n    let editorValue: any = '';\n    schema = _.clone(schema);\n\n    if (!schema.type && schema.$ref && definitions) {\n        schema = {...resolveRef(schema.$ref, schema, definitions)};\n    }\n\n    if (!schema.type && !schema.enum) {\n        // Object is the default type if no type is set\n        return { type: 'object' };\n    }\n\n    if (schema.enum && Array.isArray(schema.enum)) {\n        return schema.enum.join('|');\n    }\n\n    if (Array.isArray(schema.type)) {\n        for (const type of schema.type) {\n            // Pick first non null type from the list\n            if (type.toLowerCase() !== 'null') {\n                schema.type = type;\n                break;\n            }\n        }\n    }\n\n    switch (schema.type.toLowerCase()) {\n        case 'string':\n            return 'string';\n        case 'number':\n            return 0;\n        case 'integer':\n            return 0;\n        case 'boolean':\n            return false;\n        case 'array':\n            return [\n                convertJsonSchemaToEditorValue(schema.items || {}, definitions),\n            ];\n        case 'object':\n            editorValue = {};\n            if(!schema.properties) {\n                schema.properties = {};\n            }\n\n            Object.keys(schema.properties).forEach(prop => {\n                editorValue[prop] = convertJsonSchemaToEditorValue(schema.properties[prop], definitions);\n            });\n\n            return editorValue;\n        default:\n            return 'unknown';\n    }\n};\n\nconst resolveRef = (ref: string, schema: JSONSchema, definitions: Record<string, JSONSchema>): JSONSchema => {\n    ref = ref.replace('#/definitions/', '');\n\n    // eslint-disable-next-line no-prototype-builtins\n    if(definitions.hasOwnProperty(ref)) {\n        return definitions[ref];\n    }\n\n    // We use string as default schema for unknown refs\n    return { type: 'string'};\n};\n","import * as React from \"react\";\n\nexport const monaco = () => (window as any).monaco;\n\nexport interface ModelData {\n    fileId: string;\n    language: 'json'|'xml'|'yaml';\n    value: string;\n    schema?: string|undefined;\n    onChange?: (e: { isFlush: boolean, isRedoing: boolean, isUndoing: boolean }) => void;\n}\n\ninterface OwnState {\n    internalData: Record<string, { onChangeDisposable: any }>;\n}\n\ninterface OwnProps {\n    options?: object;\n    style?: React.CSSProperties;\n}\n\ntype CodeEditorProps = OwnProps;\n\nclass CodeEditor extends React.Component<CodeEditorProps, OwnState> {\n\n    private editor: any;\n\n    constructor(props: CodeEditorProps) {\n        super(props);\n\n        this.disposeOnChangeHandler = this.disposeOnChangeHandler.bind(this);\n\n        this.state = {\n            internalData: {}\n        };\n    }\n\n    public componentDidMount() {\n        this.editor = monaco().editor.create(document.getElementById('container'), this.props.options || {});\n    }\n\n    public componentWillUnmount() {\n        Object.keys(this.state.internalData).forEach(this.disposeOnChangeHandler);\n        this.editor = undefined;\n    }\n\n    public render() {\n        return (\n            <div\n                id={'container'}\n                style={this.props.style}\n            />\n        );\n    }\n\n    public retrievePayload(): string {\n        return this.editor.getValue();\n    }\n\n    public initializeModel(modelData: ModelData): void {\n        const modelUri = monaco().Uri.parse(modelData.fileId);\n        let model = monaco().editor.getModel(modelUri);\n\n        this.disposeOnChangeHandler(modelData.fileId);\n\n        if (null === model) {\n            model = monaco().editor.createModel(modelData.value, modelData.language, modelUri);\n            model.updateOptions({ tabSize: 2 });\n        } else {\n            monaco().editor.setModelLanguage(model, modelData.language);\n\n            if (modelData.value !== model.getValue()) {\n                model.setValue(modelData.value);\n            }\n        }\n\n        if (modelData.onChange) {\n            this.initializeOnChangeHandler(modelData.fileId, model, modelData.onChange);\n        }\n\n        if (modelData.language === 'json' && modelData.schema) {\n            this.initializeJsonDiagnostics(modelUri, modelData.schema);\n        }\n\n        this.editor.setModel(model);\n    }\n\n    public addCommand(keybinding: number, handler: () => void): void {\n        this.editor.addCommand(keybinding, handler);\n    }\n\n    public addKeyDownHandler(handler: (e: KeyboardEvent) => void): void {\n        this.editor.onKeyDown(handler);\n    }\n\n    public focus(): void {\n        this.editor.focus();\n    }\n\n    private disposeOnChangeHandler(fileId: string) {\n        if (this.state.internalData[fileId] && this.state.internalData[fileId].onChangeDisposable) {\n            this.state.internalData[fileId].onChangeDisposable.dispose();\n            this.updateInternalData(fileId, { onChangeDisposable: undefined });\n        }\n    }\n\n    private initializeOnChangeHandler(fileId: string, model: any, onChange: (e: { isFlush: boolean, isRedoing: boolean, isUndoing: boolean }) => void): void {\n        // Make sure that any existing handler is disposed upon setting a new one\n        this.disposeOnChangeHandler(fileId);\n\n        const newDisposable = model.onDidChangeContent((e: { isFlush: boolean, isRedoing: boolean, isUndoing: boolean }) => {\n            onChange(e);\n        });\n\n        this.updateInternalData(fileId, { onChangeDisposable: newDisposable });\n    }\n\n    private initializeJsonDiagnostics(modelUri: any, schema: string): void {\n        monaco().languages.json.jsonDefaults.setDiagnosticsOptions({\n            validate: true,\n            enableSchemaRequest: false,\n            allowComments: true,\n            schemas: [{\n                uri: 'http://myserver/foo-schema.json', // Not sure why this is needed but doesn't work without\n                fileMatch: [modelUri.toString()],\n                schema: JSON.parse(schema)\n            }],\n        });\n    }\n\n    private updateInternalData(fileId: string, data: { onChangeDisposable: any }): void {\n        this.setState({\n            internalData: {\n                ...this.state.internalData,\n                [fileId]: data\n            }\n        });\n    }\n}\n\nexport default CodeEditor;\n","import React, {useEffect, useImperativeHandle, useRef} from \"react\";\nimport CodeEditor from \"../../../../core/components/CodeEditor/CodeEditor\";\nimport {StickyTemplate} from \"../../../model/StickyTemplate\";\nimport jsonSchemaMetaSchema from \"./jsonSchemaMetaSchema.json\";\n\nexport interface BoardStickySchemaEditorRef {\n    retrievePayload: () => string;\n}\n\ninterface OwnProps {\n    boardStickyTemplate: StickyTemplate;\n}\n\ntype BoardStickySchemaEditorProps = OwnProps;\n\nconst BoardStickySchemaEditor = (props: BoardStickySchemaEditorProps, ref: React.Ref<BoardStickySchemaEditorRef>) => {\n    const codeEditorRef = useRef<CodeEditor|null>(null);\n\n    useEffect(() => {\n        if (!codeEditorRef.current) {\n            return;\n        }\n\n        codeEditorRef.current.initializeModel({\n            fileId: `board_${props.boardStickyTemplate.boardId}_sticky_${props.boardStickyTemplate.cellType}_schema.json`,\n            language: 'json',\n            value: props.boardStickyTemplate.templateSchema || '{\\n\\t\"type\": \"object\",\\n\\t\"properties\": {}\\n}',\n            schema: JSON.stringify(jsonSchemaMetaSchema)\n        });\n    }, [props.boardStickyTemplate.boardId, props.boardStickyTemplate.cellType, props.boardStickyTemplate.templateSchema]);\n\n    useImperativeHandle<BoardStickySchemaEditorRef, BoardStickySchemaEditorRef>(ref, () => ({\n        retrievePayload: (): string => codeEditorRef.current!.retrievePayload(),\n    }));\n\n    return (\n        <CodeEditor\n            ref={codeEditorRef}\n            style={{ height: '280px', width: '100%', marginTop: '10px' }}\n            options={{\n                fontSize: 12,\n                folding: false,\n                glyphMargin: false,\n                lineNumbers: 'off',\n                lineDecorationsWidth: 3,\n                minimap: {\n                    enabled: false\n                },\n                formatOnPaste: true,\n                scrollBeyondLastLine: false,\n            }}\n        />\n    );\n}\n\nexport default React.forwardRef(BoardStickySchemaEditor);\n","import * as React from 'react';\nimport {useEffect, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Container, Select} from \"semantic-ui-react\";\nimport {convertJsonSchemaToEditorValue} from \"../../../../core/convertJsonSchemaToEditorValue\";\nimport * as Action from \"../../../actions\";\nimport {BoardId} from \"../../../model/Board\";\nimport {StickyTemplate, TemplateType} from \"../../../model/StickyTemplate\";\nimport BoardStickySchemaEditor from \"./BoardStickySchemaEditor\";\nimport {BoardStickyTemplateEditorRef} from \"./BoardStickyTemplateEditor\";\n\ninterface OwnProps {\n    boardId: BoardId;\n    boardStickyTemplate: StickyTemplate;\n    onClose: () => void;\n    onTemplateGenerated: (template: string) => void;\n}\n\ntype BoardStickyAdvancedConfigProps = OwnProps & WithNamespaces;\n\nconst BoardStickyAdvancedConfig = (props: BoardStickyAdvancedConfigProps) => {\n\n    const dispatch = useDispatch();\n    const [templateType, setTemplateType] = useState<TemplateType>(props.boardStickyTemplate.templateType);\n    const boardStickySchemaEditorRef = useRef<BoardStickyTemplateEditorRef|null>(null);\n\n    useEffect(\n        () => {\n            setTemplateType(props.boardStickyTemplate.templateType);\n        },\n        [props.boardStickyTemplate]\n    );\n\n    const handleUpdateStickyAdvancedConfig = async () => {\n        dispatch(Action.Command.updateStickyAdvancedConfig(\n            props.boardId,\n            props.boardStickyTemplate.cellType,\n            templateType,\n            templateType === 'json' && boardStickySchemaEditorRef.current\n                ? boardStickySchemaEditorRef.current!.retrievePayload()\n                : undefined\n        ));\n    };\n\n    const handleGenerateDefaultValue = (e: React.MouseEvent<HTMLAnchorElement>) => {\n        e.preventDefault();\n        try {\n            const rawSchema = templateType === 'json' && boardStickySchemaEditorRef.current\n                ? boardStickySchemaEditorRef.current!.retrievePayload()\n                : undefined;\n\n            if(!rawSchema) {\n                return;\n            }\n\n            const parsedSchema = JSON.parse(rawSchema);\n            const newTemplate = JSON.stringify(convertJsonSchemaToEditorValue(parsedSchema), null, 2);\n\n            props.onTemplateGenerated(newTemplate);\n\n            window.setTimeout(() => {\n                dispatch(Action.Command.updateStickyAdvancedConfig(\n                    props.boardId,\n                    props.boardStickyTemplate.cellType,\n                    templateType,\n                    rawSchema,\n                    true\n                ));\n            }, 1000)\n        } catch (e) {\n            // tslint:disable-next-line\n            console.error(e);\n            return;\n        }\n    }\n\n    return (<>\n        <Container style={{ height: '333px' }}>\n            <Select\n                options={[\n                    { key: 'json', value: 'json', text: 'JSON' },\n                    { key: 'xml', value: 'xml', text: 'XML' },\n                    { key: 'yaml', value: 'yaml', text: 'YAML' }\n                ]}\n                value={templateType}\n                onChange={(event, data) => setTemplateType(data.value as TemplateType)}\n            />\n            {templateType === 'json' && (\n                <BoardStickySchemaEditor\n                    ref={boardStickySchemaEditorRef}\n                    boardStickyTemplate={props.boardStickyTemplate}\n                />\n            )}\n        </Container>\n        {props.boardStickyTemplate.templateSchema && (\n            <a href={'#'} onClick={handleGenerateDefaultValue}>\n                {props.t('app.form.generateTemplate')}\n            </a>\n\n        )}\n        <Button primary={true} onClick={handleUpdateStickyAdvancedConfig} content={props.t('app.form.save')} floated=\"right\" />\n        <Button onClick={props.onClose} content={props.t('app.form.back')} floated=\"right\" />\n    </>);\n};\n\nexport default withNamespaces()(BoardStickyAdvancedConfig)\n","export const Palette: {stickyColors: { [type: string]: string }} = {\n    stickyColors: {\n        event: '#FF9F4B',\n        command: '#26C0E7',\n        role: '#f7f727',\n        projection: '#3acbc0',\n        aggregate: '#F5E339',\n        document: '#73dd8e',\n        policy: '#EABFF1',\n        hotSpot: '#f31d30',\n        externalSystem: '#ec98ac',\n        ui: '#000000',\n        feature: '#cfcfcf',\n        boundedContext: '#a2a2a2',\n        edge: '#414141',\n        textCard: '#ffdfd3'\n    }\n};\n","import * as React from 'react';\nimport {Icon, Label} from \"semantic-ui-react\";\nimport {IconSizeProp} from \"semantic-ui-react/dist/commonjs/elements/Icon/Icon\";\nimport {Palette} from \"../../theme/palette\";\nimport {HistoryCellType} from \"../model/HistoryEntry\";\n\ninterface OwnProps {\n    cellType: HistoryCellType;\n    size?: IconSizeProp | 'normal';\n    title?: string;\n    className?: string;\n}\n\ntype CellIconProps = OwnProps;\n\nconst CellIcon = (props: CellIconProps) => {\n    let size: IconSizeProp | undefined;\n\n    if(props.size !== 'normal') {\n        size = props.size || 'large';\n    }\n\n    switch (props.cellType) {\n        case HistoryCellType.event:\n        case HistoryCellType.command:\n        case HistoryCellType.role:\n        case HistoryCellType.projection:\n        case HistoryCellType.aggregate:\n        case HistoryCellType.document:\n        case HistoryCellType.policy:\n        case HistoryCellType.hotSpot:\n        case HistoryCellType.externalSystem:\n        case HistoryCellType.ui:\n            return <Icon name='sticky note' size={size} style={{color: Palette.stickyColors[props.cellType]}} title={props.title} className={props.className} />;\n        case HistoryCellType.icon:\n            return <Icon name='heart' size={size} title={props.title} className={props.className} />;\n        case HistoryCellType.image:\n            return <Icon name='image' size={size} title={props.title} className={props.className} />;\n        case HistoryCellType.feature:\n            return <Icon name=\"square\" size={size} style={{Color: Palette.stickyColors.feature}} title={props.title} className={props.className} >\n                <span style={{\n                    position: \"absolute\",\n                    marginTop: size? \"0.17em\" : \"0.03em\",\n                    marginLeft: \"-0.84em\",\n                    fontFamily: 'sans-serif',\n                    fontSize: '0.8em',\n                    color: 'white',\n                }}>F</span>\n            </Icon>;\n        case HistoryCellType.boundedContext:\n            return <Icon name=\"square\" size={size} style={{Color: Palette.stickyColors.feature}} title={props.title} className={props.className}>\n                <span style={{\n                    position: \"absolute\",\n                    marginTop: size? \"0.17em\" : \"0.03em\",\n                    marginLeft: \"-0.89em\",\n                    fontFamily: 'sans-serif',\n                    fontSize: '0.8em',\n                    color: 'white',\n                }}>C</span>\n            </Icon>;\n        case HistoryCellType.multiple:\n            return <Icon name=\"sitemap\" size={size} style={{fontSize: '1.25em'}} title={props.title} className={props.className} />;\n        case HistoryCellType.edge:\n            return <Icon size={size} title={props.title} className={props.className}><img\n                style={{width: '1em', height: '1em'}}\n                src={`data:image/svg+xml;utf8,<svg aria-hidden=\"true\" focusable=\"false\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 640 512\"><path fill=\"${encodeURIComponent(Palette.stickyColors.edge)}\" d=\"M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z\"></path></svg>`}/>\n            </Icon>;\n        case HistoryCellType.textCard:\n            return <Icon name=\"square\" size={size} style={{color: Palette.stickyColors.textCard}} title={props.title} className={props.className}>\n                <span style={{\n                    position: \"absolute\",\n                    marginTop: \"0.17em\",\n                    marginLeft: \"-0.84em\",\n                    fontFamily: 'sans-serif',\n                    color: '#494949',\n                    fontSize: '0.8em'\n                }}>\n                    T\n                </span>\n            </Icon>;\n        case HistoryCellType.freeText:\n            return <Icon name=\"align center\" size={size} title={props.title} className={props.className} />;\n        default:\n            return <Icon name='square' size={size} title={props.title} className={props.className} />;\n    }\n};\n\nexport default CellIcon;\n","import {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {Map} from \"immutable\";\nimport {NodeType} from \"../../../model/Graph\";\nimport {StickyTemplate} from \"../../../model/StickyTemplate\";\nimport {List} from \"semantic-ui-react\";\nimport CellIcon from \"../../CellIcon\";\nimport {HistoryCellType} from \"../../../model/HistoryEntry\";\nimport * as React from \"react\";\n\ninterface OwnProps {\n    boardStickyTemplates: Map<NodeType, StickyTemplate>;\n    activeCellType: NodeType|undefined;\n    onSetActiveCellType: (nodeType: NodeType) => void;\n}\n\ntype BoardStickySelectionProps = OwnProps & WithNamespaces;\n\nconst isFrame = (cellType: NodeType): boolean => {\n    return cellType === NodeType.boundedContext || cellType === NodeType.feature;\n}\n\nconst isSpecialShape = (cellType: NodeType): boolean => {\n    return cellType === NodeType.freeText || cellType === NodeType.image || cellType === NodeType.icon;\n}\n\nconst isCard = (cellType: NodeType): boolean => {\n    return !isFrame(cellType) && !isSpecialShape(cellType);\n}\n\nconst BoardStickySelection = (props: BoardStickySelectionProps) => {\n    let isFirst = true;\n\n    const stickies = props.boardStickyTemplates\n        .sort((a, b) => {\n            if(isCard(a.cellType) === isCard(b.cellType)) {\n                if(a.cellType < b.cellType) {\n                    return -1;\n                }\n\n                if(a.cellType > b.cellType) {\n                    return 1;\n                }\n\n                return 0;\n            }\n\n            if(isCard(a.cellType)) {\n                return -1;\n            }\n\n            if(isCard(b.cellType)) {\n                return 1;\n            }\n\n            if(isFrame(a.cellType)) {\n                return -1;\n            }\n\n            if(isFrame(b.cellType)) {\n                return 1;\n            }\n\n            if(a.cellType === NodeType.freeText) {\n                return -1;\n            }\n\n            if(b.cellType === NodeType.freeText) {\n                return 1;\n            }\n\n            return 0;\n        })\n        .map((stickyTemplate) => {\n            const active = props.activeCellType ? props.activeCellType === stickyTemplate.cellType : isFirst;\n\n            if(!props.activeCellType && isFirst) {\n                props.onSetActiveCellType(stickyTemplate.cellType);\n            }\n\n            isFirst = false;\n            return (\n                <List.Item\n                    key={stickyTemplate.cellType}\n                    as='a' active={active}\n                    onClick={() => {props.onSetActiveCellType(stickyTemplate.cellType)}}\n                >\n                    <CellIcon cellType={stickyTemplate.cellType as HistoryCellType} size=\"large\" />\n                    <List.Content>{props.t('app.stickyTypes.' + stickyTemplate.cellType)}</List.Content>\n                </List.Item>\n            );\n        })\n        .toIndexedSeq()\n        .toArray();\n\n    return (\n        <List link={true}>\n            {stickies}\n        </List>\n    );\n};\n\nexport default withNamespaces()(BoardStickySelection);\n","import * as React from \"react\";\nimport {StickyTemplate} from \"../../../model/StickyTemplate\";\nimport CodeEditor, {monaco} from \"../../../../core/components/CodeEditor/CodeEditor\";\nimport {Ref, useEffect, useImperativeHandle, useRef} from \"react\";\n\nexport interface BoardStickyTemplateEditorRef {\n    retrievePayload: () => string;\n    updateModelValue: (value: string) => void;\n}\n\ninterface OwnProps {\n    boardStickyTemplate: StickyTemplate;\n    onSave: () => void;\n}\n\ntype BoardStickyTemplateEditorProps = OwnProps;\n\nconst BoardStickyTemplateEditor = (props: BoardStickyTemplateEditorProps, ref: Ref<BoardStickyTemplateEditorRef>) => {\n    const codeEditorRef = useRef<CodeEditor|null>(null);\n\n    const initializeModelWithValue = (value: string) => {\n        codeEditorRef.current!.initializeModel({\n            fileId: `board_${props.boardStickyTemplate.boardId}_sticky_${props.boardStickyTemplate.cellType}.json`,\n            language: props.boardStickyTemplate.templateType,\n            value,\n            schema: props.boardStickyTemplate.templateSchema || undefined\n        });\n    }\n\n    useEffect(\n        () => {\n            initializeModelWithValue(props.boardStickyTemplate.template);\n\n            codeEditorRef.current!.addCommand(\n                /* tslint:disable-next-line:no-bitwise */\n                monaco().KeyMod.CtrlCmd | monaco().KeyCode.KEY_S,\n                props.onSave\n            );\n        },\n        [\n            props.boardStickyTemplate.boardId,\n            props.boardStickyTemplate.cellType,\n            props.boardStickyTemplate.templateType,\n            props.boardStickyTemplate.template,\n            props.boardStickyTemplate.templateSchema\n        ]\n    );\n\n    useImperativeHandle<BoardStickyTemplateEditorRef, BoardStickyTemplateEditorRef>(ref, () => ({\n        retrievePayload: (): string => codeEditorRef.current!.retrievePayload(),\n        updateModelValue: (value: string): void => initializeModelWithValue(value)\n    }));\n\n    return (\n        <CodeEditor\n            ref={codeEditorRef}\n            style={{ height: '300px', width: '100%' }}\n            options={{\n                fontSize: 12,\n                folding: false,\n                glyphMargin: false,\n                lineNumbers: 'off',\n                lineDecorationsWidth: 3,\n                minimap: {\n                    enabled: false\n                },\n                formatOnPaste: true,\n                scrollBeyondLastLine: false,\n            }}\n        />\n    );\n};\n\nexport default React.forwardRef(BoardStickyTemplateEditor);\n","import {List} from \"immutable\";\nimport {ChangeEvent, useEffect, useRef, useState} from \"react\";\nimport * as React from 'react';\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Dimmer, Dropdown, Grid, Loader} from \"semantic-ui-react\";\nimport HeaderSubHeader from \"semantic-ui-react/dist/commonjs/elements/Header/HeaderSubheader\";\nimport {readFile} from \"../../../core/readFile\";\nimport * as NOTIFY from \"../../../NotificationSystem/actions\";\nimport * as Action from \"../../actions\";\nimport {BoardId} from \"../../model/Board\";\nimport {NodeType} from \"../../model/Graph\";\nimport {createStickyTemplateFromDefault, TemplateSchema} from \"../../model/StickyTemplate\";\nimport {makeBoardByIdSelector, makeGetBoard} from \"../../selectors/board\";\nimport {makeBoardStickyTemplateMapSelector} from \"../../selectors/StickyTemplate\";\nimport BoardStickyAdvancedConfig from \"./BoardStickyConfiguration/BoardStickyAdvancedConfig\";\nimport BoardStickySelection from \"./BoardStickyConfiguration/BoardStickySelection\";\nimport BoardStickyTemplateEditor, {BoardStickyTemplateEditorRef} from \"./BoardStickyConfiguration/BoardStickyTemplateEditor\";\n\ninterface OwnProps {\n    boardId: BoardId;\n}\n\ntype BoardStickyTemplatesProps = OwnProps & WithNamespaces;\n\nconst BoardStickyTemplates = (props: BoardStickyTemplatesProps) => {\n    const dispatch = useDispatch();\n    const [activeCellType, setActiveCellType] = useState<NodeType|undefined>();\n    const [advancedConfigActive, setAdvancedConfigActive] = useState<boolean>(false);\n    const boardStickyTemplates = useSelector(makeBoardStickyTemplateMapSelector(props.boardId));\n    const board = useSelector(makeBoardByIdSelector(props.boardId));\n    const stickyTemplateEditorRef = useRef<BoardStickyTemplateEditorRef|null>(null);\n    const uploadEl = useRef<HTMLInputElement>(null);\n    const [isImporting, setIsImporting] = useState(false);\n\n    useEffect(() => {\n        dispatch(Action.Query.fetchBoardStickyTemplates(props.boardId))\n    }, []);\n\n    const handleUpdateTemplate = () => {\n        if (!activeCellType) {\n            return;\n        }\n\n        if (stickyTemplateEditorRef && stickyTemplateEditorRef.current) {\n            const editorValue = stickyTemplateEditorRef.current.retrievePayload();\n\n            if (boardStickyTemplates.get(activeCellType)!.templateType === 'json') {\n                try {\n                    JSON.parse(editorValue);\n                } catch {\n                    dispatch(NOTIFY.Command.error(\n                        props.t('insp.sidebar.element_details.json_invalid_title'),\n                        props.t('insp.sidebar.element_details.json_invalid_text')\n                    ));\n                    return;\n                }\n            }\n\n            dispatch(Action.Command.setStickyTemplate(props.boardId, activeCellType, editorValue));\n        }\n    };\n\n    const handleSwitchToAdvancedConfig = (e: React.MouseEvent<HTMLAnchorElement>) => {\n        e.preventDefault();\n        setAdvancedConfigActive(true);\n    }\n\n    const handleTemplateGenerated = (newTemplate: string) => {\n        if (!activeCellType) {\n            return;\n        }\n\n        setAdvancedConfigActive(false);\n        dispatch(Action.Command.setStickyTemplate(props.boardId, activeCellType, newTemplate));\n\n        window.setTimeout(() => {\n            if(stickyTemplateEditorRef.current) {\n                stickyTemplateEditorRef.current.updateModelValue(newTemplate);\n            }\n        }, 10)\n    }\n\n    const downloadTemplates = () => {\n        const templatesStr = JSON.stringify(boardStickyTemplates.map(tpl => ({\n            templateType: tpl.templateType,\n            template: tpl.template,\n            templateSchema: tpl.templateSchema\n        })), null, 2);\n\n        const jsonBlob = new Blob([templatesStr], {type: \"application/json\"});\n        const url = URL.createObjectURL(jsonBlob);\n\n        const a = document.createElement('a');\n        a.download = board.name + ' ' + 'Card Templates.json';\n        a.href = url;\n        document.body.append(a);\n        a.click();\n\n        window.setTimeout(() => {\n            a.remove();\n            URL.revokeObjectURL(url);\n        }, 150);\n    }\n\n    const uploadTemplates = () => {\n        if(uploadEl.current) {\n            uploadEl.current.click();\n        }\n    }\n\n    const handleFileSelected = (e: ChangeEvent<HTMLInputElement>) => {\n        const file = e.target.files![0] || null;\n\n        readFile(file).then(templatesStr => {\n            let templates: {[cellType: string]: {templateType: string, template: string, templateSchema?: string}};\n            try {\n                templates = JSON.parse(templatesStr);\n            } catch {\n                dispatch(NOTIFY.Command.error(\n                    props.t('insp.sidebar.element_details.json_invalid_title'),\n                    props.t('insp.sidebar.element_details.json_invalid_text')\n                ));\n                return;\n            }\n\n            if(typeof templates !== 'object') {\n                dispatch(NOTIFY.Command.error(\n                    'Invalid Card Templates File',\n                    props.t('Selected file does not contain a JSON object of card templates')\n                ));\n                return;\n            }\n\n            const cellTypes = Object.keys(boardStickyTemplates.toJSON());\n            const tplCellTypes = Object.keys(templates);\n            const importableStickyTemplates = [];\n\n            for (const tplCellType of tplCellTypes) {\n                if(!cellTypes.includes(tplCellType)) {\n                    dispatch(NOTIFY.Command.error(\n                        'Invalid Card Templates File',\n                        props.t('File contains unknown cell type: ' + tplCellType)\n                    ));\n                    return;\n                }\n\n                let stickyTemplate = createStickyTemplateFromDefault(props.boardId, tplCellType as NodeType, templates[tplCellType].template || '');\n                stickyTemplate = stickyTemplate.setTemplateType(templates[tplCellType].templateType || 'json' as any);\n                if(templates[tplCellType].templateSchema) {\n                    stickyTemplate = stickyTemplate.setTemplateSchema(templates[tplCellType].templateSchema as TemplateSchema);\n                }\n\n                importableStickyTemplates.push(stickyTemplate);\n            }\n\n            setIsImporting(true);\n            dispatch(Action.Command.importStickyTemplates(props.boardId, List(importableStickyTemplates), () => {\n                setIsImporting(false);\n            }));\n        })\n\n\n    }\n\n    return (\n        <div className=\"ui segments\">\n            <div className=\"ui segment\">\n                <Dropdown item={true} icon=\"ellipsis vertical\" style={{float: \"right\", marginTop: '30px', fontSize: '1.2rem'}}>\n                    <Dropdown.Menu direction=\"left\" >\n                        <Dropdown.Item icon=\"download\" text=\"Import Templates\" onClick={uploadTemplates} />\n                        <Dropdown.Item icon=\"upload\" text=\"Export Templates\" onClick={downloadTemplates} />\n                    </Dropdown.Menu>\n                </Dropdown>\n                <h2 className=\"ui header\">\n                    {props.t('insp.board.sticky_templates.headline')}\n                    <HeaderSubHeader>{props.t('insp.board.sticky_templates.description')}</HeaderSubHeader>\n                </h2>\n                <p>&nbsp;</p>\n                <Grid columns={2}>\n                    <Grid.Column mobile=\"6\" tablet=\"6\" computer=\"5\" largeScreen=\"5\" widescreen=\"5\">\n                        <BoardStickySelection\n                            boardStickyTemplates={boardStickyTemplates}\n                            activeCellType={activeCellType}\n                            onSetActiveCellType={setActiveCellType}\n                        />\n                    </Grid.Column>\n                    {activeCellType && (\n                        <Grid.Column mobile=\"10\" tablet=\"10\" computer=\"11\" largeScreen=\"11\" widescreen=\"11\" style={{borderLeft: \"1px solid #d8dee2\"}}>\n                            {!advancedConfigActive && (<>\n                                <BoardStickyTemplateEditor\n                                    ref={stickyTemplateEditorRef}\n                                    boardStickyTemplate={boardStickyTemplates.get(activeCellType)!}\n                                    onSave={handleUpdateTemplate}\n                                />\n                                <p>&nbsp;</p>\n                                <a href={'#'} onClick={handleSwitchToAdvancedConfig}>\n                                    {props.t('insp.board.sticky_templates.advanced_config')}\n                                </a>\n                                <Button\n                                    primary={true}\n                                    onClick={handleUpdateTemplate}\n                                    content={props.t('app.form.save')}\n                                    floated=\"right\"\n                                />\n                            </>)}\n                            {advancedConfigActive && (\n                                <BoardStickyAdvancedConfig\n                                    boardId={props.boardId}\n                                    boardStickyTemplate={boardStickyTemplates.get(activeCellType)!}\n                                    onClose={() => setAdvancedConfigActive(false)}\n                                    onTemplateGenerated={handleTemplateGenerated}\n                                />\n                            )}\n                            <Dimmer inverted={true} active={isImporting}>\n                                <Loader inverted={true}>Importing</Loader>\n                            </Dimmer>\n                        </Grid.Column>\n                    )}\n                </Grid>\n                <input type=\"file\" ref={uploadEl} style={{display: 'none'}} onChange={handleFileSelected} />\n            </div>\n        </div>\n    );\n};\n\nexport default withNamespaces()(BoardStickyTemplates);\n","import {Map} from \"immutable\";\nimport React from 'react'\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Link} from \"react-router-dom\";\nimport {InjectedFormProps} from \"redux-form\";\nimport { Field, reduxForm } from 'redux-form/immutable';\nimport {Button} from \"semantic-ui-react\";\nimport {inspectio} from \"../../routes\";\nimport {EDIT_BOARD_FORM} from \"./constants\";\n\ninterface FormData  {\n    uid: string,\n    name: string;\n}\n\nexport interface ImFormData extends Map<string, string> {\n    toJS(): FormData\n}\n\nexport interface OwnProps {\n\n}\n\nexport interface PropsFromDispatch {\n\n}\n\n\nexport type EditBoardFormProps = OwnProps & PropsFromDispatch & WithNamespaces & InjectedFormProps<ImFormData, OwnProps & WithNamespaces>;\n\nconst EditBoardForm = (props: EditBoardFormProps) => <form className=\"ui form\" onSubmit={props.handleSubmit}>\n    <div className=\"fields\" style={{margin:\"0\"}}>\n        <div className=\"inline field\">\n        <Field name=\"name\" component=\"input\" type=\"text\" placeholder={props.t('insp.board.form.board_name')} />\n        </div>\n        <Button primary={true} type=\"submit\" className=\"bottom aligned\">{props.t('app.form.rename')}</Button>\n        <Link to={inspectio} className=\"ui basic button noborder\">{props.t('app.form.cancel')}</Link>\n    </div>\n</form>;\n\nexport default withNamespaces()(reduxForm<ImFormData, OwnProps & WithNamespaces>({form: EDIT_BOARD_FORM})(EditBoardForm));\n\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Grid, GridColumn, Message, Select} from \"semantic-ui-react\";\nimport {OrganizationId} from \"../../../Organization/model/Organization\";\nimport {UserOrganizationInfo} from \"../../../Organization/model/UserOrganizationInfo\";\nimport * as Action from \"../../actions\";\nimport {BoardId} from \"../../model/Board\";\n\ninterface OwnProps {\n    boardId: BoardId;\n    organizations: List<UserOrganizationInfo>\n}\n\ntype MoveBoardMenuProps = OwnProps & WithNamespaces;\n\nconst MoveBoardMenu = (props: MoveBoardMenuProps) => {\n    const dispatch = useDispatch();\n    const [selectedOrganization, setSelectedOrganization] = useState<OrganizationId|undefined>();\n\n    const options = props.organizations.map(orga => ({\n        key: orga.uid,\n        value: orga.uid,\n        text: orga.organizationName\n    }));\n\n    const handleMoveBoard = () => {\n        if(selectedOrganization) {\n            dispatch(Action.Command.moveUserBoardToOrganization(selectedOrganization, props.boardId))\n            setSelectedOrganization(undefined);\n        }\n    }\n\n    return <>\n        <Select options={options.toJS()}\n                placeholder={props.t('insp.board.move_to_organization_select') as string}\n                onChange={(e, data) => setSelectedOrganization(data.value as OrganizationId)}\n        />\n        <Button primary={true} floated=\"right\" onClick={() => handleMoveBoard()}>{props.t('insp.board.move_to_organization_submit')}</Button>\n        <Message size=\"small\" info={true}>{props.t('insp.board.move_to_organization_desc')}</Message>\n    </>;\n};\n\nexport default withNamespaces()(MoveBoardMenu);\n","import {withNamespaces} from \"react-i18next\";\nimport { connect } from 'react-redux';\nimport {withRouter} from \"react-router\";\nimport { compose, lifecycle } from 'recompose';\nimport {bindActionCreators, Dispatch} from \"redux\";\nimport {Command} from \"../actions\";\nimport {EditBoard, EditBoardProps} from \"../components/EditBoard\";\nimport {BoardSelector} from \"../selectors\";\n\nconst mapStateToProps = BoardSelector.makeMapStateToPropsEditBoard();\n\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators(\n    {\n        renameBoard: Command.renameBoard,\n        confirmDeleteBoard: Command.confirmDeleteBoard,\n        deleteBoard: Command.deleteBoard,\n        abortDeletion: Command.abortBoardDeletion,\n        shareBoard: Command.shareBoard,\n    },\n    dispatch\n);\n\nexport default withNamespaces()(withRouter<EditBoardProps>(compose<EditBoardProps, any>(\n    connect(mapStateToProps, mapDispatchToProps),\n    lifecycle({\n\n    })\n)(EditBoard)));","import {fromJS, List} from \"immutable\";\nimport {useEffect} from \"react\";\nimport * as React from 'react';\nimport {WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps} from \"react-router\";\nimport {Container, Dimmer, Grid, Header, Icon, Loader, Message} from 'semantic-ui-react';\nimport HeaderSubHeader from \"semantic-ui-react/dist/commonjs/elements/Header/HeaderSubheader\";\nimport {makeOrganizationListSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {\n    makeActiveUserOrganizationInfoSelector,\n    makeUserOrganizationInfoListSelector\n} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport * as Routes from \"../../routes\";\nimport {isStandalone} from \"../../standalone/util\";\nimport {Command} from \"../actions\";\nimport {\n    fetchBoardPermissionsForTeams,\n    fetchBoardPermissionsForUsers,\n    fetchOpenBoardInvitations,\n    fetchUserBoard\n} from \"../actions/queries\";\nimport {BoardModel} from \"../model\";\nimport {default as ConfirmBoardDeletionForm, ImFormData as DeletionImFormData} from './ConfirmBoardDeletionForm';\nimport BoardClientConfiguration from \"./EditBoard/BoardClientConfiguration\";\nimport BoardPermissionsMenu from \"./EditBoard/BoardPermissionsMenu\";\nimport BoardStickyTemplates from \"./EditBoard/BoardStickyTemplates\";\nimport MoveBoardMenu from \"./EditBoard/MoveBoardMenu\";\nimport {default as EditBoardForm, ImFormData} from './EditBoardForm';\nimport {BoardRouteMatchParams} from \"./types\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\n\ninterface PropsFromState {\n    board?: BoardModel.Board;\n}\n\ninterface PropsFromDispatch {\n    renameBoard: typeof Command.renameBoard;\n    confirmDeleteBoard: typeof Command.confirmDeleteBoard;\n    deleteBoard: typeof Command.deleteBoard;\n    abortDeletion: typeof Command.abortBoardDeletion;\n    shareBoard: typeof Command.shareBoard;\n}\n\ninterface OwnProps {\n\n}\n\nexport type EditBoardProps = PropsFromState & PropsFromDispatch & OwnProps & WithNamespaces & RouteComponentProps<BoardRouteMatchParams>;\n\nconst submitForm = (data: ImFormData, props: EditBoardProps): void => {\n    const board = props.board!.merge(data.toJS());\n    props.renameBoard(board);\n    props.history.replace(Routes.inspectio);\n}\n\nconst handleConfirmDeletion = (data: DeletionImFormData, props: EditBoardProps) => {\n    props.deleteBoard(data.get('uid') as string);\n    props.history.replace(Routes.inspectio);\n}\n\n\nexport const EditBoard = (props: EditBoardProps) => {\n\n    const dispatch = useDispatch();\n    const boardId = props.board ? props.board.uid : undefined;\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organizations = useSelector(makeUserOrganizationInfoListSelector(currentUser.uid));\n\n    useEffect(\n        () => {\n            if (props.board) {\n                dispatch(fetchBoardPermissionsForUsers(props.board.uid));\n                dispatch(fetchBoardPermissionsForTeams(props.board.uid));\n                dispatch(fetchOpenBoardInvitations(props.board.uid));\n            }\n        },\n        [boardId]\n    );\n\n    if(!props.board) {\n        dispatch(fetchUserBoard(props.match.params.uid));\n        return <Dimmer className=\"page\"><Loader size=\"large\">Loading Board</Loader></Dimmer>;\n    }\n\n    const isPrivateWorkspace = !activeOrganization || !activeOrganization.explicitOrganization;\n    const validTargetOrganizations = isPrivateWorkspace? organizations.filter(orga => orga.explicitOrganization && !orga.userIsGuest) : List();\n    const isMovableBoard = isPrivateWorkspace\n        && !props.board.organization\n        && validTargetOrganizations.count() > 0;\n\n    return <Container>\n    <Grid stackable={true} padded={true}>\n    <Grid.Row>\n        <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n        <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n            <Header as=\"h1\" icon={true} textAlign='center'>\n            <Icon name='settings' />\n            <Header.Content>\n                { props.t(\"insp.board.edit\").replace('%name%', props.board.name) }\n                <Header.Subheader>{ props.t(\"insp.board.edit_header\")}</Header.Subheader>\n            </Header.Content>\n            </Header>\n        </Grid.Column>\n    </Grid.Row>\n    <Grid.Row>\n        <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n        <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n        <div className=\"ui segments\">\n            <div className=\"ui segment\">\n            <EditBoardForm initialValues={fromJS({name: props.board.name})} onSubmit={(data) => {submitForm(data, props)}} />\n            </div>\n            <div className=\"ui segment\">\n                {!props.board.inDeletion &&\n                <Message>\n                    {props.t('insp.board.delete_txt1')}<a href=\"#\" onClick={e => {e.preventDefault(); e.stopPropagation(); props.confirmDeleteBoard(props.board!.uid)}}>{props.t('insp.board.delete_link')}</a>{props.t('insp.board.delete_txt2')}\n                </Message>\n                }\n                {props.board.inDeletion &&\n                <ConfirmBoardDeletionForm\n                    boardName={props.board.name}\n                    initialValues={fromJS({confirmedName: '', uid: props.board.uid})}\n                    t={props.t}\n                    onSubmit={(data) => {handleConfirmDeletion(data, props)}}\n                    onCancel={() => props.abortDeletion(props.board!.uid)}/>\n                }\n            </div>\n        </div>\n        </Grid.Column>\n    </Grid.Row>\n    {!isStandalone() && (\n        <Grid.Row>\n            <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                <div className=\"ui segments\">\n                    <div className=\"ui segment\">\n                        <h2 className=\"ui header\">\n                            {props.t('insp.board.share')}\n                            <HeaderSubHeader>{ props.t('insp.board.share_sub') }</HeaderSubHeader>\n                        </h2>\n                        <BoardPermissionsMenu board={props.board} />\n                    </div>\n                </div>\n            </Grid.Column>\n        </Grid.Row>\n    )}\n    <Grid.Row>\n        <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n        <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n            {props.board && <BoardStickyTemplates boardId={props.board.uid} />}\n        </Grid.Column>\n    </Grid.Row>\n    {!isStandalone() && isMovableBoard && (\n        <Grid.Row>\n            <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                <div className=\"ui segments\">\n                    <div className=\"ui segment\">\n                        <h2 className=\"ui header\">\n                            {props.t('insp.board.move_to_organization_title')}\n                            <HeaderSubHeader>{ props.t('insp.board.move_to_organization_sub_title') }</HeaderSubHeader>\n                        </h2>\n                        <MoveBoardMenu boardId={props.board.uid} organizations={validTargetOrganizations} />\n                    </div>\n                </div>\n            </Grid.Column>\n        </Grid.Row>\n    )}\n    {!isStandalone() && (\n        <Grid.Row>\n            <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                {props.board && <BoardClientConfiguration boardId={props.board.uid} />}\n            </Grid.Column>\n        </Grid.Row>\n    )}\n</Grid>\n</Container>};\n\n\n","import axios, {AxiosInstance} from \"axios\";\nimport {List} from \"immutable\";\nimport {BoardId} from \"../model/Board\";\nimport {convertNodeToJs, Node, NodeId} from \"../model/Graph\";\nimport {Command} from \"./Cody/Command\";\nimport {Event} from \"./Cody/Event\";\n\nexport const NO_CODY_CONNECTION = \"No connection to Cody. Try to connect with him first!\";\n\ninterface CodyServer {\n    name: string,\n    axios: AxiosInstance,\n    sync: boolean,\n}\n\ninterface Session {\n    nodes: Node[];\n    currentNodeIndex: number;\n    currentServerIndex: number;\n    boardId: BoardId;\n    syncPerformed: boolean;\n}\n\nconst printCodyResponse = (res: CodyResponse, codyName: string) => {\n    const cody = (typeof res.cody === 'string')? [res.cody] : res.cody as [];\n    const details = (typeof res.details === 'string')? [res.details] : res.details as [];\n    const type = res.type? res.type : CodyResponseType.Info;\n\n    switch (type) {\n        case CodyResponseType.Info:\n            if(cody.length === 1) {\n                cody[0] = '%c'+cody[0];\n                cody.push('color: #32c0e7;font-weight: bold')\n            }\n            console.info('%c🐵 ['+codyName+']: '+cody[0], 'color: #414141', ...cody.slice(1));\n            if(res.details) {\n                console.log('%c🐵 ['+codyName+']: '+details[0], 'color: #414141', ...details.slice(1));\n            }\n            break;\n        case CodyResponseType.Error:\n            if(cody.length === 1) {\n                cody[0] = '%c'+cody[0];\n                cody.push('color: color: #f31c30;font-weight: bold')\n            }\n            console.error('%c🐵 ['+codyName+']: '+cody[0], 'color: #414141', ...cody.slice(1));\n            if(res.details) {\n                console.error('%c🐵 ['+codyName+']: '+details[0], 'color: #414141', ...details.slice(1));\n            }\n            break;\n        case CodyResponseType.Warning:\n        case CodyResponseType.Question:\n            if(cody.length === 1) {\n                cody[0] = '%c'+cody[0];\n                cody.push('font-weight: bold')\n            }\n            console.warn('%c🐵 ['+codyName+']: '+cody[0], 'color: #414141', ...cody.slice(1));\n            if(res.details) {\n                console.warn('%c🐵 ['+codyName+']: '+details[0], 'color: #414141', ...details.slice(1));\n            }\n            break;\n        case CodyResponseType.SyncRequired:\n            console.warn(\"%c🐵 [\"+codyName+\"]: I need to sync all board content. Lean back for a moment. I'll tell you when I'm done.\");\n            break;\n        default:\n            console.log('%c🐵 ['+codyName+']: '+cody[0], 'color: #414141', ...cody.slice(1));\n            if(res.details) {\n                console.log('%c🐵 ['+codyName+']: '+details[0], 'color: #414141', ...details.slice(1));\n            }\n    }\n}\n\nconst printError = (error: string) => {\n    console.error(error);\n}\n\nconst printWarning = (warn: string) => {\n    console.warn(warn);\n}\n\nconst sortNodes = (nodes: Node[]): Node[] => {\n    const sortedNodes: Node[] = [];\n\n    const nodesWithoutSourceInNodeList = nodes.filter(n => {\n        if(n.getSources().count() === 0) {\n            return true\n        }\n\n        let allSourcesNotInNodeList = true;\n\n        n.getSources().forEach(source => {\n            if(nodes.find(orgN => orgN.getId() === source.getId())) {\n                allSourcesNotInNodeList = false;\n            }\n        })\n\n        return allSourcesNotInNodeList;\n    });\n\n    sortedNodes.push(...nodesWithoutSourceInNodeList);\n\n    nodesWithoutSourceInNodeList.forEach(nodeNoSource => {\n        addTargetsToSortedNodesList(nodeNoSource.getTargets(), nodes, sortedNodes);\n    })\n\n    return sortedNodes;\n}\n\nconst addTargetsToSortedNodesList = (targets: List<Node>, originalNodes: Node[], sortedNodes: Node[], nestingLevel = 0): void => {\n    targets.forEach(target => {\n        if(originalNodes.find(orgN => orgN.getId() === target.getId())) {\n            const targetInSortedNodes = sortedNodes.find(sN => sN.getId() === target.getId());\n\n            if(!targetInSortedNodes) {\n                sortedNodes.push(target);\n            } else {\n                // Target should always come after all of its sources\n                sortedNodes.splice(sortedNodes.indexOf(targetInSortedNodes), 1);\n                sortedNodes.push(target);\n            }\n\n        }\n\n        nestingLevel++;\n\n        if(nestingLevel < 100) {\n            addTargetsToSortedNodesList(target.getTargets(), originalNodes, sortedNodes, nestingLevel);\n        }\n    })\n}\n\nlet currentSession: Session | undefined;\nlet codyResponsePrinter = printCodyResponse;\nlet errorPrinter = printError;\nlet warningPrinter = printWarning;\nlet syncRequiredCallback: SyncRequiredCallback | undefined;\nlet newlyConnectedCodySyncIndex: number | undefined;\n\nconst triggerCody: TriggerCody = (boardId: BoardId, nodes, currentNodeIndex?: number, currentServerIndex?: number) => {\n    if(nodes.length === 0) {\n        warningPrinter(\"Selection is empty. Nothing to do for Cody!\");\n        return false;\n    }\n\n    if(typeof currentNodeIndex === 'undefined' && currentSession) {\n        if(IIO.codyServers) {\n            IIO.codyServers.forEach(cody => {\n                codyResponsePrinter({\n                    cody: \"Wait, wait, wait! I'm still working on last session.\",\n                    details: [\"You can stop me by pressing %cESC\", \"background-color: rgba(251, 159, 75, 0.2)\"],\n                    type: CodyResponseType.Warning\n                }, cody.name);\n            })\n        } else {\n            codyResponsePrinter({\n                cody: \"Wait, wait, wait! I'm still working on last session.\",\n                details: [\"You can stop me by pressing %cESC\", \"background-color: rgba(251, 159, 75, 0.2)\"],\n                type: CodyResponseType.Warning\n            }, 'Cody');\n        }\n\n        return false;\n    }\n\n    if(IIO.codyServers) {\n        if(typeof currentNodeIndex === 'undefined') {\n            currentSession = {nodes, currentNodeIndex: 0, boardId, currentServerIndex: 0, syncPerformed: false};\n\n            nodes = sortNodes(nodes);\n\n            triggerCody(boardId, nodes, 0);\n        } else {\n            if(typeof currentServerIndex === 'undefined') {\n                currentServerIndex = 0;\n            }\n\n            const cody = IIO.codyServers![currentServerIndex];\n\n            cody.axios.post(Event.ElementEdited, {node: convertNodeToJs(nodes[currentNodeIndex])}).then(\n                res => {\n                    if(res.status !== 200) {\n                        errorPrinter(`Did not receive a valid response from ${cody.name}. ` + JSON.stringify(res));\n                        return;\n                    }\n                    const codyRes = res.data;\n                    codyResponsePrinter(codyRes, cody.name);\n\n                    if(codyRes.type !== CodyResponseType.Question\n                        && codyRes.type !== CodyResponseType.StopSession\n                        && codyRes.type !== CodyResponseType.SyncRequired\n                        && codyRes.type !== CodyResponseType.Error) {\n                        currentServerIndex!++;\n                        if(currentServerIndex! < IIO.codyServers!.length) {\n                            currentSession!.currentServerIndex = currentServerIndex!;\n                            triggerCody(boardId, nodes, currentNodeIndex, currentServerIndex);\n                        } else {\n                            currentNodeIndex = currentNodeIndex! + 1;\n                            currentSession!.currentNodeIndex = currentNodeIndex;\n                            currentSession!.currentServerIndex = 0;\n\n                            if(currentNodeIndex < nodes.length) {\n                                triggerCody(boardId, nodes, currentNodeIndex, 0);\n                            }\n                        }\n                    }\n\n                    if(codyRes.type === CodyResponseType.SyncRequired) {\n                        if(syncRequiredCallback) {\n                            syncRequiredCallback();\n                        }\n                    }\n\n                    if(codyRes.type === CodyResponseType.StopSession\n                        || codyRes.type === CodyResponseType.Error\n                        || (currentNodeIndex! === nodes.length && currentServerIndex === IIO.codyServers!.length && codyRes.type !== CodyResponseType.Question)) {\n                        currentSession = undefined;\n                    }\n                },\n                reason => {\n                    if(typeof reason !== 'string') {\n                        if(typeof reason.toString === 'function') {\n                            reason = reason.toString();\n                        } else {\n                            reason = 'Unknown Error'\n                        }\n                    }\n\n                    errorPrinter(reason)\n                }\n            );\n        }\n        return true;\n    }\n\n    errorPrinter(NO_CODY_CONNECTION);\n    return false;\n}\n\nexport const IIO: IIO = {\n    syncRequired: () => {\n        if(!IIO.codyServers) {\n            return false;\n        }\n\n        return IIO.codyServers.filter(server => server.sync).length > 0;\n    },\n    connect: {\n        Cody: (uri: string, user: string, codyName?: string) => {\n            if(!codyName) {\n                codyName = 'Cody';\n            }\n\n            if(!IIO.codyServers) {\n                IIO.codyServers = [];\n            }\n\n            const connectedServers = IIO.codyServers.filter(cody => cody.name !== codyName);\n\n            const codyServer = {\n                name: codyName,\n                axios: axios.create({\n                    baseURL:  uri + '/messages/',\n                }),\n                sync: false,\n            }\n\n            connectedServers.push(codyServer);\n\n            IIO.codyServers = connectedServers;\n\n            codyServer.axios.post<CodyResponse>(Event.IioSaidHello, {user}).then(\n                res => {\n                    if(res.status !== 200) {\n                        errorPrinter(`Did not receive a valid response from ${codyServer.name}. ` + JSON.stringify(res));\n                        return;\n                    }\n\n                    codyResponsePrinter(res.data, codyServer.name)\n\n                    if(res.data.type === CodyResponseType.SyncRequired) {\n                        if(syncRequiredCallback) {\n                            newlyConnectedCodySyncIndex = connectedServers.indexOf(codyServer);\n                            syncRequiredCallback();\n                        }\n                    }\n                },\n                reason => codyResponsePrinter({\n                    cody: 'Failed to reach out to server',\n                    details: [reason],\n                    type: CodyResponseType.Error\n                }, codyServer.name)\n            );\n            return true;\n        }\n    },\n    disconnect: (codyName?: string) => {\n        if(IIO.codyServers) {\n            if(codyName) {\n                IIO.codyServers = IIO.codyServers.filter(cody => cody.name !== codyName);\n\n                codyResponsePrinter({\n                    cody: 'Bye Bye',\n                    type: CodyResponseType.Warning\n                }, codyName)\n                return;\n            }\n            IIO.codyServers = undefined;\n            currentSession = undefined;\n            codyResponsePrinter = printCodyResponse;\n            errorPrinter = printError;\n            warningPrinter = printWarning;\n        }\n    },\n    reply: (reply: any) => {\n        if(currentSession && IIO.codyServers && IIO.codyServers[currentSession.currentServerIndex]) {\n            const cody = IIO.codyServers[currentSession.currentServerIndex];\n\n            cody.axios.post(Event.UserReplied, {reply}).then(\n                res => {\n                    if (res.status !== 200) {\n                        errorPrinter(`Did not receive a valid response from ${cody.name}. ` + JSON.stringify(res));\n                        return;\n                    }\n\n                    const codyRes = res.data;\n\n                    codyResponsePrinter(codyRes, cody.name);\n\n                    if (codyRes.type !== CodyResponseType.Question &&\n                        codyRes.type !== CodyResponseType.StopSession &&\n                        codyRes.type !== CodyResponseType.Error && currentSession) {\n\n                        const {nodes} = currentSession;\n                        let {currentNodeIndex} = currentSession;\n\n                        const currentServerIndex = currentSession.currentServerIndex + 1;\n                        if(currentServerIndex! < IIO.codyServers!.length) {\n                            currentSession!.currentServerIndex = currentServerIndex!;\n                            triggerCody(currentSession.boardId, nodes, currentNodeIndex, currentServerIndex);\n                        } else {\n                            currentNodeIndex = currentNodeIndex! + 1;\n                            currentSession!.currentNodeIndex = currentNodeIndex;\n                            currentSession!.currentServerIndex = 0;\n\n                            if(currentNodeIndex < nodes.length) {\n                                triggerCody(currentSession.boardId, nodes, currentNodeIndex, 0);\n                            } else {\n                                // Set back so that check in next if can pass!\n                                currentSession!.currentServerIndex = currentServerIndex;\n                            }\n                        }\n\n                    }\n\n                    if (codyRes.type === CodyResponseType.StopSession\n                        || codyRes.type === CodyResponseType.Error\n                        || (currentSession\n                            && (currentSession.currentNodeIndex === currentSession.nodes.length || currentSession.nodes.length === 0)\n                            && currentSession.currentServerIndex === IIO.codyServers!.length)\n                    ) {\n                        currentSession = undefined;\n                    }\n                },\n                reason => {\n                    if (typeof reason !== 'string') {\n                        if (typeof reason.toString === 'function') {\n                            reason = reason.toString();\n                        } else {\n                            reason = 'Unknown Error'\n                        }\n                    }\n\n                    errorPrinter(reason)\n                }\n            );\n\n            return true;\n        }\n\n        errorPrinter(NO_CODY_CONNECTION);\n    },\n    talk: {\n        to: {\n            Cody: () => {\n                if(IIO.codyServers) {\n                    // Only talk to last server\n                    const lastServer = IIO.codyServers[IIO.codyServers.length - 1];\n                    currentSession = {nodes: [], currentNodeIndex: 0, boardId: '', currentServerIndex: IIO.codyServers.length - 1, syncPerformed: false};\n\n                    lastServer.axios.post(Event.ConfirmTest, {}).then(\n                        res => {\n                            if(res.status !== 200) {\n                                errorPrinter(`Did not receive a valid response from ${lastServer.name}. ` + JSON.stringify(res));\n                                return;\n                            }\n\n                            codyResponsePrinter(res.data, lastServer.name)\n                        },\n                        reason => {\n                            if(typeof reason !== 'string') {\n                                if(typeof reason.toString === 'function') {\n                                    reason = reason.toString();\n                                } else {\n                                    reason = 'Unknown Error'\n                                }\n                            }\n\n                            errorPrinter(reason)\n                        }\n                    );\n\n                    return true;\n                }\n\n                errorPrinter(NO_CODY_CONNECTION);\n            }\n        }\n    },\n    trigger: {\n        Cody: triggerCody,\n    },\n    onSyncRequired: (cb) => {\n        syncRequiredCallback = cb;\n    },\n    syncNodes: async (boardId: BoardId, nodes: Node[]) => {\n        if(IIO.codyServers && (currentSession || typeof newlyConnectedCodySyncIndex !== 'undefined')) {\n            const cody = currentSession? IIO.codyServers[currentSession.currentServerIndex] : IIO.codyServers[newlyConnectedCodySyncIndex!];\n\n            if(currentSession && currentSession.syncPerformed) {\n                codyResponsePrinter({\n                    cody: \"Something went wrong. I already synced the entire board, but need to sync again.\",\n                    details: \"Looks like an endless loop. The developer who created the hooks gave me wrong instructions. Please contact them!\",\n                    type: CodyResponseType.Error\n                }, cody.name);\n\n                return false;\n            }\n\n            const res = await cody.axios.post(Command.Sync, {boardId, nodes: nodes.map(convertNodeToJs)});\n\n            if (res.status !== 200) {\n                errorPrinter(`Did not receive a valid response from ${cody.name}. ` + JSON.stringify(res));\n                return false;\n            }\n            const codyRes: CodyResponse = res.data;\n\n            if(codyRes.type !== CodyResponseType.Empty) {\n                codyResponsePrinter(codyRes, cody.name);\n            }\n\n            cody.sync = true;\n        }\n\n        return true;\n    },\n    syncChangedNodes: async (boardId: BoardId, nodes: Node[]) => {\n        if(IIO.codyServers) {\n            for(const cody of IIO.codyServers) {\n                if(!cody.sync) {\n                    continue;\n                }\n\n                const performSync = async (currentChunk: Node[]) => {\n                    const res = await cody.axios.put(Command.Sync, {boardId, nodes: currentChunk.map(convertNodeToJs)});\n\n                    if (res.status !== 200) {\n                        errorPrinter(`Did not receive a valid response from ${cody.name}. ` + JSON.stringify(res));\n                        return false;\n                    }\n                    const codyRes: CodyResponse = res.data;\n\n                    if(codyRes.type !== CodyResponseType.Empty) {\n                        codyResponsePrinter(codyRes, cody.name);\n                    }\n                }\n\n                let chunk: Node[] = [];\n\n                for(const node of nodes) {\n                    chunk.push(node);\n\n                    if(chunk.length >= 10) {\n                        await performSync(chunk);\n\n                        chunk = [];\n                    }\n                }\n\n                if(chunk.length > 0) {\n                    await performSync(chunk);\n                }\n            }\n        }\n\n        return true;\n    },\n    syncDeletedNodes: async (boardId: BoardId, nodes: Node[]) => {\n        if(IIO.codyServers) {\n            for(const cody of IIO.codyServers) {\n                if(!cody.sync) {\n                    continue;\n                }\n\n                const performSync = async (currentChunk: Node[]) => {\n                    const res = await cody.axios.post(Command.SyncDeleted, {boardId, nodes: currentChunk.map(convertNodeToJs)});\n\n                    if (res.status !== 200) {\n                        errorPrinter(`Did not receive a valid response from ${cody.name}. ` + JSON.stringify(res));\n                        return false;\n                    }\n                    const codyRes: CodyResponse = res.data;\n\n                    if(codyRes.type !== CodyResponseType.Empty) {\n                        codyResponsePrinter(codyRes, cody.name);\n                    }\n                }\n\n                let chunk: Node[] = [];\n\n                for(const node of nodes) {\n                    chunk.push(node);\n\n                    if(chunk.length >= 10) {\n                        await performSync(chunk);\n\n                        chunk = [];\n                    }\n                }\n\n                if(chunk.length > 0) {\n                    await performSync(chunk);\n                }\n            }\n        }\n\n        return true;\n    },\n    syncFinished: () => {\n        if(typeof newlyConnectedCodySyncIndex !== 'undefined' && IIO.codyServers) {\n            const cody = IIO.codyServers[newlyConnectedCodySyncIndex];\n\n            codyResponsePrinter({\n                cody: \"Sync finished. We can continue!\",\n                type: CodyResponseType.Info\n            }, cody.name);\n\n            newlyConnectedCodySyncIndex = undefined;\n            return;\n        }\n\n         if(currentSession && IIO.codyServers) {\n             const cody = IIO.codyServers[currentSession.currentServerIndex];\n\n             codyResponsePrinter({\n                 cody: \"Sync finished. We can continue!\",\n                 type: CodyResponseType.Info\n             }, cody.name);\n\n             currentSession.syncPerformed = true;\n\n             triggerCody(currentSession.boardId, currentSession.nodes, currentSession.currentNodeIndex, currentSession.currentServerIndex);\n         }\n    },\n    abortSession: () => {\n        currentSession = undefined;\n\n        if(IIO.codyServers) {\n            IIO.codyServers.forEach(cody => {\n                codyResponsePrinter({\n                    cody: \"Yeah, no problem. I stopped my work.\"\n                }, cody.name);\n            })\n        } else {\n            codyResponsePrinter({\n                cody: \"Yeah, no problem. I stopped my work.\"\n            }, 'Cody');\n        }\n\n        return true;\n    },\n    ask: {\n        Cody: {\n            forHelp: () => {\n                codyResponsePrinter({\n                    cody: \"It's easy. You design the solution and I'll code it for you!\",\n                    details: [\n                        \"%cJust select one or more elements on the board and press %cCtrl+G (Cmd+G on Mac)%c or choose %cTrigger Cody%c from context menu of an element.\\n\\nPressing %cCtrl+Q (Cmd+Q on Mac)%c closes the console.\\n\\nTo enable Cockpit integration use %c/cockpit https://localhost:<cockpit_port>\",\n                        'color: #414141',\n                        'background-color: rgba(251, 159, 75, 0.2)',\n                        'color: #414141',\n                        'background-color: rgba(251, 159, 75, 0.2)',\n                        'color: #414141',\n                        'background-color: rgba(251, 159, 75, 0.2)',\n                        'color: #414141',\n                        'background-color: rgba(251, 159, 75, 0.2)',\n                    ]\n                }, 'Cody')\n            }\n        }\n    },\n    codyServers: undefined,\n    setCodyResponsePrinter: (printer: (res: CodyResponse, codyName: string) => void) => {\n        codyResponsePrinter = printer;\n    },\n    setErrorPrinter: (printer: (error: string) => void) => {\n        errorPrinter = printer;\n    },\n    setWarningPrinter: (printer: (warn: string) => void) => {\n        warningPrinter = printer;\n    },\n}\n\n// @ts-ignore\nwindow.IIO = IIO;\n\n// tslint:disable-next-line:interface-name\nexport interface IIO {\n    syncRequired: () => boolean;\n    connect: Connect;\n    disconnect: (codyName?: string) => void;\n    reply: Reply;\n    talk: {\n        to: {\n            Cody: () => void;\n        }\n    },\n    trigger: {\n        Cody: TriggerCody;\n    },\n    // Callback should use \"syncNodes()\" to pass all nodes to Cody\n    onSyncRequired: (cb: undefined | SyncRequiredCallback) => void;\n    // If user is on a large board, syncNodes() can be called multiple times in a row with a chunk of nodes\n    syncNodes: SyncNodes;\n    // If all nodes are synced, Callback should use syncFinished() to tell Cody to continue with current session\n    syncFinished: () => void;\n    // With a SyncRequired cody response the server automatically registers for a permanent sync of changes\n    // Following two methods are used sync ongoing changes like adding, updating or deleting nodes on the board\n    syncChangedNodes: SyncChangedNodes;\n    syncDeletedNodes: SyncDeletedNodes;\n    abortSession: () => void;\n    ask: {\n        Cody: {\n            forHelp: () => void;\n        }\n    },\n\n    codyServers: CodyServer[] | undefined;\n    setCodyResponsePrinter: (printer: (res: CodyResponse, codyName: string) => void) => void;\n    setErrorPrinter: (printer: (error: string) => void) => void;\n    setWarningPrinter: (printer: (warn: string) => void) => void;\n}\n\ninterface Connect {\n    Cody: (uri: string, user: string, codyName?: string) => void;\n}\n\ntype SyncRequiredCallback = () => void;\n\ntype Reply = (reply: any) => void;\n\nexport type TriggerCody = (boardId: BoardId, nodes: Node[], currentNodeIndex?: number, currentServerIndex?: number) => boolean;\n\nexport type SyncNodes = (boardId: BoardId, nodes: Node[]) => Promise<boolean>;\n\nexport type SyncChangedNodes = (boardId: BoardId, nodes: Node[]) => Promise<boolean>;\n\nexport type SyncDeletedNodes = (boardId: BoardId, nodes: Node[]) => Promise<boolean>;\n\nexport enum CodyResponseType {\n    Info= 'Info',\n    Error = 'Error',\n    Warning = 'Warning',\n    Empty = 'Empty',\n    Question = 'Question',\n    StopSession = 'StopSession',\n    SyncRequired = 'SyncRequired',\n}\n\nexport interface CodyResponse {\n    cody: string | string[];\n    details?: string | string[];\n    type?: CodyResponseType;\n}\n\n","import {Record} from 'immutable';\nimport * as uuid from \"uuid\";\nimport {Aggregate, AggregateType} from \"../../core/model/Aggregate\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {BoardId} from \"./Board\";\n\nexport const AGGREGATE_TYPE = 'BoardTimer';\n\nexport type BoardTimerId = string;\nexport type BoardTimerError = string;\n\nexport interface BoardTimerProps {\n    uid: BoardTimerId;\n    board: BoardId\n    aggregateType: AggregateType;\n    deadline: number;\n    duration: number;\n    moderator: UserId;\n    pausedTime?: [number, number, number];\n}\n\nexport const defaultBoardTimerProps: BoardTimerProps = {\n    uid: '',\n    board: '',\n    aggregateType: AGGREGATE_TYPE,\n    deadline: 0,\n    duration: 0,\n    moderator: '',\n    pausedTime: undefined,\n};\n\nexport const createBoardTimer = (board: BoardId, deadline: number, duration: number, moderator: UserId, pausedTime?: [number, number, number]): BoardTimer => {\n    return new BoardTimer({\n        uid: '',\n        aggregateType: AGGREGATE_TYPE,\n        board,\n        deadline,\n        duration,\n        moderator,\n        pausedTime\n    })\n}\n\nexport const createBoardTimerFromServerData = (data: any): Either<BoardTimerError, BoardTimer> => {\n    const validatedData: Either<BoardTimerError, any> = validate(data,\n        [hasKey('boardTimerId'), \"boardTimerId missing\"],\n    );\n\n    if (isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new BoardTimer({\n        ...defaultBoardTimerProps,\n        ...data,\n        uid: data.boardTimerId,\n    }));\n};\n\nexport class BoardTimer extends Record(defaultBoardTimerProps) implements BoardTimerProps, Aggregate {\n    public constructor(data: BoardTimerProps) {\n        if (data.uid === '') {\n            data.uid = uuid.v4()\n        }\n\n        super(data);\n    }\n\n    // @TODO add use case methods to change state\n}\n","import io from \"socket.io-client\";\nimport {BoardModel} from \"../../InspectioBoards/index\";\nimport {UserModel} from \"../../User/index\";\nimport {BoardTimerListener, MouseSync} from \"../hooks/useMouseSync\";\nimport {BoardTimer, BoardTimerProps, createBoardTimerFromServerData} from \"../model/BoardTimer\";\n\nexport const MOUSE_MOVE_CHAN = 'MouseMove';\nexport const MOUSE_SCROLL_CHAN = 'MouseScroll';\nexport const MOUSE_JOINED_CHAN = 'MouseJoined';\nexport const MOUSE_LEFT_CHAN = 'MouseLeft';\nexport const GET_CURRENT_MOUSES = 'GetCurrentMouses';\nexport const GESTURE_CHANGED_CHAN = 'GestureChanged';\nexport const AUTO_SCROLL_CHAN = 'AutoScrolling';\n\nexport const BOARD_TIMER_STARTED_CHAN = 'BoardTimerStarted';\nexport const BOARD_TIMER_PAUSED_CHAN = 'BoardTimerPaused';\nexport const BOARD_TIMER_STOPPED_CHAN = 'BoardTimerStopped';\nexport const GET_ACTIVE_BOARD_TIMER = 'GetActiveBoardTimer';\n\nexport interface GraphPoint {\n    x: number;\n    y: number;\n}\n\nexport enum Gesture {\n    Default = 'Default',\n    Moving = 'Moving',\n    Typing = 'Typing',\n}\n\n\nexport interface UserMouseMove {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n    point: GraphPoint;\n    vT: GraphPoint;\n    scale: number;\n    isPanning: boolean;\n}\n\nexport interface UserMouseScroll {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n    vT: GraphPoint;\n    scale: number;\n}\n\nexport interface UserMouseJoined {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n    name: UserModel.DisplayName;\n    avatar: UserModel.AvatarUrl;\n}\n\nexport interface UserMouseLeft {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n}\n\nexport interface GestureChanged {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n    gesture: Gesture;\n}\n\nexport interface AutoScrollEvent {\n    userId: UserModel.UserId;\n    boardId: BoardModel.BoardId;\n    scale: number;\n    translate: GraphPoint;\n    isPanning: boolean;\n}\n\nexport interface MouseDelta {\n    dx: number;\n    dy: number;\n    startX: number;\n    startY: number;\n}\n\nexport interface ActiveBoardTimerResponse {\n    timer: BoardTimerProps | null,\n    isPaused: boolean,\n}\n\nexport type UserJoinedListener = (userId: UserModel.UserId, name: UserModel.DisplayName, avatar: UserModel.AvatarUrl, color: Color) => void;\nexport type UserLeftListener = (userId: UserModel.UserId) => void;\n\ntype ConfiguredSocket = typeof io.Socket;\n\nexport type Color = string;\n\nconst ownColor = '#423fbc';\n\nconst colors = [\n    '#15A2B0',\n    '#715671',\n    '#CF3241',\n    '#ED6842',\n    '#EECA51',\n    '#1F8A6D',\n    '#dd3cd3',\n    '#1114dd',\n    '#7add3a',\n    '#dd8794',\n    '#b16fdd',\n    '#9fa0bb',\n    '#bad63c',\n    '#7886dd',\n    '#8510dd',\n    '#dd796d',\n];\n\nlet nextPointerColor = 0;\n\nconst makeNewPointer = (userName: UserModel.DisplayName): [HTMLElement, HTMLElement, Color] => {\n\n    const color = colors[nextPointerColor];\n    nextPointerColor++;\n\n    if(nextPointerColor === colors.length) {\n        nextPointerColor = 0;\n    }\n\n    const pointerDiv = document.createElement('div');\n    pointerDiv.className = 'geRemoteMouse';\n    pointerDiv.style.position = 'absolute';\n    pointerDiv.style.display = 'none';\n\n    const pointerP = document.createElement('p');\n\n    const pointer = document.createElement('i');\n    pointer.className = getPointerIconFromGesture(Gesture.Default) + ' icon';\n    pointer.style.color = color;\n    pointerP.appendChild(pointer)\n    pointerDiv.appendChild(pointerP);\n\n    const labelP = document.createElement('p');\n    labelP.className = 'geMouseLabel';\n    labelP.innerHTML = userName;\n    labelP.style.color = color;\n    pointerDiv.appendChild(labelP);\n    return [pointerDiv, pointer, color];\n};\n\nconst getPointerIconFromGesture = (gesture: Gesture): string => {\n    switch (gesture) {\n        case Gesture.Moving:\n            return 'hand rock';\n        case Gesture.Typing:\n            return 'keyboard';\n        default:\n            return 'user';\n    }\n};\n\nexport class RemoteMouseSync implements MouseSync {\n    private socket: ConfiguredSocket;\n    private container: HTMLElement;\n    private registry: {[key: string]: {userName: UserModel.Username, pointerEl: HTMLElement, pointerIcon: HTMLElement, color: Color, scale: number, translate: GraphPoint, lastKnownAbsolutePoint: GraphPoint}} = {};\n    private translateGraphPoint: (point: GraphPoint) => GraphPoint;\n    private graph: any;\n    private userJoinedListeners: UserJoinedListener[];\n    private userLeftListeners: UserLeftListener[];\n    private observedUser: UserModel.UserId | null;\n    private observingFrame: HTMLElement | null;\n    private lastMoveWasPanning: boolean;\n\n    private boardTimerStartedListeners: BoardTimerListener[];\n    private boardTimerPausedListeners: BoardTimerListener[];\n    private boardTimerStoppedListeners: BoardTimerListener[];\n    private activeBoardTimer: BoardTimer | undefined;\n    private isBoardTimerPaused: boolean = false;\n\n    public constructor(\n        socket: ConfiguredSocket,\n        container: HTMLElement,\n        graph: any,\n        translateGraphPoint: (point: GraphPoint) => GraphPoint\n    ) {\n        this.socket = socket;\n        this.container = container;\n        this.translateGraphPoint = translateGraphPoint;\n        this.graph = graph;\n        this.userJoinedListeners = [];\n        this.userLeftListeners = [];\n        this.boardTimerStartedListeners = [];\n        this.boardTimerPausedListeners = [];\n        this.boardTimerStoppedListeners = [];\n        this.observedUser = null;\n        this.observingFrame = null;\n        this.lastMoveWasPanning = false;\n    }\n\n    public startSync(joined: UserMouseJoined) {\n        this.socket.on(MOUSE_JOINED_CHAN, (evt: UserMouseJoined) => {\n            this.trackMouseOfRemoteUser(evt.userId, evt.name, evt.avatar);\n        });\n\n        this.socket.on(MOUSE_LEFT_CHAN, (evt: UserMouseLeft) => {\n            this.stopMouseTrackingOfUser(evt.userId);\n\n            // Verify that mouse really left chan and did not have network issues\n            this.socket.emit(\n                GET_CURRENT_MOUSES,\n                joined,\n                (evts: UserMouseJoined[]) => evts.forEach(joinedEvt => {\n                    if(!this.registry.hasOwnProperty(joinedEvt.userId)) {\n                        this.trackMouseOfRemoteUser(joinedEvt.userId, joinedEvt.name, joinedEvt.avatar)\n                    }\n                }));\n        });\n\n        this.socket.on(MOUSE_MOVE_CHAN, (move: UserMouseMove) => {\n            const {userId, point, vT, scale} = move;\n\n            if(this.registry.hasOwnProperty(userId)) {\n                const {pointerEl} = this.registry[userId];\n\n                pointerEl.style.display = 'block';\n\n                if(this.observedUser === userId) {\n                    this.graph.view.setScale(scale);\n                    this.graph.panGraph(move.vT.x, move.vT.y);\n                    this.graph.panningListeners.forEach((l: (translate: typeof move.vT) => void) => l(move.vT));\n                }\n\n                if(move.isPanning && this.observedUser === userId) {\n                    const absolutePoint = this.translateGraphPoint(point);\n                    pointerEl.style.left = absolutePoint.x + \"px\";\n                    pointerEl.style.top = absolutePoint.y + \"px\";\n                    this.registry[userId].lastKnownAbsolutePoint = absolutePoint;\n                }\n\n                if(!move.isPanning) {\n                    const absolutePoint = this.translateGraphPoint(point);\n                    pointerEl.style.left = absolutePoint.x + \"px\";\n                    pointerEl.style.top = absolutePoint.y + \"px\";\n                    this.registry[userId].lastKnownAbsolutePoint = absolutePoint;\n                }\n\n                this.registry[userId].translate = vT;\n                this.registry[userId].scale = scale;\n            }\n        });\n\n        this.socket.on(MOUSE_SCROLL_CHAN, (scroll: UserMouseScroll) => {\n            const {userId, scale, vT} = scroll;\n\n            if(this.registry.hasOwnProperty(userId)) {\n                if(this.observedUser === userId) {\n                    this.graph.view.setScale(scale);\n                    this.graph.panGraph(vT.x, vT.y);\n                }\n\n                this.registry[userId].translate = vT;\n                this.registry[userId].scale = scale;\n            }\n        });\n\n        this.socket.on(GESTURE_CHANGED_CHAN, (gestureChanged: GestureChanged) => {\n            const {userId, gesture} = gestureChanged;\n\n            if(this.registry.hasOwnProperty(userId)) {\n                const {pointerIcon} = this.registry[userId];\n                pointerIcon.className = getPointerIconFromGesture(gestureChanged.gesture) + ' icon';\n            }\n        });\n\n        this.socket.on(AUTO_SCROLL_CHAN, (autoScrollEvent: AutoScrollEvent) => {\n            const {userId, translate, scale, isPanning} = autoScrollEvent;\n\n            if(this.registry.hasOwnProperty(userId)) {\n                if(this.observedUser === userId) {\n                    this.graph.view.setScale(scale);\n                    this.graph.panGraph(translate.x, translate.y);\n                }\n\n                this.registry[userId].translate = translate;\n                this.registry[userId].scale = scale;\n            }\n        });\n\n        this.socket.on(BOARD_TIMER_STARTED_CHAN, (timer: BoardTimerProps) => {\n            const boardTimer = new BoardTimer(timer);\n            console.log(\"[mousesync] Received board timer started: \", timer);\n            this.boardTimerStartedListeners.forEach(l => l(boardTimer));\n            this.activeBoardTimer = boardTimer;\n            this.isBoardTimerPaused = false;\n        })\n\n        this.socket.on(BOARD_TIMER_PAUSED_CHAN, (timer: BoardTimerProps) => {\n            const boardTimer = new BoardTimer(timer);\n            console.log(\"[mousesync] Received board timer paused: \", timer);\n            this.boardTimerPausedListeners.forEach(l => l(boardTimer));\n            this.activeBoardTimer = boardTimer;\n            this.isBoardTimerPaused = true;\n        })\n\n        this.socket.on(BOARD_TIMER_STOPPED_CHAN, (timer: BoardTimerProps) => {\n            const boardTimer = new BoardTimer(timer);\n            console.log(\"[mousesync] Received board timer stopped: \", timer);\n            this.activeBoardTimer = undefined;\n            this.isBoardTimerPaused = false;\n            this.boardTimerStoppedListeners.forEach(l => l(boardTimer));\n        })\n\n        this.socket.on('disconnect', () => {\n            console.log(\"[mousesync] MouseSync socket disconnected\");\n            for(const uid in this.registry) {\n                if(this.registry.hasOwnProperty(uid)) {\n                    this.stopMouseTrackingOfUser(uid);\n                }\n            }\n        });\n\n        const init = (triggerJoinedListeners: boolean) => {\n            if(triggerJoinedListeners) {\n                this.userJoinedListeners.forEach(li => li(joined.userId, joined.name, joined.avatar, ownColor));\n            }\n\n\n            this.socket.emit(MOUSE_JOINED_CHAN, joined);\n\n            this.socket.emit(\n                GET_CURRENT_MOUSES,\n                joined,\n                (evts: UserMouseJoined[]) => evts.forEach(joinedEvt => this.trackMouseOfRemoteUser(joinedEvt.userId, joinedEvt.name, joinedEvt.avatar)));\n\n            this.socket.emit(\n                GET_ACTIVE_BOARD_TIMER,\n                {board: joined.boardId},\n                (res: ActiveBoardTimerResponse) => {\n                    this.activeBoardTimer = res.timer? new BoardTimer(res.timer) : undefined;\n                    this.isBoardTimerPaused = res.isPaused;\n\n                    if(triggerJoinedListeners && this.boardTimerStartedListeners.length && this.activeBoardTimer) {\n                        console.log(\"[mousesync] Calling board timer started listeners with: \", res);\n                        this.boardTimerStartedListeners.forEach(l => l(this.activeBoardTimer!))\n                    }\n\n                    if(this.isBoardTimerPaused && triggerJoinedListeners && this.boardTimerPausedListeners.length && this.activeBoardTimer) {\n                        this.boardTimerPausedListeners.forEach(l => l(this.activeBoardTimer!))\n                    }\n                }\n            )\n        };\n\n        this.socket.on('reconnect', () => {\n            console.log(\"[mousesync] MouseSync socket reconnected\");\n\n            if(this.activeBoardTimer && this.activeBoardTimer.moderator === joined.userId) {\n                this.startBoardTimer(this.activeBoardTimer);\n                if(this.isBoardTimerPaused) {\n                    this.pauseBoardTimer(this.activeBoardTimer);\n                }\n            }\n\n            init(false);\n        })\n\n        init(true);\n    }\n\n    public stopSync(left: UserMouseLeft) {\n        console.log(\"[mousesync] stop sync\");\n        this.socket.emit(MOUSE_LEFT_CHAN, left);\n        this.socket.off(MOUSE_JOINED_CHAN);\n        this.socket.off(MOUSE_MOVE_CHAN);\n        this.socket.off(MOUSE_SCROLL_CHAN);\n        this.socket.off(MOUSE_LEFT_CHAN);\n        this.registry = {};\n        this.observedUser = null;\n        this.lastMoveWasPanning = false;\n        this.activeBoardTimer = undefined;\n        this.isBoardTimerPaused = false;\n        document.getElementById('topmenu')!.style.borderColor = null;\n    }\n\n    public keepMousePositionsInPlaceOnPanning(move: UserMouseMove, mouseDelta: MouseDelta): void\n    {\n        for(const userId in this.registry) {\n            if(this.registry.hasOwnProperty(userId)) {\n                const {pointerEl, lastKnownAbsolutePoint} = this.registry[userId];\n                pointerEl.style.left = lastKnownAbsolutePoint.x + Math.round(mouseDelta.dx) + 'px';\n                pointerEl.style.top = lastKnownAbsolutePoint.y + Math.round(mouseDelta.dy) + 'px';\n            }\n        }\n    }\n\n    public syncLastKnownAbsolutePointsAfterPanning(): void\n    {\n        for(const userId in this.registry) {\n            if(this.registry.hasOwnProperty(userId)) {\n                const {pointerEl} = this.registry[userId];\n\n                this.registry[userId].lastKnownAbsolutePoint = {\n                    x: parseInt(pointerEl.style.left as string, undefined),\n                    y: parseInt(pointerEl.style.top as string, undefined)\n                };\n            }\n        }\n    }\n\n    public emitUserMouseMove(move: UserMouseMove, mouseDelta?: MouseDelta): void\n    {\n        if(move.isPanning && mouseDelta) {\n            this.keepMousePositionsInPlaceOnPanning(move, mouseDelta);\n            this.lastMoveWasPanning = true;\n        } else {\n            if(this.lastMoveWasPanning) {\n                this.syncLastKnownAbsolutePointsAfterPanning();\n            }\n        }\n        this.socket.emit(MOUSE_MOVE_CHAN, move);\n    }\n\n    public emitUserMouseScroll(scroll: UserMouseScroll): void\n    {\n        this.socket.emit(MOUSE_SCROLL_CHAN, scroll);\n    }\n\n    public emitUserGestureChanged(gestureChanged: GestureChanged): void\n    {\n        this.socket.emit(GESTURE_CHANGED_CHAN, gestureChanged);\n    }\n\n    public emitUserIsAutoScrolling(autoScrollEvent: AutoScrollEvent): void\n    {\n        this.socket.emit(AUTO_SCROLL_CHAN, autoScrollEvent);\n    }\n\n    public trackMouseOfRemoteUser(userId: UserModel.UserId, userName: UserModel.Username, avatar: UserModel.AvatarUrl): void {\n        console.log(\"[mousesync] track mouse of remote user: \", userId, \" in registry \", this.registry.hasOwnProperty(userId));\n        // Return if we already know that user\n        if(this.registry.hasOwnProperty(userId)) {\n            if(this.observedUser === userId) {\n                this.observeUser(userId);\n            }\n            return;\n        }\n\n        const [pointerDiv, pointerI, color] = makeNewPointer(userName);\n        this.registry[userId] = {\n            userName,\n            pointerEl: pointerDiv,\n            pointerIcon: pointerI,\n            color,\n            scale: 0.2,\n            translate: {x: 0, y: 0},\n            lastKnownAbsolutePoint: {x: 0, y: 0}\n        };\n        this.container.appendChild(pointerDiv);\n\n        if(this.observedUser === userId) {\n            this.observeUser(userId);\n        }\n\n        this.userJoinedListeners.forEach(li => li(userId, userName, avatar, color));\n    }\n\n    public stopMouseTrackingOfUser(userId: UserModel.UserId): void {\n        console.log(\"[mousesync] stop mouse tracking of user\", userId, \"in regsitry \", this.registry.hasOwnProperty(userId));\n        if(this.registry.hasOwnProperty(userId)) {\n            const {pointerEl} = this.registry[userId];\n            this.container.removeChild(pointerEl);\n            delete this.registry[userId];\n            if(this.observedUser === userId) {\n                this.hideObservingFrame();\n            }\n            this.userLeftListeners.forEach(li => li(userId));\n        }\n    }\n\n    public observeUser(userId: UserModel.UserId): void {\n        console.log(\"[mousesync] observe user\", userId, \"in registry\", this.registry.hasOwnProperty(userId));\n        if(this.registry.hasOwnProperty(userId)) {\n            this.observedUser = userId;\n            const {userName, color, translate, scale} = this.registry[userId];\n\n            document.getElementById('topmenu')!.style.borderColor = color;\n            const frame = document.createElement('div');\n            frame.classList.add('observing', 'frame');\n            frame.style.borderColor = color;\n\n            const label = document.createElement('div');\n            label.classList.add('label');\n            label.innerText = 'Observing ' + userName;\n            label.style.backgroundColor = color;\n            label.style.color = '#fff';\n            frame.append(label);\n            this.graph.container.append(frame);\n            this.observingFrame = frame;\n\n            if(translate.x !== 0 && translate.y !== 0) {\n                this.graph.view.setScale(scale);\n                this.graph.panGraph(translate.x, translate.y);\n            }\n        }\n    }\n\n    public hideObservingFrame(): void {\n        if(this.observingFrame) {\n            this.observingFrame.remove();\n            this.observingFrame = null;\n            document.getElementById('topmenu')!.style.borderColor = null;\n        }\n    }\n\n    public stopObservingUser(): void {\n        console.log(\"[mousesync] stop oberving user\");\n        this.observedUser = null;\n        this.hideObservingFrame();\n    }\n\n    public onUserJoined(listener: UserJoinedListener): void {\n        console.log(\"[mousesync] attach user joined listener\");\n        this.userJoinedListeners.push(listener);\n    }\n\n    public offUserJoined(listener: UserJoinedListener): void {\n        this.userJoinedListeners = this.userJoinedListeners.filter(l => l !== listener);\n    }\n\n    public onUserLeft(listener: UserLeftListener): void {\n        console.log(\"[mousesync] attach user left listener\");\n        this.userLeftListeners.push(listener);\n    }\n\n    public offUserLeft(listener: UserLeftListener): void {\n        this.userLeftListeners = this.userLeftListeners.filter(l => l !== listener);\n    }\n\n    public onBoardTimerPaused(listener: BoardTimerListener): void {\n        this.boardTimerPausedListeners.push(listener);\n\n        if(this.activeBoardTimer && this.isBoardTimerPaused) {\n            listener(this.activeBoardTimer);\n        }\n    }\n\n    public offBoardTimerPaused(listener: BoardTimerListener) {\n        this.boardTimerPausedListeners = this.boardTimerPausedListeners.filter(l => l !== listener);\n    }\n\n    public onBoardTimerStarted(listener: BoardTimerListener): void {\n        this.boardTimerStartedListeners.push(listener);\n        if(this.activeBoardTimer) {\n            console.log(\"[mousesync] Trigger board timer started listener with active timer: \", this.activeBoardTimer.toJS())\n            listener(this.activeBoardTimer);\n        }\n    }\n\n    public offBoardTimerStarted(listener: BoardTimerListener) {\n        this.boardTimerStartedListeners = this.boardTimerStartedListeners.filter(l => l !== listener);\n    }\n\n    public onBoardTimerStopped(listener: BoardTimerListener): void {\n        this.boardTimerStoppedListeners.push(listener);\n    }\n\n    public offBoardTimerStopped(listener: BoardTimerListener) {\n        this.boardTimerStoppedListeners = this.boardTimerStoppedListeners.filter(l => l !== listener);\n    }\n\n    public pauseBoardTimer(timer: BoardTimer): void {\n        this.socket.emit(BOARD_TIMER_PAUSED_CHAN, timer.toJS());\n        this.activeBoardTimer = timer;\n        this.isBoardTimerPaused = true;\n    }\n\n    public startBoardTimer(timer: BoardTimer): void {\n        this.socket.emit(BOARD_TIMER_STARTED_CHAN, timer.toJS());\n        this.activeBoardTimer = timer;\n        this.isBoardTimerPaused = false;\n    }\n\n    public stopBoardTimer(timer: BoardTimer): void {\n        this.socket.emit(BOARD_TIMER_STOPPED_CHAN, timer.toJS());\n        this.activeBoardTimer = undefined;\n        this.isBoardTimerPaused = false;\n    }\n}\n\n\n\n","let client: WebSocket|null = null;\nlet reconnectTrys = 0;\nlet positionListener: (e: MessageEvent) => void = () => { /* no op */};\nlet currentUserId: string | null = null;\nlet currentSessionId: string | null = null;\nlet pingTimeout: number|null = null;\nlet heartbeatTimeout: number|null = null;\n\nenum MessageType {\n    GetUserPositions = 'GetUserPositions',\n    GetUserPositionsResponse = 'GetUserPositionsResponse',\n    UserPositionChanged = 'UserPositionChanged',\n    UserStatusChanged = 'UserStatusChanged',\n}\n\ninterface GetUserPositions {\n    type: MessageType.GetUserPositions,\n    id: string;\n    sessionId: string;\n}\n\ninterface GetUserPositionsResponse {\n    type: MessageType.GetUserPositionsResponse,\n    users: {[userId: string]: {\n        position: {left: number, top: number},\n    }}\n}\n\ninterface GetUserPositions {\n    type: MessageType.GetUserPositions,\n}\n\ninterface UserPositionChanged {\n    type: MessageType.UserPositionChanged,\n    id: string;\n    sessionId: string;\n    left: number;\n    top: number;\n}\n\ninterface UserStatusChanged {\n    type: MessageType.UserStatusChanged,\n    id: string;\n    sessionId: string;\n    status: {micOn: boolean, megaphoneOn: boolean, cameraOn: boolean, handUpOn: boolean, emojiOn: boolean, showIconName: string};\n}\n\ntype Message = GetUserPositions | GetUserPositionsResponse | UserPositionChanged | UserStatusChanged;\n\nconst isConnected = () => {\n    return client && client.readyState === client.OPEN;\n}\n\nconst ping = () => {\n    if(client && isConnected() && currentUserId && currentSessionId) {\n        client.send(JSON.stringify({type: MessageType.GetUserPositions, id: currentUserId, sessionId: currentSessionId}));\n    } else {\n        reconnectTrys++;\n\n        if(client) {\n            client.close();\n        }\n\n        console.log(\"[vidu] trying to reconnect to socket. Attempt: \" + reconnectTrys);\n        connect();\n    }\n\n    pingTimeout = window.setTimeout(() => {\n        ping();\n    }, 30000);\n}\n\nconst heartbeat = () => {\n    if(heartbeatTimeout) {\n        window.clearTimeout(heartbeatTimeout);\n    }\n\n    heartbeatTimeout = window.setTimeout(() => {\n        if(client && isConnected()) {\n            console.log(\"[vidu] Closing connection due to heartbeat timeout\");\n            client.close()\n        }\n        // ping interval + latency\n    }, 30000 + 1000);\n}\n\n\n\nconst connect = () => {\n    client = new WebSocket('wss://mephisto-video.inseciacloud.com:3001');\n    //client = new WebSocket('wss://localhost:3001');\n\n    client.onopen = (evt) => {\n        console.log(\"[vidu] heartbeat triggered on open\")\n        heartbeat();\n        reconnectTrys = 0;\n    }\n    client.onclose = (evt) => {\n        if(heartbeatTimeout) {\n            console.log(\"[vidu] heartbeat timeout cleared on close\")\n            window.clearTimeout(heartbeatTimeout);\n        }\n    }\n\n    client.onmessage = positionListener;\n}\n\nconnect();\n\n\nconst WebSocketConnection = {\n    sendPositionUpdate: (id: string, sessionId: string, left: number, top: number) => {\n        if(client && isConnected()) {\n            client.send(JSON.stringify({ type: 'UserPositionChanged', id, sessionId, left, top, }));\n        }\n    },\n    sendStatusUpdate: (id: string, sessionId: string, status: {micOn: boolean, megaphoneOn: boolean, cameraOn: boolean, handUpOn: boolean, emojiOn: boolean, showIconName: string}) => {\n        if(client && isConnected()) {\n            client.send(JSON.stringify({ type: 'UserStatusChanged', id, sessionId, status, }));\n        }\n    },\n    listenForUpdates: (id: string, sessionId: string, onChange: (id: string, data: { left: number, top: number }|{micOn: boolean, megaphoneOn: boolean, cameraOn: boolean, handUpOn: boolean, emojiOn: boolean, showIconName: string}) => void) => {\n        currentUserId = id;\n        currentSessionId = sessionId;\n\n        positionListener = (e) => {\n            const data: Message = JSON.parse(e.data);\n\n            switch (data.type) {\n                case MessageType.GetUserPositionsResponse:\n                    console.log(\"[vidu] Got user positions from socket server: \", data);\n                    heartbeat();\n\n                    Object.keys(data.users).forEach(userId => {\n                        if(id === userId) {\n                            return;\n                        }\n\n                        const {position} = data.users[userId];\n\n                        onChange(userId, position);\n                    })\n                    break;\n                case MessageType.UserPositionChanged:\n                    onChange(data.id, { left: data.left, top: data.top });\n                    break;\n                case MessageType.UserStatusChanged:\n                    onChange(data.id, data.status)\n                    break;\n            }\n        }\n\n\n        if(client) {\n            client.onmessage = positionListener;\n            ping();\n        }\n    },\n    stopListeningForPositionUpdates: () => {\n        if(pingTimeout) {\n            window.clearTimeout(pingTimeout);\n        }\n\n        currentUserId = null;\n        currentSessionId = null;\n    }\n};\n\nexport default WebSocketConnection;","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {BoardId} from \"../model/Board\";\nimport {BoardGraphElement, GraphElementType} from \"../model/BoardGraphElement\";\nimport {BoardGraphElementsState} from \"../reducers/applyBoardGraphElementActions\";\n\nexport const boardGraphElementsSelector = (state: Record<ApplicationState>, props: any): BoardGraphElementsState =>\n    state.getIn([MODULE, 'boardGraphElements']);\n\nexport const makeBoardGraphElementsSelector = (boardId: BoardId, type?: GraphElementType): (state: Record<ApplicationState>, props?: any) => List<BoardGraphElement>|null => {\n    return createSelector(\n        [boardGraphElementsSelector],\n        (boardGraphElements): List<BoardGraphElement>|null => {\n            if (!boardGraphElements.has(boardId)) {\n                return null;\n            }\n\n            const elements = List(boardGraphElements.get(boardId)!.toIndexedSeq().toArray());\n            return type ? elements.filter(element => element.type === type) : elements;\n        }\n    )\n};\n","import * as React from 'react';\nimport {useState} from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Dropdown, DropdownProps, Modal} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\nimport {BoardId} from \"../model/Board\";\nimport {GraphElementType} from \"../model/BoardGraphElement\";\nimport {HistoryCellType} from \"../model/HistoryEntry\";\nimport {makeBoardGraphElementsSelector} from \"../selectors/boardGraphElement\";\nimport {makeGetBoards} from \"../selectors/boardList\";\nimport CellIcon from \"./CellIcon\";\n\n\ninterface OwnProps {\n    boardId: BoardId\n    openHandle: (handle: (open: boolean, currentLink: null|string) => void) => void;\n    onCancel: () => void;\n    onLinkChosen: (link: string) => void;\n}\n\ntype MxGraphBoardLinkProps = OwnProps & WithNamespaces;\n\nconst MxGraphBoardLink = (props: MxGraphBoardLinkProps) => {\n    const dispatch = useDispatch();\n    const [selectedBoard, setSelectedBoard] = useState('');\n    const [selectedEvent, setSelectedEvent] = useState<string|undefined>(undefined);\n    const [open, setOpen] = useState(false);\n    const boards = useSelector(makeGetBoards(true));\n    const boardGraphElements = useSelector(makeBoardGraphElementsSelector(selectedBoard, GraphElementType.event));\n    const featureToggle = false;\n\n    const boardChoices = boards.filter(board => board.uid !== props.boardId).map(board => ({\n        key: board.uid,\n        value: board.uid,\n        text: board.name,\n    })).toArray();\n    const eventChoices = boardGraphElements ? boardGraphElements.toArray().map(element => ({\n        text: element.name,\n        value: element.uid,\n        icon: <CellIcon cellType={element.type as string as HistoryCellType} />\n    })) : [];\n\n    props.openHandle((openFromHandle, currentLink) => {\n        if(currentLink) {\n            selectBoard(Routes.getBoardUidFromWorkspaceUrl(currentLink));\n        }\n        setOpen(openFromHandle);\n    });\n\n    const selectBoard = (value: string) => {\n        setSelectedBoard(value);\n        setSelectedEvent(undefined);\n\n        if (value.length === 36) {\n            // dispatch(fetchBoardGraphElements(value, GraphElementType.event));\n        }\n    };\n\n    const handleBoardChange = (e: React.SyntheticEvent, dProps: DropdownProps) => {\n        selectBoard(dProps.value as string);\n    };\n\n    const handleEventChange = (e: React.SyntheticEvent, dProps: DropdownProps) => {\n        setSelectedEvent(dProps.value as string)\n    };\n\n    const cancel = () => {\n        props.onCancel();\n        resetModal();\n    };\n\n    const resetModal = () => {\n        setSelectedBoard('');\n        setSelectedEvent(undefined);\n    };\n\n    const chooseLink = () => {\n        if(selectedBoard !== '') {\n            props.onLinkChosen(Routes.compileInspectioBoardWorkspace(selectedBoard));\n        } else {\n            props.onLinkChosen('');\n        }\n\n        resetModal();\n    };\n\n    // @ts-ignore\n    // @ts-ignore\n    return (\n        <Modal open={open} onClose={cancel} closeIcon={true}>\n            <Modal.Header>{props.t('insp.board.link.headline')}</Modal.Header>\n            <Modal.Content image={true}>\n                <Dropdown\n                    placeholder={props.t('insp.board.link.select_board') as string}\n                    fluid={true}\n                    search={true}\n                    selection={true}\n                    options={boardChoices}\n                    onChange={handleBoardChange}\n                    value={selectedBoard}\n                    clearable={true}\n                    style={{ marginRight: '10px' }}\n                />\n                {featureToggle && <Dropdown\n                    placeholder={props.t('insp.board.link.select_event') as string}\n                    fluid={true}\n                    search={true}\n                    selection={true}\n                    clearable={true}\n                    options={eventChoices}\n                    value={selectedEvent}\n                    onChange={handleEventChange}\n                    style={{ marginLeft: '10px' }}\n                />}\n\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={cancel}\n                />\n                <Button\n                    primary={true}\n                    children={props.t('app.form.save')}\n                    onClick={chooseLink}\n                />\n            </Modal.Actions>\n        </Modal>\n    );\n};\n\nexport default withNamespaces()(MxGraphBoardLink);\n","import {readFileArrayBuffer} from \"./readFile\";\n\nexport interface Crop {\n    x: number; // Left margin; e.g. 0.1 => 10% margin from the left\n    y: number; // Top margin\n    width: number; // Image width; e.g. 0.5 => 50% of original width\n    height: number; // Image height\n}\n\n/**\n * Takes the image in the HTMLImageElement provided and maps it into a canvas according to the crop value provided.\n * The returned canvas can then be exported as needed.\n *\n * @param image\n * @param crop\n */\nconst createCropCanvas = (image: HTMLImageElement, crop: Crop): HTMLCanvasElement => {\n    const cropStartX = Math.round(crop.x * 0.01 * image.naturalWidth);\n    const cropStartY = Math.round(crop.y * 0.01 * image.naturalHeight);\n    const newWidth = Math.round(crop.width * 0.01 * image.naturalWidth);\n    const newHeight = Math.round(crop.height * 0.01 * image.naturalHeight);\n\n    const canvas = document.createElement('canvas');\n    canvas.width = newWidth;\n    canvas.height = newHeight;\n\n    const ctx = canvas.getContext('2d')!;\n    ctx.drawImage(image, cropStartX, cropStartY, newWidth, newHeight, 0, 0, newWidth, newHeight);\n\n    return canvas;\n};\n\nexport const getCroppedImageBase64 = (image: HTMLImageElement, crop: Crop, mimeType: string): string => {\n    return createCropCanvas(image, crop).toDataURL(mimeType);\n};\n\nexport const getCroppedImageArrayBuffer = (image: HTMLImageElement, crop: Crop, mimeType: string): Promise<ArrayBuffer> => {\n    return new Promise(async (resolve, reject) => {\n        createCropCanvas(image, crop).toBlob(\n            blob => {\n                if (!blob) {\n                    reject();\n                }\n\n                resolve(readFileArrayBuffer(blob as File));\n            },\n            mimeType\n        );\n    });\n};\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport Dropzone from \"react-dropzone\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport ReactCrop from \"react-image-crop\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Modal} from \"semantic-ui-react\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Api} from \"../actions\";\nimport {BoardId} from \"../model/Board\";\nimport {isStandalone} from \"../../standalone/util\";\nimport {readFile, readFileArrayBuffer, readFileBase64} from \"../../core/readFile\";\nimport {Crop, getCroppedImageArrayBuffer, getCroppedImageBase64} from \"../../core/imageCrop\";\n\nconst INITIAL_CROP = { aspect: 0, unit: '%' as '%', x: 0, y: 0, width: 100, height: 100 };\nconst ACCEPTED_IMAGE_TYPES = ['image/jpeg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml'];\nconst CROP_IMAGE_TYPES = ['image/jpeg', 'image/png', 'image/webp'];\nconst MAX_UPLOAD_SIZE = 5 * 1024 * 1024; // 5MB\n\ninterface OwnProps {\n    boardId: BoardId;\n    openHandle: (handle: (open: boolean, imageId: string|null) => void) => void;\n    onCancel: () => void;\n    onFileUploaded: (imgName: string, imgUrl: string) => void;\n}\n\nexport interface CropData {\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n}\n\ntype MxGraphImageUploadProps = OwnProps & WithNamespaces;\n\nconst MxGraphImageUpload = (props: MxGraphImageUploadProps) => {\n    const [imageId, setImageId] = useState<string|null>(null);\n    const [crop, setCrop] = useState<ReactCrop.PercentCrop>(INITIAL_CROP);\n    const [file, setFile] = useState<undefined|{ file: File, src: string }>(undefined);\n    const [image, setImage] = useState<undefined|HTMLImageElement>(undefined);\n    const [open, setOpen] = useState(false);\n    const [uploading, setUploading] = useState(false);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        focusPasteInput();\n\n        // Make sure that the mxGraph cell does not steal the focus\n        setTimeout(focusPasteInput, 1000);\n    });\n\n    props.openHandle((openFromHandle, currentImageId) => {\n        setImageId(typeof currentImageId === 'string' ? currentImageId : null);\n        setOpen(openFromHandle);\n    });\n\n    const onFileSelected = (acceptedFiles: File[]) => {\n        if (acceptedFiles.length < 1) {\n            dispatch(NotifyAction.Command.error(\n                props.t('insp.board.upload.upload_failed_title'),\n                props.t('insp.board.upload.upload_failed_text')\n            ));\n            return;\n        }\n\n        setFile({ file: acceptedFiles[0], src: URL.createObjectURL(acceptedFiles[0]) });\n    };\n\n    const cancel = () => {\n        props.onCancel();\n        resetModal();\n    };\n\n    const resetModal = () => {\n        setFile(undefined);\n        setImage(undefined);\n        setCrop(INITIAL_CROP);\n        setUploading(false);\n    };\n\n    const upload = async () => {\n        if (!file) {\n            return;\n        }\n\n        setUploading(true);\n        const isCroppedImage = CROP_IMAGE_TYPES.includes(file.file.type);\n        const isVectorGraphic = file.file.type === 'image/svg+xml';\n\n        if (isStandalone()) {\n            // mxGraph seems to add the `;base64` internally which is why they are removed here\n            const imageDataURL = isCroppedImage\n                ? getCroppedImageBase64(image!, crop as Crop, file.file.type).replace(';base64', '')\n                : isVectorGraphic\n                    ? 'data:image/svg+xml,' + await readFile(file.file)\n                    : (await readFileBase64(file.file)).replace(';base64', '');\n\n            props.onFileUploaded(file!.file.name, imageDataURL);\n            resetModal();\n            return;\n        }\n\n        const imageData = isCroppedImage\n            ? await getCroppedImageArrayBuffer(image!, crop as Crop, file.file.type)\n            : isVectorGraphic ? await readFile(file.file) : await readFileArrayBuffer(file.file);\n\n        (imageId ? replaceImage : uploadNewImage)(imageData, file.file.type);\n    };\n\n    const uploadNewImage = (data: string|ArrayBuffer, mimeType: string) => {\n        Api.uploadBoardImage(props.boardId, data, mimeType)\n            .then((response) => {\n                props.onFileUploaded(file!.file.name, `/buckets/boards/${props.boardId}/${response.data.imageId}`);\n            })\n            .catch(imageUploadErrorHandler)\n            .finally(resetModal);\n    };\n\n    const replaceImage = (data: string|ArrayBuffer, mimeType: string) => {\n        Api.replaceBoardImage(props.boardId, imageId!, data, mimeType)\n            .then((response) => {\n                props.onFileUploaded(file!.file.name, `/buckets/boards/${props.boardId}/${imageId}`);\n            })\n            .catch(imageUploadErrorHandler)\n            .finally(resetModal);\n    };\n\n    const imageUploadErrorHandler = () => {\n        dispatch(NotifyAction.Command.error(\n            props.t('insp.board.upload.upload_failed_title'),\n            props.t('insp.board.upload.upload_failed_text')\n        ));\n        cancel();\n    };\n\n    const handlePaste = (event: React.ClipboardEvent) => {\n        event.preventDefault();\n        const items: DataTransferItemList = event.clipboardData.items;\n        let blob = null;\n\n        /* tslint:disable-next-line:prefer-for-of */\n        for (let i = 0; i < items.length; i++) {\n            const item: DataTransferItem = items[i];\n\n            if (item.type === 'image/jpeg' || item.type === 'image/png') {\n                blob = item.getAsFile();\n                break;\n            }\n        }\n\n        if (null === blob) {\n            dispatch(NotifyAction.Command.error(\n                props.t('insp.board.upload.paste_failed'),\n                props.t('insp.board.upload.invalid_file_pasted')\n            ));\n            return;\n        }\n\n        onFileSelected([blob]);\n    };\n\n    const focusPasteInput = () => {\n        const element = document.getElementById('imageUploadPasteInput');\n        if (element) {\n            element.focus();\n        }\n    };\n\n    return (\n        <Modal open={open} onClose={cancel} closeIcon={true} onClick={focusPasteInput}>\n            <Modal.Header>{props.t('insp.board.upload.select_image')}</Modal.Header>\n            <Modal.Content image={true} onPaste={handlePaste}>\n                <Dropzone onDrop={onFileSelected} disabled={!!file} accept={ACCEPTED_IMAGE_TYPES} maxFiles={1} maxSize={MAX_UPLOAD_SIZE} multiple={false}>\n                    {({getRootProps, getInputProps}) => (\n                        <section style={{ height: '410px', width: '100%' }}>\n                            <div {...getRootProps()} style={{ width: '100%', height: '100%', padding: '1px' }}>\n                                {(file && CROP_IMAGE_TYPES.includes(file.file.type)) && (\n                                    <ReactCrop\n                                        style={{ maxWidth: \"100%\", maxHeight: \"400px\" }}\n                                        imageStyle={{ maxWidth: \"100%\", maxHeight: \"400px\" }}\n                                        src={file.src as any}\n                                        crop={crop}\n                                        onChange={(newCrop: any, newPercentCrop: any) => setCrop(newPercentCrop)}\n                                        onImageLoaded={setImage}\n                                    />\n                                )}\n                                {(file && !CROP_IMAGE_TYPES.includes(file.file.type)) && (\n                                    <img src={URL.createObjectURL(file.file)} />\n                                )}\n                                {!file && (\n                                    <div>\n                                        <input id={'imageUploadPasteInput'} type={'text'} style={{ position: 'fixed', left: '-10000px' }} />\n                                        <input {...getInputProps()} />\n                                        <p>{props.t('insp.board.upload.drag_and_drop_info')}</p>\n                                    </div>\n                                )}\n                            </div>\n                        </section>\n                    )}\n                </Dropzone>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={cancel}\n                />\n                <Button\n                    primary={true}\n                    children={props.t('app.form.save')}\n                    onClick={upload}\n                    loading={uploading}\n                />\n            </Modal.Actions>\n        </Modal>\n    );\n};\n\nexport default withNamespaces()(MxGraphImageUpload);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Button, Dropdown, Icon, Input, InputOnChangeData, Modal} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\n\ninterface OwnProps {\n    openHandle: (handle: (open: boolean, currentLink: null|string) => void) => void;\n    onCancel: () => void;\n    onLinkChosen: (link: string) => void;\n}\n\ntype MxGraphTaskLinkProps = OwnProps & WithNamespaces;\n\nconst validateUrl = (url: string): boolean => {\n    if(url === \"\") {\n        return true;\n    }\n    return url.match(/^https?:\\/\\/.+$/) !== null;\n};\n\nconst MxGraphTaskLink = (props: MxGraphTaskLinkProps) => {\n    const [open, setOpen] = useState(false);\n    const [link, setLink] = useState('');\n    const [error, setError] = useState(false);\n\n    props.openHandle((openFromHandle, currentLink) => {\n        if(currentLink) {\n            setLink(currentLink);\n        } else {\n            setLink('');\n            setError(false);\n        }\n        setOpen(openFromHandle);\n    });\n\n    const handleChange = (e: React.SyntheticEvent, dProps: InputOnChangeData) => {\n        setLink(dProps.value as string);\n        setError(!validateUrl(dProps.value as string));\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n        if(e.keyCode === 13) {\n            chooseLink();\n        }\n    }\n\n    const cancel = () => {\n        props.onCancel();\n        resetModal();\n    };\n\n    const resetModal = () => {\n        setLink('');\n        setError(false);\n    };\n\n    const chooseLink = () => {\n        props.onLinkChosen(link);\n        resetModal();\n    }\n\n    return (\n        <Modal open={open} onClose={cancel} closeIcon={true}>\n            <Modal.Header>{props.t('insp.board.tasklink.headline')}</Modal.Header>\n            <Modal.Content>\n                <Input type=\"url\"\n                       onChange={handleChange}\n                       value={link}\n                       fluid={true}\n                       placeholder=\"https://issue.tracker.com/tasks/1234\"\n                       required={true}\n                       error={error}\n                       autoFocus={true}\n                       onKeyDown={handleKeyDown}\n                       icon={<Icon name=\"close\" link={true} onClick={resetModal} />}\n                />\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={cancel}\n                />\n                <Button\n                    primary={true}\n                    children={props.t('app.form.save')}\n                    onClick={chooseLink}\n                    disabled={error}\n                />\n            </Modal.Actions>\n        </Modal>);\n};\n\nexport default withNamespaces()(MxGraphTaskLink);","import { cond } from \"lodash\";\n//import {Device, OpenVidu, Publisher} from \"openvidu-browser\";\nimport * as React from 'react';\nimport {useEffect, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Button, DropdownProps, Form, Modal, Select} from \"semantic-ui-react\";\nimport {JitsiDevice as Device, JitsiTrack as Track} from \"./JitsiMeetInterfaces\";\n\ninterface OwnProps {\n    onDevicesSelected: (devices: {audio: string, video: string}) => void;\n    onCancel: () => void;\n    open: boolean;\n    loadingMeetingRoom: boolean;\n}\n\ntype JoinMeetingDialogProps = OwnProps & WithNamespaces;\n\nconst JoinMeetingDialog = (props: JoinMeetingDialogProps) => {\n    /* \n    const openViduRef = useRef<OpenVidu>();\n    const publisherRef = useRef<Publisher>();\n    */\n    const videoRef = useRef<HTMLVideoElement|null>(null);\n    const [videoDevices, setVideoDevices] = useState<Device[]>([]);\n    const [audioDevices, setAudioDevices] = useState<Device[]>([]);\n    const [selectedVideoDevice, setSelectedVideoDevice] = useState<string>('');\n    const [selectedAudioDevice, setSelectedAudioDevice] = useState<string>('');\n\n    // Jitsi - Start\n    const JitsiMeetJS = (window as any).JitsiMeetJS;\n    JitsiMeetJS.init(); \n\n    const audioRef = useRef<HTMLAudioElement|null>(null);\n    const newDeviceList = useRef<Device[]>([]);\n    const [tracklist, setTracklist] = useState<Track[]>([]);\n    const [localTrackMuted, setLocal] = useState<boolean|undefined>(true);\n    const localAudioTrack = useRef<Track>();\n    const localVideoTrack = useRef<Track>();\n\n    useEffect(() => {\n        let tmpSelectedVideoDevice:string = \"\";\n        let tmpSelectedAudioDevice:string = \"\";\n        JitsiMeetJS.mediaDevices.enumerateDevices((devices: any) => {\n            for (let device of devices) {\n                newDeviceList.current!.push({ label: device.label, deviceId: device.deviceId, kind: device.kind })\n            }\n            console.log(newDeviceList.current); \n            \n            const tmpSetVideoDevices = newDeviceList.current.filter(device => device.kind === 'videoinput');\n            const tmpSetAudioDevices = newDeviceList.current.filter(device => device.kind === 'audioinput');\n            setVideoDevices(tmpSetVideoDevices);\n            setAudioDevices(tmpSetAudioDevices);\n\n            tmpSelectedVideoDevice = newDeviceList.current!.find( d => d.kind === 'videoinput')!.deviceId;\n            setSelectedVideoDevice(tmpSelectedVideoDevice);\n            tmpSelectedAudioDevice = newDeviceList.current!.find( d => d.kind === 'audioinput' )!.deviceId;\n            setSelectedAudioDevice(tmpSelectedAudioDevice);\n        });\n\n        JitsiMeetJS.createLocalTracks({devices:['video', 'audio'], maxFps:30, facingMode:'user', })\n        .then((tracks: Track[]) => {\n            console.log(tracks);\n            let deviceIds = newDeviceList.current!.map(nd => nd.deviceId)\n            console.log(deviceIds);\n            let tmpTracklist = [];\n            for (let track of tracks) {\n                if (deviceIds.indexOf(track.deviceId) !== -1) {\n                    console.log(\"TRIGGER SUCCESFUL\");\n                    tmpTracklist.push(track);\n                }\n            }\n            setTracklist(tmpTracklist);\n\n            localVideoTrack.current = tmpTracklist.find(t => t.deviceId === tmpSelectedVideoDevice);\n            localAudioTrack.current = tmpTracklist.find(t => t.deviceId === tmpSelectedAudioDevice);\n\n            if (!localVideoTrack.current) {\n                console.log(\"\\n Video nicht definiert \\n\");\n                return;\n            }\n            if (!localAudioTrack.current) {\n                console.log(\"\\n Audio nicht definiert \\n\");\n                return;\n            }\n            console.log(localVideoTrack.current);\n            localVideoTrack.current!.attach(videoRef.current!);\n            localAudioTrack.current!.attach(audioRef.current!);\n        });\n    }, []);\n\n    useEffect(() => { // TODO : signal wahl übernehmen / updaten \n        if(!localVideoTrack.current || !localAudioTrack || selectedVideoDevice=='' || selectedAudioDevice==''){\n            return;\n        }\n        if(selectedVideoDevice != localVideoTrack.current!.deviceId){\n            JitsiMeetJS.createLocalTracks({devices:['video'], cameraDeviceId:selectedVideoDevice, maxFps:30, facingMode:'user'})\n            .then((tracks: Track[]) => {\n                localVideoTrack.current!.detach(videoRef.current!);\n                localVideoTrack.current = tracks[0];\n                tracks[0].attach(videoRef.current!);\n            });\n        }\n        if(selectedAudioDevice != localAudioTrack.current!.deviceId){\n            JitsiMeetJS.createLocalTracks({devices:['audio'], micDeviceId:selectedAudioDevice})\n            .then((tracks: Track[]) => {\n                localAudioTrack.current!.detach(audioRef.current!);\n                localAudioTrack.current = tracks[0];\n                tracks[0].attach(audioRef.current!);\n            });\n        }\n    }, [selectedVideoDevice, selectedAudioDevice])\n\n    const videoDeviceChoices = videoDevices.map(device => {\n        return {key: device.deviceId, value: device.deviceId, text: device.label}\n    });\n\n    const audoDeviceChoices = audioDevices.map(device => {\n        return {key: device.deviceId, value: device.deviceId, text: device.label}\n    }); \n    \n    const joinMeeting = () => {\n        if (props.loadingMeetingRoom) {\n            return;\n        }\n\n        props.onDevicesSelected({audio: selectedAudioDevice, video: selectedVideoDevice});\n    };\n\n    const toggleLocalTrackMuted = () => {\n        setLocal(!localTrackMuted);\n    };\n\n    return (\n        <Modal open={props.open} onClose={props.onCancel} closeIcon={true}>\n            <Modal.Header>Join Meeting</Modal.Header>\n            <Modal.Content>\n                <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\n                    <Form>\n                        <Form.Field>\n                            <label>Camera</label>\n                            <Select\n                                required={true}\n                                value={selectedVideoDevice}\n                                options={videoDeviceChoices}\n                                onChange={(e, data) => setSelectedVideoDevice(data.value as string)}\n                            />\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Microphone</label>\n                            <Select\n                                required={true}\n                                value={selectedAudioDevice}\n                                options={audoDeviceChoices}\n                                onChange={(e, data) => setSelectedAudioDevice(data.value as string)}\n                            />\n                        </Form.Field>\n                        <Button\n                            children={localTrackMuted ? 'Mikrofon testen' : 'Test Beenden'}\n                            onClick={toggleLocalTrackMuted}\n                            color={localTrackMuted ? 'facebook' : 'youtube'}\n                        />\n                    </Form>\n                    <div>\n                        <video\n                            autoPlay={true}\n                            width={320}\n                            muted={true}\n                            ref={videoRef}\n                        />\n                        <audio \n                            autoPlay={true}\n                            muted={localTrackMuted}\n                            ref={audioRef}\n                        />\n                    </div>\n                </div>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={props.onCancel}\n                />\n                <Button\n                    loading={props.loadingMeetingRoom}\n                    primary={true}\n                    children={'Join'}\n                    onClick={joinMeeting}\n                />\n            </Modal.Actions>\n        </Modal>);\n};\n\nexport default withNamespaces()(JoinMeetingDialog);\n","let client: WebSocket|null = null;\nlet reconnectTrys = 0;\nlet positionListener: (e: MessageEvent) => void = () => { /* no op */};\nlet currentUserId: string | null = null;\nlet currentSessionId: string | null = null;\nlet pingTimeout: number|null = null;\nlet heartbeatTimeout: number|null = null;\n\nenum MessageType {\n    GetUserPositions = 'GetUserPositions',\n    GetUserPositionsResponse = 'GetUserPositionsResponse',\n    UserPositionChanged = 'UserPositionChanged',\n}\n\ninterface GetUserPositions {\n    type: MessageType.GetUserPositions,\n    id: string;\n    sessionId: string;\n}\n\ninterface GetUserPositionsResponse {\n    type: MessageType.GetUserPositionsResponse,\n    users: {[userId: string]: {\n        position: {left: number, top: number},\n    }}\n}\n\ninterface GetUserPositions {\n    type: MessageType.GetUserPositions,\n}\n\ninterface UserPositionChanged {\n    type: MessageType.UserPositionChanged,\n    id: string;\n    sessionId: string;\n    left: number;\n    top: number;\n}\n\ntype Message = GetUserPositions | GetUserPositionsResponse | UserPositionChanged;\n\nconst isConnected = () => {\n    return client && client.readyState === client.OPEN;\n}\n\nconst ping = () => {\n    if(client && isConnected() && currentUserId && currentSessionId) {\n        client.send(JSON.stringify({type: MessageType.GetUserPositions, id: currentUserId, sessionId: currentSessionId}));\n    } else {\n        reconnectTrys++;\n\n        if(client) {\n            client.close();\n        }\n\n        console.log(\"[vidu] trying to reconnect to socket. Attempt: \" + reconnectTrys);\n        connect();\n    }\n\n    pingTimeout = window.setTimeout(() => {\n        ping();\n    }, 30000);\n}\n\nconst heartbeat = () => {\n    if(heartbeatTimeout) {\n        window.clearTimeout(heartbeatTimeout);\n    }\n\n    heartbeatTimeout = window.setTimeout(() => {\n        if(client && isConnected()) {\n            console.log(\"[vidu] Closing connection due to heartbeat timeout\");\n            client.close()\n        }\n        // ping interval + latency\n    }, 30000 + 1000);\n}\n\n\n\nconst connect = () => {\n    client = new WebSocket('wss://mephisto-video.inseciacloud.com:3001');\n    //client = new WebSocket('wss://localhost:3001');\n\n    client.onopen = (evt) => {\n        console.log(\"[vidu] heartbeat triggered on open\")\n        heartbeat();\n        reconnectTrys = 0;\n    }\n    client.onclose = (evt) => {\n        if(heartbeatTimeout) {\n            console.log(\"[vidu] heartbeat timeout cleared on close\")\n            window.clearTimeout(heartbeatTimeout);\n        }\n    }\n\n    client.onmessage = positionListener;\n}\n\nconnect();\n\n\nconst WebSocketConnection = {\n    sendPositionUpdate: (id: string, sessionId: string, left: number, top: number) => {\n        if(client && isConnected()) {\n            client.send(JSON.stringify({ type: 'UserPositionChanged', id, sessionId, left, top, }));\n        }\n    },\n    listenForPositionUpdates: (id: string, sessionId: string, onChange: (id: string, position: { left: number, top: number }) => void) => {\n        currentUserId = id;\n        currentSessionId = sessionId;\n\n        positionListener = (e) => {\n            const data: Message = JSON.parse(e.data);\n\n            switch (data.type) {\n                case MessageType.GetUserPositionsResponse:\n                    console.log(\"[vidu] Got user positions from socket server: \", data);\n                    heartbeat();\n\n                    Object.keys(data.users).forEach(userId => {\n                        if(id === userId) {\n                            return;\n                        }\n\n                        const {position} = data.users[userId];\n\n                        onChange(userId, position);\n                    })\n                    break;\n                case MessageType.UserPositionChanged:\n                    onChange(data.id, { left: data.left, top: data.top });\n                    break;\n            }\n        }\n\n\n        if(client) {\n            client.onmessage = positionListener;\n            ping();\n        }\n    },\n    stopListeningForPositionUpdates: () => {\n        if(pingTimeout) {\n            window.clearTimeout(pingTimeout);\n        }\n\n        currentUserId = null;\n        currentSessionId = null;\n    }\n};\n\nexport default WebSocketConnection;","import React, {useEffect, useRef, useState} from \"react\";\nimport {Image} from \"semantic-ui-react\";\nimport WebSocketConnection from \"../../../api/ConfiguredJitsiSocket\";\nimport {JitsiUser} from \"../../model/JitsiUser\";\nimport './JitsiVideo.css';\n\nexport interface Position {\n    left: number;\n    top: number;\n}\n\nexport interface MousePoint {\n    x: number;\n    y: number;\n}\n\nexport type NewPosition = Position;\n\nexport interface PositionChange {\n    startPositionAvatar: Position,\n    startPositionMouse: MousePoint,\n    currentPositionMouse: MousePoint,\n}\n\ninterface JitsiVideoProps {\n    user: JitsiUser;\n    sessionId: string; \n    isLocalUser: boolean;\n    onPositionChange?: (change: PositionChange) => NewPosition;\n    volume: number;\n    /* isSpeaking: boolean; */\n    isAnyMegaphoneActive: boolean;\n}\n\nconst defaultPositionChange: PositionChange = {\n    startPositionAvatar: {left: 0, top: 0},\n    startPositionMouse: {x: 0, y: 0},\n    currentPositionMouse: {x: 0, y: 0}\n}\n\nconst emojiIconSettings: any =  { \n    \"thumbs up\": \"green thumbs up thumbUp-indicator\",\n    \"thumbs down\": \"red thumbs down thumbDown-indicator\",\n    \"beer\": \"yellow beer beer-indicator\",\n}\n\nconst JitsiVideo = (props: JitsiVideoProps) => {\n    const videoRef = useRef<any>(null);\n    const audioRef = useRef<any>(null);\n    const [isDragging, setIsDragging] = useState<boolean>();\n    const positionChange = useRef<PositionChange>(defaultPositionChange);\n    const [isFocused, setIsFocused] = useState<boolean>(false);\n    \n    const changePosition = (x: number, y: number) => {\n        positionChange.current.currentPositionMouse.x = x;\n        positionChange.current.currentPositionMouse.y = y;\n\n        if(props.onPositionChange) {\n            const newPosition = props.onPositionChange(positionChange.current);\n            console.log(\"JitsilocalPosition : Send newPosition\", positionChange, newPosition, props.isLocalUser);\n            WebSocketConnection.sendPositionUpdate(props.user.audioTrack!.getParticipantId(), props.sessionId, newPosition.left, newPosition.top);\n        }\n    }\n    \n    useEffect(() => { // if != null\n        if(props.user.videoTrack == null || props.user.audioTrack == null){return};\n        props.user.videoTrack!.attach(videoRef.current);\n        if(!props.isLocalUser){\n            props.user.audioTrack!.attach(audioRef.current);\n        }\n    }, [props.user.audioTrack, props.user.videoTrack]);\n\n    useEffect(() => {\n        console.log(\"jitsivolume : volume changed => changes \", props.volume)\n        if (!videoRef.current) {\n            return;\n        }\n\n        if(props.isLocalUser) {\n            return;\n        }\n\n        let volume = props.volume * (props.isAnyMegaphoneActive ? 0.7 : 1.0);\n        if (props.user.megaphoneOn) {\n            console.log(\"Update_remote_user Megaphone on and Volume should be 1\");\n            volume = 1.0;\n        }\n        \n        console.log(\"Update_remote_user Volume \", volume);\n        (audioRef.current as any).volume = volume;\n        \n        if(volume === 0 && !(videoRef.current as any).paused) {\n            console.log(\"jitsipauseplay : pause \",(videoRef.current as any).paused, volume, videoRef.current);\n            (videoRef.current as any).pause();\n            (audioRef.current as any).pause();\n        }\n\n        if(volume > 0 && (videoRef.current as any).paused) {\n            console.log(\"jitsipauseplay : play\",(videoRef.current as any).paused, volume, videoRef.current);\n            (videoRef.current as any).play();\n            (audioRef.current as any).play();\n        }\n    }, [props.volume, props.user.megaphoneOn, props.isAnyMegaphoneActive]);\n\n    useEffect(() => {\n        const mouseUpListener = () => {\n            setIsDragging(false);\n        }\n\n        const mouseMoveListener = (e: MouseEvent) => {\n            if (props.isLocalUser && isDragging) {\n                changePosition(e.clientX, e.clientY);\n            }\n        }\n\n        const touchMoveListener = (e: TouchEvent) => {\n            if (props.isLocalUser && isDragging) {\n                changePosition(e.touches[0].clientX, e.touches[0].clientY);\n            }\n        }\n\n        document.addEventListener('mouseup', mouseUpListener);\n        document.addEventListener('touchend', mouseUpListener);\n        document.addEventListener('mousemove', mouseMoveListener);\n        document.addEventListener('touchmove', touchMoveListener);\n\n        return () => {\n            document.removeEventListener('mouseup', mouseUpListener);\n            document.removeEventListener('touchend', mouseUpListener);\n            document.removeEventListener('mousemove', mouseMoveListener);\n            document.removeEventListener('touchmove', touchMoveListener);\n        }\n    }) \n   \n\n\n    const applyFocusedSize = (size: number): number => {\n        return isFocused? size * 2 : size;\n    }\n    const fullSize = 150;\n    const currentSize = applyFocusedSize(props.isLocalUser? fullSize : 50 + (props.user.megaphoneOn? 100 : (props.volume * 100)));\n    const borderRadius = Math.round(currentSize / 2);\n    const showVideo = props.user.cameraOn && (props.isLocalUser || props.volume > 0 || props.user.megaphoneOn);\n    const darkenAvatar = !props.isLocalUser && props.volume === 0 && !props.user.megaphoneOn;\n    const toggleIsFocused = () => {\n        setIsFocused(!isFocused);\n        console.log(\"focus toggled\");\n    }\n\n    return (\n        <div\n            style={{\n                width: currentSize,\n                height: currentSize,\n                borderRadius,\n                position: 'absolute',\n                left: props.user.position.left - currentSize / 2,\n                top: props.user.position.top - currentSize / 2,\n                pointerEvents: 'auto',\n                cursor: props.isLocalUser? \"move\" : \"default\",\n                zIndex: props.isLocalUser? 10 : 3,\n                WebkitTransform: 'translateZ(0)',\n            }}\n\n            onMouseDown={(e) => {\n                    positionChange.current.startPositionAvatar = props.user.position;\n                    positionChange.current.startPositionMouse = {\n                        x: e.clientX,\n                        y: e.clientY,\n                    }\n                    setIsDragging(true);\n                }\n            }\n\n            onTouchStart={(e) => {\n                positionChange.current.startPositionAvatar = props.user.position;\n                positionChange.current.startPositionMouse = {\n                    x: e.touches[0].clientX,\n                    y: e.touches[0].clientY,\n                }\n                setIsDragging(true);\n            }}\n\n            onDoubleClick={toggleIsFocused}\n        >\n            <div style={{\n                width: currentSize,\n                height: currentSize,\n                borderRadius,\n                overflow: 'hidden',\n                backgroundColor: '#9cc8f5',\n                pointerEvents: 'auto',\n                ...(currentSize>50? (props.user.micOn ? {border: '5px solid #9cc8f5'} : {border: '5px solid #666666'}) : { border: '5px solid #AAAAAA'} ),\n                WebkitTransform: 'translateZ(0)',\n                zIndex: props.isLocalUser? 10 : 3,\n            }}>\n                {/*\n                 // @ts-ignore */}\n                <video\n                    autoPlay={true}\n                    disablePictureInPicture={true /* Not working in FF .... */}\n                    ref={videoRef}\n                    muted={props.isLocalUser}\n                    style={{ width: currentSize, height: currentSize, objectFit: 'cover', objectPosition: 'center', pointerEvents: 'auto', display: showVideo? 'block' : 'none', zIndex: props.isLocalUser? 9 : 2 }}\n                />\n                <audio \n                    autoPlay={true}\n                    muted={props.isLocalUser}\n                    ref={audioRef}\n                />\n                {!showVideo && <Image //!showVideo &&\n                    src={props.user.avatar}\n                    avatar={true}\n                    verticalAlign=\"middle\"\n                    style={{\n                        width: currentSize,\n                        height: currentSize,\n                        objectFit: 'cover',\n                        objectPosition: 'center',\n                        pointerEvents: 'none',\n                        filter: darkenAvatar? 'brightness(0.8)' : 'none'\n                    }}\n                />}\n            </div>\n            <div style={{ position: \"absolute\", bottom: '-26px', left: 0, width: '100%', textAlign: 'center', fontSize: '16px', pointerEvents: 'auto' }}>{props.user.name}</div>\n            \n            <i className={'icon bullhorn megaphone-indicator' + (props.user.megaphoneOn ? ' active' : '')} />\n            \n            <i className={'green icon hand paper handUp-indicator' + (props.user.handUpOn ? ' active' : '')} />\n            \n            <i className={'icon ' + (emojiIconSettings[props.user.showIconName]) + ' ' + (props.user.emojiOn ? ' active' : '')} />\n        \n        </div>\n    );\n};\n\nexport default JitsiVideo;\n","import React from \"react\";\nimport { JitsiUser as User } from \"../../model/JitsiUser\";\nimport {JitsiDevice as Device, JitsiTrack as Track, JitsiConnection as Connection, JitsiConference as Conference} from \"./JitsiMeetInterfaces\";\nimport JitsiVideo, {NewPosition, PositionChange}  from \"./JitsiVideo\";\n\nimport WebSocketConnection from \"../../../api/ConfiguredJitsiSocket\";\nimport {makeGetSidebarSelector} from \"../../../Layout/selectors/sidebar\";\nimport {useSelector} from \"react-redux\";\nimport {useGraph} from \"../../hooks/useGraph\";\nimport {Graph, GraphPoint} from \"../../model/Graph\";\nimport { connectSocket } from \"../../../Socket/actions/actions\";\n\n//import OpenViduScreenShare from \"./OpenViduScreenShare\";\n\ninterface JitsiMeetingProps {\n    sessionId: string;\n    id: string;\n    name: string;\n    avatar: string;\n    initialPosition: { left: number, top: number };\n    videoDevice?: string;\n    audioDevice?: string;\n    graph:Graph;\n    sidebar:any;\n    timeoutRef:any;\n}\n\ninterface JitsiMeetingState {\n    localUser:User;\n    remoteUsers:User[];\n    graphTranslate:GraphPoint;\n    graphScale:number;\n}\n\ninterface RemotePositions {\n    [userId: string]: { position: { left: number, top: number } }\n}\n\nconst JitsiMeetJS = (window as any).JitsiMeetJS;\n\n\nclass JitsiMeeting extends React.Component<JitsiMeetingProps> {\n    private connection?:Connection;\n    private room?:Conference;\n    private localTracks?:Track[];\n\n    public state:JitsiMeetingState = {\n        localUser:{\n            id: this.props.id,\n            name: this.props.name,\n            avatar: this.props.avatar,\n            position: this.props.initialPosition,\n\n            showIconName: \"\",\n            cameraOn: true,\n            micOn: true,\n            megaphoneOn: false,\n            handUpOn: false,\n            emojiOn: false,\n        },\n        remoteUsers:[],\n        graphTranslate:{x:0,y:0},\n        graphScale:1,\n    };\n\n    constructor (props:JitsiMeetingProps) {\n        super(props);\n \n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.componentDidUpdate = this.componentDidUpdate.bind(this);\n        this.componentWillUnmount = this.componentWillUnmount.bind(this);\n        this.onConnectionSuccess = this.onConnectionSuccess.bind(this);\n        this.onConnectionFailed = this.onConnectionFailed.bind(this);\n        this.onConnectionDisconnect = this.onConnectionDisconnect.bind(this);\n        this.onDeviceListChanged = this.onDeviceListChanged.bind(this);\n        this.onConferenceJoined = this.onConferenceJoined.bind(this);\n        this.onLocalTrack = this.onLocalTrack.bind(this);\n        this.onRoomTrackAdded = this.onRoomTrackAdded.bind(this);\n        this.onRoomTrackRemoved = this.onRoomTrackRemoved.bind(this);\n        this.isAnyMegaphoneActive = this.isAnyMegaphoneActive.bind(this);\n        this.updateRemoteUser = this.updateRemoteUser.bind(this);\n        this.handleLocalUserPositionChanged = this.handleLocalUserPositionChanged.bind(this);\n        this.renderRemoteTracks = this.renderRemoteTracks.bind(this);\n        this.toggleCamera = this.toggleCamera.bind(this);\n        this.toggleMic = this.toggleMic.bind(this);\n        this.toggleMegaphone = this.toggleMegaphone.bind(this);\n        this.toggleHandUp = this.toggleHandUp.bind(this);\n        this.toggleEmoji = this.toggleEmoji.bind(this);\n        this.render = this.render.bind(this);\n    }\n\n    async componentDidMount() {\n        JitsiMeetJS.init();\n\n        console.log(\"jitsitest : MOUNTED\");\n        console.log(\"jitsitestvariables : id\", this.state.localUser.id, this.props.id, this.props.sessionId);\n        console.log(\"jitsitest : MOUNTED\");\n\n        this.localTracks = await JitsiMeetJS.createLocalTracks(\n            { devices: [ 'audio', 'video' ],\n              cameraDeviceId: this.props.videoDevice,\n              micDeviceId: this.props.audioDevice}\n        );\n        \n        const options = {\n            hosts: {\n                domain: 'jitsi-video.inseciacloud.com',\n                muc: 'muc.jitsi-video.inseciacloud.com'\n            },\n            bosh: 'https://bosh.jitsi-video.inseciacloud.com:5280/http-bind'\n        };\n        this.connection = new JitsiMeetJS.JitsiConnection(null, null, options);\n        \n        console.log(\"jitsitest : ConectionSuccess\", this.connection);\n        \n        this.connection!.addEventListener(\n            JitsiMeetJS.events.connection.CONNECTION_ESTABLISHED,\n            this.onConnectionSuccess);\n        this.connection!.addEventListener(\n            JitsiMeetJS.events.connection.CONNECTION_FAILED,\n            this.onConnectionFailed);\n        this.connection!.addEventListener(\n            JitsiMeetJS.events.connection.CONNECTION_DISCONNECTED,\n            this.onConnectionDisconnect);\n        \n        JitsiMeetJS.mediaDevices.addEventListener(\n            JitsiMeetJS.events.mediaDevices.DEVICE_LIST_CHANGED,\n            this.onDeviceListChanged);\n\n        this.connection!.connect();\n        \n        this.onLocalTrack();        \n        console.log(\"JitsiPosition : Start before websocket listen\");\n        WebSocketConnection.listenForUpdates(\n            this.props.id, this.props.sessionId, this.updateRemoteUser\n        );\n        console.log(\"JitsiPosition : Start after\");\n\n        ////////////// \n        const scale = this.props.graph.getCurrentScale();\n        const translatedPoint = {\n            left: (-1 * this.props.graph.getCurrentTranslate().x) + \n                    (this.props.initialPosition.left / scale),\n            top: (-1 * this.props.graph.getCurrentTranslate().y) + \n                    (this.props.initialPosition.top / scale),\n        }\n        console.log(\"jitsigraph local user\", translatedPoint, scale);\n        this.setState({\n            localUser: {\n                ...this.state.localUser, \n                position: translatedPoint,\n            }\n        });\n        console.log(\"jitsigraph local user\", this.props.graph.getCurrentScale(), this.props.graph.getCurrentTranslate());\n        const panningListener = (translate: GraphPoint) => {\n            this.setState({\n                graphTranslate:{x: translate.x, y: translate.y}\n            });\n        };\n\n        const zoomListener = (scale: number, translate: GraphPoint) => {\n            this.setState({\n                graphScale:scale,\n                graphTranslate:translate\n            });\n        };\n\n        if(this.props.graph) {\n            const translate = this.props.graph.getCurrentTranslate();\n            this.setState({\n                graphTranslate: {x: translate.x, y: translate.y},\n                graphScale: this.props.graph.getCurrentScale(),\n            });\n            this.props.graph.onPanning(panningListener);\n            this.props.graph.onZoom(zoomListener);\n        }\n\n        return () => {\n            if(this.props.graph) {\n                this.props.graph.offPanning(panningListener);\n                this.props.graph.offZoom(zoomListener);\n            }\n        }\n    }\n\n    componentDidUpdate (prevProps:JitsiMeetingProps) { // TODO ERROR component did update if's never trigger (componentDidMount is enought? as it works)\n        console.log(\"number of componentDidUpdate\", this.props.graph !== prevProps.graph)\n        // Component update on changed value of --- graph --- \n        if(this.props.graph !== prevProps.graph) { // || !!this.state.localUser !== !!this.state.localUser ) {\n            const scale = this.props.graph.getCurrentScale();\n            const translatedPoint = {\n                left: (-1 * this.props.graph.getCurrentTranslate().x) + \n                      (this.props.initialPosition.left / scale),\n                top: (-1 * this.props.graph.getCurrentTranslate().y) + \n                     (this.props.initialPosition.top / scale),\n            }\n            console.log(\"jitsigraph local user\", translatedPoint, scale);\n            this.setState({\n                localUser: {\n                    ...this.state.localUser, \n                    position: translatedPoint,\n                }\n            });\n        }\n        if (this.props.graph !== prevProps.graph) {\n            console.log(\"jitsigraph local user\", this.props.graph.getCurrentScale(), this.props.graph.getCurrentTranslate());\n            const panningListener = (translate: GraphPoint) => {\n                this.setState({\n                    graphTranslate:{x: translate.x, y: translate.y}\n                });\n            };\n    \n            const zoomListener = (scale: number, translate: GraphPoint) => {\n                this.setState({\n                    graphScale:scale,\n                    graphTranslate:translate\n                });\n            };\n    \n            if(this.props.graph) {\n                const translate = this.props.graph.getCurrentTranslate();\n                this.setState({\n                    graphTranslate: {x: translate.x, y: translate.y},\n                    graphScale: this.props.graph.getCurrentScale(),\n                });\n                this.props.graph.onPanning(panningListener);\n                this.props.graph.onZoom(zoomListener);\n            }\n    \n            return () => {\n                if(this.props.graph) {\n                    this.props.graph.offPanning(panningListener);\n                    this.props.graph.offZoom(zoomListener);\n                }\n            }\n        }\n    \n        // Component update on changed value of --- ... --- \n    }\n\n    componentWillUnmount() {\n        WebSocketConnection.stopListeningForPositionUpdates();\n    }\n\n    onConnectionSuccess() {\n        console.log(\"jitsitest : ConectionSuccess\", this.connection);\n        const confOptions = {\n            openBridgeChannel: true\n        };\n        console.log(this.connection);\n\n        this.room = this.connection!.initJitsiConference(\"swarply_\" + this.props.sessionId, confOptions);\n        this.room.on(JitsiMeetJS.events.conference.CONFERENCE_JOINED, this.onConferenceJoined);\n        \n        this.room.on(JitsiMeetJS.events.conference.TRACK_ADDED, this.onRoomTrackAdded)\n        this.room.on(JitsiMeetJS.events.conference.TRACK_REMOVED, this.onRoomTrackRemoved)\n        /* \n        this.room.on(JitsiMeetJS.events.conference.USER_JOINED, () => {console.log('user join');});\n        this.room.on(JitsiMeetJS.events.conference.USER_LEFT, this.onUserLeft); \n        */\n        this.room.join();\n    }\n\n    onConnectionFailed() {\n        console.log(\"jitsitest : ConnectionFailed\");\n    }\n    onConnectionDisconnect() {\n        console.log(\"jitsitest : ConnectionDisconnect\");\n    }\n    onDeviceListChanged() {\n        console.log(\"jitsitest : DevicelistChanged\");\n    }\n\n\n    /////////////\n    onConferenceJoined() {\n        console.log(\"jitsitest : ConferenzJoined\");\n        \n        this.localTracks!.forEach(track => {\n            this.room!.addTrack(track);\n        })\n    }\n\n    onLocalTrack() {\n        console.log(\"jitsitest : LocalTracks\", this.localTracks);\n        if(!this.localTracks){return}\n        if(this.localTracks![0].type === 'video'){\n            this.setState({\n                localUser: {\n                    ...this.state.localUser, \n                    videoTrack: this.localTracks[0],\n                    audioTrack: this.localTracks[1],\n                }\n            });\n        } else {\n            this.setState({\n                localUser: {\n                    ...this.state.localUser, \n                    videoTrack: this.localTracks[1],\n                    audioTrack: this.localTracks[0],\n                }\n            });\n        }\n    }\n\n    onRoomTrackAdded(track:Track) {\n        if (track.isLocal() === true) {return}\n        console.log(\"jitsitest : RemoteTracks added\", track.getType(), track);\n\n        let tmpUser = this.state.remoteUsers.find(user => user.id === track.getParticipantId());\n        if(tmpUser){\n            let userIndex = this.state.remoteUsers.indexOf(tmpUser!);\n            let items = [...this.state.remoteUsers];\n            if(track.getType() === 'audio'){\n                let item = {\n                    ...items[userIndex],\n                    audioTrack: track,\n                }\n                items[userIndex] = item;\n                this.setState({remoteUsers: items});\n                console.log(\"JitsiUser : \",items)\n            } else if(track.getType() === 'video'){\n                let item = {\n                    ...items[userIndex],\n                    videoTrack: track,\n                }\n                items[userIndex] = item;\n                this.setState({remoteUsers: items});\n                console.log(\"JitsiUser : \",items)\n            } else {\n                console.log(\"jitsitest: ERROR: trackType undefined\")\n            }\n        } else {\n            // TODO\n            let left = 200 + (Math.random() * 100);\n            let top = 200 + (Math.random() * 100);\n            // --TODO\n            if(track.getType() === 'audio'){\n                this.setState({\n                    remoteUsers: [\n                        ...this.state.remoteUsers,\n                        {\n                            id: track.getParticipantId(),\n                            name: this.props.name,\n                            avatar: this.props.avatar,\n                            position: {left:left,top:top},\n                            showIconName: \"\",\n                            audioTrack: track,\n                            cameraOn: true,\n                            micOn: true,\n                            megaphoneOn: false,\n                            handUpOn: false,\n                            emojiOn: false,\n                        }\n                    ]\n                });\n            } else if(track.getType() === 'video'){\n                this.setState({\n                    remoteUsers: [\n                        ...this.state.remoteUsers,\n                        {\n                            id: track.getParticipantId(),\n                            name: this.props.name,\n                            avatar: this.props.avatar,\n                            position: {left:left,top:top},\n                            showIconName: \"\",\n                            videoTrack: track,\n                            cameraOn: true,\n                            micOn: true,\n                            megaphoneOn: false,\n                            handUpOn: false,\n                            emojiOn: false,\n                        }\n                    ]\n                });\n            } else {\n                console.log(\"jitsitest : Error track undefined \")\n            }\n        }\n        console.log(\"jitsitest : remoteUsers:\", this.state.remoteUsers);\n        // syncronise old remote users while joining\n        WebSocketConnection.sendPositionUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, this.state.localUser.position.left, this.state.localUser.position.top);\n    }\n\n    onRoomTrackRemoved(track:Track) {\n        if (track.isLocal() === true) {return}\n\n        let tmpUser = this.state.remoteUsers.find(user => user.id === track.getParticipantId());\n        if(tmpUser){\n            this.setState({\n                remoteUsers: this.state.remoteUsers.filter(user => user.id != track.getParticipantId())\n            });\n        }\n        console.log(\"jitsitest : remoteUsers:\", this.state.remoteUsers);\n    }\n    \n    isAnyMegaphoneActive():boolean{\n        return (\n            this.state.localUser && this.state.localUser.megaphoneOn ||\n            this.state.remoteUsers.find(remoteUser => remoteUser.megaphoneOn) != undefined\n        )\n    };\n\n     //////////////////////////////////////\n    // websocket relatet comunication and handling\n    updateRemoteUser(id: string, data: \n            { left: number, top: number } | \n            {micOn: boolean, megaphoneOn: boolean, cameraOn: boolean, handUpOn: boolean, emojiOn: boolean, showIconName: string}\n        ){\n        if(data.hasOwnProperty(\"left\")){\n            console.log(\"Update_remote_user updateRemoteUser left\");\n            this.updateRemoteUserPosition(id, data as any);\n        } else if(data.hasOwnProperty(\"micOn\")){\n            console.log(\"Update_remote_user updateRemoteUser micon\");\n            this.updateRemoteUserStatus(id, data as any);\n        }\n        \n        /* if (id.includes('screen_')) {\n            // @todo screen position update. Relevant for us?\n        } else {\n\n        } */\n    }\n    updateRemoteUserPosition(id: string, position: { left: number, top: number }) {\n        console.log(\"JitsiPosition : test\", position, id, this.state.remoteUsers);\n        let tmpUser = this.state.remoteUsers.find(user => user.id === id);\n        console.log(\"JitsiPosition : 1. UpdateRemoteUserPosition\", tmpUser);\n        if(tmpUser){\n            let userIndex = this.state.remoteUsers.indexOf(tmpUser);\n            let items = [...this.state.remoteUsers];\n            let item = {\n                ...items[userIndex],\n                position: position,\n            }\n            items[userIndex] = item;\n            console.log(\"jitsitestremoteposition : \", items, this.state.remoteUsers);\n            this.setState({remoteUsers: items});\n            console.log(\"jitsitestremoteposition : \", this.state.remoteUsers);\n        }\n    }\n    updateRemoteUserStatus(id: string, data: {micOn: boolean, megaphoneOn: boolean, cameraOn: boolean, handUpOn: boolean, emojiOn: boolean, showIconName: string}){\n        console.log(\"Update_remote_user  \");\n        console.log(\"Update_remote_user  \", id, data);\n        console.log(\"Update_remote_user_Status\", this.state.remoteUsers);\n        let tmpUser = this.state.remoteUsers.find(user => user.id === id);\n        if(tmpUser){\n            let userIndex = this.state.remoteUsers.indexOf(tmpUser!);\n            let items = [...this.state.remoteUsers];\n            let item = {\n                ...items[userIndex],\n                micOn: data.micOn,\n                megaphoneOn: data.megaphoneOn,\n                cameraOn: data.cameraOn,\n                handUpOn: data.handUpOn,\n                emojiOn: data.emojiOn,\n                showIconName: data.showIconName\n            }\n            items[userIndex] = item;\n            this.setState({remoteUsers: items});\n            console.log(\"update_remote_user_Complete \",this.state.remoteUsers)\n        }\n    }\n\n    handleLocalUserPositionChanged(positionChange: PositionChange): NewPosition{\n        \n        console.log(\"JitsilocalPosition : UpdatelocalUserPosition\", positionChange);\n        const scale = this.props.graph.getCurrentScale();\n\n        const mouseDeltaX = positionChange.currentPositionMouse.x - positionChange.startPositionMouse.x;\n        const mouseDeltaY = positionChange.currentPositionMouse.y - positionChange.startPositionMouse.y;\n\n        const newPosition: NewPosition = {\n            left: positionChange.startPositionAvatar.left + (mouseDeltaX / scale),\n            top: positionChange.startPositionAvatar.top + (mouseDeltaY / scale),\n        }\n\n        if(this.state.localUser) {\n            this.setState({\n                localUser: {\n                    ...this.state.localUser, \n                    position: newPosition,\n                }\n            })\n        }\n        return newPosition;\n    };\n\n     //////////////////////////////////////\n    // Start of UI, and UI interactions\n    toggleCamera() {\n        if (!this.state.localUser|| !this.state.localUser.videoTrack) {\n            return;\n        }\n\n        const isCameraNowActive = !this.state.localUser.cameraOn;\n        if(isCameraNowActive) {\n            this.state.localUser.videoTrack.unmute();\n        } else {\n            this.state.localUser.videoTrack.mute();\n        }\n        this.setState({\n            localUser: {\n                ...this.state.localUser,\n                cameraOn: isCameraNowActive,\n            }\n        })\n        WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n            {\n                cameraOn:isCameraNowActive, \n                micOn:this.state.localUser.micOn, \n                megaphoneOn:this.state.localUser.megaphoneOn, \n                handUpOn:this.state.localUser.handUpOn, \n                emojiOn:this.state.localUser.emojiOn, \n                showIconName:this.state.localUser.showIconName\n            } \n        );\n    };\n\n    toggleMic() {\n        if (!this.state.localUser || !this.state.localUser.audioTrack) {\n            return;\n        }\n        const isMicNowActive = this.state.localUser.audioTrack.isMuted();\n        if(isMicNowActive) {\n            this.state.localUser.audioTrack.unmute();\n        } else {\n            this.state.localUser.audioTrack.mute();\n        }\n        this.setState({\n            localUser: {\n                ...this.state.localUser,\n                micOn: isMicNowActive,\n            }\n        })\n        WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n        {\n            cameraOn:this.state.localUser.cameraOn, \n            micOn:isMicNowActive, \n            megaphoneOn:this.state.localUser.megaphoneOn, \n            handUpOn:this.state.localUser.handUpOn, \n            emojiOn:this.state.localUser.emojiOn, \n            showIconName:this.state.localUser.showIconName\n        } \n        );\n    };\n\n    toggleMegaphone() {\n        if (!this.state.localUser) {\n            return;\n        }\n\n        const isMegaphoneNowActive = !this.state.localUser.megaphoneOn;\n        this.setState({\n            localUser: {\n                ...this.state.localUser,\n                megaphoneOn: isMegaphoneNowActive,\n            }\n        })\n        WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n        {\n            cameraOn:this.state.localUser.cameraOn, \n            micOn:this.state.localUser.micOn, \n            megaphoneOn:isMegaphoneNowActive, \n            handUpOn:this.state.localUser.handUpOn, \n            emojiOn:this.state.localUser.emojiOn, \n            showIconName:this.state.localUser.showIconName\n        } \n        );\n    };\n\n    toggleHandUp() {\n        if (!this.state.localUser) {\n            return;\n        }\n\n        const isHandUpNowActive = !this.state.localUser.handUpOn;\n        this.setState({\n            localUser: {\n                ...this.state.localUser,\n                handUpOn: isHandUpNowActive,\n            }\n        })\n        WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n        {\n            cameraOn:this.state.localUser.cameraOn, \n            micOn:this.state.localUser.micOn, \n            megaphoneOn:this.state.localUser.megaphoneOn, \n            handUpOn:isHandUpNowActive, \n            emojiOn:this.state.localUser.emojiOn, \n            showIconName:this.state.localUser.showIconName\n        }  \n        );\n    };\n\n    toggleEmoji(iconName: string) {\n        if (!this.state.localUser) {\n            return;\n        }\n        const iconInfo = (this.state.localUser.showIconName === '') ? iconName : '';\n        const isEmojiNowActive = !this.state.localUser.emojiOn;\n\n        this.setState({\n            localUser: {\n                ...this.state.localUser,\n                emojiOn: isEmojiNowActive,\n                showIconName: iconInfo,\n            }\n        })\n        WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n        {\n            cameraOn:this.state.localUser.cameraOn, \n            micOn:this.state.localUser.micOn, \n            megaphoneOn:this.state.localUser.megaphoneOn, \n            handUpOn:this.state.localUser.handUpOn, \n            emojiOn:isEmojiNowActive, \n            showIconName:iconName\n        }  \n        );\n\n        clearTimeout(this.props.timeoutRef.current);\n        this.props.timeoutRef.current = window.setTimeout(() => {\n            this.setState({\n                localUser: {\n                    ...this.state.localUser,\n                    emojiOn: false,\n                    showIconName: \"\",\n                }\n            })\n            WebSocketConnection.sendStatusUpdate(this.state.localUser.audioTrack!.getParticipantId(), this.props.sessionId, \n            {\n                cameraOn:this.state.localUser.cameraOn, \n                micOn:this.state.localUser.micOn, \n                megaphoneOn:this.state.localUser.megaphoneOn, \n                handUpOn:this.state.localUser.handUpOn, \n                emojiOn:false, \n                showIconName:\"\"\n            }  \n            );\n        }, 3000);\n    };\n\n    \n     //////////////////////////////////////\n    // render of remote video components\n    renderRemoteTracks() {\n        // if(!this.state.remoteUsers){return}\n        console.log(\"jitsitestVariables : \", this.state.localUser, this.props.id, this.props.sessionId, this.state.remoteUsers);\n        return this.state.remoteUsers.map((user) => \n            <div id={\"videoAvatar_\"+user.id}>\n                {<JitsiVideo\n                    key={user.id}\n                    user={user}\n                    isLocalUser={false}\n                    volume={ \n                        !this.state.localUser ? 0 : Math.max(\n                            Math.min(\n                                (700 - Math.sqrt(\n                                Math.pow((user.position.top - this.state.localUser.position.top), 2) +\n                                Math.pow((user.position.left - this.state.localUser.position.left), 2)\n                                )) / 500, \n                                1\n                            )\n                            , 0\n                        ) \n                    }\n                    sessionId={this.props.sessionId}\n                    isAnyMegaphoneActive={this.isAnyMegaphoneActive()}\n                />}\n            </div>\n        )\n    }\n\n    render() {\n        console.log(\"jitsirender : test \");\n        return (\n            <div className=\"diagram-overlay\" style={{\n                position: \"absolute\",\n                top: 0,\n                left: 0,\n                width: \"100%\",\n                height: \"100%\",\n                pointerEvents: \"none\"\n            }}>\n                <div style={{\n                    transform: `scale(${this.state.graphScale}) translate(${this.state.graphTranslate.x}px, ${this.state.graphTranslate.y}px)`,\n                    transformOrigin: '0 0',\n                }}>\n                    <div>\n                        {<JitsiVideo\n                            key={this.state.localUser.id}\n                            user={this.state.localUser!}\n                            isLocalUser={true}\n                            volume={0}\n                            sessionId={this.props.sessionId}\n                            onPositionChange={this.handleLocalUserPositionChanged}\n                            isAnyMegaphoneActive={this.isAnyMegaphoneActive()}\n                        />}\n                        {this.renderRemoteTracks()}\n                    </div>\n                </div>\n\n                <button\n                    onClick={this.toggleCamera}\n                    style={{ position: 'absolute', bottom: 20, left: this.props.sidebar.width + 20 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={this.state.localUser.cameraOn? \"video icon\" : \"icon-fas-video-slash-solid\"}\n                        style={this.state.localUser.cameraOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={this.toggleMic}\n                    style={{ position: 'absolute', bottom: 20, left: this.props.sidebar.width + 70 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={this.state.localUser.micOn ? 'icon microphone' : 'icon microphone slash'}\n                        style={this.state.localUser.micOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={this.toggleMegaphone}\n                    style={{ position: 'absolute', bottom: 20, left: this.props.sidebar.width + 120 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={'icon bullhorn'}\n                        style={this.state.localUser.megaphoneOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={this.toggleHandUp}\n                    style={{ position: 'absolute', bottom: 20, left: this.props.sidebar.width + 220 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={'icon hand paper'}\n                        style={this.state.localUser.handUpOn ? { color: '#21AA21' } : { color: '#878787'}}\n                    />}\n                />\n\n                <div className={'show_buttons'}>\n                    <button\n                        onClick={() => this.toggleEmoji(\"thumbs up\")}\n                        style={{ position: 'absolute', bottom: 20, left: this.props.sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control'}\n                        children={<i\n                            className={'icon thumbs up'}\n                            style={this.state.localUser.showIconName == \"thumbs up\" ? { color: '#21AA21' } : { color: '#878787'}}\n                        />}\n                    />\n\n                    <button\n                        onClick={() => this.toggleEmoji(\"thumbs down\")}\n                        style={{ position: 'absolute', bottom: 60, left: this.props.sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control icon_button_menue'}\n                        children={<i\n                            className={'icon thumbs down icon_button_menue'}\n                            style={this.state.localUser.showIconName == \"thumbs down\" ? { color: '#CC1B1B' } : { color: '#878787'}}\n                        />}\n                    />\n\n                    <button\n                        onClick={() => this.toggleEmoji(\"beer\")}\n                        style={{ position: 'absolute', bottom: 100, left: this.props.sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control icon_button_menue'}\n                        children={<i\n                            className={'icon beer icon_button_menue'}\n                            style={this.state.localUser.showIconName == \"beer\" ? { color: '#FFFF00' } : { color: '#878787'}}\n                        />}\n                    />\n                </div>\n\n            </div>\n        );\n    };\n}\n\nexport default JitsiMeeting;","export const TOGGLE_SIDEBAR_COLLAPSED = '@@InspectioLayout/ToggleSidebarCollapsed';\nexport const SET_SIDEBAR_WIDTH = '@@InspectioLayout/SetSidebarWidth';\nexport const SET_RIGHT_SIDEBAR_WIDTH = '@@InspectioLayout/SetRightSidebarWidth';\nexport const SET_CODY_CONSOLE_HEIGHT = '@@InspectioLayout/SetCodyConsoleHeight';\n","import {Record} from \"immutable\";\nimport {Reducer} from \"redux\";\nimport {\n    SET_CODY_CONSOLE_HEIGHT,\n    SET_RIGHT_SIDEBAR_WIDTH,\n    SET_SIDEBAR_WIDTH,\n    TOGGLE_SIDEBAR_COLLAPSED\n} from \"../actions/constants\";\nimport {InspectioLayoutAction} from \"./index\";\n\n\nexport interface SidebarStateProps {\n    collapsed: boolean;\n    width: number;\n    rightSidebarWidth: number;\n    codyConsoleHeight: number;\n}\n\nexport const defaultSidebarStateProps: SidebarStateProps = {\n    collapsed: false,\n    width: 250,\n    rightSidebarWidth: 350,\n    codyConsoleHeight: 200,\n};\n\nexport class SidebarState extends Record(defaultSidebarStateProps) implements SidebarStateProps {\n\n}\n\nexport const initialState: SidebarState = new SidebarState();\n\nconst reducer: Reducer<SidebarState, InspectioLayoutAction> = (state: SidebarState = initialState, action: InspectioLayoutAction): SidebarState => {\n    switch (action.type) {\n        case TOGGLE_SIDEBAR_COLLAPSED:\n            return state.set('collapsed', action.payload.collapsed);\n        case SET_SIDEBAR_WIDTH:\n            return state.set('width', action.payload.width);\n        case SET_RIGHT_SIDEBAR_WIDTH:\n            return state.set('rightSidebarWidth', action.payload.width);\n        case SET_CODY_CONSOLE_HEIGHT:\n            return state.set('codyConsoleHeight', action.payload.height);\n        default:\n            return state;\n    }\n};\n\nexport {reducer as sidebarReducer}\n","import {Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {SidebarState} from \"../reducers/applySidebarActions\";\n\nexport const sidebarSelector = (state: Record<ApplicationState>, props: any): SidebarState =>\n    state.getIn(['inspectioSidebar', 'sidebar']) || new SidebarState();\n\nexport const makeGetSidebarSelector = (): (state: Record<ApplicationState>, props?: any) => SidebarState => {\n    return createSelector(\n        [sidebarSelector],\n        (sidebar): SidebarState => sidebar\n    )\n}","import * as React from 'react';\nimport {useState, useRef} from \"react\";\nimport JoinMeetingDialog from \"./JitsiJoinMeetingDialog\";\nimport Meeting from \"./JitsiMeeting\";\n\nimport {useSelector} from \"react-redux\";\nimport {makeGetSidebarSelector} from \"../../../Layout/selectors/sidebar\";\nimport {useGraph} from \"../../hooks/useGraph\";\n\ninterface OwnProps {\n    sessionId: string;\n    id: string;\n    name: string;\n    avatar: string;\n    initialPosition: {left: number, top: number};\n    loadingMeetingRoom: boolean;\n}\n\ntype MeetingLobbyProps = OwnProps;\n\nconst MeetingLobby = (props: MeetingLobbyProps) => {\n    const [modalOpen, setModalOpen] = useState(true);\n    const [selectedVideoDevice, setSelectedVideoDevice] = useState<string>('');\n    const [selectedAudioDevice, setSelectedAudioDevice] = useState<string>('');\n\n    const [graph] = useGraph();\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const timeoutRef = useRef<number>();\n\n    const canJoin = () => {\n        return selectedVideoDevice !== '' && selectedAudioDevice !== '';\n    }\n\n    const handleDevicesSelected = (devices: {audio: string, video: string}) => {\n        setSelectedAudioDevice(devices.audio);\n        setSelectedVideoDevice(devices.video);\n        setModalOpen(false);\n    }\n\n    const handleCancel = () => {\n        setModalOpen(false);\n    }\n\n    return (\n        <>\n            {canJoin() && <Meeting sessionId={props.sessionId} id={props.id} name={props.name} avatar={props.avatar} initialPosition={props.initialPosition} graph={graph} sidebar={sidebar} timeoutRef={timeoutRef}/>}\n            <JoinMeetingDialog open={modalOpen}\n                onDevicesSelected={handleDevicesSelected}\n                onCancel={handleCancel}\n                loadingMeetingRoom={props.loadingMeetingRoom}\n           />\n        </>\n    )\n};\n\nexport default MeetingLobby;\n/* \nsessionId={props.sessionId}\nid={props.id}\nname={props.name}\navatar={props.avatar}\ninitialPosition={props.initialPosition}\naudioDevice={selectedAudioDevice}\nvideoDevice={selectedVideoDevice} */","import {Device, OpenVidu, Publisher} from \"openvidu-browser\";\nimport * as React from 'react';\nimport {useEffect, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Button, DropdownProps, Form, Modal, Select} from \"semantic-ui-react\";\n\ninterface OwnProps {\n    onDevicesSelected: (devices: {audio: string, video: string}) => void;\n    onCancel: () => void;\n    open: boolean;\n    loadingMeetingRoom: boolean;\n}\n\ntype JoinMeetingDialogProps = OwnProps & WithNamespaces;\n\nconst JoinMeetingDialog = (props: JoinMeetingDialogProps) => {\n    const openViduRef = useRef<OpenVidu>();\n    const publisherRef = useRef<Publisher>();\n    const videoRef = useRef(null);\n    const [videoDevices, setVideoDevices] = useState<Device[]>([]);\n    const [audioDevices, setAudioDevices] = useState<Device[]>([]);\n    const [selectedVideoDevice, setSelectedVideoDevice] = useState<string>('');\n    const [selectedAudioDevice, setSelectedAudioDevice] = useState<string>('');\n\n    useEffect(() => {\n        openViduRef.current = new OpenVidu();\n\n        publisherRef.current = openViduRef.current.initPublisher(undefined as any, {\n            audioSource: undefined,\n            publishAudio: false,\n            publishVideo: true,\n            resolution: '320x240',\n            frameRate: 30,\n            insertMode: 'APPEND',\n            mirror: false,\n        });\n\n        publisherRef.current.addVideoElement(videoRef.current!);\n\n        publisherRef.current.on('streamPlaying', () => {\n            openViduRef.current!.getDevices().then(devices => {\n                const tmpVideoDevices = devices.filter(device => device.kind === 'videoinput');\n                const tmpAudioDevices = devices.filter(device => device.kind === 'audioinput');\n\n                setVideoDevices(tmpVideoDevices);\n                setAudioDevices(tmpAudioDevices);\n\n                if (tmpVideoDevices.length > 0) {\n                    setSelectedVideoDevice(tmpVideoDevices[0].deviceId);\n                }\n\n                if (tmpAudioDevices.length > 0) {\n                    setSelectedAudioDevice(tmpAudioDevices[0].deviceId);\n                }\n            });\n        });\n    }, []);\n\n    useEffect(() => {\n        if (!openViduRef.current || !publisherRef.current || !selectedVideoDevice) {\n            return;\n        }\n\n        openViduRef.current!.getUserMedia({\n            videoSource: selectedVideoDevice,\n            audioSource: undefined,\n            publishAudio: false,\n            publishVideo: true,\n            resolution: '320x240',\n            frameRate: 30,\n            insertMode: 'APPEND',\n            mirror: false,\n        }).then(mediaStream => {\n            const videoTrack = mediaStream.getVideoTracks()[0];\n            publisherRef.current!.replaceTrack(videoTrack);\n        });\n    }, [selectedVideoDevice]);\n\n    const joinMeeting = () => {\n        if (props.loadingMeetingRoom) {\n            return;\n        }\n\n        props.onDevicesSelected({audio: selectedAudioDevice, video: selectedVideoDevice});\n    }\n\n    const videoDeviceChoices = videoDevices.map(device => {\n        return {key: device.deviceId, value: device.deviceId, text: device.label}\n    });\n\n    const audoDeviceChoices = audioDevices.map(device => {\n        return {key: device.deviceId, value: device.deviceId, text: device.label}\n    });\n\n    return (\n        <Modal open={props.open} onClose={props.onCancel} closeIcon={true}>\n            <Modal.Header>Join Meeting</Modal.Header>\n            <Modal.Content>\n                <div style={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between' }}>\n                    <Form>\n                        <Form.Field>\n                            <label>Camera</label>\n                            <Select\n                                required={true}\n                                value={selectedVideoDevice}\n                                options={videoDeviceChoices}\n                                onChange={(e, data) => setSelectedVideoDevice(data.value as string)}\n                            />\n                        </Form.Field>\n                        <Form.Field>\n                            <label>Microphone</label>\n                            <Select\n                                required={true}\n                                value={selectedAudioDevice}\n                                options={audoDeviceChoices}\n                                onChange={(e, data) => setSelectedAudioDevice(data.value as string)}\n                            />\n                        </Form.Field>\n                    </Form>\n                    <div>\n                        <video\n                            autoPlay={true}\n                            muted={true}\n                            ref={videoRef}\n                        />\n                    </div>\n                </div>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button\n                    children={props.t('app.form.cancel')}\n                    onClick={props.onCancel}\n                />\n                <Button\n                    loading={props.loadingMeetingRoom}\n                    primary={true}\n                    children={'Join'}\n                    onClick={joinMeeting}\n                />\n            </Modal.Actions>\n        </Modal>);\n};\n\nexport default withNamespaces()(JoinMeetingDialog);","import axios, {AxiosRequestConfig, AxiosResponse} from \"axios\";\n\nconst axiosInstance = axios.create({\n    baseURL: 'https://mephisto-video.inseciacloud.com:3001', \n});\n\nconst sendApiRequest = async (request: AxiosRequestConfig): Promise<AxiosResponse> => {\n    try {\n        return await axiosInstance(request);\n    } catch(error) {\n        console.error(request.url);\n        throw error;\n    }\n};\n\n\nconst Api = {\n    createSession: async (sessionId: string): Promise<string> => {\n        const response = await sendApiRequest({\n            method: 'post',\n            url: `sessions/${sessionId}`,\n        });\n\n        return response.data as string;\n    },\n    getToken: async (sessionId: string): Promise<string> => {\n        const response = await sendApiRequest({\n            method: 'get',\n            url: `sessions/${sessionId}/token`,\n        });\n\n        return response.data as string;\n    },\n};\n\nexport default Api;\n","import {UserModel} from \"../../User\";\nimport {BoardTimer} from \"../model/BoardTimer\";\nimport {\n    AutoScrollEvent,\n    GestureChanged,\n    MouseDelta,\n    UserJoinedListener, UserLeftListener,\n    UserMouseJoined,\n    UserMouseLeft,\n    UserMouseMove,\n    UserMouseScroll\n} from \"../service/RemoteMouseSync\";\n\nexport type BoardTimerListener = (timer: BoardTimer) => void;\n\nexport abstract class MouseSync {\n    public abstract startSync(joined: UserMouseJoined): void;\n    public abstract stopSync(left: UserMouseLeft): void;\n    public abstract keepMousePositionsInPlaceOnPanning(move: UserMouseMove, mouseDelta: MouseDelta): void;\n    public abstract syncLastKnownAbsolutePointsAfterPanning(): void;\n    public abstract emitUserMouseMove(move: UserMouseMove, mouseDelta?: MouseDelta): void;\n    public abstract emitUserMouseScroll(scroll: UserMouseScroll): void;\n    public abstract emitUserGestureChanged(gestureChanged: GestureChanged): void;\n    public abstract emitUserIsAutoScrolling(autoScrollEvent: AutoScrollEvent): void;\n    public abstract trackMouseOfRemoteUser(userId: UserModel.UserId, userName: UserModel.Username, avatar: UserModel.AvatarUrl): void;\n    public abstract stopMouseTrackingOfUser(userId: UserModel.UserId): void;\n    public abstract observeUser(userId: UserModel.UserId): void;\n    public abstract hideObservingFrame(): void;\n    public abstract stopObservingUser(): void;\n    public abstract onUserJoined(listener: UserJoinedListener): void;\n    public abstract offUserJoined(listener: UserJoinedListener): void;\n    public abstract onUserLeft(listener: UserLeftListener): void;\n    public abstract offUserLeft(listener: UserLeftListener): void;\n    public abstract startBoardTimer(timer: BoardTimer): void;\n    public abstract onBoardTimerStarted(listener: BoardTimerListener): void;\n    public abstract offBoardTimerStarted(listener: BoardTimerListener): void;\n    public abstract pauseBoardTimer(timer: BoardTimer): void;\n    public abstract onBoardTimerPaused(listener: BoardTimerListener): void;\n    public abstract offBoardTimerPaused(listener: BoardTimerListener): void;\n    public abstract stopBoardTimer(timer: BoardTimer): void;\n    public abstract onBoardTimerStopped(listener: BoardTimerListener): void;\n    public abstract offBoardTimerStopped(listener: BoardTimerListener): void;\n}\n\n// tslint:disable-next-line:max-classes-per-file\nclass MouseSyncRef implements MouseSync {\n\n    private mouseSyncRef: MouseSync | undefined;\n\n    private cachedUserJoinedListeners: UserJoinedListener[] = [];\n    private cachedUserLeftListeners: UserLeftListener[] = [];\n    private cachedBoardTimerStartedListeners: BoardTimerListener[] = [];\n    private cachedBoardTimerPausedListeners: BoardTimerListener[] = [];\n    private cachedBoardTimerStoppedListeners: BoardTimerListener[] = [];\n\n    public setMouseSync(mouseSync: MouseSync | undefined): void {\n        this.mouseSyncRef = mouseSync;\n\n        if(this.mouseSyncRef) {\n            this.cachedUserJoinedListeners.forEach(l => this.mouseSyncRef!.onUserJoined(l))\n            this.cachedUserLeftListeners.forEach(l => this.mouseSyncRef!.onUserLeft(l))\n            this.cachedBoardTimerStartedListeners.forEach(l => this.mouseSyncRef!.onBoardTimerStarted(l))\n            this.cachedBoardTimerPausedListeners.forEach(l => this.mouseSyncRef!.onBoardTimerPaused(l))\n            this.cachedBoardTimerStoppedListeners.forEach(l => this.mouseSyncRef!.onBoardTimerStopped(l))\n        }\n\n        this.cachedUserJoinedListeners = [];\n        this.cachedUserLeftListeners = [];\n        this.cachedBoardTimerStartedListeners = [];\n        this.cachedBoardTimerPausedListeners = [];\n        this.cachedBoardTimerStoppedListeners = [];\n    }\n\n    public emitUserGestureChanged(gestureChanged: GestureChanged): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.emitUserGestureChanged(gestureChanged);\n        }\n\n    }\n\n    public emitUserIsAutoScrolling(autoScrollEvent: AutoScrollEvent): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.emitUserIsAutoScrolling(autoScrollEvent);\n        }\n    }\n\n    public emitUserMouseMove(move: UserMouseMove, mouseDelta?: MouseDelta): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.emitUserMouseMove(move, mouseDelta);\n        }\n    }\n\n    public emitUserMouseScroll(scroll: UserMouseScroll): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.emitUserMouseScroll(scroll);\n        }\n    }\n\n    public hideObservingFrame(): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.hideObservingFrame();\n        }\n    }\n\n    public keepMousePositionsInPlaceOnPanning(move: UserMouseMove, mouseDelta: MouseDelta): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.keepMousePositionsInPlaceOnPanning(move, mouseDelta);\n        }\n    }\n\n    public observeUser(userId: UserModel.UserId): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.observeUser(userId);\n        }\n    }\n\n    public onUserJoined(listener: UserJoinedListener): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.onUserJoined(listener);\n        } else {\n            this.cachedUserJoinedListeners.push(listener);\n        }\n    }\n\n    public offUserJoined(listener: UserJoinedListener) {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.offUserJoined(listener);\n        } else {\n            this.cachedUserJoinedListeners = this.cachedUserJoinedListeners.filter(l => l !== listener);\n        }\n    }\n\n    public onUserLeft(listener: UserLeftListener): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.onUserLeft(listener);\n        } else {\n            this.cachedUserLeftListeners.push(listener);\n        }\n    }\n\n    public offUserLeft(listener: UserLeftListener) {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.offUserLeft(listener);\n        } else {\n            this.cachedUserLeftListeners = this.cachedUserLeftListeners.filter(l => l !== listener);\n        }\n    }\n\n    public startSync(joined: UserMouseJoined): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.startSync(joined);\n        }\n    }\n\n    public stopMouseTrackingOfUser(userId: UserModel.UserId): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.stopMouseTrackingOfUser(userId);\n        }\n    }\n\n    public stopObservingUser(): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.stopObservingUser();\n        }\n    }\n\n    public stopSync(left: UserMouseLeft): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.stopSync(left);\n        }\n    }\n\n    public syncLastKnownAbsolutePointsAfterPanning(): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.syncLastKnownAbsolutePointsAfterPanning();\n        }\n    }\n\n    public trackMouseOfRemoteUser(userId: UserModel.UserId, userName: UserModel.Username, avatar: UserModel.AvatarUrl): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.trackMouseOfRemoteUser(userId, userName, avatar);\n        }\n    }\n\n    public startBoardTimer(timer: BoardTimer): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.startBoardTimer(timer);\n        }\n    }\n\n    public onBoardTimerPaused(listener: BoardTimerListener): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.onBoardTimerPaused(listener);\n        } else {\n            this.cachedBoardTimerPausedListeners.push(listener);\n        }\n    }\n\n    public offBoardTimerPaused(listener: BoardTimerListener) {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.offBoardTimerPaused(listener);\n        } else {\n            this.cachedBoardTimerPausedListeners = this.cachedBoardTimerPausedListeners.filter(l => l !== listener);\n        }\n    }\n\n    public onBoardTimerStarted(listener: BoardTimerListener): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.onBoardTimerStarted(listener);\n        } else {\n            this.cachedBoardTimerStartedListeners.push(listener);\n        }\n    }\n\n    public offBoardTimerStarted(listener: BoardTimerListener) {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.offBoardTimerStarted(listener);\n        } else {\n            this.cachedBoardTimerStartedListeners = this.cachedBoardTimerStartedListeners.filter(l => l !== listener);\n        }\n    }\n\n    public onBoardTimerStopped(listener: BoardTimerListener): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.onBoardTimerStopped(listener);\n        } else {\n            this.cachedBoardTimerStoppedListeners.push(listener);\n        }\n    }\n\n    public offBoardTimerStopped(listener: BoardTimerListener) {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.offBoardTimerStopped(listener);\n        } else {\n            this.cachedBoardTimerStoppedListeners = this.cachedBoardTimerStoppedListeners.filter(l => l !== listener);\n        }\n    }\n\n    public pauseBoardTimer(timer: BoardTimer): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.pauseBoardTimer(timer);\n        }\n    }\n\n    public stopBoardTimer(timer: BoardTimer): void {\n        if(this.mouseSyncRef) {\n            this.mouseSyncRef.stopBoardTimer(timer);\n        }\n    }\n}\n\nlet currentMouseSync: MouseSyncRef | undefined;\n\nexport function useMouseSync(): [MouseSync, (mouseSync: MouseSync | undefined) => void] {\n    if(!currentMouseSync) {\n        currentMouseSync = new MouseSyncRef();\n    }\n\n    return [currentMouseSync, (mouseSync => currentMouseSync!.setMouseSync(mouseSync))]\n}\n","import React, {useEffect, useRef, useState} from \"react\";\nimport {Image} from \"semantic-ui-react\";\nimport WebSocketConnection from \"../../../api/ConfiguredViduSocket\";\nimport {OpenViduUser} from \"../../model/OpenViduUser\";\nimport './OpenViduVideo.css';\n\nexport interface Position {\n    left: number;\n    top: number;\n}\n\nexport interface MousePoint {\n    x: number;\n    y: number;\n}\n\nexport type NewPosition = Position;\n\nexport interface PositionChange {\n    startPositionAvatar: Position,\n    startPositionMouse: MousePoint,\n    currentPositionMouse: MousePoint,\n}\n\ninterface OpenViduVideoProps {\n    user: OpenViduUser;\n    sessionId: string;\n    isLocalUser: boolean;\n    onPositionChange?: (change: PositionChange) => NewPosition;\n    volume: number;\n    isSpeaking: boolean;\n    isAnyMegaphoneActive: boolean;\n}\n\nconst defaultPositionChange: PositionChange = {\n    startPositionAvatar: {left: 0, top: 0},\n    startPositionMouse: {x: 0, y: 0},\n    currentPositionMouse: {x: 0, y: 0}\n}\n\nconst emojiIconSettings: any =  { \n    \"thumbs up\": \"green thumbs up thumbUp-indicator\",\n    \"thumbs down\": \"red thumbs down thumbDown-indicator\",\n    \"beer\": \"yellow beer beer-indicator\",\n}\n\nconst OpenViduVideo = (props: OpenViduVideoProps) => {\n    const videoRef = useRef(null);\n    const [isDragging, setIsDragging] = useState<boolean>();\n    const [isFocused, setIsFocused] = useState<boolean>(false);\n    const positionChange = useRef<PositionChange>(defaultPositionChange);\n\n    const changePosition = (x: number, y: number) => {\n        positionChange.current.currentPositionMouse.x = x;\n        positionChange.current.currentPositionMouse.y = y;\n\n        if(props.onPositionChange) {\n            const newPosition = props.onPositionChange(positionChange.current);\n            WebSocketConnection.sendPositionUpdate(props.user.id, props.sessionId, newPosition.left, newPosition.top);\n        }\n    }\n\n    useEffect(() => {\n        props.user.streamManager.addVideoElement(videoRef.current);\n    }, []);\n\n    useEffect(() => {\n        if (!videoRef.current) {\n            return;\n        }\n\n        if(props.isLocalUser) {\n            return;\n        }\n\n        let volume = props.volume * (props.isAnyMegaphoneActive ? 0.7 : 1.0);\n        if (props.user.megaphoneOn) {\n            volume = 1.0;\n        }\n\n        (videoRef.current as any).volume = volume;\n\n        if(volume === 0 && !(videoRef.current as any).paused) {\n            (videoRef.current as any).pause();\n        }\n\n        if(volume > 0 && (videoRef.current as any).paused) {\n            (videoRef.current as any).play();\n        }\n    }, [props.volume, props.user.megaphoneOn, props.isAnyMegaphoneActive]);\n\n    useEffect(() => {\n        const mouseUpListener = () => {\n            setIsDragging(false);\n        }\n\n        const mouseMoveListener = (e: MouseEvent) => {\n            if (props.isLocalUser && isDragging) {\n                changePosition(e.clientX, e.clientY);\n            }\n        }\n\n        const touchMoveListener = (e: TouchEvent) => {\n            if (props.isLocalUser && isDragging) {\n                changePosition(e.touches[0].clientX, e.touches[0].clientY);\n            }\n        }\n\n        document.addEventListener('mouseup', mouseUpListener);\n        document.addEventListener('touchend', mouseUpListener);\n        document.addEventListener('mousemove', mouseMoveListener);\n        document.addEventListener('touchmove', touchMoveListener);\n\n        return () => {\n            document.removeEventListener('mouseup', mouseUpListener);\n            document.removeEventListener('touchend', mouseUpListener);\n            document.removeEventListener('mousemove', mouseMoveListener);\n            document.removeEventListener('touchmove', touchMoveListener);\n        }\n    })\n\n    const applyFocusedSize = (size: number): number => {\n        return isFocused? size * 2 : size;\n    }\n    \n    const fullSize = 150;\n    const currentSize = applyFocusedSize(props.isLocalUser? fullSize : 50 + (props.volume * 100));\n    const borderRadius = Math.round(currentSize / 2);\n    const showVideo = props.user.cameraOn && (props.isLocalUser || props.volume > 0 || props.user.megaphoneOn);\n    const darkenAvatar = !props.isLocalUser && props.volume === 0 && !props.user.megaphoneOn;\n    const toggleIsFocused = () => {\n        setIsFocused(!isFocused);\n    }\n\n    return (\n        <div\n            style={{\n                width: currentSize,\n                height: currentSize,\n                borderRadius,\n                position: 'absolute',\n                left: props.user.position.left - currentSize / 2,\n                top: props.user.position.top - currentSize / 2,\n                pointerEvents: 'auto',\n                cursor: props.isLocalUser? \"move\" : \"default\",\n                zIndex: props.isLocalUser? 10 : 3,\n                WebkitTransform: 'translateZ(0)',\n            }}\n            onMouseDown={(e) => {\n                    positionChange.current.startPositionAvatar = props.user.position;\n                    positionChange.current.startPositionMouse = {\n                        x: e.clientX,\n                        y: e.clientY,\n                    }\n                    setIsDragging(true);\n                }\n            }\n            onTouchStart={(e) => {\n                positionChange.current.startPositionAvatar = props.user.position;\n                positionChange.current.startPositionMouse = {\n                    x: e.touches[0].clientX,\n                    y: e.touches[0].clientY,\n                }\n                setIsDragging(true);\n            }}\n            onDoubleClick={toggleIsFocused}\n        >\n            <div style={{\n                width: currentSize,\n                height: currentSize,\n                borderRadius,\n                overflow: 'hidden',\n                backgroundColor: '#9cc8f5',\n                pointerEvents: 'auto',\n                ...(props.isSpeaking ? { border: '5px solid #9cc8f5'} : {border: '5px solid #ffffff'}),\n                WebkitTransform: 'translateZ(0)',\n                zIndex: props.isLocalUser? 10 : 3,\n            }}>\n                {/*\n                 // @ts-ignore */}\n                <video\n                    autoPlay={true}\n                    disablePictureInPicture={true /* Not working in FF .... */}\n                    ref={videoRef}\n                    muted={props.isLocalUser}\n                    style={{ width: currentSize, height: currentSize, objectFit: 'cover', objectPosition: 'center', pointerEvents: 'auto', display: showVideo? 'block' : 'none', zIndex: props.isLocalUser? 9 : 2 }}\n                />\n                {!showVideo && <Image\n                    src={props.user.avatar}\n                    avatar={true}\n                    verticalAlign=\"middle\"\n                    style={{\n                        width: currentSize,\n                        height: currentSize,\n                        objectFit: 'cover',\n                        objectPosition: 'center',\n                        pointerEvents: 'none',\n                        filter: darkenAvatar? 'brightness(0.8)' : 'none'\n                    }}\n                />}\n            </div>\n            <div style={{ position: \"absolute\", bottom: '-26px', left: 0, width: '100%', textAlign: 'center', fontSize: '16px', pointerEvents: 'auto' }}>{props.user.name}</div>\n\n            <i className={'icon bullhorn megaphone-indicator' + (props.user.megaphoneOn ? ' active' : '')} />\n\n            <i className={'green icon hand paper handUp-indicator' + (props.user.handUpOn ? ' active' : '')} />\n\n            <i className={'icon ' + (emojiIconSettings[props.user.showIconName]) + ' ' + (props.user.thumbUpOn ? ' active' : '')} />\n        \n        </div>\n    );\n};\n\nexport default OpenViduVideo;\n","import React, {useEffect, useRef, useState} from \"react\";\nimport WebSocketConnection from \"../../../api/ConfiguredViduSocket\";\nimport {OpenViduScreenShare as ScreenShare} from \"../../model/OpenViduUser\";\nimport './OpenViduVideo.css';\n\nexport interface Position {\n    left: number;\n    top: number;\n}\n\nexport interface MousePoint {\n    x: number;\n    y: number;\n}\n\nexport type NewPosition = Position;\n\nexport interface PositionChange {\n    startPositionAvatar: Position,\n    startPositionMouse: MousePoint,\n    currentPositionMouse: MousePoint,\n}\n\ninterface OpenViduScreenShareProps {\n    screenShare: ScreenShare;\n    sessionId: string;\n    onPositionChange?: (change: PositionChange) => NewPosition|undefined;\n}\n\nconst defaultPositionChange: PositionChange = {\n    startPositionAvatar: {left: 0, top: 0},\n    startPositionMouse: {x: 0, y: 0},\n    currentPositionMouse: {x: 0, y: 0}\n}\n\nconst OpenViduScreenShare = (props: OpenViduScreenShareProps) => {\n    const videoRef = useRef(null);\n    const [isDragging, setIsDragging] = useState<boolean>();\n    const [isFocused, setIsFocused] = useState<boolean>(false);\n    const positionChange = useRef<PositionChange>(defaultPositionChange);\n\n    const changePosition = (x: number, y: number) => {\n        positionChange.current.currentPositionMouse.x = x;\n        positionChange.current.currentPositionMouse.y = y;\n\n        if (props.onPositionChange) {\n            // Returns undefined for remote screen shares where we do not want to send out position changes ...\n            const newPosition = props.onPositionChange(positionChange.current);\n\n            if (newPosition) {\n                WebSocketConnection.sendPositionUpdate('screen_' + props.screenShare.userId, props.sessionId, newPosition.left, newPosition.top);\n            }\n        }\n    }\n\n    useEffect(() => {\n        props.screenShare.streamManager.addVideoElement(videoRef.current);\n    }, []);\n\n    useEffect(() => {\n        const mouseUpListener = () => {\n            setIsDragging(false);\n        }\n\n        const mouseMoveListener = (e: MouseEvent) => {\n            if (isDragging) {\n                changePosition(e.clientX, e.clientY);\n            }\n        }\n\n        const touchMoveListener = (e: TouchEvent) => {\n            if(isDragging) {\n                changePosition(e.touches[0].clientX, e.touches[0].clientY);\n            }\n        }\n\n        document.addEventListener('mouseup', mouseUpListener);\n        document.addEventListener('touchend', mouseUpListener);\n        document.addEventListener('mousemove', mouseMoveListener);\n        document.addEventListener('touchmove', touchMoveListener);\n\n        return () => {\n            document.removeEventListener('mouseup', mouseUpListener);\n            document.removeEventListener('touchend', mouseUpListener);\n            document.removeEventListener('mousemove', mouseMoveListener);\n            document.removeEventListener('touchmove', touchMoveListener);\n        }\n    })\n\n    const toggleIsFocused = () => {\n        setIsFocused(!isFocused);\n    }\n\n    return (\n        <div\n            style={{\n                height: isFocused? 720 : 360,\n                padding: 5,\n                boxSizing: 'border-box',\n                position: 'absolute',\n                left: props.screenShare.position.left - 325,\n                top: props.screenShare.position.top - 185,\n                pointerEvents: 'auto',\n                cursor: 'move',\n                zIndex: 2,\n                backgroundColor: 'black',\n                borderRadius: 6,\n            }}\n            onMouseDown={(e) => {\n                    positionChange.current.startPositionAvatar = props.screenShare.position;\n                    positionChange.current.startPositionMouse = {\n                        x: e.clientX,\n                        y: e.clientY,\n                    }\n                    setIsDragging(true);\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            }\n            onTouchStart={(e) => {\n                positionChange.current.startPositionAvatar = props.screenShare.position;\n                positionChange.current.startPositionMouse = {\n                    x: e.touches[0].clientX,\n                    y: e.touches[0].clientY,\n                }\n                setIsDragging(true);\n                e.stopPropagation();\n                e.preventDefault();\n            }}\n            onClick={(e) => {\n                e.preventDefault();\n            }}\n            onDoubleClick={toggleIsFocused}\n        >\n            {/*\n             // @ts-ignore */}\n            <video\n                autoPlay={true}\n                disablePictureInPicture={true /* Not working in FF .... */}\n                ref={videoRef}\n                muted={true}\n                style={{ height: '100%', pointerEvents: 'auto', display: 'block', borderRadius: '3px' }}\n            />\n        </div>\n    );\n};\n\nexport default OpenViduScreenShare;\n","import {OpenVidu, Stream, StreamEvent} from 'openvidu-browser';\nimport React, {useCallback} from \"react\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport OpenViduApi from \"../../../api/ConfiguredViduApi\";\nimport WebSocketConnection from \"../../../api/ConfiguredViduSocket\";\nimport {makeGetSidebarSelector} from \"../../../Layout/selectors/sidebar\";\nimport {useGraph} from \"../../hooks/useGraph\";\nimport {Graph, GraphPoint} from \"../../model/Graph\";\nimport {OpenViduUser as User, OpenViduScreenShare as ScreenShare} from \"../../model/OpenViduUser\";\nimport OpenViduVideo, {NewPosition, PositionChange} from \"./OpenViduVideo\";\nimport OpenViduScreenShare from \"./OpenViduScreenShare\";\nimport {on} from \"cluster\";\n\ninterface MeetingProps {\n    sessionId: string;\n    id: string;\n    name: string;\n    avatar: string;\n    initialPosition: { left: number, top: number };\n    videoDevice?: string;\n    audioDevice?: string;\n}\n\ninterface RemotePositions {[userId: string]: { position: { left: number, top: number } }}\n\nlet localPositionChanged = 0;\n\nconst Meeting = (props: MeetingProps) => {\n    const openVidu = useRef<OpenVidu>();\n    const session = useRef<any>();\n    const screenShareSession = useRef<any>();\n    const graphTranslateRef = useRef<GraphPoint>({x: 0, y: 0});\n    const graphScaleRef = useRef<number>(1);\n    const localUserAccessAllowed = useRef<boolean>(false);\n    const remotePositions = useRef<RemotePositions>({})\n    const [remoteUsersCount, setRemoteUsersCount] = useState(0);\n    const [positionChanged, setPositionChanged] = useState(localPositionChanged); // only used by incrementing the variable to force a render cycle of this component after changes where it does not do so automatically\n    const [graph] = useGraph();\n    const [graphTranslate, setGraphTranslate] = useState<GraphPoint>({x: 0, y: 0});\n    const [graphScale, setGraphScale] = useState(1);\n    const [localUser, setLocalUser] = useState<User>();\n    const [localScreenShare, setLocalScreenShare] = useState<ScreenShare>();\n    const sidebar = useSelector(makeGetSidebarSelector());\n\n    const remoteUsersRef = useRef<User[]>([]);\n    const speakingStreamsRef = useRef<string[]>([]);\n    const remoteScreenSharesRef = useRef<ScreenShare[]>([]);\n\n    // Used to get access to the current localUser state value in callbacks\n    // @todo maybe use this and get rid of the other refs? Or switch to class component even?\n    const stateRef = useRef({ localUser });\n    stateRef.current = { localUser };\n\n    const timeoutRef = useRef<number>();\n\n    graphTranslateRef.current = graphTranslate;\n    graphScaleRef.current = graphScale;\n\n    const sendSignalUserChanged = (data: any) => {\n        session.current!.signal({\n            data: JSON.stringify(data),\n            type: 'userChanged',\n        });\n    }\n\n    const subscribeToStream = (stream: Stream) => {\n        const data = JSON.parse(stream.connection.data);\n\n        /* Prevent subscribing to your own screen share */\n        if (data.type === 'screenShare' && stateRef.current.localUser && data.userId === stateRef.current.localUser.id) {\n            console.log('[vidu] Subscribe to local screen share prevented')\n            return;\n        }\n\n        const subscriber = session.current.subscribe(stream, undefined);\n        subscriber.on('streamPlaying', (e: any /* @todo ??? */) => {\n            console.log('[vidu] STREAM PLAYING', e, subscriber);\n\n\n        });\n\n        console.log(\"[vidu] Remote Positions: \", remotePositions.current);\n\n        if (data.type === 'screenShare') {\n            const screenSharePositionId = 'screen_' + data.userId;\n            remoteScreenSharesRef.current.push({\n                userId: data.userId,\n                streamManager: subscriber,\n                position: remotePositions.current[screenSharePositionId]\n                    ? remotePositions.current[screenSharePositionId].position // Try screen position first\n                    : remotePositions.current[data.userId]\n                        ? remotePositions.current[data.userId].position  // Then the users position the screen belongs to\n                        : {\n                            left: 200,\n                            top: 500\n                        },\n            });\n\n            console.log(\"[vidu] pushed remote screen share\", remoteScreenSharesRef.current);\n        } else {\n            remoteUsersRef.current.push({\n                id: data.id,\n                name: data.name,\n                avatar: data.avatar,\n                streamManager: subscriber,\n                connectionId: stream.connection.connectionId,\n                position: remotePositions.current[data.id] ? remotePositions.current[data.id].position : {\n                    left: 200,\n                    top: 500\n                },\n                cameraOn: data.isVideoActive,\n                micOn: data.isAudioActive,\n                megaphoneOn: data.isMegaphoneActive,\n                handUpOn: data.isHandUpActive,\n                thumbUpOn: data.isThumbUpActive,\n                showIconName: data.selectedIconName,\n            })\n\n            console.log(\"[vidu] pushed remote user\", remoteUsersRef.current);\n            setRemoteUsersCount(remoteUsersCount + 1);\n        }\n\n        setPositionChanged(++localPositionChanged);\n    }\n\n    const subscribeToStreamCreated = () => {\n        session.current.on('streamCreated', (event: any) => {\n            console.log('[vidu] STREAM CREATED');\n\n            subscribeToStream(event.stream);\n        });\n    };\n\n    const subscribeToUserChanged = () => {\n        session.current.on('signal:userChanged', (event: any) => {\n            remoteUsersRef.current.forEach(user => {\n                if (user.connectionId === event.from.connectionId) {\n                    const data = JSON.parse(event.data);\n                    console.log(\"[vidu] Updating user data: \", data);\n\n                    if(data.hasOwnProperty('isVideoActive')) {\n                        user.cameraOn = data.isVideoActive;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                    if(data.hasOwnProperty('isAudioActive')) {\n                        user.micOn = data.isAudioActive;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                    if (data.hasOwnProperty('isMegaphoneActive')) {\n                        user.megaphoneOn = data.isMegaphoneActive;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                    if (data.hasOwnProperty('isHandUpActive')) {\n                        user.handUpOn = data.isHandUpActive;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                    if (data.hasOwnProperty('isThumbUpActive')) {\n                        user.thumbUpOn = data.isThumbUpActive;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                    if (data.hasOwnProperty('selectedIconName')) {\n                        user.showIconName = data.selectedIconName;\n                        setPositionChanged(++localPositionChanged);\n                    }\n\n                }\n            });\n        });\n    };\n\n    const subscribeToDebuggingEvents = () => {\n        session.current.on('reconnecting', () => console.warn('[vidu] Oops! Trying to reconnect to the session'));\n        session.current.on('reconnected', () => console.log('[vidu] Hurray! You successfully reconnected to the session'));\n        session.current.on('sessionDisconnected', (event: any) => {\n            if (event.reason === 'networkDisconnect') {\n                console.warn('[vidu] Dang-it... You lost your connection to the session', event);\n                session.current = null;\n                screenShareSession.current = null;\n                openViduConnect();\n            } else {\n                // Disconnected from the session for other reason than a network drop\n                console.warn('[vidu] Vidu session disconnect! Reason: ', event.reason, event);\n            }\n        });\n\n        session.current.on('exception', (event: any) => {\n            if (event.name === 'ICE_CONNECTION_FAILED') {\n                const stream = event.origin;\n                console.warn('[vidu] Stream ' + stream.streamId + ' broke!');\n                console.warn('[vidu] Reconnection process automatically started');\n                return;\n            }\n            if (event.name === 'ICE_CONNECTION_DISCONNECTED') {\n                const stream = event.origin;\n                console.warn('[vidu] Stream ' + stream.streamId + ' disconnected!');\n                console.warn('[vidu] Giving it some time to be restored. If not possible, reconnection process will start');\n                return;\n            }\n            if(event.name === 'NO_STREAM_PLAYING_EVENT') {\n                const stream = event.origin.stream;\n                console.warn(`[vidu] No stream playing event recevied. Trying it again for ${stream.streamId}`);\n                deleteSubscriber(stream);\n                subscribeToStream(stream);\n            }\n\n\n            console.error(\"[vidu] OpenVidu session exception occurred: \", event);\n        });\n    }\n\n    const deleteSubscriber = (stream: any) => {\n        remoteUsersRef.current = remoteUsersRef.current.filter(user => user.streamManager.stream !== stream);\n        setRemoteUsersCount(remoteUsersCount - 1);\n\n        // might also be a screen share subscription that was terminated\n        remoteScreenSharesRef.current = remoteScreenSharesRef.current.filter(\n            screenShare => screenShare.streamManager.stream !== stream\n        );\n\n        setPositionChanged(++localPositionChanged);\n    }\n\n    const subscribeToStreamDestroyed = () => {\n        // On every Stream destroyed...\n        session.current.on('streamDestroyed', (event: any) => {\n            console.log('[vidu] Stream destroyed');\n\n            // Remove the stream from 'subscribers' array\n            deleteSubscriber(event.stream);\n            event.preventDefault();\n        });\n    };\n\n\n    const connectWebCam = () => {\n        const publisher = openVidu.current!.initPublisher(undefined as any, {\n            audioSource: props.audioDevice,\n            videoSource: props.videoDevice,\n            publishAudio: true,\n            publishVideo: true,\n            resolution: '320x240',\n            frameRate: 30,\n            insertMode: 'APPEND',\n            mirror: false,\n        });\n\n        if (session.current!.capabilities.publish) {\n            publisher.on('accessAllowed' , () => {\n                session.current.publish(publisher).then(() => {\n                    localUserAccessAllowed.current = true;\n                });\n            });\n        }\n\n        subscribeToUserChanged();\n        subscribeToStreamDestroyed();\n        sendSignalUserChanged({ isScreenShareActive: false });\n\n        setLocalUser({\n            id: props.id,\n            name: props.name,\n            avatar: props.avatar,\n            streamManager: publisher,\n            connectionId: session.current.connection.connectionId,\n            position: props.initialPosition,\n            cameraOn: true,\n            micOn: true,\n            megaphoneOn: false,\n            handUpOn: false,\n            thumbUpOn: false,\n            showIconName: \"\",\n        });\n\n        publisher.on('streamPlaying', (e) => {\n            console.log('[vidu] publisher stream playing', e);\n            // console.info('I stream playing');\n            // @todo\n            // publisher.videos[0].video.parentElement!.classList.remove('custom-class');\n        });\n    };\n\n    const connectToSession = async () => {\n        try {\n            const _session = await OpenViduApi.createSession(props.sessionId);\n            const token = await OpenViduApi.getToken(_session);\n\n            await session.current.connect(token, {\n                type: 'user',\n                id: props.id,\n                name: props.name,\n                avatar: props.avatar,\n                position: props.initialPosition,\n                isVideoActive: true,\n                isAudioActive: true,\n            });\n            connectWebCam();\n        } catch (error) {\n            alert('There was an error connecting to the session: ' + error.message);\n            console.log('[vidu] There was an error connecting to the session:', error.code, error.message);\n        }\n    };\n\n    const updateRemoteUserPosition = (id: string, position: {left: number, top: number}) => {\n        remotePositions.current[id] = {position};\n\n        if (id.includes('screen_')) {\n            // @todo screen position update. Relevant for us?\n        } else {\n            remoteUsersRef.current.forEach(remoteUser => {\n                if (remoteUser.id === id) {\n                    remoteUser.position = position;\n                }\n            });\n        }\n\n        setPositionChanged(++localPositionChanged);\n    }\n\n    const handleLocalUserPositionChanged = (positionChange: PositionChange): NewPosition => {\n        const scale = graph.getCurrentScale();\n\n        const mouseDeltaX = positionChange.currentPositionMouse.x - positionChange.startPositionMouse.x;\n        const mouseDeltaY = positionChange.currentPositionMouse.y - positionChange.startPositionMouse.y;\n\n        const newPosition: NewPosition = {\n            left: positionChange.startPositionAvatar.left + (mouseDeltaX / scale),\n            top: positionChange.startPositionAvatar.top + (mouseDeltaY / scale),\n        }\n\n\n        if(localUser) {\n            setLocalUser({...localUser, position: newPosition});\n        }\n        return newPosition;\n    };\n\n    const handleScreenSharePositionChanged = (positionChange: PositionChange, userId?: string): NewPosition|undefined => {\n        const scale = graph.getCurrentScale();\n\n        const mouseDeltaX = positionChange.currentPositionMouse.x - positionChange.startPositionMouse.x;\n        const mouseDeltaY = positionChange.currentPositionMouse.y - positionChange.startPositionMouse.y;\n\n        const newPosition: NewPosition = {\n            left: positionChange.startPositionAvatar.left + (mouseDeltaX / scale),\n            top: positionChange.startPositionAvatar.top + (mouseDeltaY / scale),\n        }\n\n        if (!userId && localScreenShare) {\n            setLocalScreenShare({...localScreenShare, position: newPosition});\n            return newPosition;\n        } else {\n            const remoteScreenShare = remoteScreenSharesRef.current.find(screenShare => screenShare.userId === userId);\n            if (remoteScreenShare) {\n                remoteScreenShare.position = newPosition;\n                setPositionChanged(++localPositionChanged);\n            }\n        }\n    };\n\n    const toggleCamera = () => {\n        if (!localUser) {\n            return;\n        }\n\n        const isCameraNowActive = !localUser.cameraOn;\n        localUser.streamManager.publishVideo(isCameraNowActive);\n        setLocalUser({...localUser, cameraOn: isCameraNowActive});\n        sendSignalUserChanged({ isVideoActive: isCameraNowActive });\n    };\n\n    const toggleMic = () => {\n        if (!localUser) {\n            return;\n        }\n\n        const isMicNowActive = !localUser.micOn;\n        localUser.streamManager.publishAudio(isMicNowActive);\n        setLocalUser({...localUser, micOn: isMicNowActive});\n        sendSignalUserChanged({ isAudioActive: isMicNowActive });\n    };\n\n    const toggleMegaphone = () => {\n        if (!localUser) {\n            return;\n        }\n\n        const isMegaphoneNowActive = !localUser.megaphoneOn;\n        setLocalUser({...localUser, megaphoneOn: isMegaphoneNowActive});\n        sendSignalUserChanged({ isMegaphoneActive: isMegaphoneNowActive });\n    };\n\n    const toggleHandUp = () =>{\n        if (!localUser) {\n            return;\n        }\n\n        const isHandUpNowActive = !localUser.handUpOn;\n        setLocalUser({...localUser, handUpOn: isHandUpNowActive});\n        sendSignalUserChanged({ isHandUpActive: isHandUpNowActive });\n    };\n\n    const toggleEmoji = (iconName: string) =>{\n        if (!localUser) {\n            return;\n        }\n        const iconInfo = (localUser.showIconName === '') ? iconName : '';\n        const isThumbUpNowActive = !localUser.thumbUpOn;\n\n        setLocalUser({...localUser, thumbUpOn: isThumbUpNowActive, showIconName: iconInfo});\n        sendSignalUserChanged({ isThumbUpActive: isThumbUpNowActive, selectedIconName: iconInfo});\n\n        clearTimeout(timeoutRef.current);\n        timeoutRef.current = window.setTimeout(() => {\n            setLocalUser({...stateRef.current.localUser!, thumbUpOn: false, showIconName: \"\"});\n            sendSignalUserChanged({ isThumbUpActive: false, selectedIconName: \"\"});\n        }, 3000);\n    };\n\n    const shareScreen = async () => {\n        if (!localUser) {\n            return;\n        }\n\n        screenShareSession.current = openVidu.current!.initSession();\n\n        const _session = await OpenViduApi.createSession(props.sessionId);\n        const token = await OpenViduApi.getToken(_session);\n\n        await screenShareSession.current.connect(token, {\n            type: 'screenShare',\n            userId: props.id,\n        });\n\n        const screenStreamManager = openVidu.current!.initPublisher(undefined as any, {\n            videoSource: 'screen',\n            publishVideo: true,\n            publishAudio: true,\n            mirror: false,\n        }, console.log);\n\n        screenStreamManager.once('accessAllowed', (event: any) => {\n            screenStreamManager.stream.getMediaStream().getVideoTracks()[0].addEventListener('ended', () => {\n                // @todo is there something else we need to do in this case?\n                setLocalScreenShare(undefined);\n            });\n\n            setLocalScreenShare({\n                userId: localUser.id,\n                streamManager: screenStreamManager,\n                position: { ...localUser.position },\n            });\n\n            screenShareSession.current.publish(screenStreamManager);\n        });\n    };\n\n    const stopScreenShare = () => {\n        if (screenShareSession.current) {\n            if (localScreenShare) {\n                screenShareSession.current.unpublish(localScreenShare.streamManager);\n            }\n\n            setLocalScreenShare(undefined);\n            screenShareSession.current.disconnect();\n        }\n\n        screenShareSession.current = undefined;\n    };\n\n    const toggleScreenShare = () => {\n        if (!localScreenShare) {\n            shareScreen();\n        } else {\n            stopScreenShare();\n        }\n    };\n\n    const openViduConnect = () => {\n        openVidu.current = new OpenVidu();\n        openVidu.current!.setAdvancedConfiguration({\n            // Always reconnect after network drop, to avoid frozen media streams\n            forceMediaReconnectionAfterNetworkDrop: true,\n            // Increase timeout, because on prooph board heavy rendering tasks can slow down stream playing\n            noStreamPlayingEventExceptionTimeout: 15000\n        })\n        session.current = openVidu.current.initSession();\n\n        session.current.on('publisherStartSpeaking', (e: any) => {\n            if (!speakingStreamsRef.current.includes(e.streamId)) {\n                speakingStreamsRef.current.push(e.streamId);\n                setPositionChanged(++localPositionChanged);\n            }\n        });\n\n        session.current.on('publisherStopSpeaking', (e: any) => {\n            const index = speakingStreamsRef.current.indexOf(e.streamId);\n            if (index !== -1) {\n                speakingStreamsRef.current.splice(index, 1);\n                setPositionChanged(++localPositionChanged);\n            }\n        });\n\n        subscribeToStreamCreated();\n        subscribeToDebuggingEvents();\n        connectToSession();\n\n        WebSocketConnection.listenForPositionUpdates(props.id, props.sessionId, updateRemoteUserPosition);\n    }\n\n    const onBeforeUnload = useCallback(() => {\n        if (session.current) {\n            session.current.disconnect();\n        }\n\n        if (screenShareSession.current) {\n            screenShareSession.current.disconnect();\n        }\n\n        session.current = undefined;\n        screenShareSession.current = undefined;\n        openVidu.current = undefined;\n        WebSocketConnection.stopListeningForPositionUpdates();\n    }, []);\n\n    useEffect(() => {\n        window.addEventListener('beforeunload', onBeforeUnload);\n\n        openViduConnect();\n        return () => {\n            window.removeEventListener('beforeunload', onBeforeUnload);\n            onBeforeUnload();\n        };\n    }, []);\n\n    useEffect(() => {\n        const panningListener = (translate: GraphPoint) => {\n            setGraphTranslate({x: translate.x, y: translate.y})\n        }\n\n        const zoomListener = (scale: number, translate: GraphPoint) => {\n            setGraphScale(scale);\n            setGraphTranslate(translate);\n        }\n\n        if(graph) {\n            const translate = graph.getCurrentTranslate();\n            setGraphTranslate({x: translate.x, y: translate.y});\n            setGraphScale(graph.getCurrentScale());\n\n            graph.onPanning(panningListener);\n            graph.onZoom(zoomListener);\n        }\n\n        return () => {\n            if(graph) {\n                graph.offPanning(panningListener);\n                graph.offZoom(zoomListener);\n            }\n        }\n    }, [graph]);\n\n    const localUserNotNull = !!localUser;\n\n    useEffect(() => {\n        if(graph && localUser) {\n            const scale = graph.getCurrentScale();\n            const translatedPoint = {\n                left: (-1 * graph.getCurrentTranslate().x) + (props.initialPosition.left / scale),\n                top: (-1 * graph.getCurrentTranslate().y) + (props.initialPosition.top / scale),\n            }\n            console.log(\"[vidu] local user\", translatedPoint, scale);\n            setLocalUser({...localUser, position: translatedPoint});\n        }\n    }, [graph, localUserNotNull]);\n\n    const isAnyMegaphoneActive = Boolean(\n        localUser && localUser.megaphoneOn ||\n        remoteUsersRef.current.find(remoteUser => remoteUser.megaphoneOn)\n    );\n\n    const remoteVideos = remoteUsersRef.current.map(remoteUser => (\n        <div>\n            <OpenViduVideo\n                key={remoteUser.id}\n                user={remoteUser}\n                isLocalUser={false}\n                sessionId={props.sessionId}\n                volume={\n                    !localUser ? 0 : Math.max(Math.min((700 - Math.sqrt(\n                        Math.pow((remoteUser.position.top - localUser.position.top), 2) +\n                        Math.pow((remoteUser.position.left - localUser.position.left), 2)\n                    )) / 500, 1), 0)\n                }\n                isSpeaking={speakingStreamsRef.current.includes(remoteUser.streamManager.stream.streamId)}\n                isAnyMegaphoneActive={isAnyMegaphoneActive}\n            />\n        </div>\n    ));\n\n    const remoteScreenShares = remoteScreenSharesRef.current.map(remoteScreenShare => (\n        <div>\n            <OpenViduScreenShare\n                screenShare={remoteScreenShare}\n                sessionId={props.sessionId}\n                onPositionChange={positionChange => handleScreenSharePositionChanged(positionChange, remoteScreenShare.userId)}\n            />\n        </div>\n    ))\n\n    return (\n        <div className=\"diagram-overlay\" style={{\n            position: \"absolute\",\n            top: 0,\n            left: 0,\n            width: \"100%\",\n            height: \"100%\",\n            pointerEvents: \"none\"\n        }}>\n            <div style={{\n                transform: `scale(${graphScale}) translate(${graphTranslate.x}px, ${graphTranslate.y}px)`,\n                transformOrigin: '0 0'\n            }}>\n                {localUser && (\n                    <div>\n                        <OpenViduVideo\n                            user={localUser}\n                            isLocalUser={true}\n                            sessionId={props.sessionId}\n                            onPositionChange={handleLocalUserPositionChanged}\n                            volume={0}\n                            isSpeaking={speakingStreamsRef.current.includes(localUser.streamManager.stream.streamId)}\n                            isAnyMegaphoneActive={isAnyMegaphoneActive}\n                        />\n                    </div>\n                )}\n                {remoteVideos}\n                {localScreenShare && (\n                    <div>\n                        <OpenViduScreenShare\n                            screenShare={localScreenShare}\n                            sessionId={props.sessionId}\n                            onPositionChange={handleScreenSharePositionChanged}\n                        />\n                    </div>\n                )}\n                {remoteScreenShares}\n            </div>\n\n            {localUser && (<>\n                <button\n                    onClick={toggleCamera}\n                    style={{ position: 'absolute', bottom: 20, left: sidebar.width + 20 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={localUser.cameraOn? \"video icon\" : \"icon-fas-video-slash-solid\"}\n                        style={localUser.cameraOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={toggleMic}\n                    style={{ position: 'absolute', bottom: 20, left: sidebar.width + 70 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={localUser.micOn ? 'icon microphone' : 'icon microphone slash'}\n                        style={localUser.micOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={toggleMegaphone}\n                    style={{ position: 'absolute', bottom: 20, left: sidebar.width + 120 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={'icon bullhorn'}\n                        style={localUser.megaphoneOn ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={toggleScreenShare}\n                    style={{ position: 'absolute', bottom: 20, left: sidebar.width + 170 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={'icon desktop'}\n                        style={localScreenShare ? { color: '#c10303' } : { color: '#878787' }}\n                    />}\n                />\n                <button\n                    onClick={toggleHandUp}\n                    style={{ position: 'absolute', bottom: 20, left: sidebar.width + 220 + \"px\", pointerEvents: 'all' }}\n                    className={'ui circular icon button big video-control'}\n                    children={<i\n                        className={'icon hand paper'}\n                        style={localUser.handUpOn ? { color: '#21AA21' } : { color: '#878787'}}\n                    />}\n                />\n\n                <div className={'show_buttons'}>\n                    <button\n                        onClick={() => toggleEmoji(\"thumbs up\")}\n                        style={{ position: 'absolute', bottom: 20, left: sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control'}\n                        children={<i\n                            className={'icon thumbs up'}\n                            style={localUser.showIconName == \"thumbs up\" ? { color: '#21AA21' } : { color: '#878787'}}\n                        />}\n                    />\n\n                    <button\n                        onClick={() => toggleEmoji(\"thumbs down\")}\n                        style={{ position: 'absolute', bottom: 60, left: sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control icon_button_menue'}\n                        children={<i\n                            className={'icon thumbs down icon_button_menue'}\n                            style={localUser.showIconName == \"thumbs down\" ? { color: '#CC1B1B' } : { color: '#878787'}}\n                        />}\n                    />\n\n                    <button\n                        onClick={() => toggleEmoji(\"beer\")}\n                        style={{ position: 'absolute', bottom: 100, left: sidebar.width + 270 + \"px\", pointerEvents: 'all' }}\n                        className={'ui circular icon button big video-control icon_button_menue'}\n                        children={<i\n                            className={'icon beer icon_button_menue'}\n                            style={localUser.showIconName == \"beer\" ? { color: '#FFFF00' } : { color: '#878787'}}\n                        />}\n                    />\n                </div>\n            </>)}\n        </div>\n    );\n};\n\nexport default Meeting;\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport JoinMeetingDialog from \"./JoinMeetingDialog\";\nimport Meeting from \"./Meeting\";\n\ninterface OwnProps {\n    sessionId: string;\n    id: string;\n    name: string;\n    avatar: string;\n    initialPosition: {left: number, top: number};\n    loadingMeetingRoom: boolean;\n}\n\ntype MeetingLobbyProps = OwnProps;\n\nconst MeetingLobby = (props: MeetingLobbyProps) => {\n    const [modalOpen, setModalOpen] = useState(true);\n    const [selectedVideoDevice, setSelectedVideoDevice] = useState<string>('');\n    const [selectedAudioDevice, setSelectedAudioDevice] = useState<string>('');\n\n    const canJoin = () => {\n        return selectedVideoDevice !== '' && selectedAudioDevice !== '';\n    }\n\n    const handleDevicesSelected = (devices: {audio: string, video: string}) => {\n        setSelectedAudioDevice(devices.audio);\n        setSelectedVideoDevice(devices.video);\n        setModalOpen(false);\n    }\n\n    const handleCancel = () => {\n        setModalOpen(false);\n    }\n\n    return (\n        <>\n            {canJoin() && <Meeting\n                sessionId={props.sessionId}\n                id={props.id}\n                name={props.name}\n                avatar={props.avatar}\n                initialPosition={props.initialPosition}\n                audioDevice={selectedAudioDevice}\n                videoDevice={selectedVideoDevice}\n            />}\n            <JoinMeetingDialog open={modalOpen}\n                onDevicesSelected={handleDevicesSelected}\n                onCancel={handleCancel}\n                loadingMeetingRoom={props.loadingMeetingRoom}\n           />\n        </>\n    )\n};\n\nexport default MeetingLobby;","import copy from \"copy-to-clipboard\";\nimport {List} from \"immutable\";\nimport * as _ from 'lodash';\nimport * as mxFactory from \"mxgraph/javascript/dist/build\";\nimport React, {Component} from \"react\";\nimport {RouteComponentProps} from \"react-router\";\nimport {Dimmer, Loader} from \"semantic-ui-react\";\nimport shortUUID from \"short-uuid\";\nimport uuid from \"uuid\";\nimport {default as socket} from \"../../api/ConfiguredSocket\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Routes from \"../../routes\";\nimport {Model as SocketModel} from \"../../Socket\";\nimport {UserModel} from \"../../User\";\nimport * as Action from \"../actions\";\nimport {useGraph} from \"../hooks/useGraph\";\nimport {BoardModel, BoardSync, BoardVersioning} from \"../model\";\nimport {BoardChanged} from \"../model/BoardChanged\";\nimport {\n    deriveGraphFromMxgraph,\n    flattenNodeChildren,\n    Graph as IioGraph,\n    MxGraphElement,\n    Node,\n    NodeType\n} from \"../model/Graph\";\nimport {HistoryAction, HistoryCellType} from \"../model/HistoryEntry\";\nimport {IIO} from \"../service/Cody\";\nimport {Gesture, RemoteMouseSync} from \"../service/RemoteMouseSync\";\nimport {initializeGraphEditor} from \"./MxGraphBoard/initializeGraphEditor\";\nimport MxGraphBoardLink from \"./MxGraphBoardLink\";\nimport MxGraphImageUpload from \"./MxGraphImageUpload\";\nimport MxGraphTaskLink from \"./MxGraphTaskLink\";\nimport {BoardRouteMatchParams} from \"./types\";\nimport JitsiMeetingLobby from \"./OpenVidu/JitsiMeetingLobby\";\nimport OpenViduMeetingLobby from \"./OpenVidu/MeetingLobby\";\nimport {MouseSync, useMouseSync} from \"../hooks/useMouseSync\";\n\n// Todo: Customized mxgraph js files are currently imported as scripts because they rely on globals. We need to change that!\ndeclare const inspectioUtils: {getTypeInclEdge: (cell: any) => HistoryCellType | false, getLabelText: (cell: any) => string, isContainer: (cell: any) => boolean, getMetadata: (cell: any) => string | undefined};\ndeclare const ispConst: any;\ndeclare const EditorUi: any;\ndeclare const Editor: any;\ndeclare const RESOURCE_BASE: string;\ndeclare const STYLE_PATH: string;\ndeclare const Graph: any;\ndeclare const urlParams: any;\ndeclare const mxLanguage: string;\ndeclare const mxResources: any;\ndeclare const mxUtils: any;\ndeclare const mxGraphModel: any;\ndeclare const mxAutoSaveManager: any;\ndeclare const mxCodec: any;\ndeclare const mxUndoableEdit: any;\ndeclare const mxEventObject: any;\ndeclare const mxEvent: any;\ndeclare const MXGRAPH_ROOT_UUIDS: string[];\ndeclare const mxGeometryChange: any;\ndeclare const mxChildChange: any;\ndeclare const mxValueChange: any;\ndeclare const mxTerminalChange: any;\ndeclare const mxStyleChange: any;\ndeclare const mxRectangle: any;\ndeclare const mxPoint: any;\n\n// Separate state props + dispatch props to their own interfaces.\nexport interface PropsFromState {\n    board: BoardModel.Board,\n    user: UserModel.UserInfo,\n    queue: BoardSync.BoardQueue,\n    socketStatus: SocketModel.StatusModel.Status,\n    liteMode: boolean,\n}\n\n// We can use `typeof` here to map our dispatch types to the props, like so.\nexport interface PropsFromDispatch {\n    fetchUserBoard: typeof Action.Query.fetchUserBoard,\n    onError: typeof NotifyAction.Command.error,\n    onInfo: typeof NotifyAction.Command.info,\n    saveBoard: typeof Action.Command.saveBoard,\n    syncBoard: typeof Action.Command.syncBoard,\n    stopBoardSync: typeof Action.Command.stopBoardSynchronisation,\n    dequeueBoardChanged: typeof Action.Command.dequeueBoardChangedEvents,\n    onLocalBoardChanged: typeof Action.Event.localBoardChanged,\n    onBoardImported: typeof Action.Event.boardImported,\n    onBoardImportStarted: typeof Action.Event.boardImportStarted,\n    onBoardExported: typeof Action.Event.boardExported,\n    onBoardInitialized: typeof Action.Event.boardInitialized,\n    onLocalBoardUpdatedWithRemoteChange: typeof Action.Event.localBoardUpdatedWithRemoteChange,\n    onActiveGraphElementChanged: typeof Action.Event.activeGraphElementChanged,\n    onActiveGraphElementLabelChanged: typeof Action.Event.activeGraphElementLabelChanged,\n    onActiveGraphElementMetadataChanged: typeof Action.Event.activeGraphElementMetadataChanged,\n    clearBoardHistory: typeof Action.Command.clearBoardHistory,\n    filterElementsTree: typeof Action.Command.filterElementsTree,\n    toggleElementDetails: typeof Action.Command.toggleElementDetails,\n    toggleCodyConsole: typeof Action.Command.toggleCodyConsole,\n}\n\ninterface OwnProps {}\n\nexport type MxGraphBoardProps = PropsFromState & PropsFromDispatch & OwnProps & RouteComponentProps<BoardRouteMatchParams>;\n\ntype ImageUploadedListener = (imageName: string, imageUrl: string) => void;\ntype BoardLinkListener = (link: string) => void;\ntype TaskLinkListener = (link: string) => void;\n\nclass MxGraphBoard extends Component<MxGraphBoardProps, {readyToJoinVidu: boolean}> {\n    private mxGraph: any;\n    private divGraph: React.RefObject<any>;\n    private divDimmer: React.RefObject<any>;\n    private editorUi: any;\n    private codec: any;\n    private initialized: boolean = false;\n    private mouseSync: RemoteMouseSync | undefined;\n    private iioCody: IIO | undefined;\n    private lastFocusedCells: string = '';\n    private lastClicks: string|null = null;\n    private uploadOpenHandle: any;\n    private boardLinkHandle: any;\n    private taskLinkHandle: any;\n    private imageUploadedListener: null | ImageUploadedListener = null;\n    private boardLinkListener: null | BoardLinkListener = null;\n    private taskLinkListener: null | TaskLinkListener = null;\n    private setUsedGraph: (graph: IioGraph | undefined) => void;\n    private setUsedMouseSync: (mouseSync: MouseSync | undefined) => void;\n    private activeGraphElement: any;\n    private viduEnabled = false;\n    private jitsiEnabled = false;\n    private viduUser: string | null = null;\n\n    // Internal copy of the Board passed via props, to modify copy when editing the board without rerendering of the component\n    private board: BoardModel.Board | undefined;\n\n    constructor(props: MxGraphBoardProps) {\n        super(props);\n        this.state = {\n            readyToJoinVidu: false\n        };\n        this.LoadGraph = this\n            .LoadGraph\n            .bind(this);\n\n        this.divGraph = React.createRef();\n        this.divDimmer = React.createRef();\n        this.codec = new mxCodec();\n        this.codec.lookup = (id: string) => {\n            const cell = this.editorUi.editor.graph.model.getCell(id);\n\n            if(!cell) {\n                return null;\n            }\n\n            return cell;\n        }\n\n        const [, setGraph] = useGraph();\n\n        this.setUsedGraph = setGraph;\n\n        const [, setMouseSync] = useMouseSync();\n\n        this.setUsedMouseSync = setMouseSync;\n\n        if(props.location.search) {\n            const params = new URLSearchParams(props.location.search);\n            if(params.get('vidu')) {\n                this.viduEnabled = true;\n                this.jitsiEnabled = false;\n            }\n            if(params.get('jitsi')) {\n                this.jitsiEnabled = true;\n                this.viduEnabled = false;\n            }\n\n            if(params.get('user')) {\n                this.viduUser = params.get('user');\n            }\n        }\n    }\n\n    public componentDidMount() {\n        this.props.fetchUserBoard(this.props.match.params.uid);\n    }\n\n    public shouldComponentUpdate(nextProps: MxGraphBoardProps, nextState: any): boolean {\n        if(!this.board && nextProps.board && nextProps.user.name !== \"\") {\n            if(!nextProps.board.detailsFetched) {\n                // Fetching user board triggered in componentDidMount is not finished yet\n                return false;\n            }\n            this.initGraphBoard(nextProps);\n            return true;\n        }\n\n        if(this.board && this.board.uid !== nextProps.board.uid) {\n            // Back btn was used to navigate back to a linking board. The BoardRedirect component forces remounting of MxGraphBoard\n            nextProps.history.replace(Routes.BoardRedirect, {href: Routes.compileInspectioBoardWorkspace(nextProps.board.uid)});\n        }\n\n        if(this.editorUi && !this.board!.writeAccess && nextProps.board.writeAccess) {\n            // Disable read only mode\n            this.editorUi.editor.graph.setEnabled(true);\n        }\n\n        if(this.editorUi && this.props.liteMode !== nextProps.liteMode) {\n            this.setLiteMode(nextProps);\n        }\n\n        if(this.board && this.board.videoSessionActive !== nextProps.board.videoSessionActive) {\n            this.jitsiEnabled = !!nextProps.board.videoSessionActive;\n            if(this.initialized && !this.state.readyToJoinVidu) {\n                this.setState({readyToJoinVidu: true});\n            }\n            return true;\n        }\n\n        if(this.editorUi && !nextProps.queue.isEmpty()) {\n            let handledChanges = 0;\n            nextProps.queue.forEach(boardChanged => {\n                const changes: any[] = [];\n\n                if(this.board && !boardChanged.toBoardVersion().isNewerThan(this.board.version)) {\n                    console.log(\"Skipped outdated remote board change: \", boardChanged.toJSON());\n                    return;\n                }\n\n                handledChanges++;\n\n                boardChanged.changeSet.forEach(patch => {\n                    const node = mxUtils.parseXml(patch);\n                    const change = this.codec.decode(node.documentElement);\n                    change.model = this.editorUi.editor.graph.model;\n                    change.execute();\n                    changes.push(change);\n                    this.syncActiveGraphElementWithRemoteChange(change);\n                });\n\n                const edit = new mxUndoableEdit(this.editorUi.editor.graph.model, false);\n                edit.changes = changes;\n\n                edit.notify = () =>\n                {\n                    edit.source.fireEvent(new mxEventObject(mxEvent.CHANGE,\n                        'edit', edit, 'changes', edit.changes));\n\n                }\n\n                this.editorUi.editor.graph.model.fireEvent(new mxEventObject(mxEvent.CHANGE,\n                    'edit', edit, 'changes', changes));\n\n                this.syncChangesWithCody(boardChanged, changes).catch(err => console.error(err));\n            });\n\n            if(handledChanges > 0) {\n                this.saveBoard(nextProps.queue.last(new BoardSync.BoardChanged(BoardSync.defaultBoardChangedProps)).toBoardVersion().asHead());\n            }\n\n            nextProps.dequeueBoardChanged(nextProps.queue);\n\n            if(this.editorUi) {\n                this.checkScrollToCells(nextProps);\n            }\n\n            return false;\n        }\n\n        if(this.editorUi && nextProps.board.shouldImport) {\n            this.editorUi.actions.get('import').funct((graph: any) => {\n                const xml = mxUtils.getXml(this.editorUi.editor.getGraphXml());\n                this.board = this.board!.updateXml(xml, nextProps.user.uid);\n\n                nextProps.onBoardImported(nextProps.board.uid, this.board, deriveGraphFromMxgraph(this.editorUi.editor.graph, this.editorUi));\n            });\n            nextProps.onBoardImportStarted(this.board!.uid);\n        }\n\n        if(this.editorUi && nextProps.board.shouldExport) {\n            this.editorUi.actions.get('export').funct();\n            nextProps.onBoardExported(nextProps.board.uid);\n        }\n\n        if(this.editorUi) {\n            this.checkScrollToCells(nextProps);\n        }\n\n        if(!this.state.readyToJoinVidu && nextState.readyToJoinVidu) {\n            console.log(\"Component should update since it is initialized now!\");\n            return true;\n        }\n\n        return false;\n    }\n\n    public componentWillUnmount() {\n        if(this.editorUi) {\n            this.editorUi.destroy();\n        }\n        this.setUsedGraph(undefined);\n        this.setUsedMouseSync(undefined);\n        document.body.style.overflow = 'auto';\n        document.title = 'prooph board';\n\n        const activeUsers = document.getElementById('topmenuUsers');\n        if (activeUsers) {\n            activeUsers.innerHTML = '';\n        }\n\n        if(this.props.board) {\n            this.props.stopBoardSync(this.props.board.uid);\n            this.props.clearBoardHistory(this.props.board.uid);\n\n        }\n\n        if(this.mouseSync) {\n            this.mouseSync.stopSync({\n                userId: this.props.user.uid,\n                boardId: this.props.board.uid,\n            });\n        }\n\n        if(this.iioCody) {\n            this.iioCody.onSyncRequired(undefined);\n            this.iioCody.disconnect();\n        }\n    }\n\n\n\n    public render() {\n        return (\n            <>\n                <div className=\"graph-container disable-user-select\" ref={this.divGraph} id=\"divGraph\" />\n                <div ref={this.divDimmer} >\n                    <Dimmer active={true} className=\"page\"><Loader size=\"large\">Loading Board</Loader></Dimmer>\n                </div>\n                {this.props.board && <MxGraphImageUpload boardId={this.props.board.uid}\n                                    openHandle={openHandle => this.uploadOpenHandle = openHandle}\n                                    onCancel={() => {\n                                        this.uploadOpenHandle(false);\n                                    }}\n                                    onFileUploaded={(imageName, imageUrl) => {\n                                        if(this.imageUploadedListener) {\n                                            this.imageUploadedListener(imageName, imageUrl);\n                                        }\n                                    }}\n                />}\n                {this.props.board && <MxGraphBoardLink boardId={this.props.board.uid}\n                                    openHandle={openHandle => this.boardLinkHandle = openHandle}\n                                    onCancel={() => {\n                                        this.boardLinkHandle(false);\n                                    }}\n                                    onLinkChosen={(link) => {\n                                        if(this.boardLinkListener) {\n                                            this.boardLinkListener(link);\n                                        }\n                                    }}\n                />}\n                {this.props.board && <MxGraphTaskLink\n                                   openHandle={openHandle => this.taskLinkHandle = openHandle}\n                                   onCancel={() => {\n                                       this.taskLinkHandle(false);\n                                   }}\n                                   onLinkChosen={(link) => {\n                                       if(this.taskLinkListener) {\n                                           this.taskLinkListener(link);\n                                       }\n                                   }}\n                />}\n                {this.props.board && this.viduEnabled && <OpenViduMeetingLobby\n                    sessionId={this.props.board.uid}\n                    id={this.viduUser || this.props.user.uid}\n                    name={this.props.user.name}\n                    avatar={this.props.user.avatarUrl}\n                    initialPosition={{left: Math.floor(window.innerWidth / 2), top: Math.floor(window.innerHeight / 2)}}\n                    loadingMeetingRoom={!this.state.readyToJoinVidu}\n                />}\n                {this.props.board && this.jitsiEnabled && <JitsiMeetingLobby\n                    sessionId={this.props.board.uid}\n                    id={this.viduUser || this.props.user.uid}\n                    name={this.props.user.name}\n                    avatar={this.props.user.avatarUrl}\n                    initialPosition={{left: Math.floor(window.innerWidth / 2), top: Math.floor(window.innerHeight / 2)}}\n                    loadingMeetingRoom={!this.state.readyToJoinVidu}\n                />}\n            </>\n        );\n    }\n\n    private initGraphBoard(props: MxGraphBoardProps) {\n        this.mxGraph = mxFactory();\n        this.LoadGraph(props,{}, this.mxGraph);\n\n        document.body.style.overflow = 'hidden';\n        document.title = props.board.name + ' - prooph board';\n        this.board = props.board;\n    }\n\n    private saveBoard(remoteVersion?: BoardVersioning.BoardVersion, triggerSave?: boolean) {\n        const xml = mxUtils.getXml(this.editorUi.editor.getGraphXml());\n\n        if(!remoteVersion) {\n            this.board = this.board!.updateXml(xml, this.props.user.uid);\n\n            console.log(\"board version on save local change: \", this.board.version.version);\n        } else {\n            this.board = this.board!.updateXmlAfterRemoteChange(xml, remoteVersion);\n            console.log(\"board version on save remote change: \", this.board.version.version);\n            this.props.onLocalBoardUpdatedWithRemoteChange(\n                this.board.uid, this.board,\n                deriveGraphFromMxgraph(\n                    this.editorUi.editor.graph,\n                    this.editorUi\n                ));\n        }\n\n        if(triggerSave) {\n            this.props.saveBoard(this.board, deriveGraphFromMxgraph(\n                this.editorUi.editor.graph,\n                this.editorUi\n            ));\n        }\n    }\n\n    private LoadGraph(props: MxGraphBoardProps, data: any, mxGraph: any) {\n        const container = this.divGraph.current;\n\n        container.innerHTML = '';\n\n        mxUtils.alert = (e: string) => {\n            this.props.onError('Board Error', e);\n        };\n\n        // The first two cells always get the same ids, because they are internal cells (board root and model root)\n        // They are equal on all boards so that remote syncs work properly as well as imports and exports\n        let uuidPool = _.clone(MXGRAPH_ROOT_UUIDS);\n        const uuidT = shortUUID();\n\n        mxGraphModel.prototype.createId = (cell: any): string => {\n            const id = uuidPool.pop();\n\n            if(id) {\n                return id;\n            }\n\n            return uuidT.fromUUID(uuid.v4());\n        }\n\n        const editorUiInit = EditorUi.prototype.init;\n\n        EditorUi.prototype.init = function()\n        {\n            editorUiInit.apply(this, arguments);\n            this.actions.get('export').setEnabled(false);\n        };\n\n        // Adds required resources (disables loading of fallback properties, this can only\n        // be used if we know that all keys are defined in the language specific file)\n        mxResources.loadDefaultBundle = false;\n\n        const bundle = mxResources.getDefaultBundle(RESOURCE_BASE, mxLanguage) ||\n            mxResources.getSpecialBundle(RESOURCE_BASE, mxLanguage);\n\n        // Fixes possible asynchronous requests\n        mxGraph.mxUtils.getAll([bundle, STYLE_PATH + '/'+ispConst.THEME+'/style.xml'], (xhr: any) =>\n        {\n            // Adds bundle text to resources\n            mxResources.parse(xhr[0].getText());\n\n            // Configures the default graph theme\n            const themes: any = {};\n\n            themes[Graph.prototype.defaultThemeName] = xhr[1].getDocumentElement();\n\n            // Main\n            this.editorUi = new EditorUi(new Editor(urlParams.chrome === '0', themes), container, false, props.board.name, 'boardSidebarContainer');\n\n            initializeGraphEditor(\n                this.editorUi,\n                props.history,\n                copy,\n                Routes.makeWorkspaceDeeplinkFacory(props.board.uid),\n                (title, msg, type) => {\n                    if(type === 'info') {\n                        props.onInfo(title, msg);\n                    } else {\n                        props.onError(title, msg);\n                    }\n                }\n            );\n\n            this.attachImageUploadListener();\n            this.attachLinkBoardListener();\n            this.attachLinkTaskListener();\n            this.attachImageReplaceListener();\n            this.attachChangeActiveGraphElementListener();\n            this.attachSyncLabelChangedListener();\n            this.attachLookupElementListener(props);\n            this.attachShowElementDetailsListener();\n            this.attachCellConnectedListener();\n            this.attachCodyListener();\n            this.initializeAutoSaveManager(props);\n            this.setLiteMode(props);\n\n            if(props.board.xml) {\n                const graphDoc = mxUtils.parseXml(props.board.xml);\n                this.editorUi.editor.graph.model.beginUpdateWithoutChangeNotifications();\n                try {\n                    this.editorUi.editor.graph.enableLazyTextPaint();\n                    this.editorUi.editor.graph.importGraphModel(graphDoc.documentElement, undefined, undefined, undefined, false);\n                }\n                finally {\n                    this.editorUi.editor.graph.model.endUpdateWithoutChangeNotifications();\n                    this.editorUi.editor.graph.disableLazyTextPaint();\n                }\n\n                // Read only mode\n                this.editorUi.editor.graph.setEnabled(props.board.writeAccess);\n                this.editorUi.editor.graph.initContainerStyles();\n\n                if(this.viduEnabled || this.jitsiEnabled) {\n                    this.editorUi.editor.graph.zoom(1, true, false, false);\n                } else {\n                    this.editorUi.editor.graph.zoom(0.19, true, false, false);\n                    this.editorUi.editor.graph.showAll();\n                }\n\n                if(props.location.search) {\n                    const params = new URLSearchParams(props.location.search);\n                    if(params.get('clicks')) {\n                        this.lastClicks = params.get('clicks');\n                    } else {\n                        this.lastClicks = '0';\n                    }\n                }\n\n                window.setTimeout(() => {\n                    this.initialized = true;\n\n                    this.setLiteMode(this.props);\n                    const cellsFocused = this.checkScrollToCells(props);\n\n                    if(!cellsFocused && !this.viduEnabled && !this.jitsiEnabled) {\n                        this.editorUi.editor.graph.center();\n                    }\n\n                    this.divDimmer.current.innerHTML = '';\n                }, props.location.search? 3000 : 1000);\n            } else {\n                this.initialized = true;\n                if((this.viduEnabled || this.jitsiEnabled) && !this.state.readyToJoinVidu) {\n                    console.log(\"set state initialized without timeout func\");\n                    this.setState({readyToJoinVidu: true});\n                }\n                this.divDimmer.current.innerHTML = '';\n            }\n\n            this.editorUi.editor.graph.setDefaultParent(this.editorUi.editor.graph.model.getCell(MXGRAPH_ROOT_UUIDS[0]));\n            this.setUsedGraph(deriveGraphFromMxgraph(this.editorUi.editor.graph, this.editorUi));\n\n            uuidPool = [];\n            props.syncBoard(props.board.uid, props.user.uid, props.user.name);\n            props.onBoardInitialized(props.board, deriveGraphFromMxgraph(\n                this.editorUi.editor.graph,\n                this.editorUi\n            ));\n            this.initMouseSync(props);\n        })\n    }\n\n    private attachImageUploadListener (): void {\n        this.editorUi.editor.graph.onInsertImage((processImageUrl: (imgName: string, imgUrl: string) => void) => {\n            this.imageUploadedListener = (imgName: string, imgUrl: string) => {\n                processImageUrl(imgName, imgUrl);\n                this.uploadOpenHandle(false);\n                this.imageUploadedListener = null;\n            };\n            this.uploadOpenHandle(true);\n        });\n    }\n\n    private attachLinkBoardListener (): void {\n        this.editorUi.editor.graph.onLinkBoard((currentLink: null|string, processBoardLink: (boardLink: string) => void) => {\n            this.boardLinkListener = (boardLink: string) => {\n                processBoardLink(boardLink);\n                this.boardLinkHandle(false);\n                this.boardLinkListener = null;\n            };\n            this.boardLinkHandle(true, currentLink);\n        });\n    }\n\n    private attachLinkTaskListener (): void {\n        this.editorUi.editor.graph.onLinkTask((currentLink: null|string, processTaskLink: (taskLink: string) => void) => {\n            this.taskLinkListener = (taskLink: string) => {\n                processTaskLink(taskLink);\n                this.taskLinkHandle(false);\n                this.taskLinkListener = null;\n            };\n            this.taskLinkHandle(true, currentLink);\n        });\n    }\n\n    private attachImageReplaceListener (): void {\n        this.editorUi.editor.graph.onReplaceImage((imageId: null|string, processImageUrl: (imgName: string, imgUrl: string) => void) => {\n            this.imageUploadedListener = (imgName, imgUrl: string) => {\n                processImageUrl(imgName, imgUrl);\n                this.uploadOpenHandle(false);\n                this.imageUploadedListener = null;\n            };\n            this.uploadOpenHandle(true, imageId);\n        });\n    }\n\n    private attachChangeActiveGraphElementListener (): void {\n        this.editorUi.editor.graph.onChangeActiveGraphElement((\n            cell: any,\n            updateMetadata: (schema: string) => void,\n            updateSimilarElements: (elementIds: string[], schema: string) => void\n        ) => {\n            if(!cell) {\n                this.activeGraphElement = undefined;\n                this.props.onActiveGraphElementChanged(this.props.board.uid, undefined);\n                return;\n            }\n\n            if(cell.isEdge()) {\n                let edgeLabel = 'Edge';\n                let edgeData;\n\n                if(cell.source && cell.target) {\n                    edgeLabel = inspectioUtils.getLabelText(cell.source) + ' -> ' + inspectioUtils.getLabelText(cell.target);\n                    edgeData = {\n                        source: cell.source.getId(),\n                        target: cell.target.getId(),\n                    };\n                }\n\n                this.props.onActiveGraphElementChanged(this.props.board.uid, {\n                    id: cell.getId(),\n                    type: NodeType.edge,\n                    label: edgeLabel,\n                    metadata: inspectioUtils.getMetadata(cell),\n                    edgeData,\n                    updateMetadata,\n                    updateSimilarElements\n                });\n                return;\n            }\n\n            if(cell.isVertex()) {\n                this.props.onActiveGraphElementChanged(this.props.board.uid, {\n                    id: cell.getId(),\n                    type: inspectioUtils.getTypeInclEdge(cell) as NodeType,\n                    label: inspectioUtils.getLabelText(cell),\n                    metadata: inspectioUtils.getMetadata(cell),\n                    updateMetadata,\n                    updateSimilarElements\n                });\n            }\n\n            this.activeGraphElement = cell;\n        });\n    }\n\n    private attachSyncLabelChangedListener (): void {\n        this.editorUi.editor.graph.addListener(mxEvent.LABEL_CHANGED, (sender: any, evt: any) => {\n            const cell = evt.getProperty('cell');\n            if(cell.isVertex() && this.activeGraphElement && this.activeGraphElement.getId() === cell.getId()) {\n                this.props.onActiveGraphElementLabelChanged(this.props.board.uid, cell.getId(), inspectioUtils.getLabelText(cell));\n            }\n        });\n    }\n\n    private syncActiveGraphElementWithRemoteChange (change: any): void {\n        if(change instanceof mxValueChange) {\n            const cell = change.cell;\n            if(cell && cell.isVertex() && this.activeGraphElement && this.activeGraphElement.getId() === cell.getId()) {\n                this.props.onActiveGraphElementLabelChanged(this.props.board.uid, cell.getId(), inspectioUtils.getLabelText(cell));\n                this.props.onActiveGraphElementMetadataChanged(this.props.board.uid, cell.getId(), inspectioUtils.getMetadata(cell));\n            }\n        }\n    }\n\n    private attachLookupElementListener (props: MxGraphBoardProps): void {\n        this.editorUi.editor.graph.onLookupElement((elementLabel: string, elementType?: string) =>  {\n            if(elementType) {\n                elementLabel = `type:${elementType.toLowerCase()};${elementLabel}`;\n            }\n            props.filterElementsTree(props.board.uid, elementLabel, true)\n        });\n    }\n\n    private initializeAutoSaveManager (props: MxGraphBoardProps): void {\n        const mxAutoSaveGraphModelChanged = mxAutoSaveManager.prototype.graphModelChanged;\n\n        const localAutoSave = new mxAutoSaveManager(this.editorUi.editor.graph);\n\n        localAutoSave.autoSaveDelay = 1;\n        localAutoSave.autoSaveThrottle = 1;\n        localAutoSave.autoSaveThreshold = 1;\n        localAutoSave.graphModelChanged = (changes: any) => {\n            const nodes: any[] = [];\n\n\n            const sortedChanges = this.sortChanges(changes);\n\n            sortedChanges.forEach((change: any) => nodes.push(mxUtils.getXml(this.codec.encode(change))));\n\n            this.saveBoard(undefined, true);\n\n            const {action, type, label, cellId} = this.detectHistoryAttributesFromChanges(changes);\n\n            const boardChanged = BoardSync.localBoardChanged(\n                props.board.uid,\n                List(nodes),\n                this.board!.version.version,\n                props.user.uid,\n                action,\n                type,\n                label,\n                cellId\n            );\n\n            props.onLocalBoardChanged(boardChanged);\n\n            this.syncChangesWithCody(boardChanged, changes).catch(err => console.error(err));\n\n            mxAutoSaveGraphModelChanged.call(localAutoSave, changes);\n        };\n    }\n\n    private setLiteMode (props: MxGraphBoardProps): void {\n        if(props.liteMode) {\n            this.editorUi.editor.graph.enableLiteMode();\n        } else {\n            this.editorUi.editor.graph.disableLiteMode();\n        }\n    }\n\n    private attachShowElementDetailsListener(): void {\n        this.editorUi.editor.graph.onShowMetadata((focusMetadataEditor: boolean) => {\n            this.props.toggleElementDetails(this.props.board.uid, true, focusMetadataEditor);\n        })\n    }\n\n    private attachCellConnectedListener(): void {\n        this.editorUi.editor.graph.addListener(mxEvent.CELL_CONNECTED, (sender: any, evt: any) => {\n            const isTarget = !evt.getProperty('source');\n            if(isTarget) {\n                window.setTimeout(() => {\n                    this.editorUi.editor.graph.setSelectionCell(evt.getProperty('terminal'));\n                }, 10);\n            }\n        });\n    }\n\n    private checkScrollToCells (props: MxGraphBoardProps): boolean {\n        if(!this.initialized) {\n            return false;\n        }\n\n        let cellsFocused = false;\n\n        if(props.board.xml && props.location.search) {\n            const params = new URLSearchParams(props.location.search);\n\n            const graph = this.editorUi.editor.graph;\n            const cellsToFocus = params.get('cells');\n\n            if(cellsToFocus) {\n                if(this.lastFocusedCells === cellsToFocus && this.lastClicks === params.get('clicks')) {\n\n                    return  false;\n                }\n\n                const animateScroll = this.lastClicks !== null;\n\n                this.lastFocusedCells = cellsToFocus;\n                this.lastClicks = params.get('clicks');\n\n                const cellIds = cellsToFocus.split(\";\");\n                const cells: any[] = [];\n\n                cellIds.forEach(cellId => {\n                    const cell = graph.model.getCell(cellId);\n                    if(cell) {\n                        cells.push(cell);\n                    }\n                });\n\n                if(cells.length > 0) {\n                    graph.scrollCellsIntoView(cells, true, true, animateScroll);\n                    cellsFocused = true;\n\n                    // tslint:disable-next-line:radix\n                    if(parseInt(params.get('select') || '0') === 1) {\n                        graph.setSelectionCells(cells);\n                    }\n                }\n            }\n        }\n\n        window.setTimeout(() => {\n            if((this.viduEnabled || this.jitsiEnabled) && !this.state.readyToJoinVidu) {\n                console.log(\"set state initialized in timout func\");\n                this.setState({readyToJoinVidu: true});\n            }\n        }, 1000);\n\n        return cellsFocused;\n    }\n\n    private attachCodySyncListener (): void {\n        if(this.iioCody) {\n            this.iioCody.onSyncRequired(async () => {\n                if(this.iioCody) {\n                    const graph = this.editorUi.editor.graph;\n                    const cells = graph.getAllVertexElementsOfActiveLayer();\n                    let chunk: Node[] = [];\n                    const deepLinkFactory = Routes.makeWorkspaceDeeplinkFacory(this.props.board!.uid);\n\n                    if(cells && Array.isArray(cells)) {\n                        for(const cell of cells) {\n                            chunk.push(...flattenNodeChildren([new MxGraphElement(cell, graph.getModel(), false, deepLinkFactory)]))\n                            if(chunk.length >= 10) {\n                                const syncSuccess = await this.iioCody!.syncNodes(this.props.board.uid, chunk);\n                                if(!syncSuccess) {\n                                    return;\n                                }\n\n                                chunk = [];\n                            }\n                        }\n\n                        if(chunk.length > 0) {\n                            const syncLastChunkSuccess = await this.iioCody!.syncNodes(this.props.board.uid, chunk);\n                            if(!syncLastChunkSuccess) {\n                                return false;\n                            }\n                        }\n                    }\n\n                    this.iioCody.syncFinished();\n                }\n            })\n        }\n    }\n\n    private attachCodyListener (): void {\n        const graph = this.editorUi.editor.graph;\n        graph.onTriggerCody((cells: any[]) => {\n            if(this.props.board && !this.props.board.shouldShowCodyConsole) {\n                this.props.toggleCodyConsole(this.props.board.uid, true);\n            }\n\n            if(this.iioCody) {\n                const nodes = cells.map(cell => new MxGraphElement(cell, graph.getModel(), false, Routes.makeWorkspaceDeeplinkFacory(this.props.board!.uid)));\n                this.iioCody.trigger.Cody(this.props.board.uid, flattenNodeChildren(nodes).filter(node => node.getType() !== NodeType.edge));\n            }\n        })\n    }\n\n    private initMouseSync(props: MxGraphBoardProps) {\n        let topMenuHeight = 0;\n        const graph = this.editorUi.editor.graph;\n        const topMenu = document.getElementById('topmenu');\n\n        if(topMenu) {\n            topMenuHeight = topMenu.clientHeight;\n        }\n\n        this.mouseSync = new RemoteMouseSync(socket, this.divGraph.current, graph, (point) => {\n            const scale = graph.view.scale;\n            const tr = graph.view.translate;\n\n            const x = (point.x + tr.x) * scale;\n            const y = (point.y + tr.y) * scale + topMenuHeight;\n\n            return {x,y};\n        });\n\n        this.mouseSync.onUserJoined((userId, name, avatar, color) => this.addActiveUser(props, userId, name, avatar, color));\n        this.mouseSync.onUserLeft(userId => this.removeActiveUser(userId));\n\n        this.mouseSync.startSync({\n            userId: props.user.uid,\n            name: props.user.displayName,\n            avatar: props.user.avatarUrl,\n            boardId: props.board.uid,\n        });\n\n        this.iioCody = IIO;\n        this.attachCodySyncListener();\n\n        graph.addListener(mxEvent.FIRE_MOUSE_EVENT, (sender: any, evt: any) => {\n            const evtName = evt.getProperty('eventName');\n            const me = evt.getProperty('event');\n\n            if(!me) {\n                return;\n            }\n\n            const scale = graph.view.scale;\n            const tr = graph.view.translate;\n            const x = me.getGraphX() / scale - tr.x;\n            const y = me.getGraphY() / scale - tr.y;\n\n            if(evtName === mxEvent.MOUSE_MOVE && this.mouseSync && !graph.panningHandler.isActive() && !graph.panningHandler.physicsActive) {\n                this.mouseSync.emitUserMouseMove(   {\n                    userId: props.user.uid,\n                    boardId: props.board.uid,\n                    point: {x,y},\n                    vT: tr,\n                    scale,\n                    isPanning: false,\n                })\n            }\n        });\n\n        graph.addListener(graph.EVT_USER_IS_PANNING, (sender: any, evt: any) => {\n            if(this.mouseSync) {\n                const me = evt.getProperty('me');\n                const scale = evt.getProperty('scale');\n                const tr = evt.getProperty('translate');\n                const mouseDelta = evt.getProperty('mouseDelta');\n\n                if(!me) {\n                    return;\n                }\n\n                const x = me.getGraphX() / scale - tr.x;\n                const y = me.getGraphY() / scale - tr.y;\n\n                this.mouseSync.emitUserMouseMove({\n                    userId: props.user.uid,\n                    boardId: props.board.uid,\n                    point: {x,y},\n                    vT: tr,\n                    scale,\n                    isPanning: true,\n                }, mouseDelta)\n            }\n        });\n\n        graph.addListener(graph.EVT_PANNING_PHYSICS_CLEARED, () => {\n            if(this.mouseSync) {\n                this.mouseSync.syncLastKnownAbsolutePointsAfterPanning();\n            }\n        })\n\n\n        graph.addListener(graph.EVT_USER_IS_ZOOMING, (sender: any, evt: any) => {\n            this.mouseSync!.emitUserMouseScroll({\n                userId: props.user.uid,\n                boardId: props.board.uid,\n                vT: graph.view.translate,\n                scale: graph.view.scale,\n            })\n        });\n\n        graph.addListener(graph.EVT_USER_IS_TYPING, (sender: any, evt: any) => {\n            const isTyping = evt.getProperty('typing');\n            this.mouseSync!.emitUserGestureChanged({\n                userId: props.user.uid,\n                boardId: props.board.uid,\n                gesture: isTyping? Gesture.Typing : Gesture.Default,\n            });\n        });\n\n        graph.addListener(graph.EVT_USER_IS_MOVING, (sender: any, evt: any) => {\n            const isMoving = evt.getProperty('moving');\n            this.mouseSync!.emitUserGestureChanged({\n                userId: props.user.uid,\n                boardId: props.board.uid,\n                gesture: isMoving? Gesture.Moving : Gesture.Default,\n            });\n        });\n\n        graph.addListener(graph.EVT_USER_IS_AUTO_SCROLLING, (sender: any, evt: any) => {\n           if(this.mouseSync) {\n               this.mouseSync.emitUserIsAutoScrolling({\n                   userId: props.user.uid,\n                   boardId: props.board.uid,\n                   scale: evt.getProperty('scale'),\n                   translate: evt.getProperty('translate'),\n                   isPanning: evt.getProperty('isPanning'),\n               });\n           }\n        });\n\n        this.setUsedMouseSync(this.mouseSync);\n    }\n\n    private addActiveUser(props: MxGraphBoardProps, userId: UserModel.UserId, name: UserModel.DisplayName, avatar: UserModel.AvatarUrl, color: string) {\n        if(userId === props.user.uid) {\n            return;\n        }\n\n        const topMenuUsers = document.getElementById('topmenuUsers');\n\n        const item = document.createElement('div');\n        item.classList.add('item');\n\n        const obsClass = 'observable';\n\n        const label = document.createElement('div');\n        label.id = 'topmenuUsers-' + userId;\n        label.classList.add('ui', 'circular', 'label', obsClass, 'user');\n        label.style.backgroundColor = color;\n\n        label.style.backgroundSize = 'cover';\n        if(avatar !== \"\"){\n            label.style.backgroundImage = \"url('\"+avatar+\"')\";\n        } else {\n            label.innerText = name[0].toUpperCase();\n        }\n        label.setAttribute('data-tooltip', name);\n        label.setAttribute('data-position', 'bottom center');\n\n        label.addEventListener('click', e => this.toggleObserveUser(e.target!));\n\n        item.append(label);\n        topMenuUsers!.append(item);\n    }\n\n    private removeActiveUser(userId: UserModel.UserId): void {\n        const label = document.getElementById('topmenuUsers-'+userId);\n\n        if(label) {\n            label.parentElement!.remove();\n        }\n    }\n\n    private toggleObserveUser(label: EventTarget) {\n        if(label instanceof HTMLElement) {\n            if(label.classList.contains('observed')) {\n                label.classList.remove('observed');\n                this.mouseSync!.stopObservingUser();\n            } else {\n                this.unsetCurrentObservedUser();\n                this.mouseSync!.stopObservingUser();\n                label.classList.add('observed');\n                this.mouseSync!.observeUser(this.getUserIdFromLabelId(label.id))\n            }\n        }\n    }\n\n    private unsetCurrentObservedUser() {\n        const topMenuUsers = document.getElementById('topmenuUsers');\n\n        topMenuUsers!.childNodes.forEach(child => {\n            if(child.firstChild instanceof HTMLElement) {\n                child.firstChild.classList.remove('observed');\n            }\n        })\n    }\n\n    private getUserIdFromLabelId(labelId: string): UserModel.UserId {\n        return labelId.replace('topmenuUsers-', '');\n    }\n\n    private syncChangesWithCody = async (transaction: BoardChanged, changes: any[]): Promise<void> => {\n        if(!this.iioCody || !this.iioCody.syncRequired()) {\n            console.log(\"Skipping sync with cody, because no server is listening for syncs at the moment\")\n            return;\n        }\n\n        console.log(\"syncing changes with cody\", transaction.toJS());\n\n        const graph = this.editorUi.editor.graph;\n        const boardId = this.props.board.uid;\n        const deepLinkFactory = Routes.makeWorkspaceDeeplinkFacory(boardId);\n\n        if(transaction.action === HistoryAction.deleted) {\n            const deletedCellIds: string[] = [];\n            const deletedEdges: any[] = [];\n            for(const change of changes) {\n                const deletedCell = change.child;\n\n                if(deletedCell) {\n                    if(inspectioUtils.getTypeInclEdge(deletedCell) === HistoryCellType.edge) {\n                        deletedEdges.push(deletedCell);\n                        continue;\n                    }\n\n                    const deletedCells = graph.getVerticesTree(deletedCell);\n\n                    deletedCellIds.push(...deletedCells.map((cell: any) => cell.getId()));\n\n                    if(deletedCells.length) {\n                        await this.iioCody!.syncDeletedNodes(boardId, deletedCells.map(\n                            (cell: any) => new MxGraphElement(cell, graph.getModel(), false, deepLinkFactory)\n                            )\n                        )\n                    }\n                }\n            }\n\n            for(const deletedEdge of deletedEdges) {\n                const edgeNodes = [];\n                if(deletedEdge.source && !deletedCellIds.includes(deletedEdge.source.getId())) {\n                    edgeNodes.push(new MxGraphElement(deletedEdge.source, graph.getModel(), false, deepLinkFactory));\n                }\n                if(deletedEdge.target && !deletedCellIds.includes(deletedEdge.target.getId())) {\n                    edgeNodes.push(new MxGraphElement(deletedEdge.target, graph.getModel(), false, deepLinkFactory));\n                }\n                if(edgeNodes.length) {\n                    await this.iioCody!.syncChangedNodes(boardId, edgeNodes)\n                }\n            }\n\n            return;\n        } // End of HistoryAction.deleted\n\n        if(!transaction.cellId) {\n            console.log(\"no cellId given for transaction\")\n            return;\n        }\n\n        const transactionCellIds = transaction.cellId.split(\";\");\n        const effectedCells: Node[] = [];\n        const effectedCellIds: string[] = [];\n\n        for(const cellId of transactionCellIds) {\n            const cell = graph.model.getCell(cellId);\n\n            if(!cell) {\n                console.log(\"skipping cellId, cause not found in graph model\", cellId)\n                continue;\n            }\n\n            if(inspectioUtils.getTypeInclEdge(cell) === HistoryCellType.edge) {\n                console.log(\"change effected edge\", cell);\n                if(cell.source && !effectedCellIds.includes(cell.source.getId())) {\n                    console.log(\"adding edge source to effected cells\");\n                    effectedCellIds.push(cell.source.getId());\n                    effectedCells.push(new MxGraphElement(cell.source, graph.getModel(), false, deepLinkFactory));\n                }\n\n                if(cell.target && !effectedCellIds.includes(cell.target.getId())) {\n                    console.log(\"adding edge target to effected cells\")\n                    effectedCellIds.push(cell.target.getId());\n                    effectedCells.push(new MxGraphElement(cell.target, graph.getModel(), false, deepLinkFactory));\n                }\n\n                continue;\n            }\n\n            if(!graph.isVertex(cell)) {\n                const vertexChildren = graph.getVerticesTree(cell);\n\n                for(const vertexChild of vertexChildren) {\n                    if(!effectedCellIds.includes(vertexChild.getId())) {\n                        effectedCellIds.push(vertexChild.getId());\n                        effectedCells.push(new MxGraphElement(vertexChild, graph.getModel(), false, deepLinkFactory));\n                    }\n                }\n\n                continue;\n            }\n\n            if(!effectedCellIds.includes(cell.getId())) {\n                effectedCellIds.push(cell.getId());\n                effectedCells.push(new MxGraphElement(cell, graph.getModel(), false, deepLinkFactory));\n            }\n        }\n\n        await this.iioCody!.syncChangedNodes(boardId, effectedCells)\n    }\n\n    private sortChanges(changes: any[]): any[] {\n        if(changes.length <= 1) {\n            return changes;\n        }\n\n        const otherChanges: any[] = [];\n        const edgeChanged: any[] = [];\n\n        changes.forEach((change) => {\n            if(change instanceof mxGeometryChange) {\n                // Workaround for mxGraph bug, newly created edges have edge = true, after xml serialization it's edge = 1\n                if(change.cell.edge === 1 || change.cell.edge === true) {\n                    edgeChanged.push(change);\n                } else {\n                    otherChanges.push(change);\n                }\n            } else if(change instanceof mxChildChange) {\n                if(change.child.edge === 1 || change.child.edge === true) {\n                    edgeChanged.push(change);\n                } else {\n                    otherChanges.push(change);\n                }\n            } else {\n                otherChanges.push(change);\n            }\n        });\n\n        otherChanges.push(...edgeChanged);\n        return otherChanges;\n    }\n\n    private detectHistoryAttributesFromChanges(changes: any[]): {action: HistoryAction, type: HistoryCellType, label: string, cellId?: string} {\n        changes = this.filterOutMxStyleChange(changes);\n\n        // Sticky added or moved out of container\n        if(changes.length === 3 && changes[0] instanceof mxGeometryChange\n            && changes[1] instanceof mxGeometryChange && changes[2] instanceof mxChildChange) {\n            return {\n                action: changes[2].previous === null? HistoryAction.added : HistoryAction.moved,\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[2])\n            }\n        }\n\n        // Element moved\n        if(changes.length === 1 && changes[0] instanceof mxGeometryChange) {\n            return {\n                action: HistoryAction.moved,\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[0])\n            }\n        }\n\n        // Element deleted\n        if(changes.length === 1 && changes[0] instanceof mxChildChange && changes[0].parent === null) {\n            return  {\n                action: HistoryAction.deleted,\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[0])\n            }\n        }\n\n        // Element edited\n        if(changes.length === 1 && changes[0] instanceof mxValueChange) {\n            return  {\n                action: HistoryAction.edited,\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[0])\n            }\n        }\n\n        // Element edited and autosized\n        if(changes.length === 2 && changes[0] instanceof mxValueChange && changes[1] instanceof mxGeometryChange) {\n            return  {\n                action: HistoryAction.edited,\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[0])\n            }\n        }\n\n        // Edge added (source and target have different parents -> 4 changes, source and target have same parent -> 5 changes, different parents, but same grand parent -> 6 changes)\n        if((changes.length >= 4) && changes[1] instanceof mxTerminalChange && changes[2] instanceof mxTerminalChange) {\n            return  {\n                action: HistoryAction.added,\n                // First change is the new edge added to the board\n                ...this.detectHistoryCellTypeAndLabelFromChange(changes[0])\n            }\n        }\n\n        // All moved\n        let allMoved = true;\n        let cellIds: string[] = [];\n\n        changes.forEach(change => {\n            if(!(change instanceof mxGeometryChange)) {\n                allMoved = false;\n            } else {\n                cellIds.push(change.cell.id);\n            }\n        });\n\n        if(allMoved) {\n            return {\n                action: HistoryAction.moved,\n                type: HistoryCellType.multiple,\n                label: '',\n                cellId: cellIds.join(\";\")\n            }\n        }\n\n        // All deleted\n        let allDeleted = true;\n        cellIds = [];\n\n        changes.forEach(change => {\n            if(!(change instanceof mxChildChange && change.parent === null)) {\n                allDeleted = false;\n            } else {\n                cellIds.push(change.child.id);\n            }\n        });\n\n        if(allDeleted) {\n            return {\n                action: HistoryAction.deleted,\n                type: HistoryCellType.multiple,\n                label: '',\n                cellId: cellIds.join(\";\")\n            }\n        }\n\n        // All added to container\n        let allAddedToContainer = true;\n        let parent: any = null;\n\n        changes.forEach((change, i) => {\n            if(i % 2 === 0) {\n                if(!(change instanceof mxChildChange && changes[i+1] instanceof mxGeometryChange\n                    && ((parent === null || parent === change.parent) || change.child.edge === 1) // <-- Edge parent is not the container\n                    && (inspectioUtils.isContainer(change.parent) || change.child.edge === 1))) {\n                    allAddedToContainer = false;\n                } else {\n                    if(change.child.edge !== 1) {\n                        parent = change.parent;\n                    }\n                }\n            }\n        });\n\n        if(parent && allAddedToContainer) {\n            return {\n                action: HistoryAction.edited,\n                type: inspectioUtils.getTypeInclEdge(parent) || HistoryCellType.misc,\n                label: inspectioUtils.getLabelText(parent),\n                cellId: parent.id\n            }\n        }\n\n        // Container deleted that contains edges\n        if(changes[changes.length -1] instanceof mxChildChange && changes[changes.length - 1].parent === null) {\n            const deletedContainer = changes[changes.length -1].child;\n            return {\n                action: HistoryAction.deleted,\n                type: inspectioUtils.getTypeInclEdge(deletedContainer) || HistoryCellType.misc,\n                label: inspectioUtils.getLabelText(deletedContainer),\n                cellId: deletedContainer.id\n            }\n        }\n\n        // All moved out of container\n        let allMovedOutOfContainer = true;\n        cellIds = [];\n\n        changes.forEach((change, i) => {\n            if(!(change instanceof mxGeometryChange || change instanceof mxChildChange)) {\n                allMovedOutOfContainer = false;\n            } else {\n                if(change instanceof mxGeometryChange) {\n                    cellIds.push(change.cell.id);\n                }\n            }\n        });\n\n        if(allMovedOutOfContainer) {\n            return {\n                action: HistoryAction.moved,\n                type: HistoryCellType.multiple,\n                label: '',\n                cellId: cellIds.join(\";\")\n            }\n        }\n\n        // Default\n        return {\n            action: HistoryAction.edited,\n            type: HistoryCellType.misc,\n            label: '',\n        };\n    }\n\n    private detectHistoryCellTypeAndLabelFromChange(change: any): {type: HistoryCellType, label: string, cellId?: string} {\n        let type: HistoryCellType | boolean = false;\n        let label: string = '';\n        let cellId: undefined;\n\n        if(change.cell) {\n            type = inspectioUtils.getTypeInclEdge(change.cell);\n            label = inspectioUtils.getLabelText(change.cell);\n            cellId = change.cell.id;\n        } else if(change.child) {\n            type = inspectioUtils.getTypeInclEdge(change.child);\n            label = inspectioUtils.getLabelText(change.child);\n            cellId = change.child.id;\n        }\n\n        if(!type) {\n            type = HistoryCellType.misc;\n        }\n\n        return {\n            type,\n            label,\n            cellId,\n        }\n    }\n\n    private filterOutMxStyleChange(changes: any[]): any[] {\n        return changes.filter(change => !(change instanceof mxStyleChange));\n    }\n}\n\nexport default MxGraphBoard;\n","import * as H from 'history';\nimport copy from \"copy-to-clipboard\";\n\ninterface EditorUi {\n    editor: Editor;\n}\n\ninterface Editor {\n    graph: Graph;\n}\n\ninterface Graph {\n    setHistory: (history: H.History) => void;\n    enableCopyToClipboard: (copy: CopyToClipboardApi) => void;\n    setDeeplinkFactory: (factory: WorkspaceDeeplinkFactory) => void;\n    enableNotifications: (func: Notify) => void;\n}\n\ntype CopyToClipboardApi = typeof copy;\n\ntype WorkspaceDeeplinkFactory = (cellId: string) => string;\n\ntype Notify = (title: string, msg: string, type: 'info' | 'error') => void;\n\nexport const initializeGraphEditor = (\n    editorUi: EditorUi,\n    history: H.History<any>,\n    copyApi: CopyToClipboardApi,\n    deeplinkFactory: WorkspaceDeeplinkFactory,\n    notifyFunc: Notify,\n) => {\n    const graph = editorUi.editor.graph;\n\n    graph.setHistory(history);\n    graph.enableCopyToClipboard(copyApi);\n    graph.setDeeplinkFactory(deeplinkFactory);\n    graph.enableNotifications(notifyFunc);\n};\n\n\n\n\n","import {connect} from \"react-redux\";\nimport {bindActionCreators, Dispatch} from \"redux\";\nimport { Action as Notification } from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\nimport {default as MxGraphBoard} from \"../components/MxGraphBoard\";\nimport {BoardSelector} from \"../selectors\";\n\nconst mapStateToProps = BoardSelector.makeMapStateToPropsMxGraphBoard();\n\nconst mapDispatchToProps = (dispatch: Dispatch) => bindActionCreators(\n    {\n        fetchUserBoard: Action.Query.fetchUserBoard,\n        onError: Notification.Command.error,\n        onInfo: Notification.Command.info,\n        saveBoard: Action.Command.saveBoard,\n        syncBoard: Action.Command.syncBoard,\n        stopBoardSync: Action.Command.stopBoardSynchronisation,\n        clearBoardHistory: Action.Command.clearBoardHistory,\n        onLocalBoardChanged: Action.Event.localBoardChanged,\n        dequeueBoardChanged: Action.Command.dequeueBoardChangedEvents,\n        onBoardImportStarted: Action.Event.boardImportStarted,\n        onBoardImported: Action.Event.boardImported,\n        onBoardExported: Action.Event.boardExported,\n        onBoardInitialized: Action.Event.boardInitialized,\n        onLocalBoardUpdatedWithRemoteChange: Action.Event.localBoardUpdatedWithRemoteChange,\n        filterElementsTree: Action.Command.filterElementsTree,\n        onActiveGraphElementChanged: Action.Event.activeGraphElementChanged,\n        onActiveGraphElementLabelChanged: Action.Event.activeGraphElementLabelChanged,\n        onActiveGraphElementMetadataChanged: Action.Event.activeGraphElementMetadataChanged,\n        toggleElementDetails: Action.Command.toggleElementDetails,\n        toggleCodyConsole: Action.Command.toggleCodyConsole,\n    },\n    dispatch,\n);\n\nconst MxGraphBoardContainer = connect(mapStateToProps, mapDispatchToProps, undefined, {pure: false})(MxGraphBoard);\n\nexport default MxGraphBoardContainer;\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {BoardPermissionForTeam} from \"../model/BoardPermissionForTeam\";\nimport {makeBoardPermissionForTeamSelector} from \"../selectors/boardPermission\";\n\ntype Command = ActionType<typeof Action.Command.adminChangeTeamBoardPermissions>\n\nfunction* handleAdminChangeTeamBoardPermissions(command: Command) {\n    let boardPermission: BoardPermissionForTeam = yield select(makeBoardPermissionForTeamSelector(command.payload.boardId, command.payload.teamId));\n\n    if(boardPermission) {\n        boardPermission = boardPermission.changePermissions(command.payload.permissions);\n\n        const {response, error} = yield call(Action.Api.adminChangeTeamBoardPermissions, command.payload.boardId, command.payload.teamId, command.payload.permissions);\n\n        if(error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not change team permissions.'));\n        }\n\n        if(response) {\n            yield put(Action.Event.teamBoardPermissionsChanged(boardPermission));\n            yield put(NotifyAction.Command.info('Permissions Changed', 'Team permissions changed successfully.'));\n        }\n    }\n}\n\nexport function* adminChangeTeamBoardPermissions() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.ADMIN_CHANGE_TEAM_BOARD_PERMISSIONS\n        ]);\n\n        yield fork(handleAdminChangeTeamBoardPermissions, command);\n    }\n}","import { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from '../actions';\n\ntype FlowAction = ActionType<typeof Action.Command.changeBoardPermissions>;\n\nconst onChangeBoardPermissions = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(\n        Action.Api.changeBoardPermissions,\n        action.payload.boardId,\n        action.payload.userId,\n        action.payload.permissions\n    );\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Failed changing the board permissions.'));\n    }\n\n    if(response) {\n        yield put(NotifyAction.Command.info(\n            'Permissions Changed',\n            'Board permissions were changed successfully.'\n        ));\n\n        yield put(Action.Event.boardPermissionsChanged(\n            action.payload.boardId,\n            action.payload.userId,\n            action.payload.permissions)\n        );\n    }\n};\n\nexport function* changeBoardPermissionsFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.CHANGE_BOARD_PERMISSIONS\n        ]);\n\n        yield fork(onChangeBoardPermissions, action);\n    }\n}","import {fromJS, List, Map} from \"immutable\";\nimport {BoardModel, BoardVersioning} from \"../InspectioBoards\";\n\nconst KEY_BOARDS = '@@Inspectio/Boards';\nconst KEY_BOARD = '@@Inspectio/Board/:id';\nconst KEY_CODY_CONSOLE_HISTORY = '@@Inspectio/CodyConsole';\nconst DEFAULT_BOARD_STATE_VERSION = 0;\nexport const CURRENT_BOARD_STATE_VERSION = 1;\n\nconst boardKey = (boardUid: string): string => {\n    return KEY_BOARD.replace(\":id\", boardUid)\n}\n\nconst loadBoardList = (): List<string> => {\n    const boardsJson = localStorage.getItem(KEY_BOARDS);\n\n    if(boardsJson === null) {\n        return List();\n    }\n\n    return fromJS(JSON.parse(boardsJson));\n}\n\nexport const loadInspectioBoards = (onErr: (err: any) => void): Map<string, BoardModel.Board> => {\n    try {\n\n        const boardsList: List<string> = loadBoardList();\n\n        let boards = Map<string, BoardModel.Board>();\n\n        boardsList.forEach(boardUid => {\n           const boardJson = localStorage.getItem(boardKey(boardUid));\n\n           if(boardJson !== null) {\n               let boardData = JSON.parse(boardJson);\n               let version = DEFAULT_BOARD_STATE_VERSION;\n\n               if(boardData.hasOwnProperty('__state')) {\n                   version = boardData.__version;\n                   boardData = boardData.__state;\n               }\n\n               boardData = migrateBoardState(boardData, version);\n\n               boards = boards.set(boardUid, new BoardModel.Board(boardData));\n           }\n        });\n\n        return boards;\n    } catch (err) {\n        onErr(err);\n    }\n\n    return Map();\n};\n\nexport const saveInspectioBoard = (board: BoardModel.Board, onErr: (err: any) => void): void => {\n    try {\n        let boardList = loadBoardList();\n\n        if(!boardList.includes(board.uid)) {\n            boardList = boardList.push(board.uid);\n\n            localStorage.setItem(KEY_BOARDS, JSON.stringify(boardList.toJSON()));\n        }\n\n        const boardDoc = {\n            __state: board.toJSON(),\n            __version: CURRENT_BOARD_STATE_VERSION,\n        }\n\n        localStorage.setItem(boardKey(board.uid), JSON.stringify(boardDoc));\n    } catch (err) {\n        onErr(err);\n    }\n};\n\nexport const deleteInspectioBoard = (boardId: string, onErr: (err: any) => void): void => {\n    try {\n        let boardList = loadBoardList();\n\n        if(boardList.includes(boardId)) {\n            boardList = boardList.delete(boardList.indexOf(boardId));\n\n            localStorage.setItem(KEY_BOARDS, JSON.stringify(boardList.toJSON()));\n            localStorage.removeItem(boardKey(boardId));\n        }\n    } catch (err) {\n        onErr(err);\n    }\n};\n\nexport const migrateBoardState = (rawBoardState: any, boardStateVersion: number): any => {\n    if(boardStateVersion === CURRENT_BOARD_STATE_VERSION) {\n        return rawBoardState;\n    }\n\n    if(boardStateVersion === 0) {\n        rawBoardState = migrateFrom0to1(rawBoardState);\n        boardStateVersion = 1;\n    }\n\n    if(boardStateVersion === CURRENT_BOARD_STATE_VERSION) {\n        return rawBoardState;\n    }\n\n    throw new Error(`Missing board state migration from version ${boardStateVersion} to  ${CURRENT_BOARD_STATE_VERSION}`);\n}\n\nconst migrateFrom0to1 = (rawBoardState: any): any => {\n    rawBoardState.version = BoardVersioning.defaultBoardVersionProps;\n    return rawBoardState;\n}\n\n// Cody Console cache\nexport const saveCodyConsoleHistory = (history: string[]): void => {\n    localStorage.setItem(KEY_CODY_CONSOLE_HISTORY, JSON.stringify(history));\n}\n\nexport const loadCodyConsoleHistory = (): string[] => {\n    const historyJson = localStorage.getItem(KEY_CODY_CONSOLE_HISTORY);\n\n    if(historyJson === null) {\n        return [];\n    }\n\n    try {\n        return JSON.parse(historyJson);\n    } catch (e) {\n        return [];\n    }\n}\n","import {call, fork, put,take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {deleteInspectioBoard} from \"../../core/localStorage\";\nimport {Action as Notify, Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\n\ntype FlowAction = ActionType<typeof Action.Command.deleteBoard>;\n\nfunction* deleteBoard(action: FlowAction) {\n    let localError = null;\n\n    deleteInspectioBoard(action.payload.boardId, (err) => {\n        localError = err;\n    })\n\n    if (localError) {\n        const errorNotification = Notify.Command.error('Failed to delete board in local storage', localError);\n        yield put(errorNotification);\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.deleteBoard, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not delete board.'));\n    }\n    if (response) {\n        yield put(NotifyAction.Command.info('Board deleted', 'Board deleted'));\n    }\n}\n\nexport function* deleteBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.DELETE_BOARD\n        ]);\n\n        yield fork(deleteBoard, action);\n    }\n}\n","import { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from '../actions';\nimport {BoardClient} from \"../model/BoardClient\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchBoardClient>;\n\nconst onFetchBoardClient = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchBoardClient, action.payload.boardId);\n\n    if (error) {\n        if (error.status === 404) {\n            yield put(Action.Event.boardClientNotConfigured(action.payload.boardId));\n        } else {\n            yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board client\"));\n        }\n    }\n\n    if (response) {\n        const result = pipe(\n            response!.data,\n            execValidate([hasKey('clientId'), \"Response data does not contain key clientId\"])\n        );\n\n        if (isFailure(result)) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load board client'));\n        }\n\n        if (isSuccess(result)) {\n            yield put(Action.Event.boardClientFetched(action.payload.boardId, result.value as BoardClient));\n        }\n    }\n};\n\nconst onFetchBoardClientSecret = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchBoardClientSecret, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board client secret\"));\n    }\n\n    if (response) {\n        const result = pipe(\n            response!.data,\n            execValidate([hasKey('clientSecret'), \"Response data does not contain key clientSecret\"])\n        );\n\n        if (isFailure(result)) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load board client secret'));\n        }\n\n        if (isSuccess(result)) {\n            yield put(Action.Event.boardClientSecretFetched(action.payload.boardId, (result.value as any).clientSecret));\n        }\n    }\n};\n\nconst onCreateBoardClient = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.createBoardClient, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to create board client\"));\n    }\n\n    if (response) {\n        yield call(onFetchBoardClient, action);\n    }\n};\n\nconst onRemoveBoardClient = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.removeBoardClient, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to remove board client\"));\n    }\n\n    if (response) {\n        yield put(Action.Event.boardClientNotConfigured(action.payload.boardId));\n    }\n};\n\nconst onResetBoardClientSecret = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.resetBoardClientSecret, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to reset board client secret\"));\n    }\n\n    if (response) {\n        yield call(onFetchBoardClientSecret, action);\n    }\n};\n\nexport function* fetchBoardClientFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.FETCH_BOARD_CLIENT,\n            Action.Type.FETCH_BOARD_CLIENT_SECRET,\n            Action.Type.CREATE_BOARD_CLIENT,\n            Action.Type.REMOVE_BOARD_CLIENT,\n            Action.Type.RESET_BOARD_CLIENT_SECRET\n        ]);\n\n        if (action.type === Action.Type.FETCH_BOARD_CLIENT) {\n            yield fork(onFetchBoardClient, action);\n        } else if(action.type === Action.Type.FETCH_BOARD_CLIENT_SECRET) {\n            yield fork(onFetchBoardClientSecret, action);\n        } else if(action.type === Action.Type.CREATE_BOARD_CLIENT) {\n            yield fork(onCreateBoardClient, action);\n        } else if(action.type === Action.Type.REMOVE_BOARD_CLIENT) {\n            yield fork(onRemoveBoardClient, action);\n        } else if(action.type === Action.Type.RESET_BOARD_CLIENT_SECRET) {\n            yield fork(onResetBoardClientSecret, action);\n        }\n    }\n}","import {List} from \"immutable\";\nimport { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from '../actions';\nimport {createBoardGraphElementFromServerData} from \"../model/BoardGraphElement\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchBoardGraphElements>;\n\nconst onFetchBoardGraphElements = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(\n        Action.Api.fetchBoardGraphElements,\n        action.payload.boardId,\n        action.payload.type\n    );\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board graph elements\"));\n    }\n\n    if (response) {\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is no array\"]),\n            execForEach((data: any) => {\n                return createBoardGraphElementFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load board graph elements'));\n        }\n\n        if (isSuccess(result)) {\n            const boardGraphElements = List(result.value);\n            yield put(Action.Event.boardGraphElementsFetched(action.payload.boardId, boardGraphElements));\n        }\n    }\n};\n\nexport function* fetchBoardGraphElementsFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.FETCH_BOARD_GRAPH_ELEMENTS);\n\n        yield fork(onFetchBoardGraphElements, action);\n    }\n}","import {List} from \"immutable\";\nimport { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport { Action as TeamAction } from '../../InspectioTeams';\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from '../actions';\nimport {FETCH_BOARD_PERMISSIONS_FOR_TEAMS, FETCH_BOARD_PERMISSIONS_FOR_USERS} from \"../actions/constants\";\nimport {BoardId} from \"../model/Board\";\nimport {createBoardPermissionForTeamFromServerData} from \"../model/BoardPermissionForTeam\";\nimport {createBoardPermissionForUserFromServerData} from \"../model/BoardPermissionForUser\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchBoardPermissionsForTeams>\n    | ActionType<typeof Action.Query.fetchBoardPermissionsForUsers>\n    | ActionType<typeof TeamAction.Event.teamAccessToBoardGranted>\n    | ActionType<typeof TeamAction.Event.teamAccessToBoardRevoked>;\n\nconst onFetchBoardPermissionsForUsers = function* (boardId: BoardId) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchBoardPermissionsForUsers, boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board permissions\"));\n    }\n\n    if (response) {\n\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                return createBoardPermissionForUserFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process board permissions response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load board permissions'));\n        }\n\n        if (isSuccess(result)) {\n            const boardPermissions = List(result.value);\n            yield put(Action.Event.boardPermissionsForUsersFetched(boardPermissions));\n        }\n    }\n};\n\nconst onFetchBoardPermissionsForTeams = function* (boardId: BoardId) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchBoardPermissionsForTeams, boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board permissions\"));\n    }\n\n    if (response) {\n\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                return createBoardPermissionForTeamFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process board permissions response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load board permissions'));\n        }\n\n        if (isSuccess(result)) {\n            const boardPermissions = List(result.value);\n            yield put(Action.Event.boardPermissionsForTeamsFetched(boardPermissions));\n        }\n    }\n};\n\nexport function* fetchBoardPermissionsFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.FETCH_BOARD_PERMISSIONS_FOR_USERS,\n            Action.Type.FETCH_BOARD_PERMISSIONS_FOR_TEAMS,\n            TeamAction.Type.TEAM_ACCESS_TO_BOARD_GRANTED,\n            TeamAction.Type.TEAM_ACCESS_TO_BOARD_REVOKED,\n        ]);\n\n        switch (action.type) {\n            case FETCH_BOARD_PERMISSIONS_FOR_USERS:\n                yield fork(onFetchBoardPermissionsForUsers, action.payload.boardId);\n                break;\n            case FETCH_BOARD_PERMISSIONS_FOR_TEAMS:\n            case TeamAction.Type.TEAM_ACCESS_TO_BOARD_GRANTED:\n            case TeamAction.Type.TEAM_ACCESS_TO_BOARD_REVOKED:\n                yield fork(onFetchBoardPermissionsForTeams, action.payload.boardId);\n                break;\n        }\n    }\n}\n","import {List} from \"immutable\";\nimport {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {Action} from \"../index\";\nimport {createStickyTemplateFromServerData} from \"../model/StickyTemplate\";\n\ntype Query = ActionType<typeof Action.Query.fetchBoardStickyTemplates>\n\nfunction* handleFetchBoardStickyTemplates(query: Query) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchBoardStickyTemplates, query.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load sticky templates\"));\n    }\n\n    if (response) {\n\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                return createStickyTemplateFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process sticky templates response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load sticky templates'));\n        }\n\n        if (isSuccess(result)) {\n            const stickyTemplates = List(result.value);\n            yield put(Action.Event.boardStickyTemplatesFetched(stickyTemplates));\n        }\n    }\n}\n\nexport function* fetchBoardStickyTemplates() {\n    while (true) {\n        const query: Query = yield take([\n            Action.Type.FETCH_BOARD_STICKY_TEMPLATES\n        ]);\n\n        yield fork(handleFetchBoardStickyTemplates, query);\n    }\n}\n","import {List} from \"immutable\";\nimport { call, fork, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from '../actions';\nimport {createBoardInvitationFromServerData} from \"../model/BoardInvitation\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchOpenBoardInvitations>;\n\nconst onFetchOpenBoardInvitations = function* (action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.fetchOpenBoardInvitations, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load open board invitations\"));\n    }\n\n    if (response) {\n        const result = pipe(\n            response!.data,\n            execValidate([isArray(), \"Response data is not of type Array\"]),\n            execForEach((data: any) => {\n                return createBoardInvitationFromServerData(data);\n            }),\n        );\n\n        if (isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process open board invitations response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load open board invitations'));\n        }\n\n        if (isSuccess(result)) {\n            const openBoardInvitations = List(result.value);\n            yield put(Action.Event.openBoardInvitationsFetched(openBoardInvitations));\n        }\n    }\n};\n\nexport function* fetchOpenBoardInvitationsFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.FETCH_OPEN_BOARD_INVITATIONS]);\n\n        yield fork(onFetchOpenBoardInvitations, action);\n    }\n}","import {List} from \"immutable\";\nimport {call, fork, put, select, take} from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from '../actions';\nimport {enqueueBoardChanged, setBoardToSnapshot} from \"../actions/commands\";\nimport {BoardModel, BoardSnapshot, BoardSync, BoardVersioning} from '../model';\nimport {mapServerPatchToBoardChanged} from \"../model/BoardChanged\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchUserBoard>;\n\nconst onFetchUserBoard = function* (action: FlowAction) {\n    const tempBoard = yield select(makeBoardByIdSelector(action.payload.boardId))\n\n    if(tempBoard && tempBoard.tempBoard) {\n        yield put(Action.Command.setBoardDetailsFetched(action.payload.boardId, false));\n        return;\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.fetchUserBoard, action.payload.boardId);\n\n    if (error) {\n        yield put(NotifyAction.Command.error(\"Request Error\", \"Failed to load board\"));\n    }\n\n    if (response) {\n        const board = new BoardModel.Board({\n            uid: response.data.boardId,\n            name: response.data.name,\n            lastModified: response.data.lastModified,\n            version: new BoardVersioning.BoardVersion(response.data.boardVersion),\n            shared: response.data.shared,\n            sharedWith: List(response.data.sharedWith),\n            assignedTeams: List(response.data.assignedTeams),\n            writeAccess: response.data.writeAccess,\n            owner: response.data.owner,\n            creator: response.data.creator,\n            organization: response.data.organization,\n            tempBoard: false,\n        });\n\n        let snapshot = null;\n        let patches: BoardSync.BoardChanged[] = [];\n\n        if(response.data.snapshot) {\n            snapshot = new BoardSnapshot.BoardSnapshot({\n                boardId: response.data.boardId,\n                xml: response.data.snapshot.content,\n                boardVersion: new BoardVersioning.BoardVersion(response.data.snapshot.boardVersion)\n            });\n        }\n\n        yield put(Action.Command.updateBoards([board]));\n\n        if(snapshot) {\n            yield put(setBoardToSnapshot(snapshot));\n        }\n\n        patches = [];\n\n        response.data.patches.forEach((patch: any) => patches.push(mapServerPatchToBoardChanged(patch)));\n\n        for(const patch of patches) {\n            yield put(enqueueBoardChanged(patch));\n        }\n\n        yield put(Action.Command.setBoardDetailsFetched(board.uid, board.writeAccess as boolean));\n    }\n}\n\nexport function* fetchUserBoardFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.FETCH_USER_BOARD\n        ]);\n\n        yield fork(onFetchUserBoard, action);\n    }\n}\n","import {UserId} from \"./UserInfo\";\nimport {List, Record as ImmutableRecord} from \"immutable\";\nimport {Either, isFailure, Success, validate} from \"../../core/validation/either\";\nimport {hasKey} from \"../../core/validation/predicates\";\n\nexport type UserSettingsValidationError = string;\nexport type UserSettingsValue = number|boolean;\nexport type UserSettingsValues = Record<string, UserSettingsValue>;\n\nexport interface UserSettingsProps {\n    userId: UserId,\n    values: UserSettingsValues;\n}\n\nexport const defaultUserSettingsProps: UserSettingsProps = {\n    userId: '',\n    values: {},\n};\n\nexport const createUserSettingsFromServerData = (data: any): Either<UserSettingsValidationError, UserSettings> => {\n    const validatedData: Either<string, any> = validate(data,\n        [hasKey('userId'), \"userId missing\"],\n        [hasKey('values'), \"values missing in \"+data.userId],\n    );\n\n    if(isFailure(validatedData)) {\n        return validatedData;\n    }\n\n    return Success(new UserSettings({\n        userId: data.userId,\n        values: data.values,\n    }));\n};\n\n\nexport class UserSettings extends ImmutableRecord(defaultUserSettingsProps) implements UserSettingsProps {\n\n    public constructor(data: UserSettingsProps) {\n        super(data);\n    }\n}\n","import {ResponseType} from \"../../api/util\";\nimport * as Action from \"../../User/actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport { call, put } from 'redux-saga/effects';\nimport {createUserSettingsFromServerData} from \"../model/UserSettings\";\nimport {isFailure, isSuccess} from \"../../core/validation/either\";\n\nexport function* loadUserSettings() {\n    const {response, error}: ResponseType = yield call(Action.Api.getUserSettings);\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not load user settings'));\n    }\n\n    if (response) {\n        const result = createUserSettingsFromServerData(response.data);\n\n        if (isFailure(result)) {\n            // tslint:disable-next-line:no-console\n            console.error(\"Failed to process user settings response from server\", result.value, response.data);\n            yield put(NotifyAction.Command.error('Request Error', 'Could not load user settings'));\n        }\n\n        if (isSuccess(result)) {\n            yield put(Action.Event.userSettingsLoaded(result.value));\n        }\n    }\n}\n","import { AxiosResponse } from 'axios';\nimport {List} from \"immutable\";\nimport { map } from 'lodash';\nimport {call, delay, fork, put, select, take} from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport uuid from 'uuid';\nimport { ResponseType } from '../../api/util';\nimport * as Auth from '../../Auth';\nimport {loadUserTeams} from \"../../InspectioTeams/sagas/loadUserTeams\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Organization from '../../Organization';\nimport { Action as UserAction } from '../../User';\nimport * as User from '../../User';\nimport { UserSelector } from '../../User';\nimport {loadUserSettings} from \"../../User/saga/LoadUserSettingsFlow\";\nimport * as Action from '../actions';\nimport {updateBoards} from '../actions/commands';\nimport {fetchUserBoards} from \"../actions/queries\";\nimport { BoardModel } from '../model';\nimport { BoardVersion } from '../model/BoardVersion';\nimport {initialBoardListLoaded} from \"../actions/events\";\n\ntype FlowAction = ActionType<typeof Auth.Action.Event.userAuthenticated> & ActionType<typeof fetchUserBoards>;\n\nfunction* updateUserData(response: AxiosResponse ) {\n    let user = yield select(UserSelector.currentUserSelector, undefined);\n    user = user.set('quota', response.data.quota);\n    user = user.set('teamQuota', response.data.teamQuota);\n    user = user.set('signedIn', true);\n    user = user.set('activeOrganization', response.data.activeOrganization || null);\n\n    yield put(UserAction.Command.signIn(user));\n}\n\nfunction* loadUserBoards() {\n    yield put(Action.Query.startFetchUserBoards());\n\n    const {response, error}: ResponseType = yield call(Action.Api.fetchUserBoards);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not load boards'));\n    }\n\n    if(response) {\n        const boards = map(response.data as any, (data: any) => new BoardModel.Board({\n            uid: data.boardId,\n            name: data.name,\n            lastModified: data.lastModified,\n            version: new BoardVersion(data.version),\n            shared: data.shared,\n            sharedWith: List(data.sharedWith),\n            assignedTeams: List(data.assignedTeams),\n            example: data.example || false,\n            owner: data.ownerId,\n            creator: data.creatorId,\n            organization: data.organization,\n            tempBoard: false\n        }));\n\n        yield put(updateBoards(boards));\n    }\n}\n\nfunction* onUserAuthenticated(action: FlowAction) {\n    const {response, error}: ResponseType = yield call(User.Action.Api.getUser, action.payload.kc.tokenParsed!.sub!);\n\n    if (error && error.status === 404) {\n        const organizationId = uuid.v4();\n        const installUserOrganization: ResponseType = yield call(Organization.Action.Api.installUserOrganization, organizationId);\n\n        if (installUserOrganization.error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not initialize organization.'));\n        }\n\n        if (installUserOrganization.response) {\n            // TODO error handling\n            const getUserReponse: ResponseType = yield call(User.Action.Api.getUser, action.payload.kc.tokenParsed!.sub!);\n            yield updateUserData(getUserReponse.response!);\n        }\n    } else {\n        yield updateUserData(response!);\n    }\n\n    yield call(loadUserSettings);\n    yield put(Organization.Action.Query.fetchUserOrganizations());\n    yield delay(500);\n    yield call(loadUserBoards);\n    yield call(loadUserTeams);\n    yield put(initialBoardListLoaded());\n}\n\nfunction* onFetchUserBoards() {\n    yield loadUserBoards();\n}\n\nexport function* fetchUserBoardsFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Auth.Action.Type.USER_AUTHENTICATED,\n            Action.Type.FETCH_USER_BOARDS,\n        ]);\n\n        switch (action.type) {\n            case Auth.Action.Type.USER_AUTHENTICATED:\n                yield fork(onUserAuthenticated, action);\n                break;\n            case Action.Type.FETCH_USER_BOARDS:\n                yield fork(onFetchUserBoards);\n                break;\n        }\n\n    }\n}\n","import {call, fork, put,select, take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\nimport {makeBoardByIdSelector, makeGetBoard} from \"../selectors/board\";\n\ntype FlowAction = ActionType<typeof Action.Command.importExistingBoard>;\n\nfunction* importExistingBoard(action: FlowAction) {\n    const {board} = action.payload;\n    const oldBoard = yield select(makeBoardByIdSelector(board.uid));\n\n    yield put(Action.Command.forceUpdateBoards([board]));\n\n    const {response, error}: ResponseType = yield call(Action.Api.takeBoardSnapshot, board.uid, board.version, board.xml!);\n\n    if(error) {\n        yield put(Notify.Command.error('Server Error', 'Could not import existing board.'));\n        yield put(Action.Command.forceUpdateBoards([oldBoard]));\n        return;\n    }\n\n    if(response) {\n        yield put(Notify.Command.info('Board imported:', board.name));\n    }\n}\n\nexport function* importExistingBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.IMPORT_EXISTING_BOARD]);\n\n        yield fork(importExistingBoard, action);\n    }\n}\n","import {List} from \"immutable\";\nimport {call, fork, put,select, take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport * as uuid from \"uuid\";\nimport {ResponseType} from \"../../api/util\";\nimport {TeamId} from \"../../InspectioTeams/model/Team\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport {UserId, UserInfo} from \"../../User/model/UserInfo\";\nimport {UserSelector} from \"../../User/selectors\";\nimport * as Action from \"../actions\";\nimport {Board} from \"../model/Board\";\nimport {BoardVersion} from \"../model/BoardVersion\";\nimport {makeEmptyGraph} from \"../model/Graph\";\nimport {useGraph} from \"../hooks/useGraph\";\n\ntype FlowAction = ActionType<typeof Action.Command.importNewBoard>;\n\nfunction* importNewBoard(action: FlowAction) {\n    const boardId = action.payload.boardId || uuid.v4();\n\n    const organization = yield select(makeActiveUserOrganizationInfoSelector());\n\n    if(!organization) {\n        yield put(NotifyAction.Command.error('Board Import Failed', 'No organization selected.'));\n        return;\n    }\n\n    let response: ResponseType | null = null;\n\n    if(!action.payload.importTemporary){\n        response = yield call(Action.Api.installOrganizationBoard, organization.organizationId, boardId, action.payload.boardName);\n    }\n\n    if (response && response.error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not add board.'));\n    }\n    if ((response && response.response) || action.payload.importTemporary) {\n        if(!action.payload.importTemporary) {\n            yield put(NotifyAction.Command.info('Board created', 'Board created'));\n        }\n\n\n        const getUser = UserSelector.makeGetCurrentUser();\n\n        const user: UserInfo = yield select(getUser);\n\n        const board = new Board({\n            uid: boardId,\n            name: action.payload.boardName,\n            xml: action.payload.boardXml,\n            version: new BoardVersion({\n                userId: user.uid,\n                version: 1\n            }),\n            shared: false,\n            sharedWith: List<UserId>(),\n            assignedTeams: List<TeamId>(),\n            owner: null,\n            creator: user.uid,\n            organization: organization.organizationId,\n            tempBoard: !!action.payload.importTemporary\n        });\n\n        yield put(Action.Command.updateBoards([board]));\n\n        const [graph, setGraph] = useGraph();\n\n        const emptyGraphWithXml = makeEmptyGraph(board.xml || undefined);\n\n        setGraph(emptyGraphWithXml);\n\n        yield put(Action.Command.saveBoard(board, emptyGraphWithXml));\n    }\n}\n\nexport function* importNewBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.IMPORT_NEW_BOARD]);\n\n        yield fork(importNewBoard, action);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../index\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {List} from \"immutable\";\n\ntype Command = ActionType<typeof Action.Command.importStickyTemplates>\n\nfunction* handleImportStickyTemplates(command: Command) {\n    const tpls = command.payload.stickyTemplates.toJS();\n    const importedTpls = [];\n\n    for (const tpl of tpls) {\n        const {response, error}: ResponseType = yield call(Action.Api.setStickyTemplate,\n            tpl.boardId,\n            tpl.cellType,\n            tpl.template\n        );\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not set sticky template for ' + tpl.cellType));\n            continue;\n        }\n\n        importedTpls.push(tpl);\n\n        const advancedConfigResult: ResponseType = yield call(Action.Api.updateStickyAdvancedConfig,\n            tpl.boardId,\n            tpl.cellType,\n            tpl.templateType,\n            tpl.templateSchema || undefined\n        );\n\n        if (advancedConfigResult.error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not update sticky advanced config for ' + tpl.cellType));\n        }\n    }\n\n    yield put(NotifyAction.Command.info('Card Templates imported', 'You can now use them on the board!'));\n    yield put(Action.Event.stickyTemplatesImported(List(importedTpls)));\n    command.payload.finishedCb();\n}\n\nexport function* importStickyTemplates() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.IMPORT_STICKY_TEMPLATES\n        ]);\n\n        yield fork(handleImportStickyTemplates, command);\n    }\n}\n","import {call, put, select, take} from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { ResponseType } from '../../api/util';\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport * as Routes from '../../routes';\nimport * as Action from '../actions';\n\ntype FlowAction = ActionType<typeof Action.Command.addBoard>;\n\nexport function* installUserBoardFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.ADD_BOARD\n        ]);\n\n        const organization = yield select(makeActiveUserOrganizationInfoSelector());\n\n        if(organization) {\n            const {response, error}: ResponseType = yield call(Action.Api.installOrganizationBoard, organization.organizationId, action.payload.board.uid, action.payload.board.name);\n\n            if (error) {\n                yield put(NotifyAction.Command.error('Request Error', 'Could not add board.'));\n            }\n            if (response) {\n                yield put(NotifyAction.Command.info('Board created', 'Board created'));\n                yield call(action.payload.history.push, Routes.compileInspectioBoardWorkspace(action.payload.board.uid) as any);\n            }\n        } else {\n            yield put(NotifyAction.Command.error('Board Installation Failed', 'No organization selected.'));\n        }\n    }\n}\n","import {List} from \"immutable\";\nimport { call, delay, fork, put, race, select, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {Action as UserAction, IioUserInfo, IioUserInfoSelector, UserModel} from \"../../User\";\nimport {} from \"../../User\";\nimport * as Action from '../actions';\nimport {appendHistoryEntries, prependHistoryEntries} from \"../actions/commands\";\nimport {DEQUEUE_BOARD_CHANGED, LOCAL_BOARD_CHANGED} from \"../actions/constants\";\nimport {BoardId} from \"../model/Board\";\nimport {BoardChanged} from \"../model/BoardChanged\";\nimport {BoardHistory, HistoryEntry, makeHistoryEntry} from \"../model/HistoryEntry\";\n\ntype FlowAction = ActionType<typeof Action.Command.dequeueBoardChangedEvents> & ActionType<typeof Action.Event.localBoardChanged>;\ntype UserInfoLoaded = ActionType<typeof UserAction.Event.iioUsersInfoLoaded>;\n\nexport function* onBoardChanged(boardChangedList: BoardChanged[], prependEntries = false) {\n    let history: BoardHistory = List<HistoryEntry>();\n    let boardId: BoardId|undefined;\n\n    for(const boardChanged of boardChangedList) {\n        let iioUserInfo: IioUserInfo.IioUserInfo = yield select(IioUserInfoSelector.getIioUserInfoById, boardChanged.userId);\n        boardId = boardChanged.board;\n\n        if(!iioUserInfo) {\n            yield put(UserAction.Query.loadUsersInfo([boardChanged.userId]));\n\n            let noMatchingInfo = true;\n\n            while (noMatchingInfo) {\n                const {infoLoaded, timeout}: {infoLoaded: UserInfoLoaded, timeout: boolean} = yield race({\n                    infoLoaded: take([UserAction.Type.IIO_USERS_INFO_LOADED]),\n                    timeout: delay(5000)\n                });\n\n                if(timeout) {\n                    return;\n                }\n\n                infoLoaded.payload.usersInfo.forEach(loadedInfo => {\n                    if(loadedInfo.userId === boardChanged.userId) {\n                        iioUserInfo = loadedInfo;\n                        noMatchingInfo = false;\n                    }\n                });\n            }\n        }\n\n        const historyEntry = makeHistoryEntry(boardChanged, iioUserInfo);\n        if(prependEntries) {\n            history = history.unshift(historyEntry);\n        } else {\n            history = history.push(historyEntry);\n        }\n    }\n\n    if(boardId) {\n        if(prependEntries) {\n            yield put(prependHistoryEntries(boardId, history));\n        } else {\n            yield put(appendHistoryEntries(boardId, history));\n        }\n    }\n}\n\nexport function* prepareBoardHistoryFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.DEQUEUE_BOARD_CHANGED, Action.Type.LOCAL_BOARD_CHANGED]);\n\n        switch (action.type) {\n            case DEQUEUE_BOARD_CHANGED:\n                const events = action.payload.events.toArray();\n\n                yield fork(onBoardChanged, events, true);\n                break;\n            case LOCAL_BOARD_CHANGED:\n                yield fork(onBoardChanged, [action.payload.boardChanged], true);\n                break;\n\n        }\n    }\n}","import {List} from \"immutable\";\nimport { map } from 'lodash';\nimport { call, delay, fork, put, race, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport * as Action from \"../actions\";\nimport {\n    loadFirstBoardHistoryChunk,\n    loadNextBoardHistoryChunk,\n    setIsLoadingHistory,\n    setNoMoreHistoryAvailable\n} from \"../actions/commands\";\nimport {LOAD_FIRST_BOARD_HISTORY_CHUNK, LOAD_NEXT_BOARD_HISTORY_CHUNK} from \"../actions/constants\";\nimport {Board} from \"../model/Board\";\nimport {BoardChanged} from \"../model/BoardChanged\";\nimport {BoardHistory, HistoryAction, HistoryCellType} from \"../model/HistoryEntry\";\nimport {HistoryState} from \"../model/HistoryState\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport {makeBoardHistoryByIdSelector} from \"../selectors/boardHistory\";\nimport {onBoardChanged} from \"./prepareBoardHistoryFlow\";\n\ntype FlowAction = ActionType<typeof loadNextBoardHistoryChunk> & ActionType<typeof loadFirstBoardHistoryChunk>;\n\ninterface ServerPatch {\n    action: string;\n    boardId: string;\n    boardVersion: {\n        version: number;\n        userId: string;\n        head: null|boolean;\n    },\n    cellId: null|string;\n    cellLabel: string;\n    cellType: string;\n    patch: string[];\n    patchId: string;\n    recordedAt: string;\n    userId: string;\n}\n\nexport const marshalBoardChanged = (data: ServerPatch): BoardChanged => {\n    return new BoardChanged({\n        board: data.boardId,\n        cellId: data.cellId || undefined,\n        cellLabel: data.cellLabel,\n        cellType: data.cellType as HistoryCellType,\n        action: data.action as HistoryAction,\n        recordedAt: data.recordedAt,\n        userId: data.boardVersion.userId,\n        version: data.boardVersion.version,\n        changeSet: List(data.patch),\n        name: 'BoardChanged',\n        uid: data.patchId,\n    })\n};\n\nfunction* onLoadFirst(action: ActionType<typeof loadFirstBoardHistoryChunk>) {\n    const getBoardById = makeBoardByIdSelector(action.payload.boardId);\n    const getBoardHistory = makeBoardHistoryByIdSelector(action.payload.boardId);\n\n    const board: Board = yield select(getBoardById);\n    const history: HistoryState = yield select(getBoardHistory);\n\n    if(board && !history.loading) {\n        yield put(setIsLoadingHistory(action.payload.boardId, true));\n\n        const {response, error}: ResponseType = yield call(Action.Api.fetchOlderPatches, action.payload.boardId, board.version);\n\n        if(error) {\n            yield put(setNoMoreHistoryAvailable(action.payload.boardId));\n            yield put(setIsLoadingHistory(action.payload.boardId, false));\n            return;\n        }\n\n        if(response) {\n            const patches = map(response.data as any, (data: any) => marshalBoardChanged(data));\n\n            if(patches.length === 0) {\n                yield put(setNoMoreHistoryAvailable(action.payload.boardId));\n            }\n\n            yield call(onBoardChanged, patches);\n        }\n\n        yield put(setIsLoadingHistory(action.payload.boardId, false));\n    }\n}\n\nfunction* onLoadNext(action: ActionType<typeof loadNextBoardHistoryChunk>) {\n\n    yield put(setIsLoadingHistory(action.payload.boardId, true));\n\n    const {response, error}: ResponseType = yield call(Action.Api.fetchOlderPatches, action.payload.boardId, action.payload.boardVersion);\n\n    if(error) {\n        yield put(setNoMoreHistoryAvailable(action.payload.boardId));\n        yield put(setIsLoadingHistory(action.payload.boardId, false));\n        return;\n    }\n\n    if(response) {\n        const patches = map(response.data as any, (data: any) => marshalBoardChanged(data));\n\n        if(patches.length === 0) {\n            yield put(setNoMoreHistoryAvailable(action.payload.boardId));\n        }\n\n        yield call(onBoardChanged, patches)\n    }\n\n    yield put(setIsLoadingHistory(action.payload.boardId, false));\n}\n\n\nexport function* loadBoardHistoryFlow() {\n    while (true) {\n        const action: FlowAction = yield take([LOAD_FIRST_BOARD_HISTORY_CHUNK, LOAD_NEXT_BOARD_HISTORY_CHUNK]);\n\n        switch (action.type) {\n            case LOAD_NEXT_BOARD_HISTORY_CHUNK:\n                yield fork(onLoadNext, action);\n                break;\n            case LOAD_FIRST_BOARD_HISTORY_CHUNK:\n                yield fork(onLoadFirst, action);\n        }\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../../InspectioBoards\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as OrgaModule from \"../../Organization\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\n\ntype Command = ActionType<typeof Action.Command.moveUserBoardToOrganization>\n\nfunction* handleMoveUserBoardToOrganization(command: Command) {\n    const {response, error} = yield call(Action.Api.moveUserBoardToOrganization, command.payload.organizationId, command.payload.boardId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not move board to organization.'));\n    }\n\n    if(response) {\n        yield put(Action.Query.fetchUserBoards());\n        yield put(OrgaModule.Action.Query.fetchUserOrganizations());\n\n        const board = yield select(makeBoardByIdSelector(command.payload.boardId));\n\n        if(board) {\n            yield put(Action.Event.userBoardMovedToOrganization(board.moveToOrganization(command.payload.organizationId)));\n        }\n\n\n        yield put(NotifyAction.Command.info('Board moved', 'The board has been moved to the organization.'));\n    }\n}\n\nexport function* moveUserBoardToOrganization() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.MOVE_USER_BOARD_TO_ORGANIZATION\n        ]);\n\n        yield fork(handleMoveUserBoardToOrganization, command);\n    }\n}\n","import { call, put, take } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport { ResponseType } from '../../api/util';\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from '../actions';\n\ntype FlowAction = ActionType<typeof Action.Command.renameBoard>\n\nexport function* renameBoardFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.RENAME_BOARD]);\n\n        const {response, error}: ResponseType = yield call(Action.Api.renameBoard, action.payload.board.uid, action.payload.board.name);\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not rename board.'));\n            yield put(Action.Query.fetchUserBoards());\n        }\n\n        if(response) {\n            yield put(NotifyAction.Command.info('Board renamed', ''));\n        }\n    }\n}","import { call, fork, put, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from \"../actions\";\nimport {makeBoardInvitationSelector} from \"../selectors/boardInvitation\";\n\ntype FlowAction = ActionType<typeof Action.Command.resendBoardInvitation>;\n\nfunction* onResendBoardInvitation(action: FlowAction) {\n    const boardInvitation = yield select(makeBoardInvitationSelector(action.payload.invitationId));\n\n    if (boardInvitation) {\n        const {response, error}: ResponseType = yield call(\n            Action.Api.resendBoardInvitation,\n            action.payload.invitationId\n        );\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not resend board invitation'));\n        }\n\n        if (response) {\n            yield put(NotifyAction.Command.info(\n                'insp.board.notify.invitation_resend.success.title',\n                'insp.board.notify.invitation_resend.success.msg'\n            ));\n        }\n\n        yield put(Action.Event.boardInvitationResent(boardInvitation.resend()));\n    }\n}\n\nexport function* resendBoardInvitationFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.RESEND_BOARD_INVITATION,\n        ]);\n\n        yield fork(onResendBoardInvitation, action);\n    }\n}","import { call, fork, put, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\n\ntype FlowAction = ActionType<typeof Action.Command.revokeAccessToBoard>;\n\nfunction* onRevokeAccess(action: FlowAction) {\n    const {response, error}: ResponseType = yield call(Action.Api.revokeAccessToBoard, action.payload.boardId, action.payload.userId);\n\n    if(error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Failed to revoke access to board.'));\n    }\n\n    if(response) {\n        yield put(NotifyAction.Command.info('Access Revoked', 'Access to board revoked.'));\n\n        yield put(Action.Event.boardAccessRevoked(action.payload.boardId, action.payload.userId));\n    }\n}\n\nexport function* revokeAccessToBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.REVOKE_ACCESS_TO_BOARD]);\n\n        yield fork(onRevokeAccess, action)\n    }\n}\n\n","import { call, fork, put, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from \"../actions\";\nimport {makeBoardInvitationSelector} from \"../selectors/boardInvitation\";\n\ntype FlowAction = ActionType<typeof Action.Command.revokeBoardInvitation>;\n\nfunction* onRevokeBoardInvitation(action: FlowAction) {\n    const boardInvitation = yield select(makeBoardInvitationSelector(action.payload.invitationId));\n\n    if (boardInvitation) {\n        const {response, error}: ResponseType = yield call(\n            Action.Api.revokeBoardInvitation,\n            action.payload.invitationId\n        );\n\n        if (error) {\n            yield put(NotifyAction.Command.error('Request Error', 'Could not revoke board invitation'));\n        }\n\n        if (response) {\n            yield put(NotifyAction.Command.info(\n                'insp.board.notify.invitation_revoke.success.title',\n                'insp.board.notify.invitation_revoke.success.msg'\n            ));\n\n            yield put(Action.Event.boardInvitationRevoked(boardInvitation.revoke()));\n        }\n    }\n}\n\nexport function* revokeBoardInvitationFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.REVOKE_BOARD_INVITATION,\n        ]);\n\n        yield fork(onRevokeBoardInvitation, action);\n    }\n}","import {call,fork, put, take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport { ResponseType } from '../../api/util';\nimport {saveInspectioBoard} from \"../../core/localStorage\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport * as Action from \"../actions\";\nimport {useGraph} from \"../hooks/useGraph\";\n\ntype FlowAction = ActionType<typeof Action.Command.saveBoard> & ActionType<typeof Action.Event.boardImported>;\n\nfunction* onSaveBoard(action: FlowAction, snapshotCount: number) {\n    const [graph] = useGraph();\n\n    // console.log('saveBoardFlow');\n    //\n    // saveInspectioBoard(action.payload.board, (err) => {\n    //     console.log('saveBoardFlowErr', err);\n    //     localError = err;\n    // })\n    //\n    // if(localError) {\n    //     const errorNotification = Notify.Command.error('Failed to save board in local storage', localError);\n    //     yield put(errorNotification);\n    // }\n\n    console.log('saveBoardFlow: ', snapshotCount % 10);\n    // @TODO Check if socket connection is active, otherwise always take a snapshot\n    if(action.payload.board.tempBoard) {\n        console.log('saveBoardFlow: ', 'Skipping save of temp board');\n        return;\n    }\n\n    if(snapshotCount % 10 === 0 || action.payload.board.version.version < 5) {\n\n        const snapshot = graph.exportXmlSnapshot();\n\n        let retry = 3;\n        do {\n            const {error}: ResponseType = yield call(Action.Api.takeBoardSnapshot, action.payload.board.uid, action.payload.board.version, graph.exportXmlSnapshot());\n\n            if(error) {\n                retry--;\n            } else {\n                retry = 0;\n            }\n\n            if (retry === 0 && error) {\n                yield put(Notify.Command.error('Server Error', 'Could not take board snapshot.'));\n            }\n        } while (retry > 0);\n    }\n}\n\nexport function* saveBoardFlow() {\n\n    let snapshotCount = 0;\n\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.SAVE_BOARD,\n            Action.Type.BOARD_IMPORTED\n        ]);\n\n        if(action.type === Action.Type.BOARD_IMPORTED) {\n            // Always make a snapshot on import, hence we force next snapshot to be # 10\n            snapshotCount = 9;\n        }\n\n        snapshotCount++;\n\n        yield fork(onSaveBoard, action, snapshotCount);\n    }\n}\n","import { call, fork, put, select, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {ResponseType} from \"../../api/util\";\nimport { Action as NotifyAction } from '../../NotificationSystem';\nimport * as Action from \"../actions\";\n\ntype FlowAction = ActionType<typeof Action.Command.shareBoard>;\n\nfunction* onShareBoard(action: FlowAction) {\n    const {response, error}: ResponseType = yield call(\n        Action.Api.shareBoard,\n        action.payload.boardId,\n        action.payload.email,\n        action.payload.permissions\n    );\n\n    if (error && error.status === 404) {\n        yield put(NotifyAction.Command.error(\"User not found\", \"Please check the entered username. Also the user needs to sign in at least once before you can share your board with them.\"))\n    }\n\n    if(error) {\n        yield put(NotifyAction.Command.error(\"Action Failed\", error.data.error.message))\n    }\n\n    if(response) {\n        yield put(NotifyAction.Command.info(\"Board shared with \" + action.payload.email, ''));\n        yield put(Action.Query.fetchOpenBoardInvitations(action.payload.boardId));\n        yield put(Action.Query.fetchBoardPermissionsForUsers(action.payload.boardId));\n    }\n}\n\nexport function* shareBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([\n            Action.Type.SHARE_BOARD,\n        ]);\n\n        yield fork(onShareBoard, action);\n    }\n}\n","import {action} from \"typesafe-actions\";\nimport {\n    SET_CODY_CONSOLE_HEIGHT,\n    SET_RIGHT_SIDEBAR_WIDTH,\n    SET_SIDEBAR_WIDTH,\n    TOGGLE_SIDEBAR_COLLAPSED\n} from \"./constants\";\n\nexport const toggleSidebarCollapsed = (collapsed: boolean) => action(TOGGLE_SIDEBAR_COLLAPSED, {collapsed});\nexport const setSidebarWidth = (width: number) => action(SET_SIDEBAR_WIDTH, {width});\nexport const setRightSidebarWidth = (width: number) => action(SET_RIGHT_SIDEBAR_WIDTH, {width});\nexport const setCodyConsoleHeight = (height: number) => action(SET_CODY_CONSOLE_HEIGHT, {height});\n","import {fork, put,take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport * as SidebarAction from \"../../Layout/actions\";\nimport * as Action from \"../actions\";\nimport {BoardModel} from \"../model\";\nimport {Graph} from \"../model/Graph\";\n\ntype FlowAction = ActionType<typeof Action.Command.saveBoard\n    & typeof Action.Event.localBoardUpdatedWithRemoteChange\n    & typeof Action.Event.boardImported\n    & typeof Action.Event.boardInitialized>;\n\ntype SidebarToggleAction = ActionType<typeof SidebarAction.Command.toggleSidebarCollapsed>;\n\nfunction* onSaveBoard(boardId: BoardModel.BoardId, graph: Graph) {\n    yield put(Action.Command.updateBoardElementsTree(boardId, graph.getRoot().children()));\n}\n\nexport function* syncElementsTreeFlow() {\n\n    let sidebarCollapsed = false;\n    let latestGraph: Graph;\n    let  latestBoardId: BoardModel.BoardId;\n    let initialized = false;\n\n    while (true) {\n        const action: FlowAction & SidebarToggleAction = yield take([\n            Action.Type.SAVE_BOARD,\n            Action.Type.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE,\n            Action.Type.BOARD_IMPORTED,\n            Action.Type.BOARD_INITIALIZED,\n            SidebarAction.Type.TOGGLE_SIDEBAR_COLLAPSED,\n        ]);\n\n        if(initialized && action.type === SidebarAction.Type.TOGGLE_SIDEBAR_COLLAPSED) {\n            sidebarCollapsed = action.payload.collapsed;\n\n            if(!sidebarCollapsed && latestGraph! && latestBoardId!) {\n                yield fork(onSaveBoard, latestBoardId, latestGraph);\n            }\n        }\n\n        switch (action.type) {\n            case Action.Type.SAVE_BOARD:\n            case Action.Type.LOCAL_BOARD_UPDATED_WITH_REMOTE_CHANGE:\n            case Action.Type.BOARD_IMPORTED:\n            case Action.Type.BOARD_INITIALIZED:\n                if(initialized && latestBoardId !== action.payload.board.uid) {\n                    initialized = false;\n                }\n\n                latestGraph = action.payload.graph;\n                latestBoardId = action.payload.board.uid;\n\n                if(!sidebarCollapsed) {\n                    initialized = true;\n                    yield fork(onSaveBoard, latestBoardId, latestGraph);\n                }\n            break;\n        }\n    }\n}\n","import {map} from \"lodash\";\nimport {call, delay, fork, put, select, take} from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport {ResponseType} from \"../../api/util\";\nimport * as Socket from '../../Socket';\nimport * as Action from '../actions';\nimport { BoardSync } from '../model';\nimport {BoardVersion} from \"../model/BoardVersion\";\nimport { BoardSelector } from '../selectors';\nimport {marshalBoardChanged} from \"./loadBoardHistoryFlow\";\n\n\ntype SyncFlowAction = ActionType<typeof Action.Event.localBoardChanged>\n    | ActionType<typeof Action.Command.syncBoard>\n    | ActionType<typeof Action.Command.stopBoardSynchronisation>\n    | ActionType<typeof Action.Event.remoteBoardChanged>\n    | ActionType<typeof Socket.Action.Action.socketConnected>\n    | ActionType<typeof Socket.Action.Action.socketConnectionLost>;\n\nlet socketConnectionLost = false;\nlet userId: string | null = null;\nlet username: string | null = null;\nlet currentBoard: string | null = null;\nlet localChangeSetBuffer: Array<ActionType<typeof Action.Event.localBoardChanged>> = [];\nlet boardVersionOnConnectionLost: null|BoardVersion = null;\n\nconst handleSyncFlowAction = function* (action: SyncFlowAction) {\n    const socketStatus: Socket.Model.StatusModel.Status = yield select(Socket.Selector.StatusSelector.makeGetStatus());\n\n    switch (action.type) {\n        case Action.Type.LOCAL_BOARD_CHANGED:\n            if(socketStatus.isConnected()) {\n                yield put(Socket.Action.Action.sendSocketCmd(\n                    action.payload.boardChanged.name,\n                    action.payload.boardChanged.toJS(),\n                    Action.Type.LOCAL_CHANGE_SET_AS_HEAD_VERSION,\n                ));\n            }\n            if(socketConnectionLost) {\n                localChangeSetBuffer.push(action);\n            }\n            break;\n        case Action.Type.SYNC_BOARD:\n            userId = action.payload.userId;\n            username = action.payload.username;\n            currentBoard = action.payload.boardId;\n\n            yield put(Socket.Action.Action.connectSocket());\n            yield take([Socket.Action.Type.SOCKET_CONNECTED]);\n            yield put(Socket.Action.Action.listenOnSocketChannel('BoardChanged', Action.Type.REMOTE_BOARD_CHANGED));\n            yield put(Socket.Action.Action.sendSocketCmd(\n                'BoardOpened',\n                {boardId: action.payload.boardId, userId: action.payload.userId, username: action.payload.username},\n                Action.Type.REMOTE_BOARD_OPENED,\n            ));\n            break;\n        case Action.Type.STOP_BOARD_SYNCHRONISATION:\n            userId = null;\n            username = null;\n            currentBoard = null;\n            socketConnectionLost = false;\n            localChangeSetBuffer = [];\n            boardVersionOnConnectionLost = null;\n\n            yield put(Socket.Action.Action.stopListeningOnSocketChannel('BoardChanged'));\n            break;\n        case Action.Type.REMOTE_BOARD_CHANGED:\n            const board = yield select(BoardSelector.makeBoardByIdSelector(action.payload.event.board));\n            const remoteBoardChanged = BoardSync.remoteBoardChanged(action.payload.event);\n\n            if (board && remoteBoardChanged.toBoardVersion().isNewerThan(board.version)) {\n                yield put(Action.Command.enqueueBoardChanged(remoteBoardChanged));\n            }\n            break;\n        case Socket.Action.Type.SOCKET_CONNECTION_LOST:\n            socketConnectionLost = true;\n            if(currentBoard) {\n                const conLostBoard = yield select(BoardSelector.makeBoardByIdSelector(currentBoard));\n                boardVersionOnConnectionLost = conLostBoard.version;\n            }\n            break;\n        case Socket.Action.Type.SOCKET_CONNECTED:\n            if(socketConnectionLost && currentBoard) {\n                socketConnectionLost = false;\n\n                yield put(Socket.Action.Action.listenOnSocketChannel('BoardChanged', Action.Type.REMOTE_BOARD_CHANGED));\n                yield put(Socket.Action.Action.sendSocketCmd(\n                    'BoardOpened',\n                    {boardId: currentBoard, userId, username},\n                    Action.Type.REMOTE_BOARD_OPENED,\n                ));\n\n                for(const localBoardChangedAction of localChangeSetBuffer) {\n                    yield put(Socket.Action.Action.sendSocketCmd(\n                        localBoardChangedAction.payload.boardChanged.name,\n                        localBoardChangedAction.payload.boardChanged.toJS(),\n                        Action.Type.LOCAL_CHANGE_SET_AS_HEAD_VERSION,\n                    ));\n                    yield delay(50);\n                }\n                localChangeSetBuffer = [];\n\n                if(boardVersionOnConnectionLost) {\n                    // Check if we missed some patches done remotely\n                    const {response, error}: ResponseType = yield call(Action.Api.fetchNewerPatches, currentBoard, boardVersionOnConnectionLost);\n\n                    if(response) {\n                        const patches = map(response.data as any, (data: any) => marshalBoardChanged(data));\n\n                        for(const patch of patches) {\n                            yield put(Action.Command.enqueueBoardChanged(patch));\n                        }\n                    }\n                }\n                boardVersionOnConnectionLost = null;\n            }\n            break;\n        default:\n            // ignore\n            break;\n    }\n};\n\n\nexport function* syncFlow() {\n\n\n    while (true) {\n        const action: SyncFlowAction = yield take([\n            Action.Type.LOCAL_BOARD_CHANGED,\n            Action.Type.SYNC_BOARD,\n            Action.Type.STOP_BOARD_SYNCHRONISATION,\n            Action.Type.REMOTE_BOARD_CHANGED,\n            Socket.Action.Type.SOCKET_CONNECTION_LOST,\n            Socket.Action.Type.SOCKET_CONNECTED,\n        ]);\n\n        yield fork(handleSyncFlowAction, action);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../index\";\nimport {createStickyTemplateFromDefault, deriveStickTemplateId} from \"../model/StickyTemplate\";\nimport {makeStickyTemplateSelector} from \"../selectors/StickyTemplate\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\n\ntype SetStickyCommand = ActionType<typeof Action.Command.setStickyTemplate>;\ntype UpdateStickyAdvancedConfigCommand = ActionType<typeof Action.Command.updateStickyAdvancedConfig>;\ntype Command = SetStickyCommand & UpdateStickyAdvancedConfigCommand;\n\nfunction* handleSetStickyTemplate(command: SetStickyCommand) {\n    let stickyTemplate = yield select(makeStickyTemplateSelector(deriveStickTemplateId(command.payload.boardId, command.payload.cellType)));\n\n    const {boardId, cellType, template} = command.payload;\n\n    if (!stickyTemplate) {\n        stickyTemplate = createStickyTemplateFromDefault(\n            boardId,\n            cellType,\n            template\n        )\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.setStickyTemplate,\n        stickyTemplate.boardId,\n        stickyTemplate.cellType,\n        template\n    );\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not set sticky template.'));\n    }\n    if (response) {\n        if(!command.payload.disableNotification) {\n            yield put(NotifyAction.Command.info('Sticky Template set', 'Sticky template for ' + cellType + ' set'));\n        }\n\n        yield put(Action.Event.stickyTemplateSet(stickyTemplate.setTemplate(template)));\n    }\n}\n\nfunction* handleUpdateStickyAdvancedConfig(command: UpdateStickyAdvancedConfigCommand) {\n    let stickyTemplate = yield select(makeStickyTemplateSelector(deriveStickTemplateId(command.payload.boardId, command.payload.cellType)));\n\n    if (!stickyTemplate) {\n        stickyTemplate = createStickyTemplateFromDefault(\n            command.payload.boardId,\n            command.payload.cellType,\n            ''\n        );\n    }\n\n    const {response, error}: ResponseType = yield call(Action.Api.updateStickyAdvancedConfig,\n        stickyTemplate.boardId,\n        stickyTemplate.cellType,\n        command.payload.templateType,\n        command.payload.templateSchema || undefined\n    );\n\n    if (error) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not update sticky advanced config.'));\n    }\n    if (response) {\n        if(!command.payload.disableNotification) {\n            yield put(NotifyAction.Command.info('Advanced Sticky Config updated', 'Advanced Sticky Config for ' + stickyTemplate.cellType + ' updated'));\n        }\n        stickyTemplate = stickyTemplate.setTemplateType(command.payload.templateType);\n\n        if (command.payload.templateSchema) {\n            stickyTemplate = stickyTemplate.setTemplateSchema(command.payload.templateSchema);\n        }\n\n        yield put(Action.Event.stickyAdvancedConfigUpdated(stickyTemplate));\n    }\n}\n\nexport function* updateStickyTemplate() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.SET_STICKY_TEMPLATE,\n            Action.Type.UPDATE_STICKY_ADVANCED_CONFIG\n        ]);\n\n        if (command.type === Action.Type.SET_STICKY_TEMPLATE) {\n            yield fork(handleSetStickyTemplate, command);\n        } else {\n            yield fork(handleUpdateStickyAdvancedConfig, command);\n        }\n    }\n}\n","import {default as UserProfile} from \"../User/components/UserProfile\";\nimport * as Action from \"./actions\";\nimport {default as AddBoard} from \"./containers/AddBoardContainer\";\nimport {default as BoardOverview} from \"./containers/BoardOverviewContainer\";\nimport {default as EditBoard} from \"./containers/EditBoardContainer\";\nimport {default as MxGraphBoard} from \"./containers/MxGraphBoardContainer\";\nimport {BoardModel, BoardVersioning} from \"./model\";\nimport * as Saga from \"./sagas\";\nimport * as Selector from \"./selectors\";\n\nexport const MODULE = 'inspectioBoards';\n\nexport {\n    MxGraphBoard,\n    BoardOverview,\n    AddBoard,\n    EditBoard,\n    Action,\n    Saga,\n    Selector,\n    BoardModel,\n    BoardVersioning,\n    UserProfile\n}\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Card, Container, Grid, Header, Icon, Menu, MenuItem, Message} from \"semantic-ui-react\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeTeamListSelector} from \"../selectors/selectTeam\";\nimport TeamTab from \"./TeamOverview/TeamTab\";\n\nenum ActivePage {\n    organization = 'organization',\n    teams = 'teams'\n}\n\ninterface OwnProps {\n\n}\n\ntype TeamOverviewProps = OwnProps & WithNamespaces;\n\nconst TeamOverview = (props: TeamOverviewProps) => {\n    const teams = useSelector(makeTeamListSelector());\n    const currentUser = useSelector(makeGetCurrentUser());\n\n\n    return <Container>\n            <Grid stackable={true} padded={true}>\n                <TeamTab teams={teams} currentUser={currentUser} />\n            </Grid>\n    </Container>;\n};\n\nexport default withNamespaces()(TeamOverview);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {Accordion, Menu} from \"semantic-ui-react\";\n\ninterface OwnProps {\n    label: string;\n    maxLength?: number;\n    onClick?: (showAll: boolean) => void;\n}\n\nconst MaxLengthLabel: React.FC<OwnProps> = (props: OwnProps) => {\n    const maxLength = props.maxLength || 50;\n\n    const [active, setActive] = useState(false);\n\n    const showFullLabel = active && !props.onClick;\n\n    const handleClick = (evt: React.MouseEvent) => {\n        evt.preventDefault();\n        if(props.onClick) {\n            props.onClick(!active);\n        }\n        setActive(!active);\n    }\n\n    if(showFullLabel || props.label.length <= maxLength) {\n        return <>{ props.label }</>\n    } else {\n        return <>{ props.label.slice(0, maxLength) + ' ' }<span onClick={handleClick}>...</span></>\n    }\n};\n\nexport default MaxLengthLabel;\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {Icon, Label, List} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\nimport {Palette} from \"../../theme/palette\";\nimport {HistoryCellType, HistoryEntry} from \"../model/HistoryEntry\";\nimport CellIcon from \"./CellIcon\";\nimport MaxLengthLabel from \"./MaxLengthLabel\";\n\ninterface OwnProps {\n    entry: HistoryEntry;\n    key: number;\n    clicks: number;\n    onClick: () => void;\n}\n\nconst BoardHistoryEntry = (props: OwnProps) => {\n\n    const [showAll, setShowAll] = useState(false);\n\n    return <List.Item as={ Link }\n                      key={props.key}\n                      className=\"ui vertical segment\"\n                      style={{borderRadius:'0'}}\n                      onClick={props.onClick}\n                      to={{pathname: Routes.compileInspectioBoardWorkspace(props.entry.boardId), search: `?cells=${props.entry.cellId}&clicks=${props.clicks}`}}>\n        <CellIcon cellType={props.entry.cellType} />\n        <List.Content>\n            <List.Header><MaxLengthLabel label={props.entry.label} maxLength={24} onClick={s => setShowAll(s)} /></List.Header>\n            <List.Description>\n                {`${props.entry.action} by ${props.entry.username}`}\n            </List.Description><List.Description>\n            <span className=\"date\" style={{color:\"grey\", fontSize:\"10px\"}}>{ (new Date(props.entry.date)).toLocaleString() }</span>\n        </List.Description>\n        </List.Content>\n        {showAll && <List.List style={{padding:'0'}}><List.Item><List.Description>{ props.entry.label }</List.Description></List.Item></List.List>}\n    </List.Item>\n};\n\nexport default BoardHistoryEntry;","import * as React from 'react';\nimport {useState} from \"react\";\nimport {AccordionContent, AccordionTitle, List} from \"semantic-ui-react\";\n\ninterface OwnProps {\n    title: string;\n    index: number;\n    isActiveByDefault?: boolean;\n    entries: React.ReactNode[];\n}\n\nconst BoardHistoryGroup = (props: OwnProps) => {\n\n    const [active, setActive] = useState(props.isActiveByDefault || false);\n\n    const handleClick = () => setActive(!active);\n\n    return <>\n        <AccordionTitle content={props.title} index={props.index} active={active} onClick={handleClick} />\n        <AccordionContent active={active}>\n            <List selection={true}>\n                { props.entries }\n            </List>\n        </AccordionContent>\n    </>;\n};\n\nexport default BoardHistoryGroup;","import moment from \"moment\";\nimport * as React from 'react';\nimport {useEffect, useMemo, useState} from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Dispatch} from \"redux\";\nimport {Accordion, AccordionContent, Card, Icon, Label, List, Loader, Transition} from \"semantic-ui-react\";\nimport {loadFirstBoardHistoryChunk, loadNextBoardHistoryChunk, toggleBoardHistory} from \"../actions/commands\";\nimport {BoardId} from \"../model/Board\";\nimport {BoardVersion} from \"../model/BoardVersion\";\nimport * as HistoryModel from \"../model/HistoryEntry\";\nimport {HistoryState} from \"../model/HistoryState\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport {makeBoardHistoryByIdSelector} from \"../selectors/boardHistory\";\nimport BoardHistoryEntry from \"./BoardHistoryEntry\";\nimport BoardHistoryGroup from \"./BoardHistoryGroup\";\n\ninterface GroupedBoardHistory {\n    today: React.ReactNode[],\n    yesterday: React.ReactNode[],\n    twoDaysAgo: React.ReactNode[],\n    threeDaysAgo: React.ReactNode[],\n    fourDaysAgo: React.ReactNode[],\n    fiveDaysAgo: React.ReactNode[],\n    sixDaysAgo: React.ReactNode[],\n    lastWeek: React.ReactNode[],\n    twoWeeksAgo: React.ReactNode[],\n    threeWeeksAgo: React.ReactNode[],\n    fourWeeksAgo: React.ReactNode[],\n    lastMonth: React.ReactNode[],\n    older: React.ReactNode[],\n}\n\ninterface RelativeMoments {\n    today: moment.Moment;\n    startOfWeek: moment.Moment;\n    startOfMonth: moment.Moment;\n    startOfLastMonth: moment.Moment;\n}\n\ntype GroupedBoardHistoryKey = keyof GroupedBoardHistory;\n\nconst makeEmptyGroupedBoardHistory = (): GroupedBoardHistory => {\n    return {\n        today: [],\n        yesterday: [],\n        twoDaysAgo: [],\n        threeDaysAgo: [],\n        fourDaysAgo: [],\n        fiveDaysAgo: [],\n        sixDaysAgo: [],\n        lastWeek: [],\n        twoWeeksAgo: [],\n        threeWeeksAgo: [],\n        fourWeeksAgo: [],\n        lastMonth: [],\n        older: [],\n    }\n};\n\nconst marshalFeedEvent = (entry: HistoryModel.HistoryEntry, key: number, clicks: number, handleClick: () => void): React.ReactNode => {\n\n    return  <BoardHistoryEntry entry={entry} key={key} clicks={clicks} onClick={handleClick} />;\n};\n\nexport const generateRelativeMomentsFromNow = (now: moment.Moment): RelativeMoments => {\n    const startOfWeek = moment(now).startOf('isoWeek');\n    const startOfMonth = moment(now).startOf('month');\n    const startOfLastMonth = moment(startOfMonth).subtract(1, 'days').startOf('month');\n    const today = moment(now).startOf('day');\n\n    return {today, startOfWeek, startOfMonth, startOfLastMonth}\n};\n\nexport const convertToRelativeHistoryGroup = (\n    entryDate: moment.Moment,\n    now: moment.Moment,\n    {today, startOfWeek, startOfMonth, startOfLastMonth}: RelativeMoments\n): GroupedBoardHistoryKey => {\n\n    if(entryDate.isBefore(startOfLastMonth, 'month')) {\n        return 'older';\n    }\n\n    if(entryDate.isBefore(startOfMonth)) {\n        return 'lastMonth';\n    }\n\n    if(entryDate.isBefore(startOfWeek)) {\n        const numOfWeeks = entryDate.diff(startOfWeek, 'weeks');\n\n        if(numOfWeeks === 0) {\n            return 'lastWeek';\n        }\n\n        if(numOfWeeks === -1) {\n            return 'twoWeeksAgo';\n        }\n\n        if(numOfWeeks === -2) {\n            return 'threeWeeksAgo';\n        }\n\n        return 'fourWeeksAgo';\n    }\n\n    if(entryDate.isBefore(today)) {\n        const numOfDays = entryDate.diff(today, 'days');\n\n        if(numOfDays === 0) {\n            return 'yesterday';\n        }\n\n        if(numOfDays === -1) {\n            return 'twoDaysAgo';\n        }\n\n        if(numOfDays === -2) {\n            return 'threeDaysAgo';\n        }\n\n        if(numOfDays === -3) {\n            return 'fourDaysAgo';\n        }\n\n        if(numOfDays === -4) {\n            return 'fiveDaysAgo';\n        }\n\n        return 'sixDaysAgo';\n    }\n\n    return 'today';\n}\n\nconst loadHistory = (dispatch: Dispatch, boardId: BoardId, boardVersion?: BoardVersion): void => {\n    if(boardVersion) {\n        dispatch(loadNextBoardHistoryChunk(boardId, boardVersion))\n    } else {\n        dispatch(loadFirstBoardHistoryChunk(boardId));\n    }\n}\n\ninterface BoardHistoryRouteMatchParams {\n    uid: BoardId;\n}\n\ntype BoardHistoryProps =  WithNamespaces & RouteComponentProps<BoardHistoryRouteMatchParams>;\n\nconst BoardHistory = (props: BoardHistoryProps) => {\n\n    const getBoardByIdSelector = useMemo(() => makeBoardByIdSelector(props.match.params.uid), []);\n    const getBoardHistoryByIdSelector = useMemo(() => makeBoardHistoryByIdSelector(props.match.params.uid), []);\n    const [clicks, setClicks] = useState(1);\n\n    const board = useSelector(getBoardByIdSelector);\n    const history: HistoryState = useSelector(getBoardHistoryByIdSelector);\n    const dispatch = useDispatch();\n    const visible =  (board && board.shouldShowHistory) || false;\n\n    const handleClick = () => {\n        setClicks(clicks + 1);\n    }\n\n    const feedEvents: GroupedBoardHistory = useMemo(() => {\n\n        const now = moment();\n        const relativeMoments = generateRelativeMomentsFromNow(now);\n        const groupedHistory = makeEmptyGroupedBoardHistory();\n\n        history.history.forEach((entry, key) => {\n            const entryDate = moment(entry.date, moment.ISO_8601);\n            const entryComponent = marshalFeedEvent(entry, key + 1, clicks, handleClick);\n            const groupKey = convertToRelativeHistoryGroup(entryDate, now, relativeMoments);\n            groupedHistory[groupKey].push(entryComponent);\n        });\n\n        return groupedHistory;\n    }, [history, clicks]);\n\n    const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n        const element = e.target;\n\n        if(element instanceof HTMLDivElement) {\n            if (element.scrollHeight - element.scrollTop === element.clientHeight) {\n                if(!history.loading && history.olderPatchesAvailable) {\n                    loadHistory(dispatch, props.match.params.uid, history.oldestBoardVersion);\n                }\n            }\n        }\n    }\n\n    useEffect(() => {\n        if(history.history.count() < 50 && !history.loading && history.olderPatchesAvailable) {\n            loadHistory(dispatch, props.match.params.uid, history.oldestBoardVersion);\n        }\n    }, [history]);\n\n    const handleCloseHistory = useMemo(() => {\n        return () => {\n            dispatch(toggleBoardHistory(props.match.params.uid, false));\n        };\n    }, [props.match.params.uid]);\n\n    const boardHistoryGroups = [];\n    let count = 0;\n    let group: GroupedBoardHistoryKey;\n    for(group in feedEvents) {\n        if (feedEvents.hasOwnProperty(group)) {\n            if(feedEvents[group].length > 0) {\n                boardHistoryGroups.push(<BoardHistoryGroup key={group} title={props.t(`insp.history.${group}`)} index={count} entries={feedEvents[group]} isActiveByDefault={count === 0} />);\n                count++;\n            }\n\n        }\n    }\n\n    if(visible && history.loading) {\n        boardHistoryGroups.push(<AccordionContent active={true}>\n            <List>\n                <List.Item key=\"item-loader\" style={{paddingTop: \"10px\"}}><Loader active={true} inline='centered' /></List.Item>\n            </List>\n        </AccordionContent>)\n    }\n\n    return <Transition.Group animation=\"slide down\">{visible && <div style={{position: \"absolute\", paddingTop: \"50px\", top: \"0px\", right: \"0px\", height: \"100%\", overflow: \"hidden\", borderLeft:\"5px solid #eee\"}}>\n            <Card style={{height: \"100%\", borderRadius:'0'}}>\n            <Card.Content>\n              <Card.Header><Icon name=\"close\" className=\"right floated\" onClick={handleCloseHistory} style={{cursor: \"pointer\"}} /> Activity</Card.Header>\n            </Card.Content>\n            <Card.Content onScroll={handleScroll} style={{position: \"relative\", height: \"100%\", overflowY: \"scroll\",}}>\n                <Accordion>\n                    { boardHistoryGroups }\n                </Accordion>\n            </Card.Content>\n            </Card>\n        </div>}\n    </Transition.Group>\n};\n\nexport default withNamespaces()(withRouter(BoardHistory));\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {useEffect} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Redirect, RouteComponentProps} from \"react-router\";\nimport {Dimmer, Loader} from \"semantic-ui-react\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport * as Routes from \"../../routes\";\nimport * as UserModule from \"../../User\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {ackBoardInvitation, fetchBoardOfInvitation} from \"../actions/api\";\nimport {BoardId, BoardName} from \"../model/Board\";\n\ninterface OwnProps {\n\n}\n\ninterface RouteMatchParams {\n    invitation: string;\n}\n\ntype BoardInvitationProps = OwnProps & RouteComponentProps<RouteMatchParams> & WithNamespaces;\n\nconst BoardInvitation = (props: BoardInvitationProps) => {\n    const invitationId = props.match.params.invitation;\n\n    const currentUserSelector = makeGetCurrentUser();\n\n    const currentUser = useSelector(currentUserSelector);\n    const [doRedirect, setDoRedirect] = useState(false);\n    const [redirectPath, setRedirectPath] = useState(Routes.inspectio);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(currentUser.signedIn) {\n            fetchBoardOfInvitation(invitationId)\n            .then(({response, error}) => {\n                if(error) {\n                    dispatch(Notify.Command.error('Request failed', 'Failed to process board invitation'));\n                    setDoRedirect(true);\n                    return;\n                }\n\n                if(response) {\n                    const boardName: BoardName = response.data.name;\n                    const boardId: BoardId = response.data.boardId;\n                    const organizationId: OrganizationId | null = response.data.organizationId;\n\n                    let retries = 0;\n\n                    const handleAckResponse = (ackResponse: ResponseType) => {\n                        if(ackResponse.error) {\n                            // Invited user is new and username sync seems still be in progress\n                            if(retries < 2) {\n                                retries++;\n                                window.setTimeout(() => {\n                                    ackBoardInvitation(invitationId).then(handleAckResponse);\n                                }, 100);\n                                return;\n                            }\n\n                            dispatch(Notify.Command.error('Command failed', 'Failed to process board invitation'));\n                            setDoRedirect(true);\n                            return;\n                        }\n\n                        if(organizationId) {\n                            dispatch(UserModule.Action.Command.switchActiveOrganization(organizationId));\n                        }\n\n                        dispatch(Notify.Command.info(\n                            props.t('insp.board.joined.title'),\n                            props.t('insp.board.joined.details', {name: boardName}))\n                        );\n                        setRedirectPath(Routes.compileInspectioBoardWorkspace(boardId));\n                        setDoRedirect(true);\n                    };\n\n                    ackBoardInvitation(invitationId)\n                        .then(handleAckResponse);\n                }\n            });\n        }\n    }, [currentUser.signedIn]);\n\n\n    if(doRedirect) {\n        return <Redirect to={redirectPath} />\n    }\n\n    return <Dimmer active={true} className=\"page\"><Loader size=\"large\">Processing Board Invitation</Loader></Dimmer>;\n};\n\nexport default withNamespaces()(BoardInvitation);\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Redirect, RouteComponentProps} from \"react-router\";\nimport {Dimmer, Loader} from \"semantic-ui-react\";\nimport {ResponseType} from \"../../api/util\";\nimport {Action} from \"../../InspectioBoards\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport * as Routes from \"../../routes\";\nimport * as User from \"../../User\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {ackTeamInvitation, fetchTeamOfInvitation} from \"../actions/api\";\nimport {TeamName} from \"../model/Team\";\n\ninterface OwnProps {\n\n}\n\ninterface RouteMatchParams {\n    invitation: string;\n}\n\ntype TeamInvitationProps = OwnProps & RouteComponentProps<RouteMatchParams> & WithNamespaces;\n\nconst TeamInvitation = (props: TeamInvitationProps) => {\n    const invitationId = props.match.params.invitation;\n    const currentUserSelector = makeGetCurrentUser();\n\n    const currentUser = useSelector(currentUserSelector);\n    const [doRedirect, setDoRedirect] = useState(false);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(currentUser.signedIn) {\n            fetchTeamOfInvitation(invitationId)\n            .then(({response, error}) => {\n                if(error) {\n                    dispatch(Notify.Command.error('Request failed', 'Failed to process team invitation'));\n                    setDoRedirect(true);\n                    return;\n                }\n\n                if(response) {\n                    const teamName: TeamName = response.data.name;\n                    const organizationId: OrganizationId = response.data.organizationId || null;\n\n                    let retries = 0;\n\n                    const handleAckResponse = (ackResponse: ResponseType) => {\n                        if(ackResponse.error) {\n                            // Invited user is new and username sync seems still be in progress\n                            if(retries < 2) {\n                                retries++;\n                                window.setTimeout(() => {\n                                    ackTeamInvitation(invitationId).then(handleAckResponse);\n                                }, 100);\n                                return;\n                            }\n\n                            dispatch(Notify.Command.error('Command failed', 'Failed to process team invitation'));\n                            setDoRedirect(true);\n                            return;\n                        }\n\n                        dispatch(Notify.Command.info(\n                            props.t('insp.team.joined.title'),\n                            props.t('insp.team.joined.details', {team: teamName}))\n                        );\n\n                        if(organizationId) {\n                            dispatch(User.Action.Command.switchActiveOrganization(organizationId));\n                        }\n\n                        dispatch(Action.Query.fetchUserBoards());\n                        setDoRedirect(true);\n                    };\n\n                    ackTeamInvitation(invitationId)\n                        .then(handleAckResponse);\n                }\n            });\n        }\n    }, [currentUser.signedIn]);\n\n    if(doRedirect) {\n        return <Redirect to={Routes.inspectio} />\n    }\n\n    return <Dimmer active={true} className=\"page\"><Loader size=\"large\">Processing Team Invitation</Loader></Dimmer>;\n};\n\nexport default  withNamespaces()(TeamInvitation);\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Button, Dropdown, DropdownProps, Modal} from \"semantic-ui-react\";\nimport * as BoardModule from \"../../InspectioBoards\";\nimport {TeamId} from \"../model/Team\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\n\ninterface OwnProps {\n    teamId: TeamId;\n    open: boolean;\n    onClose: () => void;\n    onSubmit: (selectedBoard: BoardModule.BoardModel.BoardId) => void;\n}\n\ntype AddBoardToTeamModalProps = OwnProps & WithNamespaces;\n\nconst AddBoardToTeamModal = (props: AddBoardToTeamModalProps) => {\n\n    const userBoards = useSelector(BoardModule.Selector.BoardListSelector.makeGetBoards(true));\n    const [selectedBoard, setSelectedBoard] = useState('');\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n\n    const isAdmin = organization ? organization.isAdmin(currentUser.uid) : false;\n\n    const boardChoices = userBoards.filter(board => (board.organization? isAdmin : !board.shared) && !board.assignedTeams.contains(props.teamId)).map(board => ({\n        key: board.uid,\n        value: board.uid,\n        text: board.name,\n    })).toArray();\n\n    const handleChange = (e: React.SyntheticEvent, dProps: DropdownProps) => setSelectedBoard(dProps.value as string);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        props.onSubmit(selectedBoard);\n        setSelectedBoard('');\n    };\n\n    return (\n        <Modal open={props.open} closeIcon={true} onClose={props.onClose} size=\"mini\">\n            <Modal.Header>{props.t('insp.team.grant_access')}</Modal.Header>\n            <Modal.Content>\n                <form onSubmit={handleSubmit}>\n                    <Dropdown\n                        placeholder={props.t('insp.team.choose_board') as string}\n                        fluid={true}\n                        search={true}\n                        selection={true}\n                        options={boardChoices}\n                        onChange={handleChange}\n                        value={selectedBoard}\n                    />\n                    <div style={{marginTop: '10px'}}>\n                        <Button primary={true} type=\"submit\" disabled={selectedBoard === ''}>\n                            {props.t('app.form.confirm')}\n                        </Button>\n                    </div>\n                </form>\n            </Modal.Content>\n        </Modal>\n    );\n};\n\nexport default withNamespaces()(AddBoardToTeamModal);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Redirect} from \"react-router\";\nimport {Button, Confirm, Dropdown, Menu, Popup} from \"semantic-ui-react\";\nimport * as BoardModule from \"../../InspectioBoards\";\nimport * as Route from \"../../routes\";\nimport * as Action from \"../actions\";\nimport {Team} from \"../model/Team\";\n\n\ninterface OwnProps {\n    board: BoardModule.BoardModel.Board;\n    team: Team;\n    readonly?: boolean;\n}\n\ntype BoardEntryProps = OwnProps & WithNamespaces;\n\nconst BoardEntry = (props: BoardEntryProps) => {\n    const [showDropdown, setShowDropdown] = useState(false);\n    const [showRemoveBoardConfirm, setShowRemoveBoardConfirm] = useState(false);\n    const [redirectToBoard, setRedirectToBoard] = useState(false);\n    const dispatch = useDispatch();\n\n    const openPopup = () => {\n        setShowDropdown(true);\n    };\n\n    const closePopup = () => {\n        setShowDropdown(false);\n    };\n\n    const removeBoardFromTeam = () => {\n        if(!props.readonly) {\n            dispatch(Action.Command.adminRevokeTeamAccessToBoard(props.board.uid, props.team.uid));\n        }\n        setShowRemoveBoardConfirm(false);\n    };\n\n    const handleBoardClick = () => {\n        if(props.readonly) {\n            setRedirectToBoard(true);\n        }\n    };\n\n    if(redirectToBoard) {\n        return <Redirect push={true} to={Route.compileInspectioBoardWorkspace(props.board.uid)} />\n    }\n\n    return <>\n        <Popup\n            open={showDropdown}\n            onOpen={openPopup}\n            onClose={closePopup}\n            on=\"click\"\n            position=\"bottom center\"\n            disabled={props.readonly}\n            content={<Menu secondary={true} vertical={true} compact={true}>\n                <Menu.Item\n                    content={props.t('app.open') as string}\n                    onClick={() => setRedirectToBoard(true)}\n                />\n                <Menu.Item\n                    content={props.t('app.form.remove') as string}\n                    onClick={() => {\n                        setShowDropdown(false);\n                        setShowRemoveBoardConfirm(true);\n                    }}\n                />\n            </Menu>}\n            trigger={<div className=\"ui large basic orange button\" key={props.board.uid} onClick={handleBoardClick}>\n                <div>{ props.board.name }</div>\n            </div>}\n        />\n        <Confirm\n            open={showRemoveBoardConfirm}\n            header={props.t('insp.team.remove_board_confirm_title')}\n            content={props.t(\n                'insp.team.remove_board_confirm_text',\n                { board_name: props.board.name }\n            )}\n            confirmButton={props.t('insp.team.remove_board_confirm_button')}\n            cancelButton={<Button content={props.t('app.form.cancel')} className=\"basic noborder\" />}\n            onCancel={() => setShowRemoveBoardConfirm(false)}\n            onConfirm={removeBoardFromTeam}\n        />\n    </>;\n};\n\nexport default withNamespaces()(BoardEntry);","import * as React from 'react';\nimport {SyntheticEvent, useRef, useState} from \"react\";\nimport {Input} from \"semantic-ui-react\";\n\ninterface OwnProps {\n    text: string;\n    charSize: number;\n    widthUnit: string;\n    onTextChanged: (text: string) => void;\n    placeholder?: string;\n    padding?: number;\n    minWidth?: number;\n    required?: boolean;\n    border?: string;\n    focus?: boolean;\n    onCancel?: () => void;\n    disabled?: boolean;\n}\n\ntype EditableTextlineProps = OwnProps;\n\nconst EditableTextline = (props: EditableTextlineProps) => {\n    const [enterText, setEnterText] = useState(props.focus || false);\n    const [hasError, setHasError] = useState(false);\n    const [value, setValue] = useState(props.text);\n    const inputEl = useRef<Input>(null);\n\n    const handleTextClick = () => {\n        setEnterText(true);\n        window.setTimeout(() => {\n            if(inputEl && inputEl.current) {\n                inputEl.current.focus();\n            }\n        }, 200);\n    };\n\n    const handleChange = (newVal: string) => {\n        if(newVal !== '' && hasError) {\n            setHasError(false);\n        }\n\n        if(newVal === '' && props.required && !hasError) {\n            setHasError(true);\n        }\n\n        setValue(newVal);\n    }\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n        if(e.key === 'Enter') {\n            handleBlur();\n        } else if (e.key === 'Escape') {\n            setValue(props.text);\n            setHasError(false);\n            setEnterText(false);\n            if(props.onCancel) {\n                props.onCancel();\n            }\n        }\n    }\n\n    const handleBlur = () => {\n        if(props.required && value === '') {\n            setHasError(true);\n            window.setTimeout(() => {\n                if(inputEl && inputEl.current) {\n                    inputEl.current.focus();\n                }\n            }, 200);\n        } else {\n            if(value !== props.text) {\n                props.onTextChanged(value);\n            }\n            setEnterText(false);\n        }\n    }\n\n    const valueLength = value !== '' ? value.length : (props.placeholder? props.placeholder.length : 0);\n    const padding = props.padding || 0;\n    let width = (props.charSize * valueLength + padding);\n    if(props.minWidth && width < props.minWidth) {\n        width = props.minWidth;\n    }\n\n    let border = props.border || '2px solid #4593CE';\n\n    if(hasError) {\n        border = '4px solid #E0B4B4';\n    }\n\n    const text = props.text === ''? props.placeholder || '' : props.text;\n\n    const showInput = enterText && !props.disabled;\n\n    return <>\n        {showInput && <Input\n                            transparent={true}\n                            error={hasError}\n                            value={value}\n                            ref={inputEl}\n                            onBlur={handleBlur}\n                            onChange={(e, data) => handleChange(data.value)}\n                            onKeyDown={handleKeyDown}\n                            placeholder={props.placeholder}\n                            autoFocus={props.focus}\n                            style={{width: width + props.widthUnit, borderBottom: border}}/>}\n        {!showInput && <span onClick={handleTextClick}>{ text }</span>}\n        </>;\n};\n\nexport default EditableTextline;\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport EditableTextline from \"../../core/components/EditableTextline\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ninterface OwnProps {\n    team: Team.Team;\n    addTeamMode?: boolean;\n    onNameChanged?: (newName: Team.TeamName) => void;\n    onCancelName?: () => void;\n    onCancelDescription?: () => void;\n}\n\ntype EditableTeamHeaderProps = OwnProps & WithNamespaces;\n\nconst INPUT_CHAR_SIZE = 9;\nconst CHAR_SIZE_UNIT = 'px';\nconst ADDITIONAL_CHAR_PADDING = 20;\n\nconst EditableTeamHeader = (props: EditableTeamHeaderProps) => {\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n    const dispatch = useDispatch();\n\n    const handleNameChanged = (teamName: Team.TeamName) => {\n        if(props.addTeamMode) {\n            dispatch(Action.Command.addTeam(props.team.uid, teamName, activeOrganization? activeOrganization.uid : null));\n            if(props.onNameChanged) {\n                props.onNameChanged(teamName);\n            }\n        } else {\n            dispatch(Action.Command.renameTeam(props.team.uid, teamName));\n        }\n    }\n\n    const handleDescriptionChanged = (desc: Team.TeamDescription) => {\n        dispatch(Action.Command.changeTeamDescription(props.team.uid, desc));\n    }\n\n\n    return <h3 style={{margin:0, cursor:\"pointer\"}} id={props.team.uid}>\n        <EditableTextline\n            text={props.team.name}\n            charSize={INPUT_CHAR_SIZE}\n            widthUnit={CHAR_SIZE_UNIT}\n            padding={ADDITIONAL_CHAR_PADDING}\n            required={true}\n            onTextChanged={handleNameChanged}\n            focus={props.addTeamMode}\n            onCancel={props.onCancelName}\n            placeholder={props.t('insp.team.team_name') as string}\n        />\n        <span> &mdash; </span>\n        <span className=\"sub header\" style={{margin:0, cursor:\"pointer\"}}><EditableTextline\n            text={props.team.description}\n            charSize={INPUT_CHAR_SIZE}\n            widthUnit={CHAR_SIZE_UNIT}\n            padding={ADDITIONAL_CHAR_PADDING}\n            placeholder={props.t('insp.team.team_description') as string}\n            onTextChanged={handleDescriptionChanged}\n            onCancel={props.onCancelDescription}\n        /></span>\n    </h3>;\n};\n\nexport default withNamespaces()(EditableTeamHeader);\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {ButtonGroup, Grid, GridColumn, GridRow, Icon, ListItem} from \"semantic-ui-react\";\nimport SecondaryButton from \"../../core/components/SecondaryButton\";\nimport {isSuccess} from \"../../core/validation/either\";\nimport * as UserModule from \"../../User\";\nimport UserAvatar from \"../../User/components/UserAvatar\";\nimport {createAnonymous, IioUserInfo} from \"../../User/model/IioUserInfo\";\nimport * as Action from \"../actions\";\nimport {Status, TeamInvitation} from \"../model/TeamInvitation\";\nimport {makeTeamInvitationListSelector, makeTeamInvitationSelector} from \"../selectors/TeamInvitation\";\n\ninterface OwnProps {\n    teamInvitation: TeamInvitation;\n}\n\ntype OpenInvitationProps = OwnProps & WithNamespaces;\n\nconst OpenInvitation = (props: OpenInvitationProps) => {\n\n    const [userInfo, setUserInfo] = useState(createAnonymous());\n    const [isResending, setIsResending] = useState(false);\n    const [isRevoking, setIsRevoking] = useState(false);\n    const [isRevoked, setIsRevoked] = useState(false);\n    const dispatch = useDispatch();\n    const cachedInvitation = useSelector(makeTeamInvitationSelector(props.teamInvitation.uid));\n\n    useEffect(() => {\n        UserModule.Action.Api.getInspectioUserInfoByEmail(props.teamInvitation.invitedUser).then(({response, error}) => {\n            if(response) {\n                const result = UserModule.IioUserInfo.createIioUserInfoFromServerData(response.data);\n\n                if(isSuccess(result)) {\n                    setUserInfo(result.value);\n                }\n            }\n        })\n    }, [props.teamInvitation.invitedUser]);\n\n    useEffect(() => {\n        if(isResending) {\n            setIsResending(false);\n        }\n\n        if(isRevoking && cachedInvitation && cachedInvitation.status === Status.revoked) {\n            setIsRevoked(true);\n        }\n    }, [cachedInvitation]);\n\n    const handleResendClick = () => {\n        setIsResending(true);\n        dispatch(Action.Command.resendTeamInvitation(props.teamInvitation.uid));\n    };\n\n    const handleRevokeClick = () => {\n        setIsRevoking(true);\n        dispatch(Action.Command.revokeTeamInvitation(props.teamInvitation.uid));\n    }\n\n    if(isRevoked) {\n        return <></>;\n    };\n\n    return <ListItem>\n        <UserAvatar user={userInfo} size=\"mini\" />\n        <span style={{paddingLeft: \"10px\"}}>{props.teamInvitation.invitedUser}</span>\n        <ButtonGroup floated=\"right\">\n            <SecondaryButton content={props.t('app.form.resend')} icon=\"paper plane\" loading={isResending} onClick={handleResendClick} />\n            <SecondaryButton content={props.t('app.form.revoke')} icon=\"delete\" loading={isRevoking} onClick={handleRevokeClick} />\n        </ButtonGroup>\n    </ListItem>\n};\n\nexport default withNamespaces()(OpenInvitation);","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {List as SemanticList} from \"semantic-ui-react\";\nimport {TeamInvitation} from \"../model/TeamInvitation\";\nimport OpenInvitation from \"./OpenInvitation\";\n\ninterface OwnProps {\n    invitations: List<TeamInvitation>\n}\n\ntype OpenInvitationListProps = OwnProps;\n\nconst OpenInvitationList = (props: OpenInvitationListProps) => {\n\n    const items = props.invitations.map((invitation) => {\n        return <OpenInvitation teamInvitation={invitation} key={invitation.uid}/>;\n    });\n\n    return <SemanticList relaxed={true} divided={true}>\n        {items}\n    </SemanticList>;\n};\n\nexport default OpenInvitationList;","import {List} from \"immutable\";\nimport * as React from \"react\";\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Button, Icon, Input, Modal, Search} from \"semantic-ui-react\";\nimport * as uuid from \"uuid\";\nimport {\n    execForEach,\n    execValidate,\n    execValidateEach,\n    isFailure,\n    isSuccess,\n    pipe, predicateEither, validate\n} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport * as Action from \"../actions\";\nimport {fetchOpenTeamInvitations} from \"../actions/api\";\nimport {Team} from \"../model\";\nimport {createTeamInvitationFromServerData, TeamInvitation} from \"../model/TeamInvitation\";\nimport OpenInvitationList from \"./OpenInvitationList\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {UserId} from \"../../User/model/UserInfo\";\nimport {makeIioFilteredUserListSelector} from \"../../User/selectors/iioUserInfo\";\n\ninterface OwnProps {\n    team: Team.Team;\n    open: boolean;\n    onClose: () => void;\n}\n\ntype InviteUserToTeamModalProps = WithNamespaces & RouteComponentProps & OwnProps;\n\nconst InviteUserToTeamModal = (props: InviteUserToTeamModalProps) => {\n    const [email, setEmail] = useState('');\n    const [loadingInvitations, setLoadingInvitations] = useState(true);\n    const [invitations, setInvitations] = useState(List<TeamInvitation>());\n    const [failedToLoad, setFailedToLoad] = useState(false);\n\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const organizationUserIds = List<UserId>(organization ? [organization.ownerId, ...organization.members.toJS()] : []);\n    const organizationUsers = useSelector(makeIioFilteredUserListSelector(organizationUserIds));\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(props.open) {\n            setLoadingInvitations(true);\n            fetchOpenTeamInvitations(props.team.uid).then(({response, error}) => {\n                setLoadingInvitations(false);\n\n                if(error) {\n                    // tslint:disable-next-line:no-console\n                    console.error(error);\n                    setFailedToLoad(true);\n                }\n\n                if(response) {\n                    const result = pipe(\n                        response.data,\n                        execValidate([isArray(), \"Response data is not of type Array\"]),\n                        execForEach(createTeamInvitationFromServerData)\n                    );\n\n                    if(isFailure(result)) {\n                        // tslint:disable-next-line:no-console\n                        console.error(\"Failed to process open team invitations loaded from server\", result.value, response.data);\n                        setFailedToLoad(true);\n                    }\n\n                    if(isSuccess(result)) {\n                        setInvitations(List(result.value));\n                        dispatch(Action.Event.teamInvitationsLoaded(List(result.value)));\n                    }\n                }\n            });\n        }\n\n        if(!props.open) {\n            setInvitations(List());\n        }\n    }, [props.open]);\n\n    const handleSubmit = () => {\n        dispatch(Action.Command.inviteUserToTeam(uuid.v4(), props.team.uid, email));\n        setEmail('');\n        props.onClose();\n    };\n\n    const hasInvitations = !(!loadingInvitations && invitations.count() === 0);\n\n    const filteredUsers = organizationUsers\n        .filter(user => user.username.toLocaleLowerCase().includes(email.toLocaleLowerCase()) || user.email.toLocaleLowerCase().includes(email.toLocaleLowerCase()))\n        .sortBy(user => user.username)\n        .map(user => {\n            return {\n                id: user.userId,\n                title: user.username,\n                description: user.email,\n                image: user.avatarUrl,\n            }\n        });\n\n    return (\n        <Modal open={props.open} closeIcon={true} onClose={props.onClose}>\n            <Modal.Header>{props.t('insp.team.invite_user')}</Modal.Header>\n            <Modal.Content>\n                <form onSubmit={handleSubmit}>\n                    <div style={{ marginBottom: '10px' }}>\n                        <Search\n                            style={{ width: '100%' }}\n                            fluid={true}\n                            value={email}\n                            results={filteredUsers.toArray()}\n                            placeholder={props.t('insp.team.user_email')}\n                            showNoResults={false}\n                            resultRenderer={data => {\n                                return <div key={data.id}>\n                                    <div className=\"ui image avatar\">\n                                        <img src={data.image} alt={data.title} />\n                                    </div>\n                                    <div className=\"content\">\n                                        <div className=\"title\">{data.title}</div>\n                                        <div className=\"description\">{data.description}</div>\n                                    </div>\n                                </div>\n                            }}\n                            onSearchChange={(e, data) => setEmail(data.value || '')}\n                            onResultSelect={(e, data) => {\n                                setEmail(data.result.description);\n                            }}\n                            autoFocus={true}\n                        />\n                    </div>\n                    <Button primary={true} type=\"submit\" disabled={!isValidEmail(email)}>\n                        {props.t('insp.team.send_invitation')}\n                    </Button>\n                </form>\n                <div className=\"ui horizontal divider\">{ props.t('insp.team.open_invitations') }</div>\n                {loadingInvitations && <Icon loading={true} name=\"spinner\" />}\n                {hasInvitations && <OpenInvitationList invitations={invitations} />}\n                {!hasInvitations && !failedToLoad && <p className=\"infotextSecondary\">{ props.t('insp.team.empty_invitations') }</p>}\n                {failedToLoad && <p className=\"infotextSecondary\" style={{color: 'red'}}>{ props.t('insp.team.error_loading_invitations') }</p>}\n            </Modal.Content>\n        </Modal>\n    );\n};\n\n/**\n * Validates the basic email structure; not a perfect validation\n *\n * @param value\n */\nconst isValidEmail = (value: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\n};\n\nexport default withNamespaces()(withRouter(InviteUserToTeamModal));\n","import * as React from 'react';\nimport {SyntheticEvent, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Confirm, Dropdown} from \"semantic-ui-react\";\nimport {useOnBodyClick} from \"../../core/hooks/useOnBodyClick\";\nimport * as UserModule from \"../../User\";\nimport {IioUserInfo} from \"../../User/model\";\nimport * as Action from \"../actions\";\nimport {Team} from \"../model\";\n\ninterface OwnProps {\n    isOwner: boolean;\n    teamId: Team.TeamId;\n    member: IioUserInfo.IioUserInfo;\n    readonly?: boolean;\n}\n\ntype MemberEntryProps = OwnProps & WithNamespaces;\n\nconst MemberEntry = (props: MemberEntryProps) => {\n    const [showDropdown, setShowDropdown] = useState(false);\n    const [avatarLoaded, setAvatarLoaded] = useState(false);\n    const [showRemoveMemberConfirm, setShowRemoveMemberConfirm] = useState(false);\n    const dispatch = useDispatch();\n\n    useOnBodyClick(() => {\n        setShowDropdown(false);\n    });\n\n    const canBeRemoved = (userId: UserModule.UserModel.UserId): boolean => {\n        return !props.isOwner && !props.readonly;\n    }\n\n    const handleMemberClick = (e: SyntheticEvent) => {\n        if(canBeRemoved(props.member.userId)) {\n            e.stopPropagation();\n            setShowDropdown(!showDropdown);\n        }\n    };\n\n    const removeMemberFromTeam = () => {\n        if(!props.readonly) {\n            dispatch(Action.Command.removeMemberFromTeam(props.teamId, props.member.userId));\n        }\n        setShowRemoveMemberConfirm(false);\n    };\n\n    const adminClass = props.isOwner? 'admin-member' : '';\n\n    return <div className={\"item \" + adminClass} key={props.member.userId} style={canBeRemoved(props.member.userId) ? {cursor: \"pointer\"} : {}}>\n        <Dropdown open={showDropdown} icon={false} pointing=\"top\" disabled={props.readonly}>\n            <Dropdown.Menu>\n                <Dropdown.Item\n                    text={props.t('app.form.remove')}\n                    onClick={() => setShowRemoveMemberConfirm(true)}\n                />\n            </Dropdown.Menu>\n        </Dropdown>\n        {!avatarLoaded && <span className=\"ui avatar image placeholder\" onClick={handleMemberClick} />}\n        <img className=\"ui avatar image\"\n             src={props.member.avatar()}\n             onClick={handleMemberClick}\n             alt={props.member.username}\n             onLoad={() => setAvatarLoaded(true)}\n             style={{display: avatarLoaded ? 'inline-block' : 'none'}} />\n        <div className=\"content\" onClick={handleMemberClick}>\n            <div className=\"header\">{props.member.username}</div>\n        </div>\n        <Confirm\n            open={!props.readonly && showRemoveMemberConfirm}\n            header={props.t('insp.team.remove_user_confirm_title')}\n            content={props.t(\n                'insp.team.remove_user_confirm_text',\n                { user_name: props.member.username }\n            )}\n            confirmButton={props.t('insp.team.remove_user_confirm_button')}\n            cancelButton={<Button content={props.t('app.form.cancel')} className=\"basic noborder\" />}\n            onCancel={() => setShowRemoveMemberConfirm(false)}\n            onConfirm={removeMemberFromTeam}\n        />\n    </div>\n};\n\nexport default withNamespaces()(MemberEntry);\n","import * as React from 'react';\nimport {TeamId} from \"../model/Team\";\nimport {List} from \"immutable\";\nimport {UserOrganizationInfo} from \"../../Organization/model/UserOrganizationInfo\";\nimport {useDispatch} from \"react-redux\";\nimport {useState} from \"react\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {Button, Grid, GridColumn, Message, Select} from \"semantic-ui-react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport * as Action from \"../actions\";\n\ninterface OwnProps {\n    teamId: TeamId;\n    organizations: List<UserOrganizationInfo>;\n}\n\ntype MoveTeamMenuProps = OwnProps & WithNamespaces;\n\nconst MoveTeamMenu = (props: MoveTeamMenuProps) => {\n    const dispatch = useDispatch();\n    const [selectedOrganization, setSelectedOrganization] = useState<OrganizationId|undefined>();\n\n    const options = props.organizations.map(orga => ({\n        key: orga.uid,\n        value: orga.uid,\n        text: orga.organizationName\n    }));\n\n    const handleMoveTeam = () => {\n        if(selectedOrganization) {\n            dispatch(Action.Command.moveTeamToOrganization(props.teamId, selectedOrganization));\n        }\n    }\n\n    return <Grid columns={2}>\n        <GridColumn mobile={16} tablet={16} computer={12} largeScreen={12} widescreen={12}>\n            <Select options={options.toJS()}\n                    fluid={true}\n                    placeholder={props.t('insp.team.move_to_organization_select') as string}\n                    onChange={(e, data) => setSelectedOrganization(data.value as OrganizationId)}\n            />\n        </GridColumn>\n        <GridColumn mobile={16} tablet={16} computer={4} largeScreen={4} widescreen={4}>\n            <Button primary={true} floated=\"right\" onClick={() => handleMoveTeam()}>{props.t('insp.team.move_to_organization_submit')}</Button>\n        </GridColumn>\n        <Message size=\"small\" info={true}>{props.t('insp.team.move_to_organization_desc')}</Message>\n    </Grid>;\n};\n\nexport default withNamespaces()(MoveTeamMenu);\n","import * as React from 'react';\nimport {SyntheticEvent, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Confirm, Dropdown} from \"semantic-ui-react\";\nimport * as BoardModule from \"../../InspectioBoards\";\nimport {makeGetTeamBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport {makeIioFilteredUserListSelector} from \"../../User/selectors/iioUserInfo\";\nimport {Action} from \"../index\";\nimport {Team} from \"../model\";\nimport AddBoardToTeamModal from \"./AddBoardToTeamModal\";\nimport BoardEntry from \"./BoardEntry\";\nimport EditableTeamHeader from \"./EditableTeamHeader\";\nimport InviteUserToTeamModal from \"./InviteUserToTeamModal\";\nimport MemberEntry from \"./MemberEntry\";\nimport {List} from \"immutable\";\nimport {UserOrganizationInfo} from \"../../Organization/model/UserOrganizationInfo\";\nimport MoveTeamMenu from \"./MoveTeamMenu\";\n\ninterface OwnProps {\n    team: Team.Team,\n    blueprint?: boolean,\n    onTeamAdded?: (team: Team.TeamId) => void,\n    onCancelName?: (team: Team.TeamId) => void,\n    onCancelDescription?: (team: Team.TeamId) => void,\n    isMovable: boolean,\n    targetOrganizations: List<UserOrganizationInfo>,\n}\n\ntype TeamCardProps = OwnProps & WithNamespaces;\n\nconst TeamCard = (props: TeamCardProps) => {\n    const members = useSelector(makeIioFilteredUserListSelector(props.team.members));\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [showAddUserModal, setShowAddUserModal] = useState<boolean>(false);\n    const [showAddBoardToTeamModal, setShowAddBoardToTeamModal] = useState(false);\n    const boards = useSelector(makeGetTeamBoards(props.team.uid));\n\n    const dispatch = useDispatch();\n\n    // Team Edit\n\n    const handleTeamNameChanged = (teamName: Team.TeamName) => {\n        if(props.blueprint && props.onTeamAdded) {\n            props.onTeamAdded(props.team.uid);\n        }\n    }\n\n    const handleCancelName = () => {\n        if(props.onCancelName) {\n            props.onCancelName(props.team.uid);\n        }\n    }\n\n    const handleCancelDescription = () => {\n        if(props.onCancelDescription) {\n            props.onCancelDescription(props.team.uid);\n        }\n    }\n\n    const handleDeleteClick = (e: SyntheticEvent) => {\n        e.preventDefault();\n        setShowDeleteModal(true);\n    }\n\n    const deleteTeam = () => {\n        dispatch(Action.Command.deleteTeam(props.team.uid));\n    }\n\n    // Add User Modal\n\n    const handleAddUserClick = (e: SyntheticEvent) => {\n        e.preventDefault();\n        setShowAddUserModal(true);\n    }\n\n    const closeAddUserModal = () => {\n        setShowAddUserModal(false);\n    };\n\n    // Add Board To Team Modal#\n\n    const handleAddBoardClick = (e: SyntheticEvent) => {\n        e.preventDefault();\n        setShowAddBoardToTeamModal(true);\n    };\n\n    const closeAddBoardToTeamModal = () => {\n        setShowAddBoardToTeamModal(false);\n    };\n\n    const handleAddBoardToTeamSubmit = (selectedBoard: BoardModule.BoardModel.BoardId) => {\n        dispatch(Action.Command.adminGrantTeamAccessToBoard(selectedBoard, [props.team.uid]));\n        setShowAddBoardToTeamModal(false);\n    };\n    // Lists\n\n    const memberList = members.sortBy(m => m.username).sort((mA, mB) => {\n        if(mA.userId === props.team.ownerId) {\n            return  -1;\n        }\n\n        if(mB.userId === props.team.ownerId) {\n            return 1;\n        }\n\n        return 0;\n    }).map(member => <MemberEntry \n        key={member.userId} \n        member={member} \n        isOwner={props.team.ownerId === member.userId} \n        teamId={props.team.uid} />);\n\n    const boardList = boards.map(board => <BoardEntry board={board} team={props.team} key={board.uid}/>);\n\n    return <div className=\"ui segment\">\n                {!props.blueprint && <a  href=\"#\" className=\"ui small right floated basic button noborder\" onClick={handleDeleteClick}>\n                Delete\n                </a>}\n\n                <EditableTeamHeader\n                    team={props.team}\n                    addTeamMode={props.blueprint}\n                    onNameChanged={handleTeamNameChanged}\n                    onCancelName={handleCancelName}\n                    onCancelDescription={handleCancelDescription}\n                />\n                <div className=\"ui horizontal divider\">Teammember</div>               \n               <div className=\"ui horizontal list\">\n                   <Button basic={true} icon={true} color=\"blue\" size=\"large\" onClick={handleAddUserClick} disabled={props.blueprint}>\n                       <i className=\"blue user icon\" />\n                   </Button>\n                    {!props.blueprint && memberList}\n                </div>\n                <div className=\"ui horizontal divider\">Teamboards</div>\n                <div className=\"ui horizontal list\">\n                    <Button basic={true} icon={true} color=\"orange\" size=\"large\" onClick={handleAddBoardClick} disabled={props.blueprint}>\n                        <i className=\"orange sticky note icon\" />\n                    </Button>\n                    {!props.blueprint && boardList}\n                </div>\n                {props.isMovable && <div className=\"ui horizontal divider\">{props.t('insp.team.move_to_organization_title')}</div>}\n                {props.isMovable && <MoveTeamMenu organizations={props.targetOrganizations} teamId={props.team.uid}/>}\n            <InviteUserToTeamModal\n                team={props.team}\n                open={showAddUserModal}\n                onClose={closeAddUserModal}\n            />\n            <AddBoardToTeamModal\n                teamId={props.team.uid}\n                open={showAddBoardToTeamModal}\n                onClose={closeAddBoardToTeamModal}\n                onSubmit={handleAddBoardToTeamSubmit}\n            />\n            <Confirm\n                open={showDeleteModal}\n                header={props.t('insp.team.remove_team_confirm_title')}\n                confirmButton={props.t('app.form.remove')}\n                cancelButton={<Button content={props.t('app.form.cancel')} className=\"basic noborder\" />}\n                content={props.t('insp.team.remove_team_confirm_text', {team_name: props.team.name})}\n                onCancel={() => setShowDeleteModal(false)}\n                onConfirm={deleteTeam}\n                />\n        </div>\n};\n\nexport default withNamespaces()(TeamCard);\n","import * as React from 'react';\nimport {SyntheticEvent, useMemo, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Message, MessageContent, MessageItem} from \"semantic-ui-react\";\nimport uuid from \"uuid\";\nimport * as UserSelector from \"../../User/selectors/currentUser\";\nimport {createNewTeam} from \"../model/Team\";\nimport {makeTeamListSelector} from \"../selectors/selectTeam\";\nimport TeamCard from \"./TeamCard\";\nimport {List} from \"immutable\";\n\ninterface OwnProps {\n    disabled: boolean;\n}\n\ntype AddTeamCardProps = OwnProps & WithNamespaces;\n\nconst AddTeamCard = (props: AddTeamCardProps) => {\n    const [showCard, setShowCard] = useState(false);\n    const [checkExistingTeams, setCheckExistingTeams] = useState(false);\n    const team = useMemo(() => {\n        return createNewTeam(uuid.v4());\n    }, [showCard]);\n\n    // Poll team list to check if newly added team is there\n    const existingTeams = useSelector(makeTeamListSelector());\n    if(checkExistingTeams && existingTeams.find(existingTeam => existingTeam.uid === team.uid)) {\n        setCheckExistingTeams(false);\n        setShowCard(false);\n    }\n\n    const handleClick = (e: SyntheticEvent) => {e.preventDefault(); setShowCard(!showCard)};\n    const handleTeamAdded = () => setCheckExistingTeams(true);\n    const handleCancelName = () => setShowCard(false);\n\n    return <>\n        <div>\n            <button className=\"ui huge basic button\" onClick={handleClick}>\n                <i className=\"plus icon\" />\n                { props.t('insp.team.overview_add') }\n            </button>\n        </div>\n        {showCard && <TeamCard team={team} blueprint={true} onTeamAdded={handleTeamAdded} onCancelName={handleCancelName} isMovable={false} targetOrganizations={List()} />}\n    </>\n};\n\nexport default withNamespaces()(AddTeamCard);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {makeGetTeamBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport {makeIioFilteredUserListSelector} from \"../../User/selectors/iioUserInfo\";\nimport {Team} from \"../model/Team\";\nimport BoardEntry from \"./BoardEntry\";\nimport MemberEntry from \"./MemberEntry\";\n\ninterface OwnProps {\n    team: Team;\n}\n\ntype JoinedTeamCardProps = OwnProps & WithNamespaces;\n\nconst JoinedTeamCard = (props: JoinedTeamCardProps) => {\n    const members = useSelector(makeIioFilteredUserListSelector(props.team.members));\n    const boards = useSelector(makeGetTeamBoards(props.team.uid));\n\n    const memberList = members.sortBy(m => m.username).sort((mA, mB) => {\n        if(mA.userId === props.team.ownerId) {\n            return  -1;\n        }\n\n        if(mB.userId === props.team.ownerId) {\n            return 1;\n        }\n\n        return 0;\n    }).map(member => <MemberEntry\n        key={member.userId}\n        member={member}\n        isOwner={props.team.ownerId === member.userId}\n        teamId={props.team.uid}\n        readonly={true}\n    />);\n\n    const boardList = boards.map(board => <BoardEntry board={board} team={props.team} key={board.uid} readonly={true}/>);\n\n    return <div className=\"ui segment\">\n        <h3 style={{margin:0}}>\n            {props.team.name}\n            <span> &mdash; </span>\n            <span className=\"sub header\">\n                {props.team.description}\n            </span>\n        </h3>\n        <div className=\"ui horizontal divider\">Teammember</div>\n        <div className=\"ui horizontal list\">\n            {memberList}\n        </div>\n        <div className=\"ui horizontal divider\">Teamboards</div>\n        <div className=\"ui horizontal list\">\n            {boardList}\n        </div>\n    </div>;\n};\n\nexport default withNamespaces()(JoinedTeamCard);","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Grid, Header, Message} from \"semantic-ui-react\";\nimport {UserOrganizationInfo} from \"../../../Organization/model/UserOrganizationInfo\";\nimport {\n    makeActiveUserOrganizationInfoSelector,\n    makeUserOrganizationInfoListSelector\n} from \"../../../Organization/selectors/selectUserOrganizationInfo\";\nimport {UserId, UserInfo} from \"../../../User/model/UserInfo\";\nimport {Team} from \"../../model/Team\";\nimport AddTeamCard from \"../AddTeamCard\";\nimport JoinedTeamCard from \"../JoinedTeamCard\";\nimport TeamCard from \"../TeamCard\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\n\ninterface OwnProps {\n    teams: List<Team>,\n    currentUser: UserInfo,\n}\n\ntype TeamTabProps = OwnProps & WithNamespaces;\n\nconst TeamTab = (props: TeamTabProps) => {\n    const activeOrganizationInfo = useSelector(makeActiveUserOrganizationInfoSelector());\n    const organizations = useSelector(makeUserOrganizationInfoListSelector(props.currentUser.uid));\n\n    const isPrivateWorkspace = !activeOrganizationInfo || !activeOrganizationInfo.explicitOrganization;\n    const validTargetOrganizations = isPrivateWorkspace? organizations.filter(orga => orga.explicitOrganization && !orga.userIsGuest) : List();\n    const teamsAreMovable = isPrivateWorkspace && validTargetOrganizations.count() > 0;\n\n\n    const isAdmin = (team: Team, userId: UserId, orgaInfo?: UserOrganizationInfo) => {\n        if(team.organizationId && orgaInfo && team.organizationId === orgaInfo.organizationId) {\n            if(orgaInfo.userIsAdmin) {\n                return true;\n            }\n        }\n\n        return team.isAdmin(userId);\n    }\n\n    // First sort by name, then check if a team is marked as new and move it on top of the list\n    const teamCards = props.teams.filter(team => isAdmin(team, props.currentUser.uid, activeOrganizationInfo))\n        .sortBy(team => team.name)\n        .sortBy(team => !team.isNew)\n        .map((team) => {\n            return <TeamCard isMovable={teamsAreMovable} targetOrganizations={validTargetOrganizations} team={team} key={team.uid}/>\n        });\n\n    const joinedTeamCards = props.teams.filter(team => !isAdmin(team, props.currentUser.uid, activeOrganizationInfo))\n        .sortBy(team => team.name)\n        .map((team) => {\n            return <JoinedTeamCard team={team} key={team.uid}/>\n        });\n\n    return <>\n        <Grid.Row>\n            <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                <Header as=\"h1\" icon={true} textAlign='center'>\n                    <Header.Content>\n                        Manage Your Teams\n                        <Header.Subheader />\n                    </Header.Content>\n                </Header>\n            </Grid.Column>\n        </Grid.Row>\n        <Grid.Row>\n            <Grid.Column>\n                <div>\n                    <AddTeamCard disabled={false} />\n                    {teamCards}\n                </div>\n            </Grid.Column>\n        </Grid.Row>\n        {teamCards.count() === 0 && joinedTeamCards.count() === 0 && <Grid.Row>\n            <Grid.Column>\n                <Message info={true} floating={true} content={props.t('insp.team.no_teams')} />\n            </Grid.Column>\n        </Grid.Row>}\n        {joinedTeamCards.count() > 0 && <Grid.Row>\n            <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\"/>\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                <Header as=\"h2\" icon={true} textAlign='center'>\n                    <Header.Content>\n                        Joined Teams\n                        <Header.Subheader />\n                    </Header.Content>\n                </Header>\n            </Grid.Column>\n        </Grid.Row>}\n        <Grid.Row>\n            <Grid.Column>\n                {joinedTeamCards}\n            </Grid.Column>\n        </Grid.Row>\n    </>\n};\n\nexport default withNamespaces()(TeamTab);\n","import * as React from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Icon} from \"semantic-ui-react\";\nimport {hideOwnBoardsOnOverview, hideSharedBoardsOnOverview} from \"../../InspectioBoards/actions/commands\";\nimport {BoardOverviewState} from \"../../InspectioBoards/reducers/applyOverviewActions\";\nimport {boardOverviewSelector} from \"../../InspectioBoards/selectors/boardList\";\n\ninterface OwnProps {\n    count: number;\n}\n\nexport enum DisplayMode {\n    all = 'all',\n    onlyShared = 'onlyShared',\n    noShared = 'noShared',\n}\n\ntype SharedBoardsItemProps = OwnProps;\n\nconst SharedBoardsItem = (props: SharedBoardsItemProps) => {\n\n    const boardOverview = useSelector(boardOverviewSelector);\n    const mode = getModeFromBoardOverviewSettingss(boardOverview);\n    const dispatch = useDispatch();\n\n    const nextMode = () => {\n        switch (mode) {\n            case DisplayMode.all:\n                dispatch(hideOwnBoardsOnOverview(true));\n                dispatch(hideSharedBoardsOnOverview(false));\n                break;\n            case DisplayMode.onlyShared:\n                dispatch(hideOwnBoardsOnOverview(false));\n                dispatch(hideSharedBoardsOnOverview(true));\n                break;\n            case DisplayMode.noShared:\n                dispatch(hideOwnBoardsOnOverview(false));\n                dispatch(hideSharedBoardsOnOverview(false));\n                break;\n        }\n    };\n\n    let badgeClasses = \"ui small label\";\n\n    if(mode === DisplayMode.onlyShared) {\n        badgeClasses += \" teal\";\n    }\n\n    return <div className=\"ui item\" style={{cursor: \"pointer\"}} onClick={nextMode}>\n        <Icon className=\"share icon\"/>\n        {mode !== DisplayMode.noShared && <div className={badgeClasses}>{props.count}</div>}\n        Shared Boards\n        {mode === DisplayMode.noShared && <Icon className=\"eye slash icon\"/>}\n    </div>\n};\n\nexport default SharedBoardsItem;\n\nconst getModeFromBoardOverviewSettingss = (settings: BoardOverviewState): DisplayMode => {\n    if(settings.allSharedBoardsHidden) {\n        return DisplayMode.noShared;\n    }\n\n    if(settings.allOwnBoardsHidden) {\n        return DisplayMode.onlyShared;\n    }\n\n    return DisplayMode.all;\n};\n","import * as React from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {keyLiteMode, makeUserSettingSelector} from \"../selectors/userSettings\";\nimport {Icon, MenuItem, Popup} from \"semantic-ui-react\";\nimport {upsertUserSetting} from \"../actions/commands\";\nimport {SemanticICONS} from \"semantic-ui-react/dist/commonjs/generic\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\n\ninterface OwnProps {\n\n}\n\ntype TopmenuLiteModeProps = OwnProps & WithNamespaces;\n\nconst TopmenuLiteMode = (props: TopmenuLiteModeProps) => {\n    const liteMode = useSelector(makeUserSettingSelector(keyLiteMode(), false));\n    const dispatch = useDispatch();\n\n    const handleClick = () => {\n        dispatch(upsertUserSetting(keyLiteMode(), !liteMode));\n    }\n\n    const color = liteMode? '#2eba46' : 'inherit';\n    const icon = liteMode? 'high' : 'half';\n    const translateKey = liteMode? 'lite_mode_is_active' : 'activate_lite_mode';\n\n    return <Popup trigger={<MenuItem onClick={handleClick}>\n        <Icon name={ `battery ${icon}` as SemanticICONS } style={{color}} />\n    </MenuItem>} content={<>\n        <p>{props.t('insp.top_menu.'+translateKey)}</p>\n        {liteMode && <p><small>{props.t('insp.top_menu.lite_mode_is_active_details')}</small></p>}\n    </>} />\n\n};\n\nexport default withNamespaces()(TopmenuLiteMode);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {NavLink} from \"react-router-dom\";\nimport { pure } from 'recompose';\nimport {Dropdown, MenuItem, Popup} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\nimport {\n    toggleBoardHistory,\n    toggleCodyConsole,\n    toggleElementDetails, toggleTimerModal, toggleVideoSession,\n    triggerExportBoard,\n    triggerImportBoard\n} from \"../actions/commands\";\nimport {BoardId} from \"../model/Board\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport TopmenuLiteMode from \"../../User/components/TopmenuLiteMode\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {makeUserSettingSelector, makeUserSettingsLoadedSelector} from \"../../User/selectors/userSettings\";\nimport {useEffect, useState} from \"react\";\nimport {upsertUserSetting} from \"../../User/actions/commands\";\n\nexport interface BoardTopMenuRouteMatchParams {\n    uid: BoardId;\n}\n\ntype BoardTopMenuProps =  WithNamespaces & RouteComponentProps<BoardTopMenuRouteMatchParams>;\n\nconst BoardTopMenu = pure((props: BoardTopMenuProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const board = useSelector(makeBoardByIdSelector(props.match.params.uid));\n    const settingsLoaded = useSelector(makeUserSettingsLoadedSelector());\n    const showHint = useSelector(makeUserSettingSelector('show_timer_hint', false));\n    const [popupOpen, setPopupOpen] = useState(false);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(settingsLoaded  && showHint) {\n            setPopupOpen(true);\n        }\n    }, [settingsLoaded, showHint])\n\n    const handleHintClick = () => {\n        dispatch(upsertUserSetting('show_timer_hint', false));\n        setPopupOpen(false);\n    }\n\n    const isAdmin = organization ? organization.isAdmin(currentUser.uid) : false;\n\n    return <>\n        <TopmenuLiteMode />\n        <Popup\n            open={popupOpen}\n            trigger={<MenuItem icon=\"hourglass half\" onClick={() => dispatch(toggleTimerModal(props.match.params.uid, true))} />}\n            openOnTriggerClick={false}\n            openOnTriggerFocus={false}\n            openOnTriggerMouseEnter={false}\n            position=\"bottom left\"\n            content={\n                <>\n                    <p>{props.t('insp.board.timer.hint')}</p>\n                    <p><span style={{\"color\": \"#9cc8f5\", \"cursor\": \"pointer\", float: \"right\"}} onClick={handleHintClick}>{props.t('insp.hint.got_it')}</span></p>\n                </>\n            }\n        />\n        <Dropdown item={true} icon=\"ellipsis vertical\">\n            <Dropdown.Menu direction=\"left\">\n                <Dropdown.Item icon=\"history\" text=\"Activity\" onClick={() => dispatch(toggleBoardHistory(props.match.params.uid, true))} />\n                <Dropdown.Item\n                    icon={'clipboard outline'}\n                    text={props.t('insp.top_menu.element_details')}\n                    onClick={() => dispatch(toggleElementDetails(props.match.params.uid, true, false))}\n                />\n                <Dropdown.Item icon=\"code\" text=\"Cody\" onClick={() => dispatch(toggleCodyConsole(props.match.params.uid, true)) } />\n                {board && (board.organization? isAdmin : !board.shared) && <Dropdown.Item icon=\"cog\" text=\"Settings\" to={Routes.compileInspectioBoardEdit(props.match.params.uid)} as={NavLink}/>}\n                { board && !board.videoSessionActive && <Dropdown.Item icon=\"video\" text=\"Join Session\"\n                                onClick={() => dispatch(toggleVideoSession(props.match.params.uid, true))}/>}\n                { board && board.videoSessionActive && <Dropdown.Item icon=\"video\" text=\"Leave Session\"\n                                                                       // onClick={() => dispatch(toggleVideoSession(props.match.params.uid, false))}\n                                                                        onClick={() => window.location.reload()}\n                />}\n                <Dropdown.Item icon=\"upload\" text=\"Export Board\" onClick={() => dispatch(triggerExportBoard(props.match.params.uid))} />\n                <Dropdown.Item icon=\"question\" text=\"FAQs\" as=\"a\" href=\"https://wiki.prooph-board.com\" target=\"_blank\" />\n            </Dropdown.Menu>\n        </Dropdown>\n    </>});\n\nexport default withNamespaces()(withRouter(BoardTopMenu));\n","import * as React from 'react';\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {Button, Grid, GridColumn, GridRow, Input, Modal, Search, Table} from \"semantic-ui-react\";\nimport {Permissions} from \"../model/BoardPermissionForUser\";\nimport {useSelector} from \"react-redux\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {List} from \"immutable\";\nimport {Email, UserId} from \"../../User/model/UserInfo\";\nimport {makeIioFilteredUserListSelector} from \"../../User/selectors/iioUserInfo\";\nimport {useEffect, useState} from \"react\";\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n    onSubmit: () => void;\n    email: string;\n    onEmailChange: (email: Email) => void;\n    permissions: Permissions,\n    onPermissionsChange: (permissions: Permissions) => void;\n}\n\ntype InviteUserToBoardProps = OwnProps & WithNamespaces;\n\nconst InviteUserToBoardModal = (props: InviteUserToBoardProps) => {\n\n    const [email, setEmail] = useState<string>(props.email);\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const organizationUserIds = List<UserId>(organization ? [organization.ownerId, ...organization.members.toJS()] : []);\n    const organizationUsers = useSelector(makeIioFilteredUserListSelector(organizationUserIds));\n\n    useEffect(() => {\n        setEmail(props.email);\n    }, [props.email])\n\n    const filteredUsers = organizationUsers\n        .filter(user => user.username.toLocaleLowerCase().includes(email.toLocaleLowerCase()) || user.email.toLocaleLowerCase().includes(email.toLocaleLowerCase()))\n        .sortBy(user => user.username)\n        .map(user => {\n            return {\n                id: user.userId,\n                title: user.username,\n                description: user.email,\n                image: user.avatarUrl,\n            }\n        });\n\n    const handleSearchChange = (emailVal: Email) => {\n        setEmail(emailVal);\n        if(isValidEmail(emailVal)) {\n            props.onEmailChange(emailVal);\n        }\n    }\n\n    return (\n        <Modal open={props.open} closeIcon={true} onClose={props.onClose} size=\"tiny\">\n            <Modal.Header>{props.t('insp.board.invite_user')}</Modal.Header>\n            <Modal.Content>\n                <div style={{ marginBottom: '10px' }}>\n                        <Grid container={true} stackable={true} doubling={true} >\n                            <GridColumn mobile={16} tablet={8} computer={10}>\n                                <Search\n                                    fluid={true}\n                                    value={email}\n                                    results={filteredUsers.toArray()}\n                                    placeholder={props.t('insp.board.form.email') as string}\n                                    showNoResults={false}\n                                    resultRenderer={data => {\n                                        return <div key={data.id}>\n                                            <div className=\"ui image avatar\">\n                                                <img src={data.image} alt={data.title} />\n                                            </div>\n                                            <div className=\"content\">\n                                                <div className=\"title\">{data.title}</div>\n                                                <div className=\"description\">{data.description}</div>\n                                            </div>\n                                        </div>\n                                    }}\n                                    onSearchChange={(e, data) => handleSearchChange(data.value || '')}\n                                    onResultSelect={(e, data) => {\n                                        setEmail(data.result.description);\n                                        props.onEmailChange(data.result.description);\n                                    }}\n                                />\n                            </GridColumn>\n                            <GridColumn mobile={16} tablet={8} computer={6}>\n                                <Button.Group>\n                                    <Button\n                                        type={'button'}\n                                        className={'positive'}\n                                        children={'Read'}\n                                        onClick={() => props.onPermissionsChange({...props.permissions, writeAccess: false})}\n                                    />\n                                    <Button.Or text=\"+\" />\n                                    <Button\n                                        type={'button'}\n                                        className={props.permissions.writeAccess ? 'positive' : ''}\n                                        children={'Write'}\n                                        onClick={() => props.onPermissionsChange({...props.permissions, writeAccess: !props.permissions.writeAccess})}\n                                    />\n                                </Button.Group>\n                            </GridColumn>\n                        </Grid>\n                    </div>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button primary={true} type=\"submit\" onClick={props.onSubmit} disabled={!isValidEmail(email)}>\n                    {props.t('app.form.confirm')}\n                </Button>\n            </Modal.Actions>\n        </Modal>\n    );\n};\n\n/**\n * Validates the basic email structure; not a perfect validation\n *\n * @param value\n */\nconst isValidEmail = (value: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\n};\n\nexport default withNamespaces()(InviteUserToBoardModal);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Button, Icon, MenuItem} from \"semantic-ui-react\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport {BoardTopMenuRouteMatchParams} from \"./BoardTopMenu\";\nimport * as Action from \"../actions\";\nimport InviteUserToBoardModal from \"./InviteUserToBoardModal\";\nimport {Permissions} from \"../model/BoardPermissionForUser\";\nimport {Email} from \"../../User/model/UserInfo\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\n\ninterface OwnProps {\n\n}\n\ntype ShareBoardButtonProps = OwnProps & RouteComponentProps<BoardTopMenuRouteMatchParams>;\n\nconst ShareBoardButton = (props: ShareBoardButtonProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const [userEmail, setUserEmail] = useState<string>('');\n    const [showAddUserModal, setShowAddUserModal] = useState<boolean>(false);\n    const [permissions, setPermissions] = useState<Permissions>({adminAccess: false, writeAccess: true, readAccess: true});\n    const board = useSelector(makeBoardByIdSelector(props.match.params.uid));\n    const dispatch = useDispatch();\n\n    const isAdmin = organization ? organization.isAdmin(currentUser.uid) || (board && board.isCreator(currentUser.uid)) : false;\n\n    const openAddUserModal = (event: React.MouseEvent) => {\n        event.stopPropagation();\n        setShowAddUserModal(true);\n    };\n\n    const closeAddUserModal = () => {\n        setShowAddUserModal(false);\n    };\n\n    const handleShareBoardSubmit = () => {\n        dispatch(Action.Command.shareBoard(board.uid, userEmail, permissions));\n\n        setUserEmail('');\n        closeAddUserModal();\n    };\n\n    const onEmailChange = (email: Email) => {\n        setUserEmail(email);\n    };\n\n    return <>{board && (board.organization? isAdmin : !board.shared) &&\n        <>\n            <MenuItem>\n                <Button icon={true} className=\"share\" onClick={openAddUserModal}><Icon name=\"share alternate\"/>&nbsp;share</Button>\n            </MenuItem>\n            <InviteUserToBoardModal\n                open={showAddUserModal}\n                onClose={closeAddUserModal}\n                onSubmit={handleShareBoardSubmit}\n                email={userEmail}\n                onEmailChange={onEmailChange}\n                permissions={permissions}\n                onPermissionsChange={setPermissions}\n            />\n        </>\n    }\n    </>;\n}\n\nexport default withRouter(ShareBoardButton);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {NavLink} from \"react-router-dom\";\nimport {Icon, Label, Menu, MenuItem, Popup} from \"semantic-ui-react\";\nimport {logout} from \"../../index\";\nimport * as Routes from \"../../routes\";\nimport {makeGetCurrentUser} from \"../selectors/currentUser\";\nimport SideMenuOrganizationSwitch from \"./SideMenuOrganizationSwitch\";\n\ninterface OwnProps {\n\n}\n\ntype TopmenuAvatarProps = OwnProps;\n\nconst TopmenuAvatar = (props: TopmenuAvatarProps) => {\n    const currentUserSelector = makeGetCurrentUser();\n    const currentUser = useSelector(currentUserSelector);\n    const [open, setOpen] = useState(false);\n\n    return <>\n            <Popup\n            on=\"click\"\n            position='bottom center'\n            open={open}\n            onOpen={() => {setOpen(true)}}\n            onClose={() => {setOpen(false)}}\n            trigger={\n                <MenuItem>\n                    <Label circular={true} className=\"user\" style={{backgroundImage: `url(${currentUser.avatarUrl})`, backgroundSize: 'cover'}} />\n                </MenuItem>\n            }\n            content={\n                <Menu vertical={true} secondary={true} compact={true}>\n                    <MenuItem to={Routes.userProfile} as={NavLink} activeClassName=\"active\" onClick={() => setOpen(false)}>\n                        <Icon name=\"user\" />\n                        Profile\n                    </MenuItem>\n                    <MenuItem onClick={() => logout()}>\n                        <Icon name=\"sign-out\" />\n                        Sign Out\n                    </MenuItem>\n                </Menu>\n            }\n            />\n        </>\n};\n\nexport default TopmenuAvatar;\n","import * as React from 'react';\nimport {ReactNode} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Link} from \"react-router-dom\";\nimport {Breadcrumb} from \"semantic-ui-react\";\nimport {BoardId} from \"../../InspectioBoards/model/Board\";\nimport {makeBoardByIdSelector} from \"../../InspectioBoards/selectors/board\";\nimport * as Routes from \"../../routes\";\n\ntype BoardCrumbProps = RouteComponentProps<{uid: BoardId}>;\n\nconst BoardLink = (props: {children: ReactNode, boardId: BoardId, activeCrumb: boolean}) => {\n    return <Link to={Routes.compileInspectioBoardWorkspace(props.boardId)} className={(props.activeCrumb? \"active \" : \"\")+\"section\"}>{props.children}</Link>\n};\n\nconst BoarCrumb = (props: BoardCrumbProps) => {\n    const getBoardById = makeBoardByIdSelector(props.match.params.uid);\n    const board = useSelector(getBoardById);\n    let boardName = 'Unknown';\n    let readOnly = <></>;\n\n    if(board) {\n        boardName = board.name;\n\n        if(!board.writeAccess) {\n            readOnly = <Breadcrumb.Section>&nbsp;(read only)</Breadcrumb.Section>;\n        }\n    }\n\n\n\n    return <>\n        <Breadcrumb.Divider />\n        <Breadcrumb.Section\n            active={true}\n            as={BoardLink}\n            activeCrumb={true}\n            boardId={props.match.params.uid}\n        >{boardName}</Breadcrumb.Section>\n        {readOnly}\n    </>\n};\n\nexport default withRouter(BoarCrumb);\n","import * as React from 'react';\nimport {ReactNode} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {Breadcrumb} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\n\ninterface OwnProps {\n\n}\n\ntype BoardOverviewCrumbProps = OwnProps;\n\nconst HomeLink = (props: {children: ReactNode}) => {\n    return <Link to={Routes.inspectio}>{props.children}</Link>\n};\n\nconst BoardOverviewCrumb = (props: BoardOverviewCrumbProps) => {\n    return <Breadcrumb.Section as={HomeLink}>Boards</Breadcrumb.Section>;\n};\n\nexport default BoardOverviewCrumb;","import * as React from 'react';\nimport {Breadcrumb} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype OrganizationOverviewCrumbProps = OwnProps;\n\nconst OrganizationOverviewCrumb = (props: OrganizationOverviewCrumbProps) => {\n    return <Breadcrumb.Section>Organization</Breadcrumb.Section>\n};\n\nexport default OrganizationOverviewCrumb;\n","import * as React from 'react';\nimport {Breadcrumb} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype TeamOverviewCrumbProps = OwnProps;\n\nconst TeamOverviewCrumb = (props: TeamOverviewCrumbProps) => {\n    return <Breadcrumb.Section>Teams</Breadcrumb.Section>\n};\n\nexport default TeamOverviewCrumb;","import * as React from 'react';\nimport {Breadcrumb} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype UpdatesCrumbProps = OwnProps;\n\nconst UpdatesCrumb = (props: UpdatesCrumbProps) => {\n    return <Breadcrumb.Section>Updates</Breadcrumb.Section>\n};\n\nexport default UpdatesCrumb;","import * as React from 'react';\nimport {Breadcrumb} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype UserProfileCrumbProps = OwnProps;\n\nconst UserProfileCrumb = (props: UserProfileCrumbProps) => {\n    return <Breadcrumb.Section>Profile</Breadcrumb.Section>\n};\n\nexport default UserProfileCrumb;","import * as React from 'react';\nimport { withNamespaces, WithNamespaces } from 'react-i18next';\nimport {useSelector} from \"react-redux\";\nimport {Route, RouteComponentProps, withRouter} from 'react-router';\nimport {NavLink,} from 'react-router-dom';\nimport {Breadcrumb, Button, Dropdown, Icon, Image, Label, Menu, MenuItem} from 'semantic-ui-react';\nimport {logout} from \"../index\";\nimport BoardTopMenu from \"../InspectioBoards/components/BoardTopMenu\";\nimport ShareBoardButton from \"../InspectioBoards/components/ShareBoardButton\";\nimport * as Routes from '../routes';\nimport TopmenuAvatar from \"../User/components/TopmenuAvatar\";\nimport BoardCrumb from \"./Breadcrumb/BoardCrumb\";\nimport BoardOverviewCrumb from \"./Breadcrumb/BoardOverviewCrumb\";\nimport OrganizationOverviewCrumb from \"./Breadcrumb/OrganizationOverviewCrumb\";\nimport TeamOverviewCrumb from \"./Breadcrumb/TeamOverviewCrumb\";\nimport UpdatesCrumb from \"./Breadcrumb/UpdatesCrumb\";\nimport UserProfileCrumb from \"./Breadcrumb/UserProfileCrumb\";\nimport {makeGetSidebarSelector} from \"./selectors/sidebar\";\n\ntype TopMenuProps =  WithNamespaces & RouteComponentProps<{uid?: string}>;\n\nconst TopMenu = (props: TopMenuProps) => {\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const isBoardWorkspace = Routes.isInspectioBoardWorkspace(props.location.pathname);\n\n    const paddingLeft = isBoardWorkspace? (sidebar.width + 20) + 'px' : '270px';\n\n    return (<Menu fixed=\"top\" inverted={false} id=\"topmenu\" style={{paddingLeft}}>\n        <Route path={Routes.inspectio}>\n            <MenuItem>\n                <Breadcrumb>\n                    <Route exact={true} path={[Routes.inspectio, Routes.inspectioBoardWorkspace, Routes.inspectioEditBoard]} component={BoardOverviewCrumb} />\n                    <Route exact={true} path={Routes.userProfile} component={UserProfileCrumb} />\n                    <Route exact={true} path={Routes.Updates} component={UpdatesCrumb} />\n                    <Route exact={true} path={[Routes.inspectioBoardWorkspace, Routes.inspectioEditBoard]} component={BoardCrumb} />\n                    <Route exact={true} path={Routes.teamOverview} component={TeamOverviewCrumb} />\n                    <Route exact={true} path={Routes.organizationOverview} component={OrganizationOverviewCrumb} />\n                </Breadcrumb>\n            </MenuItem>\n        </Route>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={ShareBoardButton} />\n        <Menu.Menu position='right' id=\"topmenuUsers\" />\n        <TopmenuAvatar />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardTopMenu} />\n    </Menu>);\n};\n\nexport default withNamespaces()(withRouter(TopMenu));\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Message, Modal} from \"semantic-ui-react\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n}\n\ntype BoardQuotaReachedModalProps = OwnProps & WithNamespaces;\n\nconst BoardQuotaReachedModal = (props: BoardQuotaReachedModalProps) => {\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n\n    return <Modal open={props.open} closeIcon={true} onClose={props.onClose}>\n        <Modal.Header>{ props.t(\"insp.board.add\") }</Modal.Header>\n        <Modal.Content>\n            <Message icon=\"dollar\" warning={true}\n                     content={\n                         activeOrganization && activeOrganization.userIsGuest\n                             ? props.t('insp.user.quota_reached_guest')\n                             : activeOrganization && activeOrganization.explicitOrganization\n                                ? props.t('insp.user.quota_reached')\n                                : props.t('insp.user.quota_reached_user')\n                     } />\n        </Modal.Content>\n    </Modal>\n};\n\nexport default withNamespaces()(BoardQuotaReachedModal);\n","import * as React from 'react';\nimport {ChangeEvent, FormEvent, SyntheticEvent, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Button, Input, Message, Modal, Transition} from \"semantic-ui-react\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {UserSelector} from \"../../User/selectors\";\nimport BoardQuotaReachedModal from \"../../InspectioBoards/components/BoardQuotaReachedModal\";\n\ntype AddBoardProps = WithNamespaces & RouteComponentProps;\n\nconst AddBoard = (props: AddBoardProps) => {\n    const [visible, setVisible] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [boardName, setBoardName] = useState('');\n    const [hasError, setHasError] = useState(false);\n    const inputEl = useRef<Input>(null);\n    const getUserQuota = UserSelector.makeGetCurrentBoardQuota();\n    const userQuota = useSelector(getUserQuota);\n    const getUser = UserSelector.makeGetCurrentUser();\n    const user = useSelector(getUser);\n    const dispatch = useDispatch();\n\n    const handleClick = () => {\n        setVisible(!visible);\n        if(!visible) {\n            window.setTimeout(() => {\n                inputEl.current!.focus();\n            }, 200);\n        }\n    };\n\n    const handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n\n        if(boardName === '') {\n            setHasError(true);\n            return;\n        }\n\n        if(userQuota === 0) {\n            setShowModal(true);\n            return;\n        }\n\n        const board = BoardModel.createUserBoard(user.uid, boardName as BoardModel.BoardName);\n\n        dispatch(Action.Command.addBoard(board, props.history));\n    };\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setBoardName(e.target.value);\n        setHasError(e.target.value === '');\n    };\n\n    const handleCloseModal = () => {\n        setBoardName('');\n        setVisible(false);\n        setShowModal(false);\n    };\n\n    return <div className=\"item\">\n            <Button className=\"large basic\" onClick={handleClick}><i className=\"plus icon\" /> Add&nbsp;Board</Button>\n            <Transition animation=\"fade down\" visible={visible} duration={200} >\n                <div className=\"ui icon input\">\n                    <form onSubmit={handleSubmit}>\n                        <Input placeholder=\"Board name ...\" fluid={true} ref={inputEl} error={hasError} value={boardName} onChange={handleChange} />\n                    </form>\n                </div>\n            </Transition>\n            <BoardQuotaReachedModal open={showModal} onClose={handleCloseModal} />\n    </div>;\n};\n\nexport default withNamespaces()(withRouter(AddBoard));\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Button, Dropdown, DropdownProps, Modal} from \"semantic-ui-react\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {Team, TeamId} from \"../model/Team\";\nimport {makeTeamListSelector} from \"../selectors/selectTeam\";\n\ninterface OwnProps {\n    board: BoardModel.Board;\n    open: boolean;\n    onClose: () => void;\n    onSubmit: (selectedTeam: TeamId) => void;\n}\n\ntype AddTeamToBoardModalProps = OwnProps & WithNamespaces;\n\nconst AddTeamToBoardModal = (props: AddTeamToBoardModalProps) => {\n    const currentUserSelector = makeGetCurrentUser();\n    const currentUser = useSelector(currentUserSelector);\n    const teams = useSelector(makeTeamListSelector(true));\n    const [selectedTeam, setSelectedTeam] = useState('');\n\n    const ownTeamsOptions = teams.map(team => ({\n        key: team.uid,\n        value: team.uid,\n        text: team.name\n    })).toArray();\n\n    const handleChange = (e: React.SyntheticEvent, dProps: DropdownProps) => setSelectedTeam(dProps.value as string);\n\n    const handleSubmit = (e: React.FormEvent) => {\n        e.preventDefault();\n\n        props.onSubmit(selectedTeam);\n        setSelectedTeam('');\n    }\n\n    return (\n        <Modal open={props.open} closeIcon={true} onClose={props.onClose}>\n            <Modal.Header>{props.t('insp.team.add_to_board', {board_name: props.board.name})}</Modal.Header>\n            <Modal.Content>\n                <form onSubmit={handleSubmit}>\n                    <Dropdown\n                        placeholder={props.t('insp.team.choose') as string}\n                        fluid={true}\n                        search={true}\n                        selection={true}\n                        options={ownTeamsOptions}\n                        onChange={handleChange}\n                        value={selectedTeam}\n                    />\n                    <div style={{marginTop: '10px'}}>\n                        <Button primary={true} type=\"submit\" disabled={!validateTeamExists(selectedTeam, teams)}>\n                            {props.t('app.form.confirm')}\n                        </Button>\n                    </div>\n                </form>\n            </Modal.Content>\n        </Modal>\n    );\n};\n\nconst validateTeamExists = (teamId: TeamId, teams: List<Team>): boolean => {\n    const matchingTeam = teams.find(team => team.uid === teamId);\n\n    return !!matchingTeam;\n}\n\nexport default withNamespaces()(AddTeamToBoardModal);\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {useState} from \"react\";\nimport {useEffect} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {NavLink} from \"react-router-dom\";\nimport {Confirm, Icon} from \"semantic-ui-react\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport InviteUserToBoardModal from \"../../InspectioBoards/components/InviteUserToBoardModal\";\nimport {Board} from \"../../InspectioBoards/model/Board\";\nimport {Permissions} from \"../../InspectioBoards/model/BoardPermissionForUser\";\nimport {Action as TeamAction} from \"../../InspectioTeams\";\nimport AddTeamToBoardModal from \"../../InspectioTeams/components/AddTeamToBoardModal\";\nimport {Team, TeamId, TeamName} from \"../../InspectioTeams/model/Team\";\nimport {makeTeamListSelector} from \"../../InspectioTeams/selectors/selectTeam\";\nimport * as Route from \"../../routes\";\nimport {isStandalone} from \"../../standalone/util\";\nimport * as UserAction from \"../../User/actions\";\nimport {upsertUserSetting} from \"../../User/actions/commands\";\nimport {UserModel} from \"../../User/model\";\nimport {IioUserInfo} from \"../../User/model/IioUserInfo\";\nimport {Email} from \"../../User/model/UserInfo\";\nimport {makeIioUserListSelector} from \"../../User/selectors/iioUserInfo\";\nimport {keyBoardHidden, makeUserSettingSelector} from \"../../User/selectors/userSettings\";\n\ninterface OwnProps {\n    board: Board;\n}\n\ntype BoardListItemProps = OwnProps & WithNamespaces;\n\nconst BoardListItem = (props: BoardListItemProps) => {\n    const [visible, setVisible] = useState(false);\n    const [iconUp, setIconUp] = useState(false);\n    const [userEmail, setUserEmail] = useState<string>('');\n    const [permissions, setPermissions] = useState<Permissions>({adminAccess: false, writeAccess: true, readAccess: true});\n    const [showAddUserModal, setShowAddUserModal] = useState<boolean>(false);\n    const [showAddTeamModal, setShowAddTeamModal] = useState<boolean>(false);\n    const [showRemoveMemberConfirm, setShowRemoveMemberConfirm] = useState<boolean>(false);\n    const [showRemoveTeamConfirm, setShowRemoveTeamConfirm] = useState<boolean>(false);\n    const [memberToRemove, setMemberToRemove] = useState<UserModel.UserId|undefined>(undefined);\n    const [teamToRemove, setTeamToRemove] = useState<TeamId|undefined>(undefined);\n    const dispatch = useDispatch();\n    const users = useSelector(makeIioUserListSelector());\n    const teams = useSelector(makeTeamListSelector());\n    const hidden = useSelector(makeUserSettingSelector(keyBoardHidden(props.board.uid), false));\n\n    const angleIcon = iconUp ? 'angle up icon' : 'angle down icon';\n    const contentClass = 'ui labels ' + (visible ? 'slidedown' : 'slideup');\n\n    useEffect(() => {\n        if (props.board.sharedWith.count() < 1) {\n            return;\n        }\n\n        dispatch(UserAction.Query.loadUsersInfo(props.board.sharedWith.toArray()))\n    }, [props.board.sharedWith]);\n\n    const getUsernameByUserId = (userId: string) => {\n        const user = users.find((userInfo: IioUserInfo) => userInfo.userId === userId);\n        return user ? user.username : ''\n    };\n\n    const handleVisibleClick = () => {\n        setVisible(!visible);\n        if(iconUp) {\n            window.setTimeout(() => {\n                setIconUp(false);\n            }, 150);\n        } else {\n            setIconUp(true);\n        }\n    };\n\n    // Team Handling\n    const openAddTeamModal = (event: React.MouseEvent) => {\n        stopPropagation(event);\n        setShowAddTeamModal(true);\n    };\n\n    const closeAddTeamModal = () => {\n        setShowAddTeamModal(false);\n    };\n\n    const handleAddTeamSubmit = (teamId: TeamId) => {\n        dispatch(TeamAction.Command.adminGrantTeamAccessToBoard(props.board.uid, [teamId]));\n        setShowAddTeamModal(false);\n    };\n\n    const removeTeamFromBoard = () => {\n        if(!teamToRemove) {\n            return;\n        }\n\n        dispatch(TeamAction.Command.adminRevokeTeamAccessToBoard(props.board.uid, teamToRemove));\n        setShowRemoveTeamConfirm(false);\n    }\n\n    // User Handling\n    const openAddUserModal = (event: React.MouseEvent) => {\n        stopPropagation(event);\n        setShowAddUserModal(true);\n    };\n\n    const closeAddUserModal = () => {\n        setShowAddUserModal(false);\n    };\n\n    const stopPropagation = (event: React.MouseEvent) => {\n        event.stopPropagation();\n    };\n\n    const handleShareBoardSubmit = () => {\n        dispatch(Action.Command.shareBoard(props.board.uid, userEmail, permissions));\n\n        setUserEmail('');\n        closeAddUserModal();\n    };\n\n    const onEmailChange = (email: Email) => {\n        setUserEmail(email);\n    };\n\n    const removeMemberFromBoard = () => {\n        if (!memberToRemove) {\n            return;\n        }\n\n        dispatch(Action.Command.revokeAccessToBoard(props.board.uid, memberToRemove));\n        setShowRemoveMemberConfirm(false);\n    };\n\n    const handleHideBoardClick = (e: React.SyntheticEvent) => {\n        e.stopPropagation();\n        dispatch(upsertUserSetting(keyBoardHidden(props.board.uid), !hidden));\n    };\n\n    const eyeIcon = hidden ? \"eye slash icon\" : \"eye icon\";\n\n    return <div className=\"ui item\"  style={{cursor: \"pointer\"}}>\n        {!isStandalone() && <Icon className={angleIcon} onClick={handleVisibleClick}/>}\n        <NavLink className=\"board-list board\" to={Route.compileInspectioBoardWorkspace(props.board.uid)}>{props.board.name}</NavLink>\n        <Icon className={eyeIcon} onClick={handleHideBoardClick} />\n        {!isStandalone() && <div className={contentClass}>\n            <a className=\"ui blue basic label\" onClick={openAddTeamModal}>\n                <i className=\"white plus icon\"/>\n                Add Team\n            </a>\n            {props.board.assignedTeams.map((teamId) => {\n                return <div key={teamId} className=\"ui basic label\">\n                    {getTeamNameById(teamId, teams)}\n                    <i className=\"red delete icon\" onClick={(event: React.MouseEvent) => {\n                        stopPropagation(event);\n                        setTeamToRemove(teamId);\n                        setShowRemoveTeamConfirm(true);\n                    }}/>\n                </div>\n            })}\n            <a className=\"ui blue basic label\" onClick={openAddUserModal}>\n                <i className=\"white plus icon\"/>\n                Add User\n            </a>\n            {props.board.sharedWith.map((userId) => {\n                return <div key={userId} className=\"ui basic label\">\n                    {getUsernameByUserId(userId)}\n                    <i className=\"red delete icon\" onClick={(event: React.MouseEvent) => {\n                        stopPropagation(event);\n                        setMemberToRemove(userId);\n                        setShowRemoveMemberConfirm(true);\n                    }}/>\n                </div>;\n            })}\n        </div>}\n        <div onClick={stopPropagation}>\n            <AddTeamToBoardModal\n                open={showAddTeamModal}\n                onClose={closeAddTeamModal}\n                onSubmit={handleAddTeamSubmit}\n                board={props.board}\n            />\n            <InviteUserToBoardModal\n                open={showAddUserModal}\n                onClose={closeAddUserModal}\n                onSubmit={handleShareBoardSubmit}\n                email={userEmail}\n                onEmailChange={onEmailChange}\n                permissions={permissions}\n                onPermissionsChange={setPermissions}\n            />\n            <Confirm\n                open={showRemoveMemberConfirm}\n                header={props.t('insp.board.remove_user_confirm_title')}\n                content={props.t(\n                    'insp.board.remove_user_confirm_text',\n                    { user_name: memberToRemove ? getUsernameByUserId(memberToRemove) : '' }\n                )}\n                onCancel={() => setShowRemoveMemberConfirm(false)}\n                onConfirm={removeMemberFromBoard}\n            />\n            <Confirm\n                open={showRemoveTeamConfirm}\n                header={props.t('insp.team.remove_from_board_confirm_title')}\n                content={props.t(\n                    'insp.team.remove_from_board_confirm_text',\n                    { team_name: teamToRemove ? getTeamNameById(teamToRemove, teams) : '' }\n                )}\n                onCancel={() => setShowRemoveTeamConfirm(false)}\n                onConfirm={removeTeamFromBoard}\n            />\n        </div>\n    </div>;\n};\n\nconst getTeamNameById = (teamId: TeamId, teams: List<Team>): TeamName => {\n    const team = teams.find(t => t.uid === teamId);\n\n    if(!team) {\n        return 'Unknown Team';\n    }\n\n    return team.name;\n}\n\nexport default withNamespaces()(BoardListItem);\n","import {fromJS} from \"immutable\";\nimport * as React from 'react';\nimport {ChangeEvent, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Icon, Message, Modal} from \"semantic-ui-react\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {makeGetBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport {UserSelector} from \"../../User/selectors\";\nimport BoardQuotaReachedModal from \"../../InspectioBoards/components/BoardQuotaReachedModal\";\nimport {BoardId} from \"../../InspectioBoards/model/Board\";\nimport * as uuid from \"uuid\";\nimport {Redirect} from \"react-router\";\nimport * as Routes from \"../../routes\";\n\ninterface OwnProps {};\n\nexport enum ImportMode {\n    newBoard = 'new_board',\n    replaceBoard = 'replace_board',\n    tempBoard = 'temp_board',\n}\n\ntype ImportBoardProps = WithNamespaces & OwnProps;\n\nconst readFileContent = (file: File, handleFileContent: (content: string) => void) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        let content = reader.result as string|null;\n\n        if(content === null) {\n            content = '';\n        }\n\n        handleFileContent(content);\n    }\n    reader.readAsText(file);\n};\n\nconst extractBoardName = (file: File): string => {\n    return file.name.split('.').slice(0, -1).join('.');\n}\n\nconst ImportBoard = (props: ImportBoardProps) => {\n    const uploadEl = useRef<HTMLInputElement>(null);\n    const [disabled, setDisabled] = useState(false);\n    const [showQuotaModal, setShowQuotaModal] = useState(false);\n    const [askForImportMode, setAskForImportMode] = useState(false);\n    const [currentFile, setCurrentFile] = useState<File|null>(null);\n    const getUserQuota = UserSelector.makeGetCurrentBoardQuota();\n    const userQuota = useSelector(getUserQuota);\n    const getUser = UserSelector.makeGetCurrentUser();\n    const user = useSelector(getUser);\n    const getBoards = makeGetBoards();\n    const boards = useSelector(getBoards);\n    const [existingBoardName, setExistingBoardName] = useState('undefined');\n    const [boardId, setBoardId] = useState<BoardId|undefined>(undefined);\n    const dispatch = useDispatch();\n\n    const handleClick = () => {\n        uploadEl.current!.click();\n    };\n\n    const processFile = (boardName: string, file: File, importMode: ImportMode) => {\n        if(importMode === ImportMode.newBoard) {\n            if (userQuota === 0) {\n                setShowQuotaModal(true);\n                setDisabled(false);\n                return;\n            }\n\n            readFileContent(file, (content) => {\n                const newBoardId = uuid.v4();\n                dispatch(Action.Command.importNewBoard(boardName, content, newBoardId));\n                setDisabled(false);\n                setBoardId(newBoardId);\n            });\n        } else {\n            const existingBoardList = boards.filter((board) => {\n                return board.name === boardName;\n            });\n\n            if(existingBoardList.count() > 0) {\n                const existingBoard: BoardModel.Board = existingBoardList.first();\n\n                readFileContent(file, (content) => {\n                    const updatedBoard = existingBoard.updateXml(content, user.uid);\n                    dispatch(Action.Command.importExistingBoard(updatedBoard));\n                    // wait a moment, so that board xml gets updated before redirect to board workspace happens\n                    window.setTimeout(() => {\n                        setBoardId(updatedBoard.uid);\n                    }, 50);\n                    setDisabled(false);\n                });\n            }\n        }\n\n        uploadEl.current!.value = '';\n    };\n\n    const handleFileSelected = (e: ChangeEvent<HTMLInputElement>) => {\n        setDisabled(true);\n\n        const file = e.target.files![0] || null;\n\n        const boardName = extractBoardName(file);\n\n        const existingBoardList = boards.filter((board) => {\n            return board.name === boardName;\n        });\n\n        if(existingBoardList.count() !== 0) {\n            setCurrentFile(file);\n            setExistingBoardName(boardName);\n            setAskForImportMode(true);\n            return;\n        }\n\n        processFile(extractBoardName(file), file, ImportMode.newBoard);\n    }\n\n    const handleQuotaModalClose = () => {\n        setShowQuotaModal(false);\n    }\n\n    const handleImportModalClose = () => {\n        setAskForImportMode(false);\n    }\n\n    const handleImportCopyClick = () => {\n        setAskForImportMode(false);\n        if(currentFile) {\n            processFile(extractBoardName(currentFile) + \" (Copy)\", currentFile, ImportMode.newBoard);\n        }\n    };\n\n    const handleOverrideClick = () => {\n        setAskForImportMode(false);\n        if(currentFile) {\n            processFile(extractBoardName(currentFile), currentFile, ImportMode.replaceBoard);\n        }\n    }\n\n    if(boardId && boards.filter(board => board.uid === boardId).count() === 1) {\n        return <Redirect to={Routes.compileInspectioBoardWorkspace(boardId)} />;\n    }\n\n    return <div className=\"item\">\n        <Button className=\"large basic\" onClick={handleClick} disabled={disabled}><i className=\"download icon\" /> Import&nbsp;Board</Button>\n        <input type=\"file\" ref={uploadEl} style={{display: 'none'}} onChange={handleFileSelected} />\n        <BoardQuotaReachedModal open={showQuotaModal} onClose={handleQuotaModalClose} />\n        <Modal open={askForImportMode} closeIcon={true} onClose={handleImportModalClose}>\n            <Modal.Header>{ props.t(\"insp.board.import\") }</Modal.Header>\n            <Modal.Content>\n                <Message icon=\"warning\" warning={true} content={props.t('insp.board.import_existing_board').replace('%name%', existingBoardName)} />\n            </Modal.Content>\n            <Modal.Actions>\n                <Button primary={true} onClick={handleImportCopyClick}><Icon name='plus' /> { props.t('insp.board.btn_import_as_new') }</Button>\n                <Button basic={true} onClick={handleOverrideClick}>{ props.t('insp.board.btn_replace_board') }</Button>\n            </Modal.Actions>\n        </Modal>\n    </div>\n};\n\nexport default withNamespaces()(ImportBoard);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useTranslation} from \"react-i18next/hooks\";\n\ninterface OwnProps {\n    showAll: boolean;\n    onClick: () => void;\n}\n\ntype ShowMoreBoardsItemProps = OwnProps & WithNamespaces;\n\nconst ShowMoreBoardsItem = (props: ShowMoreBoardsItemProps) => {\n    const handleClick = () => props.onClick();\n\n    return <div className=\"ui item\" style={{cursor: \"pointer\", textAlign: \"center\", color: \"#00b5ad\"}} onClick={handleClick}>\n        {props.showAll? props.t('app.showLess') : props.t('app.showAll')}\n    </div>\n};\n\nexport default withNamespaces()(ShowMoreBoardsItem);","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {useMemo, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {makeGetBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport {keyBoardHidden, makeUserSettingsSelector} from \"../../User/selectors/userSettings\";\nimport BoardListItem from \"./BoardListItem\";\nimport SharedBoardsItem from \"./SharedBoardsItem\";\nimport ShowMoreBoardsItem from \"./ShowMoreBoardsItem\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeOrganizationSelector} from \"../../Organization/selectors/selectOrganization\";\nimport {isStandalone} from \"../../standalone/util\";\n\ninterface OwnProps {\n\n}\n\ntype BoardListProps = OwnProps;\n\nconst BoardList = (props: BoardListProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organization = useSelector(makeOrganizationSelector(currentUser.activeOrganization));\n    const isOrgaAdmin = organization? organization.isAdmin(currentUser.uid) : false;\n\n\n    const [showAll, setShowAll] = useState(false);\n    const getBoards = makeGetBoards(true);\n    const boards = useSelector(getBoards);\n    const userSettings = useSelector(makeUserSettingsSelector());\n    const sharedBoardsCount = useMemo<number>(() => {\n        return boards.filter(board => board.shared && !isOrgaAdmin).count();\n    }, [boards]);\n\n    const handleShowMoreClick = () => {\n        setShowAll(!showAll);\n    };\n\n    let ownVisibleBoards = List<BoardModel.Board>();\n    let ownHiddenBoards = List<BoardModel.Board>();\n\n    boards\n        .filter(board => !board.shared || isOrgaAdmin)\n        .sortBy(board => board.name, (a, b) => a === b ? 0 : (a! < b! ? -1 : 1))\n        .forEach(ownBoard => {\n            if (userSettings[keyBoardHidden(ownBoard.uid)] === true) {\n                ownHiddenBoards = ownHiddenBoards.push(ownBoard);\n            } else {\n                if(!showAll && ownVisibleBoards.count() >= 3) {\n                    ownHiddenBoards = ownHiddenBoards.push(ownBoard);\n                } else {\n                    ownVisibleBoards = ownVisibleBoards.push(ownBoard);\n                }\n            }\n        });\n\n    if(showAll) {\n        ownVisibleBoards = ownVisibleBoards.push(...ownHiddenBoards.toArray());\n    }\n\n    const boardListItems = ownVisibleBoards\n        .map((board) => {\n        return <BoardListItem key={board.uid} board={board} />\n    }).toArray();\n\n    if(ownHiddenBoards.count() > 0 || ownVisibleBoards.count() > 3) {\n        boardListItems.push(<ShowMoreBoardsItem showAll={showAll} key=\"sidebar-show-more-boards\" onClick={handleShowMoreClick} />);\n    } else if (showAll) {\n        setShowAll(false);\n    }\n\n    if(!isStandalone()) {\n        boardListItems.push(<SharedBoardsItem count={sharedBoardsCount} key=\"sidebar-shared-boards\"/>);\n    }\n\n\n    return <>{boardListItems}</>;\n};\n\nexport default BoardList;\n","import * as React from 'react';\nimport {useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {NavLink} from \"react-router-dom\";\nimport {Icon} from \"semantic-ui-react\";\nimport {makeGetBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport * as Routes from \"../../routes\";\n\ninterface OwnProps {}\n\ntype BoardOverviewProps = OwnProps & RouteComponentProps;\n\nconst BoardOverview = (props: BoardOverviewProps) => {\n    const getBoards = makeGetBoards(true);\n    const boards = useSelector(getBoards);\n\n    let badgeClasses = \"ui small label\";\n\n    if(props.location.pathname === Routes.inspectio) {\n       badgeClasses += \" teal\";\n    }\n\n    return <NavLink exact={true} className=\"item\" activeClassName=\"active\" to={Routes.inspectio}>\n        <Icon className=\"sticky note icon\"/>\n        <div className={badgeClasses}>{ boards.count() }</div>\n        Boards\n    </NavLink>\n};\n\nexport default withRouter(BoardOverview);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Divider, Icon, Message, MessageContent, Modal, TextArea, TextAreaProps} from \"semantic-ui-react\";\nimport {isStandalone} from \"../../standalone/util\";\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n    onSubmit: (feedbackText: string) => void;\n    reset?: boolean;\n}\n\ntype FeedbackModalProps = OwnProps & WithNamespaces;\n\nconst FeedbackModal = (props: FeedbackModalProps) => {\n    const [feedback, setFeedback] = useState('');\n\n    const handleChange = (event: React.FormEvent<HTMLTextAreaElement>, {value}: TextAreaProps) => {\n        if(value) {\n            setFeedback(value + '');\n        }\n    };\n    const handleSendBtnClick = () => {\n        props.onSubmit(feedback);\n    };\n\n    if(props.reset && feedback !== '') {\n        setFeedback('');\n    }\n\n    return <Modal open={props.open} closeIcon={true} onClose={props.onClose}>\n        <Modal.Header>{ props.t('insp.feedback.header') }</Modal.Header>\n        <Modal.Content>\n            <Message>\n                <MessageContent>\n                    { props.t('insp.feedback.info_text') }\n                    <p>&nbsp;</p>\n                    <p><a href=\"https://gitter.im/proophboard/community\" target=\"_blank\"><Icon name=\"arrow right\" />&nbsp;Chat</a></p>\n                    <p><a href=\"https://github.com/proopboard/issue-tracker/issues\" target=\"_blank\"><Icon name=\"arrow right\" />&nbsp;Issue Tracker</a></p>\n                </MessageContent>\n            </Message>\n            {!isStandalone() && <>\n                <Divider horizontal={true}>OR</Divider>\n                <p>{props.t('insp.feedback.direct_msg')}</p>\n                <form className=\"ui form\">\n                    <TextArea placeholder={props.t('insp.feedback.placeholder')}\n                              autoHeight={true}\n                              autoFocus={true}\n                              value={feedback}\n                              onChange={handleChange}\n                              style={{minHeight: '100px'}}/>\n                </form>\n            </>}\n        </Modal.Content>\n        {!isStandalone() && <Modal.Actions>\n            <Button primary={true} onClick={handleSendBtnClick}>{props.t('insp.feedback.send')}</Button>\n        </Modal.Actions>}\n    </Modal>\n};\n\nexport default withNamespaces()(FeedbackModal);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button} from \"semantic-ui-react\";\nimport {sendUserFeedback} from \"../../Feedback/actions/api\";\nimport FeedbackModal from \"../../Feedback/components/FeedbackModal\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\n\ninterface OwnProps {\n\n}\n\ntype FeedbackProps = OwnProps;\n\nconst ERROR_MSG = \"Failed to send feedback. Please try again or send an email to contact@prooph.de\";\n\nconst Feedback = (props: FeedbackProps) => {\n    const dispatch = useDispatch();\n    const [showFeedbackModal, setShowFeedbackModal] = useState(false);\n    const [resetFeedbackModal, setResetFeedbackModal] = useState(false);\n    const user = useSelector(makeGetCurrentUser());\n\n    const handleFeedbackBtnClick = () => {\n        setResetFeedbackModal(false);\n        setShowFeedbackModal(true);\n    };\n    const handleModalClose = () => setShowFeedbackModal(false);\n    const handleFeedbackSubmit = (feedback: string) => {\n        sendUserFeedback(feedback, user.email)\n            .then(({response, error}) => {\n                if(error) {\n                    dispatch(Notify.Command.error(\"Request Error\", ERROR_MSG));\n                }\n\n                if(response) {\n                    setResetFeedbackModal(true);\n                    setShowFeedbackModal(false);\n                    dispatch(Notify.Command.info(\"Feedback sent\", \"We received your feedback. Thank you!\"))\n                }\n            })\n            .catch(() => {\n                dispatch(Notify.Command.error(\"Request Error\", ERROR_MSG));\n            });\n    };\n\n    return <>\n        <div className=\"ui item\">\n            <Button className=\"big\" onClick={handleFeedbackBtnClick}>\n                <div className=\"header\">Feedback</div>\n                <div className=\"sub header\" style={{textTransform:\"none\", fontWeight:\"normal\"}}>Send Bugs & Feature Requests</div>\n            </Button>\n        </div>\n        <FeedbackModal open={showFeedbackModal} onClose={handleModalClose} onSubmit={handleFeedbackSubmit} reset={resetFeedbackModal} />\n    </>;\n};\n\nexport default Feedback;","import {axiosApiPromise, ResponseType} from \"../../api/util\";\nimport {Email} from \"../../User/model/UserInfo\";\nimport {SERVER_CONTEXT} from \"./constants\";\n\nexport const sendUserFeedback = (feedbackText: string, email: Email): Promise<ResponseType> => {\n    return axiosApiPromise(SERVER_CONTEXT + 'SendUserFeedback', {text: feedbackText, userEmail: email});\n};\n","import * as _ from 'lodash';\nimport * as React from 'react';\nimport {ChangeEvent, useRef, useState} from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps} from \"react-router\";\nimport {Dropdown, DropdownDivider, DropdownItem, DropdownMenu, Input, Search} from \"semantic-ui-react\";\nimport {Palette} from \"../../theme/palette\";\nimport {filterElementsTree} from \"../actions/commands\";\nimport {BoardId} from \"../model/Board\";\nimport {parseFilter} from \"../model/ElementsTree\";\nimport {NodeType} from \"../model/Graph\";\nimport {HistoryCellType} from \"../model/HistoryEntry\";\nimport {makeElementsTreeByBoardIdSelector} from \"../selectors/elementsTree\";\nimport CellIcon from \"./CellIcon\";\n\ninterface OwnProps {\n\n}\n\ninterface SearchRouteProps {\n    uid: BoardId;\n}\n\ntype MxGraphBoardSearchProps = OwnProps & RouteComponentProps<SearchRouteProps> & WithNamespaces;\n\nlet lastFilterVal = '';\nlet lastSelectedType: HistoryCellType | undefined;\n\nconst withoutSelectedType = (searchVal: string, selectedType: HistoryCellType | undefined): string => {\n    if(!selectedType) {\n        return searchVal;\n    }\n\n    return searchVal.replace(`type:${selectedType};`, '');\n}\n\nconst withSelectedType = (searchVal: string, selectedType: HistoryCellType | undefined): string => {\n    if(!selectedType) {\n        return searchVal;\n    }\n\n    return `type:${selectedType};` + searchVal;\n}\n\nconst validFilterType = (type: HistoryCellType): boolean => {\n    switch (type) {\n        case NodeType.event:\n        case NodeType.command:\n        case NodeType.role:\n        case NodeType.aggregate:\n        case NodeType.document:\n        case NodeType.policy:\n        case NodeType.externalSystem:\n        case NodeType.hotSpot:\n        case NodeType.ui:\n        case NodeType.boundedContext:\n        case NodeType.feature:\n        case NodeType.icon:\n        case NodeType.image:\n        case NodeType.freeText:\n            return true;\n        default:\n            return false;\n    }\n}\n\nlet filterIsOpen = false;\n\nconst mapLowercaseTypeToNodeType = (type: string): HistoryCellType => {\n    switch (type) {\n        case HistoryCellType.boundedContext.toLowerCase():\n            return HistoryCellType.boundedContext;\n        case HistoryCellType.freeText.toLowerCase():\n            return HistoryCellType.freeText;\n        case HistoryCellType.hotSpot.toLowerCase():\n            return HistoryCellType.hotSpot;\n        case HistoryCellType.externalSystem.toLowerCase():\n            return HistoryCellType.externalSystem;\n        default:\n            return type as HistoryCellType;\n    }\n}\n\nconst MxGraphBoardSearch = (props: MxGraphBoardSearchProps) => {\n    const dispatch = useDispatch();\n\n    const elementsTreeSelector = makeElementsTreeByBoardIdSelector(props.match.params.uid);\n    const elementsTree = useSelector(elementsTreeSelector);\n    const [value, setValue] = useState(elementsTree.filter);\n    const searchInput = useRef<HTMLInputElement>(null);\n    const [showFilter, setShowFilter] = useState(false);\n    const [selectedType, setSelectedType] = useState<HistoryCellType|undefined>();\n    const [searchHasFocus, setSearchHasFocus] = useState(false);\n\n    // Sync filter val from redux store with local state and focus search input\n    if(lastFilterVal !== elementsTree.filter) {\n        lastFilterVal = elementsTree.filter;\n        lastSelectedType = selectedType;\n\n        const parsedFilter = parseFilter(elementsTree.filter);\n\n        if(parsedFilter.nodeTypes.length) {\n            lastSelectedType = parsedFilter.nodeTypes[0] as HistoryCellType;\n\n            if(Object.values(HistoryCellType).map(type => type.toLowerCase()).includes(lastSelectedType)) {\n                setSelectedType(lastSelectedType);\n            } else {\n                lastSelectedType = selectedType;\n            }\n        }\n\n        setValue(withoutSelectedType(elementsTree.filter, lastSelectedType));\n    } else if(lastSelectedType && !selectedType) {\n        const parsedFilter = parseFilter(elementsTree.filter);\n\n        if(parsedFilter.nodeTypes.length && parsedFilter.nodeTypes[0] === lastSelectedType) {\n            setValue(withoutSelectedType(elementsTree.filter, lastSelectedType));\n            setSelectedType(lastSelectedType);\n        }\n    }\n\n    if(elementsTree.focus) {\n        if(searchInput && searchInput.current) {\n            searchInput.current.focus();\n            dispatch(filterElementsTree(props.match.params.uid, elementsTree.filter, false));\n        }\n    }\n\n    const dispatchFilterChange = _.debounce((val) => {\n        lastFilterVal = withSelectedType(val, selectedType);\n        dispatch(filterElementsTree(props.match.params.uid, lastFilterVal))\n    }, 500);\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setValue(e.target.value);\n        dispatchFilterChange(e.target.value);\n    };\n\n    const handleFilterMouseDown = () => {\n        filterIsOpen = showFilter;\n    }\n\n    const handleFilterClick = () => {\n        if(!filterIsOpen) {\n            setShowFilter(true);\n        }\n    }\n\n    const handleSelectType = (type: HistoryCellType) => {\n        lastFilterVal = withoutSelectedType(lastFilterVal, selectedType);\n        setSelectedType(type);\n        lastSelectedType = type;\n        lastFilterVal = withSelectedType(lastFilterVal, type);\n        dispatch(filterElementsTree(props.match.params.uid, lastFilterVal));\n    }\n\n    const handleClearFilter = () => {\n        lastFilterVal = withoutSelectedType(lastFilterVal, selectedType);\n        lastSelectedType = undefined;\n        setSelectedType(undefined);\n        dispatch(filterElementsTree(props.match.params.uid, lastFilterVal));\n    }\n\n    const handleClear = () => {\n        setValue('');\n        setSelectedType(undefined);\n        lastFilterVal = '';\n        lastSelectedType = undefined;\n        dispatch(filterElementsTree(props.match.params.uid, ''))\n    };\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n        if(e.keyCode === 27) {\n            handleClear();\n        }\n    }\n\n    const filterColor = selectedType ? Palette.stickyColors[selectedType] : '#909090';\n    const focusClass = searchHasFocus ? ' focus' : '';\n\n    return <div className=\"item\">\n        <div className=\"ui left action right icon input\">\n            <Dropdown open={showFilter} icon={false} onClose={() => {\n                setShowFilter(false)\n            }} scrolling={true}>\n                <DropdownMenu style={{zIndex: 99000}}>\n                    <DropdownItem text=\"Clear Filter\" icon=\"close\" disabled={!selectedType} onClick={handleClearFilter}/>\n                    <DropdownDivider />\n                    {Object.values(HistoryCellType).filter(validFilterType).map(type => {\n                        return <DropdownItem\n                            key={type}\n                            onClick={() => handleSelectType(type.toLowerCase())}\n                            icon={<CellIcon cellType={type} />}\n                            text={props.t('app.stickyTypes.'+type)  } />;\n                    })}\n                </DropdownMenu>\n            </Dropdown>\n            <div className={\"ui left action input search filter\"+focusClass} style={{\n                borderTop: \"1px solid #dedede\",\n                borderBottom: \"1px solid #dedede\",\n                borderLeft: \"1px solid #dedede\",\n                borderTopLeftRadius: \"0.28571429rem\",\n                borderBottomLeftRadius: \"0.28571429rem\",\n            }}>\n                <button className=\"ui basic icon button\" onMouseDown={handleFilterMouseDown} onClick={handleFilterClick}>\n                    {!selectedType && <i className=\"filter icon\" style={{color: filterColor}}/>}\n                    {selectedType && <CellIcon cellType={mapLowercaseTypeToNodeType(selectedType)} size=\"normal\" />}\n                </button>\n            </div>\n            <input\n                type=\"text\"\n                placeholder=\"Search...\"\n                onChange={handleChange}\n                onFocus={() => setSearchHasFocus(true)}\n                onBlur={() => setSearchHasFocus(false)}\n                className=\"tree search\" value={value}\n                ref={searchInput}\n                onKeyDown={handleKeyDown}\n                style={{width: '80%'}}  />\n            {!elementsTree.isFiltered() && !selectedType && <i className=\"search icon\"/>}\n            {(elementsTree.isFiltered() || selectedType) &&\n            <i className=\"close link icon\" style={{cursor: \"pointer\"}} onClick={handleClear}/>}\n        </div>\n    </div>\n};\n\nexport default withNamespaces()(MxGraphBoardSearch);\n","import * as React from 'react';\nimport {useEffect, useRef} from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Label} from \"semantic-ui-react\";\nimport {loadCodyConsoleHistory, saveCodyConsoleHistory} from \"../../../core/localStorage\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\nimport {toggleElementDetails} from \"../../actions/commands\";\nimport {useGraph} from \"../../hooks/useGraph\";\nimport {BoardId} from \"../../model/Board\";\nimport {CodyResponse, CodyResponseType} from \"../../service/Cody\";\n\ninterface OwnProps {\n    boardId: BoardId;\n    messageCount: number;\n    lastCodyMsg?: CodyResponse;\n    visible: boolean;\n    onEnter: (val: string) => void;\n    onEscape: () => void;\n    onClose: () => void;\n    showConnectDefault?: boolean;\n}\n\ntype UserInputProps = OwnProps;\n\nlet history: string[] = loadCodyConsoleHistory();\nlet currentHistoryEntry: number|undefined;\n\nconst UserInput = (props: UserInputProps) => {\n    const user = useSelector(makeGetCurrentUser());\n    const inputEl = useRef<HTMLInputElement>(null);\n    const [graph] = useGraph();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        window.setTimeout(() => {\n            if(inputEl.current && ((props.lastCodyMsg && props.lastCodyMsg.type === CodyResponseType.Question) || props.showConnectDefault)) {\n                inputEl.current.focus();\n            }\n        }, 100);\n    }, [props.messageCount, props.lastCodyMsg, props.visible, props.showConnectDefault]);\n\n    useEffect(() => {\n        return () => {\n            saveCodyConsoleHistory(history.slice(0,10));\n        }\n    });\n\n    const defaultValue = props.showConnectDefault? '/connect http://localhost:3311' : '';\n\n    const handleKeyDown = (e: React.KeyboardEvent) => {\n        if(e.key === 'Enter') {\n            props.onEnter(inputEl.current!.value || '');\n\n            if(inputEl.current!.value !== '') {\n                if(currentHistoryEntry !== undefined && currentHistoryEntry !== -1) {\n                    if(history[currentHistoryEntry] === inputEl.current!.value) {\n                        history.splice(currentHistoryEntry, 1);\n                    }\n\n                }\n                if(!history.length || history[0] !== inputEl.current!.value) {\n                    history.unshift(inputEl.current!.value);\n                }\n            }\n            inputEl.current!.value = '';\n            currentHistoryEntry = undefined;\n\n        } else if (e.key === 'Escape') {\n            props.onEscape();\n        } else if (e.ctrlKey && e.key === 'q') {\n            props.onClose();\n        } else if (e.key === 'ArrowUp') {\n            if(currentHistoryEntry === undefined) {\n                currentHistoryEntry = 0;\n            } else {\n                currentHistoryEntry++;\n            }\n\n            if(currentHistoryEntry + 1 > history.length) {\n                currentHistoryEntry = history.length - 1;\n            }\n\n            if(currentHistoryEntry !== -1) {\n                inputEl.current!.value = history[currentHistoryEntry];\n            }\n            e.preventDefault();\n        } else if (e.key === 'ArrowDown') {\n            if(currentHistoryEntry === undefined) {\n                return;\n            }\n\n            currentHistoryEntry--;\n\n            if(currentHistoryEntry > -1) {\n                inputEl.current!.value = history[currentHistoryEntry];\n                inputEl.current!.focus();\n            }\n\n            if(currentHistoryEntry === -1) {\n                if(history.length && history[0] === inputEl.current!.value) {\n                    inputEl.current!.value = '';\n                    inputEl.current!.focus();\n                }\n                currentHistoryEntry = undefined;\n\n            }\n            e.preventDefault();\n        } else if (e.ctrlKey && e.key === 'g') {\n            graph.triggerCody();\n            e.preventDefault();\n        } else if (e.ctrlKey && e.key === 'm') {\n            dispatch(toggleElementDetails(props.boardId, true, true));\n            e.preventDefault();\n        } else {\n            currentHistoryEntry = undefined;\n        }\n    }\n\n    return <div className=\"console-message\">\n        <Label circular={true} className=\"user\" style={{backgroundImage: `url(${user.avatarUrl})`, backgroundSize: 'cover', marginLeft: '1px'}} />\n        <span style={{marginLeft: '3px'}}>&nbsp;&nbsp;</span>\n        <input type=\"text\" defaultValue={defaultValue} ref={inputEl} onKeyDown={handleKeyDown} />\n    </div>\n};\n\nexport default UserInput;\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Link} from \"react-router-dom\";\nimport {Icon, MenuItem, Popup} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\nimport {upsertUserSetting} from \"../../User/actions/commands\";\nimport {makeUserSettingSelector, makeUserSettingsLoadedSelector} from \"../../User/selectors/userSettings\";\n\ninterface OwnProps {\n    collapsed: boolean;\n}\n\ntype LogoProps = OwnProps & WithNamespaces;\n\nconst Logo = (props: LogoProps) => {\n\n    const dispatch = useDispatch();\n    const [popupOpen, setPopupOpen] = useState(false);\n    const [logoLoaded, setLogoLoaded] = useState(false);\n    const settingsLoaded = useSelector(makeUserSettingsLoadedSelector());\n    const showHint = useSelector(makeUserSettingSelector('show_logo_hint', false));\n\n\n    useEffect(() => {\n        if(settingsLoaded && logoLoaded && showHint) {\n            setPopupOpen(true);\n        }\n    }, [settingsLoaded, logoLoaded, showHint])\n\n    const handleHintClick = () => {\n        setPopupOpen(false);\n        dispatch(upsertUserSetting('show_logo_hint', false));\n    }\n\n    const handleLogoLoaded = () => {\n        setLogoLoaded(true);\n    }\n\n    return <Popup\n                open={popupOpen}\n                position=\"bottom center\"\n                content={<>\n                    <p><strong>{props.t('insp.hint.new_logo_header')}</strong></p>\n                    <p>{props.t('insp.hint.new_logo_text')}!</p>\n                    <p><Icon name=\"arrow right\"/>&nbsp;<a href=\"https://github.com/event-engine/inspectio/wiki/Rebranding\" target=\"_blank\">{props.t('insp.hint.learn_more')}</a></p>\n                    <p><span style={{\"color\": \"#9cc8f5\", \"cursor\": \"pointer\", float: \"right\"}} onClick={handleHintClick}>{props.t('insp.hint.got_it')}</span></p>\n                </>}\n                trigger={\n                    <MenuItem className=\"logo-item\">\n                        <Link to={Routes.inspectio}>\n                            <img className=\"logo\" src=\"img/prooph-board-logo.png\" alt=\"prooph board logo\"  onLoad={handleLogoLoaded} />\n                        </Link>\n                    </MenuItem>\n                }\n            />\n};\n\nexport default withNamespaces()(Logo);\n","import * as React from 'react';\nimport {ChangeEvent, SyntheticEvent, useState} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {filterBoardOverview} from \"../actions/commands\";\nimport {makeGetBoardOverview} from \"../selectors/boardList\";\n\ninterface OwnProps {}\n\ntype BoardOverviewSearchProps = OwnProps;\n\nconst BoardOverviewSearch = (props: BoardOverviewSearchProps) => {\n    const dispatch = useDispatch();\n\n    const boardOverviewSelector = makeGetBoardOverview();\n    const boardOverviewState = useSelector(boardOverviewSelector);\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        dispatch(filterBoardOverview(e.target.value));\n    };\n\n    const handleClear = (e: SyntheticEvent) => {\n        e.preventDefault();\n        dispatch(filterBoardOverview(''));\n    };\n\n    const filter = boardOverviewState.filter;\n\n    return <div className=\"item\">\n        <div className=\"ui icon input\">\n            <input type=\"text\" placeholder=\"Search...\" value={filter} onChange={handleChange} />\n            {filter === '' && <i className=\"search icon\" />}\n            {filter !== '' && <i className=\"close link icon\" style={{cursor: \"pointer\"}} onClick={handleClear} />}\n        </div>\n    </div>\n};\n\nexport default BoardOverviewSearch;","import {List, Record} from 'immutable';\nimport {Graph, Node, NodeId, NodeType} from \"./Graph\";\n\ninterface ParsedFilter {\n    nodeIds: string[];\n    nodeTypes: string[];\n    nodeLabels: string[];\n    nodeTags: string[];\n    strict: boolean;\n}\n\nexport interface TreeProps {\n    elements: List<Node>;\n    filter: string;\n    focus: boolean;\n}\n\nexport const defaultTreeProps: TreeProps = {\n    elements: List(),\n    filter: '',\n    focus: false,\n};\n\nexport const createTreeFromGraph = (graph: Graph): ElementsTree => {\n    return new ElementsTree({elements: graph.getRoot().children()});\n};\n\nexport const parseFilter = (filter: string): ParsedFilter => {\n    const parts = filter.split(';');\n\n    const nodeIds: string[] = [];\n    const nodeTypes: string[] = [];\n    const nodeLabels: string[] = [];\n    const nodeTags: string[] = [];\n\n    parts.forEach(part => {\n        if(part.search('id:') !== -1) {\n            nodeIds.push(part.replace('id:', '').trim());\n        }else if(part.search('type:') !== -1) {\n            nodeTypes.push(part.replace('type:', '').trim().toLowerCase());\n        }else if(part.search('tag:') !== -1) {\n            nodeTags.push(part.replace('tag:', '').trim().toLowerCase());\n        } else {\n            nodeLabels.push(part.trim());\n        }\n    })\n\n    return {nodeIds, nodeTypes, nodeLabels, nodeTags, strict: false};\n}\n\nexport const isFeatureTypeFilter = (filter: ParsedFilter): boolean => {\n    return filter.nodeTypes.length === 1 && filter.nodeTypes[0] === NodeType.feature;\n}\n\nexport const isContextTypeFilter = (filter: ParsedFilter): boolean => {\n    return filter.nodeTypes.length === 1 && filter.nodeTypes[0] === NodeType.boundedContext.toLowerCase();\n}\n\nconst matchNode = (node: Node, filter: ParsedFilter): boolean => {\n    if(filter.nodeTypes.length && !filter.nodeTypes.includes(node.getType().toLowerCase())) {\n        return false;\n    }\n\n    if(filter.nodeIds.length && !filter.nodeIds.includes(node.getId())) {\n        return false;\n    }\n\n    if(filter.nodeTags.length) {\n        for (const tag of filter.nodeTags) {\n            if(!node.getTags().contains(tag)) {\n                // @TODO: Remove fallback after a while, fixed spelling 2019-11-26\n                if(tag === 'planned') {\n                    if(!node.getTags().contains('planed')) {\n                        return false;\n                    }\n                } else {\n                    return false;\n                }\n            }\n        }\n    }\n\n    let matchesAllLabelParts = true;\n\n    filter.nodeLabels.forEach(labelFilter => {\n        if(filter.strict) {\n            if(node.getName() !== labelFilter) {\n                matchesAllLabelParts = false;\n            }\n        } else {\n            if(node.getName().toLowerCase().search(labelFilter.toLowerCase()) === -1) {\n                matchesAllLabelParts = false;\n            }\n        }\n    });\n\n    return matchesAllLabelParts;\n};\n\nconst filterChildren = (children: List<Node>, filter: ParsedFilter): List<Node> => {\n    const filteredChildren: Node[] = [];\n    const isFeatureFilter = isFeatureTypeFilter(filter);\n    const isContextFilter = isContextTypeFilter(filter);\n\n    children.forEach(child => {\n        if(isFeatureFilter && child.getType() === NodeType.feature) {\n            if(matchNode(child, filter)) {\n                filteredChildren.push(child);\n            }\n\n            return;\n        }\n\n        if(isContextFilter && child.getType() === NodeType.boundedContext) {\n            if(matchNode(child, filter)) {\n                filteredChildren.push(child);\n            }\n            return;\n        }\n\n        const filteredSubChildren = filterChildren(child.children(), filter);\n\n        if(filteredSubChildren.count() > 0) {\n            filteredChildren.push(child.setChildren(filteredSubChildren));\n            return;\n        }\n\n        if(matchNode(child, filter)) {\n            filteredChildren.push(child.setChildren(filteredSubChildren))\n        }\n    });\n\n    return List(filteredChildren);\n};\n\nconst filterElements = (elements: List<Node>, filter: ParsedFilter): List<Node> => {\n    const filteredElements: Node[] = [];\n\n    elements.forEach(ele => {\n\n       const filteredSubChildren = filterElements(ele.children(), filter);\n\n       if(filteredSubChildren.count() > 0) {\n           filteredElements.push(...filteredSubChildren.toArray());\n       }\n\n       if(matchNode(ele, filter)) {\n           filteredElements.push(ele);\n       }\n    });\n\n    return List(filteredElements);\n}\n\nexport class ElementsTree extends Record(defaultTreeProps) implements TreeProps {\n    public mergeTree(other: ElementsTree): ElementsTree {\n        // @TODO Implement diffing strategy to only add/remove/update changed elements\n        return other.set('filter', this.filter);\n    }\n\n    public getFilteredElementsAsTree(): List<Node> {\n        const parsedFilter = parseFilter(this.filter);\n\n        return filterChildren(this.elements, parsedFilter);\n    }\n\n    public isFiltered(): boolean {\n        return this.filter !== '';\n    }\n\n    public getFilteredElementsByTypeAndLabel(nodeType: string, label: string): List<Node> {\n        return filterElements(this.elements, {\n            nodeIds: [],\n            nodeLabels: [label],\n            strict: true,\n            nodeTags: [],\n            nodeTypes: [nodeType]\n        })\n    }\n\n    public getElement(elementId: NodeId): Node | undefined {\n        const matchedEles = filterElements(this.elements, {\n            nodeIds: [elementId],\n            nodeLabels: [],\n            nodeTags: [],\n            nodeTypes: [],\n            strict: true\n        });\n\n        if(matchedEles.size > 0) {\n            return matchedEles.first();\n        }\n\n        return undefined;\n    }\n}\n","import {Record} from \"immutable\";\nimport {ApplicationState} from \"../../reducer\";\nimport {BoardModel} from \"../model\";\nimport {ElementsTree} from \"../model/ElementsTree\";\n\nconst getElementsTreeByBoardId = (state: Record<ApplicationState>, boardId: BoardModel.BoardId): ElementsTree => state.getIn(['inspectioBoards', 'elementsTree', boardId]) || new ElementsTree();\n\nexport const makeElementsTreeByBoardIdSelector = (boardId: BoardModel.BoardId): (state: Record<ApplicationState>) => ElementsTree => (state: Record<ApplicationState>) => getElementsTreeByBoardId(state, boardId);","import * as React from 'react';\nimport {Route, RouteComponentProps, Switch, withRouter} from \"react-router\";\nimport BoardOverviewSearch from \"../../InspectioBoards/components/BoardOverviewSearch\";\nimport MxGraphBoardSearch from \"../../InspectioBoards/components/MxGraphBoardSearch\";\nimport * as Routes from '../../routes';\n\ntype SearchProps = RouteComponentProps;\n\nconst Search = (props: SearchProps) => {\n    return <Switch>\n        <Route exact={true} path={Routes.inspectio} component={BoardOverviewSearch} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={MxGraphBoardSearch} />\n    </Switch>\n};\n\nexport default withRouter(Search);","import * as React from 'react';\nimport {Grid, Label, Message} from \"semantic-ui-react\";\nimport moment from \"moment\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {\n    makeUserSettingSelector,\n    makeUserSettingsLoadedSelector,\n    keyUpdateViewed\n} from \"../../User/selectors/userSettings\";\nimport {useEffect} from \"react\";\nimport {upsertUserSetting} from \"../../User/actions/commands\";\n\ninterface OwnProps {\n    date: string;\n    children: React.ReactNode;\n}\n\ntype UpdateListEntryProps = OwnProps;\n\nconst UpdateListEntry = (props: UpdateListEntryProps) => {\n\n    const dispatch = useDispatch();\n    const settingsLoaded = useSelector(makeUserSettingsLoadedSelector());\n    const viewed = useSelector(makeUserSettingSelector(keyUpdateViewed(props.date), false));\n\n    useEffect(\n        () => {\n            window.setTimeout(() => {\n                if (settingsLoaded && !viewed) {\n                    dispatch(upsertUserSetting(keyUpdateViewed(props.date), true));\n                }\n            }, 5000);\n        },\n        [viewed, settingsLoaded]\n    );\n\n    return (\n        <Grid.Row>\n            <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                <Message>\n                    <Label className={`${viewed ? 'black' : 'red'} top left attached`}>\n                        New Features released {moment(props.date).format('LL')}\n                    </Label>\n                    {props.children}\n                </Message>\n            </Grid.Column>\n        </Grid.Row>\n    );\n};\n\nexport default UpdateListEntry;\n","import * as React from 'react';\nimport {Container, Grid, MessageHeader} from \"semantic-ui-react\";\nimport UpdateListEntry from \"./UpdateListEntry\";\n\nexport const UpdateList = [\n    {\n        date: '2022-01-31',\n        content: <>\n            <MessageHeader>\n                Rearranged Editing Toolbar\n            </MessageHeader>\n            <p>\n                <ul>\n                    <li>Moved \"font color\" into main toolbar</li>\n                    <li>Moved \"background color\" into main toolbar</li>\n                    <li>Moved \"clear formatting\" into align menu</li>\n                    <li>Removed formatting menu</li>\n                    <li>Added a \"wiki link\" button</li>\n                </ul>\n            </p>\n        </>\n    },\n    {\n        date: '2021-11-20',\n        content: <>\n            <MessageHeader>\n                More Styling Options\n            </MessageHeader>\n            <p>\n                New styling options are available for advanced modelling and different workshop formats. The update includes:\n            </p>\n            <p>\n                <ul>\n                    <li>Stickies\n                        <ul>\n                            <li>Change sticky type via context menu or shortcut (check context menu for available shortcuts)</li>\n                            <li>Align a group of stickies vertically and horizontally (context menu + shortcuts)</li>\n                        </ul>\n                    </li>\n                    <li>Contexts, Features, Textboxes\n                        <ul>\n                            <li>Change Style\n                                <ul>\n                                    <li>Ellipse</li>\n                                    <li>Triangle</li>\n                                    <li>Rhombus</li>\n                                    <li>Hexagon</li>\n                                </ul>\n                            </li>\n                        </ul>\n                    </li>\n                    <li>Arrows\n                        <ul>\n                            <li>Change Color</li>\n                            <li>Dotted Style</li>\n                            <li>Thickness</li>\n                        </ul>\n                    </li>\n                    <li>Comic Style\n                        <ul>\n                            <li>Select a group of elements and turn \"Comic Style\" on or off in the context menu</li>\n                        </ul>\n                    </li>\n                    <li>Keyboard Controls\n                        <ul>\n                            <li>Move selected element with arrow keys (keep key pressed for continued move + SHIFT key pressed for even faster move)</li>\n                            <li>Resize selected element with CTRL/CMD + arrow keys (CTRL/CMD+SHIFT for bigger resize steps)</li>\n                            <li>ALT+SHIFT + arrow keys: Copy selected element in direction of arrow key and connect it\n                                <ul>\n                                    <li>You can model a complete flow via keyboard in combination with switch sticky type shortcuts</li>\n                                </ul>\n                            </li>\n                            <li>ENTER: Start text editing on selected sticky with</li>\n                            <li>ESC: Finish text editing</li>\n                            <li>CTRL/CMD+M: Start metadata editing</li>\n                            <li>ESC: pressed in metadata editor finishes editing and focuses cell on board again</li>\n                        </ul>\n                    </li>\n                </ul>\n            </p>\n        </>\n    },\n    {\n        date: '2021-11-19',\n        content: <>\n            <MessageHeader>\n                Copy & Paste\n            </MessageHeader>\n            <p>\n                Copy & Pasting prooph board content is now possible across browsers. Next time you paste something, prooph board will ask you for access to your system's clipboard. If you grant access, the feature gets activated. Please note: this security check is built into modern browsers. By default, JavaScript is not allowed to access the system clipboard without explicit permission.\n            </p>\n        </>\n    },\n    {\n        date: '2021-11-12',\n        content: <>\n            <MessageHeader>\n                Performance and Handling Updates\n            </MessageHeader>\n            <p>We sat down last week to benchmark and improve performance on lager prooph boards. We disabled a couple of fade in/out animations in favor of performance and added a little physics effect when moving a board around. The latter gives a more natural feeling to compensate the deactivated fade effects. The Lite Mode still gives you best performance in case your system is under heavy load, but you should less likely have a need to activate it.</p>\n        </>\n    },\n    {\n        date: '2021-11-02',\n        content: <>\n            <MessageHeader>\n                Synchronized Timer\n            </MessageHeader>\n            <p>You'll find a new timer feature in the board top menu (click on the hour glass icon). Setting a timer enables it for all users on the current board. Everybody will see the time ticking and a red blinking timer, when the set time is over. This is especially useful for time-boxed collaboration sessions. The person who sets the timer has control over it (pause, stop, reset).</p>\n        </>\n    },\n    {\n        date: '2021-02-13',\n        content: <>\n            <MessageHeader>\n                Direct Import\n            </MessageHeader>\n            <p>A new import functionality allows you to prepare a link that opens prooph board and imports a board fetched from an URL. This is especially useful for demo boards in combination with the new free version of prooph board. For example you could upload a board export on Github and prepare a link to Free Version like this: <a href=\"https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml\">https://event-engine.io/inspectio-free/inspectio/boards/import/https%3A%2F%2Fraw.githubusercontent.com%2Fevent-engine%2Finspectio%2Fmaster%2Fassets%2FExample%2520Boards%2FThe%2520Picture.xml</a></p>\n        </>\n    },\n    {\n        date: '2021-01-18',\n        content: <>\n            <MessageHeader>\n                Organization\n            </MessageHeader>\n            <p>We've added a new administrative layer called \"Organization\" to make user and board management easier. With an organization you can share your board and user quota with colleagues. They don't need to worry about limitations, can easily create boards and share them with members. <a href=\"https://github.com/event-engine/inspectio/wiki/Managing-an-Organization\" target=\"_blank\">Learn about the details</a>.</p>\n        </>\n    }\n];\n\ninterface OwnProps {\n\n}\n\ntype UpdatePageProps = OwnProps;\n\nconst UpdatePage = (props: UpdatePageProps) => {\n    return (\n        <Container>\n            <Grid stackable={true} padded={true}>\n                {UpdateList.map((update, updateIndex) => (\n                    <UpdateListEntry key={updateIndex} date={update.date}>\n                        {update.content}\n                    </UpdateListEntry>\n                ))}\n            </Grid>\n        </Container>\n    );\n};\n\nexport default UpdatePage;\n","import * as React from 'react';\nimport {NavLink, RouteComponentProps, withRouter} from \"react-router-dom\";\nimport * as Routes from \"../../routes\";\nimport {makeUserSettingsSelector} from \"../../User/selectors/userSettings\";\nimport {useSelector} from \"react-redux\";\nimport {UpdateList} from \"../../Updates/components/UpdatePage\";\n\n\ninterface OwnProps {\n\n}\n\ntype UpdatesProps = OwnProps & RouteComponentProps;\n\nconst Updates = (props: UpdatesProps) => {\n\n    const userSettings = useSelector(makeUserSettingsSelector());\n\n    const count = UpdateList\n        .map(update => update.date)\n        .filter(date => !userSettings[`update_${date}_viewed`])\n        .length;\n\n    return <NavLink className=\"item\" to={Routes.Updates}>\n        <div className={'ui small label' + (props.location.pathname === Routes.Updates? ' teal' : (count > 0? ' red' : ''))}>{count}</div>\n        Updates\n    </NavLink>\n};\n\nexport default withRouter(Updates);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Button, Grid, Message, Modal} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype UpgradeProps = OwnProps & WithNamespaces;\n\nconst Upgrade = (props: UpgradeProps) => {\n\n    return <>\n        <div className=\"middle aligned item\">\n            <div className=\"ui big header\">Free Version</div>\n            <Grid className=\"stackable two column\">\n                <Grid.Column>\n                    <Button className=\"positive\" href=\"https://prooph-board.com#pricing\" target=\"_blank\">Upgrade</Button>\n                </Grid.Column>\n                <Grid.Column>\n                    <div className=\"sub header\">More Features, Organization & Teams, Realtime Collaboration</div>\n                </Grid.Column>\n            </Grid>\n        </div>\n    </>;\n};\n\nexport default withNamespaces()(Upgrade);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport AddBoard from \"../../../../Layout/Sidebar/AddBoard\";\nimport BoardList from \"../../../../Layout/Sidebar/BoardList\";\nimport BoardOverview from \"../../../../Layout/Sidebar/BoardOverview\";\nimport Feedback from \"../../../../Layout/Sidebar/Feedback\";\nimport ImportBoard from \"../../../../Layout/Sidebar/ImportBoard\";\nimport Logo from \"../../../../Layout/Sidebar/Logo\";\nimport Search from \"../../../../Layout/Sidebar/Search\";\nimport Updates from \"../../../../Layout/Sidebar/Updates\";\nimport Upgrade from \"../../../../Layout/Sidebar/Upgrade\";\nimport {makeGetCurrentBoardQuota} from \"../../../../User/selectors/currentUser\";\n\ninterface OwnProps {\n\n}\n\ntype OverviewSidebarProps = OwnProps & WithNamespaces;\n\nconst OverviewSidebar = (props: OverviewSidebarProps) => {\n    return <>\n        <Logo collapsed={false} />\n        <Upgrade />\n        <Search />\n        <ImportBoard />\n        <AddBoard />\n        <BoardOverview />\n        <BoardList />\n        <Updates />\n        <Feedback />\n    </>;\n};\n\nexport default withNamespaces()(OverviewSidebar);\n","import * as React from 'react';\nimport {Icon} from \"semantic-ui-react\";\nimport {NodeType} from \"../model/Graph\";\nimport CellIcon from \"./CellIcon\";\n\ninterface OwnProps {\n    type: NodeType;\n    open?: boolean;\n    className?: string;\n    title?: string;\n}\n\ntype LeafIconProps = OwnProps;\n\nconst LeafIcon = (props: LeafIconProps) => {\n    const open = !!props.open;\n\n    switch (props.type) {\n        case NodeType.layer:\n            const iconName = open ? 'folder open' : 'folder';\n            return <Icon name={iconName}  style={{cursor: 'pointer'}} className={props.className} title={props.title} />;\n        default:\n            return <CellIcon cellType={props.type} size=\"normal\" title={props.title} className={props.className} />;\n    }\n\n};\n\nexport default LeafIcon;\n","import * as React from 'react';\nimport {PropsWithChildren, useEffect, useState} from 'react';\nimport {useDispatch} from \"react-redux\";\nimport {NavLink} from \"react-router-dom\";\nimport {Button, Icon, List, Menu, MenuItem, Popup} from \"semantic-ui-react\";\nimport EditableTextline from \"../../../core/components/EditableTextline\";\nimport {useGraph} from \"../../hooks/useGraph\";\nimport {Action} from \"../../index\";\nimport {BoardId} from \"../../model/Board\";\nimport {Node, NodeType} from \"../../model/Graph\";\nimport {\n    EDITABLE_LAYER_ADDITIONAL_CHAR_PADDING,\n    EDITABLE_LAYER_CHAR_SIZE_UNIT,\n    EDITABLE_LAYER_INPUT_CHAR_SIZE\n} from \"../BoardTreeView\";\nimport LeafIcon from \"../LeafIcon\";\nimport MaxLengthLabel from \"../MaxLengthLabel\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\n\ninterface OwnProps {\n    name: string;\n    boardId: BoardId;\n    expand: boolean;\n    deletable: boolean;\n    active: boolean;\n    layer: Node;\n    onLayerVisibilityChanged?: (visible: boolean) => void;\n    onActiveLayerChanged?: () => void;\n    copyToLayerSuccess?: boolean;\n}\n\ntype BoardLayerProps = PropsWithChildren<OwnProps> & WithNamespaces;\n\nconst btnWidth = 20;\nlet dblClickTimer: any = null;\n\nconst BoardLayer = (props: BoardLayerProps) => {\n    const [showChildren, setShowChildren] = useState(false);\n    const [showSettings, setShowSettings] = useState(false);\n    const [graph] = useGraph();\n    // Force component rerender after click to read changes from graph\n    const [clicks, setClicks] = useState(0);\n    const [copyToLayerSuccess, setCopyToLayerSuccess] = useState<boolean|null>(null);\n    const [nameEditMode, setNameEditMode] = useState(false);\n    const [layerDeleteMode, setLayerDeleteMode] = useState(false);\n    const dispatch = useDispatch();\n\n    const visible =  graph.isVisible(props.layer);\n    const locked = graph.isLocked(props.layer);\n\n    useEffect(() => {\n        setShowChildren(props.expand)\n    }, [props.expand]);\n\n\n    const handleLeafIconClick = (leafOpen: boolean, e: React.MouseEvent) => {\n        if(null !== dblClickTimer) {\n            window.clearTimeout(dblClickTimer);\n            dblClickTimer = null;\n            if(visible) {\n                graph.highlightLayer(props.layer);\n                setClicks(clicks + 1);\n            }\n            return;\n        }\n\n        dblClickTimer = window.setTimeout(() => {\n            if(!leafOpen && !graph.isActiveLayer(props.layer)) {\n                graph.setAsActiveLayer(props.layer);\n\n                if(props.onActiveLayerChanged) {\n                    props.onActiveLayerChanged();\n                }\n            }\n\n            if(leafOpen && !props.layer.isDefaultLayer()) {\n                graph.setDefaultLayerAsActive();\n                if(props.onActiveLayerChanged) {\n                    props.onActiveLayerChanged();\n                }\n            }\n\n            setShowChildren(!leafOpen);\n            if(showSettings) {\n                setShowSettings(false);\n            }\n            dblClickTimer = null;\n        }, 200);\n\n        e.preventDefault();\n    };\n\n    const handleItemContextMenu = (e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n\n        setShowSettings(true);\n    }\n\n    const handleLockClick = () => {\n        graph.setLocked(props.layer, !graph.isLocked(props.layer));\n        setClicks(clicks + 1);\n    }\n\n    const handleVisibleClick = () => {\n        const willBeVisible = !graph.isVisible(props.layer);\n        graph.setUserVisible(props.layer, willBeVisible);\n        if(props.onLayerVisibilityChanged) {\n            props.onLayerVisibilityChanged(willBeVisible);\n        }\n        setClicks(clicks + 1);\n    }\n\n    const handleEditNameClick = () => {\n        setNameEditMode(true);\n    }\n\n    const handleCancelEditLayer = () => {\n        setNameEditMode(false);\n        setShowSettings(false);\n    }\n\n    const handleEditLayer = (newLayerName: string) => {\n        graph.changeNodeName(props.layer, newLayerName);\n        setNameEditMode(false);\n        setShowSettings(false);\n    }\n\n    const handleDeleteLayerClick = (e: React.MouseEvent) => {\n        setLayerDeleteMode(true);\n    }\n\n    const handleAbortDeleteLayer = () => {\n        setLayerDeleteMode(false);\n        setShowSettings(false);\n    }\n\n    const handleConfirmDeleteLayer = () => {\n        graph.deleteLayer(props.layer);\n        setLayerDeleteMode(false);\n    }\n\n    const visibleIcon = visible ? 'eye' : 'eye slash';\n    const lockIcon = locked? 'lock' : 'lock open';\n    const showCopySuccess = props.copyToLayerSuccess? props.copyToLayerSuccess : copyToLayerSuccess;\n\n    return <>\n        {!nameEditMode && <List.Item style={{padding: \"5px\", background: 'rgba(0,0,0,0.05)'}}\n                      as={ NavLink }\n                      to=\"#\"\n                      isActive={() => false}\n                      onClick={(e) => {handleLeafIconClick(showChildren, e)}}\n                      onContextMenu={handleItemContextMenu}\n                      className={visible? '' : 'hidden'}\n        >\n            <LeafIcon type={NodeType.layer}\n                      open={showChildren}\n                      title={props.t('insp.board.layers.folder_title') as string}\n                      className={(props.active? 'active-layer' : 'layer') + (showCopySuccess !== null? (showCopySuccess? ' copy-success' : ' copy-failed') : '')} />\n            {locked && <Icon name={lockIcon} className=\"corner left\" size=\"mini\" fitted={true}/>}\n            {!visible && <Icon name={visibleIcon} className=\"corner right\" size=\"mini\" fitted={true}/>}\n            <List.Content>\n                <Popup\n                    position='bottom center'\n                    closeOnTriggerBlur={false}\n                    closeOnTriggerMouseLeave={false}\n                    hideOnScroll={true}\n                    open={showSettings}\n                    onClose={() => setShowSettings(false)}\n                    style={{padding: \"0px\"}}\n                    trigger={\n                        <div>\n                            <MaxLengthLabel label={props.name} maxLength={50} />\n                        </div>\n                    }\n                    content={\n                        <>\n                        {!layerDeleteMode && <Menu secondary={true} compact={true}>\n                            <MenuItem\n                                title={props.t('insp.board.layers.edit_name') as string}\n                                onClick={e => {\n                                e.stopPropagation();\n                                handleEditNameClick();\n                            }}>\n                                <Icon name=\"edit\" />\n                            </MenuItem>\n                            <MenuItem\n                                title={props.t('insp.board.layers.lock_layer') as string}\n                                onClick={e => {\n                                e.stopPropagation();\n                                handleLockClick();\n                            }}>\n                               <Icon name={lockIcon} />\n                            </MenuItem>\n                            <MenuItem\n                                title={props.t('insp.board.layers.visibility') as string}\n                                onClick={e => {\n                                e.stopPropagation();\n                                handleVisibleClick();\n                            }}>\n                                <Icon name={visibleIcon} />\n                            </MenuItem>\n                            <MenuItem className=\"delete-ele\" onClick={e => {\n                                e.stopPropagation();\n                                handleDeleteLayerClick(e);\n                            }} title={props.t('insp.board.layers.delete_layer') as string} disabled={!props.deletable}>\n                                <Icon name=\"trash\" />\n                            </MenuItem>\n                        </Menu>}\n                        {layerDeleteMode && <Menu secondary={true} compact={true}>\n                            <MenuItem>\n                                {props.t('insp.board.layers.delete_confirmation')}\n                            </MenuItem>\n                            <MenuItem\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    handleConfirmDeleteLayer();\n                                }}\n                            >\n                                {props.t('app.form.yes')}\n                            </MenuItem>\n                            <MenuItem\n                                onClick={e => {\n                                    e.stopPropagation();\n                                    handleAbortDeleteLayer();\n                                }}\n                            >\n                                {props.t('app.form.no')}\n                            </MenuItem>\n                        </Menu>}\n                        </>\n                    }\n                />\n                {showChildren && props.children}\n            </List.Content>\n        </List.Item>\n        }\n        {nameEditMode &&\n        <List.Item className=\"add-layer\">\n            <Button icon={true} basic={true} size=\"medium\">\n                <Icon name=\"folder outline\" />\n            </Button>\n            <EditableTextline\n                text={props.layer.getName()}\n                charSize={EDITABLE_LAYER_INPUT_CHAR_SIZE}\n                widthUnit={EDITABLE_LAYER_CHAR_SIZE_UNIT}\n                padding={EDITABLE_LAYER_ADDITIONAL_CHAR_PADDING}\n                minWidth={120}\n                required={true}\n                onTextChanged={handleEditLayer}\n                focus={true}\n                onCancel={handleCancelEditLayer}\n                placeholder={'Board'}\n            />\n        </List.Item>\n        }\n    </>;\n};\n\nexport default withNamespaces()(BoardLayer);\n","import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {NavLink} from \"react-router-dom\";\nimport {Icon, List, Menu, MenuItem, Popup} from \"semantic-ui-react\";\nimport * as Routes from \"../../../routes\";\nimport {BoardId} from \"../../model/Board\";\nimport {Node, NodeType} from \"../../model/Graph\";\nimport {isValidLeaf} from \"../BoardTreeView\";\nimport LeafIcon from \"../LeafIcon\";\nimport MaxLengthLabel from \"../MaxLengthLabel\";\nimport BoardTree from \"./BoardTree\";\nimport {useGraph} from \"../../hooks/useGraph\";\n\ninterface OwnProps {\n    element: Node;\n    boardId: BoardId;\n    expand: boolean;\n}\n\ntype BoardTreeLeafProps = OwnProps & WithNamespaces;\n\nlet dblClickTimer: any = null;\n\nconst BoardTreeLeaf = (props: BoardTreeLeafProps) => {\n\n    const [clicks, setClicks] = useState(1);\n    const [showChildren, setShowChildren] = useState(false);\n    const [showSettings, setShowSettings] = useState(false);\n    const [deleteMode, setDeleteMode] = useState(false);\n    const [graph] = useGraph();\n\n    useEffect(() => {\n        setShowChildren(props.expand)\n    }, [props.expand]);\n\n    const locked = graph.isLocked(props.element);\n    const visible = graph.isVisible(props.element);\n    const visibleIcon = visible ? 'eye' : 'eye slash';\n    const lockIcon = locked ? 'lock' : 'lock open';\n\n    const handleItemClick = (e: React.MouseEvent) => {\n        e.stopPropagation();\n\n        if(null !== dblClickTimer) {\n            window.clearTimeout(dblClickTimer);\n            dblClickTimer = null;\n            setClicks(clicks + 1);\n            return;\n        }\n\n        dblClickTimer = window.setTimeout(() => {\n\n            setShowChildren(!showChildren);\n            if(showSettings) {\n                setShowSettings(false);\n            }\n            dblClickTimer = null;\n        }, 200);\n\n\n        if(visible && props.element.getType() !== NodeType.boundedContext && props.element.getType() !== NodeType.feature) {\n            setClicks(clicks + 1);\n        } else {\n            e.preventDefault();\n        }\n    };\n\n    const handleItemContextMenu = (e: React.MouseEvent) => {\n        e.stopPropagation();\n        e.preventDefault();\n        setShowSettings(true);\n    }\n\n    const handleLockClick = () => {\n        graph.setLocked(props.element, !locked);\n        setClicks(clicks + 1);\n    }\n\n    const handleVisibleClick = () => {\n        graph.setUserVisible(props.element, !visible);\n        setClicks(clicks + 1);\n    }\n\n    const handleDeleteClick = () => {\n        setDeleteMode(true);\n    }\n\n    const handleAbortDelete = () => {\n        setDeleteMode(false);\n        setShowSettings(false);\n    }\n\n    const handleConfirmDelete = () => {\n        graph.deleteElement(props.element);\n        setDeleteMode(false);\n    }\n\n\n    const canHaveChildren = props.element.getType() === NodeType.boundedContext || props.element.getType() === NodeType.feature;\n    const validChildren = props.element.children().filter(isValidLeaf);\n    const hiddenClass = visible? '' : ' hidden';\n\n\n    return <>\n        <List.Item as={ NavLink }\n                          to={{pathname: Routes.compileInspectioBoardWorkspace(props.boardId), search: `?cells=${props.element.getId()}&clicks=${clicks}`}}\n                          onClick={handleItemClick}\n                          onContextMenu={handleItemContextMenu}\n                          isActive={() => false}\n                          style={{padding: \"5px\"}}\n                          className={showSettings? 'edit' + hiddenClass : hiddenClass}\n        >\n            <LeafIcon type={props.element.getType()} open={showChildren} />\n            {locked && <Icon name={lockIcon} className=\"corner left\" size=\"mini\" fitted={true}/>}\n            {!visible && <Icon name={visibleIcon} className=\"corner right\" size=\"mini\" fitted={true}/>}\n\n            <List.Content>\n                <Popup\n                    position='bottom center'\n                    closeOnTriggerBlur={false}\n                    closeOnTriggerMouseLeave={false}\n                    hideOnScroll={true}\n                    open={showSettings}\n                    onClose={() => setShowSettings(false)}\n                    trigger={<div><MaxLengthLabel label={props.element.getName()} maxLength={30} /></div>}\n                    style={{padding: \"0px\"}}\n                    content={\n                        <>\n                            {!deleteMode && <Menu secondary={true} compact={true}>\n                                <MenuItem\n                                    onClick={e => {\n                                        e.stopPropagation();\n                                        handleLockClick();\n                                    }}\n                                >\n                                    <Icon name={lockIcon}/>\n                                </MenuItem>\n                                <MenuItem\n                                    onClick={e => {\n                                        e.stopPropagation();\n                                        handleVisibleClick();\n                                    }}\n                                >\n                                    <Icon name={visibleIcon}/>\n                                </MenuItem>\n                                <MenuItem className=\"delete-ele\"\n                                    onClick={e => {\n                                        e.stopPropagation();\n                                        handleDeleteClick();\n                                    }}\n                                >\n                                    <Icon name=\"trash\"/>\n                                </MenuItem>\n                            </Menu>\n                            }\n                            {deleteMode && <Menu secondary={true} compact={true}>\n                                <MenuItem>\n                                    {props.t('insp.board.layers.delete_confirmation')}\n                                </MenuItem>\n                                <MenuItem\n                                    onClick={e => {\n                                        e.stopPropagation();\n                                        handleConfirmDelete();\n                                    }}\n                                >\n                                    {props.t('app.form.yes')}\n                                </MenuItem>\n                                <MenuItem\n                                    onClick={e => {\n                                        e.stopPropagation();\n                                        handleAbortDelete();\n                                    }}\n                                >\n                                    {props.t('app.form.no')}\n                                </MenuItem>\n                            </Menu>\n                            }\n                        </>\n                    }\n                />\n                {validChildren.count() > 0\n                    && showChildren\n                    && <BoardTree leafs={validChildren} boardId={props.boardId} expandLeafs={props.expand} />}\n                {validChildren.count() === 0\n                    && canHaveChildren\n                    && showChildren\n                && <List><List.Item><span style={{color: '#747474'}}>(empty)</span></List.Item></List>}\n            </List.Content>\n        </List.Item>\n    </>;\n};\n\nexport default withNamespaces()(BoardTreeLeaf);\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {List as SemanticList} from 'semantic-ui-react';\nimport {BoardId} from \"../../model/Board\";\nimport {Node, sortNodesByType} from \"../../model/Graph\";\nimport {isValidLeaf} from \"../BoardTreeView\";\nimport BoardTreeLeaf from \"./BoardTreeLeaf\";\nimport BoardLayer from \"./BoardLayer\";\n\ninterface OwnProps {\n    leafs: List<Node>;\n    boardId: BoardId;\n    expandLeafs: boolean;\n}\n\ntype BoardTreeProps = OwnProps;\n\nconst BoardTree = (props: BoardTreeProps) => {\n    const leafs = props.leafs.filter(isValidLeaf)\n        .sort(sortNodesByType)\n        .map(ele => <BoardTreeLeaf expand={props.expandLeafs} element={ele} key={ele.getId()} boardId={props.boardId}/>);\n\n    return <SemanticList className=\"elements tree\">{ leafs }</SemanticList>;\n};\n\nexport default BoardTree;\n","import {List} from \"immutable\";\nimport {useEffect, useMemo, useState} from 'react';\nimport * as React from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Button, Icon, List as SemanticList, Ref, Sticky, Transition} from \"semantic-ui-react\";\nimport EditableTextline from \"../../core/components/EditableTextline\";\nimport {useGraph} from \"../hooks/useGraph\";\nimport {Action} from \"../index\";\nimport {BoardId, BoardName} from \"../model/Board\";\nimport {GraphPoint, Node, NodeId, NodeLink, NodeName, NodeTag, NodeType} from \"../model/Graph\";\nimport {makeBoardByIdSelector, makeGetBoard} from \"../selectors/board\";\nimport {makeElementsTreeByBoardIdSelector} from \"../selectors/elementsTree\";\nimport BoardLayer from \"./BoardTreeView/BoardLayer\";\nimport BoardTree from \"./BoardTreeView/BoardTree\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\n\nexport const EDITABLE_LAYER_INPUT_CHAR_SIZE = 9;\nexport const EDITABLE_LAYER_CHAR_SIZE_UNIT = 'px';\nexport const EDITABLE_LAYER_ADDITIONAL_CHAR_PADDING = 0;\n\nexport const isValidLeaf = (ele: Node): boolean => {\n    switch (ele.getType()) {\n        case NodeType.misc:\n        case NodeType.edge:\n        case NodeType.textCard:\n            return false;\n        default:\n            if(ele.getName() === '') {\n                return false;\n            }\n            return true;\n    }\n};\n\ninterface OwnProps {\n\n}\n\ninterface RouteMatchParams {\n    uid: BoardId;\n}\n\ntype BoardTreeViewProps = OwnProps & RouteComponentProps<RouteMatchParams> & WithNamespaces;\n\n\nclass NoContextNode implements Node {\n    private childrenList: List<Node>;\n    private boardName: string;\n\n    constructor (children: List<Node>, boardName: BoardName) {\n        this.childrenList = children;\n        this.boardName = boardName;\n    }\n\n    public getId(): NodeId {\n        return '__NO_CONTEXT__';\n    }\n\n    public getName(): NodeName {\n        return this.boardName;\n    }\n\n    public getDescription(): NodeName {\n        return '';\n    }\n\n    public getType(): NodeType {\n        return NodeType.boundedContext;\n    }\n\n    public getLink(): NodeLink | null {\n        return null;\n    }\n\n    public getTags(): List<NodeTag> {\n        return List();\n    }\n\n    public isLayer(): boolean {\n        return false;\n    }\n\n    public isDefaultLayer(): boolean {\n        return false;\n    }\n\n    public getParent(): Node | null {\n        return null;\n    }\n\n    public children(): List<Node> {\n        return this.childrenList;\n    }\n\n    public setChildren(children: List<Node>): Node {\n        this.childrenList = children;\n        return this;\n    }\n\n    public getSources(): List<Node> {\n        return List();\n    }\n\n    public getTargets(): List<Node> {\n        return List();\n    }\n\n    public getGeometry(): GraphPoint {\n        return {x: 0, y: 0};\n    }\n\n    public getMetadata(): string | null {\n        return null;\n    }\n}\n\nconst BoardTreeView = (props: BoardTreeViewProps) => {\n    const boardId = props.match.params.uid;\n    const getElementsTreeSelector = useMemo(() => makeElementsTreeByBoardIdSelector(boardId), []);\n    const elementsTree = useSelector(getElementsTreeSelector);\n    const dispatch = useDispatch();\n    const [transitionVisible, setTransitionVisible] = useState(true);\n    const board = useSelector(makeBoardByIdSelector(boardId));\n    const [graph] = useGraph();\n    const [visibilityChanges, setVisibilityChanges] = useState(0);\n    const [activeLayerChanges, setActiveLayerChanges] = useState(0);\n    const [showNewLayerInput, setShowNewLayerInput] = useState(false);\n    const [copyIntoLayerPossible, setCopyIntoLayerPossible] = useState(false);\n    const [showCopyToLayerSuccess, setShowCopyToLayerSuccess] = useState<boolean | undefined>(undefined);\n\n    useEffect(() => {\n        graph.onSelectionChanged(hasSelection => setCopyIntoLayerPossible(hasSelection));\n    }, []);\n\n    const layers = elementsTree.getFilteredElementsAsTree().sortBy(l => l.getName());\n\n    const noContextNodes: Node[] = [];\n\n    let contexts = elementsTree.getFilteredElementsAsTree().filter(ele => {\n        if(ele.getType() === NodeType.boundedContext) {\n            return true;\n        }\n\n        if(isValidLeaf(ele)) {\n            noContextNodes.push(ele);\n        }\n\n        return false;\n    });\n\n    if(noContextNodes.length > 0) {\n        const others: List<Node> = List(noContextNodes);\n\n        const noContextNode = new NoContextNode(others, board.name);\n\n        contexts = contexts.push(noContextNode);\n    }\n\n    const handleApplyVisibilityGloballyClick = () => {\n        graph.applyVisibilityGlobally();\n        setVisibilityChanges(visibilityChanges + 1);\n    }\n\n    const handleAddLayerClick = () => {\n        setShowNewLayerInput(true);\n    }\n\n    const handleCancelAddLayer = () => {\n        setShowNewLayerInput(false);\n    }\n\n    const handleAddLayer = (layerName: string) => {\n        graph.addLayer(layerName);\n\n        setShowNewLayerInput(false);\n    }\n\n    const handleLayerVisibilityChanged = (layer: Node, visible: boolean): void => {\n        if(!visible && graph.isActiveLayer(layer)) {\n            let defaultLayerSetAsActive = false;\n\n            layers.forEach(l => {\n                if(l.isDefaultLayer() && graph.isVisible(l)) {\n                    defaultLayerSetAsActive = true;\n                    graph.setAsActiveLayer(l);\n                }\n            })\n\n            if(!defaultLayerSetAsActive) {\n                for (const l of layers.toArray()) {\n                    if(graph.isVisible(l)) {\n                        graph.setAsActiveLayer(l);\n                    }\n                }\n            }\n        }\n\n        setVisibilityChanges(visibilityChanges + 1);\n    }\n\n    const handleCopyToLayerClick = () => {\n        graph.copySelectionToActiveLayer();\n        setShowCopyToLayerSuccess(true);\n\n        window.setTimeout(() => {\n            setShowCopyToLayerSuccess(undefined);\n        }, 2000);\n    }\n\n    return <>\n        <div className=\"item\">\n            <SemanticList className=\"elements tree\">\n                <SemanticList.Item style={{paddingBottom: '0px'}}>\n                    <div className=\"context-menu\">\n                        <Button icon={true}\n                                basic={true}\n                                size=\"medium\"\n                                onClick={handleAddLayerClick}\n                                disabled={showNewLayerInput}\n                                title={props.t('insp.board.layers.add_layer')}\n                        >\n                            <Icon name=\"plus\" />\n                        </Button>\n                        <Button icon={true}\n                                basic={true}\n                                size={\"medium\"}\n                                disabled={!copyIntoLayerPossible}\n                                onClick={handleCopyToLayerClick}\n                                title={props.t('insp.board.layers.insert_selection')}\n                        >\n                            <Icon name=\"window restore outline\" />\n                        </Button>\n                        {/*User visibility is deactivated. For more info see MxGraphWrapper::setUserVisible */}\n                        {/*<Transition visible={visibilityChanges % 2 === 0} animation=\"pulse\" duration={1000}>\n                            <Button icon={true}\n                                    basic={true}\n                                    size=\"medium\"\n                                    floated=\"right\"\n                                    disabled={!graph.hasUserLevelVisibilityChanges()}\n                                    onClick={handleApplyVisibilityGloballyClick}\n                                    title={props.t('insp.board.layers.set_global_visibility')}\n                            >\n                                <Icon name=\"share square\"/>\n                            </Button>\n                        </Transition>*/}\n                    </div>\n                </SemanticList.Item>\n                {showNewLayerInput && <SemanticList.Item className=\"add-layer\">\n                    <Button icon={true} basic={true} size=\"medium\">\n                        <Icon name=\"folder outline\" />\n                    </Button>\n                    <EditableTextline\n                        text={''}\n                        charSize={EDITABLE_LAYER_INPUT_CHAR_SIZE}\n                        widthUnit={EDITABLE_LAYER_CHAR_SIZE_UNIT}\n                        padding={EDITABLE_LAYER_ADDITIONAL_CHAR_PADDING}\n                        minWidth={120}\n                        required={true}\n                        onTextChanged={handleAddLayer}\n                        focus={true}\n                        onCancel={handleCancelAddLayer}\n                        placeholder={'Layer name'}\n                    />\n                    </SemanticList.Item>\n                }\n                {\n                    layers.map(layer => <BoardLayer\n                        key={layer.getId()}\n                        name={layer.getName() === '' ? 'Board' : layer.getName()}\n                        boardId={boardId}\n                        layer={layer}\n                        deletable={!layer.isDefaultLayer()}\n                        active={graph.isActiveLayer(layer)}\n                        onLayerVisibilityChanged={(visible: boolean) => handleLayerVisibilityChanged(layer, visible)}\n                        onActiveLayerChanged={() => setActiveLayerChanges(activeLayerChanges + 1)}\n                        copyToLayerSuccess={showCopyToLayerSuccess}\n                        expand={(elementsTree.isFiltered() && layer.children().count() > 0) || layer.isDefaultLayer()}>\n                        {layer.children().count() > 0\n                            ? <BoardTree leafs={layer.children()} boardId={boardId} expandLeafs={elementsTree.isFiltered()} />\n                            : <SemanticList><SemanticList.Item><span style={{color: '#747474'}}>(empty)</span></SemanticList.Item></SemanticList>\n                        }\n                    </BoardLayer>)\n                }\n            </SemanticList>\n        </div>\n    </>\n};\n\nexport default withNamespaces()(withRouter(BoardTreeView));\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Route} from \"react-router\";\nimport BoardTreeView from \"../../../../InspectioBoards/components/BoardTreeView\";\nimport Feedback from \"../../../../Layout/Sidebar/Feedback\";\nimport Logo from \"../../../../Layout/Sidebar/Logo\";\nimport Search from \"../../../../Layout/Sidebar/Search\";\nimport Upgrade from \"../../../../Layout/Sidebar/Upgrade\";\nimport * as Routes from \"../../../../routes\";\n\ninterface OwnProps {\n    collapsed: boolean;\n}\n\ntype WorkspaceSidebarProps = OwnProps & WithNamespaces;\n\nconst WorkspaceSidebar = (props: WorkspaceSidebarProps) => {\n    return <>\n        {!props.collapsed && <Logo collapsed={props.collapsed} />}\n        {!props.collapsed && <Upgrade />}\n        <div className=\"item\">\n            <div id=\"boardSidebarContainer\" />\n        </div>\n        {!props.collapsed && <>\n            <Search />\n            <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardTreeView} />\n            <Feedback/>\n        </>}\n    </>;\n};\n\nexport default withNamespaces()(WorkspaceSidebar);\n","import * as React from 'react';\nimport {useDispatch} from \"react-redux\";\nimport {Button} from \"semantic-ui-react\";\nimport {setSidebarWidth, toggleSidebarCollapsed} from \"../actions/commands\";\n\ninterface OwnProps {\n    collapsed: boolean;\n}\n\ntype CollapseToggleProps = OwnProps;\n\nconst CollapseToggle = (props: CollapseToggleProps) => {\n    const dispatch = useDispatch();\n    const handleClick = () => {\n        const newCollapsed = !props.collapsed;\n        dispatch(toggleSidebarCollapsed(newCollapsed));\n        dispatch(setSidebarWidth(newCollapsed? 85 : 250));\n    };\n\n    const iconClass = props.collapsed? 'angle double right icon' : 'angle double left icon';\n\n    return <span className=\"collaps-handle\" onClick={handleClick} style={\n        {}\n    }><i className={ iconClass } /></span>\n};\n\nexport default CollapseToggle;\n","import * as React from \"react\";\nimport {useState} from \"react\";\nimport {useRef} from \"react\";\nimport {ChangeEvent} from \"react\";\nimport {FormEvent} from \"react\";\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Button, Input, Message, Modal, Transition} from \"semantic-ui-react\";\nimport * as uuid from 'uuid';\nimport * as Action from \"../../InspectioTeams/actions\";\nimport * as UserSelector from \"../../User/selectors/currentUser\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ntype AddTeamProps = WithNamespaces & RouteComponentProps;\n\nconst AddTeam = (props: AddTeamProps) => {\n\n    const [visible, setVisible] = useState(false);\n    const [teamName, setTeamName] = useState('');\n    const [hasError, setHasError] = useState(false);\n\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n    const inputEl = useRef<Input>(null);\n    const dispatch = useDispatch();\n\n    const handleClick = () => {\n        setVisible(!visible);\n\n        if (!visible) {\n            window.setTimeout(() => {\n                inputEl.current!.focus();\n            }, 200);\n        }\n    };\n\n    const handleSubmit = (e: FormEvent) => {\n        e.preventDefault();\n\n        if (teamName === '') {\n            setHasError(true);\n            return;\n        }\n\n        dispatch(Action.Command.addTeam(uuid.v4(), teamName, activeOrganization? activeOrganization.uid : null));\n        setTeamName('');\n    };\n\n    const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n        setTeamName(e.target.value);\n        setHasError(e.target.value === '');\n    };\n\n    return (\n        <div className=\"item\">            \n            <Button className=\"large basic\" onClick={handleClick}><i className=\"plus icon\" /> Add&nbsp;Team</Button>\n            <Transition animation=\"fade down\" visible={visible} duration={200} >\n                <div className=\"ui icon input\">\n                    <form onSubmit={handleSubmit}>\n                        <Input\n                            placeholder={props.t(\"insp.team.team_name\") + ' ...'}\n                            fluid={true}\n                            ref={inputEl}\n                            error={hasError}\n                            value={teamName}\n                            onChange={handleChange}\n                        />\n                    </form>\n                </div>\n            </Transition>\n        </div>\n    );\n};\n\nexport default withNamespaces()(withRouter(AddTeam));\n","import * as React from \"react\";\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router\";\nimport {NavHashLink} from \"react-router-hash-link\";\nimport {Confirm, Icon} from \"semantic-ui-react\";\nimport * as Action from \"../../InspectioTeams/actions\";\nimport InviteUserToTeamModal from \"../../InspectioTeams/components/InviteUserToTeamModal\";\nimport {Team} from \"../../InspectioTeams/model\";\nimport * as Route from \"../../routes\";\nimport {IioUserInfo} from \"../../User/model/IioUserInfo\";\nimport {makeIioFilteredUserListSelector, makeIioUserListSelector} from \"../../User/selectors/iioUserInfo\";\n\ninterface OwnProps {\n    team: Team.Team\n}\n\ntype TeamListItemProps = WithNamespaces & RouteComponentProps & OwnProps;\n\nconst TeamListItem = (props: TeamListItemProps) => {\n    const [visible, setVisible] = useState(false);\n    const [iconUp, setIconUp] = useState(false);\n    const [showAddUserModal, setShowAddUserModal] = useState<boolean>(false);\n    const [showRemoveMemberConfirm, setShowRemoveMemberConfirm] = useState<boolean>(false);\n    const [memberToRemove, setMemberToRemove] = useState<string|undefined>(undefined);\n\n    const users = useSelector(makeIioFilteredUserListSelector(props.team.members));\n    const dispatch = useDispatch();\n\n    const angleIcon = iconUp ? 'angle up icon' : 'angle down icon';\n    const contentClass = 'ui labels ' + (visible ? 'slidedown' : 'slideup');\n\n    const getUsernameByUserId = (userId: string) => {\n        const user = users.find((userInfo: IioUserInfo) => userInfo.userId === userId);\n        return user ? user.username : ''\n    };\n\n    const handleVisibleClick = () => {\n        setVisible(!visible);\n\n        if (iconUp) {\n            window.setTimeout(() => {\n                setIconUp(false);\n            }, 150);\n        } else {\n            setIconUp(true);\n        }\n    };\n\n    const openAddUserModal = (event: React.MouseEvent) => {\n        stopPropagation(event);\n        setShowAddUserModal(true);\n    };\n\n    const closeAddUserModal = () => {\n        setShowAddUserModal(false);\n    };\n\n    const stopPropagation = (event: React.MouseEvent) => {\n        event.stopPropagation();\n    };\n\n    const removeMemberFromTeam = () => {\n        if (!memberToRemove) {\n            return;\n        }\n\n        dispatch(Action.Command.removeMemberFromTeam(props.team.uid, memberToRemove));\n        setShowRemoveMemberConfirm(false);\n    };\n\n    const handleScrollToTeam = (el: HTMLHeadElement) => {\n        const headerOffset = 60;\n        const bodyRect = document.body.getBoundingClientRect().top;\n        const elementRect = el.getBoundingClientRect().top;\n        const elementPosition = elementRect - bodyRect;\n        const offsetPosition = elementPosition - headerOffset;\n        window.scrollTo({behavior: \"smooth\", top: offsetPosition})\n    }\n\n    return (\n        <div className=\"ui item\"  style={{cursor: \"pointer\"}}>\n            <Icon className={angleIcon} onClick={handleVisibleClick} />\n            <NavHashLink scroll={handleScrollToTeam} to={Route.teamOverview + '#' + props.team.uid} className=\"team-list team\">{props.team.name}</NavHashLink>\n            <Icon className=\"eye icon\" style={{visibility: \"hidden\"}}/>\n            <div className={contentClass}>\n                <a className=\"ui blue basic label\" onClick={openAddUserModal}>\n                    <i className=\"white plus icon\" />\n                    {props.t('insp.team.add_user')}\n                </a>\n                {props.team.members.filter(m => m !== props.team.ownerId).map(member => (\n                    <div key={member} className=\"ui basic label\">\n                        {getUsernameByUserId(member)}\n                        <i className=\"red delete icon\" onClick={(event: React.MouseEvent) => {\n                            stopPropagation(event);\n                            setMemberToRemove(member);\n                            setShowRemoveMemberConfirm(true);\n                        }} />\n                    </div>\n                ))}\n            </div>\n            <div onClick={stopPropagation}>\n                <InviteUserToTeamModal\n                    team={props.team}\n                    open={showAddUserModal}\n                    onClose={closeAddUserModal}\n                />\n                <Confirm\n                    open={showRemoveMemberConfirm}\n                    header={props.t('insp.team.remove_user_confirm_title')}\n                    content={props.t(\n                        'insp.team.remove_user_confirm_text',\n                        { user_name: memberToRemove ? getUsernameByUserId(memberToRemove) : '' }\n                    )}\n                    confirmButton={props.t('insp.team.remove_user_confirm_button')}\n                    onCancel={() => setShowRemoveMemberConfirm(false)}\n                    onConfirm={removeMemberFromTeam}\n                />\n            </div>\n        </div>\n    );\n};\n\nexport default withNamespaces()(withRouter(TeamListItem));\n","import * as React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {makeTeamListSelector, teamListSelector} from \"../../InspectioTeams/selectors/selectTeam\";\nimport TeamListItem from \"./TeamListItem\";\n\ninterface TeamListProps {\n\n}\n\nconst TeamList = (props: TeamListProps) => {\n    const teamList = useSelector(makeTeamListSelector(true));\n\n    return (\n        <>\n            {teamList.sortBy(team => team.name).sortBy(team => !team.isNew).map(team => <TeamListItem key={team.uid} team={team} />)}\n        </>\n    );\n};\n\nexport default TeamList;\n","import * as React from 'react';\nimport {useSelector} from \"react-redux\";\nimport {NavLink, RouteComponentProps, withRouter} from \"react-router-dom\";\nimport {Icon} from \"semantic-ui-react\";\nimport {makeTeamListSelector} from \"../../InspectioTeams/selectors/selectTeam\";\nimport * as Routes from \"../../routes\";\n\ninterface OwnProps {\n\n}\n\ntype TeamOverviewProps = OwnProps & RouteComponentProps;\n\nconst TeamOverview = (props: TeamOverviewProps) => {\n    const teamList = useSelector(makeTeamListSelector(false));\n\n    let badgeClasses = \"ui small label\";\n\n    if(props.location.pathname === Routes.teamOverview) {\n        badgeClasses += \" teal\";\n    }\n\n    return (\n        <NavLink exact={true} className=\"item\" activeClassName=\"active\" to={Routes.teamOverview}>\n            <Icon className=\"ui group icon\"/>\n            <div className={badgeClasses}>{teamList.count()}</div>\n            Teams\n        </NavLink>\n    );\n};\n\nexport default withRouter(TeamOverview);\n","import * as React from 'react';\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Dropdown, DropdownItem, DropdownMenu, Icon, Popup} from \"semantic-ui-react\";\nimport {OrganizationId} from \"../../Organization/model/Organization\";\nimport {makeUserOrganizationInfoListSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\nimport * as Action from \"../actions\";\nimport {makeGetCurrentUser} from \"../selectors/currentUser\";\nimport {useEffect, useState} from \"react\";\nimport {useOnBodyClick} from \"../../core/hooks/useOnBodyClick\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {keyUpdateViewed, makeUserSettingSelector, makeUserSettingsLoadedSelector} from \"../selectors/userSettings\";\nimport {upsertUserSetting} from \"../actions/commands\";\n\ninterface OwnProps {\n\n}\n\ntype SideMenuOrganizationSwitchProps = OwnProps & WithNamespaces;\n\nconst SideMenuOrganizationSwitch = (props: SideMenuOrganizationSwitchProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organizations = useSelector(makeUserOrganizationInfoListSelector(currentUser.uid));\n    const [open, setOpen] = useState(false);\n    const [arrowClick, setArrowClick] = useState(false);\n    const [popupOpen, setPopupOpen] = useState(false);\n    const settingsLoaded = useSelector(makeUserSettingsLoadedSelector());\n    const showHint = useSelector(makeUserSettingSelector('show_orga_hint', false));\n\n    useOnBodyClick(() => {\n        setArrowClick(false);\n    })\n\n    useEffect(() => {\n        if(showHint) {\n            setPopupOpen(true);\n        }\n    }, [showHint, settingsLoaded])\n\n    const dispatch = useDispatch();\n\n    const handleOrganizationClick = (organizationId: OrganizationId | null) => {\n        dispatch(Action.Command.switchActiveOrganization(organizationId));\n        setOpen(false);\n    }\n\n    let activeOrgaName = 'My Workspace';\n\n    let hasImplicitOrganization = false;\n    let items = organizations.map(orga => {\n        if(orga.ownOrganization && !orga.explicitOrganization) {\n            hasImplicitOrganization = true;\n        }\n\n        const orgaName = orga.explicitOrganization? orga.organizationName : orga.ownOrganization? 'My Workspace' : orga.organizationName;\n\n        const isActive = currentUser.activeOrganization === orga.organizationId;\n\n        if(isActive) {\n            activeOrgaName = orgaName;\n        }\n\n        return <DropdownItem\n            active={isActive}\n            onClick={() => !isActive && handleOrganizationClick(orga.organizationId)}\n            key={orga.organizationId}>{orgaName}</DropdownItem>;\n    })\n\n    if(!hasImplicitOrganization) {\n        items = items.push(<DropdownItem\n            active={currentUser.activeOrganization === null}\n            onClick={() => currentUser.activeOrganization !== null && handleOrganizationClick(null)}\n            key=\"__implicit__own_orga__\"\n            >My Workspace</DropdownItem>)\n    }\n\n    const angleIcon = open ? 'angle up' : 'angle down';\n\n    const handleClick = (e: React.SyntheticEvent) => {\n        e.stopPropagation();\n        setOpen(!open);\n        setArrowClick(true);\n    }\n\n    const handleHintClick = () => {\n        setPopupOpen(false);\n        dispatch(upsertUserSetting('show_orga_hint', false));\n    }\n\n    return <Popup\n        open={popupOpen}\n        content={<>\n            <p><strong>{props.t('insp.organisation.switch_hint_header')}</strong></p>\n            <p>{props.t('insp.organisation.switch_hint')}</p>\n            <p><span style={{\"color\": \"#32c0e7\", \"cursor\": \"pointer\", float: \"right\"}} onClick={handleHintClick}>{props.t('insp.organisation.switch_hint_ok')}</span></p>\n        </>}\n        position=\"right center\"\n        trigger={ <div className=\"organization switch\"><Icon name={angleIcon} style={{cursor: \"pointer\"}} onClick={handleClick} /><Dropdown\n            icon={false}\n            open={open}\n            onOpen={() => setOpen(true)}\n            onClose={() => {if(!arrowClick) {\n                setOpen(false)\n            }}}\n            text={activeOrgaName}>\n            <DropdownMenu>\n                {items}\n            </DropdownMenu>\n        </Dropdown></div>\n        } />\n};\n\nexport default withNamespaces()(SideMenuOrganizationSwitch);\n","import * as React from 'react';\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {NavLink} from \"react-router-dom\";\nimport {Button, Dropdown} from \"semantic-ui-react\";\nimport * as Routes from \"../../routes\";\nimport SideMenuOrganizationSwitch from \"../../User/components/SideMenuOrganizationSwitch\";\nimport {useSelector} from \"react-redux\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ninterface OwnProps {\n\n}\n\ntype OrganizationProps = OwnProps & RouteComponentProps;\n\nconst Organization = (props: OrganizationProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n    return <div className=\"item\">\n        {activeOrganization && activeOrganization.userIsAdmin && <NavLink to={Routes.organizationOverview}><Button className=\"large basic\"><i\n            className=\"building icon\"/> Organization</Button></NavLink>}\n        {(!activeOrganization || !activeOrganization.userIsAdmin) && <Button className=\"large basic organization\" disabled={true}>\n            <i className=\"building icon\"/> Organization\n        </Button>}\n        <SideMenuOrganizationSwitch />\n    </div>\n};\n\nexport default withRouter(Organization);\n","import * as React from 'react';\n\ninterface OwnProps {\n\n}\n\ntype CopyrightProps = OwnProps;\n\nconst Copyright = (props: CopyrightProps) => {\n    return <div className=\"bottom aligned item\">\n        <p className=\"copyright\">&copy; 2021 <a href=\"http://prooph-software.de\">prooph software GmbH</a></p>\n    </div>\n};\n\nexport default Copyright;\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Route} from \"react-router\";\nimport BoardTreeView from \"../../InspectioBoards/components/BoardTreeView\";\nimport * as Routes from \"../../routes\";\nimport {makeGetCurrentBoardQuota} from \"../../User/selectors/currentUser\";\nimport AddBoard from \"./AddBoard\";\nimport AddTeam from \"./AddTeam\";\nimport BoardList from \"./BoardList\";\nimport BoardOverview from \"./BoardOverview\";\nimport Feedback from \"./Feedback\";\nimport ImportBoard from \"./ImportBoard\";\nimport Logo from \"./Logo\";\nimport Search from \"./Search\";\nimport TeamList from \"./TeamList\";\nimport TeamOverview from \"./TeamOverview\";\nimport Updates from \"./Updates\";\nimport Upgrade from \"./Upgrade\";\nimport Organization from \"./Organization\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../../Organization/selectors/selectUserOrganizationInfo\";\n\ninterface OwnProps {\n\n}\n\ntype OverviewSidebarProps = OwnProps & WithNamespaces;\n\nconst OverviewSidebar = (props: OverviewSidebarProps) => {\n\n    const boardQuota: number = useSelector(makeGetCurrentBoardQuota());\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n    return <>\n        <Logo collapsed={false} />\n        <Organization />\n        <Search />\n        <ImportBoard />\n        <AddBoard />\n        <BoardOverview />\n        <BoardList />\n        {boardQuota < 2 && activeOrganization && activeOrganization.explicitOrganization && !activeOrganization.userIsGuest && (\n            <div className=\"item\">\n                <div className=\"ui icon negative message\">\n                    <i className=\"warning icon\" />\n                    <div className=\"content\">\n                        <div className=\"header\">\n                            {boardQuota === 0\n                                ? props.t('insp.sidebar.no_boards_left_warning')\n                                : props.t('insp.sidebar.boards_left_warning', { board_count: boardQuota })\n                            }\n                        </div>\n                        <p>{props.t('insp.sidebar.boards_left_warning_upgrade')}</p>\n                    </div>\n                </div>\n            </div>\n        )}\n        <AddTeam />\n        <TeamOverview />\n        <TeamList />\n        <Updates />\n        <Feedback/>\n    </>;\n};\n\nexport default withNamespaces()(OverviewSidebar);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {Route} from \"react-router\";\nimport BoardTreeView from \"../../InspectioBoards/components/BoardTreeView\";\nimport * as Routes from \"../../routes\";\nimport Feedback from \"./Feedback\";\nimport Logo from \"./Logo\";\nimport Organization from \"./Organization\";\nimport Search from \"./Search\";\n\ninterface OwnProps {\n    collapsed: boolean;\n}\n\ntype WorkspaceSidebarProps = OwnProps & WithNamespaces;\n\nconst WorkspaceSidebar = (props: WorkspaceSidebarProps) => {\n    return <>\n        {!props.collapsed && <Logo collapsed={props.collapsed} />}\n        {!props.collapsed && <Organization />}\n        <div className=\"item\">\n            <div id=\"boardSidebarContainer\" />\n        </div>\n        {!props.collapsed && <>\n            <Search />\n            <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardTreeView} />\n            <Feedback/>\n        </>}\n    </>;\n};\n\nexport default withNamespaces()(WorkspaceSidebar);\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport Draggable, {DraggableData, DraggableEvent} from 'react-draggable';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport * as Routes from \"../routes\";\nimport StandaloneOverviewSidebar from \"../standalone/components/Layout/Sidebar/OverviewSidebar\"\nimport StandaloneWorkspaceSidebar from \"../standalone/components/Layout/Sidebar/WorkspaceSidebar\"\nimport {isStandalone} from \"../standalone/util\";\nimport {setSidebarWidth, toggleSidebarCollapsed} from \"./actions/commands\";\nimport {makeGetSidebarSelector} from \"./selectors/sidebar\";\nimport CollapseToggle from \"./Sidebar/CollapseToggle\";\nimport OverviewSidebar from \"./Sidebar/OverviewSidebar\";\nimport WorkspaceSidebar from \"./Sidebar/WorkspaceSidebar\";\nimport Copyright from \"./Sidebar/Copyright\";\n\ntype SidebarProps =  WithNamespaces & RouteComponentProps;\n\nconst Sidebar = (props: SidebarProps) => {\n    const isBoardWorkspace = Routes.isInspectioBoardWorkspace(props.location.pathname);\n    const state = useSelector(makeGetSidebarSelector());\n    const dispatch = useDispatch();\n    const [collabsableLeft, setCollabsableLeft] = useState(state.width);\n    const [isDragging, setIsDragging] = useState(false);\n\n    useEffect(() => {\n        if(!isDragging) {\n            setCollabsableLeft(state.width);\n        }\n    }, [state.width]);\n\n    const collapsible = isBoardWorkspace ? \" collapsible\" : \"\";\n    const collapsed = (isBoardWorkspace && state.collapsed)? \" collapsed\" : \"\";\n\n    const handleDragging = (e: DraggableEvent, data: DraggableData) => {\n        if(!isDragging) {\n            setIsDragging(true);\n        }\n\n        const newWidth = state.width + data.deltaX;\n\n        dispatch(setSidebarWidth(newWidth));\n\n        if(state.width <= 230 && !state.collapsed) {\n            dispatch(toggleSidebarCollapsed(true));\n        }\n\n        if(state.width > 230 && state.collapsed) {\n            dispatch(toggleSidebarCollapsed(false));\n        }\n    }\n\n    const handleDragStop = (e: DraggableEvent, data: DraggableData) => {\n        setIsDragging(false);\n        setCollabsableLeft(state.width);\n    }\n\n    return (\n        <>\n            <div className={\"ui left fixed large vertical menu leftbar\"+collapsed} style={{overflowY:\"scroll\", width: (isBoardWorkspace? state.width : 250) + \"px\"}}>\n                {!isBoardWorkspace && !isStandalone() && <OverviewSidebar />}\n                {!isBoardWorkspace && isStandalone() && <StandaloneOverviewSidebar />}\n                {isBoardWorkspace && !isStandalone() && <WorkspaceSidebar collapsed={state.collapsed} />}\n                {isBoardWorkspace && isStandalone() && <StandaloneWorkspaceSidebar collapsed={state.collapsed} />}\n                <Copyright />\n            </div>\n            <Draggable\n                axis={isBoardWorkspace? \"x\" : \"none\"}\n                onDrag={handleDragging}\n                onStop={handleDragStop}\n                position={{x: 0, y: 0}}\n            >\n                <div className={\"collapsebar\"+collapsible+collapsed}\n                     style={{\n                         left: (isBoardWorkspace? collabsableLeft : 250) + 'px',\n                         cursor: (isBoardWorkspace? 'grabbing' : 'inherit')\n                     }}\n                >{isBoardWorkspace && <CollapseToggle collapsed={state.collapsed} />}</div>\n            </Draggable>\n        </>\n    );\n};\n\nexport default withNamespaces()(withRouter(Sidebar));\n","import {List, Record} from \"immutable\";\nimport {ApplicationState} from \"../../reducer\";\nimport {createSelector} from \"reselect\";\nimport {MODULE} from \"../index\";\nimport {BoardId} from \"../model/Board\";\nimport {ActiveGraphElement} from \"../reducers/applyActiveGraphElementActions\";\n\nexport const activeGraphElementsSelector = (state: Record<ApplicationState>, props: any): Map<string, ActiveGraphElement> =>\n    state.getIn([MODULE, 'activeGraphElements']);\n\nexport const makeActiveGraphElementSelector = (boardId: BoardId): (state: Record<ApplicationState>, props?: any) => ActiveGraphElement|null => {\n    return createSelector(\n        [activeGraphElementsSelector],\n        (activeGraphElements): ActiveGraphElement|null =>  {\n            return activeGraphElements.has(boardId) ? activeGraphElements.get(boardId)! : null;\n        }\n    )\n};\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {Divider, List as SemanticList} from \"semantic-ui-react\";\nimport * as Routes from \"../../../routes\";\nimport {BoardId} from \"../../model/Board\";\nimport {Node} from \"../../model/Graph\";\nimport CellIcon from \"../CellIcon\";\nimport {Link} from \"react-router-dom\";\nimport {useState} from \"react\";\nimport {RANGE_ELEMENT_CONNECTIONS} from \"../MxGraphBoard/clickRange\";\nimport MaxLengthLabel from \"../MaxLengthLabel\";\n\ninterface OwnProps {\n    boardId: BoardId,\n    sources: List<Node>,\n    targets: List<Node>,\n}\n\ntype ElementConnectionsProps = OwnProps & WithNamespaces;\n\nconst ElementConnections = (props: ElementConnectionsProps) => {\n    const [clicks, setClicks] = useState(RANGE_ELEMENT_CONNECTIONS);\n\n    const links = props.sources.map(source => {\n        return <SemanticList.Item key={source.getId()}\n                                  style={{borderRadius:'0', color:'#424242'}}\n                                  title=\"Source\"\n                                  as={ Link }\n                                  to={{pathname: Routes.compileInspectioBoardWorkspace(props.boardId), search: `?cells=${source.getId()}&select=1&clicks=${clicks}`}}\n                                  onClick={() => setClicks(clicks + 1)}  >\n            <SemanticList.Icon name=\"arrow left\" />\n            <SemanticList.Content><CellIcon cellType={source.getType()} /><MaxLengthLabel label={source.getName()} maxLength={30} /></SemanticList.Content>\n        </SemanticList.Item>;\n    }).toArray();\n\n    props.targets.forEach(target => {\n        links.push(<SemanticList.Item key={target.getId()}\n                                      style={{borderRadius:'0', color:'#424242'}}\n                                      title=\"Target\"\n                                      as={ Link }\n                                      to={{pathname: Routes.compileInspectioBoardWorkspace(props.boardId), search: `?cells=${target.getId()}&select=1&clicks=${clicks}`}}\n                                      onClick={() => setClicks(clicks + 1)}  >\n            <SemanticList.Icon name=\"arrow right\" />\n            <SemanticList.Content><CellIcon cellType={target.getType()} /><MaxLengthLabel label={target.getName()} maxLength={30} /></SemanticList.Content>\n        </SemanticList.Item>);\n    })\n\n    return <>\n        <Divider horizontal={true} content={'Connections'} />\n        <SemanticList>{links}</SemanticList>\n        </>;\n};\n\nexport default withNamespaces()(ElementConnections);\n","export const RANGE_ELEMENT_CONNECTIONS = 5000;\nexport const RANGE_BOARD_ELEMENT_DETAILS = 6000;\n","import {List} from \"immutable\";\nimport React, {useEffect, useImperativeHandle, useRef, useState} from \"react\";\nimport {Link} from \"react-router-dom\";\nimport {Divider} from \"semantic-ui-react\";\nimport CodeEditor from \"../../../core/components/CodeEditor/CodeEditor\";\nimport * as Routes from \"../../../routes\";\nimport {BoardId} from \"../../model/Board\";\nimport {Node, NodeType} from \"../../model/Graph\";\nimport {HistoryCellType} from \"../../model/HistoryEntry\";\nimport {StickyTemplate} from \"../../model/StickyTemplate\";\nimport {ActiveGraphElement} from \"../../reducers/applyActiveGraphElementActions\";\nimport CellIcon from \"../CellIcon\";\nimport {RANGE_BOARD_ELEMENT_DETAILS} from \"../MxGraphBoard/clickRange\";\nimport ElementConnections from \"./ElementConnections\";\n\nexport interface BoardElementMetadataRef {\n    retrievePayload: () => string;\n}\n\ninterface OwnProps {\n    focusEditor: boolean;\n    boardId: BoardId;\n    activeNodeSources: List<Node>;\n    activeNodeTargets: List<Node>;\n    activeGraphElement: ActiveGraphElement;\n    boardStickyTemplate: StickyTemplate;\n    onTriggerCody: () => void;\n    onUpdateMetadata: (value: string) => void;\n    onClose?: () => void;\n    t: any; // Workaround for withNamespaces HOC not working with forwardRef\n}\n\ntype BoardElementMetadataProps = OwnProps;\n\nconst BoardElementMetadata = (props: BoardElementMetadataProps, ref: React.Ref<BoardElementMetadataRef>) => {\n    const [clicks, setClicks] = useState(RANGE_BOARD_ELEMENT_DETAILS);\n    const codeEditorRef = useRef<CodeEditor|null>(null);\n\n    const isNodeWithMetadata = props.activeGraphElement.type !== NodeType.textCard\n        && props.activeGraphElement.type !== NodeType.edge;\n\n    useImperativeHandle<BoardElementMetadataRef, BoardElementMetadataRef>(ref, () => ({\n        retrievePayload: (): string => codeEditorRef.current!.retrievePayload(),\n    }));\n\n    useEffect(() => {\n        if (!codeEditorRef.current) {\n            return;\n        }\n\n        codeEditorRef.current!.addKeyDownHandler((e: KeyboardEvent) => {\n            if (e.ctrlKey && (e.code === 'KeyS' || e.code === 'KeyG')) {\n                e.preventDefault();\n                props.onTriggerCody();\n            }\n\n            if(e.code === 'Escape' && props.onClose) {\n                props.onUpdateMetadata(codeEditorRef.current!.retrievePayload());\n                e.preventDefault();\n                e.stopPropagation();\n                props.onClose();\n            }\n        });\n    }, []);\n\n    useEffect(() => {\n        if (!isNodeWithMetadata || !codeEditorRef.current) {\n            return;\n        }\n        codeEditorRef.current!.initializeModel({\n            fileId: `graph_element_${props.activeGraphElement.id}.json`,\n            language: props.boardStickyTemplate.templateType,\n            value: props.activeGraphElement.metadata || props.boardStickyTemplate.template || '{\\n  \\n}\\n',\n            schema: props.boardStickyTemplate.templateSchema || undefined,\n            onChange: e => {\n                if (codeEditorRef.current) {\n                    props.onUpdateMetadata(codeEditorRef.current.retrievePayload());\n                }\n            },\n        });\n    }, [props.activeGraphElement])\n\n    useEffect(() => {\n        if(codeEditorRef.current && props.focusEditor) {\n            codeEditorRef.current!.focus();\n        }\n    }, [props.focusEditor]);\n\n    return (<>\n        <Link\n            style={{borderRadius: '0', color: '#424242'}}\n            onClick={() => setClicks(clicks + 1)}\n            to={{pathname: Routes.compileInspectioBoardWorkspace(props.boardId), search: `?cells=${props.activeGraphElement.id}&clicks=${clicks}`}}>\n            <CellIcon cellType={props.activeGraphElement.type as HistoryCellType} /> <strong>{props.t('app.stickyTypes.' + props.activeGraphElement.type)}</strong>\n        </Link>\n        {(props.activeNodeSources.size > 0 || props.activeNodeTargets.size > 0) && (\n            <ElementConnections\n                boardId={props.boardId}\n                sources={props.activeNodeSources}\n                targets={props.activeNodeTargets}\n            />\n        )}\n        {isNodeWithMetadata && (<>\n            <Divider horizontal={true} content={'Metadata'} />\n            <CodeEditor\n                ref={codeEditorRef}\n                options={{\n                    fontSize: 12,\n                    folding: false,\n                    glyphMargin: false,\n                    lineNumbers: 'off',\n                    lineDecorationsWidth: 3,\n                    minimap: {\n                        enabled: false\n                    },\n                    formatOnPaste: true,\n                    scrollBeyondLastLine: false,\n                    automaticLayout: true,\n                    scrollbar: {\n                        alwaysConsumeMouseWheel: false\n                    }\n                }}\n                style={{ height: '500px' }}\n            />\n        </>)}\n    </>);\n}\n\nexport default React.forwardRef(BoardElementMetadata);\n","import {List} from \"immutable\";\nimport {SyntheticEvent, useEffect, useMemo, useRef, useState} from \"react\";\nimport * as React from \"react\";\nimport Draggable, {DraggableData, DraggableEvent} from 'react-draggable';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Card, Icon, Message} from \"semantic-ui-react\";\nimport {setRightSidebarWidth} from \"../../Layout/actions/commands\";\nimport {makeGetSidebarSelector} from \"../../Layout/selectors/sidebar\";\nimport * as Action from \"../actions\";\nimport {toggleElementDetails} from \"../actions/commands\";\nimport {useGraph} from \"../hooks/useGraph\";\nimport {BoardId} from \"../model/Board\";\nimport {Node, NodeType} from \"../model/Graph\";\nimport {makeActiveGraphElementSelector} from \"../selectors/activeGraphElement\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport {makeElementsTreeByBoardIdSelector} from \"../selectors/elementsTree\";\nimport {makeBoardStickyTemplateMapSelector} from \"../selectors/StickyTemplate\";\nimport BoardElementMetadata, {BoardElementMetadataRef} from \"./BoardElementDetails/BoardElementMetadata\";\nimport {activeGraphElementChanged} from \"../actions/events\";\nimport {act} from \"react-dom/test-utils\";\n\ninterface ElementDetailsRouteMatchParams {\n    uid: BoardId;\n}\n\ntype BoardElementDetailsProps =  WithNamespaces & RouteComponentProps<ElementDetailsRouteMatchParams>;\n\nconst BoardElementDetails = (props: BoardElementDetailsProps) => {\n\n    const dispatch = useDispatch();\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const [showSimilarElements, setShowSimilarElements] = useState<boolean>(false);\n    const getBoardByIdSelector = useMemo(() => makeBoardByIdSelector(props.match.params.uid), []);\n    const board = useSelector(getBoardByIdSelector);\n    const activeGraphElement = useSelector(makeActiveGraphElementSelector(props.match.params.uid));\n    const visible =  (board && board.shouldShowElementDetails) || false;\n    const boardStickyTemplates = useSelector(makeBoardStickyTemplateMapSelector(props.match.params.uid));\n    const elementsTree = useSelector(makeElementsTreeByBoardIdSelector(props.match.params.uid));\n    const [isDragging, setIsDragging] = useState(false);\n    const [collabsableRight, setCollabsableRight] = useState(sidebar.rightSidebarWidth);\n    const [graph] = useGraph();\n    const boardElementMetadataRef = useRef<BoardElementMetadataRef|null>(null);\n\n    useEffect(() => {\n        if(!isDragging) {\n            setCollabsableRight(sidebar.rightSidebarWidth);\n        }\n    }, [sidebar.rightSidebarWidth]);\n\n    useEffect(() => {\n        dispatch(Action.Query.fetchBoardStickyTemplates(props.match.params.uid))\n    }, [props.match.params.uid])\n\n    useEffect(() => {\n        if(board && board.shouldFocusMetadataEditor) {\n            dispatch(Action.Command.toggleElementDetails(props.match.params.uid, visible, false));\n        }\n    }, [board && board.shouldFocusMetadataEditor])\n\n\n    let similarElements = List<string>();\n    let activeNodeSources: List<Node> = List();\n    let activeNodeTargets: List<Node> = List();\n\n    const handleDragging = (e: DraggableEvent, data: DraggableData) => {\n        if(!isDragging) {\n            setIsDragging(true);\n        }\n\n        const newWidth = sidebar.rightSidebarWidth - data.deltaX;\n\n        dispatch(setRightSidebarWidth(newWidth));\n    }\n\n    const handleDragStop = (e: DraggableEvent, data: DraggableData) => {\n        setIsDragging(false);\n        setCollabsableRight(sidebar.rightSidebarWidth);\n    }\n\n\n    if(activeGraphElement && activeGraphElement.type !== NodeType.edge) {\n        similarElements = elementsTree.getFilteredElementsByTypeAndLabel(\n            activeGraphElement.type,\n            activeGraphElement.label\n        ).filter(ele => ele.getId() !== activeGraphElement.id).map(ele => ele.getId());\n\n        const activeNode = elementsTree.getElement(activeGraphElement.id);\n\n        if(activeNode) {\n            activeNodeSources = activeNode.getSources();\n            activeNodeTargets = activeNode.getTargets();\n        }\n    }\n\n    if(activeGraphElement && activeGraphElement.type === NodeType.edge && activeGraphElement.edgeData) {\n        const activeSource = elementsTree.getElement(activeGraphElement.edgeData.source);\n        const activeTarget = elementsTree.getElement(activeGraphElement.edgeData.target);\n        if(activeSource) {\n            activeNodeSources = List([activeSource]);\n        }\n        if(activeTarget) {\n            activeNodeTargets = List([activeTarget]);\n        }\n    }\n\n\n    const handleCloseElementDetails = () => {\n        dispatch(activeGraphElementChanged(props.match.params.uid, activeGraphElement || undefined));\n        dispatch(toggleElementDetails(props.match.params.uid, false, false));\n        setShowSimilarElements(false);\n        graph.focus();\n    };\n\n    const handleUpdateMetadata = (editorValue: string) => {\n        activeGraphElement!.metadata = editorValue;\n        activeGraphElement!.updateMetadata(editorValue);\n        setShowSimilarElements(true);\n    };\n\n    const handleUpdateSimilarElements = (e: SyntheticEvent) => {\n        e.preventDefault();\n        if (activeGraphElement && boardElementMetadataRef && boardElementMetadataRef.current) {\n            activeGraphElement.updateSimilarElements(similarElements.toArray(), boardElementMetadataRef.current.retrievePayload());\n        }\n        setShowSimilarElements(false);\n    }\n\n    return (\n        // Transition.Group in combination with monaco editor causes very expensive painting when closing the sidebar: main thread is blocked for > 10 sec\n        // Hence, it is deactivated for now, but we should investigate further\n        /*<Transition.Group animation=\"slide down\">*/<>\n            {visible && <div style={{position: \"absolute\", paddingTop: \"50px\", top: \"0px\", right: \"0px\", height: \"100%\", overflow: \"hidden\", borderLeft:\"5px solid #eee\"}}>\n            <Card style={{height: \"100%\", borderRadius:'0', width: sidebar.rightSidebarWidth + 'px'}}>\n                <Card.Content>\n                    <Card.Header><Icon name=\"close\" className=\"right floated\" onClick={handleCloseElementDetails} style={{cursor: \"pointer\"}} />\n                    {activeGraphElement && <>{activeGraphElement!.label}</>}\n                    {!activeGraphElement && <>Metadata</>}\n                    </Card.Header>\n                </Card.Content>\n                <Card.Content style={{position: \"relative\", height: \"100%\", overflowY: \"auto\",}}>\n                    {!activeGraphElement && <Message info={true}>{props.t('insp.sidebar.element_details.no_element_selected')}</Message>}\n                    {activeGraphElement && (\n                        <BoardElementMetadata\n                            boardId={props.match.params.uid}\n                            activeNodeSources={activeNodeSources}\n                            activeNodeTargets={activeNodeTargets}\n                            activeGraphElement={activeGraphElement}\n                            boardStickyTemplate={boardStickyTemplates.get(activeGraphElement.type as NodeType)!}\n                            onTriggerCody={() => graph.triggerCody()}\n                            onUpdateMetadata={handleUpdateMetadata}\n                            onClose={handleCloseElementDetails}\n                            t={props.t}\n                            ref={boardElementMetadataRef}\n                            focusEditor={!!board.shouldFocusMetadataEditor}\n                        />\n                    )}\n                </Card.Content>\n                {showSimilarElements && similarElements.size > 0 && <Card.Content>\n                    <Message compact={true} warning={true} size=\"small\">\n                        {props.t('insp.sidebar.element_details.update_similar_elements_text', {number: similarElements.size})}\n                        &nbsp;<a href='#' onClick={handleUpdateSimilarElements}>{props.t('insp.sidebar.element_details.update_similar_elements_link')}</a>\n                    </Message>\n                </Card.Content>}\n            </Card>\n            <Draggable\n                axis=\"x\"\n                onDrag={handleDragging}\n                onStop={handleDragStop}\n                position={{x: 0, y: 0}}\n            >\n                <div className=\"thin collapsebar collapsible\" style={{right: collabsableRight + 'px', cursor: 'grabbing'}} />\n            </Draggable>\n        </div>}\n        </>\n        /*</Transition.Group> */\n    );\n};\n\nexport default withNamespaces()(withRouter(BoardElementDetails));\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Redirect} from \"react-router\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport {Dimmer, Loader} from \"semantic-ui-react\";\nimport {ResponseType} from \"../../api/util\";\nimport {exec, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {Action as Notify, Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Routes from \"../../routes\";\nimport * as UserModule from \"../../User\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {acceptInvitationToOrganization, fetchOrganization} from \"../actions/api\";\nimport {createOrganizationFromServerData} from \"../model/Organization\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../selectors/selectUserOrganizationInfo\";\nimport {Action} from \"../index\";\n\ninterface OwnProps {\n\n}\n\ninterface RouteMatchParams {\n    organization: string;\n    invitation: string;\n}\n\ntype AcceptOrganizationInvitationProps = OwnProps & RouteComponentProps<RouteMatchParams> & WithNamespaces;\n\nconst AcceptOrganizationInvitation = (props: AcceptOrganizationInvitationProps) => {\n    const organizationId = props.match.params.organization;\n    const invitationId = props.match.params.invitation;\n\n    const currentUserSelector = makeGetCurrentUser();\n\n    const currentUser = useSelector(currentUserSelector);\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n    const [doRedirect, setDoRedirect] = useState(false);\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if(currentUser.signedIn && activeOrganization) {\n            let retries = 0;\n\n            const handleAckResponse = (ackResponse: ResponseType) => {\n                if(ackResponse.error) {\n                    // Invited user is new and username sync seems still be in progress\n                    if(retries < 2) {\n                        retries++;\n                        window.setTimeout(() => {\n                            acceptInvitationToOrganization(organizationId, invitationId).then(handleAckResponse);\n                        }, 100);\n                        return;\n                    }\n\n                    dispatch(Notify.Command.error('Command failed', 'Failed to process organization invitation'));\n                    setDoRedirect(true);\n                    return;\n                }\n\n                fetchOrganization(organizationId)\n                    .then(({response, error}) => {\n                        if(error) {\n                            dispatch(Notify.Command.info(\n                                props.t('insp.organisation.joined.title'),\n                                ''\n                            ));\n                            setDoRedirect(true);\n                            return;\n                        }\n\n                        if(response) {\n                            const result = pipe(\n                                response.data,\n                                exec((data: any) => createOrganizationFromServerData(data)),\n                            );\n\n                            if (isFailure(result)) {\n                                console.error(\"Invalid organization response: \", result.value);\n                                dispatch(NotifyAction.Command.error('Request Error', 'Could not load organization'));\n                            }\n\n                            if (isSuccess(result)) {\n                                dispatch(Action.Query.fetchUserOrganizations());\n                                dispatch(UserModule.Action.Command.switchActiveOrganization(organizationId));\n                                dispatch(Notify.Command.info(\n                                    props.t('insp.organisation.joined.title'),\n                                    props.t('insp.organisation.joined.details', {name: result.value.name}))\n                                );\n                            }\n\n                            setDoRedirect(true);\n                        }\n                    });\n            };\n\n            acceptInvitationToOrganization(organizationId, invitationId)\n                .then(handleAckResponse);\n        }\n    }, [currentUser.signedIn, activeOrganization]);\n\n\n    if(doRedirect) {\n        return <Redirect to={Routes.inspectio} />\n    }\n\n    return <Dimmer active={true} className=\"page\"><Loader size=\"large\">Processing Organization Invitation</Loader></Dimmer>;\n};\n\nexport default withNamespaces()(AcceptOrganizationInvitation);\n","import * as React from 'react';\n// tslint:disable-next-line:no-var-requires\nconst codyEmoji = require('../../../theme/img/cody.svg');\n\ninterface OwnProps {\n    width?: number;\n}\n\ntype CodyEmojiProps = OwnProps;\n\nconst CodyEmoji = (props: CodyEmojiProps) => {\n    const width = props.width || 30;\n\n    return <object className=\"console-avatar\" data={codyEmoji} type=\"image/svg+xml\" style={{width: width+'px'}}/>;\n};\n\nexport default CodyEmoji;\n","import * as React from 'react';\nimport {CSSProperties, ReactElement, useState} from 'react';\nimport {Icon} from \"semantic-ui-react\";\nimport {camelize} from \"tslint/lib/utils\";\nimport {CodyResponse, CodyResponseType} from \"../../service/Cody\";\nimport CodyEmoji from \"./CodyEmoji\";\nimport {DEFAULT_COLOR, ERROR_COLOR, INFO_COLOR} from \"./definitions\";\n\ninterface OwnProps {\n    codyResponse: CodyResponse,\n    codyName: string,\n}\n\ntype CodyMessageProps = OwnProps;\n\nconst CodyMessage = (props: CodyMessageProps) => {\n\n    const [showDetails, setShowDetails] = useState(false);\n\n    let msgColor = DEFAULT_COLOR;\n    let detailsColor = DEFAULT_COLOR;\n    let fontWeight: 'normal' | 'bold' = 'normal';\n    let detailsFontWeight: 'normal' | 'bold' = 'normal';\n    let backgroundColor = 'white';\n\n    if(props.codyResponse.type === CodyResponseType.Error) {\n        msgColor = ERROR_COLOR;\n        detailsColor = ERROR_COLOR;\n        fontWeight = 'bold';\n        detailsFontWeight = 'bold';\n        backgroundColor = '#f1bec5';\n    }\n\n    if(props.codyResponse.type === CodyResponseType.Warning\n        || props.codyResponse.type === CodyResponseType.Question\n        || props.codyResponse.type === CodyResponseType.SyncRequired)\n    {\n        msgColor = '#653a12';\n        detailsColor = '#653a12';\n        fontWeight = 'bold';\n        backgroundColor = '#fdd299';\n    }\n\n    if(!props.codyResponse.type || props.codyResponse.type === CodyResponseType.Info) {\n        msgColor = INFO_COLOR;\n        fontWeight = 'bold';\n    }\n\n    const msg = (!Array.isArray(props.codyResponse.cody))? [props.codyResponse.cody] : props.codyResponse.cody;\n    let details;\n\n    if(props.codyResponse.details) {\n        details = props.codyResponse.details;\n\n        if(!Array.isArray(details)) {\n            details = [details];\n        }\n    }\n\n    const toggleShowDetails = (e: React.MouseEvent) => {\n        e.preventDefault();\n\n        setShowDetails(!showDetails);\n    }\n\n    const defaultStyle = {color: msgColor, fontWeight};\n    const detailsStyle = {color: detailsColor, fontWeight: detailsFontWeight};\n    const showDetailsIcon = showDetails? <Icon name=\"caret down\" size=\"large\" /> : <Icon name=\"caret right\" size=\"large\" />;\n\n    return <>\n        <div className=\"console-message\" style={{backgroundColor}}>\n            <CodyEmoji />\n            <div className=\"console-text\">\n                {applyMessageStyle(msg, defaultStyle, props.codyName)}\n                {details && <a href=\"#\" onClick={toggleShowDetails}>{showDetailsIcon}</a>}\n            </div>\n        </div>\n        {details && showDetails && <div className=\"console-message\" style={{backgroundColor}}>\n            <CodyEmoji />\n            <div className=\"console-text\">\n                {applyMessageStyle(details, detailsStyle)}\n            </div>\n        </div>}\n    </>\n};\n\nexport default CodyMessage;\n\nconst applyMessageStyle = (msgAndStyles: string[], defaultStyle: CSSProperties, codyName?: string): ReactElement[] => {\n    let msg = msgAndStyles[0] || '';\n\n    if(typeof msg !== 'string') {\n        msg = msg as any;\n        if(typeof msg.toString === 'function') {\n            msg = msg.toString();\n        } else {\n            return [];\n        }\n    }\n\n    const msgParts = msg.split('%c');\n\n    const styles = msgAndStyles.slice(1);\n\n    const spans: ReactElement[] = [];\n\n    let nextStyle: CSSProperties = defaultStyle;\n\n    let firstPart = true;\n\n    for(const partI in msgParts) {\n        if(typeof msgParts[partI] !== 'undefined') {\n            let part = msgParts[partI];\n            let firstCharIsWhitespace = false;\n            let lastCharIsWhitespace = false;\n            const length = part.length;\n\n            if(length > 0) {\n                if(part.charAt(length - 1) === ' ') {\n                    lastCharIsWhitespace = true;\n                    part = part.slice(0, length - 1)\n                }\n\n                if(part.charAt(0) === ' ') {\n                    firstCharIsWhitespace = true;\n                    part = part.slice(1);\n                }\n            }\n\n            if(length > 0) {\n                if(firstPart && codyName) {\n                    part = `[${codyName}]: ` + part;\n                    firstPart = false;\n                }\n                spans.push(<span key={spans.length + 1} style={nextStyle}>\n                    {firstCharIsWhitespace && <>&nbsp;</>}{<>{part}</>}{lastCharIsWhitespace && <>&nbsp;</>}\n                </span>);\n            }\n\n            if(styles[partI]) {\n                nextStyle = parseStyleString(styles[partI]);\n            } else {\n                nextStyle = defaultStyle;\n            }\n        }\n    }\n\n    return spans;\n}\n\nconst parseStyleString = (style: string): CSSProperties => {\n    const cssProps: {[cssProp: string]: string} = {};\n\n    const propStrs = style.split(';');\n\n    for(const propStr of propStrs) {\n        const [prop, val] = propStr.split(':');\n\n        if(typeof prop !== 'string' || typeof val !== 'string') {\n            continue;\n        }\n\n        cssProps[camelize(prop.trim())] = val;\n    }\n\n    return cssProps as CSSProperties;\n}\n","export const ERROR_COLOR = '#f31c30';\nexport const WARNING_COLOR = '#f99f4b';\nexport const SUCCESS_COLOR = '#73dd8e';\nexport const INFO_COLOR = '#32c0e7';\nexport const DEFAULT_COLOR = '#414141';\n","import * as React from 'react';\nimport {Label} from \"semantic-ui-react\";\nimport {DEFAULT_COLOR, ERROR_COLOR, WARNING_COLOR} from \"./definitions\";\n// tslint:disable-next-line:no-var-requires\nconst iioAvatar = require('../../../theme/img/inspect-avatar.png');\n\ninterface OwnProps {\n    message: string;\n    type?: 'default' | 'error' | 'warning';\n}\n\ntype InspectIoMessageProps = OwnProps;\n\nconst InspectIoMessage = (props: InspectIoMessageProps) => {\n\n    let msgColor = DEFAULT_COLOR;\n    let fontWeight: 'normal' | 'bold' = 'normal';\n    let backgroundColor = 'white';\n\n    if(props.type === 'error') {\n        msgColor = ERROR_COLOR;\n        fontWeight = 'bold';\n        backgroundColor = '#f1bec5';\n    }\n\n    if(props.type === 'warning') {\n        msgColor = WARNING_COLOR;\n        fontWeight = 'bold';\n    }\n\n    return <div className=\"console-message\" style={{backgroundColor}}>\n        <Label circular={true} className=\"user console-avatar\" style={{backgroundImage: `url(${iioAvatar})`, backgroundSize: 'cover', marginLeft: '3px'}} />\n        <div className=\"console-text\">\n            <span style={{color: msgColor, fontWeight}}>{props.message}</span>\n        </div>\n    </div>;\n};\n\nexport default InspectIoMessage;\n","import * as React from 'react';\nimport {useSelector} from \"react-redux\";\nimport {Label} from \"semantic-ui-react\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\n\ninterface OwnProps {\n    msg: string;\n}\n\ntype UserMessageProps = OwnProps;\n\nconst UserMessage = (props: UserMessageProps) => {\n    const user = useSelector(makeGetCurrentUser());\n\n    return <div className=\"console-message\">\n        <Label circular={true} className=\"user console-avatar\" style={{backgroundImage: `url(${user.avatarUrl})`, backgroundSize: 'cover', marginLeft: '1px'}} />\n        <div className=\"console-text\">\n            {props.msg === '' && <span>&nbsp;</span>}\n            <span>{props.msg}</span>\n        </div>\n    </div>\n};\n\nexport default UserMessage;\n","import {List} from \"immutable\";\nimport * as React from 'react';\nimport {ReactElement, useMemo, useRef, useState} from 'react';\nimport Draggable, {DraggableData, DraggableEvent} from \"react-draggable\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Transition} from \"semantic-ui-react\";\nimport {setCodyConsoleHeight} from \"../../Layout/actions/commands\";\nimport {makeGetSidebarSelector} from \"../../Layout/selectors/sidebar\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {toggleCodyConsole} from \"../actions/commands\";\nimport {useGraph} from \"../hooks/useGraph\";\nimport {BoardId} from \"../model/Board\";\nimport {makeBoardByIdSelector} from \"../selectors/board\";\nimport {CodyResponse, CodyResponseType, IIO, NO_CODY_CONNECTION} from \"../service/Cody\";\nimport CodyMessage from \"./CodyConsole/CodyMessage\";\nimport InspectIoMessage from \"./CodyConsole/InspectIoMessage\";\nimport UserInput from \"./CodyConsole/UserInput\";\nimport UserMessage from \"./CodyConsole/UserMessage\";\n\ninterface OwnProps {\n\n}\n\ninterface CodyConsoleRouteMatchParams {\n    uid: BoardId;\n}\n\nconst RESERVED_NAMES = [\n    'connect',\n    'disconnect',\n    'cockpit',\n    'help',\n    'talk'\n]\n\ntype CodyConsoleProps = OwnProps & RouteComponentProps<CodyConsoleRouteMatchParams>;\n\nconst CodyConsole = (props: CodyConsoleProps) => {\n    const dispatch = useDispatch();\n    const [messages, setMessages] = useState<List<ReactElement>>(List([]));\n    const [lastCodyMsg, setLastCodyMsg] = useState<CodyResponse|undefined>();\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const getBoardByIdSelector = useMemo(() => makeBoardByIdSelector(props.match.params.uid), []);\n    const board = useSelector(getBoardByIdSelector);\n    const visible = board && board.shouldShowCodyConsole;\n    const [isDragging, setIsDragging] = useState(false);\n    const [collabsableBottom, setCollabsableBottom] = useState(sidebar.codyConsoleHeight);\n    const user = useSelector(makeGetCurrentUser());\n    const consoleEl = useRef<HTMLDivElement>(null);\n    const [graph] = useGraph();\n\n    const sidebarWidth = sidebar.width + 10 /* collapse handle */;\n    const bothSidebarsWidth = sidebarWidth + ((board && board.shouldShowElementDetails)? sidebar.rightSidebarWidth + 5 : 0);\n\n    const addMessage = (msg: ReactElement) => {\n        setMessages(messages.push(msg));\n        window.setTimeout(() => {\n            if(consoleEl.current) {\n                consoleEl.current.scrollBy({top: 200, behavior: \"smooth\"});\n            }\n        }, 10);\n    }\n\n    IIO.setCodyResponsePrinter((res: CodyResponse, codyName: string) => {\n        setLastCodyMsg(res);\n        addMessage(<CodyMessage key={messages.count() + 1} codyResponse={res} codyName={codyName} />);\n    });\n\n    IIO.setErrorPrinter((error: string) => {\n        if(messages.count() === 0 && error === NO_CODY_CONNECTION) {\n            return;\n        }\n\n        addMessage(<InspectIoMessage key={messages.count() + 1} message={error} type=\"error\" />);\n    });\n\n    IIO.setWarningPrinter((warn: string) => {\n        addMessage(<InspectIoMessage key={messages.count() + 1} message={warn} type=\"warning\" />);\n    });\n\n    const handleCloseClick = () => {\n        dispatch(toggleCodyConsole(props.match.params.uid, false));\n    }\n\n    const handleDragging = (e: DraggableEvent, data: DraggableData) => {\n        if(!isDragging) {\n            setIsDragging(true);\n        }\n\n        const newHeight = sidebar.codyConsoleHeight - data.deltaY;\n\n        dispatch(setCodyConsoleHeight(newHeight));\n    }\n\n    const handleDragStop = (e: DraggableEvent, data: DraggableData) => {\n        setIsDragging(false);\n        setCollabsableBottom(sidebar.codyConsoleHeight);\n    }\n\n    const handleUserInput = (val: string) => {\n        addMessage(<UserMessage key={messages.count() + 1} msg={val} />);\n\n        if(val === '/help') {\n            window.setTimeout(() => {\n                IIO.ask.Cody.forHelp();\n            })\n            return;\n        }\n\n        if(val === '/talk') {\n            IIO.talk.to.Cody();\n            return;\n        }\n\n        const foundConnect = val.match(/^\\/connect\\s+(?<uri>http(s)?:\\/\\/[^\\s]+)\\s*(?<name>[A-Za-z0-9]+)?$/);\n\n        if(foundConnect) {\n            if(foundConnect.groups!.name) {\n                if(RESERVED_NAMES.includes(foundConnect.groups!.name)) {\n                    addMessage(<CodyMessage codyResponse={{\n                        cody: `Oh sorry, you cannot use \"${foundConnect.groups!.name}\" as a name. It's a reserved word!`,\n                        type: CodyResponseType.Error\n                    }} codyName=\"cody\" />)\n                    return;\n                }\n            }\n\n            IIO.connect.Cody(foundConnect.groups!.uri, user.displayName, foundConnect.groups!.name);\n            return;\n        }\n\n        const foundDisconnect = val.match(/^\\/disconnect\\s+(?<name>[A-Za-z0-9]+)$/);\n\n        if(foundDisconnect && foundDisconnect.groups!.name) {\n            IIO.disconnect(foundDisconnect.groups!.name);\n            return;\n        }\n\n        if(val.match(/^\\/cockpit\\s+http(s)?:\\/\\/.+$/)) {\n            graph.setCockpitBaseUrl(val.replace('/cockpit ', '').trim());\n            addMessage(<CodyMessage codyName=\"Cody\" codyResponse={{\n                cody: 'Cockpit is activated now.',\n                details: 'Right click on commands, events, queries or aggregates and choose \"Open In Cockpit\" from context menu.'}}\n            />);\n            return;\n        }\n\n        if(IIO.codyServers) {\n            IIO.reply(val);\n        } else {\n            IIO.connect.Cody(val.replace('/connect ', ''), user.displayName);\n        }\n    }\n\n    const handleUserEscape = () => {\n        IIO.abortSession();\n    }\n\n    return <Transition.Group animation=\"slide up\">{visible && <div className=\"cody console\" ref={consoleEl} style={{\n        height: `${sidebar.codyConsoleHeight}px`,\n        left: `${sidebarWidth}px`,\n        width: `calc(100% - ${bothSidebarsWidth}px)`,\n    }}>\n        {!IIO.codyServers && <InspectIoMessage message=\"No connection to Cody. Try to connect with him first!\" type=\"warning\"/>}\n        {messages.toArray()}\n        <UserInput showConnectDefault={!IIO.codyServers}\n                   boardId={props.match.params.uid}\n                   messageCount={messages.count()}\n                   lastCodyMsg={lastCodyMsg}\n                   visible={visible}\n                   onEnter={handleUserInput}\n                   onEscape={handleUserEscape}\n                   onClose={handleCloseClick} />\n        <Draggable\n            axis=\"y\"\n            onDrag={handleDragging}\n            onStop={handleDragStop}\n            position={{x: 0, y: 0}}\n        >\n            <div className=\"collapsible\" style={{bottom: collabsableBottom + 'px', width: `calc(100% - ${bothSidebarsWidth}px)`,  cursor: 'grabbing'}}>\n                <span className=\"collaps-handle\" onClick={handleCloseClick}><i className=\"close icon\" /></span>\n            </div>\n        </Draggable>\n    </div>}</Transition.Group>;\n};\n\nexport default withRouter(CodyConsole);\n","import {List, Record} from \"immutable\";\nimport {createSelector} from \"reselect\";\nimport {ApplicationState} from \"../../reducer\";\nimport {MODULE} from \"../index\";\nimport {OrganizationInvitation, OrganizationInvitationId} from \"../model/OrganizationInvitation\";\n\nexport const getOrganizationInvitationById = (state: Record<ApplicationState>, uid: OrganizationInvitationId): OrganizationInvitation | undefined => state.getIn([MODULE, 'OrganizationInvitation', uid]);\n\nexport const makeOrganizationInvitationSelector = (uid: OrganizationInvitationId): (state: Record<ApplicationState>) => OrganizationInvitation | undefined => (state: Record<ApplicationState>) => getOrganizationInvitationById(state, uid);\n\nexport const organizationInvitationListSelector = (state: Record<ApplicationState>, props: any): List<OrganizationInvitation> =>\n    List(state.getIn([MODULE, 'OrganizationInvitation']).toIndexedSeq().toArray()) || List();\n\nexport const makeOrganizationInvitationListSelector = (): (state: Record<ApplicationState>, props?: any) => List<OrganizationInvitation> => {\n    return createSelector(\n        [organizationInvitationListSelector],\n        (OrganizationInvitationList): List<OrganizationInvitation> => {\n            return OrganizationInvitationList;\n        }\n    )\n};\n","import * as React from 'react';\nimport {useEffect, useState} from \"react\";\nimport {WithNamespaces, withNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {ButtonGroup, ListItem} from \"semantic-ui-react\";\nimport SecondaryButton from \"../../../core/components/SecondaryButton\";\nimport {isSuccess} from \"../../../core/validation/either\";\nimport * as UserModule from \"../../../User\";\nimport UserAvatar from \"../../../User/components/UserAvatar\";\nimport {createAnonymous, IioUserInfo} from \"../../../User/model/IioUserInfo\";\nimport * as Action from \"../../actions\";\nimport {OrganizationInvitation, Status} from \"../../model/OrganizationInvitation\";\nimport {makeOrganizationInvitationSelector} from \"../../selectors/selectOrganizationInvitation\";\nimport {Organization} from \"../../model/Organization\";\n\ninterface OwnProps {\n    invitation: OrganizationInvitation,\n    organization: Organization,\n}\n\ntype OpenOrganizationInvitationProps = OwnProps & WithNamespaces;\n\nconst OpenOrganizationInvitation = (props: OpenOrganizationInvitationProps) => {\n\n    const [userInfo, setUserInfo] = useState(createAnonymous());\n    const [isResending, setIsResending] = useState(false);\n    const [isRevoking, setIsRevoking] = useState(false);\n    const [isRevoked, setIsRevoked] = useState(false);\n    const cachedInvitation = useSelector(makeOrganizationInvitationSelector(props.invitation.invitationId));\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        UserModule.Action.Api.getInspectioUserInfoByEmail(props.invitation.invitedUserEmail).then(({response, error}) => {\n            if(response) {\n                const result = UserModule.IioUserInfo.createIioUserInfoFromServerData(response.data);\n\n                if(isSuccess(result)) {\n                    setUserInfo(result.value);\n                }\n            }\n        })\n    }, [props.invitation.invitedUserEmail]);\n\n    useEffect(() => {\n        if(isResending) {\n            setIsResending(false);\n        }\n\n        if(isRevoking && cachedInvitation && cachedInvitation.status === Status.revoked) {\n            setIsRevoked(true);\n        }\n    }, [cachedInvitation]);\n\n    const handleResendClick = () => {\n        setIsResending(true);\n        dispatch(Action.Command.resendUserOrganizationInvitation(props.organization.uid, props.invitation.invitationId, props.invitation.invitedUserEmail));\n    };\n\n    const handleRevokeClick = () => {\n        setIsRevoking(true);\n        dispatch(Action.Command.revokeUserOrganizationInvitation(props.organization.uid, props.invitation.invitationId, props.invitation.invitedUserEmail));\n    }\n\n    if(isRevoked) {\n        return <></>;\n    };\n\n    return <ListItem>\n        <UserAvatar user={userInfo} size=\"mini\" />\n        <span style={{paddingLeft: \"10px\"}}>{props.invitation.invitedUserEmail}</span>\n        <ButtonGroup floated=\"right\">\n            <SecondaryButton content={props.t('app.form.resend')} icon=\"paper plane\" loading={isResending} onClick={handleResendClick} />\n            <SecondaryButton content={props.t('app.form.revoke')} icon=\"delete\" loading={isRevoking} onClick={handleRevokeClick} />\n        </ButtonGroup>\n    </ListItem>\n};\n\nexport default withNamespaces()(OpenOrganizationInvitation);\n","import {useState} from \"react\";\nimport * as React from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, ButtonGroup, Icon, Input, List as SemanticList, ListItem, Modal} from \"semantic-ui-react\";\nimport SecondaryButton from \"../../core/components/SecondaryButton\";\nimport {\n    isSuccess,\n} from \"../../core/validation/either\";\nimport UserAvatar from \"../../User/components/UserAvatar\";\nimport {createIioUserInfoFromServerData} from \"../../User/model/IioUserInfo\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport * as Action from \"../actions\";\nimport {Organization} from \"../model/Organization\";\nimport OpenOrganizationInvitation from \"./Invitations/OpenOrganizationInvitation\";\n\ninterface OwnProps {\n    open: boolean;\n    hasEnoughQuota: boolean;\n    onClose: () => void;\n    organization: Organization\n}\n\ntype InviteUserToOrganizationModalProps = WithNamespaces & OwnProps;\n\nconst InviteUserToOrganizationModal = (props: InviteUserToOrganizationModalProps) => {\n    const [email, setEmail] = useState('');\n    const currentUser = useSelector(makeGetCurrentUser());\n\n    const dispatch = useDispatch();\n\n    const success = createIioUserInfoFromServerData({\n        userId: currentUser.uid,\n        username: currentUser.displayName,\n        avatarUrl: currentUser.avatarUrl,\n        position: ''\n    });\n    let userInfo;\n\n    if(isSuccess(success)) {\n        userInfo = success.value;\n    }\n\n    const handleSubmit = () => {\n        dispatch(Action.Command.inviteUserToOrganization(props.organization.uid, email))\n        setEmail('');\n        props.onClose();\n    };\n\n    const hasInvitations = props.organization.invitations.count() > 0;\n\n    return (\n        <Modal open={props.open} closeIcon={true} onClose={props.onClose}>\n            <Modal.Header>{props.t('insp.organisation.invite_user')}</Modal.Header>\n            <Modal.Content>\n                <form onSubmit={handleSubmit}>\n                    <div style={{ marginBottom: '10px' }}>\n                        <Input\n                            style={{ width: '100%' }}\n                            value={email}\n                            onChange={(e, data) => setEmail(data.value)}\n                            placeholder={props.t('insp.organisation.user_email')}\n                            autoFocus={true}\n                        />\n                    </div>\n                    <Button primary={true} type=\"submit\" disabled={!isValidEmail(email) || !props.hasEnoughQuota}>\n                        {props.t('insp.organisation.send_invitation')}\n                    </Button>\n                </form>\n                <div className=\"ui horizontal divider\">{ props.t('insp.organisation.open_invitations') }</div>\n                {hasInvitations && <SemanticList relaxed={true} divided={true}>\n                    {props.organization.invitations.map(\n                        invitation => <OpenOrganizationInvitation\n                            invitation={invitation}\n                            organization={props.organization}\n                            key={invitation.invitationId} />\n                    )}\n                </SemanticList>}\n                {!hasInvitations && <p className=\"infotextSecondary\">{ props.t('insp.organisation.empty_invitations') }</p>}\n            </Modal.Content>\n        </Modal>\n    );\n};\n\n/**\n * Validates the basic email structure; not a perfect validation\n *\n * @param value\n */\nconst isValidEmail = (value: string) => {\n    return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(value);\n};\n\nexport default withNamespaces()(InviteUserToOrganizationModal);\n","import * as React from 'react';\nimport {SyntheticEvent, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {Button, Confirm, Dropdown, Label} from \"semantic-ui-react\";\nimport {useOnBodyClick} from \"../../core/hooks/useOnBodyClick\";\nimport * as UserModule from \"../../User\";\nimport {IioUserInfo} from \"../../User/model\";\nimport {Action} from \"../index\";\nimport {OrganizationId} from \"../model/Organization\";\n\ninterface OwnProps {\n    isOwner: boolean;\n    isAdmin: boolean;\n    organizationId: OrganizationId;\n    currentUserIsOwner: boolean;\n    member: IioUserInfo.IioUserInfo;\n    readonly?: boolean;\n    isGuest?: boolean;\n}\n\ntype OrganizationMemberEntryProps = OwnProps & WithNamespaces;\n\nconst OrganizationMemberEntry = (props: OrganizationMemberEntryProps) => {\n    const [showDropdown, setShowDropdown] = useState(false);\n    const [avatarLoaded, setAvatarLoaded] = useState(false);\n    const [showRemoveMemberConfirm, setShowRemoveMemberConfirm] = useState(false);\n    const dispatch = useDispatch();\n\n    useOnBodyClick(() => {\n        setShowDropdown(false);\n    });\n\n    const canBeRemoved = (userId: UserModule.UserModel.UserId): boolean => {\n        return !props.isOwner && !props.readonly;\n    }\n\n    const handleMemberClick = (e: SyntheticEvent) => {\n        if(canBeRemoved(props.member.userId)) {\n            e.stopPropagation();\n            setShowDropdown(!showDropdown);\n        }\n    };\n\n    const promoteMemberToAdmin = () => {\n        if(!props.readonly) {\n            dispatch(Action.Command.promoteUserToOrganizationAdmin(props.organizationId, props.member.userId));\n        }\n    }\n\n    const demoteUserToMember = () => {\n        if(!props.readonly) {\n            dispatch(Action.Command.demoteUserToOrganizationMember(props.organizationId, props.member.userId));\n        }\n    }\n\n    const turnGuestIntoMember = () => {\n        if(!props.readonly) {\n            dispatch(Action.Command.turnGuestIntoMember(props.member.userId, props.organizationId))\n        }\n    }\n\n    const removeMemberFromOrganization = () => {\n        if(!props.readonly) {\n            if(props.isGuest) {\n                dispatch(Action.Command.removeGuestFromOrganization(props.organizationId, props.member.userId));\n            } else {\n                dispatch(Action.Command.removeUserFromOrganization(props.organizationId, props.member.userId));\n            }\n\n        }\n        setShowRemoveMemberConfirm(false);\n    };\n\n    const adminClass = props.isOwner || props.isAdmin? 'admin-member' : '';\n\n    return <div className={\"item \" + adminClass} key={props.member.userId} style={canBeRemoved(props.member.userId) ? {cursor: \"pointer\"} : {}}>\n        <Dropdown open={showDropdown} icon={false} pointing=\"top\" disabled={props.readonly} className=\"organization\">\n            <Dropdown.Menu>\n                {props.currentUserIsOwner && props.isAdmin && <Dropdown.Item\n                    text={props.t('insp.organisation.demote_to_member')}\n                    onClick={() => demoteUserToMember()}\n                    />}\n                {props.currentUserIsOwner && !props.isAdmin && !props.isGuest && <Dropdown.Item\n                    text={props.t('insp.organisation.promote_to_admin')}\n                    onClick={() => promoteMemberToAdmin()}\n                />}\n                {props.isGuest && <Dropdown.Item\n                    text={props.t('insp.organisation.promote_to_member')}\n                    onClick={() => turnGuestIntoMember()}\n                />}\n                <Dropdown.Item\n                    text={props.t('app.form.remove')}\n                    onClick={() => setShowRemoveMemberConfirm(true)}\n                />\n            </Dropdown.Menu>\n        </Dropdown>\n        {!avatarLoaded && <span className=\"ui avatar image placeholder\" onClick={handleMemberClick} />}\n        <img className=\"ui avatar image\" src={props.member.avatar()} onClick={handleMemberClick}\n                              onLoad={() => setAvatarLoaded(true)}\n                              alt={props.member.username + \" Avatar\"} style={{display: avatarLoaded ? 'inline-block' : 'none'}}/>\n        <div className=\"content\" onClick={handleMemberClick}>\n            <div className=\"header\">{props.member.username}</div>\n        </div>\n        <Confirm\n            open={!props.readonly && showRemoveMemberConfirm}\n            header={props.t('insp.organisation.remove_user_confirm_title')}\n            content={props.t(\n                'insp.organisation.remove_user_confirm_text',\n                { user_name: props.member.username }\n            )}\n            confirmButton={props.t('insp.organisation.remove_user_confirm_button')}\n            cancelButton={<Button content={props.t('app.form.cancel')} className=\"basic noborder\" />}\n            onCancel={() => setShowRemoveMemberConfirm(false)}\n            onConfirm={removeMemberFromOrganization}\n        />\n    </div>\n};\n\nexport default withNamespaces()(OrganizationMemberEntry);\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Button, Confirm, Container, Dropdown, Grid, Header, Message} from \"semantic-ui-react\";\nimport EditableTextline from \"../../core/components/EditableTextline\";\nimport {UserInfo} from \"../../User/model/UserInfo\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeIioFilteredUserListSelector} from \"../../User/selectors/iioUserInfo\";\nimport * as Action from \"../actions\";\nimport {UserOrganizationInfo} from \"../model/UserOrganizationInfo\";\nimport {makeOrganizationSelector} from \"../selectors/selectOrganization\";\nimport InviteUserToOrganizationModal from \"./InviteUserToOrganisationModal\";\nimport OrganizationMemberEntry from \"./OrganizationMemberEntry\";\nimport {List} from \"immutable\";\n\ninterface OwnProps {\n    activeOrganization: UserOrganizationInfo,\n    currentUser: UserInfo\n}\n\ntype OrganisationManagementProps = OwnProps & WithNamespaces;\n\ninterface Orga {\n    name: string,\n    description: string,\n}\n\nconst INPUT_CHAR_SIZE = 9;\nconst CHAR_SIZE_UNIT = 'px';\nconst ADDITIONAL_CHAR_PADDING = 20;\n\nconst OrganisationManagement = (props: OrganisationManagementProps) => {\n    const [showNewOrga, setShowNewOrga] = useState(false);\n    const [showDeleteModal, setShowDeleteModal] = useState(false);\n    const [showAddUserModal, setShowAddUserModal] = useState(false);\n    const currentUser = useSelector(makeGetCurrentUser());\n    const organizationData = useSelector(makeOrganizationSelector(props.activeOrganization.organizationId));\n    const dispatch = useDispatch();\n    const members = useSelector(\n        organizationData\n            ? makeIioFilteredUserListSelector(organizationData.members.push(organizationData.ownerId))\n            : makeIioFilteredUserListSelector(List())\n    );\n    const guests = useSelector(\n        organizationData\n            ? makeIioFilteredUserListSelector(organizationData.guests)\n            : makeIioFilteredUserListSelector(List())\n    );\n\n    if(!organizationData) {\n        return <Message error={true}>Could not load organization data. Please refresh the page to try again!</Message>;\n    }\n\n    const hasEnoughQuota = (organizationData.memberQuota - organizationData.invitations.count()) > 0;\n\n    const handleDeleteClick = (e: React.MouseEvent<HTMLAnchorElement>) => {\n        e.stopPropagation();\n        e.preventDefault();\n        setShowDeleteModal(true);\n    }\n\n    const handleAddUserClick = () => {\n        setShowAddUserModal(true);\n    }\n\n    const closeAddUserModal = () => {\n        setShowAddUserModal(false);\n    }\n\n    const handleOrgaNameChanged = (name: string) => {\n        dispatch(Action.Command.renameOrganization(props.activeOrganization.organizationId, name));\n    }\n\n    const handleNewOrgaEntered = (name: string) => {\n        dispatch(Action.Command.setUpExplicitOrganization(props.activeOrganization.organizationId, name));\n        setShowNewOrga(false);\n    }\n\n    const memberList = members.sortBy(m => m.username).sort((mA, mB) => {\n        if(mA.userId === organizationData.ownerId) {\n            return  -1;\n        }\n\n        if(mB.userId === organizationData.ownerId) {\n            return 1;\n        }\n\n        if(organizationData.admins.contains(mA.userId)) {\n            return -1;\n        }\n\n        if(organizationData.admins.contains(mB.userId)) {\n            return 1;\n        }\n\n        return 0;\n    }).map(member => <OrganizationMemberEntry\n        key={member.userId}\n        member={member}\n        currentUserIsOwner={organizationData.ownerId === currentUser.uid}\n        isOwner={organizationData.ownerId === member.userId}\n        isAdmin={organizationData.admins.contains(member.userId)}\n        readonly={organizationData.ownerId === member.userId || (organizationData.ownerId !== currentUser.uid && organizationData.admins.contains(member.userId))}\n        organizationId={organizationData.uid} />);\n\n    const guestList = guests.sortBy(m => m.username).map(member => <OrganizationMemberEntry\n        key={member.userId}\n        member={member}\n        currentUserIsOwner={organizationData.ownerId === currentUser.uid}\n        isOwner={organizationData.ownerId === member.userId}\n        isAdmin={organizationData.admins.contains(member.userId)}\n        isGuest={true}\n        readonly={organizationData.ownerId === member.userId || (organizationData.ownerId !== currentUser.uid && organizationData.admins.contains(member.userId))}\n        organizationId={organizationData.uid} />);\n\n    return <>\n            {props.activeOrganization.explicitOrganization && !hasEnoughQuota && <Grid.Row>\n                <Grid.Column>\n                    <Message warning={true} floating={true} content={props.t('insp.organisation.no_member_quota')} />\n                </Grid.Column>\n            </Grid.Row>}\n            <Grid.Row>\n                <Grid.Column>\n                    <div>\n                        {!props.activeOrganization.explicitOrganization && props.activeOrganization.ownOrganization\n                            && <button className=\"ui huge basic button\" onClick={() => setShowNewOrga(!showNewOrga)}>\n                            <i className=\"plus icon\"/>\n                            {props.t('insp.organisation.create_btn')}\n                        </button>}\n                        {showNewOrga && <div className=\"ui segment\">\n                            <EditableTextline\n                                text={''}\n                                charSize={INPUT_CHAR_SIZE}\n                                widthUnit={CHAR_SIZE_UNIT}\n                                padding={ADDITIONAL_CHAR_PADDING}\n                                minWidth={200}\n                                required={true}\n                                onTextChanged={handleNewOrgaEntered}\n                                focus={true}\n                                onCancel={() => {\n                                    setShowNewOrga(false)\n                                }}\n                                placeholder={props.t('insp.organisation.name') as string}\n                            />\n                        </div>\n                        }\n                        {props.activeOrganization.explicitOrganization && <div className=\"ui segment\">\n                            {<a href=\"#\" className=\"ui small right floated basic button noborder\"\n                                onClick={handleDeleteClick} style={{display: \"none\"}}>\n                                Delete\n                            </a>}\n\n                            <h3 style={{margin: 0, cursor: props.activeOrganization.ownOrganization? \"pointer\" : \"default\"}} id={'1234'}>\n                                <EditableTextline\n                                    text={props.activeOrganization.organizationName}\n                                    charSize={INPUT_CHAR_SIZE}\n                                    widthUnit={CHAR_SIZE_UNIT}\n                                    padding={ADDITIONAL_CHAR_PADDING}\n                                    minWidth={200}\n                                    required={true}\n                                    onTextChanged={handleOrgaNameChanged}\n                                    focus={false}\n                                    onCancel={() => {\n                                        console.log(\"cancel name change\")\n                                    }}\n                                    placeholder={props.t('insp.organisation.name') as string}\n                                    disabled={!props.activeOrganization.ownOrganization}\n                                />\n                            </h3>\n                            <div className=\"ui horizontal divider\">{props.t('insp.organisation.member')}</div>\n                            <div className=\"ui horizontal list\">\n                                <Button basic={true} icon={true} color=\"blue\" size=\"large\" onClick={handleAddUserClick} disabled={!hasEnoughQuota && organizationData.invitations.count() === 0}>\n                                    <i className=\"blue user icon\"/>\n                                </Button>\n                                {memberList}\n                            </div>\n                            {guestList.count() > 0 &&  <div className=\"ui horizontal divider\">{props.t('insp.organisation.guests')}</div>}\n                            {guestList.count() > 0 && <div className=\"ui horizontal list\">\n                                {guestList}\n                            </div>}\n                            <InviteUserToOrganizationModal\n                                open={showAddUserModal}\n                                onClose={closeAddUserModal}\n                                organization={organizationData}\n                                hasEnoughQuota={hasEnoughQuota}\n                            />\n                            <Confirm\n                                open={showDeleteModal}\n                                header={props.t('insp.team.remove_team_confirm_title')}\n                                confirmButton={props.t('app.form.remove')}\n                                cancelButton={<Button content={props.t('app.form.cancel')} className=\"basic noborder\" />}\n                                content={props.t('insp.team.remove_team_confirm_text', {team_name: props.activeOrganization.organizationName})}\n                                onCancel={() => setShowDeleteModal(false)}\n                                onConfirm={() => {alert(\"confirmed!\")}}\n                            />\n                        </div>}\n                    </div>\n                </Grid.Column>\n            </Grid.Row>\n            {!props.activeOrganization.explicitOrganization && props.activeOrganization.ownOrganization && <Grid.Row>\n                <Grid.Column>\n                    <Message info={true} floating={true} content={props.t('insp.organisation.not_explicit')}/>\n                </Grid.Column>\n            </Grid.Row>}\n            <Grid.Row>\n                <Grid.Column />\n            </Grid.Row>\n        </>;\n};\n\nexport default withNamespaces()(OrganisationManagement);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useSelector} from \"react-redux\";\nimport {Container, Grid, Header, Menu, MenuItem, Message} from \"semantic-ui-react\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\nimport {makeActiveUserOrganizationInfoSelector} from \"../selectors/selectUserOrganizationInfo\";\nimport OrganisationManagement from \"./OrganisationManagement\";\n\ninterface OwnProps {\n\n}\n\ntype OrganizationOverviewProps = OwnProps & WithNamespaces;\n\nconst OrganizationOverview = (props: OrganizationOverviewProps) => {\n    const currentUser = useSelector(makeGetCurrentUser());\n    const activeOrganization = useSelector(makeActiveUserOrganizationInfoSelector());\n\n    return <Container>\n        <Grid stackable={true} padded={true}>\n            <Grid.Row>\n                <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n                <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                    <Header as=\"h1\" icon={true} textAlign='center'>\n                        <Header.Content>\n                            Manage Organisation\n                            <Header.Subheader />\n                        </Header.Content>\n                    </Header>\n                </Grid.Column>\n            </Grid.Row>\n            {activeOrganization && activeOrganization.userIsAdmin && <>\n            <OrganisationManagement currentUser={currentUser} activeOrganization={activeOrganization} />\n            </>}\n            {(!activeOrganization || !activeOrganization.userIsAdmin) && <Grid.Row>\n                <Grid.Column computer=\"1\" largeScreen=\"2\" widescreen=\"3\" />\n                <Grid.Column mobile=\"16\" tablet=\"16\" computer=\"14\" largeScreen=\"12\" widescreen=\"10\">\n                    <Message content={props.t('insp.organisation.no_admin')} warning={true} />\n                </Grid.Column>\n            </Grid.Row>\n            }\n        </Grid>\n    </Container>;\n};\n\nexport default withNamespaces()(OrganizationOverview);\n","import * as React from 'react';\nimport {useEffect, useState} from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {Redirect, withRouter} from \"react-router\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport {Button, Dimmer, Icon, Loader, Message, Modal} from \"semantic-ui-react\";\nimport * as uuid from \"uuid\";\nimport {ImportMode} from \"../../Layout/Sidebar/ImportBoard\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport * as Routes from \"../../routes\";\nimport * as Action from \"../actions\";\nimport {fetchBoardXmlFromLink} from \"../actions/api\";\nimport {BoardModel} from \"../model\";\nimport {BoardId, BoardXml} from \"../model/Board\";\nimport {makeGetBoards, makeInitialBoardListLoaded} from \"../selectors/boardList\";\nimport {makeGetCurrentUser} from \"../../User/selectors/currentUser\";\n\ninterface RouteProps {\n    link: string;\n}\n\ninterface OwnProps {\n\n}\n\ntype BoardImportFromLinkProps = OwnProps & RouteComponentProps<RouteProps> & WithNamespaces;\n\nconst extractBoardName = (link: string): string => {\n    const parts = link.split('/');\n    const boardFile = parts[parts.length - 1];\n    return boardFile.split('.').slice(0, -1).join('.');\n}\n\n\nconst BoardImportFromLink = (props: BoardImportFromLinkProps) => {\n    const [doRedirect, setDoRedirect] = useState(false);\n    const [redirectPath, setRedirectPath] = useState(Routes.inspectio);\n    const [askForImportMode, setAskForImportMode] = useState(false);\n    const [boardXml, setBoardXml] = useState<BoardXml|undefined>(undefined);\n    const [boardId, setBoardId] = useState<BoardId|undefined>(undefined);\n    const initialBoardListLoaded = useSelector(makeInitialBoardListLoaded());\n    const user = useSelector(makeGetCurrentUser());\n    const getBoards = makeGetBoards();\n    const boards = useSelector(getBoards);\n    const [existingBoardName, setExistingBoardName] = useState('undefined');\n    const dispatch = useDispatch();\n    const link = decodeURIComponent(props.match.params.link);\n\n    const queryParams = new URLSearchParams(props.location.search);\n\n    const shouldSave = !queryParams.has('temp') || parseInt(queryParams.get('temp')+'', undefined) !== 1;\n\n    useEffect(() => {\n        if(!initialBoardListLoaded) {\n            return;\n        }\n\n        fetchBoardXmlFromLink(link)\n            .then(loadedBoardXml => {\n                setBoardXml(loadedBoardXml);\n\n                const boardName = extractBoardName(link);\n\n                const existingBoardList = boards.filter((board) => {\n                    return board.name === boardName;\n                });\n\n                if(shouldSave && existingBoardList.count() !== 0) {\n                    setExistingBoardName(boardName);\n                    setAskForImportMode(true);\n                    return;\n                }\n\n                processFile(boardName, loadedBoardXml, shouldSave? ImportMode.newBoard : ImportMode.tempBoard);\n            })\n            .catch(err => {\n                console.error(err);\n                dispatch(Notify.Command.error('Request failed', 'Failed to load board. Please check if import link points to a valid prooph board XML file!'));\n                setDoRedirect(true);\n                return;\n            })\n    }, [link, initialBoardListLoaded]);\n\n    const handleImportModalClose = () => {\n        setAskForImportMode(false);\n    }\n\n    const processFile = (boardName: string, xml: BoardXml, importMode: ImportMode) => {\n        if(importMode === ImportMode.newBoard) {\n            const newBoardId = uuid.v4();\n            dispatch(Action.Command.importNewBoard(boardName, xml, newBoardId));\n\n            setBoardId(newBoardId);\n        } else if (importMode === ImportMode.tempBoard) {\n            const newBoardId = uuid.v4();\n            dispatch(Action.Command.importNewBoard(boardName, xml, newBoardId, true));\n\n            setBoardId(newBoardId);\n        } else {\n            const existingBoardList = boards.filter((board) => {\n                return board.name === boardName;\n            });\n\n            if(existingBoardList.count() > 0) {\n                const existingBoard: BoardModel.Board = existingBoardList.first();\n\n                const updatedBoard = existingBoard.updateXml(xml, user.uid);\n                dispatch(Action.Command.importExistingBoard(updatedBoard));\n\n                // wait a moment, so that board xml gets updated before redirect to board workspace happens\n                window.setTimeout(() => {\n                    setBoardId(updatedBoard.uid);\n                }, 50);\n            }\n        }\n    };\n\n    const handleImportCopyClick = () => {\n        setAskForImportMode(false);\n        if(boardXml) {\n            processFile(extractBoardName(link) + \" (Copy)\", boardXml, ImportMode.newBoard);\n        }\n    };\n\n    const handleOverrideClick = () => {\n        setAskForImportMode(false);\n        if(boardXml) {\n            processFile(extractBoardName(link), boardXml, ImportMode.replaceBoard);\n        }\n    }\n\n    if(boardId && boards.filter(board => board.uid === boardId).count() === 1) {\n        return <Redirect to={Routes.compileInspectioBoardWorkspace(boardId)} />;\n    }\n\n    if(doRedirect) {\n        return <Redirect to={redirectPath} />;\n    }\n\n    return <>\n            <Dimmer active={true} className=\"page\"><Loader size=\"large\">Loading board from {link}</Loader></Dimmer>\n            <Modal open={askForImportMode} closeIcon={true} onClose={handleImportModalClose}>\n                <Modal.Header>{ props.t(\"insp.board.import\") }</Modal.Header>\n                <Modal.Content>\n                    <Message icon=\"warning\" warning={true} content={props.t('insp.board.import_existing_board').replace('%name%', existingBoardName)} />\n                </Modal.Content>\n                <Modal.Actions>\n                    <Button primary={true} onClick={handleImportCopyClick}><Icon name='plus' /> { props.t('insp.board.btn_import_as_new') }</Button>\n                    <Button basic={true} onClick={handleOverrideClick}>{ props.t('insp.board.btn_replace_board') }</Button>\n                </Modal.Actions>\n            </Modal>\n        </>;\n};\n\nexport default withRouter(withNamespaces()(BoardImportFromLink));\n","import * as React from 'react';\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {Dimmer, Loader} from \"semantic-ui-react\";\n\ninterface OwnProps {\n\n}\n\ntype MxGraphBoardRedirectProps = OwnProps & RouteComponentProps;\n\n// Special redirect component to force remounting of MxGraphBoard when a linked board is clicked\n// See mxgraph Graph.js Graph.prototype.labelLinkClicked\nconst MxGraphBoardRedirect = (props: MxGraphBoardRedirectProps) => {\n    const {href} = props.history.location.state;\n    window.setTimeout(() => {\n        props.history.replace(href);\n    }, 500);\n    return <Dimmer active={true} className=\"page\"><Loader size=\"large\">Loading Board</Loader></Dimmer>;\n};\n\nexport default withRouter(MxGraphBoardRedirect);\n","import * as React from 'react';\nimport {useEffect, useMemo, useRef, useState} from \"react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {withRouter} from \"react-router\";\nimport {RouteComponentProps} from \"react-router-dom\";\nimport {Button, ButtonGroup, Icon, Input, Modal} from \"semantic-ui-react\";\nimport {makeGetSidebarSelector} from \"../../../Layout/selectors/sidebar\";\nimport {makeGetCurrentUser} from \"../../../User/selectors/currentUser\";\nimport {toggleTimerModal} from \"../../actions/commands\";\nimport {BoardId} from \"../../model/Board\";\nimport {BoardTimer as BoardTimerAR, createBoardTimer} from \"../../model/BoardTimer\";\nimport {makeBoardByIdSelector} from \"../../selectors/board\";\nimport {useMouseSync} from \"../../hooks/useMouseSync\";\nimport {UserJoinedListener, UserLeftListener} from \"../../service/RemoteMouseSync\";\n\ninterface BoardTimerRouteMatchParams {\n    uid: BoardId;\n}\n\ninterface OwnProps {\n\n}\n\nconst convertToTimeNumber = (val: string, max: number, emptyZeros: boolean = false): string => {\n    if (val.length === 1) {\n        val = '0'+val;\n    }\n\n    if(val.length === 3) {\n        val = val.slice(1);\n    }\n\n    if (parseInt(val, undefined) === 0) {\n        val = emptyZeros? '00' : '';\n    }\n\n    if(parseInt(val, undefined) > max) {\n        val = `${max}`;\n    }\n\n    return val;\n}\n\nconst convertDurationToHms = (d: number): [number, number, number] => {\n    d = Math.floor(Number(d) / 1000);\n\n    let h = Math.floor(d / 3600);\n    let m = Math.floor(d % 3600 / 60);\n    let s = Math.floor(d % 3600 % 60);\n\n    if(h < 0) {\n        h = 0;\n    }\n\n    if(m < 0) {\n        m = 0;\n    }\n\n    if(s < 0) {\n        s = 0;\n    }\n\n    return [h, m, s];\n}\n\nconst convertHmsToDuration = (h: string, m: string, s: string): number => {\n    const hoursMillis = parseInt(h === ''? '0' : h, undefined) * 60 * 60 * 1000;\n    const minutesMillis = parseInt(m === ''? '0' : m, undefined) * 60 * 1000;\n    const secondsMillis = parseInt(s === ''? '0' : s, undefined) * 1000;\n\n    return hoursMillis + minutesMillis + secondsMillis;\n}\n\nconst calculateCurrentTime = (\n    deadline: number,\n    duration: number,\n    hourglass: HourglassState,\n    setHourglass: (hourglass: HourglassState) => void,\n    setCurrentTime: (time: TimeTuple) => void,\n    stop: () => void\n) => {\n    let timerHours = 0;\n    let timerMinutes = 0;\n    let timerSeconds = 0;\n    let timeLeft = 0;\n\n    timeLeft = deadline - Date.now();\n\n    const leftPercentage = Math.floor(timeLeft * 100 / duration);\n\n    if(leftPercentage > 50 && hourglass !== 'start') {\n        setHourglass('start');\n    }\n\n    if(leftPercentage <= 50 && leftPercentage > 5 && hourglass !== 'half') {\n        setHourglass('half');\n    }\n\n    if(leftPercentage <= 5 && hourglass !== 'end') {\n        setHourglass('end');\n    }\n\n    if(timeLeft > 0) {\n        [timerHours, timerMinutes, timerSeconds] = convertDurationToHms(timeLeft);\n    }\n\n    if (deadline > 0 && timeLeft < -10000) {\n        stop();\n    }\n\n    setCurrentTime([timerHours, timerMinutes, timerSeconds]);\n}\n\ntype HourglassState = 'start' | 'half' | 'end';\ntype TimeTuple = [number, number, number];\n\nlet intervalRef: number|null = null;\n\ntype BoardTimerProps = OwnProps & RouteComponentProps<BoardTimerRouteMatchParams> & WithNamespaces;\n\nconst BoardTimer = (props: BoardTimerProps) => {\n    const dispatch = useDispatch();\n    const minRef = useRef<Input>(null);\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const getBoardByIdSelector = useMemo(() => makeBoardByIdSelector(props.match.params.uid), []);\n    const board = useSelector(getBoardByIdSelector);\n    const visible = board && board.shouldShowTimerModal;\n    const user = useSelector(makeGetCurrentUser());\n    const [hours, setHours] = useState('');\n    const [minutes, setMinutes] = useState<string>('');\n    const [seconds, setSeconds] = useState('');\n    const [deadline, setDeadline] = useState(0);\n    const [duration, setDuration] = useState(0);\n    const [moderator, setModerator] = useState<string>();\n    const [isPlaying, setIsPlaying] = useState(false);\n    const [currentTime, setCurrentTime] = useState<TimeTuple>([0,0,0]);\n    const [pausedTime, setPausedTime] = useState<TimeTuple>();\n    const [hourglass, setHourglass] = useState<HourglassState>('start');\n    const [moderatorHasLeft, setModeratorHasLeft] = useState(false);\n    const [mouseSync, ] = useMouseSync();\n\n    useEffect(() => {\n        if(visible) {\n            window.setTimeout(() => {\n                if(minRef && minRef.current) {\n                    minRef.current.focus();\n                }\n            }, 200);\n        }\n    }, [visible])\n\n    const handleHoursChanged = (hoursVal: string) => {\n        setHours(convertToTimeNumber(hoursVal, 23));\n    }\n\n    const handleMinutesChanged = (minutesVal: string) => {\n        setMinutes(convertToTimeNumber(minutesVal, 59));\n    }\n\n    const handleSecondsChanged = (secondsVal: string) => {\n        setSeconds(convertToTimeNumber(secondsVal, 59));\n    }\n\n    const handleClose = () => {\n        dispatch(toggleTimerModal(props.match.params.uid, false));\n    }\n\n    const play = (ignorePausedTime: boolean = false) => {\n        let hoursMillis = parseInt(hours === ''? '0' : hours, undefined) * 60 * 60 * 1000;\n        let minutesMillis = parseInt(minutes === ''? '0' : minutes, undefined) * 60 * 1000;\n        let secondsMillis = parseInt(seconds === ''? '0' : seconds, undefined) * 1000;\n\n        if(pausedTime && !ignorePausedTime) {\n            [hoursMillis, minutesMillis, secondsMillis] = pausedTime;\n            hoursMillis = hoursMillis * 60 * 60 * 1000;\n            minutesMillis = minutesMillis * 60 * 1000;\n            secondsMillis = secondsMillis * 1000;\n        }\n\n        const calculatedDuration = hoursMillis + minutesMillis + secondsMillis;\n\n        if(!pausedTime || ignorePausedTime) {\n            setDuration(calculatedDuration);\n        } else {\n            setPausedTime(undefined);\n        }\n\n        const newDeadline = Date.now() + calculatedDuration;\n\n        setDeadline(newDeadline);\n        setIsPlaying(true);\n        setCurrentTime(convertDurationToHms(calculatedDuration));\n        setModerator(user.uid);\n        mouseSync.startBoardTimer(createBoardTimer(\n            props.match.params.uid,\n            newDeadline,\n            convertHmsToDuration(hours, minutes, seconds),\n            user.uid,\n        ))\n        dispatch(toggleTimerModal(props.match.params.uid, false))\n        calculateCurrentTime(\n            newDeadline,\n            calculatedDuration,\n            hourglass,\n            setHourglass,\n            setCurrentTime,\n            stop\n        );\n    }\n\n    const pause = (triggerMouseSync: boolean = true) => {\n        setIsPlaying(false);\n        setPausedTime([currentHours, currentMinutes, currentSeconds]);\n        if(triggerMouseSync) {\n            mouseSync.pauseBoardTimer(createBoardTimer(\n                props.match.params.uid,\n                deadline,\n                convertHmsToDuration(hours, minutes, seconds),\n                user.uid,\n                [currentHours, currentMinutes, currentSeconds]\n            ))\n        }\n\n    }\n\n    const stop = (triggerMouseSync: boolean = true) => {\n        setDuration(0);\n        setDeadline(0);\n        setIsPlaying(false);\n        setPausedTime(undefined);\n        setModerator(undefined);\n        setHourglass('start');\n        if(triggerMouseSync) {\n            mouseSync.stopBoardTimer(createBoardTimer(\n                props.match.params.uid,\n                0,\n                0,\n                ''\n            ))\n        }\n\n    }\n\n    const reset = () => {\n        setPausedTime(undefined);\n        setIsPlaying(false);\n        play(true);\n    }\n\n    const handleRemoteTimerStarted = (timer: BoardTimerAR) => {\n        setDeadline(timer.deadline);\n        setDuration(timer.duration);\n        setModerator(timer.moderator);\n        setIsPlaying(true);\n        calculateCurrentTime(\n            timer.deadline,\n            timer.duration,\n            hourglass,\n            setHourglass,\n            setCurrentTime,\n            stop\n        );\n\n        const [remoteHours, remoteMinutes, remoteSeconds] = convertDurationToHms(timer.duration);\n\n        console.log(\"remote time started: \", timer.toJSON());\n\n        setHours(convertToTimeNumber(remoteHours.toString(), 23));\n        setMinutes(convertToTimeNumber(remoteMinutes.toString(), 59));\n        setSeconds(convertToTimeNumber(remoteSeconds.toString(), 59));\n    }\n\n    const handleRemoteTimerStopped = (timer: BoardTimerAR) => {\n        console.log(\"Received remote timer stopped: \", timer.toJSON());\n        stop(false);\n    }\n\n    const handleRemoteTimerPaused = (timer: BoardTimerAR) => {\n        setIsPlaying(false);\n\n        console.log(\"remote paused time: \", timer.toJSON());\n\n        if(timer.pausedTime) {\n            setCurrentTime(timer.pausedTime);\n            setPausedTime(timer.pausedTime);\n        }\n    }\n\n    const handleRemoteUserJoined: UserJoinedListener = (userId: string, name: string, avatar: string, color: string) => {\n        if(userId === moderator) {\n            setModeratorHasLeft(false);\n        }\n    }\n\n    const handleRemoteUserLeft: UserLeftListener = (userId: string) => {\n        if(userId === moderator) {\n            setModeratorHasLeft(true);\n        }\n    }\n\n    useEffect(() => {\n        if(isPlaying) {\n            intervalRef = window.setInterval(() => {\n                calculateCurrentTime(\n                    deadline,\n                    duration,\n                    hourglass,\n                    setHourglass,\n                    setCurrentTime,\n                    stop\n                );\n            }, 1000);\n\n            calculateCurrentTime(\n                deadline,\n                duration,\n                hourglass,\n                setHourglass,\n                setCurrentTime,\n                stop\n            );\n        }\n\n        return () => {\n            if(intervalRef) {\n                clearInterval(intervalRef);\n            }\n        }\n    }, [isPlaying, hourglass, duration, deadline])\n\n    useEffect(() => {\n        console.log(\"attach listeners\");\n        mouseSync.onBoardTimerStarted(handleRemoteTimerStarted);\n        mouseSync.onBoardTimerStopped(handleRemoteTimerStopped);\n        mouseSync.onBoardTimerPaused(handleRemoteTimerPaused);\n        mouseSync.onUserJoined(handleRemoteUserJoined);\n        mouseSync.onUserLeft(handleRemoteUserLeft);\n\n        return () => {\n            console.log(\"detach listeners\");\n            mouseSync.offBoardTimerStarted(handleRemoteTimerStarted);\n            mouseSync.offBoardTimerPaused(handleRemoteTimerPaused);\n            mouseSync.offBoardTimerStopped(handleRemoteTimerStopped);\n            mouseSync.offUserJoined(handleRemoteUserJoined);\n            mouseSync.offUserLeft(handleRemoteUserLeft);\n        }\n    }, [props.match.params.uid, hours, minutes, seconds, moderator])\n\n    useEffect(() => {\n        stop();\n    }, [props.match.params.uid])\n\n    const [currentHours, currentMinutes, currentSeconds] = currentTime;\n    const isTimeLeft = (currentHours + currentMinutes + currentSeconds) > 0;\n    const isModerator = moderator === user.uid;\n    const canModerate = !moderator || isModerator || moderatorHasLeft;\n\n    return (<>\n        {deadline > 0 && <div style={{\n            position: \"absolute\",\n            left: sidebar.width + 20 + \"px\",\n            top: \"60px\",\n            backgroundColor: 'rgb(249 251 253 / 52%)',\n            cursor: 'pointer'\n        }}\n              onClick={() => dispatch(toggleTimerModal(props.match.params.uid, true))}\n        >\n            <p style={{padding: '20px', fontWeight: 'bold', fontSize: '20px', color: isTimeLeft? '#939393' : '#c10303'}} className={isTimeLeft? '' : 'blink'}>\n                <Icon name={'hourglass ' + (isTimeLeft? hourglass : 'end') as any}/>&nbsp;&nbsp;\n                {convertToTimeNumber(currentHours.toString(), 23, true)}&nbsp;:&nbsp;\n                {convertToTimeNumber(currentMinutes.toString(), 59, true)}&nbsp;:&nbsp;\n                {convertToTimeNumber(currentSeconds.toString(), 59, true)}\n            </p>\n        </div>}\n        <Modal open={visible} closeIcon={true} onClose={handleClose} size=\"tiny\">\n            <Modal.Header>{props.t('insp.board.timer.modal_header')}</Modal.Header>\n            <Modal.Content>\n                <p style={{textAlign: \"center\", fontWeight: \"bold\", fontSize: \"24px\"}}>\n                    <Input name=\"hours\"\n                           transparent={true}\n                           type=\"number\"\n                           min={0}\n                           max={23}\n                           placeholder=\"00\"\n                           size=\"large\"\n                           style={{width: \"55px\"}}\n                           value={deadline > 0? convertToTimeNumber(currentHours.toString(), 23) : hours}\n                           onKeyDown={(e: KeyboardEvent) => e.key === 'Enter'? play() : true}\n                           onChange={(e, data) => handleHoursChanged(data.value)}\n                           disabled={deadline > 0}\n                    />\n                    <span style={{paddingRight: \"20px\"}}>&nbsp;:&nbsp;</span>\n                    <Input name=\"minutes\"\n                           ref={minRef}\n                           transparent={true}\n                           type=\"number\"\n                           min={0}\n                           max={59}\n                           placeholder=\"00\"\n                           size=\"large\"\n                           style={{width: \"55px\"}}\n                           value={deadline > 0? convertToTimeNumber(currentMinutes.toString(), 59) : minutes}\n                           onKeyDown={(e: KeyboardEvent) => e.key === 'Enter' ? play() : true}\n                           onChange={(e, data) => handleMinutesChanged(data.value)}\n                           disabled={deadline > 0}\n                    />\n                    <span style={{paddingRight: \"20px\"}}>&nbsp;:&nbsp;</span>\n                    <Input name=\"seconds\"\n                           transparent={true}\n                           type=\"number\"\n                           min={0}\n                           max={59}\n                           placeholder=\"00\"\n                           size=\"large\"\n                           style={{width: \"55px\"}}\n                           value={deadline > 0? convertToTimeNumber(currentSeconds.toString(), 59) : seconds}\n                           onKeyDown={(e: KeyboardEvent) => e.key === 'Enter'? play() : true}\n                           onChange={(e, data) => handleSecondsChanged(data.value)}\n                           disabled={deadline > 0}\n                    />\n                </p>\n            </Modal.Content>\n            <Modal.Actions style={{textAlign: \"center\"}}>\n                <ButtonGroup>\n                    {!isPlaying && <Button icon=\"play\" onClick={() => play()} disabled={!canModerate}/>}\n                    {isPlaying && <Button icon=\"pause\" onClick={() => pause()} disabled={!canModerate}/>}\n                    <Button icon=\"stop\" onClick={() => stop()} disabled={!isPlaying || !canModerate} />\n                    <Button icon=\"undo\" onClick={() => reset()} disabled={deadline === 0 || !canModerate} />\n                </ButtonGroup>\n            </Modal.Actions>\n        </Modal>\n    </>);\n};\n\nexport default withRouter(withNamespaces()(BoardTimer));\n","import { History } from 'history'\nimport * as React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider } from 'react-redux';\nimport {\n    BrowserRouter as Router,\n    Redirect,\n    Route,\n    RouteComponentProps, Switch, withRouter\n} from \"react-router-dom\";\nimport { Store } from 'redux';\nimport { Button, Container, Grid, GridColumn, GridRow, Icon, Image, Menu, MenuItem, Segment } from 'semantic-ui-react';\nimport i18n from './i18n';\nimport { BoardOverview, EditBoard, MxGraphBoard, UserProfile} from \"./InspectioBoards\";\nimport BoardHistory from \"./InspectioBoards/components/BoardHistory\";\nimport BoardInvitation from \"./InspectioBoards/components/BoardInvitation\";\nimport TeamInvitation from \"./InspectioTeams/components/TeamInvitation\";\nimport TeamOverview from \"./InspectioTeams/components/TeamOverview\";\nimport * as Layout from './Layout';\nimport Sidebar from \"./Layout/Sidebar\";\nimport {NotificationContainer} from './NotificationSystem';\nimport { ApplicationState } from './reducer';\nimport * as Routes from './routes';\nimport UpdatePage from \"./Updates/components/UpdatePage\";\nimport BoardElementDetails from \"./InspectioBoards/components/BoardElementDetails\";\nimport AcceptOrganizationInvitation from \"./Organization/components/AcceptOrganizationInvitation\";\nimport CodyConsole from \"./InspectioBoards/components/CodyConsole\";\nimport OrganizationOverview from \"./Organization/components/OrganizationOverview\";\nimport BoardImportFromLink from \"./InspectioBoards/components/BoardImportFromLink\";\nimport MxGraphBoardRedirect from \"./InspectioBoards/components/MxGraphBoardRedirect\";\n// tslint:disable-next-line\nimport './theme/semantic/semantic.css';\n// tslint:disable-next-line\nimport './theme/css/style.css';\nimport BoardTimer from \"./InspectioBoards/components/MxGraphBoard/BoardTimer\";\n\n\n\n\n// The Main component renders one of provided\n// Routes (provided that one matches).\nconst Main = () => (\n    <Switch>\n        <Redirect exact={true} path={Routes.root} to={Routes.inspectio}/>\n        <Route exact={true} path={Routes.inspectio} component={BoardOverview}/>\n        <Route exact={true} path={Routes.inspectioEditBoard} component={EditBoard}/>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={MxGraphBoard}/>\n        <Route exact={true} path={Routes.boardInvitation} component={BoardInvitation} />\n        <Route exact={true} path={Routes.userProfile} component={UserProfile} />\n        <Route exact={true} path={Routes.teamOverview} component={TeamOverview} />\n        <Route exact={true} path={Routes.teamInvitation} component={TeamInvitation} />\n        <Route exact={true} path={Routes.Updates} component={UpdatePage} />\n        <Route exact={true} path={Routes.BoardRedirect} component={MxGraphBoardRedirect} />\n        <Route exact={true} path={Routes.organizationOverview} component={OrganizationOverview} />\n        <Route exact={true} path={Routes.organizationInvitation} component={AcceptOrganizationInvitation} />\n        <Route exact={true} path={Routes.boardImportLink} component={BoardImportFromLink} />\n    </Switch>\n);\n\nconst RootFC = (props: RouteComponentProps) => (\n    <Container fluid={true}>\n        <Layout.TopMenu />\n        <div style={{zIndex:103,position:\"fixed\",display:\"flex\",flexDirection:\"column\",top:\"0\",bottom:\"0\",left:\"0\",overflowX:\"hidden\",flex:\"1\"}}>\n        <Sidebar />\n        </div>\n        <div style={{marginLeft:\"250px\", paddingTop:\"90px\"}}>\n        <Main/>\n        </div>\n        <NotificationContainer/>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={CodyConsole} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardHistory} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardElementDetails} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardTimer} />\n    </Container>\n);\n\nconst Root = withRouter(RootFC);\n\n// Separate props from state and props from dispatch to their own interfaces.\n\n// Any additional component props go here.\ninterface OwnProps {\n    store: Store<ApplicationState>\n    history: History\n}\n\n// Create an intersection type of the component props and our Redux props.\ntype AllProps =  OwnProps\n\nclass App extends React.Component<AllProps> {\n    public render() {\n        const { store } = this.props;\n\n        return (\n            <I18nextProvider i18n={i18n}>\n                <Provider store={store}>\n                    <Router basename=\"/\">\n                        <Root/>\n                    </Router>\n                </Provider>\n            </I18nextProvider>\n        )\n    }\n}\n\nexport default App;\n","import * as React from 'react';\nimport {Button, Modal} from \"semantic-ui-react\";\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\n\ninterface OwnProps {\n    open: boolean;\n    onClose: () => void;\n    headerKey: 'header_team' | 'header_history'\n}\n\ntype CollaborationInfoModalProps = OwnProps & WithNamespaces;\n\nconst CollaborationInfoModal = (props: CollaborationInfoModalProps) => {\n    return (\n        <Modal open={props.open} closeIcon={false} onClose={props.onClose} size=\"tiny\">\n            <Modal.Header>{props.t('insp.collaboration_modal.'+props.headerKey)}</Modal.Header>\n            <Modal.Content>\n                <p>{props.t('insp.collaboration_modal.text')}</p>\n            </Modal.Content>\n            <Modal.Actions>\n                <Button className=\"positive\" href=\"https://prooph-board.com#pricing\" target=\"_blank\">\n                    Upgrade\n                </Button>\n            </Modal.Actions>\n        </Modal>\n    );\n};\n\nexport default withNamespaces()(CollaborationInfoModal);\n","import * as React from 'react';\nimport {withNamespaces, WithNamespaces} from \"react-i18next\";\nimport {useDispatch} from \"react-redux\";\nimport {RouteComponentProps, withRouter} from \"react-router\";\nimport {NavLink} from \"react-router-dom\";\nimport { pure } from 'recompose';\nimport {Dropdown} from \"semantic-ui-react\";\nimport {\n    toggleBoardHistory,\n    toggleCodyConsole,\n    toggleElementDetails,\n    triggerExportBoard,\n    triggerImportBoard\n} from \"../../../InspectioBoards/actions/commands\";\nimport {BoardId} from \"../../../InspectioBoards/model/Board\";\nimport * as Routes from \"../../../routes\";\nimport CollaborationInfoModal from \"../CollaborationInfoModal\";\nimport {useState} from \"react\";\n\ninterface BoardTopMenuRouteMatchParams {\n    uid: BoardId;\n}\n\ntype BoardTopMenuProps =  WithNamespaces & RouteComponentProps<BoardTopMenuRouteMatchParams>;\n\nconst BoardTopMenu = pure((props: BoardTopMenuProps) => {\n\n    const [infoModalOpen, setInfoModalOpen] = useState(false);\n\n    const dispatch = useDispatch();\n\n    return <><Dropdown item={true} icon=\"ellipsis vertical\">\n        <Dropdown.Menu direction=\"left\">\n            <Dropdown.Item icon=\"history\" text=\"Activity\" onClick={() => setInfoModalOpen(true)} />\n            <Dropdown.Item\n                icon={'clipboard outline'}\n                text={props.t('insp.top_menu.element_details')}\n                onClick={() => dispatch(toggleElementDetails(props.match.params.uid, true, false))}\n            />\n            <Dropdown.Item icon=\"code\" text=\"Cody\" onClick={() => dispatch(toggleCodyConsole(props.match.params.uid, true)) } />\n            <Dropdown.Item icon=\"cog\" text=\"Settings\" to={Routes.compileInspectioBoardEdit(props.match.params.uid)} as={NavLink}/>\n            <Dropdown.Item icon=\"download\" text=\"Import Board\" onClick={() => dispatch(triggerImportBoard(props.match.params.uid))} />\n            <Dropdown.Item icon=\"upload\" text=\"Export Board\" onClick={() => dispatch(triggerExportBoard(props.match.params.uid))} />\n            <Dropdown.Item icon=\"question\" text=\"FAQs\" as=\"a\" href=\"https://wiki.prooph-board.com\" target=\"_blank\" />\n        </Dropdown.Menu>\n    </Dropdown>\n        <CollaborationInfoModal open={infoModalOpen} onClose={() => setInfoModalOpen(false)} headerKey={'header_history'} />\n    </>});\n\nexport default withNamespaces()(withRouter(BoardTopMenu));\n","import * as React from 'react';\nimport {useState} from \"react\";\nimport {Button, Icon, MenuItem} from \"semantic-ui-react\";\nimport CollaborationInfoModal from \"./CollaborationInfoModal\";\n\ninterface OwnProps {\n\n}\n\ntype ShareBoardButtonProps = OwnProps;\n\nconst ShareBoardButton = (props: ShareBoardButtonProps) => {\n    const [open, setOpen] = useState(false);\n\n    const handleClose = () => {\n        setOpen(false);\n    }\n\n    return <>\n        <MenuItem>\n            <Button icon={true} className=\"share\" onClick={() => setOpen(true)}><Icon name=\"share alternate\"/>&nbsp;share</Button>\n        </MenuItem>\n        <CollaborationInfoModal open={open} onClose={handleClose} headerKey='header_team' />\n    </>\n};\n\nexport default ShareBoardButton;\n","import * as React from 'react';\nimport { withNamespaces, WithNamespaces } from 'react-i18next';\nimport {useSelector} from \"react-redux\";\nimport {Route, RouteComponentProps, withRouter} from 'react-router';\nimport {Breadcrumb, Menu, MenuItem} from 'semantic-ui-react';\nimport * as Routes from '../../../routes';\nimport {makeGetSidebarSelector} from \"../../../Layout/selectors/sidebar\";\nimport BoardOverviewCrumb from \"../../../Layout/Breadcrumb/BoardOverviewCrumb\";\nimport UpdatesCrumb from \"../../../Layout/Breadcrumb/UpdatesCrumb\";\nimport BoardCrumb from \"../../../Layout/Breadcrumb/BoardCrumb\";\nimport BoardTopMenu from \"./BoardTopMenu\";\nimport ShareBoardButton from \"../ShareBoardButton\";\n\ntype TopMenuProps =  WithNamespaces & RouteComponentProps<{uid?: string}>;\n\nconst TopMenu = (props: TopMenuProps) => {\n    const sidebar = useSelector(makeGetSidebarSelector());\n    const isBoardWorkspace = Routes.isInspectioBoardWorkspace(props.location.pathname);\n\n    const paddingLeft = isBoardWorkspace? (sidebar.width + 20) + 'px' : '270px';\n\n    return (<Menu fixed=\"top\" inverted={false} id=\"topmenu\" style={{paddingLeft}}>\n        <Route path={Routes.inspectio}>\n            <MenuItem>\n                <Breadcrumb>\n                    <Route exact={true} path={[Routes.inspectio, Routes.inspectioBoardWorkspace, Routes.inspectioEditBoard]} component={BoardOverviewCrumb} />\n                    <Route exact={true} path={Routes.Updates} component={UpdatesCrumb} />\n                    <Route exact={true} path={[Routes.inspectioBoardWorkspace, Routes.inspectioEditBoard]} component={BoardCrumb} />\n                </Breadcrumb>\n            </MenuItem>\n        </Route>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={ShareBoardButton} />\n        <Menu.Menu position='right' />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardTopMenu} />\n    </Menu>);\n};\n\nexport default withNamespaces()(withRouter(TopMenu));\n","import { History } from 'history'\nimport * as React from 'react';\nimport { I18nextProvider } from 'react-i18next';\nimport { Provider } from 'react-redux';\nimport {\n    BrowserRouter as Router,\n    Redirect,\n    Route,\n    RouteComponentProps, Switch, withRouter\n} from \"react-router-dom\";\nimport { Store } from 'redux';\nimport { Button, Container, Grid, GridColumn, GridRow, Icon, Image, Menu, MenuItem, Segment } from 'semantic-ui-react';\nimport i18n from './i18n';\nimport { BoardOverview, EditBoard, MxGraphBoard, UserProfile} from \"./InspectioBoards\";\nimport BoardHistory from \"./InspectioBoards/components/BoardHistory\";\nimport Sidebar from \"./Layout/Sidebar\";\nimport {NotificationContainer} from './NotificationSystem';\nimport { ApplicationState } from './reducer';\nimport * as Routes from './routes';\nimport UpdatePage from \"./Updates/components/UpdatePage\";\nimport BoardElementDetails from \"./InspectioBoards/components/BoardElementDetails\";\nimport CodyConsole from \"./InspectioBoards/components/CodyConsole\";\nimport MxGraphBoardRedirect from \"./InspectioBoards/components/MxGraphBoardRedirect\";\nimport TopMenu from \"./standalone/components/Layout/TopMenu\";\nimport BoardImportFromLink from \"./InspectioBoards/components/BoardImportFromLink\";\n// tslint:disable-next-line\nimport './theme/semantic/semantic.css';\n// tslint:disable-next-line\nimport './theme/css/style.css';\n\n\n\n// The Main component renders one of provided\n// Routes (provided that one matches).\nconst Main = () => (\n    <Switch>\n        <Redirect exact={true} path={Routes.root} to={Routes.inspectio}/>\n        <Route exact={true} path={Routes.inspectio} component={BoardOverview}/>\n        <Route exact={true} path={Routes.inspectioEditBoard} component={EditBoard}/>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={MxGraphBoard}/>\n        <Route exact={true} path={Routes.Updates} component={UpdatePage} />\n        <Route exact={true} path={Routes.BoardRedirect} component={MxGraphBoardRedirect} />\n    </Switch>\n);\n\nconst RootFC = (props: RouteComponentProps) => (\n    <Container fluid={true}>\n        <TopMenu />\n        <div style={{zIndex:103,position:\"fixed\",display:\"flex\",flexDirection:\"column\",top:\"0\",bottom:\"0\",left:\"0\",overflowX:\"hidden\",flex:\"1\"}}>\n            <Sidebar />\n        </div>\n        <div style={{marginLeft:\"250px\", paddingTop:\"90px\"}}>\n            <Main/>\n        </div>\n        <NotificationContainer/>\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={CodyConsole} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardHistory} />\n        <Route exact={true} path={Routes.inspectioBoardWorkspace} component={BoardElementDetails} />\n        <Route exact={true} path={Routes.boardImportLink} component={BoardImportFromLink} />\n    </Container>\n);\n\nconst Root = withRouter(RootFC);\n\n// Separate props from state and props from dispatch to their own interfaces.\n\n// Any additional component props go here.\ninterface OwnProps {\n    store: Store<ApplicationState>\n    history: History\n}\n\n// Create an intersection type of the component props and our Redux props.\ntype AllProps =  OwnProps\n\nclass App extends React.Component<AllProps> {\n    public render() {\n        const { store } = this.props;\n\n        const baseName = window.location.pathname.search(/^\\/free-version/) === 0 ? '/free-version/' : '/';\n\n        return (\n            <I18nextProvider i18n={i18n}>\n                <Provider store={store}>\n                    <Router basename={baseName}>\n                        <Root/>\n                    </Router>\n                </Provider>\n            </I18nextProvider>\n        )\n    }\n}\n\nexport default App;\n","import { Map } from 'immutable';\nimport { Reducer } from 'redux';\nimport {\n    AUTHENTICATE\n} from \"../actions/constants\";\nimport { AuthAction } from './index';\n\nexport interface AuthState extends Map<string, any>{\n}\n\nexport const initialState = Map<string, null>();\n\nconst reducer: Reducer<AuthState, AuthAction> = (state: AuthState = initialState, action: AuthAction): AuthState => {\n    switch (action.type) {\n        case AUTHENTICATE:\n            return state.set('token', action.payload.auth.token);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as applyAuth };","import { fromJS } from 'immutable';\nimport { combineReducers } from 'redux-immutable';\nimport { ActionType } from 'typesafe-actions';\nimport * as Commands from '../actions/commands';\nimport { applyAuth, AuthState } from './applyAuth';\n\nexport type AuthAction = ActionType<typeof Commands>;\n\nexport interface InspectioAuthState {\n    auth: AuthState\n}\n\nexport const authReducer = combineReducers<InspectioAuthState, AuthAction>({\n    auth: applyAuth,\n}, () => fromJS({}));","import {Map} from \"immutable\";\nimport {Reducer} from 'redux';\nimport {\n    ACTIVE_GRAPH_ELEMENT_CHANGED,\n    ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED,\n    ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED,\n} from '../actions/constants';\nimport {Node, NodeId} from \"../model/Graph\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface EdgeData {\n    source: NodeId,\n    target: NodeId,\n}\n\nexport interface ActiveGraphElement {\n    id: string,\n    type: string,\n    label: string,\n    metadata?: string,\n    edgeData?: EdgeData,\n    updateMetadata: (schema: string) => void;\n    updateSimilarElements: (elementIds: string[], schema: string) => void;\n}\n\nexport interface ActiveGraphElementState extends Map<string, ActiveGraphElement | undefined> {\n}\n\nexport const initialState: ActiveGraphElementState = Map<string, ActiveGraphElement>();\n\nconst reducer: Reducer<ActiveGraphElementState, InspectioBoardsAction> = (state: ActiveGraphElementState = initialState, action: InspectioBoardsAction): ActiveGraphElementState => {\n    switch (action.type) {\n        case ACTIVE_GRAPH_ELEMENT_CHANGED:\n            if(!action.payload.element) {\n                return state.set(action.payload.boardId, undefined);\n            }\n\n            return state.set(action.payload.boardId, {\n                id: action.payload.element.id,\n                type: action.payload.element.type,\n                label: action.payload.element.label,\n                metadata: action.payload.element.metadata || undefined,\n                edgeData: action.payload.element.edgeData || undefined,\n                updateMetadata: action.payload.element.updateMetadata,\n                updateSimilarElements: action.payload.element.updateSimilarElements,\n            });\n        case ACTIVE_GRAPH_ELEMENT_LABEL_CHANGED:\n            if(state.getIn([action.payload.boardId, 'id']) !== action.payload.elementId) {\n                return state;\n            }\n\n            return state.setIn([action.payload.boardId, 'label'], action.payload.label);\n        case ACTIVE_GRAPH_ELEMENT_METADATA_CHANGED:\n            if(state.getIn([action.payload.boardId, 'id']) !== action.payload.elementId) {\n                return state;\n            }\n\n            return state.setIn([action.payload.boardId, 'metadata'], action.payload.metadata);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveActiveGraphElementReducer };\n","import {List, Map} from 'immutable';\nimport {forEach} from 'lodash';\nimport {Reducer} from 'redux';\nimport {Action as TeamAction} from \"../../InspectioTeams\";\nimport {Team} from \"../../InspectioTeams/model\";\nimport * as Socket from '../../Socket';\nimport {UserModel} from \"../../User/model\";\nimport {\n    ABORT_BOARD_DELETION,\n    ADD_BOARD,\n    BOARD_ACCESS_REVOKED,\n    BOARD_EXPORTED,\n    BOARD_IMPORT_STARTED,\n    BOARD_IMPORTED,\n    CONFIRM_DELETE_BOARD,\n    DELETE_BOARD,\n    FORCE_UPDATE_BOARDS,\n    LOCAL_CHANGE_SET_AS_HEAD_VERSION,\n    RENAME_BOARD,\n    SAVE_BOARD,\n    SET_BOARD_DETAILS_FETCHED,\n    SET_BOARD_TO_SNAPSHOT,\n    TOGGLE_BOARD_HISTORY,\n    TOGGLE_CODY_CONSOLE,\n    TOGGLE_ELEMENT_DETAILS,\n    TOGGLE_TIMER_MODAL,\n    TOGGLE_VIDEO_SESSION,\n    TRIGGER_EXPORT_BOARD,\n    TRIGGER_IMPORT_BOARD,\n    UPDATE_BOARDS,\n    USER_BOARD_MOVED_TO_ORGANIZATION,\n} from '../actions/constants';\nimport {BoardModel, BoardVersioning} from '../model';\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardsState extends Map<string, BoardModel.Board> {\n}\n\nexport const initialState: BoardsState = Map<string, BoardModel.Board>();\n\nconst reducer: Reducer<BoardsState, InspectioBoardsAction> = (state: BoardsState = initialState, action: InspectioBoardsAction): BoardsState => {\n    switch (action.type) {\n        case ADD_BOARD:\n            const newBoard = action.payload.board;\n            return state.set(newBoard.uid, newBoard);\n        case UPDATE_BOARDS:\n            const boards = action.payload;\n            forEach(boards, (board: BoardModel.Board) => {\n                // Do not override already fetched boards\n                if(!state.get(board.uid)) {\n                    state = state.set(board.uid, board)\n                } else {\n                    const existingBoard = state.get(board.uid);\n                    state = state.set(board.uid, existingBoard!.syncSummaryInfo(board));\n                }\n            });\n            return state;\n        case FORCE_UPDATE_BOARDS:\n            forEach(action.payload, (board: BoardModel.Board) => {\n                state = state.set(board.uid, board)\n            });\n            return state;\n        case SET_BOARD_TO_SNAPSHOT:\n            let boardToUpdate: BoardModel.Board | undefined = state.get(action.payload.snapshot.boardId);\n\n            if(boardToUpdate) {\n                boardToUpdate = boardToUpdate.updateXmlFromSnapshot(action.payload.snapshot);\n                boardToUpdate = boardToUpdate.set('detailsFetched', true);\n                state = state.set(action.payload.snapshot.boardId, boardToUpdate);\n            }\n            return state;\n        case SET_BOARD_DETAILS_FETCHED:\n            let boardToUpdateFetched: BoardModel.Board | undefined = state.get(action.payload.boardId);\n\n            if(boardToUpdateFetched) {\n                boardToUpdateFetched = boardToUpdateFetched.set('detailsFetched', true);\n                boardToUpdateFetched = boardToUpdateFetched.set('writeAccess', action.payload.writeAccess);\n                state = state.set(action.payload.boardId, boardToUpdateFetched);\n            }\n            return state;\n        case SAVE_BOARD:\n            let boardToSave = state.get(action.payload.board.uid);\n\n            if(boardToSave) {\n                boardToSave = boardToSave.updateXmlAndVersionFromBoard(action.payload.board);\n                state = state.set(action.payload.board.uid, boardToSave);\n            }\n            return state;\n        case RENAME_BOARD:\n            return  state.setIn([action.payload.board.uid], action.payload.board);\n        case CONFIRM_DELETE_BOARD:\n            return state.setIn([action.payload.boardId, 'inDeletion'], true);\n        case ABORT_BOARD_DELETION:\n            return state.setIn([action.payload.boardId, 'inDeletion'], false);\n        case DELETE_BOARD:\n            return state.removeIn([action.payload.boardId]);\n        case LOCAL_CHANGE_SET_AS_HEAD_VERSION:\n            if (Socket.Action.Action.isAcknowledged(action.payload.socketCmd)) {\n                const path = [action.payload.socketCmd.payload.board, 'version'];\n                const {userId, version} = action.payload.socketCmd.payload;\n                const headVersion = new BoardVersioning.BoardVersion({\n                    userId,\n                    version,\n                });\n                const currentVersion: BoardVersioning.BoardVersion = state.getIn(path);\n\n                if (currentVersion.equals(headVersion)) {\n                    return state.setIn(path, currentVersion.asHead());\n                }\n            }\n\n            return state;\n        case TRIGGER_IMPORT_BOARD:\n            return state.setIn([action.payload.boardId, 'shouldImport'], true);\n        case BOARD_IMPORTED:\n        case BOARD_IMPORT_STARTED:\n            return state.setIn([action.payload.boardId, 'shouldImport'], false);\n        case TRIGGER_EXPORT_BOARD:\n            return state.setIn([action.payload.boardId, 'shouldExport'], true);\n        case BOARD_EXPORTED:\n            return state.setIn([action.payload.boardId, 'shouldExport'], false);\n        case TOGGLE_BOARD_HISTORY:\n            if (action.payload.visible) {\n                state = state.setIn([action.payload.boardId, 'shouldShowElementDetails'], false);\n            }\n\n            return state.setIn([action.payload.boardId, 'shouldShowHistory'], action.payload.visible);\n        case TOGGLE_ELEMENT_DETAILS:\n            if (action.payload.visible) {\n                state = state.setIn([action.payload.boardId, 'shouldShowHistory'], false);\n            }\n\n            state = state.setIn([action.payload.boardId, 'shouldFocusMetadataEditor'], action.payload.focusEditor);\n\n            return state.setIn([action.payload.boardId, 'shouldShowElementDetails'], action.payload.visible);\n        case TOGGLE_CODY_CONSOLE:\n            return state.setIn([action.payload.boardId, 'shouldShowCodyConsole'], action.payload.visible);\n        case TOGGLE_TIMER_MODAL:\n            state = state.setIn([action.payload.boardId, 'shouldShowTimerModal'], action.payload.visible);\n            return state;\n        case TOGGLE_VIDEO_SESSION:\n            state = state.setIn([action.payload.boardId, 'videoSessionActive'], action.payload.active);\n            return state;\n        case BOARD_ACCESS_REVOKED:\n            const members: List<UserModel.UserId> = state.getIn([action.payload.boardId, 'sharedWith'], List());\n            return state.setIn([action.payload.boardId, 'sharedWith'], members.filter(m => m !== action.payload.userId));\n        case USER_BOARD_MOVED_TO_ORGANIZATION:\n            return state.set(action.payload.uid, action.payload);\n        // Team Events\n        case TeamAction.Type.TEAM_ACCESS_TO_BOARD_GRANTED:\n            const teamsAdd: List<Team.TeamId> = state.getIn([action.payload.boardId, 'assignedTeams'], List());\n            return state.setIn([action.payload.boardId, 'assignedTeams'], teamsAdd.push(action.payload.teamId));\n        case TeamAction.Type.TEAM_ACCESS_TO_BOARD_REVOKED:\n            const teamsRevoke: List<Team.TeamId> = state.getIn([action.payload.boardId, 'assignedTeams'], List());\n            return state.setIn([action.payload.boardId, 'assignedTeams'], teamsRevoke.filter(t => t !== action.payload.teamId));\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardReducer };\n","import {List, Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {\n    BOARD_CLIENT_FETCHED, BOARD_CLIENT_NOT_CONFIGURED, BOARD_CLIENT_SECRET_FETCHED,\n} from '../actions/constants';\nimport {BoardClient} from \"../model/BoardClient\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardClientsState extends Map<string, BoardClient|null> {\n}\n\nexport const initialState: BoardClientsState = Map<string, BoardClient|null>();\n\nconst reducer: Reducer<BoardClientsState, InspectioBoardsAction> = (state: BoardClientsState = initialState, action: InspectioBoardsAction): BoardClientsState => {\n    switch (action.type) {\n        case BOARD_CLIENT_FETCHED:\n            return state.set(action.payload.boardId, action.payload.client);\n        case BOARD_CLIENT_NOT_CONFIGURED:\n            return state.set(action.payload.boardId, null);\n        case BOARD_CLIENT_SECRET_FETCHED:\n            return state.setIn([action.payload.boardId, 'clientSecret'], action.payload.clientSecret);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardClientsReducer };\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    BOARD_GRAPH_ELEMENTS_FETCHED,\n} from '../actions/constants';\nimport {BoardGraphElement} from \"../model\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardGraphElementsState extends Map<string, Map<string, BoardGraphElement.BoardGraphElement>> {\n}\n\nexport const initialState: BoardGraphElementsState = Map<string, Map<string, BoardGraphElement.BoardGraphElement>>();\n\nconst reducer: Reducer<BoardGraphElementsState, InspectioBoardsAction> = (state: BoardGraphElementsState = initialState, action: InspectioBoardsAction): BoardGraphElementsState => {\n    switch (action.type) {\n        case BOARD_GRAPH_ELEMENTS_FETCHED:\n            const boardElementsState = state.get(action.payload.boardId) || Map<string, BoardGraphElement.BoardGraphElement>();\n            return state.set(action.payload.boardId, upsertAggregates(boardElementsState, action.payload.elements));\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardGraphElementsReducer };\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {updateAggregate, upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {BOARD_INVITATION_RESENT, BOARD_INVITATION_REVOKED, OPEN_BOARD_INVITATIONS_FETCHED} from '../actions/constants';\nimport {BoardInvitation} from \"../model\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardInvitationState extends Map<string, BoardInvitation.BoardInvitation> {\n}\n\nexport const initialState: BoardInvitationState = Map<string, BoardInvitation.BoardInvitation>();\n\nconst reducer: Reducer<BoardInvitationState, InspectioBoardsAction> = (state: BoardInvitationState = initialState, action: InspectioBoardsAction): BoardInvitationState => {\n    switch (action.type) {\n        case OPEN_BOARD_INVITATIONS_FETCHED:\n            return upsertAggregates(state, action.payload.boardInvitations);\n        case BOARD_INVITATION_RESENT:\n            return updateAggregate(state, action.payload.boardInvitation);\n        case BOARD_INVITATION_REVOKED:\n            return updateAggregate(state, action.payload.boardInvitation);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardInvitationReducer };\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {updateAggregate, upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {BOARD_PERMISSIONS_FOR_TEAMS_FETCHED, TEAM_BOARD_PERMISSIONS_CHANGED} from '../actions/constants';\nimport {BoardPermissionForTeam} from \"../model\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardPermissionsForTeamsState extends Map<string, BoardPermissionForTeam.BoardPermissionForTeam> {\n}\n\nexport const initialState: BoardPermissionsForTeamsState = Map<string, BoardPermissionForTeam.BoardPermissionForTeam>();\n\nconst reducer: Reducer<BoardPermissionsForTeamsState, InspectioBoardsAction> = (state: BoardPermissionsForTeamsState = initialState, action: InspectioBoardsAction): BoardPermissionsForTeamsState => {\n    switch (action.type) {\n        case BOARD_PERMISSIONS_FOR_TEAMS_FETCHED:\n            return upsertAggregates(state, action.payload.boardPermissions);\n        case TEAM_BOARD_PERMISSIONS_CHANGED:\n            return updateAggregate(state, action.payload);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardPermissionsForTeamsReducer };\n","import {Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    BOARD_ACCESS_REVOKED,\n    BOARD_PERMISSIONS_CHANGED,\n    BOARD_PERMISSIONS_FOR_USERS_FETCHED,\n} from '../actions/constants';\nimport {BoardPermissionForUser} from \"../model\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardPermissionsForUsersState extends Map<string, BoardPermissionForUser.BoardPermissionForUser> {\n}\n\nexport const initialState: BoardPermissionsForUsersState = Map<string, BoardPermissionForUser.BoardPermissionForUser>();\n\nconst reducer: Reducer<BoardPermissionsForUsersState, InspectioBoardsAction> = (state: BoardPermissionsForUsersState = initialState, action: InspectioBoardsAction): BoardPermissionsForUsersState => {\n    switch (action.type) {\n        case BOARD_PERMISSIONS_FOR_USERS_FETCHED:\n            return upsertAggregates(state, action.payload.boardPermissions);\n        case BOARD_PERMISSIONS_CHANGED: {\n            const boardId = action.payload.boardId;\n            const userId = action.payload.userId;\n            const boardPermission: BoardPermissionForUser.BoardPermissionForUser | undefined = state.valueSeq().toArray()\n                .find(permissionEntry => permissionEntry.boardId === boardId && permissionEntry.userId === userId);\n\n            if (boardPermission) {\n                return state.setIn([boardPermission.uid, 'permissions'], action.payload.permissions);\n            }\n\n            return state;\n        }\n        case BOARD_ACCESS_REVOKED: {\n            const boardId = action.payload.boardId;\n            const userId = action.payload.userId;\n            const boardPermission: BoardPermissionForUser.BoardPermissionForUser | undefined = state.valueSeq().toArray()\n                .find(permissionEntry => permissionEntry.boardId === boardId && permissionEntry.userId === userId);\n\n            if (boardPermission) {\n                return state.remove(boardPermission.uid);\n            }\n\n            return state;\n        }\n        default:\n            return state;\n    }\n};\n\nexport { reducer as saveBoardPermissionsForUsersReducer };\n","import {List, Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {\n    FILTER_ELEMENTS_TREE,\n    UPDATE_BOARD_ELEMENTS_TREE\n} from \"../actions/constants\";\nimport {ElementsTree} from \"../model/ElementsTree\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface ElementsTreeState extends Map<string, ElementsTree>{\n\n}\n\nexport const initialState: ElementsTreeState = Map<string, ElementsTree>();\n\nconst reducer: Reducer<ElementsTreeState, InspectioBoardsAction> = (state: ElementsTreeState = initialState, action: InspectioBoardsAction): ElementsTreeState => {\n    switch (action.type) {\n        case UPDATE_BOARD_ELEMENTS_TREE:\n            const oldElementsTree = state.get(action.payload.boardId, new ElementsTree({elements: List()}));\n            return state.set(action.payload.boardId, oldElementsTree.mergeTree(new ElementsTree({elements: action.payload.elements})));\n        case FILTER_ELEMENTS_TREE:\n            const oldFilteredTree = state.get(action.payload.boardId, new ElementsTree({elements: List()}));\n            return state.set(action.payload.boardId, oldFilteredTree.set('filter', action.payload.filter).set('focus', action.payload.focus || false));\n        default:\n            return state;\n    }\n};\n\nexport {reducer as elementsTreeReducer};\n","import {List, Record} from 'immutable';\nimport {Reducer} from \"redux\";\nimport {\n    FILTER_BOARD_OVERVIEW,\n    HIDE_OWN_BOARDS_ON_OVERVIEW,\n    HIDE_SHARED_BOARDS_ON_OVERVIEW\n} from \"../actions/constants\";\nimport {InspectioBoardsAction} from './index';\n\nexport interface BoardOverviewStateData {\n    filter: string;\n    allSharedBoardsHidden: boolean;\n    allOwnBoardsHidden: boolean;\n}\n\nconst defaultBoardOverviewState: BoardOverviewStateData = {\n    filter: '',\n    allSharedBoardsHidden: false,\n    allOwnBoardsHidden: false,\n};\n\nexport class BoardOverviewState extends Record(defaultBoardOverviewState) implements BoardOverviewStateData {}\n\nexport const initialState = new BoardOverviewState();\n\nconst reducer: Reducer<BoardOverviewState, InspectioBoardsAction> = (state: BoardOverviewState = initialState, action: InspectioBoardsAction): BoardOverviewState => {\n    switch (action.type) {\n        case FILTER_BOARD_OVERVIEW:\n            return state.set('filter', action.payload.filter);\n        case HIDE_SHARED_BOARDS_ON_OVERVIEW:\n            return state.set('allSharedBoardsHidden', action.payload.hide);\n        case HIDE_OWN_BOARDS_ON_OVERVIEW:\n            return state.set('allOwnBoardsHidden', action.payload.hide);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as boardOverviewReducer };\n","import {List, Map} from \"immutable\";\nimport moment from \"moment\";\nimport { Reducer } from 'redux';\nimport {\n    APPEND_HISTORY_ENTRIES,\n    CLEAR_BOARD_HISTORY,\n    PREPEND_HISTORY_ENTRIES,\n    SET_IS_LOADING_HISTORY, SET_NO_MORE_HISTORY_AVAILABLE\n} from \"../actions/constants\";\nimport {BoardHistory, HistoryAction, HistoryCellType, HistoryEntry} from \"../model/HistoryEntry\";\nimport {HistoryState} from \"../model/HistoryState\";\nimport {InspectioBoardsAction} from \"./index\";\n\nexport interface BoardHistoryState extends Map<string, HistoryState>{\n\n}\n\nconst filterDuplicates = (history: BoardHistory): BoardHistory => {\n    const filteredEntries: HistoryEntry[] = [];\n    const historyArr = history.toArray();\n\n    let skipNext: boolean = false;\n    let setPrevLabel: boolean = false;\n    let prevLabel: string = '';\n    let prevRecordedAt: string|null = null;\n    let prevAction: HistoryAction|null = null;\n\n    historyArr.forEach((entry, i) => {\n\n        if(!skipNext && setPrevLabel) {\n            entry = entry.set('label', prevLabel);\n            setPrevLabel = false;\n            prevLabel = '';\n        }\n\n        if(i+1 < historyArr.length) {\n            const next = historyArr[i+1];\n\n            if(entry.userId !== next.userId) {\n                filteredEntries.push(entry);\n                skipNext = false;\n                setPrevLabel = false;\n                prevLabel = '';\n                prevRecordedAt = null;\n                prevAction = null;\n                return true;\n            }\n\n            if(prevRecordedAt && prevAction === entry.action) {\n                entry = entry.set('date', prevRecordedAt);\n            }\n\n            prevRecordedAt = null;\n            prevAction = null;\n\n            if(entry.cellId === next.cellId) {\n                if(entry.action === next.action) {\n                    if(entry.cellType !== HistoryCellType.multiple && entry.cellType !== HistoryCellType.misc) {\n                        prevLabel = entry.label;\n                        prevRecordedAt = entry.date;\n                        prevAction = entry.action;\n                        // Skipping current, so that two edited entries + one added result in one added with label\n                        skipNext = false;\n                        setPrevLabel = true;\n                        return true;\n                    }\n\n                    if(!skipNext) {\n                        filteredEntries.push(entry);\n                    }\n\n                    skipNext = true;\n                    return true;\n                }\n\n                if(entry.action === HistoryAction.edited && next.action === HistoryAction.added) {\n                    skipNext = false;\n                    setPrevLabel = true;\n                    prevLabel = entry.label;\n                    return true;\n                }\n            }\n        }\n\n        if(!skipNext) {\n            filteredEntries.push(entry);\n        }\n\n        skipNext = false;\n        prevLabel = '';\n        setPrevLabel = false;\n        prevAction = null;\n        prevRecordedAt = null;\n    });\n\n    const filteredEntriesList: BoardHistory = List(filteredEntries);\n\n    return filteredEntriesList;\n}\n\nexport const initialState: BoardHistoryState = Map<string, HistoryState>();\n\nconst reducer: Reducer<BoardHistoryState, InspectioBoardsAction> = (state: BoardHistoryState = initialState, action: InspectioBoardsAction): BoardHistoryState => {\n    switch (action.type) {\n        case APPEND_HISTORY_ENTRIES:\n            let aBoardHistory: HistoryState = state.get(action.payload.boardId, new HistoryState());\n            let aNewEntries = action.payload.entries;\n\n            if(aBoardHistory.history.count() > 0) {\n                const currentLastEntry: HistoryEntry = aBoardHistory.history.last();\n                aBoardHistory = aBoardHistory.set(\"history\", aBoardHistory.history.pop());\n                aNewEntries = aNewEntries.unshift(currentLastEntry);\n            }\n\n            aNewEntries = filterDuplicates(aNewEntries);\n            const lastEntry = action.payload.entries.last(new HistoryEntry());\n\n            aBoardHistory = aBoardHistory.set(\"history\", aBoardHistory.history.push(...aNewEntries.toArray()));\n            aBoardHistory = aBoardHistory.set(\"oldestBoardVersion\", lastEntry.boardVersion);\n\n            // Stop if old history entry without cellId is found\n            if(!lastEntry.cellId && lastEntry.cellType === HistoryCellType.misc) {\n\n                const entryDate = moment(lastEntry.date, moment.ISO_8601);\n\n                if(entryDate.isBefore(moment('2019-07-29'))) {\n                    aBoardHistory = aBoardHistory.set('olderPatchesAvailable', false);\n                }\n            }\n\n            return state.set(action.payload.boardId, aBoardHistory);\n        case PREPEND_HISTORY_ENTRIES:\n            let pBoardHistory: HistoryState = state.get(action.payload.boardId, new HistoryState());\n            let pNewEntries = action.payload.entries;\n\n            if(pBoardHistory.history.count() > 0) {\n                const firstEntry: HistoryEntry = pBoardHistory.history.first();\n                pBoardHistory = pBoardHistory.set(\"history\", pBoardHistory.history.shift());\n                pNewEntries = pNewEntries.push(firstEntry);\n            }\n\n            pNewEntries = filterDuplicates(pNewEntries);\n\n            pBoardHistory = pBoardHistory.set(\"history\", pBoardHistory.history.unshift(...pNewEntries.toArray()));\n\n            const pLastEntry = action.payload.entries.last(new HistoryEntry());\n\n            if(!pBoardHistory.oldestBoardVersion) {\n                pBoardHistory = pBoardHistory.set(\"oldestBoardVersion\", pLastEntry.boardVersion);\n            }\n\n            // Stop if old history entry without cellId is found\n            if(!pLastEntry.cellId && pLastEntry.cellType === HistoryCellType.misc) {\n                const entryDate = moment(pLastEntry.date, moment.ISO_8601);\n\n                if(entryDate.isBefore(moment('2019-07-29'))) {\n                    pBoardHistory = pBoardHistory.set('olderPatchesAvailable', false);\n                }\n            }\n\n            return state.set(action.payload.boardId, pBoardHistory);\n        case SET_IS_LOADING_HISTORY:\n            let loadingHistoryState = state.get(action.payload.boardId, new HistoryState());\n            loadingHistoryState = loadingHistoryState.set('loading', action.payload.loading);\n            return state.set(action.payload.boardId, loadingHistoryState);\n        case SET_NO_MORE_HISTORY_AVAILABLE:\n            return state.setIn([action.payload.boardId, 'olderPatchesAvailable'], false);\n        case CLEAR_BOARD_HISTORY:\n            return state.remove(action.payload.boardId);\n        default:\n            return state;\n    }\n\n}\n\nexport {reducer as manageBoardHistory};\n","import {List, Map} from \"immutable\";\nimport { Reducer } from 'redux';\nimport {DEQUEUE_BOARD_CHANGED, ENQUEUE_BOARD_CHANGED} from \"../actions/constants\";\nimport {BoardSync} from \"../model\";\nimport {InspectioBoardsAction} from \"./index\";\n\n\nexport interface BoardQueueState extends Map<string, BoardSync.BoardQueue>{\n\n}\n\nexport const initialState: BoardQueueState = Map<string, List<BoardSync.BoardChanged>>();\n\nconst enqueue = (state: BoardQueueState, boardChanged: BoardSync.BoardChanged): BoardQueueState => {\n    const boardQueue: BoardSync.BoardQueue = state.get(boardChanged.board, List());\n    return state.set(boardChanged.board, boardQueue.push(boardChanged));\n}\n\nconst dequeue = (state: BoardQueueState, events: BoardSync.BoardQueue): BoardQueueState => {\n    const firstBoardChanged = events.first(new BoardSync.BoardChanged(BoardSync.defaultBoardChangedProps));\n\n    let boardQueue: BoardSync.BoardQueue = state.get(firstBoardChanged.board, List());\n    events.forEach(boardChanged => {\n        boardQueue = boardQueue.filter(queuedBoardChanged => queuedBoardChanged.uid !== boardChanged.uid);\n        state = state.set(boardChanged.board, boardQueue);\n    })\n\n    return state;\n}\n\nconst reducer: Reducer<BoardQueueState, InspectioBoardsAction> = (state: BoardQueueState = initialState, action: InspectioBoardsAction): BoardQueueState => {\n    switch (action.type) {\n        case ENQUEUE_BOARD_CHANGED:\n            return enqueue(state, action.payload.boardChanged);\n        case DEQUEUE_BOARD_CHANGED:\n            return dequeue(state, action.payload.events);\n        default:\n            return state;\n    }\n\n}\n\nexport {reducer as manageBoardQueues};","import {List, Map} from 'immutable';\nimport {Reducer} from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport {\n    BOARD_STICKY_TEMPLATES_FETCHED,\n    STICKY_ADVANCED_CONFIG_UPDATED,\n    STICKY_TEMPLATE_SET,\n    STICKY_TEMPLATES_IMPORTED\n} from \"../actions/constants\";\nimport * as Events from \"../actions/events\";\nimport {StickyTemplate} from \"../model/StickyTemplate\";\nimport {InspectioBoardsAction} from './index';\n\ntype Event = ActionType<typeof Events>;\n\nexport interface StickyTemplateState extends Map<string, StickyTemplate> {\n}\n\nexport const initialState: StickyTemplateState = Map<string, StickyTemplate>();\n\nconst reducer: Reducer<StickyTemplateState, InspectioBoardsAction> = (state: StickyTemplateState = initialState, event: InspectioBoardsAction): StickyTemplateState => {\n    switch (event.type) {\n        case BOARD_STICKY_TEMPLATES_FETCHED:\n        case STICKY_TEMPLATES_IMPORTED:\n            return upsertAggregates(state, event.payload.stickyTemplates);\n        case STICKY_TEMPLATE_SET:\n            return upsertAggregates(state, List([event.payload.stickyTemplate]));\n        case STICKY_ADVANCED_CONFIG_UPDATED:\n            return upsertAggregates(state, List([event.payload.stickyTemplate]));\n        default:\n            return state;\n    }\n};\n\nexport {reducer as saveStickyTemplateReducer};\n","import {fromJS} from \"immutable\";\nimport { combineReducers } from 'redux-immutable';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as TeamAction} from \"../../InspectioTeams\";\nimport * as Commands from \"../actions/commands\";\nimport * as Events from \"../actions/events\";\nimport * as Queries from \"../actions/queries\";\nimport {ActiveGraphElementState, saveActiveGraphElementReducer} from \"./applyActiveGraphElementActions\";\nimport {BoardsState, saveBoardReducer} from \"./applyBoardActions\";\nimport {BoardClientsState, saveBoardClientsReducer} from \"./applyBoardClientActions\";\nimport {BoardGraphElementsState, saveBoardGraphElementsReducer} from \"./applyBoardGraphElementActions\";\nimport {BoardInvitationState, saveBoardInvitationReducer} from \"./applyBoardInvitationActions\";\nimport {\n    BoardPermissionsForTeamsState,\n    saveBoardPermissionsForTeamsReducer\n} from \"./applyBoardPermissionsForTeamsActions\";\nimport {\n    BoardPermissionsForUsersState,\n    saveBoardPermissionsForUsersReducer\n} from \"./applyBoardPermissionsForUsersActions\";\nimport {elementsTreeReducer, ElementsTreeState} from \"./applyElementsTreeActions\";\nimport {initialBoardListLoadedReducer} from \"./applyInitialBoardListLoaded\";\nimport {loadBoardsReducer} from \"./applyLoadingBoards\";\nimport {boardOverviewReducer, BoardOverviewState} from \"./applyOverviewActions\";\nimport {BoardHistoryState, manageBoardHistory} from \"./manageBoardHistory\";\nimport {BoardQueueState, manageBoardQueues} from \"./manageBoardQueues\";\nimport {saveStickyTemplateReducer, StickyTemplateState} from \"./StickyTemplate\";\n\nexport type InspectioBoardsAction = ActionType<typeof Commands & typeof Events  & typeof Queries & typeof TeamAction.Event>;\n\nexport interface InspectioBoardsState {\n    boards: BoardsState,\n    boardPermissionsForUsers: BoardPermissionsForUsersState,\n    boardPermissionsForTeams: BoardPermissionsForTeamsState,\n    boardInvitations: BoardInvitationState,\n    boardClients: BoardClientsState,\n    boardGraphElements: BoardGraphElementsState,\n    queues: BoardQueueState,\n    history: BoardHistoryState,\n    loadingBoards: boolean,\n    initialBoardListLoaded: boolean,\n    overview: BoardOverviewState,\n    elementsTree: ElementsTreeState,\n    activeGraphElements: ActiveGraphElementState,\n    StickyTemplate: StickyTemplateState,\n}\n\nexport const inspectioBoardsReducer = combineReducers<InspectioBoardsState, InspectioBoardsAction>({\n    boards: saveBoardReducer,\n    boardPermissionsForUsers: saveBoardPermissionsForUsersReducer,\n    boardPermissionsForTeams: saveBoardPermissionsForTeamsReducer,\n    boardInvitations: saveBoardInvitationReducer,\n    boardClients: saveBoardClientsReducer,\n    boardGraphElements: saveBoardGraphElementsReducer,\n    queues: manageBoardQueues,\n    history: manageBoardHistory,\n    loadingBoards:loadBoardsReducer,\n    initialBoardListLoaded: initialBoardListLoadedReducer,\n    overview: boardOverviewReducer,\n    elementsTree: elementsTreeReducer,\n    activeGraphElements: saveActiveGraphElementReducer,\n    StickyTemplate: saveStickyTemplateReducer,\n}, () => fromJS({\n    boards: undefined,\n    queues: undefined,\n    StickyTemplate: undefined,\n}));\n","import { Reducer } from 'redux';\nimport {START_FETCH_USER_BOARDS, UPDATE_BOARDS} from \"../actions/constants\";\nimport {InspectioBoardsAction} from \"./index\";\n\nconst reducer: Reducer<boolean, InspectioBoardsAction> = (state: boolean = true, action: InspectioBoardsAction): boolean => {\n    switch (action.type) {\n        case START_FETCH_USER_BOARDS:\n            return  true;\n        case UPDATE_BOARDS:\n            return false;\n        default:\n            return state;\n    }\n};\n\nexport { reducer as loadBoardsReducer };","import { Reducer } from 'redux';\nimport {INITIAL_BOARD_LIST_LOADED} from \"../actions/constants\";\nimport {InspectioBoardsAction} from \"./index\";\n\nconst reducer: Reducer<boolean, InspectioBoardsAction> = (state: boolean = false, action: InspectioBoardsAction): boolean => {\n    switch (action.type) {\n        case INITIAL_BOARD_LIST_LOADED:\n            return  true;\n        default:\n            return state;\n    }\n};\n\nexport { reducer as initialBoardListLoadedReducer };\n","import {fromJS} from \"immutable\";\nimport {combineReducers} from \"redux-immutable\";\nimport {ActionType} from \"typesafe-actions\";\nimport {Command} from \"../actions\";\nimport {sidebarReducer, SidebarState} from \"./applySidebarActions\";\n\n\nexport type InspectioLayoutAction = ActionType<typeof Command>;\n\nexport interface InspectioSidebarState {\n    sidebar: SidebarState\n}\n\nexport const inspectioSidebarReducer = combineReducers<InspectioSidebarState, InspectioLayoutAction>({\n    sidebar: sidebarReducer\n}, () => fromJS({sidebar: undefined}));\n\n","import { List } from 'immutable';\nimport { Reducer } from 'redux';\nimport {MESSAGE_HANDLED, NOTIFY} from \"../actions/constants\";\nimport { NotificationModel } from '../model';\nimport {NotificationsAction} from \"./index\";\n\nexport interface MessagesState extends List<NotificationModel.Message> {\n}\n\n// Type-safe initialState!\nexport const initialState: MessagesState = List<NotificationModel.Message>();\n\n\n// Thanks to Redux 4's much simpler typings, we can take away a lot of typings on the reducer side,\n// everything will remain type-safe.\nconst reducer: Reducer<MessagesState, NotificationsAction> = (state: MessagesState = initialState, action: NotificationsAction): MessagesState => {\n    switch (action.type) {\n        case NOTIFY:\n        case MESSAGE_HANDLED:\n            const idx = state.findIndex(lMsg => lMsg.uid === action.payload.uid);\n\n            if (idx > -1) {\n                if (action.payload.handled) {\n                    state = state.remove(idx);\n                } else {\n                    state = state.set(idx, action.payload);\n                }\n            } else {\n                state = state.push(action.payload);\n            }\n            return state;\n        default:\n            return state;\n    }\n};\n\n// Instead of using default export, we use named exports. That way we can group these exports\n// inside the `index.js` folder.\nexport { reducer as applyReducer };\n","import {fromJS} from \"immutable\";\nimport { combineReducers } from 'redux-immutable';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Commands from \"../actions/commands\";\nimport * as Events from \"../actions/events\";\nimport { applyReducer, MessagesState } from './applyNotify';\n\nexport type NotificationsAction = ActionType<typeof Commands> | ActionType<typeof Events>;\n\nexport interface NotificationSystemState {\n    messages: MessagesState\n}\n\nexport const NotificationSystemReducer = combineReducers<NotificationSystemState, NotificationsAction>({\n    messages: applyReducer\n}, () => fromJS({messages: undefined}));\n\n","import { Reducer } from 'redux';\nimport * as actions from '../actions';\nimport { StatusModel } from '../model';\nimport { SocketAction } from './index';\n\nexport interface StatusState extends StatusModel.Status {\n}\n\nexport const initialState = StatusModel.disconnectedStatus();\n\nconst reducer: Reducer<StatusState, SocketAction> = (state: StatusState = initialState, action: SocketAction): StatusState => {\n    switch (action.type) {\n        case actions.Type.CONNECT_SOCKET:\n            return StatusModel.fromtString(StatusModel.STATUS_CONNECTING);\n        case actions.Type.SOCKET_CONNECTED:\n            return StatusModel.fromtString(StatusModel.STATUS_CONNECTED);\n        case actions.Type.SOCKET_DISCONNECTED:\n            return StatusModel.fromtString(StatusModel.STATUS_DISCONNECTED);\n        case actions.Type.DISCONNECT_SOCKET:\n            return StatusModel.fromtString(StatusModel.STATUS_DISCONNECTING);\n        case actions.Type.SOCKET_CONNECTION_LOST:\n            return StatusModel.fromtString(StatusModel.STATUS_CONNECTION_LOST);\n        default:\n            return state;\n    }\n};\n\nexport { reducer as statusReducer };","import { fromJS } from 'immutable';\nimport { combineReducers } from 'redux-immutable';\nimport { ActionType } from 'typesafe-actions';\nimport {\n    connectSocket,\n    disconnectSocket,\n    sendSocketCmd,\n    socketConnected, socketConnectionLost, socketDisconnected,\n} from '../actions/actions';\nimport { statusReducer, StatusState } from './applyStatusActions';\n\nexport type SocketAction = ActionType<typeof sendSocketCmd>\n    | ActionType<typeof socketConnected>\n    | ActionType<typeof socketDisconnected>\n    | ActionType<typeof socketConnectionLost>\n    | ActionType<typeof disconnectSocket>\n    | ActionType<typeof connectSocket>\n    ;\n\nexport interface SocketState {\n    status: StatusState\n}\n\nconst reducer = combineReducers<SocketState, SocketAction>({\n    status: statusReducer,\n}, () => fromJS({status: undefined}));\n\n\nexport { reducer as socketReducer };","import {Map} from \"immutable\";\nimport { Reducer } from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {upsertAggregates} from \"../../core/reducer/applyAggregateChanged\";\nimport * as Action from \"../actions\";\nimport * as Events from \"../actions/events\";\nimport {IioUserInfo} from \"../model/IioUserInfo\";\n\nexport interface IioUserInfoState extends Map<string, IioUserInfo> {\n\n}\n\nexport const initialState = Map<string, IioUserInfo>();\n\ntype Event = ActionType<typeof Events>;\n\nconst reducer: Reducer<IioUserInfoState, Event> = (state: IioUserInfoState = initialState, event: Event): IioUserInfoState => {\n    switch (event.type) {\n        case Action.Type.IIO_USERS_INFO_LOADED:\n            return upsertAggregates(state, event.payload.usersInfo);\n        default:\n            return  state;\n    }\n};\n\nexport {reducer as iioUserInfoReducer};","import {Map} from \"immutable\";\nimport { Reducer } from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as BoardAction} from \"../../InspectioBoards\";\nimport {Action as TeamAction} from \"../../InspectioTeams\";\nimport {ACTIVE_ORGANIZATION_SWITCHED, SIGN_IN, UPDATE_PROFILE} from \"../actions/constants\";\nimport {UserModel} from '../model';\nimport {InspectioUserAction} from \"./index\";\n\nexport interface UserState extends Map<string, UserModel.UserInfo> {\n\n}\n\nexport const initialState = Map<string, UserModel.UserInfo>().set('currentUser', new UserModel.UserInfo(UserModel.defaultUserProps));\n\ntype ReducerActionType = ActionType<typeof BoardAction.Command.addBoard> | ActionType<typeof BoardAction.Command.deleteBoard> | ActionType<InspectioUserAction>;\n\nconst reducer: Reducer<UserState, ReducerActionType> = (state: UserState = initialState, action: ReducerActionType): UserState => {\n    switch (action.type) {\n        case SIGN_IN:\n            return state.set('currentUser', action.payload.user);\n        case BoardAction.Type.ADD_BOARD:\n        case BoardAction.Type.IMPORT_NEW_BOARD:\n            return state.setIn(['currentUser', 'quota'], state.getIn(['currentUser', 'quota']) - 1);\n        case BoardAction.Type.DELETE_BOARD:\n            return state.setIn(['currentUser', 'quota'], state.getIn(['currentUser', 'quota']) + 1);\n        case TeamAction.Type.TEAM_ADDED:\n            return state.setIn(['currentUser', 'teamQuota'], state.getIn(['currentUser', 'teamQuota']) - 1);\n        case TeamAction.Type.TEAM_DELETED:\n            return state.setIn(['currentUser', 'teamQuota'], state.getIn(['currentUser', 'teamQuota']) + 1);\n        case UPDATE_PROFILE:\n            return state.setIn(['currentUser'], action.payload.user);\n        case ACTIVE_ORGANIZATION_SWITCHED:\n            return state.setIn(['currentUser', 'activeOrganization'], action.payload.activeOrganization);\n        default:\n            return state;\n    }\n};\n\nexport {reducer as userReducer}\n","import {Map} from \"immutable\";\nimport { Reducer } from 'redux';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Action from \"../actions\";\nimport * as Events from \"../actions/events\";\n\nexport interface UserSettingsState extends Map<string, number|boolean> {\n\n}\n\nexport const initialState = Map<string, number|boolean>();\n\ntype Event = ActionType<typeof Events>;\n\nconst reducer: Reducer<UserSettingsState, Event> = (state: UserSettingsState = initialState, event: Event): UserSettingsState => {\n    switch (event.type) {\n        case Action.Type.USER_SETTINGS_LOADED:\n            return state.merge(event.payload.userSettings.values, { settings_loaded: true });\n        case Action.Type.USER_SETTING_UPSERTED:\n            return state.set(event.payload.key, event.payload.value);\n        default:\n            return state;\n    }\n};\n\nexport {reducer as userSettingsReducer};","import {fromJS} from \"immutable\";\nimport {combineReducers} from \"redux-immutable\";\nimport {ActionType} from \"typesafe-actions\";\nimport * as Commands from \"../actions/commands\";\nimport * as Events from \"../actions/events\";\nimport {iioUserInfoReducer, IioUserInfoState} from \"./applyIioUsersActions\";\nimport {userReducer, UserState} from \"./applyUserActions\";\nimport {userSettingsReducer, UserSettingsState} from \"./applyUserSettingsActions\";\n\nexport type InspectioUserAction = ActionType<typeof Commands> & ActionType<typeof Events>;\n\nexport interface InspectioUsersState {\n    users: UserState\n    userSettings: UserSettingsState,\n    iioUsersInfo: IioUserInfoState\n}\n\nexport const inspectioUserReducer = combineReducers<InspectioUsersState, InspectioUserAction>({\n    users: userReducer,\n    userSettings: userSettingsReducer,\n    iioUsersInfo: iioUserInfoReducer,\n}, () => fromJS({users: undefined, userSettings: undefined, iioUsersInfo: undefined}));","import { fromJS } from 'immutable';\nimport { Action, AnyAction, Dispatch } from 'redux';\nimport { FormStateMap } from 'redux-form';\nimport { reducer as formReducer } from 'redux-form/immutable';\nimport { combineReducers } from 'redux-immutable';\nimport { ActionType } from 'typesafe-actions';\nimport { authReducer, InspectioAuthState } from './Auth/reducers';\nimport { inspectioBoardsReducer, InspectioBoardsState } from './InspectioBoards/reducers';\nimport {Reducer as InspectioTeams} from \"./InspectioTeams\";\nimport {Reducer as InspectioOrganizations} from \"./Organization\";\nimport {inspectioSidebarReducer, InspectioSidebarState} from \"./Layout/reducers\";\nimport { NotificationSystemReducer, NotificationSystemState } from './NotificationSystem/reducers';\nimport { socketReducer, SocketState } from './Socket/reducers';\nimport { inspectioUserReducer, InspectioUsersState } from './User/reducers';\n\nexport interface ApplicationState {\n    notificationSystem: NotificationSystemState,\n    inspectioBoards: InspectioBoardsState,\n    inspectioUsers: InspectioUsersState,\n    inspectioTeams: InspectioTeams.InspectioTeamsState,\n    inspectioOrganizations: InspectioOrganizations.InspectioOrganizationsState,\n    inspectioSidebar: InspectioSidebarState,\n    form: FormStateMap,\n    auth: InspectioAuthState,\n    socket: SocketState,\n}\n\n// Additional props for connected React components. This prop is passed by default with `connect()`\nexport interface ConnectedReduxProps<A extends Action = AnyAction> {\n    dispatch: Dispatch<A>\n}\n\n// Whenever an action is dispatched, Redux will update each top-level application state property\n// using the reducer with the matching name. It's important that the names match exactly, and that\n// the reducer acts on the corresponding ApplicationState property type.\nexport const rootReducer = combineReducers<ApplicationState, ActionType<any>>(\n    {\n        notificationSystem: NotificationSystemReducer,\n        inspectioBoards: inspectioBoardsReducer,\n        inspectioUsers: inspectioUserReducer,\n        inspectioTeams: InspectioTeams.inspectioTeamsReducer,\n        inspectioOrganizations: InspectioOrganizations.inspectioOrganizationsReducer,\n        inspectioSidebar: inspectioSidebarReducer,\n        form: formReducer,\n        auth: authReducer,\n        socket: socketReducer,\n    },\n    () => fromJS({\n        notificationSystem: undefined,\n        inspectioBoards: undefined,\n        inspectioUsers: undefined,\n        inspectioTeams: undefined,\n        inspectioOrganizations: undefined,\n        inspectioSidebar: undefined,\n        auth: undefined,\n        socket: undefined,\n    }),\n);\n","import {fork, put, take, call} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {standaloneStorageManager} from \"../util\";\n\ntype FlowAction = ActionType<typeof Action.Command.deleteBoard>;\n\nfunction* onDeleteBoard(action: FlowAction) {\n    yield call(standaloneStorageManager.deleteBoard, action.payload.boardId);\n    yield put(NotifyAction.Command.info('Board deleted', 'Board deleted'));\n}\n\nexport function* standaloneDeleteBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.DELETE_BOARD);\n        yield fork(onDeleteBoard, action);\n    }\n}\n","import {List} from \"immutable\";\nimport {call, fork, put, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../../InspectioBoards/index\";\nimport {StandaloneBoard} from \"../storage/types\";\nimport {standaloneStorageManager} from \"../util\";\nimport {createStickyTemplateFromServerData} from \"../../InspectioBoards/model/StickyTemplate\";\nimport {execForEach, execValidate, isFailure, isSuccess, pipe} from \"../../core/validation/either\";\nimport {isArray} from \"../../core/validation/predicates\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\n\ntype Query = ActionType<typeof Action.Query.fetchBoardStickyTemplates>\n\nfunction* handleFetchBoardStickyTemplates(query: Query) {\n    const boardData: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, query.payload.boardId);\n\n    if (!boardData) {\n        return;\n    }\n\n    const result = pipe(\n        boardData.stickyTemplates as any,\n        execValidate([isArray(), \"Response data is not of type Array\"]),\n        execForEach((stickyTemplateData: any) => {\n            return createStickyTemplateFromServerData({\n                boardId: query.payload.boardId,\n                cellType: stickyTemplateData.cellType,\n                template: stickyTemplateData.template,\n                templateType: stickyTemplateData.templateType,\n                templateSchema: stickyTemplateData.templateSchema,\n            });\n        }),\n    );\n\n    if (isFailure(result)) {\n        yield put(NotifyAction.Command.error('Request Error', 'Could not load sticky templates'));\n    }\n\n    if (isSuccess(result)) {\n        const stickyTemplates = List(result.value);\n        yield put(Action.Event.boardStickyTemplatesFetched(stickyTemplates));\n    }\n}\n\nexport function* standaloneFetchBoardStickyTemplatesFlow() {\n    while (true) {\n        const query: Query = yield take([\n            Action.Type.FETCH_BOARD_STICKY_TEMPLATES\n        ]);\n\n        yield fork(handleFetchBoardStickyTemplates, query);\n    }\n}\n","import { fork, put, take, call } from 'redux-saga/effects';\nimport * as Action from '../../InspectioBoards/actions';\nimport {standaloneStorageManager} from \"../util\";\nimport {updateBoards} from \"../../InspectioBoards/actions/commands\";\nimport {Action as UserAction, UserModel} from \"../../User\";\nimport {BoardModel} from \"../../InspectioBoards/model\";\nimport {BoardVersion, defaultBoardVersionProps} from \"../../InspectioBoards/model/BoardVersion\";\nimport {List} from \"immutable\";\nimport {StandaloneBoard, StandaloneUserSetting} from \"../storage/types\";\nimport {UserSettings, UserSettingsValue} from \"../../User/model/UserSettings\";\nimport {initialBoardListLoaded} from \"../../InspectioBoards/actions/events\";\n\nfunction* onLoadUserSettings() {\n    const userSettings: StandaloneUserSetting[] = yield call(standaloneStorageManager.getUserSettings);\n    const values: Record<string, UserSettingsValue> = {};\n\n    userSettings.forEach(setting => {\n        values[setting.key] = setting.value;\n    });\n\n    yield put(UserAction.Event.userSettingsLoaded(new UserSettings({\n        userId: standaloneStorageManager.getUser().userId,\n        values,\n    })));\n}\n\nfunction* onSignIn() {\n    yield put(UserAction.Command.signIn({\n        uid: standaloneStorageManager.getUser().userId,\n        name: 'standalone',\n        email: '',\n        givenName: '',\n        familyName: '',\n        roles: {\n            roleMap: {\n                anonymous: {\n                    type: 'anonymous'\n                }\n            } as any\n        } as any,\n        account: {\n            accountType: 'free'\n        },\n        quota: 1000,\n        teamQuota: 1,\n        displayName: 'standalone',\n        avatarUrl: '',\n        companyName: '',\n        jobTitle: '',\n        signedIn: true\n    } as UserModel.UserInfo));\n}\n\nexport function* onFetchUserBoards() {\n    yield put(Action.Query.startFetchUserBoards());\n\n    const data: StandaloneBoard[] = yield call(standaloneStorageManager.getBoards);\n    yield put(updateBoards(data.map(boardData => new BoardModel.Board({\n        uid: boardData.boardId,\n        name: boardData.name,\n        lastModified: boardData.lastModified,\n        version: new BoardVersion(defaultBoardVersionProps),\n        shared: false,\n        sharedWith: List(),\n        assignedTeams: List(),\n        example: false,\n        owner: standaloneStorageManager.getUser().userId,\n        creator: null,\n        organization: null,\n        tempBoard: false,\n    }))));\n\n    yield put(initialBoardListLoaded());\n}\n\nexport function* standaloneFetchUserBoardsFlow() {\n    while (true) {\n        yield take(Action.Type.FETCH_USER_BOARDS);\n        yield fork(onFetchUserBoards);\n        yield fork(onSignIn);\n        yield fork(onLoadUserSettings);\n    }\n}\n","import {fork, take, put, call, select } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport * as Action from '../../InspectioBoards/actions';\nimport {BoardSnapshot, BoardVersioning} from \"../../InspectioBoards/model\";\nimport {setBoardToSnapshot} from \"../../InspectioBoards/actions/commands\";\nimport {defaultBoardVersionProps} from \"../../InspectioBoards/model/BoardVersion\";\nimport {standaloneStorageManager} from \"../util\";\nimport {StandaloneBoard} from \"../storage/types\";\nimport {onFetchUserBoards} from \"./fetchUserBoardsFlow\";\nimport {makeGetBoards} from \"../../InspectioBoards/selectors/boardList\";\nimport {List} from \"immutable\";\nimport {Board} from \"../../InspectioBoards/model/Board\";\nimport {makeBoardByIdSelector, makeGetBoard} from \"../../InspectioBoards/selectors/board\";\n\ntype FlowAction = ActionType<typeof Action.Query.fetchUserBoard>;\n\nconst onFetchUserBoard = function* (action: FlowAction) {\n    // Make sure that the board list is loaded; Relevant for deep-links to a specific board\n    const boards: List<Board> = yield select(makeGetBoards());\n    if (boards.size < 1) {\n        yield call(onFetchUserBoards);\n    }\n\n    const tempBoard = yield select(makeBoardByIdSelector(action.payload.boardId))\n\n    if(tempBoard && tempBoard.tempBoard) {\n        yield put(Action.Command.setBoardDetailsFetched(action.payload.boardId, false));\n        return;\n    }\n\n    const boardData: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, action.payload.boardId);\n    if (!boardData) {\n        return;\n    }\n\n    const snapshot = new BoardSnapshot.BoardSnapshot({\n        boardId: boardData.boardId,\n        xml: boardData.xml,\n        boardVersion: new BoardVersioning.BoardVersion(defaultBoardVersionProps)\n    });\n\n    yield put(setBoardToSnapshot(snapshot));\n    yield put(Action.Command.setBoardDetailsFetched(action.payload.boardId, true));\n}\n\nexport function* standaloneFetchUserBoardFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.FETCH_USER_BOARD);\n        yield fork(onFetchUserBoard, action);\n    }\n}\n","import {call, fork, put, take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport {Action as Notify} from \"../../NotificationSystem\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {StandaloneBoard} from \"../storage/types\";\nimport {standaloneStorageManager} from \"../util\";\n\ntype FlowAction = ActionType<typeof Action.Command.importExistingBoard>;\n\nfunction* onImportExistingBoard(action: FlowAction) {\n    const board: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, action.payload.board.uid);\n    if (board) {\n        yield call(standaloneStorageManager.updateBoard, {\n            ...board,\n            xml: action.payload.board.xml!,\n        });\n\n        yield put(Action.Command.forceUpdateBoards([action.payload.board]));\n        yield put(Notify.Command.info('Board imported:', action.payload.board.name));\n    }\n}\n\nexport function* standaloneImportExistingBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.IMPORT_EXISTING_BOARD]);\n\n        yield fork(onImportExistingBoard, action);\n    }\n}\n","import {List} from \"immutable\";\nimport {call, fork, put, select, take} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport * as uuid from \"uuid\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {useGraph} from \"../../InspectioBoards/hooks/useGraph\";\nimport {Board} from \"../../InspectioBoards/model/Board\";\nimport {BoardVersion} from \"../../InspectioBoards/model/BoardVersion\";\nimport {makeEmptyGraph} from \"../../InspectioBoards/model/Graph\";\nimport {TeamId} from \"../../InspectioTeams/model/Team\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {UserSelector} from \"../../User\";\nimport {UserId, UserInfo} from \"../../User/model/UserInfo\";\nimport {standaloneStorageManager} from \"../util\";\nimport {onFetchUserBoards} from \"./fetchUserBoardsFlow\";\n\ntype FlowAction = ActionType<typeof Action.Command.importNewBoard>;\n\nfunction* onImportNewBoard(action: FlowAction) {\n    const boardId = action.payload.boardId || uuid.v4();\n\n    if(!action.payload.importTemporary) {\n        yield call(standaloneStorageManager.addBoard, {\n            boardId,\n            name: action.payload.boardName,\n            lastModified: (new Date()).toISOString(),\n            xml: action.payload.boardXml,\n            stickyTemplates: [],\n        });\n\n        yield put(NotifyAction.Command.info('Board created', 'Board created'));\n        yield fork(onFetchUserBoards);\n    } else {\n        const getUser = UserSelector.makeGetCurrentUser();\n        const user: UserInfo = yield select(getUser);\n\n        const board = new Board({\n            uid: boardId,\n            name: action.payload.boardName,\n            xml: action.payload.boardXml,\n            version: new BoardVersion({\n                userId: user.uid,\n                version: 1\n            }),\n            shared: false,\n            sharedWith: List<UserId>(),\n            assignedTeams: List<TeamId>(),\n            owner: null,\n            creator: user.uid,\n            organization: null,\n            tempBoard: true\n        })\n        yield put(Action.Command.updateBoards([board]));\n\n        const [graph, setGraph] = useGraph();\n\n        const emptyGraphWithXml = makeEmptyGraph(board.xml || undefined);\n\n        setGraph(emptyGraphWithXml);\n\n        yield put(Action.Command.saveBoard(board, emptyGraphWithXml));\n    }\n}\n\nexport function* standaloneImportNewBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take([Action.Type.IMPORT_NEW_BOARD]);\n\n        yield fork(onImportNewBoard, action);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../../InspectioBoards/index\";\nimport {StandaloneBoard} from \"../storage/types\";\nimport {standaloneStorageManager} from \"../util\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {List} from \"immutable\";\n\ntype Command = ActionType<typeof Action.Command.importStickyTemplates>\n\nfunction* handleImportStickyTemplates(command: Command) {\n    const board: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, command.payload.boardId);\n    if (!board) {\n        return;\n    }\n\n    const templates = command.payload.stickyTemplates.map(tpl => ({\n        cellType: tpl.cellType,\n        template: tpl.template,\n        templateType: tpl.templateType,\n        templateSchema: tpl.templateSchema || null\n    }));\n\n    yield call(standaloneStorageManager.updateBoard, {\n        ...board,\n        stickyTemplates: templates.toArray()\n    });\n\n    yield put(NotifyAction.Command.info('Card Templates imported', 'You can now use them on the board!'));\n    yield put(Action.Event.stickyTemplatesImported(List(command.payload.stickyTemplates)));\n    command.payload.finishedCb();\n}\n\nexport function* importStickyTemplates() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.IMPORT_STICKY_TEMPLATES\n        ]);\n\n        yield fork(handleImportStickyTemplates, command);\n    }\n}\n","import { call, take, fork } from 'redux-saga/effects';\nimport { ActionType } from 'typesafe-actions';\nimport * as Routes from '../../routes';\nimport * as Action from '../../InspectioBoards/actions';\nimport {standaloneStorageManager} from \"../util\";\n\ntype FlowAction = ActionType<typeof Action.Command.addBoard>;\n\nfunction* onInstallUserBoard(action: FlowAction) {\n    yield call(standaloneStorageManager.addBoard, {\n        boardId: action.payload.board.uid,\n        name: action.payload.board.name,\n        lastModified: (new Date()).toISOString(),\n        xml: '',\n        stickyTemplates: [],\n    });\n\n    yield call(action.payload.history.push, Routes.compileInspectioBoardWorkspace(action.payload.board.uid) as any);\n}\n\nexport function* standaloneInstallUserBoardFlow() {\n\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.ADD_BOARD);\n        yield fork(onInstallUserBoard, action);\n    }\n}\n","import { fork, put, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {\n    loadFirstBoardHistoryChunk,\n    loadNextBoardHistoryChunk,\n    setIsLoadingHistory,\n    setNoMoreHistoryAvailable\n} from \"../../InspectioBoards/actions/commands\";\nimport {LOAD_FIRST_BOARD_HISTORY_CHUNK} from \"../../InspectioBoards/actions/constants\";\n\ntype FlowAction = ActionType<typeof loadNextBoardHistoryChunk> & ActionType<typeof loadFirstBoardHistoryChunk>;\n\nfunction* onLoadFirst(action: ActionType<typeof loadFirstBoardHistoryChunk>) {\n    yield put(setIsLoadingHistory(action.payload.boardId, true));\n    yield put(setNoMoreHistoryAvailable(action.payload.boardId));\n    yield put(setIsLoadingHistory(action.payload.boardId, false));\n}\n\nexport function* standaloneLoadBoardHistoryFlow() {\n    while (true) {\n        const action: FlowAction = yield take(LOAD_FIRST_BOARD_HISTORY_CHUNK);\n        yield fork(onLoadFirst, action);\n    }\n}\n","import {fork, take, call} from \"redux-saga/effects\";\nimport {ActionType} from \"typesafe-actions\";\nimport * as Action from \"../../InspectioBoards/actions\";\nimport {useGraph} from \"../../InspectioBoards/hooks/useGraph\";\nimport {standaloneStorageManager} from \"../util\";\nimport {StandaloneBoard} from \"../storage/types\";\n\ntype FlowAction = ActionType<typeof Action.Command.saveBoard>;\n\nfunction* onSaveBoard(action: FlowAction) {\n    const [graph] = useGraph();\n\n    const board: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, action.payload.board.uid);\n    if (board && !action.payload.board.tempBoard) {\n        yield call(standaloneStorageManager.updateBoard, {\n            ...board,\n            xml: graph.exportXmlSnapshot(),\n        });\n    }\n}\n\nexport function* standaloneSaveBoardFlow() {\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.SAVE_BOARD);\n        yield fork(onSaveBoard, action);\n    }\n}\n","import {call, fork, put, select, take} from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport {Action} from \"../../InspectioBoards/index\";\nimport {createStickyTemplateFromDefault, deriveStickTemplateId} from \"../../InspectioBoards/model/StickyTemplate\";\nimport {makeStickyTemplateSelector} from \"../../InspectioBoards/selectors/StickyTemplate\";\nimport {Action as NotifyAction} from \"../../NotificationSystem\";\nimport {StandaloneBoard} from \"../storage/types\";\nimport {standaloneStorageManager} from \"../util\";\n\ntype SetStickyCommand = ActionType<typeof Action.Command.setStickyTemplate>;\ntype UpdateStickyAdvancedConfigCommand = ActionType<typeof Action.Command.updateStickyAdvancedConfig>;\ntype Command = SetStickyCommand & UpdateStickyAdvancedConfigCommand;\n\nfunction* handleSetStickyTemplate(command: SetStickyCommand) {\n    let stickyTemplate = yield select(makeStickyTemplateSelector(deriveStickTemplateId(command.payload.boardId, command.payload.cellType)));\n\n    const {boardId, cellType, template} = command.payload;\n\n    if (!stickyTemplate) {\n        stickyTemplate = createStickyTemplateFromDefault(\n            boardId,\n            cellType,\n            template\n        )\n    }\n\n    const board: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, command.payload.boardId);\n    if (!board) {\n        return;\n    }\n\n    const oldStickyTemplateData = board.stickyTemplates.find(\n        stickyTemplateData => stickyTemplateData.cellType === stickyTemplate.cellType\n    ) || {\n        cellType,\n        templateType: stickyTemplate.templateType,\n        templateSchema: stickyTemplate.templateSchema || null,\n    };\n\n    yield call(standaloneStorageManager.updateBoard, {\n        ...board,\n        stickyTemplates: [\n            ...board.stickyTemplates.filter(stickyTemplateData => stickyTemplateData.cellType !== stickyTemplate.cellType),\n            {\n                ...oldStickyTemplateData,\n                template,\n            },\n        ]\n    });\n\n    yield put(NotifyAction.Command.info('Sticky Template set', 'Sticky template for ' + cellType + ' set'));\n    yield put(Action.Event.stickyTemplateSet(stickyTemplate.setTemplate(template)));\n}\n\nfunction* handleUpdateStickyAdvancedConfig(command: UpdateStickyAdvancedConfigCommand) {yield null;\n    let stickyTemplate = yield select(makeStickyTemplateSelector(deriveStickTemplateId(command.payload.boardId, command.payload.cellType)));\n\n    if (!stickyTemplate) {\n        stickyTemplate = createStickyTemplateFromDefault(\n            command.payload.boardId,\n            command.payload.cellType,\n            ''\n        );\n    }\n\n    const board: StandaloneBoard|null = yield call(standaloneStorageManager.getBoard, command.payload.boardId);\n    if (!board) {\n        return;\n    }\n\n    const oldStickyTemplateData = board.stickyTemplates.find(\n        stickyTemplateData => stickyTemplateData.cellType === stickyTemplate.cellType\n    ) || {\n        cellType: stickyTemplate.cellType,\n        template: stickyTemplate.template,\n    };\n\n    yield call(standaloneStorageManager.updateBoard, {\n        ...board,\n        stickyTemplates: [\n            ...board.stickyTemplates.filter(stickyTemplateData => stickyTemplateData.cellType !== stickyTemplate.cellType),\n            {\n                ...oldStickyTemplateData,\n                templateType: command.payload.templateType,\n                templateSchema: command.payload.templateSchema || null\n            },\n        ]\n    });\n\n    yield put(NotifyAction.Command.info('Advanced Sticky Config updated', 'Advanced Sticky Config for ' + stickyTemplate.cellType + ' updated'));\n    stickyTemplate = stickyTemplate.setTemplateType(command.payload.templateType);\n\n    if (command.payload.templateSchema) {\n        stickyTemplate = stickyTemplate.setTemplateSchema(command.payload.templateSchema);\n    }\n\n    yield put(Action.Event.stickyAdvancedConfigUpdated(stickyTemplate));\n}\n\nexport function* standaloneUpdateStickyTemplateFlow() {\n    while (true) {\n        const command: Command = yield take([\n            Action.Type.SET_STICKY_TEMPLATE,\n            Action.Type.UPDATE_STICKY_ADVANCED_CONFIG\n        ]);\n\n        if (command.type === Action.Type.SET_STICKY_TEMPLATE) {\n            yield fork(handleSetStickyTemplate, command);\n        } else {\n            yield fork(handleUpdateStickyAdvancedConfig, command);\n        }\n    }\n}\n","import { call, fork, put, take } from 'redux-saga/effects';\nimport {ActionType} from \"typesafe-actions\";\nimport * as Action from \"../../User/actions\";\nimport {standaloneStorageManager} from \"../util\";\n\ntype FlowAction = ActionType<typeof Action.Command.upsertUserSetting>;\n\nfunction* onUpsertUserSetting(action: FlowAction) {\n    yield call(standaloneStorageManager.setUserSetting, action.payload);\n    yield put(Action.Event.userSettingUpserted(action.payload.key, action.payload.value));\n}\n\nexport function* standaloneUpsertUserSetting() {\n    while (true) {\n        const action: FlowAction = yield take(Action.Type.UPSERT_USER_SETTING);\n\n        yield fork(onUpsertUserSetting, action)\n    }\n}\n","import {syncElementsTreeFlow} from \"../../InspectioBoards/sagas\";\nimport {standaloneDeleteBoardFlow} from \"./deleteBoardFlow\";\nimport {standaloneFetchBoardStickyTemplatesFlow} from \"./fetchBoardStickyTemplates\";\nimport {standaloneFetchUserBoardFlow} from \"./fetchUserBoardFlow\";\nimport {standaloneFetchUserBoardsFlow} from \"./fetchUserBoardsFlow\";\nimport {standaloneImportExistingBoardFlow} from \"./importExistingBoardFlow\";\nimport {standaloneImportNewBoardFlow} from \"./importNewBoardFlow\";\nimport {importStickyTemplates} from \"./importStickyTemplates\";\nimport {standaloneInstallUserBoardFlow} from \"./installUserBoardFlow\";\nimport {standaloneLoadBoardHistoryFlow} from \"./loadBoardHistoryFlow\";\nimport {standaloneSaveBoardFlow} from \"./saveBoardFlow\";\nimport {standaloneUpdateStickyTemplateFlow} from \"./updateStickyTemplate\";\nimport {standaloneUpsertUserSetting} from \"./upsertUserSettingFlow\";\n\nconst StandaloneSaga = {\n    standaloneDeleteBoardFlow,\n    standaloneFetchBoardStickyTemplatesFlow,\n    standaloneFetchUserBoardsFlow,\n    standaloneFetchUserBoardFlow,\n    standaloneImportNewBoardFlow,\n    standaloneImportExistingBoardFlow,\n    standaloneInstallUserBoardFlow,\n    standaloneLoadBoardHistoryFlow,\n    standaloneSaveBoardFlow,\n    standaloneUpdateStickyTemplateFlow,\n    standaloneUpsertUserSetting,\n    syncElementsTreeFlow,\n    importStickyTemplates,\n};\n\nexport default StandaloneSaga;\n","import { all, call, delay, spawn, takeEvery } from 'redux-saga/effects';\nimport { sendHttpRequestFlow } from './api/WebData';\nimport * as Auth from './Auth';\nimport { Saga as IbSaga } from \"./InspectioBoards\";\nimport { Saga as TeamsSaga } from \"./InspectioTeams\";\nimport { Saga as SocketSaga } from './Socket';\nimport {Saga as UserSaga} from \"./User\";\nimport { Saga as OrganizationSaga } from \"./Organization\";\nimport {isStandalone} from \"./standalone/util\";\nimport StandaloneSaga from \"./standalone/sagas\";\n\n// Here we use `redux-saga` to trigger actions asynchronously. `redux-saga` uses something called a\n// \"generator function\", which you can read about here:\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*\n\nconst makeRestartable = (saga: any) => {\n    return function* () {\n        yield spawn(function* () {\n            while (true) {\n                try {\n                    yield call(saga);\n                    console.error('unexpected root saga termination. The root sagas are supposed to be sagas that live during the whole app lifetime!', saga);\n                } catch (e) {\n                    console.error('Saga error, the saga will be restarted', e);\n                }\n                yield delay(1000); // Workaround to avoid infinite error loops\n            }\n        });\n    };\n};\n\nconst sagas = isStandalone() ? Object.values(StandaloneSaga) : [\n    Auth.Saga.tokenRefreshFlow,\n    IbSaga.deleteBoardFlow,\n    IbSaga.fetchUserBoardsFlow,\n    IbSaga.fetchUserBoardFlow,\n    IbSaga.fetchBoardPermissionsFlow,\n    IbSaga.fetchOpenBoardInvitationsFlow,\n    IbSaga.installUserBoardFlow,\n    IbSaga.saveBoardFlow,\n    IbSaga.syncFlow,\n    IbSaga.renameBoardFlow,\n    IbSaga.shareBoardFlow,\n    IbSaga.resendBoardInvitationFlow,\n    IbSaga.revokeBoardInvitationFlow,\n    IbSaga.prepareBoardHistoryFlow,\n    IbSaga.loadBoardHistoryFlow,\n    IbSaga.importNewBoardFlow,\n    IbSaga.importExistingBoardFlow,\n    IbSaga.syncElementsTreeFlow,\n    IbSaga.revokeAccessToBoardFlow,\n    IbSaga.changeBoardPermissionsFlow,\n    IbSaga.adminChangeTeamBoardPermissions,\n    IbSaga.fetchBoardClientFlow,\n    IbSaga.fetchBoardGraphElementsFlow,\n    IbSaga.fetchBoardStickyTemplates,\n    IbSaga.updateStickyTemplate,\n    IbSaga.importStickyTemplates,\n    IbSaga.moveUserBoardToOrganization,\n    TeamsSaga.addTeam,\n    TeamsSaga.renameTeam,\n    TeamsSaga.changeTeamDescription,\n    TeamsSaga.inviteUserToTeam,\n    TeamsSaga.removeMemberFromTeam,\n    TeamsSaga.adminGrantTeamAccessToBoard,\n    TeamsSaga.deleteTeam,\n    TeamsSaga.resendTeamInvitation,\n    TeamsSaga.revokeTeamInvitation,\n    TeamsSaga.refreshUserTeams,\n    TeamsSaga.moveTeamToOrganization,\n    SocketSaga.manageSocketConnection,\n    sendHttpRequestFlow,\n    UserSaga.syncUsername,\n    UserSaga.lazyLoadInspectioUserInfo,\n    UserSaga.updateProfile,\n    UserSaga.updatePassword,\n    UserSaga.upsertUserSetting,\n    UserSaga.switchActiveOrganization,\n    OrganizationSaga.fetchOrganizationFlow,\n    OrganizationSaga.fetchUserOrganizations,\n    OrganizationSaga.setUpExplicitOrganization,\n    OrganizationSaga.inviteUserToOrganization,\n    OrganizationSaga.revokeUserOrganizationInvitation,\n    OrganizationSaga.resendUserOrganizationInvitation,\n    OrganizationSaga.promoteUserToOrganizationAdmin,\n    OrganizationSaga.demoteUserToOrganizationMember,\n    OrganizationSaga.removeUserFromOrganization,\n    OrganizationSaga.renameOrganization,\n    OrganizationSaga.removeGuestFromOrganization,\n    OrganizationSaga.turnGuestIntoMember,\n];\n\nconst rootSagas = sagas.map(makeRestartable);\n\nexport default function* rootSaga() {\n    console.log('root saga started');\n    yield all(rootSagas.map((saga: any) => call(saga)));\n}\n","// If you use react-router, don't forget to pass in your history type.\nimport { History } from 'history';\nimport { applyMiddleware, createStore, Store } from 'redux';\n// `react-router-redux` is deprecated, so we use `connected-react-router`.\n// This provides a Redux middleware which connects to our `react-router` instance.\n// We'll be using Redux Devtools. We can use the `composeWithDevTools()`\n// directive so we can pass our middleware along with it\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport { ApplicationState, rootReducer } from './reducer';\nimport rootSaga from './saga';\n\n// Import the state interface and our combined reducers/sagas.\n\nconst configureStore = (\n    history: History,\n    initialState: ApplicationState,\n): Store<ApplicationState> => {\n    // create the composing function for our middlewares\n    const composeEnhancers = composeWithDevTools({});\n    // create the redux-saga middleware\n    const sagaMiddleware = createSagaMiddleware();\n\n    // We'll create our store with the combined reducers/sagas, and the initial Redux state that\n    // we'll be passing from our entry point.\n\n    const store = createStore(\n        rootReducer,\n        initialState,\n        composeEnhancers(applyMiddleware(sagaMiddleware)),\n    ) as Store<ApplicationState> | any;\n\n    // Don't forget to run the root saga, and return the store object.\n    sagaMiddleware.run(rootSaga);\n    return store;\n};\n\nexport default configureStore;","// We use hash history because this example is going to be hosted statically.\n// Normally you would use browser history.\nimport { createBrowserHistory } from 'history';\n\nexport const history = createBrowserHistory();","import Notify from 'notifyjs';\n\nconst logo = require('./theme/img/prooph-software-logo-icon.png');\n\nfunction onPermissionGranted() {\n    console.log('Permission has been granted by the user');\n}\n\nfunction onPermissionDenied() {\n    console.warn('Permission has been denied by the user');\n}\n\nexport const doNotification = (title: string, body: string, link ?: string) => {\n    const notify = new Notify(title, {\n        body,\n        icon: logo,\n        notifyClick () {\n            if (link) {\n                window.location.href=link;\n            }\n            notify.close();\n        }\n    });\n    notify.show();\n};\n\nexport const doNotificationWithPageReload = (title: string, body: string) => {\n    const notify = new Notify(title, {\n        body,\n        icon: logo,\n        notifyClick () {\n            location.reload();\n            notify.close();\n        },\n    });\n    notify.show();\n};\n\nexport default function notify() {\n    if (!Notify.needsPermission) {\n    } else if (Notify.isSupported()) {\n        Notify.requestPermission(onPermissionGranted, onPermissionDenied);\n    }\n};\n","import { fromJS } from 'immutable';\nimport Keycloak from 'keycloak-js';\nimport { KeycloakInstance } from 'keycloak-js';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { initJwtVerify, TokenParsed } from './api/ConfiguredJwtVerify';\nimport {distributeNewToken} from \"./api/util\";\nimport App from './App';\nimport AppStandalone from './AppStandalone';\nimport { Action as Auth } from './Auth';\nimport configureStore from './configureStore';\nimport { history } from './history';\nimport { Action as Notify } from './NotificationSystem';\nimport notify from './notify';\nimport { ApplicationState } from './reducer';\nimport {fetchUserBoards} from \"./InspectioBoards/actions/queries\";\nimport {isStandalone} from \"./standalone/util\";\n\nconst error: any = null;\n\nconst kc: KeycloakInstance = new (Keycloak as any)({\n    url: process.env.REACT_APP_IG_KC_BASE_URL + 'auth',\n    realm: process.env.REACT_APP_IG_KC_REALM,\n    clientId: process.env.REACT_APP_IG_KC_CLIENT_ID,\n});\n\n\n\nif (isStandalone()) {\n    const initialState: ApplicationState = fromJS({});\n\n    const store = configureStore(history, initialState);\n    store.dispatch(fetchUserBoards());\n\n    ReactDOM.render(<AppStandalone store={store} history={history}/>, document.getElementById('root'));\n}\n\nif (!isStandalone()) {\n    // TODO use promiseType: 'native'\n    kc.init({onLoad: 'login-required'})\n        .success(authenticated => {\n            if (authenticated) {\n                const boards = null; /* loadInspectioBoards((err) => {\n                error = err;\n            });*/\n\n                initJwtVerify(kc.token!, kc.tokenParsed as TokenParsed);\n                distributeNewToken(kc.token!);\n\n                const initialState: ApplicationState = boards !== null ? fromJS({\n                    inspectioBoards: fromJS({boards}),\n                }) : fromJS({});\n\n                const store = configureStore(history, initialState);\n\n                store.dispatch(Auth.Event.userAuthenticated(kc));\n\n                if (error) {\n                    const errorMsg: Error = error;\n                    store.dispatch(Notify.Command.error('Failed to load inspectio board from local storage', errorMsg.message));\n                }\n                ReactDOM.render(<App store={store} history={history}/>, document.getElementById('root'));\n            }\n        })\n        // TODO use error component\n        .error(kcError => console.warn({kcError}));\n\n    notify();\n}\n\nexport const logout = () => kc.logout();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n// disabled due self signed certificate\n// serviceWorker.register();\n","module.exports = {\"de\":{\"translation\":{\"app\":{\"title\":\"React + Redux + Semantic UI Skeleton\",\"welcome\":\"Willkommen beim React + Redux + Semantic UI Skeleton\",\"topmenu\":{\"profile\":\"Profil\"},\"form\":{\"rename\":\"Umbenennen\",\"save\":\"Speichern\",\"change\":\"Ändern\",\"cancel\":\"Abbrechen\",\"confirm\":\"Ok\",\"delete\":\"Löschen\",\"remove\":\"Entfernen\",\"upload\":\"Hochladen\",\"resend\":\"Erneut Senden\",\"revoke\":\"Widerrufen\",\"yes\":\"Ja\",\"no\":\"Nein\",\"back\":\"Zurück\",\"generateTemplate\":\"Template generieren\"},\"showLess\":\"Weniger anzeigen\",\"showAll\":\"Alle anzeigen\",\"open\":\"Öffnen\",\"learnMore\":\"Mehr erfahren\",\"stickyTypes\":{\"event\":\"Event\",\"command\":\"Command\",\"aggregate\":\"Aggregate\",\"document\":\"Information\",\"role\":\"Role\",\"hotSpot\":\"Hot Spot\",\"ui\":\"UI / API\",\"externalSystem\":\"External System\",\"boundedContext\":\"Bounded Context\",\"feature\":\"Feature\",\"edge\":\"Connector\",\"policy\":\"Policy\",\"freeText\":\"Text\",\"textCard\":\"Text\",\"icon\":\"Icon\",\"image\":\"Image\"}},\"insp\":{\"hint\":{\"learn_more\":\"Mehr erfahren\",\"got_it\":\"Alles klar\",\"new_logo_header\":\"Neues Logo\",\"new_logo_text\":\"InspectIO ist jetzt prooph board\",\"new_domain_header\":\"Neue Domain\",\"new_domain_text\":\"InspectIO ist jetzt prooph board und ab sofort erreichbar unter https://prooph-board.com. Aktualisiere am besten gleich deine bookmarks!\"},\"overview\":{\"all_boards\":\"Meine Boards\",\"add_board\":\"Neues Board\",\"last_modified\":\"Zuletzt geändert\",\"fetch_board_error\":\"Es gibt ein technisches Problem beim Laden des Boards. Bitte später erneut versuchen oder den Support kontaktieren.\",\"shared_board\":\"Dieses Board wurde mit dir geteilt. Du kannst die Board-Eigenschaften nicht bearbeiten.\",\"empty_space\":\"Hi, deine Übersicht sieht leer aus. Bist du neu hier? Starte mit deinem ersten Board und schau für weitere Infos im Wiki vorbei!\"},\"sidebar\":{\"element_details\":{\"json_invalid_title\":\"Schema Ungültig\",\"json_invalid_text\":\"Das Schema ist kein gültiges JSON Dokument\",\"no_element_selected\":\"Markiere ein Element auf dem Board, um dessen Metadaten zu bearbeiten.\",\"update_similar_elements_text\":\"Auf dem Board befinden sich {{number}} weitere Cards vom gleichen Typ und gleichem Namen.\",\"update_similar_elements_link\":\"Klicke hier, um die Metadaten auf alle Cards zu übertragen.\"},\"no_boards_left_warning\":\"Keine Boards mehr verfügbar\",\"boards_left_warning\":\"Nur noch {{board_count}} Board verfügbar\",\"boards_left_warning_upgrade\":\"Deine Organisation benötigt ein Upgrade\"},\"top_menu\":{\"activity\":\"Activity\",\"element_details\":\"Metadata\",\"import_board\":\"Import Board\",\"export_board\":\"Export Board\",\"activate_lite_mode\":\"Aktiviere den Lite Modus für mehr Performance auf großen Boards und während Video Calls.\",\"lite_mode_is_active\":\"Du befindest dich im Lite Modus.\",\"lite_mode_is_active_details\":\"Elemente werden beim Zoomen nicht ausgeblendet und Schriftgrößen nicht angepasst, um Rechenleistung zu sparen.\"},\"collaboration_modal\":{\"header_team\":\"Team Collaboration\",\"header_history\":\"Change History\",\"text\":\"Diese Funktion ist in der freien Version leider nicht verfügbar.\"},\"board\":{\"add\":\"Neues Board\",\"import\":\"Board Import\",\"import_existing_board\":\"Ein Board mit dem Namen \\\"%name%\\\" existiert bereits. Du kannst das Board mit dem Import überschreiben oder eine Kopie importieren. Was möchtest du tun?\",\"btn_replace_board\":\"Board überschreiben\",\"btn_import_as_new\":\"Als Kopie importieren\",\"edit_header\":\"Board Einstellungen\",\"edit\":\"%name%\",\"share\":\"Permissions\",\"share_sub\":\"Lade andere User ein auf dein Board zu schauen oder es zu bearbeiten.\",\"delete_txt1\":\"Wenn Du das Board nicht mehr benötigst, kannst Du es hier \",\"delete_link\":\"löschen\",\"delete_txt2\":\".\",\"really_delete\":\"Bitte bestätige die Löschung, indem du den Board Namen eingibst. Diese Aktion kann nicht rückgängig gemacht werden!\",\"form\":{\"board_name\":\"Board Name\",\"btn_add_save\":\"Los geht's\",\"btn_share\":\"Share\",\"btn_send_invitation\":\"Einladung versenden\",\"btn_send\":\"Send\",\"email\":\"eMail\",\"team_name\":\"Teamname\"},\"invite_user\":\"User einladen\",\"user_email\":\"Email-Adresse des Users\",\"remove_user_confirm_title\":\"User vom Board entfernen?\",\"remove_user_confirm_text\":\"Soll der User \\\"{{user_name}}\\\" wirklich vom Board entfernt werden?\",\"joined\":{\"title\":\"Board Zugriff\",\"details\":\"Du hast nun Zugriff auf das Board: {{name}}.\"},\"upload\":{\"select_image\":\"Bild auswählen\",\"drag_and_drop_info\":\"Bilder in diesen Bereich ziehen, aus der Zwischenablage einfügen oder hier klicken\",\"upload_failed_title\":\"Upload fehlgeschlagen\",\"upload_failed_text\":\"Bild konnte nicht aktualisiert werden.\",\"deletion_failed_title\":\"Löschung fehlgeschlagen\",\"deletion_failed_text\":\"Bild konnte nicht gelöscht werden.\",\"paste_failed\":\"Einfügen fehlgeschlagen\",\"invalid_file_pasted\":\"Es konnte keine jpeg/png Datei in der Zwischenablage gefunden werden.\"},\"link\":{\"headline\":\"Board verlinken\",\"select_board\":\"Wähle ein Board\",\"select_event\":\"Wähle ein Event\"},\"tasklink\":{\"headline\":\"Task verlinken\"},\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Einladung erneut gesendet\",\"msg\":\"Die Einladung wurde erneut versendet\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Einladung widerrufen\",\"msg\":\"Die Einladung wurde widerrufen\"}}},\"sticky_templates\":{\"headline\":\"Card Templates\",\"descriptions\":\"Hinterlege ein Metadata Template pro Card Typ\",\"advanced_config\":\"Erweiterte Konfiguration\",\"upload_info\":\"JSON-Schema Datei (.json) in diesen Bereich ziehen oder hier klicken, um den Upload-Dialog zu öffnen\",\"uploaded_schema_invalid_title\":\"Datei ungültig\",\"uploaded_schema_invalid_text\":\"Die hochgeladene Datei ist kein gültiges Schema\"},\"layers\":{\"moved_to_sidebar_header\":\"Ebenen sind jetzt in der Sidebar\",\"moved_to_sidebar_details\":\"Wir haben die Ebenen-Funktion in die linke Sidebar integriert, für mehr Übersicht und schnelleren Zugriff. Im prooph board Wiki erfährst du mehr über die Änderung. Der Menüeintrag wird demnächst ebenfalls entfernt.\",\"moved_to_sidebar_wiki_text\":\"Hier geht's zum Wiki Eintrag\",\"delete_confirmation\":\"Wirklich?\",\"add_layer\":\"Ebene hinzufügen\",\"set_global_visibility\":\"Deine Sichtbarkeit der Ebenen mit allen teilen\",\"refresh_layers\":\"neueste Änderungen vom Board übernehmen\",\"folder_title\":\"Einfacher Klick öffnet die Ebene und markiert sie als aktiv.\\nDoppelklick öffnet das Bearbeiten-Menu.\",\"delete_layer\":\"Ebene löschen\",\"visibility\":\"Ebene ein/ausblenden\",\"lock_layer\":\"Ebene sperren/entsperren\",\"edit_name\":\"Name der Ebene ändern\",\"insert_selection\":\"Auf dem Board markierte Elemente in die aktive Ebene verschieben\"},\"move_to_organization_title\":\"Zu Organisation verschieben\",\"move_to_organization_sub_title\":\"Teile das Board mit Mitgliedern einer Organisation\",\"move_to_organization_desc\":\"Du kannst dieses Board in eine Organisation verschieben, um es mit Mitgliedern zu teilen. User, die direkt auf das Board berechtigt, aber keine Mitglieder der Organisation sind, werden als Gäste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.\",\"move_to_organization_select\":\"Wähle eine Organisation\",\"move_to_organization_submit\":\"Verschieben\",\"timer\":{\"modal_header\":\"Timer einstellen\",\"hint\":\"Neue Timer Funktion! Ein laufender Timer ist für alle User auf dem Board sichtbar. Der Ersteller des Timers kann ihn pausieren und stoppen.\"}},\"organisation\":{\"switch_hint_header\":\"Neu: Organisationen\",\"switch_hint\":\"Über eine Organisation kann das Board und User Kontingent eines Accounts mit anderen Usern geteilt werden. Mitglieder können Boards direkt miteinander teilen. Über die Sidebar hast du Zugriff auf das Setup.\",\"switch_hint_ok\":\"Alles klar\",\"create_btn\":\"Organisation erstellen\",\"name\":\"Name der Organisation\",\"not_explicit\":\"Erstelle eine Organisation um Mitarbeiter oder Teamkollegen einzuladen, die dein Board und User Kontingent mit nutzen können.\",\"no_member_quota\":\"Du kannst keine weiteren User in deine Organisation einladen, da dein Kontingent erschöpft ist. Du benötigst ein Upgrade.\",\"no_admin\":\"Du bist kein Administrator für diese Organisation und hast keinen Zugiff auf die Userverwaltung\",\"invite_user\":\"User einladen\",\"user_email\":\"Email-Adresse des Users\",\"remove_user_confirm_title\":\"User von der Organisation entfernen?\",\"remove_user_confirm_text\":\"Soll der User \\\"{{user_name}}\\\" wirklich von der Organisation entfernt werden?\",\"remove_user_confirm_button\":\"Entfernen\",\"send_invitation\":\"Einladung senden\",\"open_invitations\":\"Offene Einladungen\",\"empty_invitations\":\"Es gibt keine offenen Einladungen\",\"promote_to_admin\":\"Zum Admin ernennen\",\"demote_to_member\":\"Admin Berechtigung entziehen\",\"promote_to_member\":\"Zum Mitglied ernennen\",\"member\":\"Mitglieder\",\"guests\":\"Gäste\",\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Einladung erneut gesendet\",\"msg\":\"Die Einladung wurde erneut versendet an: {{email}}\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Einladung widerrufen\",\"msg\":\"Die Einladung wurde widerrufen.\"}}},\"joined\":{\"title\":\"Organisation beigetreten\",\"details\":\"Du bist der Organisation {{name}} beigetreten.\"}},\"team\":{\"overview_add\":\"Add Team\",\"add\":\"Neues Team\",\"team_name\":\"Teamname\",\"team_description\":\"Teambeschreibung\",\"add_user\":\"Add User\",\"invite_user\":\"User einladen\",\"user_email\":\"Email-Adresse des Users\",\"remove_user_confirm_title\":\"User vom Team entfernen?\",\"remove_user_confirm_text\":\"Soll der User \\\"{{user_name}}\\\" wirklich vom Team entfernt werden?\",\"remove_user_confirm_button\":\"Entfernen\",\"remove_board_confirm_title\":\"Team vom Board entfernen?\",\"remove_board_confirm_text\":\"Soll das Team wirklich vom Board \\\"{{board_name}}\\\" entfernt werden?\",\"remove_board_confirm_button\":\"Entfernen\",\"joined\":{\"title\":\"Team beigetreten\",\"details\":\"Du bist dem Team {{team}} beigetreten.\"},\"add_to_board\":\"Team Zugriff auf {{board_name}} einrichten.\",\"grant_access\":\"Team Zugriff einrichten.\",\"choose\":\"Wähle ein Team ...\",\"choose_board\":\"Wähle ein Board ...\",\"remove_from_board_confirm_title\":\"Team vom Board entfernen?\",\"remove_from_board_confirm_text\":\"Soll das Team \\\"{{team_name}}\\\" wirklich vom Board entfernt werden?\",\"remove_team_confirm_title\":\"Team entfernen?\",\"remove_team_confirm_text\":\"Soll das Team \\\"{{team_name}}\\\" wirklich entfernt werden?\",\"open_invitations\":\"Offene Einladungen\",\"empty_invitations\":\"Es gibt keine offenen Einladungen\",\"error_loading_invitations\":\"Beim Laden der Einladungen ist ein Fehler aufgetreten. Bitte später erneut probieren.\",\"send_invitation\":\"Einladung senden\",\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Einladung erneut gesendet\",\"msg\":\"Die Einladung wurde erneut versendet an: {{email}}\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Einladung widerrufen\",\"msg\":\"Die Einladung wurde widerrufen.\"}}},\"no_teams\":\"Du hast noch keine Teams angelegt. Nutze Teams um Arbeitsgruppen zu organisieren und mehreren Usern gleichzeitig Berechtigungen auf Boards zu geben.\",\"move_to_organization_title\":\"Zu Organisation verschieben\",\"move_to_organization_desc\":\"Du kannst dieses Team in eine Organisation verschieben. Mitglieder des Teams, die keine Mitglieder der Organisation sind, werden als Gäste in der Organisation registriert und das User Kontingent der Organisation wird entsprechend reduziert.\",\"move_to_organization_select\":\"Wähle eine Organisation\",\"move_to_organization_submit\":\"Verschieben\"},\"user\":{\"profile_headline\":\"{{user_name}}\",\"profile_subline\":\"Benutzerprofil bearbeiten\",\"quota_reached\":\"Die maximale Anzahl an Boards ist erreicht. Deine Organization benötigt ein Upgrade.\",\"quota_reached_user\":\"Die maximale Anzahl an Boards ist erreicht. Du benötigst ein Upgrade.\",\"quota_reached_guest\":\"Du bist Gast in der aktuellen Organization und kannst keine Boards erstellen.\",\"team_quota_reached\":\"Du hast die maximale Anzahl an Teams erreicht. Mit einem Free Account ist 1 Team möglich. Nach Abschluss der Betaphase wird es die Möglichkeit für ein Upgrade auf eine Basic oder Pro Subscription geben.\",\"form\":{\"labels\":{\"display_name\":\"Anzeigename\",\"email\":\"E-Mail\",\"company\":\"Firma\",\"position\":\"Position\",\"password1\":\"Passwort\",\"password2\":\"Passwort (Wiederholen)\"},\"fields\":{\"display_name\":\"Mein Anzeige Name\",\"email\":\"ich@firma.de\",\"company\":\"Meine Firma\",\"position\":\"Entwickler / CEO / Manager\"}},\"avatar_upload\":{\"select_photo\":\"Foto auswählen\",\"drag_and_drop_info\":\"Bilder in diesen Bereich ziehen oder hier klicken\",\"upload_failed_title\":\"Upload fehlgeschlagen\",\"upload_failed_text\":\"Profilbild konnte nicht aktualisiert werden.\",\"deletion_failed_title\":\"Löschung fehlgeschlagen\",\"deletion_failed_text\":\"Profilbild konnte nicht gelöscht werden.\"},\"change_password\":{\"passwords_not_matching_title\":\"Passwörter stimmen nicht überein\",\"passwords_not_matching_text\":\"Die eingegebenen Passwörter stimmen nicht überein. Bitte versuche es erneut.\"}},\"history\":{\"today\":\"Heute\",\"yesterday\":\"Gestern\",\"twoDaysAgo\":\"Vor 2 Tagen\",\"threeDaysAgo\":\"Vor 3 Tagen\",\"fourDaysAgo\":\"Vor 4 Tagen\",\"fiveDaysAgo\":\"Vor 5 Tagen\",\"sixDaysAgo\":\"Vor 6 Tagen\",\"lastWeek\":\"Letzte Woche\",\"twoWeeksAgo\":\"Vor 2 Wochen\",\"threeWeeksAgo\":\"Vor 3 Wochen\",\"fourWeeksAgo\":\"Vor 4 Wochen\",\"lastMonth\":\"Letzten Monat\",\"older\":\"Älter\"},\"feedback\":{\"info_text\":\"Für den Austausch mit der Community steht ein Chat auf Gitter bereit. Dort lassen sich Fragen klären, Ideen diskutieren und Probleme analysieren. Zusätzlich steht ein Issue Tracker auf Github bereit, wo Feature Requests und Bugs gemeldet werden können.\",\"direct_msg\":\"Möchtest du uns lieber ein direktes Feedback schreiben, kannst du unser Feedback Formular nutzen. Deine Nachricht wird in dem Fall nicht veröffentlicht.\",\"header\":\"Wir freuen uns auf dein Feedback\",\"placeholder\":\"Deine Nachricht an uns\",\"send\":\"Nachricht senden\"},\"subscribe\":{\"betaModal\":{\"header\":\"Beta Phase\",\"content\":\"In der Free Version werden deine Boards im Local Storage deines Browsers gespeichert. Du solltest deine Arbeit regelmäßig exportieren, damit sie nicht verloren geht! Die prooph board SaaS Version befindet sich aktuell in der Betaphase und wird von ausgewählten Teams getestet. In Kürze aktivieren wir das Subscription-Modell und ermöglichen weiteren Teams Zugriff zur SaaS Variante, die prooph board unter anderem um Team Kollaboration und Cloud Speicher erweitert. Willst du schon jetzt diese Features nutzen oder bist an einem Workshop oder Training interessiert, sende uns bitte eine Email an contact@prooph.de. Wir freuen uns auf deine Anfrage!\"}}}}},\"en\":{\"translation\":{\"app\":{\"title\":\"React + Redux + Semantic UI Skeleton\",\"welcome\":\"Welcome to React + Redux + Semantic UI Skeleton\",\"topmenu\":{\"profile\":\"Profil\"},\"form\":{\"rename\":\"Rename\",\"save\":\"Save\",\"change\":\"Change\",\"cancel\":\"Cancel\",\"confirm\":\"Confirm\",\"delete\":\"Delete\",\"remove\":\"Remove\",\"upload\":\"Upload\",\"resend\":\"Resend\",\"revoke\":\"Revoke\",\"reset\":\"Reset\",\"yes\":\"Yes\",\"no\":\"No\",\"back\":\"Back\",\"generateTemplate\":\"Generate template\"},\"showLess\":\"Show less\",\"showAll\":\"Show all\",\"open\":\"Open\",\"learnMore\":\"Learn more\",\"stickyTypes\":{\"event\":\"Event\",\"command\":\"Command\",\"aggregate\":\"Aggregate\",\"document\":\"Information\",\"role\":\"Role\",\"hotSpot\":\"Hot Spot\",\"ui\":\"UI / API\",\"externalSystem\":\"External System\",\"boundedContext\":\"Bounded Context\",\"feature\":\"Feature\",\"edge\":\"Connector\",\"policy\":\"Policy\",\"freeText\":\"Text\",\"textCard\":\"Text\",\"icon\":\"Icon\",\"image\":\"Image\"}},\"insp\":{\"hint\":{\"learn_more\":\"Learn more\",\"got_it\":\"Got it\",\"new_logo_header\":\"New Logo\",\"new_logo_text\":\"InspectIO becomes prooph board\",\"new_domain_header\":\"New Logo\",\"new_domain_text\":\"InspectIO becomes prooph board and is now available at https://prooph-board.com.\"},\"overview\":{\"all_boards\":\"My Boards\",\"add_board\":\"Add Board\",\"last_modified\":\"Last modified\",\"fetch_board_error\":\"Technical error when loading the board. Please try again later or contact support.\",\"shared_board\":\"This is a shared board. You cannot edit the settings.\",\"empty_space\":\"Hi, that space looks empty. New here? Add a board to get started and have a look at the wiki to learn more.\"},\"sidebar\":{\"element_details\":{\"json_invalid_title\":\"Schema Invalid\",\"json_invalid_text\":\"The Payload-Schema is not a valid JSON document\",\"no_element_selected\":\"Select an element on the board to edit its metadata.\",\"update_similar_elements_text\":\"The board contains {{number}} similar cards of same type and with same name.\",\"update_similar_elements_link\":\"Click here, to update them all.\"},\"no_boards_left_warning\":\"No boards left\",\"boards_left_warning\":\"Only {{board_count}} board left\",\"boards_left_warning_upgrade\":\"Your organization needs an upgrade.\"},\"top_menu\":{\"activity\":\"Activity\",\"element_details\":\"Metadata\",\"import_board\":\"Import Board\",\"export_board\":\"Export Board\",\"activate_lite_mode\":\"Activate Lite Mode for extra performance on large boards and during video calls.\",\"lite_mode_is_active\":\"Lite Mode is active.\",\"lite_mode_is_active_details\":\"Elements don't hide when zoomed out and font scaling is deactivated to save CPU time.\"},\"collaboration_modal\":{\"header_team\":\"Team Collaboration\",\"header_history\":\"Change History\",\"text\":\"Unfortunately, this function is not available in the free version.\"},\"board\":{\"add\":\"New Board\",\"import\":\"Import Board\",\"import_existing_board\":\"A board with name \\\"%name%\\\" already exists. You can override the existing one or import a copy. What do you want to do?\",\"btn_replace_board\":\"Override Board\",\"btn_import_as_new\":\"Import copy\",\"edit_header\":\"Manage your preferences\",\"edit\":\"%name%\",\"share\":\"Permissions\",\"share_sub\":\"Invite other people to view and/or edit your board.\",\"delete_txt1\":\"If you don't need the board anymore, you can \",\"delete_link\":\"delete\",\"delete_txt2\":\" it here.\",\"really_delete\":\"Please confirm deletion by entering the board name. This action cannot be undone!\",\"form\":{\"board_name\":\"Board Name\",\"btn_add_save\":\"Let's go\",\"btn_share\":\"Share\",\"btn_send_invitation\":\"Send Invitation\",\"btn_send\":\"Send\",\"email\":\"email\",\"team_name\":\"Team Name\"},\"invite_user\":\"Invite User\",\"user_email\":\"Email Address of User\",\"remove_user_confirm_title\":\"Remove user from board?\",\"remove_user_confirm_text\":\"Do you really want to remove the user \\\"{{user_name}}\\\" from the board?\",\"joined\":{\"title\":\"Board Access\",\"details\":\"You now have access to board: {{name}}.\"},\"upload\":{\"select_image\":\"Select an image\",\"drag_and_drop_info\":\"Drag 'n' drop a file here, paste from clipboard or click to select one\",\"upload_failed_title\":\"Upload failed\",\"upload_failed_text\":\"Image could not be updated.\",\"deletion_failed_title\":\"Deletion failed\",\"deletion_failed_text\":\"Image could not be deleted.\",\"paste_failed\":\"Paste failed\",\"invalid_file_pasted\":\"Could not find any jpeg/png files in the clipboard.\"},\"link\":{\"headline\":\"Link to Board\",\"select_board\":\"Select a Board\",\"select_event\":\"Select an Event\"},\"tasklink\":{\"headline\":\"Link to Task\"},\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Invitation sent\",\"msg\":\"Invitation was resent successfully\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Invitation revoked\",\"msg\":\"The invitation has been revoked\"}}},\"client\":{\"headline\":\"Board API\",\"description\":\"Configure your board client in order to access its content from your own service.\",\"notConfigured\":\"There is currently no external API client configured for this board.\",\"createClient\":\"Click here to create one\",\"clientId\":\"Client-Id\",\"clientSecret\":\"Client-Secret\",\"retrieveSecret\":\"Click here to retrieve\",\"createConfirmTitle\":\"Create an API-Client for the board\",\"createConfirmText\":\"Do you really want to create a new API-Client for this board? You should only do so if you intend to use the API to access board information from an external service.\",\"resetConfirmTitle\":\"Reset the Client-Secret\",\"resetConfirmText\":\"Do you really want to reset the Client-Secret for this board? The old Client-Secret will be rendered invalid and cannot be used to access the API anymore.\",\"removeConfirmTitle\":\"Remove the Client-Secret\",\"removeConfirmText\":\"Do you really want to remove your client? Be aware that any services relying on this client will loose access to the board.\",\"removeText\":\"If you do not need your client anymore you can remove it here. Be aware that any services relying on this client will loose access to the board.\",\"copyToClipboard\":\"Copy to Clipboard\"},\"sticky_templates\":{\"headline\":\"Card Templates\",\"description\":\"Set a metadata template for each card type\",\"advanced_config\":\"Advanced Config\",\"upload_info\":\"Drop a JSON-Schema file (.json) or click here to open the upload dialog\",\"uploaded_schema_invalid_title\":\"Uploaded file invalid\",\"uploaded_schema_invalid_text\":\"The uploaded file is not a valid schema file.\"},\"layers\":{\"moved_to_sidebar_header\":\"Layers are now part of the sidebar\",\"moved_to_sidebar_details\":\"We've moved the layer functionality into the left sidebar for more overview and quicker access. You can read more about the changes in our Wiki. The menu entry will be removed soon.\",\"moved_to_sidebar_wiki_text\":\"Here you can find the wiki page\",\"delete_confirmation\":\"Really?\",\"add_layer\":\"Add layer\",\"set_global_visibility\":\"Share your layer visibility settings with all\",\"refresh_layers\":\"Refresh tree with latest board changes\",\"folder_title\":\"Single click opens the layer and marks it as active.\\nDouble click opens the edit menu.\",\"delete_layer\":\"Delete layer\",\"visibility\":\"Show/hide layer\",\"lock_layer\":\"Lock/unlock layer\",\"edit_name\":\"Change layer name\",\"insert_selection\":\"Move selected elements into active layer\"},\"move_to_organization_title\":\"Move To Organization\",\"move_to_organization_sub_title\":\"Share the board with organization members\",\"move_to_organization_desc\":\"You can move this board to an organization to share it with members. Users who are not member of the organization but have direct access to the board, are registered as guests in the organization. This requires enough user quota, otherwise they will loose access to the board.\",\"move_to_organization_select\":\"Select organization\",\"move_to_organization_submit\":\"Move\",\"timer\":{\"modal_header\":\"Set Timer\",\"hint\":\"New timer feature! A running timer is visible for everybody on the board. The creator of a timer is able to pause and stop it.\"}},\"organisation\":{\"switch_hint_header\":\"New: Organizations\",\"switch_hint\":\"An organization allows to share your board and user quota with others. Members of an organization can share boards directly. In the sidebar you can switch to another organization or create your own.\",\"switch_hint_ok\":\"Got It\",\"create_btn\":\"Create Organisation\",\"name\":\"Name of the organisation\",\"not_explicit\":\"Create an organisation and invite colleagues to share your board and user quota with them.\",\"no_member_quota\":\"The organisation user quota is reached. If you want to invite more users, please upgrade your subscription.\",\"no_admin\":\"Access denied to organisation management. You're missing administration rights.\",\"invite_user\":\"Invite User\",\"user_email\":\"Email Address of User\",\"remove_user_confirm_title\":\"Remove user from organisation?\",\"remove_user_confirm_text\":\"Do you really want to remove the user \\\"{{user_name}}\\\" from the organisation?\",\"remove_user_confirm_button\":\"Remove\",\"send_invitation\":\"Send Invitation\",\"open_invitations\":\"Open Invitations\",\"empty_invitations\":\"No open invitations\",\"promote_to_admin\":\"Promote to admin\",\"demote_to_member\":\"Demote to member\",\"promote_to_member\":\"Promote to member\",\"member\":\"Member\",\"guests\":\"Guests\",\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Invitation sent\",\"msg\":\"Invitation sent again to: {{email}}\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Invitation revoked\",\"msg\":\"The invitation has been revoked.\"}}},\"joined\":{\"title\":\"Organisation joined\",\"details\":\"You joined the organisation {{name}}.\"}},\"team\":{\"overview_add\":\"Add Team\",\"add\":\"New Team\",\"team_name\":\"Team name\",\"team_description\":\"Team Description\",\"add_user\":\"Add User\",\"invite_user\":\"Invite User\",\"user_email\":\"Email Address of User\",\"remove_user_confirm_title\":\"Remove user from team?\",\"remove_user_confirm_text\":\"Do you really want to remove the user \\\"{{user_name}}\\\" from the team?\",\"remove_user_confirm_button\":\"Remove\",\"remove_board_confirm_title\":\"Remove team from board?\",\"remove_board_confirm_text\":\"Do you really want to remove the team from board \\\"{{board_name}}\\\"?\",\"remove_board_confirm_button\":\"Remove\",\"joined\":{\"title\":\"Team joined\",\"details\":\"You joined the team {{team}}.\"},\"add_to_board\":\"Set up team access to {{board_name}}.\",\"grant_access\":\"Set up team access.\",\"choose\":\"Choose a team ...\",\"choose_board\":\"Choose a board ...\",\"remove_from_board_confirm_title\":\"Remove team from board?\",\"remove_from_board_confirm_text\":\"Do you really want to remove the team \\\"{{team_name}}\\\" from the board?\",\"remove_team_confirm_title\":\"Remove team?\",\"remove_team_confirm_text\":\"Do you really want to remove the team \\\"{{team_name}}\\\"?\",\"open_invitations\":\"Open Invitations\",\"empty_invitations\":\"No open invitations\",\"error_loading_invitations\":\"Failed to load invitations. Please try again later.\",\"send_invitation\":\"Send Invitation\",\"notify\":{\"invitation_resend\":{\"success\":{\"title\":\"Invitation sent\",\"msg\":\"Invitation sent again to: {{email}}\"}},\"invitation_revoke\":{\"success\":{\"title\":\"Invitation revoked\",\"msg\":\"The invitation has been revoked.\"}}},\"no_teams\":\"You did not create a team yet. Use teams to organise working groups and assign board permissions to many users at once.\",\"move_to_organization_title\":\"Move To Organization\",\"move_to_organization_desc\":\"You can move this team to an organization. Users who are not already member of the organization will be registered as guests. This requires enough user quota, otherwise they will be removed from the team.\",\"move_to_organization_select\":\"Select organization\",\"move_to_organization_submit\":\"Move\"},\"user\":{\"profile_headline\":\"{{user_name}}\",\"profile_subline\":\"Edit User Profile\",\"quota_reached\":\"The board quota is reached. Your organization needs an upgrade.\",\"quota_reached_user\":\"The board quota is reached. You need an upgrade.\",\"quota_reached_guest\":\"You're guest of the active organization. Guests are not allowed to create organization boards.\",\"team_quota_reached\":\"The team quota is reached. With a free account you can have 1 team maximum. After our beta phase you can upgrade to a basic or professional subscription and increase the quota.\",\"form\":{\"labels\":{\"display_name\":\"Display Name\",\"email\":\"E-Mail\",\"company\":\"Company\",\"position\":\"Job Title\",\"password1\":\"Password\",\"password2\":\"Password (re-enter)\"},\"fields\":{\"display_name\":\"your display name\",\"email\":\"my@company.com\",\"company\":\"My Company\",\"position\":\"Developer / CEO / Manager\"}},\"avatar_upload\":{\"select_photo\":\"Select a Photo\",\"drag_and_drop_info\":\"Drag 'n' drop some files here, or click to select files\",\"upload_failed_title\":\"Upload failed\",\"upload_failed_text\":\"Profile picture could not be updated.\",\"deletion_failed_title\":\"Deletion failed\",\"deletion_failed_text\":\"Profile picture could not be deleted.\"},\"change_password\":{\"passwords_not_matching_title\":\"Passwords do not match\",\"passwords_not_matching_text\":\"The passwords you entered do not match, please try again.\"}},\"history\":{\"today\":\"Today\",\"yesterday\":\"Yesterday\",\"twoDaysAgo\":\"2 days ago\",\"threeDaysAgo\":\"3 days ago\",\"fourDaysAgo\":\"4 days ago\",\"fiveDaysAgo\":\"5 days ago\",\"sixDaysAgo\":\"6 days ago\",\"lastWeek\":\"Last week\",\"twoWeeksAgo\":\"2 weeks ago\",\"threeWeeksAgo\":\"3 weeks ago\",\"fourWeeksAgo\":\"4 weeks ago\",\"lastMonth\":\"Last month\",\"older\":\"Older\"},\"feedback\":{\"info_text\":\"If you want to chat with us and other community members about prooph board you can join our Gitter Chat. Feature requests and bugs can also be submitted to our public Github issue tracker.\",\"direct_msg\":\"To send us a direct message you can use the feedback form below. In this case we don't publish your message.\",\"header\":\"Looking forward to your feedback\",\"placeholder\":\"Your feedback\",\"send\":\"Send message\"},\"subscribe\":{\"betaModal\":{\"header\":\"Beta Phase\",\"content\":\"The free version of prooph board saves all boards in your browser's local storage. Make sure to regularly export your work to avoid losing it! The prooph board SaaS version is currently beta. Selected teams are testing it right now. We will activate our subscription model soon that enables more teams to use advanced features like team collaboration and cloud storage. If you can't wait or looking for prooph board training, please send an email to contact@prooph.de. We're looking forward to hear from you!\"}}}}}}"],"sourceRoot":""}